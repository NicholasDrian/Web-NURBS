/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/cad.ts":
/*!********************!*\
  !*** ./src/cad.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INSTANCE: () => (/* binding */ INSTANCE)\n/* harmony export */ });\n/* harmony import */ var _render_renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./render/renderer */ \"./src/render/renderer.ts\");\n/* harmony import */ var _scene_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scene/scene */ \"./src/scene/scene.ts\");\n/* harmony import */ var _utils_timer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/timer */ \"./src/utils/timer.ts\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stats */ \"./src/stats.ts\");\n/* harmony import */ var _events_eventManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./events/eventManager */ \"./src/events/eventManager.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mode */ \"./src/mode.ts\");\n/* harmony import */ var _commands_cli__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./commands/cli */ \"./src/commands/cli.ts\");\n/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./log */ \"./src/log.ts\");\n/* harmony import */ var _commands_commandManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./commands/commandManager */ \"./src/commands/commandManager.ts\");\n/* harmony import */ var _tests_testScene1__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./tests/testScene1 */ \"./src/tests/testScene1.ts\");\n/* harmony import */ var _window_windowManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./window/windowManager */ \"./src/window/windowManager.ts\");\n/* harmony import */ var _settings_settingsManager__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./settings/settingsManager */ \"./src/settings/settingsManager.ts\");\n/* harmony import */ var _materials_materialManager__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./materials/materialManager */ \"./src/materials/materialManager.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*\n  * Browser Based NURBS Modeling Software\n  * Inspired by Rhino, Vim, CSS\n  *\n  * By Nick Drian\n  *\n*/\nclass CAD {\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.settingsManager = new _settings_settingsManager__WEBPACK_IMPORTED_MODULE_11__.SettingsManager();\n            this.commandManager = new _commands_commandManager__WEBPACK_IMPORTED_MODULE_8__.CommandManager();\n            this.cli = new _commands_cli__WEBPACK_IMPORTED_MODULE_6__.CLI();\n            this.setMode(_mode__WEBPACK_IMPORTED_MODULE_5__.OperatingMode.Command);\n            this.renderer = new _render_renderer__WEBPACK_IMPORTED_MODULE_0__.Renderer();\n            yield this.renderer.init();\n            this.materialManager = new _materials_materialManager__WEBPACK_IMPORTED_MODULE_12__.MaterialManager();\n            this.scene = new _scene_scene__WEBPACK_IMPORTED_MODULE_1__.Scene();\n            yield this.scene.init();\n            this.eventManager = new _events_eventManager__WEBPACK_IMPORTED_MODULE_4__.EventManager();\n            this.log = new _log__WEBPACK_IMPORTED_MODULE_7__.Log();\n            this.renderStats = new _stats__WEBPACK_IMPORTED_MODULE_3__.RenderStats();\n            this.windowManager = new _window_windowManager__WEBPACK_IMPORTED_MODULE_10__.WindowManager();\n            (0,_tests_testScene1__WEBPACK_IMPORTED_MODULE_9__.addTestScene1)();\n        });\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            while (true) {\n                if (document.hasFocus()) {\n                    var frameTimer = new _utils_timer__WEBPACK_IMPORTED_MODULE_2__.Timer();\n                    // update scene\n                    var sceneTimer = new _utils_timer__WEBPACK_IMPORTED_MODULE_2__.Timer();\n                    this.scene.tick();\n                    this.renderStats.setSceneTime(sceneTimer.getTime());\n                    // render\n                    var renderTimer = new _utils_timer__WEBPACK_IMPORTED_MODULE_2__.Timer();\n                    yield this.renderer.render(this.scene);\n                    this.renderStats.setRenderTime(renderTimer.getTime());\n                    //stats\n                    this.renderStats.setFrameTime(frameTimer.getTime());\n                    // windows\n                    this.windowManager.tick();\n                }\n                else {\n                    yield new Promise(r => setTimeout(r, 100));\n                }\n            }\n        });\n    }\n    getMode() {\n        return this.operatingMode;\n    }\n    setMode(operatingMode) {\n        this.operatingMode = operatingMode;\n        if (this.operatingMode == _mode__WEBPACK_IMPORTED_MODULE_5__.OperatingMode.Command) {\n            this.cli.show();\n        }\n        else {\n            this.cli.hide();\n        }\n    }\n    getCli() {\n        return this.cli;\n    }\n    getStats() {\n        return this.renderStats;\n    }\n    getScene() {\n        return this.scene;\n    }\n    getRenderer() {\n        return this.renderer;\n    }\n    getLog() {\n        return this.log;\n    }\n    getCommandManager() {\n        return this.commandManager;\n    }\n    getWindowManager() {\n        return this.windowManager;\n    }\n    getSettingsManager() {\n        return this.settingsManager;\n    }\n    getMaterialManager() {\n        return this.materialManager;\n    }\n    getEventManager() {\n        return this.eventManager;\n    }\n}\nconst INSTANCE = new CAD();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7U0FDakI7SUFDSCxDQUFDO0lBRU0sTUFBTTtRQUNYLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0lBRU0sUUFBUTtRQUNiLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUMxQixDQUFDO0lBRU0sUUFBUTtRQUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBRU0sV0FBVztRQUNoQixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUVNLE1BQU07UUFDWCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDbEIsQ0FBQztJQUVNLGlCQUFpQjtRQUN0QixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDN0IsQ0FBQztJQUVNLGdCQUFnQjtRQUNyQixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztJQUVNLGtCQUFrQjtRQUN2QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDOUIsQ0FBQztJQUVNLGtCQUFrQjtRQUN2QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDOUIsQ0FBQztJQUVNLGVBQWU7UUFDcEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7Q0FFRjtBQUVNLE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jYWQudHM/ZGRlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gXCIuL3JlbmRlci9yZW5kZXJlclwiXG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuL3NjZW5lL3NjZW5lXCI7XG5pbXBvcnQgeyBUaW1lciB9IGZyb20gXCIuL3V0aWxzL3RpbWVyXCJcbmltcG9ydCB7IFJlbmRlclN0YXRzIH0gZnJvbSBcIi4vc3RhdHNcIlxuaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSBcIi4vZXZlbnRzL2V2ZW50TWFuYWdlclwiXG5pbXBvcnQgeyBPcGVyYXRpbmdNb2RlIH0gZnJvbSBcIi4vbW9kZVwiXG5pbXBvcnQgeyBDTEkgfSBmcm9tIFwiLi9jb21tYW5kcy9jbGlcIlxuaW1wb3J0IHsgTG9nIH0gZnJvbSBcIi4vbG9nXCI7XG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gXCIuL2NvbW1hbmRzL2NvbW1hbmRNYW5hZ2VyXCI7XG5pbXBvcnQgeyBhZGRUZXN0U2NlbmUxIH0gZnJvbSBcIi4vdGVzdHMvdGVzdFNjZW5lMVwiO1xuaW1wb3J0IHsgV2luZG93TWFuYWdlciB9IGZyb20gXCIuL3dpbmRvdy93aW5kb3dNYW5hZ2VyXCI7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tIFwiLi9zZXR0aW5ncy9zZXR0aW5nc01hbmFnZXJcIjtcbmltcG9ydCB7IE1hdGVyaWFsTWFuYWdlciB9IGZyb20gXCIuL21hdGVyaWFscy9tYXRlcmlhbE1hbmFnZXJcIjtcblxuLypcbiAgKiBCcm93c2VyIEJhc2VkIE5VUkJTIE1vZGVsaW5nIFNvZnR3YXJlXG4gICogSW5zcGlyZWQgYnkgUmhpbm8sIFZpbSwgQ1NTXG4gICpcbiAgKiBCeSBOaWNrIERyaWFuXG4gICpcbiovXG5cbmNsYXNzIENBRCB7XG5cbiAgcHJpdmF0ZSByZW5kZXJlciE6IFJlbmRlcmVyO1xuICBwcml2YXRlIHNjZW5lITogU2NlbmU7XG4gIHByaXZhdGUgZXZlbnRNYW5hZ2VyITogRXZlbnRNYW5hZ2VyO1xuICBwcml2YXRlIGNvbW1hbmRNYW5hZ2VyITogQ29tbWFuZE1hbmFnZXI7XG4gIHByaXZhdGUgd2luZG93TWFuYWdlciE6IFdpbmRvd01hbmFnZXI7XG4gIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyITogU2V0dGluZ3NNYW5hZ2VyO1xuICBwcml2YXRlIG1hdGVyaWFsTWFuYWdlciE6IE1hdGVyaWFsTWFuYWdlcjtcblxuICBwcml2YXRlIHJlbmRlclN0YXRzITogUmVuZGVyU3RhdHM7XG4gIHByaXZhdGUgb3BlcmF0aW5nTW9kZSE6IE9wZXJhdGluZ01vZGU7XG4gIHByaXZhdGUgY2xpITogQ0xJO1xuICBwcml2YXRlIGxvZyE6IExvZ1xuXG4gIHB1YmxpYyBhc3luYyBpbml0KCkge1xuXG4gICAgdGhpcy5zZXR0aW5nc01hbmFnZXIgPSBuZXcgU2V0dGluZ3NNYW5hZ2VyKCk7XG4gICAgdGhpcy5jb21tYW5kTWFuYWdlciA9IG5ldyBDb21tYW5kTWFuYWdlcigpO1xuICAgIHRoaXMuY2xpID0gbmV3IENMSSgpO1xuXG4gICAgdGhpcy5zZXRNb2RlKE9wZXJhdGluZ01vZGUuQ29tbWFuZCk7XG5cbiAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKCk7XG4gICAgYXdhaXQgdGhpcy5yZW5kZXJlci5pbml0KCk7XG5cbiAgICB0aGlzLm1hdGVyaWFsTWFuYWdlciA9IG5ldyBNYXRlcmlhbE1hbmFnZXIoKTtcblxuICAgIHRoaXMuc2NlbmUgPSBuZXcgU2NlbmUoKTtcbiAgICBhd2FpdCB0aGlzLnNjZW5lLmluaXQoKTtcblxuICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gbmV3IEV2ZW50TWFuYWdlcigpO1xuICAgIHRoaXMubG9nID0gbmV3IExvZygpO1xuXG4gICAgdGhpcy5yZW5kZXJTdGF0cyA9IG5ldyBSZW5kZXJTdGF0cygpO1xuICAgIHRoaXMud2luZG93TWFuYWdlciA9IG5ldyBXaW5kb3dNYW5hZ2VyKCk7XG5cbiAgICBhZGRUZXN0U2NlbmUxKCk7XG5cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBydW4oKSB7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuXG4gICAgICBpZiAoZG9jdW1lbnQuaGFzRm9jdXMoKSkge1xuXG4gICAgICAgIHZhciBmcmFtZVRpbWVyID0gbmV3IFRpbWVyKCk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHNjZW5lXG4gICAgICAgIHZhciBzY2VuZVRpbWVyID0gbmV3IFRpbWVyKCk7XG4gICAgICAgIHRoaXMuc2NlbmUudGljaygpO1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRzLnNldFNjZW5lVGltZShzY2VuZVRpbWVyLmdldFRpbWUoKSk7XG5cbiAgICAgICAgLy8gcmVuZGVyXG4gICAgICAgIHZhciByZW5kZXJUaW1lciA9IG5ldyBUaW1lcigpO1xuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0cy5zZXRSZW5kZXJUaW1lKHJlbmRlclRpbWVyLmdldFRpbWUoKSk7XG5cbiAgICAgICAgLy9zdGF0c1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRzLnNldEZyYW1lVGltZShmcmFtZVRpbWVyLmdldFRpbWUoKSk7XG5cbiAgICAgICAgLy8gd2luZG93c1xuICAgICAgICB0aGlzLndpbmRvd01hbmFnZXIudGljaygpO1xuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAxMDApKTtcblxuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgcHVibGljIGdldE1vZGUoKTogT3BlcmF0aW5nTW9kZSB7XG4gICAgcmV0dXJuIHRoaXMub3BlcmF0aW5nTW9kZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRNb2RlKG9wZXJhdGluZ01vZGU6IE9wZXJhdGluZ01vZGUpOiB2b2lkIHtcbiAgICB0aGlzLm9wZXJhdGluZ01vZGUgPSBvcGVyYXRpbmdNb2RlO1xuXG4gICAgaWYgKHRoaXMub3BlcmF0aW5nTW9kZSA9PSBPcGVyYXRpbmdNb2RlLkNvbW1hbmQpIHtcbiAgICAgIHRoaXMuY2xpLnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jbGkuaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRDbGkoKTogQ0xJIHtcbiAgICByZXR1cm4gdGhpcy5jbGk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RhdHMoKTogUmVuZGVyU3RhdHMge1xuICAgIHJldHVybiB0aGlzLnJlbmRlclN0YXRzO1xuICB9XG5cbiAgcHVibGljIGdldFNjZW5lKCk6IFNjZW5lIHtcbiAgICByZXR1cm4gdGhpcy5zY2VuZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRSZW5kZXJlcigpOiBSZW5kZXJlciB7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyZXI7XG4gIH1cblxuICBwdWJsaWMgZ2V0TG9nKCk6IExvZyB7XG4gICAgcmV0dXJuIHRoaXMubG9nO1xuICB9XG5cbiAgcHVibGljIGdldENvbW1hbmRNYW5hZ2VyKCk6IENvbW1hbmRNYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy5jb21tYW5kTWFuYWdlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaW5kb3dNYW5hZ2VyKCk6IFdpbmRvd01hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLndpbmRvd01hbmFnZXI7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2V0dGluZ3NNYW5hZ2VyKCk6IFNldHRpbmdzTWFuYWdlciB7XG4gICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NNYW5hZ2VyO1xuICB9XG5cbiAgcHVibGljIGdldE1hdGVyaWFsTWFuYWdlcigpOiBNYXRlcmlhbE1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLm1hdGVyaWFsTWFuYWdlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFdmVudE1hbmFnZXIoKTogRXZlbnRNYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudE1hbmFnZXI7XG4gIH1cblxufVxuXG5leHBvcnQgY29uc3QgSU5TVEFOQ0UgPSBuZXcgQ0FEKCk7XG5cblxuXG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/cad.ts\n");

/***/ }),

/***/ "./src/commands/cli.ts":
/*!*****************************!*\
  !*** ./src/commands/cli.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CLI: () => (/* binding */ CLI)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nclass CLI {\n    constructor() {\n        this.element = document.getElementById(\"cli\");\n        this.input = \"\";\n        this.render();\n    }\n    show() {\n        this.element.hidden = false;\n    }\n    hide() {\n        this.element.hidden = true;\n    }\n    processKeyDownEvent(event) {\n        if (event.key == \"Enter\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleInput(this.input);\n            this.clearInput();\n        }\n        else if (event.key == \"Escape\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleInput(\"Escape\");\n            this.clearInput();\n        }\n        else if (event.key == \"Backspace\") {\n            this.deleteLast();\n        }\n        else if (event.key.length == 1) {\n            this.addChar(event.key);\n        }\n    }\n    hasInput() {\n        return this.input != \"\";\n    }\n    clearInput() {\n        this.input = \"\";\n        this.render();\n    }\n    render() {\n        this.element.innerText = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().getInstructions() + this.input;\n    }\n    deleteLast() {\n        if (this.input.length) {\n            this.input = this.input.slice(0, -1);\n            this.render();\n        }\n    }\n    addChar(char) {\n        this.input += char;\n        this.render();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY2xpLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBRTNCLE1BQU0sR0FBRztJQUtaO1FBQ0ksSUFBSSxDQUFDLE9BQU8sR0FBb0IsUUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUVNLElBQUk7UUFDUCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDaEMsQ0FBQztJQUNNLElBQUk7UUFDUCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDL0IsQ0FBQztJQUVNLG1CQUFtQixDQUFDLEtBQW9CO1FBQzNDLElBQUksS0FBSyxDQUFDLEdBQUcsSUFBSSxPQUFPLEVBQUU7WUFDdEIsMENBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckQsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQ3JCO2FBQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxJQUFJLFFBQVEsRUFBRTtZQUM5QiwwQ0FBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ25ELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztTQUNyQjthQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsSUFBSSxXQUFXLEVBQUU7WUFDakMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQ3JCO2FBQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDOUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDM0I7SUFDTCxDQUFDO0lBR00sUUFBUTtRQUNYLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUVNLFVBQVU7UUFDYixJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUVNLE1BQU07UUFDVCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRywwQ0FBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsZUFBZSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN6RixDQUFDO0lBRU8sVUFBVTtRQUNkLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUU7WUFDbkIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDakI7SUFDTCxDQUFDO0lBRU8sT0FBTyxDQUFDLElBQVk7UUFDeEIsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xCLENBQUM7Q0FHSiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NsaS50cz9hNWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuXG5leHBvcnQgY2xhc3MgQ0xJIHtcblxuICAgIHByaXZhdGUgZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbnB1dDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IDxIVE1MRGl2RWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbGlcIik7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBcIlwiO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaG93KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gICAgfVxuICAgIHB1YmxpYyBoaWRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHJvY2Vzc0tleURvd25FdmVudChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgSU5TVEFOQ0UuZ2V0Q29tbWFuZE1hbmFnZXIoKS5oYW5kbGVJbnB1dCh0aGlzLmlucHV0KTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJJbnB1dCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICBJTlNUQU5DRS5nZXRDb21tYW5kTWFuYWdlcigpLmhhbmRsZUlucHV0KFwiRXNjYXBlXCIpO1xuICAgICAgICAgICAgdGhpcy5jbGVhcklucHV0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09IFwiQmFja3NwYWNlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlTGFzdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgdGhpcy5hZGRDaGFyKGV2ZW50LmtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBoYXNJbnB1dCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQgIT0gXCJcIjtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xlYXJJbnB1dCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IFwiXCI7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVyVGV4dCA9IElOU1RBTkNFLmdldENvbW1hbmRNYW5hZ2VyKCkuZ2V0SW5zdHJ1Y3Rpb25zKCkgKyB0aGlzLmlucHV0O1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVsZXRlTGFzdCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmlucHV0ID0gdGhpcy5pbnB1dC5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRDaGFyKGNoYXI6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLmlucHV0ICs9IGNoYXI7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuXG5cbn1cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/cli.ts\n");

/***/ }),

/***/ "./src/commands/clicker.ts":
/*!*********************************!*\
  !*** ./src/commands/clicker.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Clicker: () => (/* binding */ Clicker)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _widgets_cursor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../widgets/cursor */ \"./src/widgets/cursor.ts\");\n\n\n\n\nclass Clicker {\n    constructor() {\n        this.point = null;\n        this.intersectionScreenPos = [-1, -1];\n        this.cursor = new _widgets_cursor__WEBPACK_IMPORTED_MODULE_2__.Cursor();\n        this.onMouseMove();\n    }\n    // TODO: finish\n    onMouseMove() {\n        const mousePos = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos();\n        const ray = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(mousePos[0], mousePos[1]);\n        const tScene = ray.intersectScene(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene());\n        if (tScene) {\n            this.point = ray.at(tScene);\n            this.intersectionScreenPos = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPixelAtPoint(this.point);\n            this.draw();\n            return;\n        }\n        const tGroundPlane = ray.intersectPlane(new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 1)));\n        var pGroundPlane = tGroundPlane ? ray.at(tGroundPlane) : null;\n        this.point = pGroundPlane;\n        if (pGroundPlane && _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getSnapSettings().snapGrid) {\n            pGroundPlane = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().snapToGrid(pGroundPlane);\n            this.point = pGroundPlane;\n        }\n        if (pGroundPlane) {\n            this.intersectionScreenPos = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPixelAtPoint(pGroundPlane);\n            this.draw();\n        }\n    }\n    getPoint() {\n        return this.point;\n    }\n    destroy() {\n        this.cursor.destroy();\n    }\n    draw() {\n        this.cursor.setPosition(this.intersectionScreenPos);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY2xpY2tlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5QztBQUNQO0FBQ1E7QUFFQztBQUlwQyxNQUFNLE9BQU87SUFNbEI7UUFDRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMscUJBQXFCLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxtREFBTSxFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxlQUFlO0lBQ1IsV0FBVztRQUVoQixNQUFNLFFBQVEsR0FBcUIsMENBQVEsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM5RixNQUFNLEdBQUcsR0FBUSwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFekYsTUFBTSxNQUFNLEdBQWtCLEdBQUcsQ0FBQyxjQUFjLENBQUMsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLElBQUksTUFBTSxFQUFFO1lBQ1YsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxxQkFBcUIsR0FBRywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDekYsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ1osT0FBTztTQUNSO1FBRUQsTUFBTSxZQUFZLEdBQWtCLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxrREFBSyxDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUcsSUFBSSxZQUFZLEdBQWdCLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxZQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQzVFLElBQUksQ0FBQyxLQUFLLEdBQUcsWUFBWSxDQUFDO1FBRTFCLElBQUksWUFBWSxJQUFJLDBDQUFRLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsRUFBRTtZQUNyRyxZQUFZLEdBQUcsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLFVBQVUsQ0FBQyxZQUFhLENBQUMsQ0FBQztZQUNwRixJQUFJLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQztTQUMzQjtRQUNELElBQUksWUFBWSxFQUFFO1lBQ2hCLElBQUksQ0FBQyxxQkFBcUIsR0FBRywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMzRixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDYjtJQUNILENBQUM7SUFFTSxRQUFRO1FBQ2IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFFTSxPQUFPO1FBQ1osSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRU8sSUFBSTtRQUNWLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0lBQ3RELENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NsaWNrZXIudHM/ZmVkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BsYW5lXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmF5XCI7XG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tIFwiLi4vd2lkZ2V0cy9jdXJzb3JcIjtcblxuXG5cbmV4cG9ydCBjbGFzcyBDbGlja2VyIHtcblxuICBwcml2YXRlIHBvaW50OiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSBpbnRlcnNlY3Rpb25TY3JlZW5Qb3M6IFtudW1iZXIsIG51bWJlcl07XG4gIHByaXZhdGUgY3Vyc29yOiBDdXJzb3I7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wb2ludCA9IG51bGw7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25TY3JlZW5Qb3MgPSBbLTEsIC0xXTtcbiAgICB0aGlzLmN1cnNvciA9IG5ldyBDdXJzb3IoKTtcbiAgICB0aGlzLm9uTW91c2VNb3ZlKCk7XG4gIH1cblxuICAvLyBUT0RPOiBmaW5pc2hcbiAgcHVibGljIG9uTW91c2VNb3ZlKCk6IHZvaWQge1xuXG4gICAgY29uc3QgbW91c2VQb3M6IFtudW1iZXIsIG51bWJlcl0gPSBJTlNUQU5DRS5nZXRFdmVudE1hbmFnZXIoKS5nZXRNb3VzZUhhbmRsZXIoKS5nZXRNb3VzZVBvcygpO1xuICAgIGNvbnN0IHJheTogUmF5ID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5nZXRSYXlBdFBpeGVsKG1vdXNlUG9zWzBdLCBtb3VzZVBvc1sxXSk7XG5cbiAgICBjb25zdCB0U2NlbmU6IG51bWJlciB8IG51bGwgPSByYXkuaW50ZXJzZWN0U2NlbmUoSU5TVEFOQ0UuZ2V0U2NlbmUoKSk7XG4gICAgaWYgKHRTY2VuZSkge1xuICAgICAgdGhpcy5wb2ludCA9IHJheS5hdCh0U2NlbmUpO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25TY3JlZW5Qb3MgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLmdldFBpeGVsQXRQb2ludCh0aGlzLnBvaW50KTtcbiAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRHcm91bmRQbGFuZTogbnVtYmVyIHwgbnVsbCA9IHJheS5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUodmVjMy5jcmVhdGUoMCwgMCwgMCksIHZlYzMuY3JlYXRlKDAsIDAsIDEpKSk7XG4gICAgdmFyIHBHcm91bmRQbGFuZTogVmVjMyB8IG51bGwgPSB0R3JvdW5kUGxhbmUgPyByYXkuYXQodEdyb3VuZFBsYW5lISkgOiBudWxsO1xuICAgIHRoaXMucG9pbnQgPSBwR3JvdW5kUGxhbmU7XG5cbiAgICBpZiAocEdyb3VuZFBsYW5lICYmIElOU1RBTkNFLmdldFNldHRpbmdzTWFuYWdlcigpLmdldFNuYXBTZXR0aW5nc01hbmFnZXIoKS5nZXRTbmFwU2V0dGluZ3MoKS5zbmFwR3JpZCkge1xuICAgICAgcEdyb3VuZFBsYW5lID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpLnNuYXBUb0dyaWQocEdyb3VuZFBsYW5lISk7XG4gICAgICB0aGlzLnBvaW50ID0gcEdyb3VuZFBsYW5lO1xuICAgIH1cbiAgICBpZiAocEdyb3VuZFBsYW5lKSB7XG4gICAgICB0aGlzLmludGVyc2VjdGlvblNjcmVlblBvcyA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0UGl4ZWxBdFBvaW50KHBHcm91bmRQbGFuZSk7XG4gICAgICB0aGlzLmRyYXcoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0UG9pbnQoKTogVmVjMyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnBvaW50O1xuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5jdXJzb3IuZGVzdHJveSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3KCk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yLnNldFBvc2l0aW9uKHRoaXMuaW50ZXJzZWN0aW9uU2NyZWVuUG9zKTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/clicker.ts\n");

/***/ }),

/***/ "./src/commands/command.ts":
/*!*********************************!*\
  !*** ./src/commands/command.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Command: () => (/* binding */ Command)\n/* harmony export */ });\nclass Command {\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sTUFBZSxPQUFPO0NBUTVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZC50cz80ZDA2Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tbWFuZCB7XG5cbiAgYWJzdHJhY3QgaGFuZGxlSW5wdXQoaW5wdXQ6IHN0cmluZyk6IHZvaWQ7XG4gIGFic3RyYWN0IGhhbmRsZUNsaWNrKCk6IHZvaWQ7XG4gIGFic3RyYWN0IGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkO1xuICBhYnN0cmFjdCBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nO1xuICBhYnN0cmFjdCBpc0ZpbmlzaGVkKCk6IGJvb2xlYW47XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/command.ts\n");

/***/ }),

/***/ "./src/commands/commandManager.ts":
/*!****************************************!*\
  !*** ./src/commands/commandManager.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommandManager: () => (/* binding */ CommandManager)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _commands_cameraCommand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commands/cameraCommand */ \"./src/commands/commands/cameraCommand.ts\");\n/* harmony import */ var _commands_circleCommand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./commands/circleCommand */ \"./src/commands/commands/circleCommand.ts\");\n/* harmony import */ var _commands_constructionPlaneCommand__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./commands/constructionPlaneCommand */ \"./src/commands/commands/constructionPlaneCommand.ts\");\n/* harmony import */ var _commands_curveCommand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./commands/curveCommand */ \"./src/commands/commands/curveCommand.ts\");\n/* harmony import */ var _commands_lineCommand__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./commands/lineCommand */ \"./src/commands/commands/lineCommand.ts\");\n/* harmony import */ var _commands_polylineCommand__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./commands/polylineCommand */ \"./src/commands/commands/polylineCommand.ts\");\n/* harmony import */ var _commands_snapsCommand__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./commands/snapsCommand */ \"./src/commands/commands/snapsCommand.ts\");\n/* harmony import */ var _commands_windowCommand__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./commands/windowCommand */ \"./src/commands/commands/windowCommand.ts\");\n/* harmony import */ var _oneTimeCommands_toggleDarkModeCommand__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./oneTimeCommands/toggleDarkModeCommand */ \"./src/commands/oneTimeCommands/toggleDarkModeCommand.ts\");\n\n\n\n\n\n\n\n\n\n\nclass CommandManager {\n    constructor() {\n        this.currentCommand = null;\n        this.previousInput = \"\";\n    }\n    handleInput(input) {\n        var _a;\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getLog().log(input);\n        input = input.toLowerCase();\n        if (this.currentCommand)\n            this.currentCommand.handleInput(input);\n        else {\n            switch (input) {\n                case \"\":\n                    this.handleInput(this.previousInput);\n                    return;\n                case \"darkmode\":\n                case \"dm\":\n                    (0,_oneTimeCommands_toggleDarkModeCommand__WEBPACK_IMPORTED_MODULE_9__.toggleDarkMode)();\n                    break;\n                case \"constructionplane\":\n                case \"cp\":\n                    this.currentCommand = new _commands_constructionPlaneCommand__WEBPACK_IMPORTED_MODULE_3__.ConstructionPlaneCommand();\n                    break;\n                case \"camera\":\n                case \"cam\":\n                    this.currentCommand = new _commands_cameraCommand__WEBPACK_IMPORTED_MODULE_1__.CameraCommand();\n                    break;\n                case \"line\":\n                case \"ln\":\n                    this.currentCommand = new _commands_lineCommand__WEBPACK_IMPORTED_MODULE_5__.LineCommand();\n                    break;\n                case \"polyline\":\n                case \"pl\":\n                    this.currentCommand = new _commands_polylineCommand__WEBPACK_IMPORTED_MODULE_6__.PolyLineCommand();\n                    break;\n                case \"curve\":\n                case \"c\":\n                    this.currentCommand = new _commands_curveCommand__WEBPACK_IMPORTED_MODULE_4__.CurveCommand();\n                    break;\n                case \"window\":\n                case \"w\":\n                    this.currentCommand = new _commands_windowCommand__WEBPACK_IMPORTED_MODULE_8__.WindowCommand();\n                    break;\n                case \"snaps\":\n                case \"s\":\n                    this.currentCommand = new _commands_snapsCommand__WEBPACK_IMPORTED_MODULE_7__.SnapsCommand();\n                    break;\n                case \"circle\":\n                case \"ci\":\n                    this.currentCommand = new _commands_circleCommand__WEBPACK_IMPORTED_MODULE_2__.CircleCommand();\n                    break;\n                default: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getLog().log(\"Invalid Command\");\n            }\n            this.previousInput = input;\n        }\n        if ((_a = this.currentCommand) === null || _a === void 0 ? void 0 : _a.isFinished()) {\n            this.currentCommand = null;\n        }\n    }\n    handleClickInput() {\n        var _a, _b;\n        (_a = this.currentCommand) === null || _a === void 0 ? void 0 : _a.handleClick();\n        if ((_b = this.currentCommand) === null || _b === void 0 ? void 0 : _b.isFinished()) {\n            this.currentCommand = null;\n        }\n    }\n    handleMouseMove() {\n        var _a;\n        (_a = this.currentCommand) === null || _a === void 0 ? void 0 : _a.handleMouseMove();\n    }\n    getInstructions() {\n        if (this.currentCommand)\n            return this.currentCommand.getInstructions();\n        return \"$\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxlQUFlLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0lBRU0sZUFBZTtRQUNwQixJQUFJLElBQUksQ0FBQyxjQUFjO1lBQUUsT0FBTyxJQUFJLENBQUMsY0FBZSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZFLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZE1hbmFnZXIudHM/NGUwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kXCI7XG5pbXBvcnQgeyBDYW1lcmFDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvY2FtZXJhQ29tbWFuZFwiO1xuaW1wb3J0IHsgQ2lyY2xlQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL2NpcmNsZUNvbW1hbmRcIjtcbmltcG9ydCB7IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL2NvbnN0cnVjdGlvblBsYW5lQ29tbWFuZFwiO1xuaW1wb3J0IHsgQ3VydmVDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvY3VydmVDb21tYW5kXCI7XG5pbXBvcnQgeyBMaW5lQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL2xpbmVDb21tYW5kXCI7XG5pbXBvcnQgeyBQb2x5TGluZUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9wb2x5bGluZUNvbW1hbmRcIjtcbmltcG9ydCB7IFNuYXBzQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL3NuYXBzQ29tbWFuZFwiO1xuaW1wb3J0IHsgV2luZG93Q29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL3dpbmRvd0NvbW1hbmRcIjtcbmltcG9ydCB7IHRvZ2dsZURhcmtNb2RlIH0gZnJvbSBcIi4vb25lVGltZUNvbW1hbmRzL3RvZ2dsZURhcmtNb2RlQ29tbWFuZFwiO1xuXG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kTWFuYWdlciB7XG5cbiAgcHJpdmF0ZSBjdXJyZW50Q29tbWFuZDogQ29tbWFuZCB8IG51bGw7XG4gIHByaXZhdGUgcHJldmlvdXNJbnB1dDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBudWxsO1xuICAgIHRoaXMucHJldmlvdXNJbnB1dCA9IFwiXCI7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlSW5wdXQoaW5wdXQ6IHN0cmluZykge1xuXG4gICAgSU5TVEFOQ0UuZ2V0TG9nKCkubG9nKGlucHV0KTtcblxuICAgIGlucHV0ID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmICh0aGlzLmN1cnJlbnRDb21tYW5kKSB0aGlzLmN1cnJlbnRDb21tYW5kLmhhbmRsZUlucHV0KGlucHV0KTtcbiAgICBlbHNlIHtcbiAgICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgICAgY2FzZSBcIlwiOlxuICAgICAgICAgIHRoaXMuaGFuZGxlSW5wdXQodGhpcy5wcmV2aW91c0lucHV0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhc2UgXCJkYXJrbW9kZVwiOiBjYXNlIFwiZG1cIjpcbiAgICAgICAgICB0b2dnbGVEYXJrTW9kZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY29uc3RydWN0aW9ucGxhbmVcIjogY2FzZSBcImNwXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNhbWVyYVwiOiBjYXNlIFwiY2FtXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBDYW1lcmFDb21tYW5kKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJsaW5lXCI6IGNhc2UgXCJsblwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgTGluZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBvbHlsaW5lXCI6IGNhc2UgXCJwbFwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgUG9seUxpbmVDb21tYW5kKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjdXJ2ZVwiOiBjYXNlIFwiY1wiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgQ3VydmVDb21tYW5kKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ3aW5kb3dcIjogY2FzZSBcIndcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IFdpbmRvd0NvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNuYXBzXCI6IGNhc2UgXCJzXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBTbmFwc0NvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNpcmNsZVwiOiBjYXNlIFwiY2lcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IENpcmNsZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDogSU5TVEFOQ0UuZ2V0TG9nKCkubG9nKFwiSW52YWxpZCBDb21tYW5kXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5wcmV2aW91c0lucHV0ID0gaW5wdXQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudENvbW1hbmQ/LmlzRmluaXNoZWQoKSkge1xuICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG51bGw7XG4gICAgfVxuXG5cbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVDbGlja0lucHV0KCkge1xuICAgIHRoaXMuY3VycmVudENvbW1hbmQ/LmhhbmRsZUNsaWNrKCk7XG4gICAgaWYgKHRoaXMuY3VycmVudENvbW1hbmQ/LmlzRmluaXNoZWQoKSkge1xuICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhbmRsZU1vdXNlTW92ZSgpIHtcbiAgICB0aGlzLmN1cnJlbnRDb21tYW5kPy5oYW5kbGVNb3VzZU1vdmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5jdXJyZW50Q29tbWFuZCkgcmV0dXJuIHRoaXMuY3VycmVudENvbW1hbmQhLmdldEluc3RydWN0aW9ucygpO1xuICAgIHJldHVybiBcIiRcIjtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commandManager.ts\n");

/***/ }),

/***/ "./src/commands/commands/cameraCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/cameraCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CameraCommand: () => (/* binding */ CameraCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nvar CameraCommandMode;\n(function (CameraCommandMode) {\n    CameraCommandMode[CameraCommandMode[\"Menu\"] = 0] = \"Menu\";\n    CameraCommandMode[CameraCommandMode[\"Fovy\"] = 1] = \"Fovy\";\n})(CameraCommandMode || (CameraCommandMode = {}));\nclass CameraCommand extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.mode = CameraCommandMode.Menu;\n        this.finished = false;\n    }\n    handleInput(input) {\n        switch (this.mode) {\n            case CameraCommandMode.Menu:\n                this.handleMenuInput(input);\n                break;\n            case CameraCommandMode.Fovy:\n                this.handleFovyInput(input);\n                break;\n        }\n    }\n    handleClick() {\n    }\n    handleMouseMove() {\n    }\n    getInstructions() {\n        const fovy = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getFovy();\n        const fovyDegrees = (180.0 * fovy / Math.PI).toFixed(1);\n        switch (this.mode) {\n            case CameraCommandMode.Menu:\n                return `0:Exit,  1:FOVY(${fovyDegrees})  $`;\n            case CameraCommandMode.Fovy:\n                return `0:Exit,  Enter New FOVY(${fovyDegrees})  $`;\n            default:\n                console.error(\"Unimplemented CameraCommandMode\");\n                return \"\";\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    handleFovyInput(input) {\n        const inputNum = parseFloat(input);\n        if (inputNum === 0) {\n            this.mode = CameraCommandMode.Menu;\n        }\n        if (inputNum) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().setFovy(Math.PI * inputNum / 180.0);\n            this.mode = CameraCommandMode.Menu;\n        }\n    }\n    handleMenuInput(input) {\n        switch (input) {\n            case \"0\":\n            case \"exit\":\n                this.finished = true;\n                break;\n            case \"1\":\n            case \"fovy\":\n                this.mode = CameraCommandMode.Fovy;\n                break;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvY2FtZXJhQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDQTtBQUVyQyxJQUFLLGlCQUdKO0FBSEQsV0FBSyxpQkFBaUI7SUFDcEIseURBQUk7SUFDSix5REFBSTtBQUNOLENBQUMsRUFISSxpQkFBaUIsS0FBakIsaUJBQWlCLFFBR3JCO0FBRU0sTUFBTSxhQUFjLFNBQVEsNkNBQU87SUFLeEM7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDO1FBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFZSxXQUFXLENBQUMsS0FBYTtRQUN2QyxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDakIsS0FBSyxpQkFBaUIsQ0FBQyxJQUFJO2dCQUN6QixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixNQUFNO1lBQ1IsS0FBSyxpQkFBaUIsQ0FBQyxJQUFJO2dCQUN6QixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixNQUFNO1NBQ1Q7SUFDSCxDQUFDO0lBRWUsV0FBVztJQUUzQixDQUFDO0lBRWUsZUFBZTtJQUUvQixDQUFDO0lBRWUsZUFBZTtRQUM3QixNQUFNLElBQUksR0FBVywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQy9ELE1BQU0sV0FBVyxHQUFXLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hFLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNqQixLQUFLLGlCQUFpQixDQUFDLElBQUk7Z0JBQ3pCLE9BQU8sbUJBQW1CLFdBQVcsTUFBTSxDQUFDO1lBQzlDLEtBQUssaUJBQWlCLENBQUMsSUFBSTtnQkFDekIsT0FBTywyQkFBMkIsV0FBVyxNQUFNLENBQUM7WUFDdEQ7Z0JBQ0UsT0FBTyxDQUFDLEtBQUssQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO2dCQUNqRCxPQUFPLEVBQUUsQ0FBQztTQUNiO0lBQ0gsQ0FBQztJQUVlLFVBQVU7UUFDeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFTyxlQUFlLENBQUMsS0FBYTtRQUNuQyxNQUFNLFFBQVEsR0FBdUIsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3ZELElBQUksUUFBUSxLQUFLLENBQUMsRUFBRTtZQUNsQixJQUFJLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQztTQUNwQztRQUNELElBQUksUUFBUSxFQUFFO1lBQ1osMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUM7WUFDcEUsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7U0FDcEM7SUFDSCxDQUFDO0lBRU8sZUFBZSxDQUFDLEtBQWE7UUFDbkMsUUFBUSxLQUFLLEVBQUU7WUFDYixLQUFLLEdBQUcsQ0FBQztZQUFDLEtBQUssTUFBTTtnQkFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7Z0JBQ3JCLE1BQU07WUFDUixLQUFLLEdBQUcsQ0FBQztZQUFDLEtBQUssTUFBTTtnQkFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7Z0JBQ25DLE1BQU07U0FDVDtJQUNILENBQUM7Q0FHRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL2NhbWVyYUNvbW1hbmQudHM/NWUyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIENhbWVyYUNvbW1hbmRNb2RlIHtcbiAgTWVudSxcbiAgRm92eSxcbn1cblxuZXhwb3J0IGNsYXNzIENhbWVyYUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIG1vZGU6IENhbWVyYUNvbW1hbmRNb2RlO1xuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5tb2RlID0gQ2FtZXJhQ29tbWFuZE1vZGUuTWVudTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXQoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIENhbWVyYUNvbW1hbmRNb2RlLk1lbnU6XG4gICAgICAgIHRoaXMuaGFuZGxlTWVudUlucHV0KGlucHV0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENhbWVyYUNvbW1hbmRNb2RlLkZvdnk6XG4gICAgICAgIHRoaXMuaGFuZGxlRm92eUlucHV0KGlucHV0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgY29uc3QgZm92eTogbnVtYmVyID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5nZXRGb3Z5KCk7XG4gICAgY29uc3QgZm92eURlZ3JlZXM6IHN0cmluZyA9ICgxODAuMCAqIGZvdnkgLyBNYXRoLlBJKS50b0ZpeGVkKDEpO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIENhbWVyYUNvbW1hbmRNb2RlLk1lbnU6XG4gICAgICAgIHJldHVybiBgMDpFeGl0LCAgMTpGT1ZZKCR7Zm92eURlZ3JlZXN9KSAgJGA7XG4gICAgICBjYXNlIENhbWVyYUNvbW1hbmRNb2RlLkZvdnk6XG4gICAgICAgIHJldHVybiBgMDpFeGl0LCAgRW50ZXIgTmV3IEZPVlkoJHtmb3Z5RGVncmVlc30pICAkYDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmltcGxlbWVudGVkIENhbWVyYUNvbW1hbmRNb2RlXCIpO1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRm92eUlucHV0KGlucHV0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBpbnB1dE51bTogbnVtYmVyIHwgdW5kZWZpbmVkID0gcGFyc2VGbG9hdChpbnB1dCk7XG4gICAgaWYgKGlucHV0TnVtID09PSAwKSB7XG4gICAgICB0aGlzLm1vZGUgPSBDYW1lcmFDb21tYW5kTW9kZS5NZW51O1xuICAgIH1cbiAgICBpZiAoaW5wdXROdW0pIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuc2V0Rm92eShNYXRoLlBJICogaW5wdXROdW0gLyAxODAuMCk7XG4gICAgICB0aGlzLm1vZGUgPSBDYW1lcmFDb21tYW5kTW9kZS5NZW51O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTWVudUlucHV0KGlucHV0OiBzdHJpbmcpIHtcbiAgICBzd2l0Y2ggKGlucHV0KSB7XG4gICAgICBjYXNlIFwiMFwiOiBjYXNlIFwiZXhpdFwiOlxuICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiMVwiOiBjYXNlIFwiZm92eVwiOlxuICAgICAgICB0aGlzLm1vZGUgPSBDYW1lcmFDb21tYW5kTW9kZS5Gb3Z5O1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/cameraCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/circleCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/circleCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CircleCommand: () => (/* binding */ CircleCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/circle */ \"./src/geometry/nurbs/circle.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\nvar CircleCommandMode;\n(function (CircleCommandMode) {\n    CircleCommandMode[CircleCommandMode[\"Menu\"] = 0] = \"Menu\";\n    CircleCommandMode[CircleCommandMode[\"ThreePoints\"] = 1] = \"ThreePoints\";\n    CircleCommandMode[CircleCommandMode[\"CenterNormalRadius\"] = 2] = \"CenterNormalRadius\";\n    CircleCommandMode[CircleCommandMode[\"CenterPointPoint\"] = 3] = \"CenterPointPoint\";\n})(CircleCommandMode || (CircleCommandMode = {}));\nclass CircleCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_2__.Clicker();\n        this.mode = CircleCommandMode.Menu;\n        this.v1 = null;\n        this.v2 = null;\n        this.v3 = null;\n        this.curve = null;\n    }\n    handleInput(input) {\n        if (input === \"0\") {\n            this.done();\n            return;\n        }\n        switch (this.mode) {\n            case CircleCommandMode.Menu:\n                if (input === \"1\")\n                    this.mode = CircleCommandMode.ThreePoints;\n                if (input === \"2\")\n                    this.mode = CircleCommandMode.CenterNormalRadius;\n                if (input === \"3\")\n                    this.mode = CircleCommandMode.CenterPointPoint;\n                break;\n            case CircleCommandMode.CenterNormalRadius:\n                if (this.v3) {\n                    const radius = parseFloat(input);\n                    if (!isNaN(radius)) {\n                        const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v2, this.v3));\n                        if (this.curve)\n                            this.curve.destroy();\n                        this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n                        this.done();\n                    }\n                }\n                break;\n        }\n    }\n    handleClick() {\n        if (this.clicker.getPoint()) {\n            switch (this.mode) {\n                case CircleCommandMode.CenterPointPoint:\n                    this.handleClickCenterPointPoint(this.clicker.getPoint());\n                    break;\n                case CircleCommandMode.ThreePoints:\n                    this.handleClickThreePoints(this.clicker.getPoint());\n                    break;\n                case CircleCommandMode.CenterNormalRadius:\n                    this.handleClickCenterNormalRadius(this.clicker.getPoint());\n                    break;\n            }\n        }\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.clicker.getPoint()) {\n            switch (this.mode) {\n                case CircleCommandMode.CenterPointPoint:\n                    this.handleMouseMoveCenterPointPoint(this.clicker.getPoint());\n                    break;\n                case CircleCommandMode.ThreePoints:\n                    this.handleMouseMoveThreePoints(this.clicker.getPoint());\n                    break;\n                case CircleCommandMode.CenterNormalRadius:\n                    this.handleMouseMoveCenterNormalRadius(this.clicker.getPoint());\n                    break;\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case CircleCommandMode.Menu:\n                return \"0:Exit  1:FromThreePoints  2:FromNormalCenterRadius 3:CenterPointPoint $\";\n            case CircleCommandMode.ThreePoints:\n                return this.getInstructionsThreePoints();\n            case CircleCommandMode.CenterPointPoint:\n                return this.getInstructionsCenterPointPoint();\n            case CircleCommandMode.CenterNormalRadius:\n                return this.getInstructionsCenterNormalRadius();\n            default:\n                throw new Error(\"unhandled switch enum\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    handleClickCenterPointPoint(point) {\n        if (!this.v1) {\n            this.v1 = point;\n        }\n        else if (!this.v2) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point))\n                this.v2 = point;\n        }\n        else if (!this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, this.v2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, point)));\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, this.v2);\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n                this.done();\n            }\n        }\n    }\n    handleMouseMoveCenterPointPoint(point) {\n        if (this.v2) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, this.v2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, point)));\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, this.v2);\n                if (this.curve)\n                    this.curve.destroy();\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n            }\n        }\n    }\n    getInstructionsCenterPointPoint() {\n        if (!this.v1) {\n            return \"0:Exit  Click center point.\";\n        }\n        else if (!this.v2) {\n            return \"0:Exit  Click point on circle perimeter.\";\n        }\n        else {\n            return \"0:Exit  Click point to establish plane.\";\n        }\n    }\n    handleClickThreePoints(point) {\n        if (!this.v1) {\n            this.v1 = point;\n        }\n        else if (!this.v2) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point))\n                this.v2 = point;\n        }\n        else if (!this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleThreePoints)(this.v1, this.v2, point);\n                this.done();\n            }\n        }\n    }\n    handleMouseMoveThreePoints(point) {\n        if (this.v2 && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point)) {\n            if (this.curve)\n                this.curve.destroy();\n            this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleThreePoints)(this.v1, this.v2, point);\n        }\n    }\n    getInstructionsThreePoints() {\n        if (this.v1 == null)\n            return \"Exit:0 Click first point\";\n        else if (this.v2 == null)\n            return \"Exit:0 Click second point\";\n        return \"Exit:0 Click third point\";\n    }\n    handleClickCenterNormalRadius(point) {\n        if (!this.v1) {\n            this.v1 = point;\n        }\n        else if (!this.v2) {\n            this.v2 = point;\n        }\n        else if (!this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                this.v3 = point;\n            }\n        }\n        else {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point)) {\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, point);\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v2, this.v3));\n                if (this.curve)\n                    this.curve.destroy();\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n                this.done();\n            }\n        }\n    }\n    handleMouseMoveCenterNormalRadius(point) {\n        if (this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point)) {\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, point);\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v2, this.v3));\n                if (this.curve)\n                    this.curve.destroy();\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n            }\n        }\n    }\n    getInstructionsCenterNormalRadius() {\n        if (!this.v1) {\n            return \"0:Exit  Click center point.\";\n        }\n        else if (!this.v2) {\n            return \"0:Exit  Click start of normal vector.\";\n        }\n        else if (!this.v3) {\n            return \"0:Exit  Click end of normal vector.\";\n        }\n        else {\n            return \"0:Exit  Enter radius or click to determine radius.  $\";\n        }\n    }\n    done() {\n        if (this.curve)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.curve);\n        this.finished = true;\n        this.clicker.destroy();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN6QixDQUFDO0NBR0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9jaXJjbGVDb21tYW5kLnRzPzRiNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgd2FybiB9IGZyb20gXCJjb25zb2xlXCI7XG5pbXBvcnQgeyB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IGNyZWF0ZUNpcmNsZUNlbnRlck5vcm1hbFJhZGl1cywgY3JlYXRlQ2lyY2xlVGhyZWVQb2ludHMgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvY2lyY2xlXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9jdXJ2ZVwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRcIjtcblxuZW51bSBDaXJjbGVDb21tYW5kTW9kZSB7XG4gIE1lbnUsXG4gIFRocmVlUG9pbnRzLFxuICBDZW50ZXJOb3JtYWxSYWRpdXMsXG4gIENlbnRlclBvaW50UG9pbnRcbn1cblxuZXhwb3J0IGNsYXNzIENpcmNsZUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIGNsaWNrZXI6IENsaWNrZXI7XG4gIHByaXZhdGUgbW9kZTogQ2lyY2xlQ29tbWFuZE1vZGU7XG5cbiAgcHJpdmF0ZSB2MTogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgdjI6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIHYzOiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSBjdXJ2ZTogQ3VydmUgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2xpY2tlciA9IG5ldyBDbGlja2VyKCk7XG4gICAgdGhpcy5tb2RlID0gQ2lyY2xlQ29tbWFuZE1vZGUuTWVudTtcbiAgICB0aGlzLnYxID0gbnVsbDtcbiAgICB0aGlzLnYyID0gbnVsbDtcbiAgICB0aGlzLnYzID0gbnVsbDtcbiAgICB0aGlzLmN1cnZlID0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVJbnB1dChpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGlucHV0ID09PSBcIjBcIikge1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIENpcmNsZUNvbW1hbmRNb2RlLk1lbnU6XG4gICAgICAgIGlmIChpbnB1dCA9PT0gXCIxXCIpIHRoaXMubW9kZSA9IENpcmNsZUNvbW1hbmRNb2RlLlRocmVlUG9pbnRzO1xuICAgICAgICBpZiAoaW5wdXQgPT09IFwiMlwiKSB0aGlzLm1vZGUgPSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJOb3JtYWxSYWRpdXM7XG4gICAgICAgIGlmIChpbnB1dCA9PT0gXCIzXCIpIHRoaXMubW9kZSA9IENpcmNsZUNvbW1hbmRNb2RlLkNlbnRlclBvaW50UG9pbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJOb3JtYWxSYWRpdXM6XG4gICAgICAgIGlmICh0aGlzLnYzKSB7XG4gICAgICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSBwYXJzZUZsb2F0KGlucHV0KTtcbiAgICAgICAgICBpZiAoIWlzTmFOKHJhZGl1cykpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbDogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuc3ViKHRoaXMudjIhLCB0aGlzLnYzKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJ2ZSkgdGhpcy5jdXJ2ZS5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQ2lyY2xlQ2VudGVyTm9ybWFsUmFkaXVzKHRoaXMudjEhLCBub3JtYWwsIHJhZGl1cyk7XG4gICAgICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSkge1xuICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJQb2ludFBvaW50OlxuICAgICAgICAgIHRoaXMuaGFuZGxlQ2xpY2tDZW50ZXJQb2ludFBvaW50KHRoaXMuY2xpY2tlci5nZXRQb2ludCgpISk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2lyY2xlQ29tbWFuZE1vZGUuVGhyZWVQb2ludHM6XG4gICAgICAgICAgdGhpcy5oYW5kbGVDbGlja1RocmVlUG9pbnRzKHRoaXMuY2xpY2tlci5nZXRQb2ludCgpISk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2lyY2xlQ29tbWFuZE1vZGUuQ2VudGVyTm9ybWFsUmFkaXVzOlxuICAgICAgICAgIHRoaXMuaGFuZGxlQ2xpY2tDZW50ZXJOb3JtYWxSYWRpdXModGhpcy5jbGlja2VyLmdldFBvaW50KCkhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5vbk1vdXNlTW92ZSgpO1xuICAgIGlmICh0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSkge1xuICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJQb2ludFBvaW50OlxuICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VNb3ZlQ2VudGVyUG9pbnRQb2ludCh0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENpcmNsZUNvbW1hbmRNb2RlLlRocmVlUG9pbnRzOlxuICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VNb3ZlVGhyZWVQb2ludHModGhpcy5jbGlja2VyLmdldFBvaW50KCkhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJOb3JtYWxSYWRpdXM6XG4gICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU1vdmVDZW50ZXJOb3JtYWxSYWRpdXModGhpcy5jbGlja2VyLmdldFBvaW50KCkhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgQ2lyY2xlQ29tbWFuZE1vZGUuTWVudTpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICAxOkZyb21UaHJlZVBvaW50cyAgMjpGcm9tTm9ybWFsQ2VudGVyUmFkaXVzIDM6Q2VudGVyUG9pbnRQb2ludCAkXCI7XG4gICAgICBjYXNlIENpcmNsZUNvbW1hbmRNb2RlLlRocmVlUG9pbnRzOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnN0cnVjdGlvbnNUaHJlZVBvaW50cygpO1xuICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJQb2ludFBvaW50OlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnN0cnVjdGlvbnNDZW50ZXJQb2ludFBvaW50KCk7XG4gICAgICBjYXNlIENpcmNsZUNvbW1hbmRNb2RlLkNlbnRlck5vcm1hbFJhZGl1czpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5zdHJ1Y3Rpb25zQ2VudGVyTm9ybWFsUmFkaXVzKCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmhhbmRsZWQgc3dpdGNoIGVudW1cIik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUNsaWNrQ2VudGVyUG9pbnRQb2ludChwb2ludDogVmVjMyk6IHZvaWQge1xuICAgIGlmICghdGhpcy52MSkge1xuICAgICAgdGhpcy52MSA9IHBvaW50O1xuICAgIH0gZWxzZSBpZiAoIXRoaXMudjIpIHtcbiAgICAgIGlmICghdmVjMy5lcXVhbHModGhpcy52MSwgcG9pbnQpKSB0aGlzLnYyID0gcG9pbnQ7XG4gICAgfSBlbHNlIGlmICghdGhpcy52Mykge1xuICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLnYxLCBwb2ludCkgJiYgIXZlYzMuZXF1YWxzKHRoaXMudjIsIHBvaW50KSkge1xuICAgICAgICBjb25zdCBub3JtYWw6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZShcbiAgICAgICAgICB2ZWMzLmNyb3NzKFxuICAgICAgICAgICAgdmVjMy5zdWIodGhpcy52MSwgdGhpcy52MiksXG4gICAgICAgICAgICB2ZWMzLnN1Yih0aGlzLnYxLCBwb2ludClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJhZGl1czogbnVtYmVyID0gdmVjMy5kaXN0YW5jZSh0aGlzLnYxLCB0aGlzLnYyKTtcbiAgICAgICAgdGhpcy5jdXJ2ZSA9IGNyZWF0ZUNpcmNsZUNlbnRlck5vcm1hbFJhZGl1cyh0aGlzLnYxLCBub3JtYWwsIHJhZGl1cyk7XG4gICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTW91c2VNb3ZlQ2VudGVyUG9pbnRQb2ludChwb2ludDogVmVjMyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnYyKSB7XG4gICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMudjEhLCBwb2ludCkgJiYgIXZlYzMuZXF1YWxzKHRoaXMudjIsIHBvaW50KSkge1xuICAgICAgICBjb25zdCBub3JtYWw6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZShcbiAgICAgICAgICB2ZWMzLmNyb3NzKFxuICAgICAgICAgICAgdmVjMy5zdWIodGhpcy52MSEsIHRoaXMudjIpLFxuICAgICAgICAgICAgdmVjMy5zdWIodGhpcy52MSEsIHBvaW50KVxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHRoaXMudjEhLCB0aGlzLnYyKTtcbiAgICAgICAgaWYgKHRoaXMuY3VydmUpIHRoaXMuY3VydmUuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQ2lyY2xlQ2VudGVyTm9ybWFsUmFkaXVzKHRoaXMudjEhLCBub3JtYWwsIHJhZGl1cyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRJbnN0cnVjdGlvbnNDZW50ZXJQb2ludFBvaW50KCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnYxKSB7XG4gICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGNlbnRlciBwb2ludC5cIjtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnYyKSB7XG4gICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHBvaW50IG9uIGNpcmNsZSBwZXJpbWV0ZXIuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgcG9pbnQgdG8gZXN0YWJsaXNoIHBsYW5lLlwiO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ2xpY2tUaHJlZVBvaW50cyhwb2ludDogVmVjMyk6IHZvaWQge1xuICAgIGlmICghdGhpcy52MSkge1xuICAgICAgdGhpcy52MSA9IHBvaW50O1xuICAgIH0gZWxzZSBpZiAoIXRoaXMudjIpIHtcbiAgICAgIGlmICghdmVjMy5lcXVhbHModGhpcy52MSwgcG9pbnQpKSB0aGlzLnYyID0gcG9pbnQ7XG4gICAgfSBlbHNlIGlmICghdGhpcy52Mykge1xuICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLnYxLCBwb2ludCkgJiYgIXZlYzMuZXF1YWxzKHRoaXMudjIsIHBvaW50KSkge1xuICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQ2lyY2xlVGhyZWVQb2ludHModGhpcy52MSwgdGhpcy52MiwgcG9pbnQpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBoYW5kbGVNb3VzZU1vdmVUaHJlZVBvaW50cyhwb2ludDogVmVjMyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnYyICYmICF2ZWMzLmVxdWFscyh0aGlzLnYyLCBwb2ludCkgJiYgIXZlYzMuZXF1YWxzKHRoaXMudjEhLCBwb2ludCkpIHtcbiAgICAgIGlmICh0aGlzLmN1cnZlKSB0aGlzLmN1cnZlLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuY3VydmUgPSBjcmVhdGVDaXJjbGVUaHJlZVBvaW50cyh0aGlzLnYxISwgdGhpcy52MiwgcG9pbnQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0SW5zdHJ1Y3Rpb25zVGhyZWVQb2ludHMoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy52MSA9PSBudWxsKSByZXR1cm4gXCJFeGl0OjAgQ2xpY2sgZmlyc3QgcG9pbnRcIjtcbiAgICBlbHNlIGlmICh0aGlzLnYyID09IG51bGwpIHJldHVybiBcIkV4aXQ6MCBDbGljayBzZWNvbmQgcG9pbnRcIjtcbiAgICByZXR1cm4gXCJFeGl0OjAgQ2xpY2sgdGhpcmQgcG9pbnRcIjtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ2xpY2tDZW50ZXJOb3JtYWxSYWRpdXMocG9pbnQ6IFZlYzMpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudjEpIHtcbiAgICAgIHRoaXMudjEgPSBwb2ludDtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnYyKSB7XG4gICAgICB0aGlzLnYyID0gcG9pbnQ7XG4gICAgfSBlbHNlIGlmICghdGhpcy52Mykge1xuICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLnYyLCBwb2ludCkpIHtcbiAgICAgICAgdGhpcy52MyA9IHBvaW50O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMudjEsIHBvaW50KSkge1xuICAgICAgICBjb25zdCByYWRpdXM6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UodGhpcy52MSwgcG9pbnQpO1xuICAgICAgICBjb25zdCBub3JtYWw6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1Yih0aGlzLnYyLCB0aGlzLnYzKSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnZlKSB0aGlzLmN1cnZlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jdXJ2ZSA9IGNyZWF0ZUNpcmNsZUNlbnRlck5vcm1hbFJhZGl1cyh0aGlzLnYxLCBub3JtYWwsIHJhZGl1cyk7XG4gICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwcml2YXRlIGhhbmRsZU1vdXNlTW92ZUNlbnRlck5vcm1hbFJhZGl1cyhwb2ludDogVmVjMyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnYzKSB7XG4gICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMudjEhLCBwb2ludCkpIHtcbiAgICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHRoaXMudjEhLCBwb2ludCk7XG4gICAgICAgIGNvbnN0IG5vcm1hbDogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuc3ViKHRoaXMudjIhLCB0aGlzLnYzKSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnZlKSB0aGlzLmN1cnZlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jdXJ2ZSA9IGNyZWF0ZUNpcmNsZUNlbnRlck5vcm1hbFJhZGl1cyh0aGlzLnYxISwgbm9ybWFsLCByYWRpdXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0SW5zdHJ1Y3Rpb25zQ2VudGVyTm9ybWFsUmFkaXVzKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnYxKSB7XG4gICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGNlbnRlciBwb2ludC5cIjtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnYyKSB7XG4gICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHN0YXJ0IG9mIG5vcm1hbCB2ZWN0b3IuXCI7XG4gICAgfSBlbHNlIGlmICghdGhpcy52Mykge1xuICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBlbmQgb2Ygbm9ybWFsIHZlY3Rvci5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiMDpFeGl0ICBFbnRlciByYWRpdXMgb3IgY2xpY2sgdG8gZGV0ZXJtaW5lIHJhZGl1cy4gICRcIjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRvbmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY3VydmUpIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkodGhpcy5jdXJ2ZSk7XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcbiAgfVxuXG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/circleCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/constructionPlaneCommand.ts":
/*!***********************************************************!*\
  !*** ./src/commands/commands/constructionPlaneCommand.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConstructionPlaneCommand: () => (/* binding */ ConstructionPlaneCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nvar ConstructionPlaneCommandMode;\n(function (ConstructionPlaneCommandMode) {\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"Menu\"] = 0] = \"Menu\";\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"ChangeMajorCount\"] = 1] = \"ChangeMajorCount\";\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"ChangeMinorCount\"] = 2] = \"ChangeMinorCount\";\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"ChangeSpacing\"] = 3] = \"ChangeSpacing\";\n})(ConstructionPlaneCommandMode || (ConstructionPlaneCommandMode = {}));\nclass ConstructionPlaneCommand extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.mode = ConstructionPlaneCommandMode.Menu;\n        this.finished = false;\n    }\n    handleInput(input) {\n        switch (this.mode) {\n            case ConstructionPlaneCommandMode.Menu:\n                this.handleMenuInput(input);\n                break;\n            case ConstructionPlaneCommandMode.ChangeMajorCount:\n                this.changeMajorCount(input);\n                break;\n            case ConstructionPlaneCommandMode.ChangeMinorCount:\n                this.changeMinorCount(input);\n                break;\n            case ConstructionPlaneCommandMode.ChangeSpacing:\n                this.changeCellSize(input);\n                break;\n            default: console.error(\"Unhandled Mode\");\n        }\n    }\n    handleClick() {\n    }\n    getInstructions() {\n        const constructionPlane = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane();\n        const minorCount = constructionPlane.getMinorCount().toString();\n        const majorCount = constructionPlane.getMajorCount().toString();\n        const cellSize = constructionPlane.getCellSize().toFixed(2);\n        switch (this.mode) {\n            case ConstructionPlaneCommandMode.Menu:\n                return `0:Exit,  1:MajorCount(${majorCount}),  2:MinorCount(${minorCount}),  3:CellSize(${cellSize})  $`;\n            case ConstructionPlaneCommandMode.ChangeMajorCount:\n                return `0:Exit,  Enter New Major Count(${majorCount})  $`;\n            case ConstructionPlaneCommandMode.ChangeMinorCount:\n                return `0:Exit,  Enter New Minor Count(${minorCount})  $`;\n            case ConstructionPlaneCommandMode.ChangeSpacing:\n                return `0:Exit,  Enter New Cell Size(${cellSize})  $`;\n            default: console.error(\"Unhandled Mode\");\n        }\n        return \"\";\n    }\n    isFinished() {\n        return this.finished;\n    }\n    handleMouseMove() {\n    }\n    handleMenuInput(input) {\n        switch (input) {\n            case \"0\":\n            case \"exit\":\n                this.finished = true;\n                return;\n            case \"1\":\n            case \"majorcount\":\n                this.mode = ConstructionPlaneCommandMode.ChangeMajorCount;\n                return;\n            case \"2\":\n            case \"minorcount\":\n                this.mode = ConstructionPlaneCommandMode.ChangeMinorCount;\n                return;\n            case \"3\":\n            case \"cellspacing\":\n                this.mode = ConstructionPlaneCommandMode.ChangeSpacing;\n                return;\n        }\n    }\n    changeMajorCount(input) {\n        if (input === '0' || input === \"exit\") {\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n        const count = parseInt(input);\n        if (count) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMajorCount(count);\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n    }\n    changeMinorCount(input) {\n        if (input === '0' || input === \"exit\") {\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n        const count = parseInt(input);\n        if (count) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMinorCount(count);\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n    }\n    changeCellSize(input) {\n        if (input === '0' || input === \"exit\") {\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n        const size = parseFloat(input);\n        if (size) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setCellSize(size);\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvY29uc3RydWN0aW9uUGxhbmVDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUNEO0FBR3BDLElBQUssNEJBS0o7QUFMRCxXQUFLLDRCQUE0QjtJQUMvQiwrRUFBSTtJQUNKLHVHQUFnQjtJQUNoQix1R0FBZ0I7SUFDaEIsaUdBQWE7QUFDZixDQUFDLEVBTEksNEJBQTRCLEtBQTVCLDRCQUE0QixRQUtoQztBQUVNLE1BQU0sd0JBQXlCLFNBQVEsNkNBQU87SUFLbkQ7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUMsSUFBSSxDQUFDO1FBQzlDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFZSxXQUFXLENBQUMsS0FBYTtRQUN2QyxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDakIsS0FBSyw0QkFBNEIsQ0FBQyxJQUFJO2dCQUNwQyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixNQUFNO1lBQ1IsS0FBSyw0QkFBNEIsQ0FBQyxnQkFBZ0I7Z0JBQ2hELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDN0IsTUFBTTtZQUNSLEtBQUssNEJBQTRCLENBQUMsZ0JBQWdCO2dCQUNoRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzdCLE1BQUs7WUFDUCxLQUFLLDRCQUE0QixDQUFDLGFBQWE7Z0JBQzdDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzNCLE1BQUs7WUFDUCxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FDMUM7SUFDSCxDQUFDO0lBRWUsV0FBVztJQUUzQixDQUFDO0lBRWUsZUFBZTtRQUM3QixNQUFNLGlCQUFpQixHQUFHLDBDQUFRLENBQUMsUUFB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LGNBQWMsQ0FBQyxLQUFhO1FBQ2xDLElBQUksS0FBSyxLQUFLLEdBQUcsSUFBSSxLQUFLLEtBQUssTUFBTSxFQUFFO1lBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUMsSUFBSSxDQUFDO1NBQy9DO1FBQ0QsTUFBTSxJQUFJLEdBQXVCLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxJQUFJLElBQUksRUFBRTtZQUNSLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0QsSUFBSSxDQUFDLElBQUksR0FBRyw0QkFBNEIsQ0FBQyxJQUFJLENBQUM7U0FDL0M7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9jb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmQudHM/YTYwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiXG5cblxuZW51bSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlIHtcbiAgTWVudSxcbiAgQ2hhbmdlTWFqb3JDb3VudCxcbiAgQ2hhbmdlTWlub3JDb3VudCxcbiAgQ2hhbmdlU3BhY2luZyxcbn1cblxuZXhwb3J0IGNsYXNzIENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgbW9kZTogQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZTtcbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXQoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTpcbiAgICAgICAgdGhpcy5oYW5kbGVNZW51SW5wdXQoaW5wdXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VNYWpvckNvdW50OlxuICAgICAgICB0aGlzLmNoYW5nZU1ham9yQ291bnQoaW5wdXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VNaW5vckNvdW50OlxuICAgICAgICB0aGlzLmNoYW5nZU1pbm9yQ291bnQoaW5wdXQpO1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlLkNoYW5nZVNwYWNpbmc6XG4gICAgICAgIHRoaXMuY2hhbmdlQ2VsbFNpemUoaW5wdXQpO1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDogY29uc29sZS5lcnJvcihcIlVuaGFuZGxlZCBNb2RlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcblxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbnN0cnVjdGlvblBsYW5lID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpO1xuICAgIGNvbnN0IG1pbm9yQ291bnQ6IHN0cmluZyA9IGNvbnN0cnVjdGlvblBsYW5lLmdldE1pbm9yQ291bnQoKS50b1N0cmluZygpO1xuICAgIGNvbnN0IG1ham9yQ291bnQ6IHN0cmluZyA9IGNvbnN0cnVjdGlvblBsYW5lLmdldE1ham9yQ291bnQoKS50b1N0cmluZygpO1xuICAgIGNvbnN0IGNlbGxTaXplOiBzdHJpbmcgPSBjb25zdHJ1Y3Rpb25QbGFuZS5nZXRDZWxsU2l6ZSgpLnRvRml4ZWQoMik7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5NZW51OlxuICAgICAgICByZXR1cm4gYDA6RXhpdCwgIDE6TWFqb3JDb3VudCgke21ham9yQ291bnR9KSwgIDI6TWlub3JDb3VudCgke21pbm9yQ291bnR9KSwgIDM6Q2VsbFNpemUoJHtjZWxsU2l6ZX0pICAkYDtcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VNYWpvckNvdW50OlxuICAgICAgICByZXR1cm4gYDA6RXhpdCwgIEVudGVyIE5ldyBNYWpvciBDb3VudCgke21ham9yQ291bnR9KSAgJGA7XG4gICAgICBjYXNlIENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuQ2hhbmdlTWlub3JDb3VudDpcbiAgICAgICAgcmV0dXJuIGAwOkV4aXQsICBFbnRlciBOZXcgTWlub3IgQ291bnQoJHttaW5vckNvdW50fSkgICRgO1xuICAgICAgY2FzZSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlLkNoYW5nZVNwYWNpbmc6XG4gICAgICAgIHJldHVybiBgMDpFeGl0LCAgRW50ZXIgTmV3IENlbGwgU2l6ZSgke2NlbGxTaXplfSkgICRgO1xuICAgICAgZGVmYXVsdDogY29uc29sZS5lcnJvcihcIlVuaGFuZGxlZCBNb2RlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcblxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVNZW51SW5wdXQoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgIGNhc2UgXCIwXCI6IGNhc2UgXCJleGl0XCI6XG4gICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIFwiMVwiOiBjYXNlIFwibWFqb3Jjb3VudFwiOlxuICAgICAgICB0aGlzLm1vZGUgPSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlLkNoYW5nZU1ham9yQ291bnQ7XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCIyXCI6IGNhc2UgXCJtaW5vcmNvdW50XCI6XG4gICAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuQ2hhbmdlTWlub3JDb3VudDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY2FzZSBcIjNcIjogY2FzZSBcImNlbGxzcGFjaW5nXCI6XG4gICAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuQ2hhbmdlU3BhY2luZztcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hhbmdlTWFqb3JDb3VudChpbnB1dDogc3RyaW5nKSB7XG4gICAgaWYgKGlucHV0ID09PSAnMCcgfHwgaW5wdXQgPT09IFwiZXhpdFwiKSB7XG4gICAgICB0aGlzLm1vZGUgPSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlLk1lbnU7XG4gICAgfVxuICAgIGNvbnN0IGNvdW50OiBudW1iZXIgfCB1bmRlZmluZWQgPSBwYXJzZUludChpbnB1dCk7XG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENvbnN0cnVjdGlvblBsYW5lKCkuc2V0TWFqb3JDb3VudChjb3VudCk7XG4gICAgICB0aGlzLm1vZGUgPSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlLk1lbnU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGFuZ2VNaW5vckNvdW50KGlucHV0OiBzdHJpbmcpIHtcbiAgICBpZiAoaW5wdXQgPT09ICcwJyB8fCBpbnB1dCA9PT0gXCJleGl0XCIpIHtcbiAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB9XG4gICAgY29uc3QgY291bnQ6IG51bWJlciB8IHVuZGVmaW5lZCA9IHBhcnNlSW50KGlucHV0KTtcbiAgICBpZiAoY291bnQpIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q29uc3RydWN0aW9uUGxhbmUoKS5zZXRNaW5vckNvdW50KGNvdW50KTtcbiAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZUNlbGxTaXplKGlucHV0OiBzdHJpbmcpIHtcbiAgICBpZiAoaW5wdXQgPT09ICcwJyB8fCBpbnB1dCA9PT0gXCJleGl0XCIpIHtcbiAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB9XG4gICAgY29uc3Qgc2l6ZTogbnVtYmVyIHwgdW5kZWZpbmVkID0gcGFyc2VGbG9hdChpbnB1dCk7XG4gICAgaWYgKHNpemUpIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q29uc3RydWN0aW9uUGxhbmUoKS5zZXRDZWxsU2l6ZShzaXplKTtcbiAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB9XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/constructionPlaneCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/curveCommand.ts":
/*!***********************************************!*\
  !*** ./src/commands/commands/curveCommand.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CurveCommand: () => (/* binding */ CurveCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/curve */ \"./src/geometry/nurbs/curve.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n\n\n\n\n\nvar CurveCommandMode;\n(function (CurveCommandMode) {\n    CurveCommandMode[CurveCommandMode[\"AddPoints\"] = 0] = \"AddPoints\";\n    CurveCommandMode[CurveCommandMode[\"ChangeDegree\"] = 1] = \"ChangeDegree\";\n})(CurveCommandMode || (CurveCommandMode = {}));\nclass CurveCommand extends _command__WEBPACK_IMPORTED_MODULE_2__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.curve = null;\n        this.degree = 2;\n        this.mode = CurveCommandMode.AddPoints;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n    }\n    handleInput(input) {\n        var _a, _b;\n        if (this.mode === CurveCommandMode.AddPoints) {\n            switch (input) {\n                case \"0\":\n                    (_a = this.curve) === null || _a === void 0 ? void 0 : _a.destroy();\n                    this.finished = true;\n                    this.clicker.destroy();\n                    break;\n                case \"1\":\n                    this.mode = CurveCommandMode.ChangeDegree;\n                    break;\n                case \"\":\n                    if (this.curve != null) {\n                        if (this.curve.getControlPointCount() < 3)\n                            this.curve.destroy();\n                        else {\n                            this.curve.removeLastControlPoint();\n                            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.curve);\n                        }\n                    }\n                    this.finished = true;\n                    this.clicker.destroy();\n                    break;\n            }\n        }\n        else if (this.mode === CurveCommandMode.ChangeDegree) {\n            switch (input) {\n                case \"0\":\n                case \"\":\n                    break;\n                default:\n                    const degree = parseInt(input);\n                    if (degree) {\n                        this.degree = degree;\n                        (_b = this.curve) === null || _b === void 0 ? void 0 : _b.elevateDegree(Math.min(this.curve.getControlPointCount() - 1, this.degree));\n                    }\n                    break;\n            }\n            this.mode = CurveCommandMode.AddPoints;\n        }\n    }\n    handleClick() {\n        if (this.clicker.getPoint()) {\n            const point = this.clicker.getPoint();\n            if (this.curve) {\n                this.curve.updateLastControlPoint(point, 1);\n                this.curve.addControlPoint(point, 1);\n                if (this.curve.getDegree() < this.degree)\n                    this.curve.elevateDegree(1);\n            }\n            else {\n                this.curve = new _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__.Curve(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...point, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...point, 1)], 1);\n            }\n        }\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.curve && this.clicker.getPoint()) {\n            this.curve.updateLastControlPoint(this.clicker.getPoint(), 1);\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case CurveCommandMode.AddPoints:\n                if (this.curve == null)\n                    return `Exit:0  Degree(${this.degree}):1  Click start point.  $`;\n                return `Exit:0  Degree(${this.degree}):1  Click next point.  $`;\n            case CurveCommandMode.ChangeDegree:\n                return `Exit:0  Enter New Degree(${this.degree})  $`;\n            default:\n                return \"\";\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvY3VydmVDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5QztBQUNKO0FBQ2M7QUFFZDtBQUNBO0FBR3JDLElBQUssZ0JBR0o7QUFIRCxXQUFLLGdCQUFnQjtJQUNuQixpRUFBUztJQUNULHVFQUFZO0FBQ2QsQ0FBQyxFQUhJLGdCQUFnQixLQUFoQixnQkFBZ0IsUUFHcEI7QUFFTSxNQUFNLFlBQWEsU0FBUSw2Q0FBTztJQVF2QztRQUNFLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLElBQUksR0FBRyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUM7UUFDdkMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLDZDQUFPLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRWUsV0FBVyxDQUFDLEtBQWE7O1FBQ3ZDLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUU7WUFDNUMsUUFBUSxLQUFLLEVBQUU7Z0JBQ2IsS0FBSyxHQUFHO29CQUNOLFVBQUksQ0FBQyxLQUFLLDBDQUFFLE9BQU8sRUFBRSxDQUFDO29CQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztvQkFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDdkIsTUFBTTtnQkFDUixLQUFLLEdBQUc7b0JBQ04sSUFBSSxDQUFDLElBQUksR0FBRyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUM7b0JBQzFDLE1BQU07Z0JBQ1IsS0FBSyxFQUFFO29CQUNMLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLEVBQUU7d0JBQ3RCLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLENB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QU0sQ0FBQztZQUN2RDtnQkFDRSxPQUFPLEVBQUUsQ0FBQztTQUNiO0lBQ0gsQ0FBQztJQUVlLFVBQVU7UUFDeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7Q0FHRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL2N1cnZlQ29tbWFuZC50cz8wMGI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYzMsIHZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvY3VydmVcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yYXlcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5cblxuZW51bSBDdXJ2ZUNvbW1hbmRNb2RlIHtcbiAgQWRkUG9pbnRzLFxuICBDaGFuZ2VEZWdyZWUsXG59XG5cbmV4cG9ydCBjbGFzcyBDdXJ2ZUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIGRlZ3JlZTogbnVtYmVyO1xuICBwcml2YXRlIGN1cnZlOiBDdXJ2ZSB8IG51bGw7XG4gIHByaXZhdGUgbW9kZTogQ3VydmVDb21tYW5kTW9kZTtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuY3VydmUgPSBudWxsO1xuICAgIHRoaXMuZGVncmVlID0gMjtcbiAgICB0aGlzLm1vZGUgPSBDdXJ2ZUNvbW1hbmRNb2RlLkFkZFBvaW50cztcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUlucHV0KGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tb2RlID09PSBDdXJ2ZUNvbW1hbmRNb2RlLkFkZFBvaW50cykge1xuICAgICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgICBjYXNlIFwiMFwiOlxuICAgICAgICAgIHRoaXMuY3VydmU/LmRlc3Ryb3koKTtcbiAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiMVwiOlxuICAgICAgICAgIHRoaXMubW9kZSA9IEN1cnZlQ29tbWFuZE1vZGUuQ2hhbmdlRGVncmVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiXCI6XG4gICAgICAgICAgaWYgKHRoaXMuY3VydmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VydmUuZ2V0Q29udHJvbFBvaW50Q291bnQoKSA8IDMpIHRoaXMuY3VydmUuZGVzdHJveSgpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuY3VydmUucmVtb3ZlTGFzdENvbnRyb2xQb2ludCgpO1xuICAgICAgICAgICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KHRoaXMuY3VydmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSBDdXJ2ZUNvbW1hbmRNb2RlLkNoYW5nZURlZ3JlZSkge1xuICAgICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgICBjYXNlIFwiMFwiOiBjYXNlIFwiXCI6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc3QgZGVncmVlOiBudW1iZXIgfCB1bmRlZmluZWQgPSBwYXJzZUludChpbnB1dCk7XG4gICAgICAgICAgaWYgKGRlZ3JlZSkge1xuICAgICAgICAgICAgdGhpcy5kZWdyZWUgPSBkZWdyZWU7XG4gICAgICAgICAgICB0aGlzLmN1cnZlPy5lbGV2YXRlRGVncmVlKE1hdGgubWluKHRoaXMuY3VydmUuZ2V0Q29udHJvbFBvaW50Q291bnQoKSAtIDEsIHRoaXMuZGVncmVlKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5tb2RlID0gQ3VydmVDb21tYW5kTW9kZS5BZGRQb2ludHM7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSkge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgPSB0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSE7XG4gICAgICBpZiAodGhpcy5jdXJ2ZSkge1xuICAgICAgICB0aGlzLmN1cnZlLnVwZGF0ZUxhc3RDb250cm9sUG9pbnQocG9pbnQsIDEpO1xuICAgICAgICB0aGlzLmN1cnZlLmFkZENvbnRyb2xQb2ludChwb2ludCwgMSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnZlLmdldERlZ3JlZSgpIDwgdGhpcy5kZWdyZWUpIHRoaXMuY3VydmUuZWxldmF0ZURlZ3JlZSgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3VydmUgPSBuZXcgQ3VydmUoXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBbdmVjNC5jcmVhdGUoLi4ucG9pbnQsIDEpLCB2ZWM0LmNyZWF0ZSguLi5wb2ludCwgMSldLFxuICAgICAgICAgIDFcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gICAgaWYgKHRoaXMuY3VydmUgJiYgdGhpcy5jbGlja2VyLmdldFBvaW50KCkpIHtcbiAgICAgIHRoaXMuY3VydmUudXBkYXRlTGFzdENvbnRyb2xQb2ludCh0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSEsIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBDdXJ2ZUNvbW1hbmRNb2RlLkFkZFBvaW50czpcbiAgICAgICAgaWYgKHRoaXMuY3VydmUgPT0gbnVsbClcbiAgICAgICAgICByZXR1cm4gYEV4aXQ6MCAgRGVncmVlKCR7dGhpcy5kZWdyZWV9KToxICBDbGljayBzdGFydCBwb2ludC4gICRgO1xuICAgICAgICByZXR1cm4gYEV4aXQ6MCAgRGVncmVlKCR7dGhpcy5kZWdyZWV9KToxICBDbGljayBuZXh0IHBvaW50LiAgJGA7XG4gICAgICBjYXNlIEN1cnZlQ29tbWFuZE1vZGUuQ2hhbmdlRGVncmVlOlxuICAgICAgICByZXR1cm4gYEV4aXQ6MCAgRW50ZXIgTmV3IERlZ3JlZSgke3RoaXMuZGVncmVlfSkgICRgO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/curveCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/lineCommand.ts":
/*!**********************************************!*\
  !*** ./src/commands/commands/lineCommand.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LineCommand: () => (/* binding */ LineCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_line__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/line */ \"./src/geometry/line.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n\n\n\n\nclass LineCommand extends _command__WEBPACK_IMPORTED_MODULE_2__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.line = null;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n    }\n    handleInput(input) {\n        switch (input) {\n            case \"0\":\n            case \"\":\n                if (this.line)\n                    this.line.delete();\n                this.clicker.destroy();\n                this.finished = true;\n                break;\n        }\n        // TODO: \n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.line && this.clicker.getPoint()) {\n            this.line.updateEnd(this.clicker.getPoint());\n        }\n    }\n    handleClick() {\n        const point = this.clicker.getPoint();\n        if (point) {\n            if (this.line) {\n                this.line.updateEnd(point);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.line);\n                this.clicker.destroy();\n                this.finished = true;\n            }\n            else {\n                this.line = new _geometry_line__WEBPACK_IMPORTED_MODULE_1__.Line(null, point, point, [1, 0, 0, 1]);\n            }\n        }\n    }\n    getInstructions() {\n        if (this.line) {\n            return \"Exit:0  Click or type end point.  $\";\n        }\n        else {\n            return \"Exit:0  Click or type start point.  $\";\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvbGluZUNvbW1hbmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDcUM7QUFDTTtBQUNOO0FBQ0E7QUFHOUIsTUFBTSxXQUFZLFNBQVEsNkNBQU87SUFNdEM7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSw2Q0FBTyxFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVlLFdBQVcsQ0FBQyxLQUFhO1FBQ3ZDLFFBQVEsS0FBSyxFQUFFO1lBQ2IsS0FBSyxHQUFHLENBQUM7WUFBQyxLQUFLLEVBQUU7Z0JBQ2YsSUFBSSxJQUFJLENBQUMsSUFBSTtvQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUNsQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN2QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDckIsTUFBTTtTQUNUO1FBRUQsU0FBUztJQUNYLENBQUM7SUFFZSxlQUFlO1FBQzdCLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDM0IsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDeEMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUcsQ0FBQyxDQUFDO1NBQy9DO0lBQ0gsQ0FBQztJQUVlLFdBQVc7UUFDekIsTUFBTSxLQUFLLEdBQWdCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDbkQsSUFBSSxLQUFLLEVBQUU7WUFDVCxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzNCLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDM0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7YUFDdEI7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLGdEQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3hEO1NBQ0Y7SUFDSCxDQUFDO0lBRWUsZUFBZTtRQUM3QixJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDYixPQUFPLHFDQUFxQyxDQUFDO1NBQzlDO2FBQU07WUFDTCxPQUFPLHVDQUF1QyxDQUFDO1NBQ2hEO0lBQ0gsQ0FBQztJQUVlLFVBQVU7UUFDeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7Q0FHRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL2xpbmVDb21tYW5kLnRzP2UxODEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2xpbmVcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5cblxuZXhwb3J0IGNsYXNzIExpbmVDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBsaW5lOiBMaW5lIHwgbnVsbDtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMubGluZSA9IG51bGw7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVJbnB1dChpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgY2FzZSBcIjBcIjogY2FzZSBcIlwiOlxuICAgICAgICBpZiAodGhpcy5saW5lKSB0aGlzLmxpbmUuZGVsZXRlKCk7XG4gICAgICAgIHRoaXMuY2xpY2tlci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gICAgaWYgKHRoaXMubGluZSAmJiB0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSkge1xuICAgICAgdGhpcy5saW5lLnVwZGF0ZUVuZCh0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBjb25zdCBwb2ludDogVmVjMyB8IG51bGwgPSB0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKTtcbiAgICBpZiAocG9pbnQpIHtcbiAgICAgIGlmICh0aGlzLmxpbmUpIHtcbiAgICAgICAgdGhpcy5saW5lLnVwZGF0ZUVuZChwb2ludCk7XG4gICAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkodGhpcy5saW5lKTtcbiAgICAgICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxpbmUgPSBuZXcgTGluZShudWxsLCBwb2ludCwgcG9pbnQsIFsxLCAwLCAwLCAxXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmxpbmUpIHtcbiAgICAgIHJldHVybiBcIkV4aXQ6MCAgQ2xpY2sgb3IgdHlwZSBlbmQgcG9pbnQuICAkXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIkV4aXQ6MCAgQ2xpY2sgb3IgdHlwZSBzdGFydCBwb2ludC4gICRcIjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/lineCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/polylineCommand.ts":
/*!**************************************************!*\
  !*** ./src/commands/commands/polylineCommand.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PolyLineCommand: () => (/* binding */ PolyLineCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_polyLine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/polyLine */ \"./src/geometry/polyLine.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n\n\n\n\nclass PolyLineCommand extends _command__WEBPACK_IMPORTED_MODULE_2__.Command {\n    constructor() {\n        super();\n        this.polyline = null;\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n    }\n    handleInput(input) {\n        switch (input) {\n            case \"0\":\n                if (this.polyline)\n                    this.polyline.delete();\n                this.clicker.destroy();\n                this.finished = true;\n            case \"\":\n                if (this.polyline) {\n                    if (this.polyline.getSegmentCount() < 2)\n                        this.polyline.delete();\n                    else {\n                        this.polyline.removeLastPoint();\n                        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.polyline);\n                    }\n                }\n                this.clicker.destroy();\n                this.finished = true;\n                break;\n        }\n    }\n    handleClick() {\n        if (this.clicker.getPoint) {\n            const point = this.clicker.getPoint();\n            if (this.polyline) {\n                this.polyline.updateLastPoint(point);\n                this.polyline.addPoint(point);\n            }\n            else {\n                this.polyline = new _geometry_polyLine__WEBPACK_IMPORTED_MODULE_1__.PolyLine(null, [point, point]);\n            }\n        }\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.polyline && this.clicker.getPoint()) {\n            this.polyline.updateLastPoint(this.clicker.getPoint());\n        }\n    }\n    getInstructions() {\n        if (this.polyline) {\n            return \"Exit:0  click or type next point  $\";\n        }\n        else {\n            return \"Exit:0  click or type start point  $\";\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvcG9seWxpbmVDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ3FDO0FBQ2M7QUFDZDtBQUNBO0FBRTlCLE1BQU0sZUFBZ0IsU0FBUSw2Q0FBTztJQU0xQztRQUNFLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLDZDQUFPLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRWUsV0FBVyxDQUFDLEtBQWE7UUFDdkMsUUFBUSxLQUFLLEVBQUU7WUFDYixLQUFLLEdBQUc7Z0JBQ04sSUFBSSxJQUFJLENBQUMsUUFBUTtvQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUMxQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN2QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztZQUN2QixLQUFLLEVBQUU7Z0JBQ0wsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO29CQUNqQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQzt3QkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO3lCQUMzRDt3QkFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsRUFBRSxDQUFDO3dCQUNoQywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7cUJBQ2hEO2lCQUNGO2dCQUNELElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2dCQUNyQixNQUFNO1NBQ1Q7SUFDSCxDQUFDO0lBRWUsV0FBVztRQUN6QixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFO1lBQ3pCLE1BQU0sS0FBSyxHQUFTLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFHLENBQUM7WUFDN0MsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDL0I7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLHdEQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7YUFDcEQ7U0FDRjtJQUNILENBQUM7SUFFZSxlQUFlO1FBQzdCLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDM0IsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDNUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUcsQ0FBQyxDQUFDO1NBQ3pEO0lBQ0gsQ0FBQztJQUVlLGVBQWU7UUFDN0IsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLE9BQU8scUNBQXFDLENBQUM7U0FDOUM7YUFBTTtZQUNMLE9BQU8sc0NBQXNDLENBQUM7U0FDL0M7SUFDSCxDQUFDO0lBRWUsVUFBVTtRQUN4QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztDQUdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvcG9seWxpbmVDb21tYW5kLnRzPzEwN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBQb2x5TGluZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wb2x5TGluZVwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcblxuZXhwb3J0IGNsYXNzIFBvbHlMaW5lQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgcG9seWxpbmU6IFBvbHlMaW5lIHwgbnVsbDtcbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wb2x5bGluZSA9IG51bGw7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2xpY2tlciA9IG5ldyBDbGlja2VyKCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXQoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgIGNhc2UgXCIwXCI6XG4gICAgICAgIGlmICh0aGlzLnBvbHlsaW5lKSB0aGlzLnBvbHlsaW5lLmRlbGV0ZSgpO1xuICAgICAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIGNhc2UgXCJcIjpcbiAgICAgICAgaWYgKHRoaXMucG9seWxpbmUpIHtcbiAgICAgICAgICBpZiAodGhpcy5wb2x5bGluZS5nZXRTZWdtZW50Q291bnQoKSA8IDIpIHRoaXMucG9seWxpbmUuZGVsZXRlKCk7XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBvbHlsaW5lLnJlbW92ZUxhc3RQb2ludCgpO1xuICAgICAgICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeSh0aGlzLnBvbHlsaW5lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbGlja2VyLmdldFBvaW50KSB7XG4gICAgICBjb25zdCBwb2ludDogVmVjMyA9IHRoaXMuY2xpY2tlci5nZXRQb2ludCgpITtcbiAgICAgIGlmICh0aGlzLnBvbHlsaW5lKSB7XG4gICAgICAgIHRoaXMucG9seWxpbmUudXBkYXRlTGFzdFBvaW50KHBvaW50KTtcbiAgICAgICAgdGhpcy5wb2x5bGluZS5hZGRQb2ludChwb2ludCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBvbHlsaW5lID0gbmV3IFBvbHlMaW5lKG51bGwsIFtwb2ludCwgcG9pbnRdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5vbk1vdXNlTW92ZSgpO1xuICAgIGlmICh0aGlzLnBvbHlsaW5lICYmIHRoaXMuY2xpY2tlci5nZXRQb2ludCgpKSB7XG4gICAgICB0aGlzLnBvbHlsaW5lLnVwZGF0ZUxhc3RQb2ludCh0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5wb2x5bGluZSkge1xuICAgICAgcmV0dXJuIFwiRXhpdDowICBjbGljayBvciB0eXBlIG5leHQgcG9pbnQgICRcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiRXhpdDowICBjbGljayBvciB0eXBlIHN0YXJ0IHBvaW50ICAkXCI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/polylineCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/snapsCommand.ts":
/*!***********************************************!*\
  !*** ./src/commands/commands/snapsCommand.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapsCommand: () => (/* binding */ SnapsCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nclass SnapsCommand extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n    }\n    handleInput(input) {\n        switch (input) {\n            case \"0\":\n                this.finished = true;\n                break;\n            default:\n                this.toggleSnap(input);\n        }\n    }\n    toggleSnap(input) {\n        const snapSettings = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getSnapSettings();\n        switch (input) {\n            case \"1\":\n                snapSettings.snapGrid = !snapSettings.snapGrid;\n                break;\n            case \"2\":\n                snapSettings.snapLine = !snapSettings.snapLine;\n                break;\n            case \"3\":\n                snapSettings.snapPoint = !snapSettings.snapPoint;\n                break;\n        }\n    }\n    handleClick() {\n    }\n    handleMouseMove() {\n    }\n    getInstructions() {\n        const snapSettings = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getSnapSettings();\n        const grid = snapSettings.snapGrid ? \"on\" : \"off\";\n        const point = snapSettings.snapPoint ? \"on\" : \"off\";\n        const line = snapSettings.snapLine ? \"on\" : \"off\";\n        return `Exit:0  Grid(${grid}):1  Line(${line}):2  Point(${point}):3  $`;\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc25hcHNDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUVBO0FBRTlCLE1BQU0sWUFBYSxTQUFRLDZDQUFPO0lBSXZDO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztJQUN4QixDQUFDO0lBRWUsV0FBVyxDQUFDLEtBQWE7UUFDdkMsUUFBUSxLQUFLLEVBQUU7WUFDYixLQUFLLEdBQUc7Z0JBQ04sSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7Z0JBQ3JCLE1BQU07WUFDUjtnQkFDRSxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzFCO0lBQ0gsQ0FBQztJQUVPLFVBQVUsQ0FBQyxLQUFhO1FBQzlCLE1BQU0sWUFBWSxHQUFpQiwwQ0FBUSxDQUFDLGtCQUFrQixFQUFFLENBQUMsc0JBQXNCLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUM1RyxRQUFRLEtBQUssRUFBRTtZQUNiLEtBQUssR0FBRztnQkFDTixZQUFZLENBQUMsUUFBUSxHQUFHLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQztnQkFDL0MsTUFBTTtZQUNSLEtBQUssR0FBRztnQkFDTixZQUFZLENBQUMsUUFBUSxHQUFHLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQztnQkFDL0MsTUFBTTtZQUNSLEtBQUssR0FBRztnQkFDTixZQUFZLENBQUMsU0FBUyxHQUFHLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQztnQkFDakQsTUFBTTtTQUNUO0lBQ0gsQ0FBQztJQUVlLFdBQVc7SUFFM0IsQ0FBQztJQUVlLGVBQWU7SUFFL0IsQ0FBQztJQUVlLGVBQWU7UUFDN0IsTUFBTSxZQUFZLEdBQWlCLDBDQUFRLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQzVHLE1BQU0sSUFBSSxHQUFXLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQzFELE1BQU0sS0FBSyxHQUFXLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQzVELE1BQU0sSUFBSSxHQUFXLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQzFELE9BQU8sZ0JBQWdCLElBQUksYUFBYSxJQUFJLGNBQWMsS0FBSyxRQUFRLENBQUM7SUFDMUUsQ0FBQztJQUVlLFVBQVU7UUFDeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL3NuYXBzQ29tbWFuZC50cz84YmU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgU25hcFNldHRpbmdzIH0gZnJvbSBcIi4uLy4uL3NldHRpbmdzL3NuYXBzTWFuYWdlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cbmV4cG9ydCBjbGFzcyBTbmFwc0NvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUlucHV0KGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKGlucHV0KSB7XG4gICAgICBjYXNlIFwiMFwiOlxuICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aGlzLnRvZ2dsZVNuYXAoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdG9nZ2xlU25hcChpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgc25hcFNldHRpbmdzOiBTbmFwU2V0dGluZ3MgPSBJTlNUQU5DRS5nZXRTZXR0aW5nc01hbmFnZXIoKS5nZXRTbmFwU2V0dGluZ3NNYW5hZ2VyKCkuZ2V0U25hcFNldHRpbmdzKCk7XG4gICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgY2FzZSBcIjFcIjpcbiAgICAgICAgc25hcFNldHRpbmdzLnNuYXBHcmlkID0gIXNuYXBTZXR0aW5ncy5zbmFwR3JpZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiMlwiOlxuICAgICAgICBzbmFwU2V0dGluZ3Muc25hcExpbmUgPSAhc25hcFNldHRpbmdzLnNuYXBMaW5lO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIzXCI6XG4gICAgICAgIHNuYXBTZXR0aW5ncy5zbmFwUG9pbnQgPSAhc25hcFNldHRpbmdzLnNuYXBQb2ludDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgY29uc3Qgc25hcFNldHRpbmdzOiBTbmFwU2V0dGluZ3MgPSBJTlNUQU5DRS5nZXRTZXR0aW5nc01hbmFnZXIoKS5nZXRTbmFwU2V0dGluZ3NNYW5hZ2VyKCkuZ2V0U25hcFNldHRpbmdzKCk7XG4gICAgY29uc3QgZ3JpZDogc3RyaW5nID0gc25hcFNldHRpbmdzLnNuYXBHcmlkID8gXCJvblwiIDogXCJvZmZcIjtcbiAgICBjb25zdCBwb2ludDogc3RyaW5nID0gc25hcFNldHRpbmdzLnNuYXBQb2ludCA/IFwib25cIiA6IFwib2ZmXCI7XG4gICAgY29uc3QgbGluZTogc3RyaW5nID0gc25hcFNldHRpbmdzLnNuYXBMaW5lID8gXCJvblwiIDogXCJvZmZcIjtcbiAgICByZXR1cm4gYEV4aXQ6MCAgR3JpZCgke2dyaWR9KToxICBMaW5lKCR7bGluZX0pOjIgIFBvaW50KCR7cG9pbnR9KTozICAkYDtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/snapsCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/windowCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/windowCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WindowCommand: () => (/* binding */ WindowCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../widgets/cursor */ \"./src/widgets/cursor.ts\");\n/* harmony import */ var _window_windowManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../window/windowManager */ \"./src/window/windowManager.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\nvar WindowCommandMode;\n(function (WindowCommandMode) {\n    WindowCommandMode[WindowCommandMode[\"SelectWindow\"] = 0] = \"SelectWindow\";\n    WindowCommandMode[WindowCommandMode[\"PlaceWindowStart\"] = 1] = \"PlaceWindowStart\";\n    WindowCommandMode[WindowCommandMode[\"PlaceWindowEnd\"] = 2] = \"PlaceWindowEnd\";\n})(WindowCommandMode || (WindowCommandMode = {}));\nclass WindowCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.windowName = \"none\";\n        this.finished = false;\n        this.mode = WindowCommandMode.SelectWindow;\n        this.cursor = new _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.Cursor();\n    }\n    handleInput(input) {\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                if (input == \"0\") {\n                    this.cursor.destroy();\n                    this.finished = true;\n                    break;\n                }\n                if (_window_windowManager__WEBPACK_IMPORTED_MODULE_2__.WINDOW_NAMES.has(parseInt(input))) {\n                    this.windowName = _window_windowManager__WEBPACK_IMPORTED_MODULE_2__.WINDOW_NAMES.get(parseInt(input));\n                    this.mode = WindowCommandMode.PlaceWindowStart;\n                    // remove existing window to add it back\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().removeWindow(this.windowName);\n                }\n                break;\n            case WindowCommandMode.PlaceWindowStart:\n                break;\n            case WindowCommandMode.PlaceWindowEnd:\n                break;\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    // rounds n to nearest multiple of m\n    nearestMultiple(n, m) {\n        const delta = n % m;\n        if (delta < m / 2)\n            n -= delta;\n        else\n            n += m - delta;\n        return n;\n    }\n    roundScreenPoint(p) {\n        return [this.nearestMultiple(p[0], 10), this.nearestMultiple(p[1], 10)];\n    }\n    handleClick() {\n        const [x, y] = this.roundScreenPoint(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos());\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                break;\n            case WindowCommandMode.PlaceWindowStart:\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().addWindow(this.windowName, [x, y]);\n                this.mode = WindowCommandMode.PlaceWindowEnd;\n                break;\n            case WindowCommandMode.PlaceWindowEnd:\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(this.windowName).updateEnd([x, y]);\n                this.windowName = \"none\";\n                this.mode = WindowCommandMode.SelectWindow;\n                break;\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    handleMouseMove() {\n        const [x, y] = this.roundScreenPoint(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos());\n        this.cursor.setPosition([x, y]);\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                break;\n            case WindowCommandMode.PlaceWindowStart:\n                break;\n            case WindowCommandMode.PlaceWindowEnd:\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(this.windowName).updateEnd([x, y]);\n                break;\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                var res = \"Exit:0  \";\n                for (let [key, value] of _window_windowManager__WEBPACK_IMPORTED_MODULE_2__.WINDOW_NAMES) {\n                    res += value + \"(\" + key.toString() + \")  \";\n                }\n                return res + \"$\";\n            case WindowCommandMode.PlaceWindowStart:\n                return \"Exit:0  Click first corner for window.\";\n            case WindowCommandMode.PlaceWindowEnd:\n                return \"Exit:0  Click second corner for window.\";\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJBQWlCLENBQUMsQ0FBQztTQUN0QztJQUNILENBQUM7SUFFZSxlQUFlO1FBQzdCLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNqQixLQUFLLGlCQUFpQixDQUFDLFlBQVk7Z0JBQ2pDLElBQUksR0FBRyxHQUFXLFVBQVUsQ0FBQztnQkFDN0IsS0FBSyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLCtEQUFZLEVBQUU7b0JBQ3JDLEdBQUcsSUFBSSxLQUFLLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUM7aUJBQzdDO2dCQUNELE9BQU8sR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUNuQixLQUFLLGlCQUFpQixDQUFDLGdCQUFnQjtnQkFDckMsT0FBTyx3Q0FBd0MsQ0FBQztZQUNsRCxLQUFLLGlCQUFpQixDQUFDLGNBQWM7Z0JBQ25DLE9BQU8seUNBQXlDLENBQUM7WUFDbkQ7Z0JBQ0UsTUFBTSxJQUFJLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQztJQUVlLFVBQVU7UUFDeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL3dpbmRvd0NvbW1hbmQudHM/NGQ3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEN1cnNvciB9IGZyb20gXCIuLi8uLi93aWRnZXRzL2N1cnNvclwiO1xuaW1wb3J0IHsgV0lORE9XX05BTUVTIH0gZnJvbSBcIi4uLy4uL3dpbmRvdy93aW5kb3dNYW5hZ2VyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRcIjtcblxuZW51bSBXaW5kb3dDb21tYW5kTW9kZSB7XG4gIFNlbGVjdFdpbmRvdyxcbiAgUGxhY2VXaW5kb3dTdGFydCxcbiAgUGxhY2VXaW5kb3dFbmQsXG59XG5cbmV4cG9ydCBjbGFzcyBXaW5kb3dDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBtb2RlOiBXaW5kb3dDb21tYW5kTW9kZTtcbiAgcHJpdmF0ZSB3aW5kb3dOYW1lOiBzdHJpbmcgPSBcIm5vbmVcIjtcbiAgcHJpdmF0ZSBjdXJzb3I6IEN1cnNvcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLm1vZGUgPSBXaW5kb3dDb21tYW5kTW9kZS5TZWxlY3RXaW5kb3c7XG4gICAgdGhpcy5jdXJzb3IgPSBuZXcgQ3Vyc29yKCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXQoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFdpbmRvd0NvbW1hbmRNb2RlLlNlbGVjdFdpbmRvdzpcbiAgICAgICAgaWYgKGlucHV0ID09IFwiMFwiKSB7XG4gICAgICAgICAgdGhpcy5jdXJzb3IuZGVzdHJveSgpO1xuICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChXSU5ET1dfTkFNRVMuaGFzKHBhcnNlSW50KGlucHV0KSkpIHtcbiAgICAgICAgICB0aGlzLndpbmRvd05hbWUgPSBXSU5ET1dfTkFNRVMuZ2V0KHBhcnNlSW50KGlucHV0KSkhO1xuICAgICAgICAgIHRoaXMubW9kZSA9IFdpbmRvd0NvbW1hbmRNb2RlLlBsYWNlV2luZG93U3RhcnQ7XG5cbiAgICAgICAgICAvLyByZW1vdmUgZXhpc3Rpbmcgd2luZG93IHRvIGFkZCBpdCBiYWNrXG4gICAgICAgICAgSU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLnJlbW92ZVdpbmRvdyh0aGlzLndpbmRvd05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5QbGFjZVdpbmRvd1N0YXJ0OlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dFbmQ6XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHJvdW5kcyBuIHRvIG5lYXJlc3QgbXVsdGlwbGUgb2YgbVxuICBwcml2YXRlIG5lYXJlc3RNdWx0aXBsZShuOiBudW1iZXIsIG06IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgZGVsdGEgPSBuICUgbTtcbiAgICBpZiAoZGVsdGEgPCBtIC8gMikgbiAtPSBkZWx0YTtcbiAgICBlbHNlIG4gKz0gbSAtIGRlbHRhO1xuICAgIHJldHVybiBuO1xuICB9XG5cbiAgcHJpdmF0ZSByb3VuZFNjcmVlblBvaW50KHA6IFtudW1iZXIsIG51bWJlcl0pOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICByZXR1cm4gW3RoaXMubmVhcmVzdE11bHRpcGxlKHBbMF0sIDEwKSwgdGhpcy5uZWFyZXN0TXVsdGlwbGUocFsxXSwgMTApXTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBjb25zdCBbeCwgeV0gPSB0aGlzLnJvdW5kU2NyZWVuUG9pbnQoSU5TVEFOQ0UuZ2V0RXZlbnRNYW5hZ2VyKCkuZ2V0TW91c2VIYW5kbGVyKCkuZ2V0TW91c2VQb3MoKSk7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuU2VsZWN0V2luZG93OlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dTdGFydDpcbiAgICAgICAgSU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmFkZFdpbmRvdyh0aGlzLndpbmRvd05hbWUsIFt4LCB5XSk7XG4gICAgICAgIHRoaXMubW9kZSA9IFdpbmRvd0NvbW1hbmRNb2RlLlBsYWNlV2luZG93RW5kO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dFbmQ6XG4gICAgICAgIElOU1RBTkNFLmdldFdpbmRvd01hbmFnZXIoKS5nZXRXaW5kb3dzKCkuZ2V0KHRoaXMud2luZG93TmFtZSkhLnVwZGF0ZUVuZChbeCwgeV0pO1xuICAgICAgICB0aGlzLndpbmRvd05hbWUgPSBcIm5vbmVcIjtcbiAgICAgICAgdGhpcy5tb2RlID0gV2luZG93Q29tbWFuZE1vZGUuU2VsZWN0V2luZG93O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIGNvbnN0IFt4LCB5XSA9IHRoaXMucm91bmRTY3JlZW5Qb2ludChJTlNUQU5DRS5nZXRFdmVudE1hbmFnZXIoKS5nZXRNb3VzZUhhbmRsZXIoKS5nZXRNb3VzZVBvcygpKTtcbiAgICB0aGlzLmN1cnNvci5zZXRQb3NpdGlvbihbeCwgeV0pO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFdpbmRvd0NvbW1hbmRNb2RlLlNlbGVjdFdpbmRvdzpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFdpbmRvd0NvbW1hbmRNb2RlLlBsYWNlV2luZG93U3RhcnQ6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5QbGFjZVdpbmRvd0VuZDpcbiAgICAgICAgSU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmdldFdpbmRvd3MoKS5nZXQodGhpcy53aW5kb3dOYW1lKSEudXBkYXRlRW5kKFt4LCB5XSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5TZWxlY3RXaW5kb3c6XG4gICAgICAgIHZhciByZXM6IHN0cmluZyA9IFwiRXhpdDowICBcIjtcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIFdJTkRPV19OQU1FUykge1xuICAgICAgICAgIHJlcyArPSB2YWx1ZSArIFwiKFwiICsga2V5LnRvU3RyaW5nKCkgKyBcIikgIFwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMgKyBcIiRcIjtcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dTdGFydDpcbiAgICAgICAgcmV0dXJuIFwiRXhpdDowICBDbGljayBmaXJzdCBjb3JuZXIgZm9yIHdpbmRvdy5cIjtcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dFbmQ6XG4gICAgICAgIHJldHVybiBcIkV4aXQ6MCAgQ2xpY2sgc2Vjb25kIGNvcm5lciBmb3Igd2luZG93LlwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/windowCommand.ts\n");

/***/ }),

/***/ "./src/commands/oneTimeCommands/toggleDarkModeCommand.ts":
/*!***************************************************************!*\
  !*** ./src/commands/oneTimeCommands/toggleDarkModeCommand.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toggleDarkMode: () => (/* binding */ toggleDarkMode)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n\nvar isDarkMode = true;\nconst rootStyle = document.querySelector(':root');\nfunction toggleDarkMode() {\n    if (isDarkMode)\n        setLightMode();\n    else\n        setDarkMode();\n}\nfunction setLightMode() {\n    isDarkMode = false;\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().setClearColor([0.8, 0.8, 0.8, 1.0]);\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMajorMaterial(\"darker grey\");\n    //  INSTANCE.getScene().getConstructionPlane().setMajorColor([0.3, 0.2, 0.2, 1.0]);\n    // INSTANCE.getScene().getConstructionPlane().setMinorColor([0.7, 0.6, 0.6, 1.0]);\n    rootStyle.style.setProperty(\"--floating-window-background-color\", \"var(--transparent-white)\");\n    rootStyle.style.setProperty(\"--floating-window-text-color\", \"var(--dark-red)\");\n    rootStyle.style.setProperty(\"--floating-window-border-color\", \"var(--dark-red)\");\n}\nfunction setDarkMode() {\n    isDarkMode = true;\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().setClearColor([0.1, 0.1, 0.1, 1.0]);\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMajorMaterial(\"lighter grey\");\n    //  INSTANCE.getScene().getConstructionPlane().setMajorColor([1.0, 0.8, 0.8, 1.0]);\n    //  INSTANCE.getScene().getConstructionPlane().setMinorColor([0.6, 0.4, 0.4, 1.0]);\n    rootStyle.style.setProperty(\"--floating-window-background-color\", \"var(--transparent-black)\");\n    rootStyle.style.setProperty(\"--floating-window-text-color\", \"var(--light-red)\");\n    rootStyle.style.setProperty(\"--floating-window-border-color\", \"var(--light-red)\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL3RvZ2dsZURhcmtNb2RlQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxQztBQUVyQyxJQUFJLFVBQVUsR0FBWSxJQUFJLENBQUM7QUFFL0IsTUFBTSxTQUFTLEdBQXVDLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7QUFFL0UsU0FBUyxjQUFjO0lBQzVCLElBQUksVUFBVTtRQUFFLFlBQVksRUFBRSxDQUFDOztRQUMxQixXQUFXLEVBQUUsQ0FBQztBQUNyQixDQUFDO0FBRUQsU0FBUyxZQUFZO0lBQ25CLFVBQVUsR0FBRyxLQUFLLENBQUM7SUFDbkIsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzNELDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUMzRSxtRkFBbUY7SUFDbkYsa0ZBQWtGO0lBQ2xGLFNBQVMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLG9DQUFvQyxFQUFFLDBCQUEwQixDQUFDLENBQUM7SUFDOUYsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsOEJBQThCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztJQUMvRSxTQUFTLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxnQ0FBZ0MsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBRW5GLENBQUM7QUFFRCxTQUFTLFdBQVc7SUFDbEIsVUFBVSxHQUFHLElBQUksQ0FBQztJQUNsQiwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDM0QsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQzVFLG1GQUFtRjtJQUNuRixtRkFBbUY7SUFDbkYsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsb0NBQW9DLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztJQUM5RixTQUFTLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyw4QkFBOEIsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2hGLFNBQVMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLGdDQUFnQyxFQUFFLGtCQUFrQixDQUFDLENBQUM7QUFDcEYsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL29uZVRpbWVDb21tYW5kcy90b2dnbGVEYXJrTW9kZUNvbW1hbmQudHM/NWFmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcblxudmFyIGlzRGFya01vZGU6IGJvb2xlYW4gPSB0cnVlO1xuXG5jb25zdCByb290U3R5bGU6IEhUTUxTdHlsZUVsZW1lbnQgPSA8SFRNTFN0eWxlRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCc6cm9vdCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRGFya01vZGUoKSB7XG4gIGlmIChpc0RhcmtNb2RlKSBzZXRMaWdodE1vZGUoKTtcbiAgZWxzZSBzZXREYXJrTW9kZSgpO1xufVxuXG5mdW5jdGlvbiBzZXRMaWdodE1vZGUoKSB7XG4gIGlzRGFya01vZGUgPSBmYWxzZTtcbiAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5zZXRDbGVhckNvbG9yKFswLjgsIDAuOCwgMC44LCAxLjBdKTtcbiAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpLnNldE1ham9yTWF0ZXJpYWwoXCJkYXJrZXIgZ3JleVwiKTtcbiAgLy8gIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q29uc3RydWN0aW9uUGxhbmUoKS5zZXRNYWpvckNvbG9yKFswLjMsIDAuMiwgMC4yLCAxLjBdKTtcbiAgLy8gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpLnNldE1pbm9yQ29sb3IoWzAuNywgMC42LCAwLjYsIDEuMF0pO1xuICByb290U3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZsb2F0aW5nLXdpbmRvdy1iYWNrZ3JvdW5kLWNvbG9yXCIsIFwidmFyKC0tdHJhbnNwYXJlbnQtd2hpdGUpXCIpO1xuICByb290U3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZsb2F0aW5nLXdpbmRvdy10ZXh0LWNvbG9yXCIsIFwidmFyKC0tZGFyay1yZWQpXCIpO1xuICByb290U3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZsb2F0aW5nLXdpbmRvdy1ib3JkZXItY29sb3JcIiwgXCJ2YXIoLS1kYXJrLXJlZClcIik7XG5cbn1cblxuZnVuY3Rpb24gc2V0RGFya01vZGUoKSB7XG4gIGlzRGFya01vZGUgPSB0cnVlO1xuICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLnNldENsZWFyQ29sb3IoWzAuMSwgMC4xLCAwLjEsIDEuMF0pO1xuICBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENvbnN0cnVjdGlvblBsYW5lKCkuc2V0TWFqb3JNYXRlcmlhbChcImxpZ2h0ZXIgZ3JleVwiKTtcbiAgLy8gIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q29uc3RydWN0aW9uUGxhbmUoKS5zZXRNYWpvckNvbG9yKFsxLjAsIDAuOCwgMC44LCAxLjBdKTtcbiAgLy8gIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q29uc3RydWN0aW9uUGxhbmUoKS5zZXRNaW5vckNvbG9yKFswLjYsIDAuNCwgMC40LCAxLjBdKTtcbiAgcm9vdFN0eWxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1mbG9hdGluZy13aW5kb3ctYmFja2dyb3VuZC1jb2xvclwiLCBcInZhcigtLXRyYW5zcGFyZW50LWJsYWNrKVwiKTtcbiAgcm9vdFN0eWxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1mbG9hdGluZy13aW5kb3ctdGV4dC1jb2xvclwiLCBcInZhcigtLWxpZ2h0LXJlZClcIik7XG4gIHJvb3RTdHlsZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZmxvYXRpbmctd2luZG93LWJvcmRlci1jb2xvclwiLCBcInZhcigtLWxpZ2h0LXJlZClcIik7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/oneTimeCommands/toggleDarkModeCommand.ts\n");

/***/ }),

/***/ "./src/events/eventManager.ts":
/*!************************************!*\
  !*** ./src/events/eventManager.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventManager: () => (/* binding */ EventManager)\n/* harmony export */ });\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mode */ \"./src/mode.ts\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _mouseHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mouseHandler */ \"./src/events/mouseHandler.ts\");\n\n\n\nclass EventManager {\n    constructor() {\n        this.mouseHandler = new _mouseHandler__WEBPACK_IMPORTED_MODULE_2__.MouseHandler();\n        onmousemove = (event) => {\n            this.mouseHandler.onMouseMove(event);\n        };\n        onresize = () => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getRenderer().updateScreenSize();\n        };\n        onkeydown = (event) => {\n            if (event.code == \"Tab\") {\n                if (_cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getMode() == _mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Navigation) {\n                    _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.setMode(_mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Command);\n                }\n                else {\n                    _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getCli().clearInput();\n                    _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.setMode(_mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Navigation);\n                }\n                // prevent tab from chaging focus\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            else {\n                if (_cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getMode() == _mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Command)\n                    _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getCli().processKeyDownEvent(event);\n            }\n        };\n        onfocus = () => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getStats().reset();\n        };\n        onmousedown = (event) => {\n            this.mouseHandler.onMouseDown(event);\n        };\n        onmouseup = (event) => {\n            this.mouseHandler.onMouseUp(event);\n        };\n    }\n    getMouseHandler() {\n        return this.mouseHandler;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXZlbnRzL2V2ZW50TWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVDO0FBQ047QUFDYTtBQUV2QyxNQUFNLFlBQVk7SUFJdkI7UUFFRSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksdURBQVksRUFBRSxDQUFDO1FBRXZDLFdBQVcsR0FBRyxDQUFDLEtBQWlCLEVBQUUsRUFBRTtZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2QyxDQUFDLENBQUM7UUFFRixRQUFRLEdBQUcsR0FBRyxFQUFFO1lBQ2QsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQzVDLENBQUM7UUFFRCxTQUFTLEdBQUcsQ0FBQyxLQUFvQixFQUFFLEVBQUU7WUFDbkMsSUFBSSxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssRUFBRTtnQkFDdkIsSUFBSSwwQ0FBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLGdEQUFhLENBQUMsVUFBVSxFQUFFO29CQUNsRCwwQ0FBUSxDQUFDLE9BQU8sQ0FBQyxnREFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2lCQUN6QztxQkFBTTtvQkFDTCwwQ0FBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLFVBQVUsRUFBRSxDQUFDO29CQUMvQiwwQ0FBUSxDQUFDLE9BQU8sQ0FBQyxnREFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2lCQUM1QztnQkFDRCxpQ0FBaUM7Z0JBQ2pDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztnQkFDdkIsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDO2FBQ3pCO2lCQUFNO2dCQUNMLElBQUksMENBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxnREFBYSxDQUFDLE9BQU87b0JBQUUsMENBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUMvRjtRQUNILENBQUMsQ0FBQztRQUVGLE9BQU8sR0FBRyxHQUFHLEVBQUU7WUFDYiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzlCLENBQUM7UUFFRCxXQUFXLEdBQUcsQ0FBQyxLQUFpQixFQUFFLEVBQUU7WUFDbEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUVELFNBQVMsR0FBRyxDQUFDLEtBQWlCLEVBQUUsRUFBRTtZQUNoQyxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyQyxDQUFDO0lBQ0gsQ0FBQztJQUVNLGVBQWU7UUFDcEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2V2ZW50cy9ldmVudE1hbmFnZXIudHM/YWQzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVyYXRpbmdNb2RlIH0gZnJvbSBcIi4uL21vZGVcIlxuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IE1vdXNlSGFuZGxlciB9IGZyb20gXCIuL21vdXNlSGFuZGxlclwiO1xuXG5leHBvcnQgY2xhc3MgRXZlbnRNYW5hZ2VyIHtcblxuICBwcml2YXRlIG1vdXNlSGFuZGxlcjogTW91c2VIYW5kbGVyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgdGhpcy5tb3VzZUhhbmRsZXIgPSBuZXcgTW91c2VIYW5kbGVyKCk7XG5cbiAgICBvbm1vdXNlbW92ZSA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgdGhpcy5tb3VzZUhhbmRsZXIub25Nb3VzZU1vdmUoZXZlbnQpO1xuICAgIH07XG5cbiAgICBvbnJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkudXBkYXRlU2NyZWVuU2l6ZSgpO1xuICAgIH1cblxuICAgIG9ua2V5ZG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmNvZGUgPT0gXCJUYWJcIikge1xuICAgICAgICBpZiAoSU5TVEFOQ0UuZ2V0TW9kZSgpID09IE9wZXJhdGluZ01vZGUuTmF2aWdhdGlvbikge1xuICAgICAgICAgIElOU1RBTkNFLnNldE1vZGUoT3BlcmF0aW5nTW9kZS5Db21tYW5kKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBJTlNUQU5DRS5nZXRDbGkoKS5jbGVhcklucHV0KCk7XG4gICAgICAgICAgSU5TVEFOQ0Uuc2V0TW9kZShPcGVyYXRpbmdNb2RlLk5hdmlnYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByZXZlbnQgdGFiIGZyb20gY2hhZ2luZyBmb2N1c1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChJTlNUQU5DRS5nZXRNb2RlKCkgPT0gT3BlcmF0aW5nTW9kZS5Db21tYW5kKSBJTlNUQU5DRS5nZXRDbGkoKS5wcm9jZXNzS2V5RG93bkV2ZW50KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgb25mb2N1cyA9ICgpID0+IHtcbiAgICAgIElOU1RBTkNFLmdldFN0YXRzKCkucmVzZXQoKTtcbiAgICB9XG5cbiAgICBvbm1vdXNlZG93biA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgdGhpcy5tb3VzZUhhbmRsZXIub25Nb3VzZURvd24oZXZlbnQpO1xuICAgIH1cblxuICAgIG9ubW91c2V1cCA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgdGhpcy5tb3VzZUhhbmRsZXIub25Nb3VzZVVwKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0TW91c2VIYW5kbGVyKCk6IE1vdXNlSGFuZGxlciB7XG4gICAgcmV0dXJuIHRoaXMubW91c2VIYW5kbGVyO1xuICB9XG5cbn1cblxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/events/eventManager.ts\n");

/***/ }),

/***/ "./src/events/mouseHandler.ts":
/*!************************************!*\
  !*** ./src/events/mouseHandler.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MouseHandler: () => (/* binding */ MouseHandler)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nclass MouseHandler {\n    constructor() {\n        this.mousePos = [-1, -1];\n        this.mouseDown = false;\n        this.shiftDown = false;\n        this.controlDown = false;\n        this.drag = null;\n    }\n    onMouseMove(event) {\n        var _a;\n        this.mousePos = [event.clientX, event.clientY];\n        (_a = this.drag) === null || _a === void 0 ? void 0 : _a.update(event.clientX, event.clientY);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleMouseMove();\n    }\n    onMouseDown(event) {\n        if (event.button == 0) { // left click\n            this.drag = new Drag(event.clientX, event.clientY);\n            this.mouseDown = true;\n            this.shiftDown = event.shiftKey;\n            this.controlDown = event.ctrlKey;\n        }\n    }\n    onMouseUp(event) {\n        if (event.button == 0) { // left click\n            if (!this.drag.isDrag()) {\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleClickInput();\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCli().render();\n            }\n            this.drag.destroy();\n            this.drag = null;\n            this.mouseDown = false;\n        }\n    }\n    getMousePos() {\n        return this.mousePos;\n    }\n}\nclass Drag {\n    constructor(x1, y1) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.element = document.getElementById(\"selection-rectangle\");\n        this.update(this.x1, this.y1);\n        this.element.hidden = false;\n    }\n    update(x, y) {\n        this.x2 = x;\n        this.y2 = y;\n        const top = Math.min(this.y1, this.y2);\n        const bottom = Math.max(this.y1, this.y2);\n        const left = Math.min(this.x1, this.x2);\n        const right = Math.max(this.x1, this.x2);\n        this.element.style.left = `${left}px`;\n        this.element.style.top = `${top}px`;\n        this.element.style.width = `${right - left}px`;\n        this.element.style.height = `${bottom - top}px`;\n    }\n    isDrag() {\n        return this.x1 != this.x2 || this.y1 != this.y2;\n    }\n    destroy() {\n        this.element.hidden = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMxQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3hDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFekMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUM7UUFDdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUM7UUFDcEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEdBQUcsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDO1FBQy9DLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFHLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQztJQUNsRCxDQUFDO0lBRU0sTUFBTTtRQUNYLE9BQU8sSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNsRCxDQUFDO0lBRU0sT0FBTztRQUNaLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztJQUM3QixDQUFDO0NBS0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9ldmVudHMvbW91c2VIYW5kbGVyLnRzPzJmYTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCI7XG5cblxuXG5leHBvcnQgY2xhc3MgTW91c2VIYW5kbGVyIHtcblxuICBwcml2YXRlIG1vdXNlUG9zOiBbbnVtYmVyLCBudW1iZXJdO1xuICBwcml2YXRlIG1vdXNlRG93bjogYm9vbGVhbjtcbiAgcHJpdmF0ZSBzaGlmdERvd246IGJvb2xlYW47XG4gIHByaXZhdGUgY29udHJvbERvd246IGJvb2xlYW47XG4gIHByaXZhdGUgZHJhZzogRHJhZyB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5tb3VzZVBvcyA9IFstMSwgLTFdO1xuICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XG4gICAgdGhpcy5zaGlmdERvd24gPSBmYWxzZTtcbiAgICB0aGlzLmNvbnRyb2xEb3duID0gZmFsc2U7XG4gICAgdGhpcy5kcmFnID0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIHRoaXMubW91c2VQb3MgPSBbZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WV07XG4gICAgdGhpcy5kcmFnPy51cGRhdGUoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG4gICAgSU5TVEFOQ0UuZ2V0Q29tbWFuZE1hbmFnZXIoKS5oYW5kbGVNb3VzZU1vdmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbk1vdXNlRG93bihldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC5idXR0b24gPT0gMCkgeyAvLyBsZWZ0IGNsaWNrXG4gICAgICB0aGlzLmRyYWcgPSBuZXcgRHJhZyhldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2hpZnREb3duID0gZXZlbnQuc2hpZnRLZXk7XG4gICAgICB0aGlzLmNvbnRyb2xEb3duID0gZXZlbnQuY3RybEtleTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25Nb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PSAwKSB7IC8vIGxlZnQgY2xpY2tcblxuICAgICAgaWYgKCF0aGlzLmRyYWchLmlzRHJhZygpKSB7XG4gICAgICAgIElOU1RBTkNFLmdldENvbW1hbmRNYW5hZ2VyKCkuaGFuZGxlQ2xpY2tJbnB1dCgpO1xuICAgICAgICBJTlNUQU5DRS5nZXRDbGkoKS5yZW5kZXIoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcmFnIS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmRyYWcgPSBudWxsO1xuICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcblxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRNb3VzZVBvcygpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICByZXR1cm4gdGhpcy5tb3VzZVBvcztcbiAgfVxuXG59XG5cblxuY2xhc3MgRHJhZyB7XG5cbiAgcHJpdmF0ZSB4MiE6IG51bWJlcjtcbiAgcHJpdmF0ZSB5MiE6IG51bWJlcjtcbiAgcHJpdmF0ZSBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHgxOiBudW1iZXIsXG4gICAgcHJpdmF0ZSB5MTogbnVtYmVyLFxuICApIHtcbiAgICB0aGlzLmVsZW1lbnQgPSA8SFRNTERpdkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWxlY3Rpb24tcmVjdGFuZ2xlXCIpO1xuICAgIHRoaXMudXBkYXRlKHRoaXMueDEsIHRoaXMueTEpO1xuICAgIHRoaXMuZWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLngyID0geDtcbiAgICB0aGlzLnkyID0geTtcblxuICAgIGNvbnN0IHRvcCA9IE1hdGgubWluKHRoaXMueTEsIHRoaXMueTIpO1xuICAgIGNvbnN0IGJvdHRvbSA9IE1hdGgubWF4KHRoaXMueTEsIHRoaXMueTIpO1xuICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1pbih0aGlzLngxLCB0aGlzLngyKTtcbiAgICBjb25zdCByaWdodCA9IE1hdGgubWF4KHRoaXMueDEsIHRoaXMueDIpO1xuXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtyaWdodCAtIGxlZnR9cHhgO1xuICAgIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtib3R0b20gLSB0b3B9cHhgO1xuICB9XG5cbiAgcHVibGljIGlzRHJhZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy54MSAhPSB0aGlzLngyIHx8IHRoaXMueTEgIT0gdGhpcy55MjtcbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICB9XG5cblxuXG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/events/mouseHandler.ts\n");

/***/ }),

/***/ "./src/geometry/boundingBox.ts":
/*!*************************************!*\
  !*** ./src/geometry/boundingBox.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BoundingBox: () => (/* binding */ BoundingBox)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n\nclass BoundingBox {\n    constructor(xMin = Infinity, xMax = -Infinity, yMin = Infinity, yMax = -Infinity, zMin = Infinity, zMax = -Infinity) {\n        this.xMin = xMin;\n        this.xMax = xMax;\n        this.yMin = yMin;\n        this.yMax = yMax;\n        this.zMin = zMin;\n        this.zMax = zMax;\n    }\n    getXMin() { return this.xMin; }\n    getYMin() { return this.yMin; }\n    getZMin() { return this.zMin; }\n    getXMax() { return this.xMax; }\n    getYMax() { return this.yMax; }\n    getZMax() { return this.zMax; }\n    print() {\n        console.log(`BB: x: [${this.xMin}, ${this.xMax}], y: [${this.yMin}, ${this.yMax}], z: [${this.zMin}, ${this.zMax}];`);\n    }\n    addVec3(v) {\n        this.xMin = Math.min(this.xMin, v[0]);\n        this.yMin = Math.min(this.yMin, v[1]);\n        this.zMin = Math.min(this.zMin, v[2]);\n        this.xMax = Math.max(this.xMax, v[0]);\n        this.yMax = Math.max(this.yMax, v[1]);\n        this.zMax = Math.max(this.zMax, v[2]);\n    }\n    addBoundingBox(bb) {\n        this.xMin = Math.min(this.xMin, bb.xMin);\n        this.yMin = Math.min(this.yMin, bb.yMin);\n        this.zMin = Math.min(this.zMin, bb.zMin);\n        this.xMax = Math.max(this.xMax, bb.xMax);\n        this.yMax = Math.max(this.yMax, bb.yMax);\n        this.zMax = Math.max(this.zMax, bb.zMax);\n    }\n    getCenter() {\n        const res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create((this.xMin + this.xMax) / 2, (this.yMin + this.yMax) / 2, (this.zMin + this.zMax) / 2);\n        if (isNaN(res[0]))\n            res[0] = 0;\n        if (isNaN(res[1]))\n            res[1] = 0;\n        if (isNaN(res[2]))\n            res[2] = 0;\n        return res;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvYm91bmRpbmdCb3gudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUM7QUFFbEMsTUFBTSxXQUFXO0lBRXRCLFlBQ1UsT0FBZSxRQUFRLEVBQ3ZCLE9BQWUsQ0FBQyxRQUFRLEVBQ3hCLE9BQWUsUUFBUSxFQUN2QixPQUFlLENBQUMsUUFBUSxFQUN4QixPQUFlLFFBQVEsRUFDdkIsT0FBZSxDQUFDLFFBQVE7UUFMeEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBb0I7UUFDeEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBb0I7UUFDeEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBb0I7SUFHbEMsQ0FBQztJQUVNLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRXZDLEtBQUs7UUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxVQUFVLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksVUFBVSxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDO0lBQ3hILENBQUM7SUFFTSxPQUFPLENBQUMsQ0FBTztRQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRU0sY0FBYyxDQUFDLEVBQWU7UUFDbkMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVNLFNBQVM7UUFDZCxNQUFNLEdBQUcsR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FDM0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQzNCLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUMzQixDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FDNUIsQ0FBQztRQUNGLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUIsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5QixJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvYm91bmRpbmdCb3gudHM/ODcxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5cbmV4cG9ydCBjbGFzcyBCb3VuZGluZ0JveCB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB4TWluOiBudW1iZXIgPSBJbmZpbml0eSxcbiAgICBwcml2YXRlIHhNYXg6IG51bWJlciA9IC1JbmZpbml0eSxcbiAgICBwcml2YXRlIHlNaW46IG51bWJlciA9IEluZmluaXR5LFxuICAgIHByaXZhdGUgeU1heDogbnVtYmVyID0gLUluZmluaXR5LFxuICAgIHByaXZhdGUgek1pbjogbnVtYmVyID0gSW5maW5pdHksXG4gICAgcHJpdmF0ZSB6TWF4OiBudW1iZXIgPSAtSW5maW5pdHlcbiAgKSB7XG5cbiAgfVxuXG4gIHB1YmxpYyBnZXRYTWluKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnhNaW47IH1cbiAgcHVibGljIGdldFlNaW4oKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueU1pbjsgfVxuICBwdWJsaWMgZ2V0Wk1pbigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy56TWluOyB9XG4gIHB1YmxpYyBnZXRYTWF4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnhNYXg7IH1cbiAgcHVibGljIGdldFlNYXgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueU1heDsgfVxuICBwdWJsaWMgZ2V0Wk1heCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy56TWF4OyB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKGBCQjogeDogWyR7dGhpcy54TWlufSwgJHt0aGlzLnhNYXh9XSwgeTogWyR7dGhpcy55TWlufSwgJHt0aGlzLnlNYXh9XSwgejogWyR7dGhpcy56TWlufSwgJHt0aGlzLnpNYXh9XTtgKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRWZWMzKHY6IFZlYzMpOiB2b2lkIHtcbiAgICB0aGlzLnhNaW4gPSBNYXRoLm1pbih0aGlzLnhNaW4sIHZbMF0pO1xuICAgIHRoaXMueU1pbiA9IE1hdGgubWluKHRoaXMueU1pbiwgdlsxXSk7XG4gICAgdGhpcy56TWluID0gTWF0aC5taW4odGhpcy56TWluLCB2WzJdKTtcbiAgICB0aGlzLnhNYXggPSBNYXRoLm1heCh0aGlzLnhNYXgsIHZbMF0pO1xuICAgIHRoaXMueU1heCA9IE1hdGgubWF4KHRoaXMueU1heCwgdlsxXSk7XG4gICAgdGhpcy56TWF4ID0gTWF0aC5tYXgodGhpcy56TWF4LCB2WzJdKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRCb3VuZGluZ0JveChiYjogQm91bmRpbmdCb3gpOiB2b2lkIHtcbiAgICB0aGlzLnhNaW4gPSBNYXRoLm1pbih0aGlzLnhNaW4sIGJiLnhNaW4pO1xuICAgIHRoaXMueU1pbiA9IE1hdGgubWluKHRoaXMueU1pbiwgYmIueU1pbik7XG4gICAgdGhpcy56TWluID0gTWF0aC5taW4odGhpcy56TWluLCBiYi56TWluKTtcbiAgICB0aGlzLnhNYXggPSBNYXRoLm1heCh0aGlzLnhNYXgsIGJiLnhNYXgpO1xuICAgIHRoaXMueU1heCA9IE1hdGgubWF4KHRoaXMueU1heCwgYmIueU1heCk7XG4gICAgdGhpcy56TWF4ID0gTWF0aC5tYXgodGhpcy56TWF4LCBiYi56TWF4KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDZW50ZXIoKTogVmVjMyB7XG4gICAgY29uc3QgcmVzOiBWZWMzID0gdmVjMy5jcmVhdGUoXG4gICAgICAodGhpcy54TWluICsgdGhpcy54TWF4KSAvIDIsXG4gICAgICAodGhpcy55TWluICsgdGhpcy55TWF4KSAvIDIsXG4gICAgICAodGhpcy56TWluICsgdGhpcy56TWF4KSAvIDIsXG4gICAgKTtcbiAgICBpZiAoaXNOYU4ocmVzWzBdKSkgcmVzWzBdID0gMDtcbiAgICBpZiAoaXNOYU4ocmVzWzFdKSkgcmVzWzFdID0gMDtcbiAgICBpZiAoaXNOYU4ocmVzWzJdKSkgcmVzWzJdID0gMDtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/boundingBox.ts\n");

/***/ }),

/***/ "./src/geometry/geometry.ts":
/*!**********************************!*\
  !*** ./src/geometry/geometry.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Geometry: () => (/* binding */ Geometry)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\n\nclass Geometry {\n    constructor(parent = null, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.identity(), material) {\n        this.parent = parent;\n        this.model = model;\n        this.material = material;\n    }\n    setModel(model) {\n        this.model = model;\n    }\n    getModel() {\n        if (this.parent) {\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.mul(this.parent.getModel(), this.model);\n        }\n        else {\n            return this.model;\n        }\n    }\n    setMaterial(mat) {\n        this.material = mat;\n    }\n    getColorBuffer() {\n        if (this.material) {\n            const mat = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getMaterial(this.material);\n            if (mat && mat.color) {\n                return mat.getColorBuffer();\n            }\n            if (this.parent) {\n                return this.parent.getColorBuffer();\n            }\n        }\n        return _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getDefaultMaterial().getColorBuffer();\n    }\n    getColor() {\n        if (this.material) {\n            const mat = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getMaterial(this.material);\n            if (mat && mat.color) {\n                return mat.color;\n            }\n            if (this.parent) {\n                return this.parent.getColor();\n            }\n        }\n        return _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getDefaultMaterial().color;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvZ2VvbWV0cnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ2I7QUFNM0IsTUFBZSxRQUFRO0lBRzVCLFlBQ1UsU0FBMEIsSUFBSSxFQUM5QixRQUFjLDZDQUFJLENBQUMsUUFBUSxFQUFFLEVBQzdCLFFBQTZCO1FBRjdCLFdBQU0sR0FBTixNQUFNLENBQXdCO1FBQzlCLFVBQUssR0FBTCxLQUFLLENBQXdCO1FBQzdCLGFBQVEsR0FBUixRQUFRLENBQXFCO0lBR3ZDLENBQUM7SUFLTSxRQUFRLENBQUMsS0FBVztRQUN6QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNyQixDQUFDO0lBRU0sUUFBUTtRQUNiLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNmLE9BQU8sNkNBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDckQ7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztTQUNuQjtJQUNILENBQUM7SUFFTSxXQUFXLENBQUMsR0FBaUI7UUFDbEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUM7SUFDdEIsQ0FBQztJQUVNLGNBQWM7UUFFbkIsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLE1BQU0sR0FBRyxHQUF5QiwwQ0FBUSxDQUFDLGtCQUFrQixFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzRixJQUFJLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFO2dCQUNwQixPQUFPLEdBQUcsQ0FBQyxjQUFjLEVBQUcsQ0FBQzthQUM5QjtZQUNELElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDZixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7YUFDckM7U0FDRjtRQUNELE9BQU8sMENBQVEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsY0FBYyxFQUFHLENBQUM7SUFDOUUsQ0FBQztJQUVNLFFBQVE7UUFDYixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDakIsTUFBTSxHQUFHLEdBQXlCLDBDQUFRLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNGLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUU7Z0JBQ3BCLE9BQU8sR0FBRyxDQUFDLEtBQUssQ0FBQzthQUNsQjtZQUNELElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDZixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7YUFDL0I7U0FDRjtRQUNELE9BQU8sMENBQVEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsS0FBTSxDQUFDO0lBQ25FLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L2dlb21ldHJ5LnRzPzY5NjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCwgTWF0ZXJpYWxOYW1lIH0gZnJvbSBcIi4uL21hdGVyaWFscy9tYXRlcmlhbFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEdlb21ldHJ5IHtcblxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcGFyZW50OiBHZW9tZXRyeSB8IG51bGwgPSBudWxsLFxuICAgIHByaXZhdGUgbW9kZWw6IE1hdDQgPSBtYXQ0LmlkZW50aXR5KCksXG4gICAgcHJpdmF0ZSBtYXRlcmlhbDogTWF0ZXJpYWxOYW1lIHwgbnVsbCxcbiAgKSB7XG5cbiAgfVxuXG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveDtcbiAgcHVibGljIGFic3RyYWN0IGludGVyc2VjdChyYXk6IFJheSk6IG51bWJlciB8IG51bGw7XG5cbiAgcHVibGljIHNldE1vZGVsKG1vZGVsOiBNYXQ0KTogdm9pZCB7XG4gICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICB9XG5cbiAgcHVibGljIGdldE1vZGVsKCk6IE1hdDQge1xuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuIG1hdDQubXVsKHRoaXMucGFyZW50LmdldE1vZGVsKCksIHRoaXMubW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5tb2RlbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0TWF0ZXJpYWwobWF0OiBNYXRlcmlhbE5hbWUpIHtcbiAgICB0aGlzLm1hdGVyaWFsID0gbWF0O1xuICB9XG5cbiAgcHVibGljIGdldENvbG9yQnVmZmVyKCk6IEdQVUJ1ZmZlciB7XG5cbiAgICBpZiAodGhpcy5tYXRlcmlhbCkge1xuICAgICAgY29uc3QgbWF0OiBNYXRlcmlhbCB8IHVuZGVmaW5lZCA9IElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLmdldE1hdGVyaWFsKHRoaXMubWF0ZXJpYWwpO1xuICAgICAgaWYgKG1hdCAmJiBtYXQuY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIG1hdC5nZXRDb2xvckJ1ZmZlcigpITtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sb3JCdWZmZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLmdldERlZmF1bHRNYXRlcmlhbCgpLmdldENvbG9yQnVmZmVyKCkhO1xuICB9XG5cbiAgcHVibGljIGdldENvbG9yKCk6IFZlYzQge1xuICAgIGlmICh0aGlzLm1hdGVyaWFsKSB7XG4gICAgICBjb25zdCBtYXQ6IE1hdGVyaWFsIHwgdW5kZWZpbmVkID0gSU5TVEFOQ0UuZ2V0TWF0ZXJpYWxNYW5hZ2VyKCkuZ2V0TWF0ZXJpYWwodGhpcy5tYXRlcmlhbCk7XG4gICAgICBpZiAobWF0ICYmIG1hdC5jb2xvcikge1xuICAgICAgICByZXR1cm4gbWF0LmNvbG9yO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRDb2xvcigpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gSU5TVEFOQ0UuZ2V0TWF0ZXJpYWxNYW5hZ2VyKCkuZ2V0RGVmYXVsdE1hdGVyaWFsKCkuY29sb3IhO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/geometry.ts\n");

/***/ }),

/***/ "./src/geometry/instancedMesh.ts":
/*!***************************************!*\
  !*** ./src/geometry/instancedMesh.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InstancedMesh: () => (/* binding */ InstancedMesh)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renterMeshInstanced */ \"./src/render/renterMeshInstanced.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _instancedMeshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./instancedMeshBoundingBoxHeirarchy */ \"./src/geometry/instancedMeshBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n\n\n\n\n\n\n\nclass InstancedMesh extends _geometry__WEBPACK_IMPORTED_MODULE_3__.Geometry {\n    constructor(parent, verts, normals, indices, transforms, model, material = null) {\n        super(parent, model, material);\n        this.verts = verts;\n        this.normals = normals;\n        this.indices = indices;\n        this.transforms = transforms;\n        const vertexBuffer = [];\n        for (let i = 0; i < verts.length; i++) {\n            vertexBuffer.push(...verts[i], 1, ...normals[i], 0);\n        }\n        const renderMeshObj = new _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_1__.RenderMeshInstanced(this, new Float32Array(vertexBuffer), new Int32Array(this.indices), this.getModel(), transforms);\n        renderMeshObj.setConstantScreenSize(true);\n        this.renderMesh = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderMeshInstanced(renderMeshObj);\n        this.boundingBoxHeirarchy = new _instancedMeshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__.InstancedMeshBoundingBoxHeirarchy(this);\n    }\n    getInstanceCount() {\n        return this.transforms.length;\n    }\n    getVerts() {\n        return this.verts;\n    }\n    getIndices() {\n        return this.indices;\n    }\n    getBoundingBoxInstance(instance) {\n        const bb = new _boundingBox__WEBPACK_IMPORTED_MODULE_2__.BoundingBox();\n        const transform = this.transforms[instance];\n        for (let vert of this.verts) {\n            bb.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.transformMat4(vert, transform));\n        }\n        return bb;\n    }\n    intersect(ray) {\n        const objectSpaceRay = _ray__WEBPACK_IMPORTED_MODULE_5__.Ray.transform(ray, wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.inverse(this.getModel()));\n        return this.boundingBoxHeirarchy.intersect(objectSpaceRay, this.verts);\n    }\n    getTransform(intance) {\n        return this.transforms[intance];\n    }\n    destroy() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeMeshInstanced(this.renderMesh);\n    }\n    getBoundingBox() {\n        const boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_2__.BoundingBox();\n        for (let instance = 0; instance < this.transforms.length; instance++) {\n            const transform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.multiply(this.getModel(), this.transforms[instance]);\n            for (let vert of this.verts) {\n                boundingBox.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.transformMat4(transform, vert));\n            }\n        }\n        return boundingBox;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxjQUFjO1FBQ25CLE1BQU0sV0FBVyxHQUFnQixJQUFJLHFEQUFXLEVBQUUsQ0FBQztRQUNuRCxLQUFLLElBQUksUUFBUSxHQUFHLENBQUMsRUFBRSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLEVBQUU7WUFDcEUsTUFBTSxTQUFTLEdBQVMsNkNBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNsRixLQUFLLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQzNCLFdBQVcsQ0FBQyxPQUFPLENBQUMsNkNBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDMUQ7U0FDRjtRQUNELE9BQU8sV0FBVyxDQUFDO0lBQ3JCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L2luc3RhbmNlZE1lc2gudHM/NWNiYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJlbmRlck1lc2ggfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlck1lc2hcIjtcbmltcG9ydCB7IFJlbmRlck1lc2hJbnN0YW5jZWQgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbnRlck1lc2hJbnN0YW5jZWRcIjtcbmltcG9ydCB7IFJlbmRlcklEIH0gZnJvbSBcIi4uL3NjZW5lL3NjZW5lXCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnN0YW5jZWRNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHkgfSBmcm9tIFwiLi9pbnN0YW5jZWRNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlcIjtcbmltcG9ydCB7IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeSB9IGZyb20gXCIuL21lc2hCb3VuZGluZ0JveEhlaXJhcmNoeVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cblxuXG5leHBvcnQgY2xhc3MgSW5zdGFuY2VkTWVzaCBleHRlbmRzIEdlb21ldHJ5IHtcblxuICBwcml2YXRlIHJlbmRlck1lc2g6IFJlbmRlcklEO1xuICBwcml2YXRlIGJvdW5kaW5nQm94SGVpcmFyY2h5OiBJbnN0YW5jZWRNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50OiBHZW9tZXRyeSB8IG51bGwsXG4gICAgcHJpdmF0ZSB2ZXJ0czogVmVjM1tdLFxuICAgIHByaXZhdGUgbm9ybWFsczogVmVjM1tdLFxuICAgIHByaXZhdGUgaW5kaWNlczogbnVtYmVyW10sXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1zOiBNYXQ0W10sXG4gICAgbW9kZWw/OiBNYXQ0LFxuICAgIG1hdGVyaWFsOiBNYXRlcmlhbE5hbWUgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG5cbiAgICBjb25zdCB2ZXJ0ZXhCdWZmZXI6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmVydGV4QnVmZmVyLnB1c2goLi4udmVydHNbaV0sIDEsIC4uLm5vcm1hbHNbaV0sIDApO1xuICAgIH1cbiAgICBjb25zdCByZW5kZXJNZXNoT2JqOiBSZW5kZXJNZXNoSW5zdGFuY2VkID0gbmV3IFJlbmRlck1lc2hJbnN0YW5jZWQoXG4gICAgICB0aGlzLFxuICAgICAgbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhCdWZmZXIpLFxuICAgICAgbmV3IEludDMyQXJyYXkodGhpcy5pbmRpY2VzKSxcbiAgICAgIHRoaXMuZ2V0TW9kZWwoKSxcbiAgICAgIHRyYW5zZm9ybXNcbiAgICApO1xuICAgIHJlbmRlck1lc2hPYmouc2V0Q29uc3RhbnRTY3JlZW5TaXplKHRydWUpO1xuICAgIHRoaXMucmVuZGVyTWVzaCA9IElOU1RBTkNFLmdldFNjZW5lKCkuYWRkUmVuZGVyTWVzaEluc3RhbmNlZChyZW5kZXJNZXNoT2JqKTtcblxuICAgIHRoaXMuYm91bmRpbmdCb3hIZWlyYXJjaHkgPSBuZXcgSW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5KHRoaXMpO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RhbmNlQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1zLmxlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWZXJ0cygpOiBWZWMzW10ge1xuICAgIHJldHVybiB0aGlzLnZlcnRzO1xuICB9XG5cbiAgcHVibGljIGdldEluZGljZXMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLmluZGljZXM7XG4gIH1cblxuICBwdWJsaWMgZ2V0Qm91bmRpbmdCb3hJbnN0YW5jZShpbnN0YW5jZTogbnVtYmVyKTogQm91bmRpbmdCb3gge1xuICAgIGNvbnN0IGJiOiBCb3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgIGNvbnN0IHRyYW5zZm9ybTogTWF0NCA9IHRoaXMudHJhbnNmb3Jtc1tpbnN0YW5jZV07XG4gICAgZm9yIChsZXQgdmVydCBvZiB0aGlzLnZlcnRzKSB7XG4gICAgICBiYi5hZGRWZWMzKHZlYzMudHJhbnNmb3JtTWF0NCh2ZXJ0LCB0cmFuc2Zvcm0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGJiO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdChyYXk6IFJheSk6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IG9iamVjdFNwYWNlUmF5OiBSYXkgPSBSYXkudHJhbnNmb3JtKHJheSwgbWF0NC5pbnZlcnNlKHRoaXMuZ2V0TW9kZWwoKSkpO1xuICAgIHJldHVybiB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5LmludGVyc2VjdChvYmplY3RTcGFjZVJheSwgdGhpcy52ZXJ0cyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHJhbnNmb3JtKGludGFuY2U6IG51bWJlcik6IE1hdDQge1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybXNbaW50YW5jZV07XG4gIH1cblxuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZU1lc2hJbnN0YW5jZWQodGhpcy5yZW5kZXJNZXNoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgY29uc3QgYm91bmRpbmdCb3g6IEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgZm9yIChsZXQgaW5zdGFuY2UgPSAwOyBpbnN0YW5jZSA8IHRoaXMudHJhbnNmb3Jtcy5sZW5ndGg7IGluc3RhbmNlKyspIHtcbiAgICAgIGNvbnN0IHRyYW5zZm9ybTogTWF0NCA9IG1hdDQubXVsdGlwbHkodGhpcy5nZXRNb2RlbCgpLCB0aGlzLnRyYW5zZm9ybXNbaW5zdGFuY2VdKTtcbiAgICAgIGZvciAobGV0IHZlcnQgb2YgdGhpcy52ZXJ0cykge1xuICAgICAgICBib3VuZGluZ0JveC5hZGRWZWMzKHZlYzMudHJhbnNmb3JtTWF0NCh0cmFuc2Zvcm0sIHZlcnQpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJvdW5kaW5nQm94O1xuICB9XG5cbn1cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/instancedMesh.ts\n");

/***/ }),

/***/ "./src/geometry/instancedMeshBoundingBoxHeirarchy.ts":
/*!***********************************************************!*\
  !*** ./src/geometry/instancedMeshBoundingBoxHeirarchy.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InstancedMeshBoundingBoxHeirarchy: () => (/* binding */ InstancedMeshBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _meshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./meshBoundingBoxHeirarchy */ \"./src/geometry/meshBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n\n\n\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\n// shold probably transform ray\nclass InstancedMeshBoundingBoxHeirarchyNode {\n    constructor(heirarchy, instances, boundingBoxes, depth = 0) {\n        this.heirarchy = heirarchy;\n        this.depth = depth;\n        this.setup(instances, boundingBoxes);\n    }\n    setup(instances, boundingBoxes) {\n        this.axis = this.depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        var averageCenter = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 0);\n        for (let bb of boundingBoxes) {\n            this.boundingBox.addBoundingBox(bb);\n            averageCenter = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(averageCenter, bb.getCenter());\n        }\n        averageCenter = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(averageCenter, 1 / boundingBoxes.length);\n        if (instances.length <= InstancedMeshBoundingBoxHeirarchy.MAX_INSTANCES_PER_LEAF) {\n            // leaf\n            this.instances = instances;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            // non leaf\n            this.instances = null;\n            const child1Indices = [];\n            const child2Indices = [];\n            for (let i = 0; i < instances.length; i++) {\n                const bbCenter = boundingBoxes[i].getCenter();\n                if (bbCenter[this.axis] < averageCenter[this.axis]) {\n                    child1Indices.push(instances[i]);\n                }\n                else {\n                    child2Indices.push(instances[i]);\n                }\n            }\n            this.child1 = new InstancedMeshBoundingBoxHeirarchyNode(this.heirarchy, child1Indices, boundingBoxes, this.depth + 1);\n            this.child2 = new InstancedMeshBoundingBoxHeirarchyNode(this.heirarchy, child2Indices, boundingBoxes, this.depth + 1);\n        }\n    }\n    intersect(ray, verts) {\n        if (ray.intersectBoundingBox(this.boundingBox) === null)\n            return null;\n        if (this.isLeaf()) {\n            var res = null;\n            for (let i of this.instances) {\n                var t = this.heirarchy.intersectInstance(ray, i);\n                if (t !== null) {\n                    if (res === null)\n                        res = t;\n                    else\n                        res = Math.min(res, t);\n                }\n            }\n            return res;\n        }\n        else {\n            const t1 = this.child1.intersect(ray, verts);\n            const t2 = this.child2.intersect(ray, verts);\n            if (t1 === null)\n                return t2;\n            if (t2 === null)\n                return t1;\n            return Math.min(t1, t2);\n        }\n    }\n    isLeaf() {\n        return this.instances !== null;\n    }\n    print() {\n        var _a, _b;\n        let str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.instances)\n            str += `${this.instances.length}instances`;\n        else\n            str += \"node\";\n        console.log(str);\n        (_a = this.child1) === null || _a === void 0 ? void 0 : _a.print();\n        (_b = this.child2) === null || _b === void 0 ? void 0 : _b.print();\n    }\n}\nclass InstancedMeshBoundingBoxHeirarchy {\n    constructor(mesh) {\n        this.mesh = mesh;\n        this.meshBBH = new _meshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_1__.MeshBoundingBoxHeirarchy(mesh.getVerts(), mesh.getIndices());\n        const instances = [];\n        const bbs = [];\n        for (let i = 0; i < mesh.getInstanceCount(); i++) {\n            instances.push(i);\n            bbs.push(mesh.getBoundingBoxInstance(i));\n        }\n        this.root = new InstancedMeshBoundingBoxHeirarchyNode(this, instances, bbs);\n    }\n    print() {\n        console.log(\"========Instanced-Mesh-BBH========\");\n        this.root.print();\n    }\n    intersect(ray, verts) {\n        return this.root.intersect(ray, verts);\n    }\n    intersectInstance(ray, instance) {\n        const objectSpaceRay = _ray__WEBPACK_IMPORTED_MODULE_2__.Ray.transform(ray, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.inverse(this.mesh.getTransform(instance)));\n        return this.meshBBH.intersect(objectSpaceRay, this.mesh.getVerts());\n    }\n}\nInstancedMeshBoundingBoxHeirarchy.MAX_INSTANCES_PER_LEAF = 5;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvaW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBQ1Q7QUFFMEI7QUFDMUM7QUFFNUIsSUFBSyxJQUlKO0FBSkQsV0FBSyxJQUFJO0lBQ1AseUJBQUs7SUFDTCx5QkFBSztJQUNMLHlCQUFLO0FBQ1AsQ0FBQyxFQUpJLElBQUksS0FBSixJQUFJLFFBSVI7QUFFRCwrQkFBK0I7QUFFL0IsTUFBTSxxQ0FBcUM7SUFRekMsWUFDVSxTQUE0QyxFQUNwRCxTQUFtQixFQUNuQixhQUE0QixFQUNwQixRQUFnQixDQUFDO1FBSGpCLGNBQVMsR0FBVCxTQUFTLENBQW1DO1FBRzVDLFVBQUssR0FBTCxLQUFLLENBQVk7UUFFekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVPLEtBQUssQ0FBQyxTQUFtQixFQUFFLGFBQTRCO1FBRTdELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLHFEQUFXLEVBQUUsQ0FBQztRQUNyQyxJQUFJLGFBQWEsR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9DLEtBQUssSUFBSSxFQUFFLElBQUksYUFBYSxFQUFFO1lBQzVCLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3BDLGFBQWEsR0FBRyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7U0FDekQ7UUFDRCxhQUFhLEdBQUcsNkNBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUMsR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFHcEUsSUFBSSxTQUFTLENB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b0NBQW9DLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFTSxTQUFTLENBQUMsR0FBUSxFQUFFLEtBQWE7UUFDdEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVNLGlCQUFpQixDQUFDLEdBQVEsRUFBRSxRQUFnQjtRQUNqRCxNQUFNLGNBQWMsR0FBUSxxQ0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsNkNBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9GLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUN0RSxDQUFDOztBQTdCc0Isd0RBQXNCLEdBQUcsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvaW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5LnRzPzZiZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgSW5zdGFuY2VkTWVzaCB9IGZyb20gXCIuL2luc3RhbmNlZE1lc2hcIjtcbmltcG9ydCB7IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeSB9IGZyb20gXCIuL21lc2hCb3VuZGluZ0JveEhlaXJhcmNoeVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cbmVudW0gQXhpcyB7XG4gIFggPSAwLFxuICBZID0gMSxcbiAgWiA9IDIsXG59XG5cbi8vIHNob2xkIHByb2JhYmx5IHRyYW5zZm9ybSByYXlcblxuY2xhc3MgSW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSB7XG5cbiAgcHJpdmF0ZSBpbnN0YW5jZXMhOiBudW1iZXJbXSB8IG51bGw7XG4gIHByaXZhdGUgY2hpbGQxITogSW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSB8IG51bGw7XG4gIHByaXZhdGUgY2hpbGQyITogSW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSB8IG51bGw7XG4gIHByaXZhdGUgYm91bmRpbmdCb3ghOiBCb3VuZGluZ0JveDtcbiAgcHJpdmF0ZSBheGlzITogQXhpcztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGhlaXJhcmNoeTogSW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5LFxuICAgIGluc3RhbmNlczogbnVtYmVyW10sXG4gICAgYm91bmRpbmdCb3hlczogQm91bmRpbmdCb3hbXSxcbiAgICBwcml2YXRlIGRlcHRoOiBudW1iZXIgPSAwXG4gICkge1xuICAgIHRoaXMuc2V0dXAoaW5zdGFuY2VzLCBib3VuZGluZ0JveGVzKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXAoaW5zdGFuY2VzOiBudW1iZXJbXSwgYm91bmRpbmdCb3hlczogQm91bmRpbmdCb3hbXSk6IHZvaWQge1xuXG4gICAgdGhpcy5heGlzID0gdGhpcy5kZXB0aCAlIDM7XG5cbiAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgdmFyIGF2ZXJhZ2VDZW50ZXI6IFZlYzMgPSB2ZWMzLmNyZWF0ZSgwLCAwLCAwKTtcbiAgICBmb3IgKGxldCBiYiBvZiBib3VuZGluZ0JveGVzKSB7XG4gICAgICB0aGlzLmJvdW5kaW5nQm94LmFkZEJvdW5kaW5nQm94KGJiKTtcbiAgICAgIGF2ZXJhZ2VDZW50ZXIgPSB2ZWMzLmFkZChhdmVyYWdlQ2VudGVyLCBiYi5nZXRDZW50ZXIoKSk7XG4gICAgfVxuICAgIGF2ZXJhZ2VDZW50ZXIgPSB2ZWMzLnNjYWxlKGF2ZXJhZ2VDZW50ZXIsIDEgLyBib3VuZGluZ0JveGVzLmxlbmd0aCk7XG5cblxuICAgIGlmIChpbnN0YW5jZXMubGVuZ3RoIDw9IEluc3RhbmNlZE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeS5NQVhfSU5TVEFOQ0VTX1BFUl9MRUFGKSB7XG4gICAgICAvLyBsZWFmXG4gICAgICB0aGlzLmluc3RhbmNlcyA9IGluc3RhbmNlcztcbiAgICAgIHRoaXMuY2hpbGQxID0gbnVsbDtcbiAgICAgIHRoaXMuY2hpbGQyID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uIGxlYWZcbiAgICAgIHRoaXMuaW5zdGFuY2VzID0gbnVsbDtcbiAgICAgIGNvbnN0IGNoaWxkMUluZGljZXM6IG51bWJlcltdID0gW107XG4gICAgICBjb25zdCBjaGlsZDJJbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYmJDZW50ZXIgPSBib3VuZGluZ0JveGVzW2ldLmdldENlbnRlcigpO1xuICAgICAgICBpZiAoYmJDZW50ZXJbdGhpcy5heGlzXSA8IGF2ZXJhZ2VDZW50ZXJbdGhpcy5heGlzXSkge1xuICAgICAgICAgIGNoaWxkMUluZGljZXMucHVzaChpbnN0YW5jZXNbaV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkMkluZGljZXMucHVzaChpbnN0YW5jZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmNoaWxkMSA9IG5ldyBJbnN0YW5jZWRNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHRoaXMuaGVpcmFyY2h5LCBjaGlsZDFJbmRpY2VzLCBib3VuZGluZ0JveGVzLCB0aGlzLmRlcHRoICsgMSk7XG4gICAgICB0aGlzLmNoaWxkMiA9IG5ldyBJbnN0YW5jZWRNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHRoaXMuaGVpcmFyY2h5LCBjaGlsZDJJbmRpY2VzLCBib3VuZGluZ0JveGVzLCB0aGlzLmRlcHRoICsgMSk7XG4gICAgfVxuICB9XG5cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5LCB2ZXJ0czogVmVjM1tdKTogbnVtYmVyIHwgbnVsbCB7XG5cbiAgICBpZiAocmF5LmludGVyc2VjdEJvdW5kaW5nQm94KHRoaXMuYm91bmRpbmdCb3gpID09PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICB2YXIgcmVzOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICAgIGZvciAobGV0IGkgb2YgdGhpcy5pbnN0YW5jZXMhKSB7XG4gICAgICAgIHZhciB0OiBudW1iZXIgfCBudWxsID0gdGhpcy5oZWlyYXJjaHkuaW50ZXJzZWN0SW5zdGFuY2UocmF5LCBpKTtcbiAgICAgICAgaWYgKHQgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAocmVzID09PSBudWxsKSByZXMgPSB0O1xuICAgICAgICAgIGVsc2UgcmVzID0gTWF0aC5taW4ocmVzLCB0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdDEgPSB0aGlzLmNoaWxkMSEuaW50ZXJzZWN0KHJheSwgdmVydHMpO1xuICAgICAgY29uc3QgdDIgPSB0aGlzLmNoaWxkMiEuaW50ZXJzZWN0KHJheSwgdmVydHMpO1xuICAgICAgaWYgKHQxID09PSBudWxsKSByZXR1cm4gdDI7XG4gICAgICBpZiAodDIgPT09IG51bGwpIHJldHVybiB0MTtcbiAgICAgIHJldHVybiBNYXRoLm1pbih0MSwgdDIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc0xlYWYoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzICE9PSBudWxsO1xuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGxldCBzdHI6IHN0cmluZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlcHRoOyBpKyspIHN0ciArPSBcIi0+XCI7XG4gICAgaWYgKHRoaXMuaW5zdGFuY2VzKSBzdHIgKz0gYCR7dGhpcy5pbnN0YW5jZXMubGVuZ3RofWluc3RhbmNlc2A7XG4gICAgZWxzZSBzdHIgKz0gXCJub2RlXCI7XG4gICAgY29uc29sZS5sb2coc3RyKTtcbiAgICB0aGlzLmNoaWxkMT8ucHJpbnQoKTtcbiAgICB0aGlzLmNoaWxkMj8ucHJpbnQoKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBjbGFzcyBJbnN0YW5jZWRNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHkge1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX0lOU1RBTkNFU19QRVJfTEVBRiA9IDU7XG5cbiAgcHJpdmF0ZSByb290OiBJbnN0YW5jZWRNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlO1xuICBwcml2YXRlIG1lc2hCQkg6IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lc2g6IEluc3RhbmNlZE1lc2gpIHtcbiAgICB0aGlzLm1lc2hCQkggPSBuZXcgTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5KG1lc2guZ2V0VmVydHMoKSwgbWVzaC5nZXRJbmRpY2VzKCkpO1xuXG4gICAgY29uc3QgaW5zdGFuY2VzOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IGJiczogQm91bmRpbmdCb3hbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVzaC5nZXRJbnN0YW5jZUNvdW50KCk7IGkrKykge1xuICAgICAgaW5zdGFuY2VzLnB1c2goaSk7XG4gICAgICBiYnMucHVzaChtZXNoLmdldEJvdW5kaW5nQm94SW5zdGFuY2UoaSkpO1xuICAgIH1cbiAgICB0aGlzLnJvb3QgPSBuZXcgSW5zdGFuY2VkTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh0aGlzLCBpbnN0YW5jZXMsIGJicyk7XG4gIH1cblxuICBwdWJsaWMgcHJpbnQoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCI9PT09PT09PUluc3RhbmNlZC1NZXNoLUJCSD09PT09PT09XCIpO1xuICAgIHRoaXMucm9vdC5wcmludCgpO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdChyYXk6IFJheSwgdmVydHM6IFZlYzNbXSk6IG51bWJlciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnJvb3QuaW50ZXJzZWN0KHJheSwgdmVydHMpO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdEluc3RhbmNlKHJheTogUmF5LCBpbnN0YW5jZTogbnVtYmVyKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3Qgb2JqZWN0U3BhY2VSYXk6IFJheSA9IFJheS50cmFuc2Zvcm0ocmF5LCBtYXQ0LmludmVyc2UodGhpcy5tZXNoLmdldFRyYW5zZm9ybShpbnN0YW5jZSkpKTtcbiAgICByZXR1cm4gdGhpcy5tZXNoQkJILmludGVyc2VjdChvYmplY3RTcGFjZVJheSwgdGhpcy5tZXNoLmdldFZlcnRzKCkpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/instancedMeshBoundingBoxHeirarchy.ts\n");

/***/ }),

/***/ "./src/geometry/line.ts":
/*!******************************!*\
  !*** ./src/geometry/line.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Line: () => (/* binding */ Line)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n\n\n\n\n\nclass Line extends _geometry__WEBPACK_IMPORTED_MODULE_3__.Geometry {\n    constructor(parent, start, end, model, material = null) {\n        super(parent, model, material);\n        this.start = start;\n        this.end = end;\n        this.renderLines = 0;\n        this.updateRenderLines();\n        this.updateBoundingBox();\n    }\n    intersect(ray) {\n        return ray.almostIntersectLine(this.start, this.end, 3);\n    }\n    getBoundingBox() {\n        return this.boundingBox;\n    }\n    updateRenderLines() {\n        if (this.renderLines)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n        this.renderLines = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(new _render_renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines(this, new Float32Array([...this.start, 1.0, ...this.end, 1.0]), new Int32Array([0, 1])));\n    }\n    delete() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n    }\n    getStart() {\n        return this.start;\n    }\n    getEnd() {\n        return this.end;\n    }\n    updateEnd(point) {\n        this.end = point;\n        this.updateRenderLines();\n        this.updateBoundingBox();\n    }\n    getLength() {\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.start, this.end);\n    }\n    flip() {\n        [this.start, this.end] = [this.end, this.start];\n    }\n    updateBoundingBox() {\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_2__.BoundingBox();\n        this.boundingBox.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.start, this.getModel()));\n        this.boundingBox.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.end, this.getModel()));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Oi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbGluZS50cz9lOGQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdDQsIE1hdDQsIHZlYzMsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWxOYW1lIH0gZnJvbSBcIi4uL21hdGVyaWFscy9tYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmVuZGVyTGluZXMgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlckxpbmVzXCI7XG5pbXBvcnQgeyBPYmplY3RJRCwgUmVuZGVySUQgfSBmcm9tIFwiLi4vc2NlbmUvc2NlbmVcIjtcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSBcIi4vYm91bmRpbmdCb3hcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuL3JheVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBMaW5lIGV4dGVuZHMgR2VvbWV0cnkge1xuXG4gIHByaXZhdGUgcmVuZGVyTGluZXMhOiBSZW5kZXJJRDtcbiAgcHJpdmF0ZSBib3VuZGluZ0JveCE6IEJvdW5kaW5nQm94O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsLFxuICAgIHByaXZhdGUgc3RhcnQ6IFZlYzMsXG4gICAgcHJpdmF0ZSBlbmQ6IFZlYzMsXG4gICAgbW9kZWw/OiBNYXQ0LFxuICAgIG1hdGVyaWFsOiBNYXRlcmlhbE5hbWUgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG4gICAgdGhpcy5yZW5kZXJMaW5lcyA9IDA7XG4gICAgdGhpcy51cGRhdGVSZW5kZXJMaW5lcygpO1xuICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3QocmF5OiBSYXkpOiBudW1iZXIgfCBudWxsIHtcbiAgICByZXR1cm4gcmF5LmFsbW9zdEludGVyc2VjdExpbmUodGhpcy5zdGFydCwgdGhpcy5lbmQsIDMpO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICByZXR1cm4gdGhpcy5ib3VuZGluZ0JveDtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUmVuZGVyTGluZXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucmVuZGVyTGluZXMpIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTGluZXModGhpcy5yZW5kZXJMaW5lcyk7XG4gICAgdGhpcy5yZW5kZXJMaW5lcyA9IElOU1RBTkNFLmdldFNjZW5lKCkuYWRkUmVuZGVyTGluZXMobmV3IFJlbmRlckxpbmVzKFxuICAgICAgdGhpcyxcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkoWy4uLnRoaXMuc3RhcnQsIDEuMCwgLi4udGhpcy5lbmQsIDEuMF0pLFxuICAgICAgbmV3IEludDMyQXJyYXkoWzAsIDFdKSxcbiAgICApKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUoKTogdm9pZCB7XG4gICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5yZW1vdmVMaW5lcyh0aGlzLnJlbmRlckxpbmVzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGFydCgpOiBWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFbmQoKTogVmVjMyB7XG4gICAgcmV0dXJuIHRoaXMuZW5kO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUVuZChwb2ludDogVmVjMyk6IHZvaWQge1xuICAgIHRoaXMuZW5kID0gcG9pbnQ7XG4gICAgdGhpcy51cGRhdGVSZW5kZXJMaW5lcygpO1xuICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdmVjMy5kaXN0YW5jZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG4gIH1cblxuICBwdWJsaWMgZmxpcCgpOiB2b2lkIHtcbiAgICBbdGhpcy5zdGFydCwgdGhpcy5lbmRdID0gW3RoaXMuZW5kLCB0aGlzLnN0YXJ0XTtcbiAgfVxuICBwcml2YXRlIHVwZGF0ZUJvdW5kaW5nQm94KCk6IHZvaWQge1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICB0aGlzLmJvdW5kaW5nQm94LmFkZFZlYzModmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMuc3RhcnQsIHRoaXMuZ2V0TW9kZWwoKSkpO1xuICAgIHRoaXMuYm91bmRpbmdCb3guYWRkVmVjMyh2ZWMzLnRyYW5zZm9ybU1hdDQodGhpcy5lbmQsIHRoaXMuZ2V0TW9kZWwoKSkpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/line.ts\n");

/***/ }),

/***/ "./src/geometry/lineBoundingBoxHeirarchy.ts":
/*!**************************************************!*\
  !*** ./src/geometry/lineBoundingBoxHeirarchy.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LineBoundingBoxHeirarchy: () => (/* binding */ LineBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\nclass LineBoundingBoxHeirarchyNode {\n    constructor(verts, indices, depth = 0) {\n        this.depth = depth;\n        this.setup(verts, indices);\n    }\n    setup(verts, indices) {\n        this.axis = this.depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        var average = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.create(0, 0, 0);\n        for (let index of indices) {\n            this.boundingBox.addVec3(verts[index]);\n            average = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.add(average, verts[index]);\n        }\n        average = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.scale(average, 1 / indices.length);\n        if (indices.length / 2 <= LineBoundingBoxHeirarchy.MAX_LINES_PER_LEAF) {\n            // leaf\n            this.indices = indices;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            // non leaf\n            this.indices = null;\n            var child1Indices = [];\n            var child2Indices = [];\n            for (let i = 0; i < indices.length; i += 2) {\n                const lineCenter = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.add(verts[indices[i]], verts[indices[i + 1]]), 0.5);\n                if (lineCenter[this.axis] < average[this.axis]) {\n                    child1Indices.push(indices[i], indices[i + 1]);\n                }\n                else {\n                    child2Indices.push(indices[i], indices[i + 1]);\n                }\n            }\n            this.child1 = new LineBoundingBoxHeirarchyNode(verts, child1Indices, this.depth + 1);\n            this.child2 = new LineBoundingBoxHeirarchyNode(verts, child2Indices, this.depth + 1);\n        }\n    }\n    almostIntersect(ray, verts, pixels) {\n        if (ray.almostIntersectBoundingBox(this.boundingBox, pixels) === null)\n            return null;\n        if (this.isLeaf()) {\n            var res = null;\n            for (let i = 0; i < this.indices.length; i += 2) {\n                var t = ray.almostIntersectLine(verts[this.indices[i]], verts[this.indices[i + 1]], pixels);\n                if (t !== null) {\n                    if (res === null)\n                        res = t;\n                    else\n                        res = Math.min(res, t);\n                }\n            }\n            return res;\n        }\n        else {\n            const t1 = this.child1.almostIntersect(ray, verts, pixels);\n            const t2 = this.child2.almostIntersect(ray, verts, pixels);\n            if (t1 === null)\n                return t2;\n            if (t2 === null)\n                return t1;\n            return Math.min(t1, t2);\n        }\n    }\n    isLeaf() {\n        return this.indices !== null;\n    }\n    print() {\n        var _a, _b;\n        let str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.indices)\n            str += `${this.indices.length / 2}lines`;\n        else\n            str += \"node\";\n        console.log(str);\n        (_a = this.child1) === null || _a === void 0 ? void 0 : _a.print();\n        (_b = this.child2) === null || _b === void 0 ? void 0 : _b.print();\n    }\n}\nclass LineBoundingBoxHeirarchy {\n    constructor(verts, indices) {\n        // remove degenerate edges, they can cause infinite loop.\n        let reducedIndices = [];\n        for (let i = 0; i < indices.length; i += 2) {\n            const a = verts[indices[i]];\n            const b = verts[indices[i + 1]];\n            if (a[0] !== b[0] || a[1] !== b[1] || a[2] !== b[2]) {\n                reducedIndices.push(indices[i], indices[i + 1]);\n            }\n        }\n        this.root = new LineBoundingBoxHeirarchyNode(verts, reducedIndices);\n    }\n    print() {\n        console.log(\"========Line-BBH========\");\n        this.root.print();\n    }\n    almostIntersect(ray, verts, pixels) {\n        return this.root.almostIntersect(ray, verts, pixels);\n    }\n}\nLineBoundingBoxHeirarchy.MAX_LINES_PER_LEAF = 5;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbGluZUJvdW5kaW5nQm94SGVpcmFyY2h5LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QztBQUNHO0FBRzVDLElBQUssSUFJSjtBQUpELFdBQUssSUFBSTtJQUNQLHlCQUFLO0lBQ0wseUJBQUs7SUFDTCx5QkFBSztBQUNQLENBQUMsRUFKSSxJQUFJLEtBQUosSUFBSSxRQUlSO0FBRUQsTUFBTSw0QkFBNEI7SUFRaEMsWUFDRSxLQUFhLEVBQ2IsT0FBaUIsRUFDVCxRQUFnQixDQUFDO1FBQWpCLFVBQUssR0FBTCxLQUFLLENBQVk7UUFFekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVPLEtBQUssQ0FBQyxLQUFhLEVBQUUsT0FBaUI7UUFDNUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkscURBQVcsRUFBRSxDQUFDO1FBQ3JDLElBQUksT0FBTyxHQUFTLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDekMsS0FBSyxJQUFJLEtBQUssSUFBSSxPQUFPLEVBQUU7WUFDekIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDdkMsT0FBTyxHQUFHLDZDQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztTQUMzQztRQUNELE9BQU8sR0FBRyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVsRCxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLHdCQUF3QixDQUFDLGtCQUFrQixFQUFFO1lBQ3JFLE9BQU87WUFDUCxJ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QUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ25ELGNBQWMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNqRDtTQUNGO1FBQ0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLDRCQUE0QixDQUFDLEtBQUssRUFBRSxjQUFjLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBRU0sS0FBSztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFTSxlQUFlLENBQUMsR0FBUSxFQUFFLEtBQWEsRUFBRSxNQUFjO1FBQzVELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2RCxDQUFDOztBQXhCc0IsMkNBQWtCLEdBQUcsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbGluZUJvdW5kaW5nQm94SGVpcmFyY2h5LnRzPzA0OWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cbmVudW0gQXhpcyB7XG4gIFggPSAwLFxuICBZID0gMSxcbiAgWiA9IDJcbn1cblxuY2xhc3MgTGluZUJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSB7XG5cbiAgcHJpdmF0ZSBpbmRpY2VzITogbnVtYmVyW10gfCBudWxsO1xuICBwcml2YXRlIGNoaWxkMSE6IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUgfCBudWxsO1xuICBwcml2YXRlIGNoaWxkMiE6IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUgfCBudWxsO1xuICBwcml2YXRlIGJvdW5kaW5nQm94ITogQm91bmRpbmdCb3g7XG4gIHByaXZhdGUgYXhpcyE6IEF4aXM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgdmVydHM6IFZlYzNbXSxcbiAgICBpbmRpY2VzOiBudW1iZXJbXSxcbiAgICBwcml2YXRlIGRlcHRoOiBudW1iZXIgPSAwXG4gICkge1xuICAgIHRoaXMuc2V0dXAodmVydHMsIGluZGljZXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cCh2ZXJ0czogVmVjM1tdLCBpbmRpY2VzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHRoaXMuYXhpcyA9IHRoaXMuZGVwdGggJSAzO1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICB2YXIgYXZlcmFnZTogVmVjMyA9IHZlYzMuY3JlYXRlKDAsIDAsIDApO1xuICAgIGZvciAobGV0IGluZGV4IG9mIGluZGljZXMpIHtcbiAgICAgIHRoaXMuYm91bmRpbmdCb3guYWRkVmVjMyh2ZXJ0c1tpbmRleF0pO1xuICAgICAgYXZlcmFnZSA9IHZlYzMuYWRkKGF2ZXJhZ2UsIHZlcnRzW2luZGV4XSk7XG4gICAgfVxuICAgIGF2ZXJhZ2UgPSB2ZWMzLnNjYWxlKGF2ZXJhZ2UsIDEgLyBpbmRpY2VzLmxlbmd0aCk7XG5cbiAgICBpZiAoaW5kaWNlcy5sZW5ndGggLyAyIDw9IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeS5NQVhfTElORVNfUEVSX0xFQUYpIHtcbiAgICAgIC8vIGxlYWZcbiAgICAgIHRoaXMuaW5kaWNlcyA9IGluZGljZXM7XG4gICAgICB0aGlzLmNoaWxkMSA9IG51bGw7XG4gICAgICB0aGlzLmNoaWxkMiA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbiBsZWFmXG4gICAgICB0aGlzLmluZGljZXMgPSBudWxsO1xuXG4gICAgICB2YXIgY2hpbGQxSW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgICAgIHZhciBjaGlsZDJJbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICBjb25zdCBsaW5lQ2VudGVyID0gdmVjMy5zY2FsZShcbiAgICAgICAgICB2ZWMzLmFkZChcbiAgICAgICAgICAgIHZlcnRzW2luZGljZXNbaV1dLFxuICAgICAgICAgICAgdmVydHNbaW5kaWNlc1tpICsgMV1dXG4gICAgICAgICAgKSwgMC41KTtcbiAgICAgICAgaWYgKGxpbmVDZW50ZXJbdGhpcy5heGlzXSA8IGF2ZXJhZ2VbdGhpcy5heGlzXSkge1xuICAgICAgICAgIGNoaWxkMUluZGljZXMucHVzaChpbmRpY2VzW2ldLCBpbmRpY2VzW2kgKyAxXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGQySW5kaWNlcy5wdXNoKGluZGljZXNbaV0sIGluZGljZXNbaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmNoaWxkMSA9IG5ldyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHZlcnRzLCBjaGlsZDFJbmRpY2VzLCB0aGlzLmRlcHRoICsgMSk7XG4gICAgICB0aGlzLmNoaWxkMiA9IG5ldyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHZlcnRzLCBjaGlsZDJJbmRpY2VzLCB0aGlzLmRlcHRoICsgMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFsbW9zdEludGVyc2VjdChyYXk6IFJheSwgdmVydHM6IFZlYzNbXSwgcGl4ZWxzOiBudW1iZXIpOiBudW1iZXIgfCBudWxsIHtcblxuICAgIGlmIChyYXkuYWxtb3N0SW50ZXJzZWN0Qm91bmRpbmdCb3godGhpcy5ib3VuZGluZ0JveCwgcGl4ZWxzKSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAodGhpcy5pc0xlYWYoKSkge1xuICAgICAgdmFyIHJlczogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kaWNlcyEubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgdmFyIHQ6IG51bWJlciB8IG51bGwgPSByYXkuYWxtb3N0SW50ZXJzZWN0TGluZSh2ZXJ0c1t0aGlzLmluZGljZXMhW2ldXSwgdmVydHNbdGhpcy5pbmRpY2VzIVtpICsgMV1dLCBwaXhlbHMpO1xuICAgICAgICBpZiAodCAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHJlcyA9IHQ7XG4gICAgICAgICAgZWxzZSByZXMgPSBNYXRoLm1pbihyZXMsIHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0MSA9IHRoaXMuY2hpbGQxIS5hbG1vc3RJbnRlcnNlY3QocmF5LCB2ZXJ0cywgcGl4ZWxzKTtcbiAgICAgIGNvbnN0IHQyID0gdGhpcy5jaGlsZDIhLmFsbW9zdEludGVyc2VjdChyYXksIHZlcnRzLCBwaXhlbHMpO1xuICAgICAgaWYgKHQxID09PSBudWxsKSByZXR1cm4gdDI7XG4gICAgICBpZiAodDIgPT09IG51bGwpIHJldHVybiB0MTtcbiAgICAgIHJldHVybiBNYXRoLm1pbih0MSwgdDIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc0xlYWYoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW5kaWNlcyAhPT0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBwcmludCgpOiB2b2lkIHtcbiAgICBsZXQgc3RyOiBzdHJpbmcgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kZXB0aDsgaSsrKSBzdHIgKz0gXCItPlwiO1xuICAgIGlmICh0aGlzLmluZGljZXMpIHN0ciArPSBgJHt0aGlzLmluZGljZXMubGVuZ3RoIC8gMn1saW5lc2A7XG4gICAgZWxzZSBzdHIgKz0gXCJub2RlXCI7XG4gICAgY29uc29sZS5sb2coc3RyKTtcbiAgICB0aGlzLmNoaWxkMT8ucHJpbnQoKTtcbiAgICB0aGlzLmNoaWxkMj8ucHJpbnQoKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBjbGFzcyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHkge1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX0xJTkVTX1BFUl9MRUFGID0gNTtcblxuICBwcml2YXRlIHJvb3Q6IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGU7XG5cbiAgY29uc3RydWN0b3IodmVydHM6IFZlYzNbXSwgaW5kaWNlczogbnVtYmVyW10pIHtcbiAgICAvLyByZW1vdmUgZGVnZW5lcmF0ZSBlZGdlcywgdGhleSBjYW4gY2F1c2UgaW5maW5pdGUgbG9vcC5cbiAgICBsZXQgcmVkdWNlZEluZGljZXM6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICBjb25zdCBhOiBWZWMzID0gdmVydHNbaW5kaWNlc1tpXV07XG4gICAgICBjb25zdCBiOiBWZWMzID0gdmVydHNbaW5kaWNlc1tpICsgMV1dO1xuICAgICAgaWYgKGFbMF0gIT09IGJbMF0gfHwgYVsxXSAhPT0gYlsxXSB8fCBhWzJdICE9PSBiWzJdKSB7XG4gICAgICAgIHJlZHVjZWRJbmRpY2VzLnB1c2goaW5kaWNlc1tpXSwgaW5kaWNlc1tpICsgMV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJvb3QgPSBuZXcgTGluZUJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh2ZXJ0cywgcmVkdWNlZEluZGljZXMpO1xuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT1MaW5lLUJCSD09PT09PT09XCIpO1xuICAgIHRoaXMucm9vdC5wcmludCgpO1xuICB9XG5cbiAgcHVibGljIGFsbW9zdEludGVyc2VjdChyYXk6IFJheSwgdmVydHM6IFZlYzNbXSwgcGl4ZWxzOiBudW1iZXIpOiBudW1iZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5yb290LmFsbW9zdEludGVyc2VjdChyYXksIHZlcnRzLCBwaXhlbHMpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/lineBoundingBoxHeirarchy.ts\n");

/***/ }),

/***/ "./src/geometry/lines.ts":
/*!*******************************!*\
  !*** ./src/geometry/lines.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Lines: () => (/* binding */ Lines)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lineBoundingBoxHeirarchy */ \"./src/geometry/lineBoundingBoxHeirarchy.ts\");\n\n\n\n\n\n\nclass Lines extends _geometry__WEBPACK_IMPORTED_MODULE_3__.Geometry {\n    constructor(points, indices, parent = null, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.identity(), material = null) {\n        super(parent, model, material);\n        this.points = points;\n        this.indices = indices;\n        this.renderLines = 0;\n        this.update();\n    }\n    intersect(ray) {\n        return this.boundingBoxHeirarchy.almostIntersect(ray, this.points, 3);\n    }\n    getBoundingBox() {\n        return this.boundingBox;\n    }\n    getSegmentCount() {\n        return this.indices.length / 2;\n    }\n    delete() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n    }\n    update() {\n        if (this.renderLines)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n        const verts = [];\n        for (let i = 0; i < this.points.length; i++) {\n            verts.push(...this.points[i], 1.0);\n        }\n        this.renderLines = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(new _render_renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines(this, new Float32Array(verts), new Int32Array(this.indices), this.getModel()));\n        this.updateBoundingBox();\n        this.boundingBoxHeirarchy = new _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__.LineBoundingBoxHeirarchy(this.points, this.indices);\n    }\n    updateBoundingBox() {\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_2__.BoundingBox();\n        const model = this.getModel();\n        this.points.forEach((point) => {\n            this.boundingBox.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.transformMat4(point, model));\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbGluZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxRDtBQUNuQjtBQUVrQjtBQUVSO0FBQ047QUFDZ0M7QUFHL0QsTUFBTSxLQUFNLFNBQVEsK0NBQVE7SUFNakMsWUFDVSxNQUFjLEVBQ2QsT0FBaUIsRUFDekIsU0FBMEIsSUFBSSxFQUM5QixRQUFjLDZDQUFJLENBQUMsUUFBUSxFQUFFLEVBQzdCLFdBQWdDLElBQUk7UUFFcEMsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFOdkIsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUNkLFlBQU8sR0FBUCxPQUFPLENBQVU7UUFNekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxTQUFTLENBQUMsR0FBUTtRQUN2QixPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxlQUFlLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDeEUsQ0FBQztJQUVNLGNBQWM7UUFDbkIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFFTSxlQUFlO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFTSxNQUFNO1FBQ1gsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFTyxNQUFNO1FBQ1osSUFBSSxJQUFJLENBQUMsV0FBVztZQUFFLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN4RSxNQUFNLEtBQUssR0FBYSxFQUFFLENBQUM7UUFDM0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzNDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3BDO1FBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLGNBQWMsQ0FBQyxJQUFJLDREQUFXLENBQ25FLElBQUksRUFDSixJQUFJLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFDdkIsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUM1QixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXBCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLCtFQUF3QixDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RGLENBQUM7SUFFTyxpQkFBaUI7UUFDdkIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLHFEQUFXLEVBQUUsQ0FBQztRQUNyQyxNQUFNLEtBQUssR0FBUyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDcEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFXLEVBQUUsRUFBRTtZQUNsQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyw2Q0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUM3RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L2xpbmVzLnRzP2EyMDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCI7XG5pbXBvcnQgeyBNYXRlcmlhbE5hbWUgfSBmcm9tIFwiLi4vbWF0ZXJpYWxzL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBSZW5kZXJMaW5lcyB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyTGluZXNcIjtcbmltcG9ydCB7IFJlbmRlcklEIH0gZnJvbSBcIi4uL3NjZW5lL3NjZW5lXCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHkgfSBmcm9tIFwiLi9saW5lQm91bmRpbmdCb3hIZWlyYXJjaHlcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuL3JheVwiO1xuXG5leHBvcnQgY2xhc3MgTGluZXMgZXh0ZW5kcyBHZW9tZXRyeSB7XG5cbiAgcHJpdmF0ZSByZW5kZXJMaW5lcyE6IFJlbmRlcklEO1xuICBwcml2YXRlIGJvdW5kaW5nQm94ITogQm91bmRpbmdCb3g7XG4gIHByaXZhdGUgYm91bmRpbmdCb3hIZWlyYXJjaHkhOiBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwb2ludHM6IFZlYzNbXSxcbiAgICBwcml2YXRlIGluZGljZXM6IG51bWJlcltdLFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsID0gbnVsbCxcbiAgICBtb2RlbDogTWF0NCA9IG1hdDQuaWRlbnRpdHkoKSxcbiAgICBtYXRlcmlhbDogTWF0ZXJpYWxOYW1lIHwgbnVsbCA9IG51bGxcbiAgKSB7XG4gICAgc3VwZXIocGFyZW50LCBtb2RlbCwgbWF0ZXJpYWwpO1xuICAgIHRoaXMucmVuZGVyTGluZXMgPSAwO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5KTogbnVtYmVyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuYm91bmRpbmdCb3hIZWlyYXJjaHkuYWxtb3N0SW50ZXJzZWN0KHJheSwgdGhpcy5wb2ludHMsIDMpO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICByZXR1cm4gdGhpcy5ib3VuZGluZ0JveDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZWdtZW50Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDI7XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTGluZXModGhpcy5yZW5kZXJMaW5lcyk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5yZW5kZXJMaW5lcykgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5yZW1vdmVMaW5lcyh0aGlzLnJlbmRlckxpbmVzKTtcbiAgICBjb25zdCB2ZXJ0czogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2ZXJ0cy5wdXNoKC4uLnRoaXMucG9pbnRzW2ldLCAxLjApO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlckxpbmVzID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRSZW5kZXJMaW5lcyhuZXcgUmVuZGVyTGluZXMoXG4gICAgICB0aGlzLFxuICAgICAgbmV3IEZsb2F0MzJBcnJheSh2ZXJ0cyksXG4gICAgICBuZXcgSW50MzJBcnJheSh0aGlzLmluZGljZXMpLFxuICAgICAgdGhpcy5nZXRNb2RlbCgpKSk7XG5cbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nQm94KCk7XG4gICAgdGhpcy5ib3VuZGluZ0JveEhlaXJhcmNoeSA9IG5ldyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHkodGhpcy5wb2ludHMsIHRoaXMuaW5kaWNlcyk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUJvdW5kaW5nQm94KCk6IHZvaWQge1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWwoKTtcbiAgICB0aGlzLnBvaW50cy5mb3JFYWNoKChwb2ludDogVmVjMykgPT4ge1xuICAgICAgdGhpcy5ib3VuZGluZ0JveC5hZGRWZWMzKHZlYzMudHJhbnNmb3JtTWF0NChwb2ludCwgbW9kZWwpKTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/lines.ts\n");

/***/ }),

/***/ "./src/geometry/mesh.ts":
/*!******************************!*\
  !*** ./src/geometry/mesh.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mesh: () => (/* binding */ Mesh)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderMesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renderMesh */ \"./src/render/renderMesh.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _meshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./meshBoundingBoxHeirarchy */ \"./src/geometry/meshBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n\n\n\n\n\n\n\nclass Mesh extends _geometry__WEBPACK_IMPORTED_MODULE_3__.Geometry {\n    constructor(parent, verts, normals, indices, model, material = null) {\n        super(parent, model, material);\n        this.verts = verts;\n        this.normals = normals;\n        this.indices = indices;\n        const vertexBuffer = [];\n        for (let i = 0; i < verts.length; i++) {\n            vertexBuffer.push(...verts[i], 1, ...normals[i], 0);\n        }\n        this.renderMesh = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderMesh(new _render_renderMesh__WEBPACK_IMPORTED_MODULE_1__.RenderMesh(this, new Float32Array(vertexBuffer), new Int32Array(this.indices), this.getModel()));\n        this.boundingBoxHeirarchy = new _meshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__.MeshBoundingBoxHeirarchy(this.verts, this.indices);\n    }\n    intersect(ray) {\n        const objectSpaceRay = _ray__WEBPACK_IMPORTED_MODULE_5__.Ray.transform(ray, wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.inverse(this.getModel()));\n        return this.boundingBoxHeirarchy.intersect(objectSpaceRay, this.verts);\n    }\n    destroy() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeMesh(this.renderMesh);\n    }\n    getBoundingBox() {\n        const bb = new _boundingBox__WEBPACK_IMPORTED_MODULE_2__.BoundingBox();\n        const model = this.getModel();\n        this.verts.forEach((vert) => {\n            bb.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.transformMat4(vert, model));\n        });\n        return bb;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbWVzaC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFxRDtBQUNuQjtBQUVnQjtBQUVOO0FBQ047QUFDZ0M7QUFDMUM7QUFJckIsTUFBTSxJQUFLLFNBQVEsK0NBQVE7SUFLaEMsWUFDRSxNQUF1QixFQUNmLEtBQWEsRUFDYixPQUFlLEVBQ2YsT0FBaUIsRUFDekIsS0FBWSxFQUNaLFdBQWdDLElBQUk7UUFFcEMsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFOdkIsVUFBSyxHQUFMLEtBQUssQ0FBUTtRQUNiLFlBQU8sR0FBUCxPQUFPLENBQVE7UUFDZixZQUFPLEdBQVAsT0FBTyxDQUFVO1FBTXpCLE1BQU0sWUFBWSxHQUFhLEVBQUUsQ0FBQztRQUNsQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNyQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNyRDtRQUNELElBQUksQ0FBQyxVQUFVLEdBQUcsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSwwREFBVSxDQUNoRSxJQUFJLEVBQ0osSUFBSSxZQUFZLENBQUMsWUFBWSxDQUFDLEVBQzlCLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFDNUIsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUNoQixDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSwrRUFBd0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyRixDQUFDO0lBRU0sU0FBUyxDQUFDLEdBQVE7UUFDdkIsTUFBTSxjQUFjLEdBQVEscUNBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLDZDQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUUsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDekUsQ0FBQztJQUVNLE9BQU87UUFDWiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVNLGNBQWM7UUFDbkIsTUFBTSxFQUFFLEdBQWdCLElBQUkscURBQVcsRUFBRSxDQUFDO1FBQzFDLE1BQU0sS0FBSyxHQUFTLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNwQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVUsRUFBRSxFQUFFO1lBQ2hDLEVBQUUsQ0FBQyxPQUFPLENBQUMsNkNBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L21lc2gudHM/YzA0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJlbmRlck1lc2ggfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlck1lc2hcIjtcbmltcG9ydCB7IFJlbmRlcklEIH0gZnJvbSBcIi4uL3NjZW5lL3NjZW5lXCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHkgfSBmcm9tIFwiLi9tZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuL3JheVwiO1xuXG5cblxuZXhwb3J0IGNsYXNzIE1lc2ggZXh0ZW5kcyBHZW9tZXRyeSB7XG5cbiAgcHJpdmF0ZSByZW5kZXJNZXNoOiBSZW5kZXJJRDtcbiAgcHJpdmF0ZSBib3VuZGluZ0JveEhlaXJhcmNoeTogTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsLFxuICAgIHByaXZhdGUgdmVydHM6IFZlYzNbXSxcbiAgICBwcml2YXRlIG5vcm1hbHM6IFZlYzNbXSxcbiAgICBwcml2YXRlIGluZGljZXM6IG51bWJlcltdLFxuICAgIG1vZGVsPzogTWF0NCxcbiAgICBtYXRlcmlhbDogTWF0ZXJpYWxOYW1lIHwgbnVsbCA9IG51bGxcbiAgKSB7XG4gICAgc3VwZXIocGFyZW50LCBtb2RlbCwgbWF0ZXJpYWwpO1xuXG4gICAgY29uc3QgdmVydGV4QnVmZmVyOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZlcnRleEJ1ZmZlci5wdXNoKC4uLnZlcnRzW2ldLCAxLCAuLi5ub3JtYWxzW2ldLCAwKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJNZXNoID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRSZW5kZXJNZXNoKG5ldyBSZW5kZXJNZXNoKFxuICAgICAgdGhpcyxcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkodmVydGV4QnVmZmVyKSxcbiAgICAgIG5ldyBJbnQzMkFycmF5KHRoaXMuaW5kaWNlcyksXG4gICAgICB0aGlzLmdldE1vZGVsKClcbiAgICApKTtcbiAgICB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5ID0gbmV3IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMpO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdChyYXk6IFJheSk6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IG9iamVjdFNwYWNlUmF5OiBSYXkgPSBSYXkudHJhbnNmb3JtKHJheSwgbWF0NC5pbnZlcnNlKHRoaXMuZ2V0TW9kZWwoKSkpO1xuICAgIHJldHVybiB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5LmludGVyc2VjdChvYmplY3RTcGFjZVJheSwgdGhpcy52ZXJ0cyk7XG4gIH1cblxuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZU1lc2godGhpcy5yZW5kZXJNZXNoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgY29uc3QgYmI6IEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsKCk7XG4gICAgdGhpcy52ZXJ0cy5mb3JFYWNoKCh2ZXJ0OiBWZWMzKSA9PiB7XG4gICAgICBiYi5hZGRWZWMzKHZlYzMudHJhbnNmb3JtTWF0NCh2ZXJ0LCBtb2RlbCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBiYjtcbiAgfVxuXG59XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/mesh.ts\n");

/***/ }),

/***/ "./src/geometry/meshBoundingBoxHeirarchy.ts":
/*!**************************************************!*\
  !*** ./src/geometry/meshBoundingBoxHeirarchy.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MeshBoundingBoxHeirarchy: () => (/* binding */ MeshBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\nclass MeshBoundingBoxHeirarchyNode {\n    constructor(verts, indices, depth = 0) {\n        this.depth = depth;\n        this.setup(verts, indices);\n    }\n    setup(verts, indices) {\n        this.axis = this.depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        for (let index of indices) {\n            this.boundingBox.addVec3(verts[index]);\n        }\n        if (indices.length / 3 <= MeshBoundingBoxHeirarchy.MAX_TRIS_PER_LEAF) {\n            // leaf\n            this.indices = indices;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            // non leaf\n            this.indices = null;\n            const child1Indices = [];\n            const child2Indices = [];\n            for (let i = 0; i < indices.length; i += 3) {\n                const triCenter = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.add(verts[indices[i]], wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.add(verts[indices[i + 1]], verts[indices[i + 1]])), 1 / 3);\n                const bbCenter = this.boundingBox.getCenter();\n                if (triCenter[this.axis] < bbCenter[this.axis]) {\n                    child1Indices.push(indices[i], indices[i + 1], indices[i + 2]);\n                }\n                else {\n                    child2Indices.push(indices[i], indices[i + 1], indices[i + 2]);\n                }\n            }\n            this.child1 = new MeshBoundingBoxHeirarchyNode(verts, child1Indices, this.depth + 1);\n            this.child2 = new MeshBoundingBoxHeirarchyNode(verts, child2Indices, this.depth + 1);\n        }\n    }\n    add(indices, verts) {\n        if (this.isLeaf()) {\n            this.indices.push(...indices);\n            if (this.indices.length / 3 < MeshBoundingBoxHeirarchy.MAX_TRIS_PER_LEAF) {\n                this.setup(verts, this.indices);\n            }\n        }\n        else {\n            const triCenterPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.add(verts[indices[0]], wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec3.add(verts[indices[1]], verts[indices[2]])), 1 / 3);\n            const bbCenterPoint = this.boundingBox.getCenter();\n            if (triCenterPoint[this.axis] < bbCenterPoint[this.axis]) {\n                this.child1.add(indices, verts);\n            }\n            else {\n                this.child2.add(indices, verts);\n            }\n        }\n    }\n    intersect(ray, verts) {\n        if (ray.intersectBoundingBox(this.boundingBox) === null)\n            return null;\n        if (this.isLeaf()) {\n            var res = null;\n            for (let i = 0; i < this.indices.length; i += 3) {\n                var t = ray.intersectTriangle(verts[this.indices[i]], verts[this.indices[i + 1]], verts[this.indices[i + 2]]);\n                if (t !== null) {\n                    if (res === null)\n                        res = t;\n                    else\n                        res = Math.min(res, t);\n                }\n            }\n            return res;\n        }\n        else {\n            const t1 = this.child1.intersect(ray, verts);\n            const t2 = this.child2.intersect(ray, verts);\n            if (t1 === null)\n                return t2;\n            if (t2 === null)\n                return t1;\n            return Math.min(t1, t2);\n        }\n    }\n    isLeaf() {\n        return this.indices !== null;\n    }\n    print() {\n        var _a, _b;\n        let str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.indices)\n            str += `${this.indices.length / 3}triangles`;\n        else\n            str += \"node\";\n        console.log(str);\n        (_a = this.child1) === null || _a === void 0 ? void 0 : _a.print();\n        (_b = this.child2) === null || _b === void 0 ? void 0 : _b.print();\n    }\n}\nclass MeshBoundingBoxHeirarchy {\n    constructor(verts, indices) {\n        this.root = new MeshBoundingBoxHeirarchyNode(verts, indices);\n    }\n    print() {\n        console.log(\"========Mesh-BBH========\");\n        this.root.print();\n    }\n    intersect(ray, verts) {\n        return this.root.intersect(ray, verts);\n    }\n}\nMeshBoundingBoxHeirarchy.MAX_TRIS_PER_LEAF = 5;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QztBQUNHO0FBRzVDLElBQUssSUFJSjtBQUpELFdBQUssSUFBSTtJQUNQLHlCQUFLO0lBQ0wseUJBQUs7SUFDTCx5QkFBSztBQUNQLENBQUMsRUFKSSxJQUFJLEtBQUosSUFBSSxRQUlSO0FBRUQsTUFBTSw0QkFBNEI7SUFRaEMsWUFDRSxLQUFhLEVBQ2IsT0FBaUIsRUFDVCxRQUFnQixDQUFDO1FBQWpCLFVBQUssR0FBTCxLQUFLLENBQVk7UUFFekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVPLEtBQUssQ0FBQyxLQUFhLEVBQUUsT0FBaUI7UUFDNUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkscURBQVcsRUFBRSxDQUFDO1FBQ3JDLEtBQUssSUFBSSxLQUFLLElBQUksT0FBTyxFQUFFO1lBQ3pCLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1NBQ3hDO1FBRUQsSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSx3QkFBd0IsQ0FBQyxpQkFBaUIsRUFBRTtZQUNwRSxPQUFPO1lBQ1AsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7WUFDdkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDbkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FDcEI7YUFBTTtZQUNMLFdBQVc7WUFDWCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztZQUNwQixNQUFNLGFBQWEsR0FBYSxFQUFFLENBQUM7WUFDbkMsTUFBTSxhQUFhLEdBQWEsRUFBRSxDQUFDO1lBQ25DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQzFDLE1BQU0sU0FBUyxHQUFHLDZDQUFJLENBQUMsS0FBSyxDQUFDLDZDQUFJLENBQUMsR0FBRyxDQUNuQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ2pCLDZDQUFJLENBQUMsR0FBRyxDQUNOLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQ3JCLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQ3RCLENBQ0YsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ1YsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztnQkFDOUMsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQzlDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNoRTtxQkFBTTtvQkFDTCxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDaEU7YUFDRjtZQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSw0QkFBNEIsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDckYsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLDRCQUE0QixDQUFDLEtBQUssRUFBRSxhQUFhLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztTQUN0RjtJQUNILENBQUM7SUFFTSxHQUFHLENBQUMsT0FBaUMsRUFBRSxLQUFhO1FBQ3pELElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ2pCLElBQUksQ0FBQyxPQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUM7WUFDL0IsSUFBSSxJQUFJLENBQUMsT0FBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsd0JBQXdCLENBQUMsaUJBQWlCLEVBQUU7Z0JBQ3pFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFRLENBQUMsQ0FBQzthQUNsQztTQUNGO2FBQU07WUFDTCxNQUFNLGNBQWMsR0FBRyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FDeEMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUNqQiw2Q0FBSSxDQUFDLEdBQUcsQ0FDTixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ2pCLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDbEIsQ0FDRixFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNWLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDbkQsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3hELElBQUksQ0FBQyxNQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQzthQUNsQztpQkFBTTtnQkFDTCxJQUFJLENBQUMsTUFBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDbEM7U0FDRjtJQUNILENBQUM7SUFFTSxTQUFTLENBQUMsR0FBUSxFQUFFLEtBQWE7UUFFdEMsSUFBSSxHQUFHLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLElBQUk7WUFBRSxPQUFPLElBQUksQ0FBQztRQUVyRSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUNqQixJQUFJLEdBQUcsR0FBa0IsSUFBSSxDQUFDO1lBQzlCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUNoRCxJQUFJLENBQUMsR0FBa0IsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDaEksSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFO29CQUNkLElBQUksR0FBRyxLQUFLLElBQUk7d0JBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQzs7d0JBQ3JCLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztpQkFDN0I7YUFDRjtZQUNELE9BQU8sR0FBRyxDQUFDO1NBQ1o7YUFBTTtZQUNMLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUM5QyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDOUMsSUFBSSxFQUFFLEtBQUssSUFBSTtnQkFBRSxPQUFPLEVBQUUsQ0FBQztZQUMzQixJQUFJLEVBQUUsS0FBSyxJQUFJO2dCQUFFLE9BQU8sRUFBRSxDQUFDO1lBQzNCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDekI7SUFDSCxDQUFDO0lBRU0sTUFBTTtRQUNYLE9BQU8sSUFBSSxDQUFDLE9BQU8sS0FBSyxJQUFJLENBQUM7SUFDL0IsQ0FBQztJQUVNLEtBQUs7O1FBQ1YsSUFBSSxHQUFHLEdBQVcsRUFBRSxDQUFDO1FBQ3JCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRTtZQUFFLEdBQUcsSUFBSSxJQUFJLENBQUM7UUFDakQsSUFBSSxJQUFJLENBQUMsT0FBTztZQUFFLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsV0FBVyxDQUFDOztZQUMxRCxHQUFHLElBQUksTUFBTSxDQUFDO1FBQ25CLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDakIsVUFBSSxDQUFDLE1BQU0sMENBQUUsS0FBSyxFQUFFLENBQUM7UUFDckIsVUFBSSxDQUFDLE1BQU0sMENBQUUsS0FBSyxFQUFFLENBQUM7SUFDdkIsQ0FBQztDQUVGO0FBRU0sTUFBTSx3QkFBd0I7SUFNbkMsWUFBWSxLQUFhLEVBQUUsT0FBaUI7UUFDMUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLDRCQUE0QixDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBRU0sS0FBSztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFTSxTQUFTLENBQUMsR0FBUSxFQUFFLEtBQWE7UUFDdEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDekMsQ0FBQzs7QUFmc0IsMENBQWlCLEdBQUcsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5LnRzPzY4MWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cbmVudW0gQXhpcyB7XG4gIFggPSAwLFxuICBZID0gMSxcbiAgWiA9IDIsXG59XG5cbmNsYXNzIE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUge1xuXG4gIHByaXZhdGUgaW5kaWNlcyE6IG51bWJlcltdIHwgbnVsbDtcbiAgcHJpdmF0ZSBjaGlsZDEhOiBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlIHwgbnVsbDtcbiAgcHJpdmF0ZSBjaGlsZDIhOiBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlIHwgbnVsbDtcbiAgcHJpdmF0ZSBib3VuZGluZ0JveCE6IEJvdW5kaW5nQm94O1xuICBwcml2YXRlIGF4aXMhOiBBeGlzO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHZlcnRzOiBWZWMzW10sXG4gICAgaW5kaWNlczogbnVtYmVyW10sXG4gICAgcHJpdmF0ZSBkZXB0aDogbnVtYmVyID0gMFxuICApIHtcbiAgICB0aGlzLnNldHVwKHZlcnRzLCBpbmRpY2VzKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXAodmVydHM6IFZlYzNbXSwgaW5kaWNlczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICB0aGlzLmF4aXMgPSB0aGlzLmRlcHRoICUgMztcbiAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgZm9yIChsZXQgaW5kZXggb2YgaW5kaWNlcykge1xuICAgICAgdGhpcy5ib3VuZGluZ0JveC5hZGRWZWMzKHZlcnRzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGluZGljZXMubGVuZ3RoIC8gMyA8PSBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHkuTUFYX1RSSVNfUEVSX0xFQUYpIHtcbiAgICAgIC8vIGxlYWZcbiAgICAgIHRoaXMuaW5kaWNlcyA9IGluZGljZXM7XG4gICAgICB0aGlzLmNoaWxkMSA9IG51bGw7XG4gICAgICB0aGlzLmNoaWxkMiA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbiBsZWFmXG4gICAgICB0aGlzLmluZGljZXMgPSBudWxsO1xuICAgICAgY29uc3QgY2hpbGQxSW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgICAgIGNvbnN0IGNoaWxkMkluZGljZXM6IG51bWJlcltdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgY29uc3QgdHJpQ2VudGVyID0gdmVjMy5zY2FsZSh2ZWMzLmFkZChcbiAgICAgICAgICB2ZXJ0c1tpbmRpY2VzW2ldXSxcbiAgICAgICAgICB2ZWMzLmFkZChcbiAgICAgICAgICAgIHZlcnRzW2luZGljZXNbaSArIDFdXSxcbiAgICAgICAgICAgIHZlcnRzW2luZGljZXNbaSArIDFdXVxuICAgICAgICAgIClcbiAgICAgICAgKSwgMSAvIDMpO1xuICAgICAgICBjb25zdCBiYkNlbnRlciA9IHRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKCk7XG4gICAgICAgIGlmICh0cmlDZW50ZXJbdGhpcy5heGlzXSA8IGJiQ2VudGVyW3RoaXMuYXhpc10pIHtcbiAgICAgICAgICBjaGlsZDFJbmRpY2VzLnB1c2goaW5kaWNlc1tpXSwgaW5kaWNlc1tpICsgMV0sIGluZGljZXNbaSArIDJdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGlsZDJJbmRpY2VzLnB1c2goaW5kaWNlc1tpXSwgaW5kaWNlc1tpICsgMV0sIGluZGljZXNbaSArIDJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5jaGlsZDEgPSBuZXcgTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh2ZXJ0cywgY2hpbGQxSW5kaWNlcywgdGhpcy5kZXB0aCArIDEpO1xuICAgICAgdGhpcy5jaGlsZDIgPSBuZXcgTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh2ZXJ0cywgY2hpbGQySW5kaWNlcywgdGhpcy5kZXB0aCArIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGQoaW5kaWNlczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCB2ZXJ0czogVmVjM1tdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNMZWFmKCkpIHtcbiAgICAgIHRoaXMuaW5kaWNlcyEucHVzaCguLi5pbmRpY2VzKTtcbiAgICAgIGlmICh0aGlzLmluZGljZXMhLmxlbmd0aCAvIDMgPCBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHkuTUFYX1RSSVNfUEVSX0xFQUYpIHtcbiAgICAgICAgdGhpcy5zZXR1cCh2ZXJ0cywgdGhpcy5pbmRpY2VzISk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRyaUNlbnRlclBvaW50ID0gdmVjMy5zY2FsZSh2ZWMzLmFkZChcbiAgICAgICAgdmVydHNbaW5kaWNlc1swXV0sXG4gICAgICAgIHZlYzMuYWRkKFxuICAgICAgICAgIHZlcnRzW2luZGljZXNbMV1dLFxuICAgICAgICAgIHZlcnRzW2luZGljZXNbMl1dXG4gICAgICAgIClcbiAgICAgICksIDEgLyAzKTtcbiAgICAgIGNvbnN0IGJiQ2VudGVyUG9pbnQgPSB0aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcigpO1xuICAgICAgaWYgKHRyaUNlbnRlclBvaW50W3RoaXMuYXhpc10gPCBiYkNlbnRlclBvaW50W3RoaXMuYXhpc10pIHtcbiAgICAgICAgdGhpcy5jaGlsZDEhLmFkZChpbmRpY2VzLCB2ZXJ0cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoaWxkMiEuYWRkKGluZGljZXMsIHZlcnRzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5LCB2ZXJ0czogVmVjM1tdKTogbnVtYmVyIHwgbnVsbCB7XG5cbiAgICBpZiAocmF5LmludGVyc2VjdEJvdW5kaW5nQm94KHRoaXMuYm91bmRpbmdCb3gpID09PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICB2YXIgcmVzOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzIS5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICB2YXIgdDogbnVtYmVyIHwgbnVsbCA9IHJheS5pbnRlcnNlY3RUcmlhbmdsZSh2ZXJ0c1t0aGlzLmluZGljZXMhW2ldXSwgdmVydHNbdGhpcy5pbmRpY2VzIVtpICsgMV1dLCB2ZXJ0c1t0aGlzLmluZGljZXMhW2kgKyAyXV0pO1xuICAgICAgICBpZiAodCAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHJlcyA9IHQ7XG4gICAgICAgICAgZWxzZSByZXMgPSBNYXRoLm1pbihyZXMsIHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0MSA9IHRoaXMuY2hpbGQxIS5pbnRlcnNlY3QocmF5LCB2ZXJ0cyk7XG4gICAgICBjb25zdCB0MiA9IHRoaXMuY2hpbGQyIS5pbnRlcnNlY3QocmF5LCB2ZXJ0cyk7XG4gICAgICBpZiAodDEgPT09IG51bGwpIHJldHVybiB0MjtcbiAgICAgIGlmICh0MiA9PT0gbnVsbCkgcmV0dXJuIHQxO1xuICAgICAgcmV0dXJuIE1hdGgubWluKHQxLCB0Mik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzTGVhZigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbmRpY2VzICE9PSBudWxsO1xuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGxldCBzdHI6IHN0cmluZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlcHRoOyBpKyspIHN0ciArPSBcIi0+XCI7XG4gICAgaWYgKHRoaXMuaW5kaWNlcykgc3RyICs9IGAke3RoaXMuaW5kaWNlcy5sZW5ndGggLyAzfXRyaWFuZ2xlc2A7XG4gICAgZWxzZSBzdHIgKz0gXCJub2RlXCI7XG4gICAgY29uc29sZS5sb2coc3RyKTtcbiAgICB0aGlzLmNoaWxkMT8ucHJpbnQoKTtcbiAgICB0aGlzLmNoaWxkMj8ucHJpbnQoKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBjbGFzcyBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHkge1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX1RSSVNfUEVSX0xFQUYgPSA1O1xuXG4gIHByaXZhdGUgcm9vdDogTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZTtcblxuICBjb25zdHJ1Y3Rvcih2ZXJ0czogVmVjM1tdLCBpbmRpY2VzOiBudW1iZXJbXSkge1xuICAgIHRoaXMucm9vdCA9IG5ldyBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHZlcnRzLCBpbmRpY2VzKTtcbiAgfVxuXG4gIHB1YmxpYyBwcmludCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIj09PT09PT09TWVzaC1CQkg9PT09PT09PVwiKTtcbiAgICB0aGlzLnJvb3QucHJpbnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3QocmF5OiBSYXksIHZlcnRzOiBWZWMzW10pOiBudW1iZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5yb290LmludGVyc2VjdChyYXksIHZlcnRzKTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/meshBoundingBoxHeirarchy.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/circle.ts":
/*!**************************************!*\
  !*** ./src/geometry/nurbs/circle.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCircleCenterNormalRadius: () => (/* binding */ createCircleCenterNormalRadius),\n/* harmony export */   createCircleThreePoints: () => (/* binding */ createCircleThreePoints)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _curve__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./curve */ \"./src/geometry/nurbs/curve.ts\");\n\n\n\n\n\nconst UNIT_CIRCLE_DEGREE = 2;\nconst UNIT_CIRCLE_KNOTS = [\n    0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 4\n];\nconst w = Math.SQRT2 / 2;\nconst UNIT_CIRCLE_POINTS = [\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(1, 0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(w, w, 0, w), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(0, 1, 0, 1),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-w, w, 0, w), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-1, 0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-w, -w, 0, w),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(0, -1, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(w, -w, 0, w), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(1, 0, 0, 1)\n];\nconst createCircleThreePoints = function (a, b, c) {\n    const ab = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(b, a);\n    const ac = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(c, a);\n    const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(ab, ac));\n    const ro = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(a, b), 0.5);\n    const rd = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(ab, normal));\n    const r = new _ray__WEBPACK_IMPORTED_MODULE_2__.Ray(ro, rd);\n    const po = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(a, c), 0.5);\n    const pn = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(ac);\n    const p = new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(po, pn);\n    const t = r.intersectPlane(p, true);\n    const center = r.at(t);\n    const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(a, center);\n    return createCircleCenterNormalRadius(center, normal, radius);\n};\nconst createCircleCenterNormalRadius = function (center, normal, radius) {\n    if (normal[2] < 0)\n        normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(normal, -1);\n    const unitZ = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, 0, 1);\n    var x;\n    var y;\n    if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(normal, unitZ) < 0.00001) {\n        x = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(radius, 0, 0);\n        y = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, radius, 0);\n    }\n    else {\n        x = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(normal, unitZ)), radius);\n        y = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(normal, x)), radius);\n    }\n    normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(normal, radius);\n    // swizzle y and z in the matrix\n    // why did they choose this rediculous clipspace\n    const model = (0,_utils_math__WEBPACK_IMPORTED_MODULE_0__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.create(x[0], x[1], x[2], 0, y[0], y[1], y[2], 0, normal[0], normal[1], normal[2], 0, center[0], center[1], center[2], 1));\n    return new _curve__WEBPACK_IMPORTED_MODULE_3__.Curve(null, UNIT_CIRCLE_POINTS, UNIT_CIRCLE_DEGREE, UNIT_CIRCLE_KNOTS, model);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDL0Q7SUFDRCxNQUFNLEdBQUcsNkNBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXBDLGdDQUFnQztJQUNoQyxnREFBZ0Q7SUFDaEQsTUFBTSxLQUFLLEdBQVMsc0RBQVMsQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FDdkMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUNuQixDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQ25CLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFDbEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUNuQyxDQUFDLENBQUM7SUFDSCxPQUFPLElBQUkseUNBQUssQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsa0JBQWtCLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDM0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L251cmJzL2NpcmNsZS50cz80ZTc0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdDQsIE1hdDQsIHZlYzMsIFZlYzMsIFZlYzQsIHZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IHN3aXp6bGVZWiB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuLi9wbGFuZVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL3JheVwiO1xuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi9jdXJ2ZVwiO1xuXG5jb25zdCBVTklUX0NJUkNMRV9ERUdSRUU6IG51bWJlciA9IDI7XG5jb25zdCBVTklUX0NJUkNMRV9LTk9UUzogbnVtYmVyW10gPSBbXG4gIDAsIDAsIDAsIDEsIDEsIDIsIDIsIDMsIDMsIDQsIDQsIDRcbl07XG5jb25zdCB3OiBudW1iZXIgPSBNYXRoLlNRUlQyIC8gMjtcbmNvbnN0IFVOSVRfQ0lSQ0xFX1BPSU5UUzogVmVjNFtdID0gW1xuICB2ZWM0LmNyZWF0ZSgxLCAwLCAwLCAxKSwgdmVjNC5jcmVhdGUodywgdywgMCwgdyksIHZlYzQuY3JlYXRlKDAsIDEsIDAsIDEpLFxuICB2ZWM0LmNyZWF0ZSgtdywgdywgMCwgdyksIHZlYzQuY3JlYXRlKC0xLCAwLCAwLCAxKSwgdmVjNC5jcmVhdGUoLXcsIC13LCAwLCB3KSxcbiAgdmVjNC5jcmVhdGUoMCwgLTEsIDAsIDEpLCB2ZWM0LmNyZWF0ZSh3LCAtdywgMCwgdyksIHZlYzQuY3JlYXRlKDEsIDAsIDAsIDEpXG5dO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlQ2lyY2xlVGhyZWVQb2ludHMgPSBmdW5jdGlvbihhOiBWZWMzLCBiOiBWZWMzLCBjOiBWZWMzKTogQ3VydmUge1xuICBjb25zdCBhYjogVmVjMyA9IHZlYzMuc3ViKGIsIGEpO1xuICBjb25zdCBhYzogVmVjMyA9IHZlYzMuc3ViKGMsIGEpO1xuICBjb25zdCBub3JtYWw6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKGFiLCBhYykpO1xuXG4gIGNvbnN0IHJvOiBWZWMzID0gdmVjMy5zY2FsZSh2ZWMzLmFkZChhLCBiKSwgMC41KTtcbiAgY29uc3QgcmQ6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKGFiLCBub3JtYWwpKTtcbiAgY29uc3QgcjogUmF5ID0gbmV3IFJheShybywgcmQpO1xuXG4gIGNvbnN0IHBvOiBWZWMzID0gdmVjMy5zY2FsZSh2ZWMzLmFkZChhLCBjKSwgMC41KTtcbiAgY29uc3QgcG46IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZShhYyk7XG4gIGNvbnN0IHA6IFBsYW5lID0gbmV3IFBsYW5lKHBvLCBwbik7XG5cbiAgY29uc3QgdDogbnVtYmVyID0gci5pbnRlcnNlY3RQbGFuZShwLCB0cnVlKSE7XG4gIGNvbnN0IGNlbnRlcjogVmVjMyA9IHIuYXQodCk7XG4gIGNvbnN0IHJhZGl1czogbnVtYmVyID0gdmVjMy5kaXN0YW5jZShhLCBjZW50ZXIpO1xuXG4gIHJldHVybiBjcmVhdGVDaXJjbGVDZW50ZXJOb3JtYWxSYWRpdXMoY2VudGVyLCBub3JtYWwsIHJhZGl1cyk7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVDaXJjbGVDZW50ZXJOb3JtYWxSYWRpdXMgPSBmdW5jdGlvbihjZW50ZXI6IFZlYzMsIG5vcm1hbDogVmVjMywgcmFkaXVzOiBudW1iZXIpIHtcbiAgaWYgKG5vcm1hbFsyXSA8IDApIG5vcm1hbCA9IHZlYzMuc2NhbGUobm9ybWFsLCAtMSk7XG4gIGNvbnN0IHVuaXRaOiBWZWMzID0gdmVjMy5jcmVhdGUoMCwgMCwgMSk7XG4gIHZhciB4OiBWZWMzO1xuICB2YXIgeTogVmVjMztcbiAgaWYgKHZlYzMuZGlzdGFuY2Uobm9ybWFsLCB1bml0WikgPCAwLjAwMDAxKSB7XG4gICAgeCA9IHZlYzMuY3JlYXRlKHJhZGl1cywgMCwgMCk7XG4gICAgeSA9IHZlYzMuY3JlYXRlKDAsIHJhZGl1cywgMCk7XG4gIH0gZWxzZSB7XG4gICAgeCA9IHZlYzMuc2NhbGUodmVjMy5ub3JtYWxpemUodmVjMy5jcm9zcyhub3JtYWwsIHVuaXRaKSksIHJhZGl1cyk7XG4gICAgeSA9IHZlYzMuc2NhbGUodmVjMy5ub3JtYWxpemUodmVjMy5jcm9zcyhub3JtYWwsIHgpKSwgcmFkaXVzKTtcbiAgfVxuICBub3JtYWwgPSB2ZWMzLnNjYWxlKG5vcm1hbCwgcmFkaXVzKTtcblxuICAvLyBzd2l6emxlIHkgYW5kIHogaW4gdGhlIG1hdHJpeFxuICAvLyB3aHkgZGlkIHRoZXkgY2hvb3NlIHRoaXMgcmVkaWN1bG91cyBjbGlwc3BhY2VcbiAgY29uc3QgbW9kZWw6IE1hdDQgPSBzd2l6emxlWVoobWF0NC5jcmVhdGUoXG4gICAgeFswXSwgeFsxXSwgeFsyXSwgMCxcbiAgICB5WzBdLCB5WzFdLCB5WzJdLCAwLFxuICAgIG5vcm1hbFswXSwgbm9ybWFsWzFdLCBub3JtYWxbMl0sIDAsXG4gICAgY2VudGVyWzBdLCBjZW50ZXJbMV0sIGNlbnRlclsyXSwgMVxuICApKTtcbiAgcmV0dXJuIG5ldyBDdXJ2ZShudWxsLCBVTklUX0NJUkNMRV9QT0lOVFMsIFVOSVRfQ0lSQ0xFX0RFR1JFRSwgVU5JVF9DSVJDTEVfS05PVFMsIG1vZGVsKTtcbn1cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/circle.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/curve.ts":
/*!*************************************!*\
  !*** ./src/geometry/nurbs/curve.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Curve: () => (/* binding */ Curve)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _points__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../points */ \"./src/geometry/points.ts\");\n/* harmony import */ var _polyLine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../polyLine */ \"./src/geometry/polyLine.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/geometry/nurbs/utils.ts\");\n\n\n\n\n\nclass Curve extends _geometry__WEBPACK_IMPORTED_MODULE_0__.Geometry {\n    constructor(parent, weightedControlPoints, degree, knots = [], model, material = null) {\n        super(parent, model, material);\n        this.weightedControlPoints = weightedControlPoints;\n        this.degree = degree;\n        this.knots = knots;\n        if (this.knots.length == 0) {\n            this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        }\n        this.controlPoints = null;\n        this.controlCage = null;\n        this.polyline = null;\n        this.updateSamples();\n    }\n    getKnots() {\n        return this.knots;\n    }\n    getWeightedControlPoints() {\n        return this.weightedControlPoints;\n    }\n    getKnotCount() {\n        return this.knots.length;\n    }\n    intersect(ray) {\n        return this.polyline.intersect(ray);\n    }\n    getBoundingBox() {\n        return this.controlCage.getBoundingBox();\n    }\n    getDegree() {\n        return this.degree;\n    }\n    destroy() {\n        this.controlCage.delete();\n        this.controlPoints.delete();\n        this.polyline.delete();\n        this.controlPoints.delete();\n    }\n    addControlPoint(point, weight) {\n        this.weightedControlPoints.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...point, weight));\n        this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        this.updateSamples();\n    }\n    updateLastControlPoint(point, weight) {\n        this.weightedControlPoints[this.weightedControlPoints.length - 1] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...point, weight);\n        this.updateSamples();\n    }\n    removeLastControlPoint() {\n        this.weightedControlPoints.pop();\n        if (this.degree === this.weightedControlPoints.length)\n            this.degree--;\n        this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        this.updateSamples();\n    }\n    changeDegree(degree) {\n        while (degree >= this.weightedControlPoints.length)\n            degree--;\n        this.degree = degree;\n        this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        this.updateSamples();\n    }\n    getControlPointCount() {\n        return this.weightedControlPoints.length;\n    }\n    updateSamples() {\n        if (this.controlCage)\n            this.controlCage.delete();\n        if (this.polyline)\n            this.polyline.delete();\n        if (this.controlPoints)\n            this.controlPoints.delete();\n        const samples = [];\n        const sampleCount = Curve.SAMPLES_PER_EDGE * (this.weightedControlPoints.length - 1);\n        for (let i = 0; i <= sampleCount; i++) {\n            samples.push(this.sample(i / sampleCount));\n        }\n        const controlPointArray = this.weightedControlPoints.map((point) => {\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(point[0] / point[3], point[1] / point[3], point[2] / point[3]);\n        });\n        this.polyline = new _polyLine__WEBPACK_IMPORTED_MODULE_2__.PolyLine(this, samples);\n        this.controlCage = new _polyLine__WEBPACK_IMPORTED_MODULE_2__.PolyLine(this, controlPointArray);\n        this.controlPoints = new _points__WEBPACK_IMPORTED_MODULE_1__.Points(this, controlPointArray);\n    }\n    sample(t) {\n        const u = t * (this.knots.at(-1) - this.knots.at(0));\n        const knotSpan = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.span)(this.knots, u, this.degree);\n        const funcs = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.basisFuncs)(this.knots, u, this.degree);\n        let res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(0, 0, 0, 0);\n        for (let i = 0; i <= this.degree; i++) {\n            res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(res, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(this.weightedControlPoints[knotSpan - this.degree + i], funcs[i]));\n        }\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(res[0] / res[3], res[1] / res[3], res[2] / res[3]);\n    }\n    normalizeKnots() {\n        const start = this.knots[0];\n        const end = this.knots[this.knots.length - 1];\n        const dist = end - start;\n        for (let i = 0; i < this.knots.length; i++) {\n            this.knots[i] = (this.knots[i] - start) / dist;\n        }\n    }\n    insertKnot(knot) {\n        const idx = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.span)(this.knots, knot, this.degree);\n        const newWeightedControlPoints = [];\n        newWeightedControlPoints.push(this.weightedControlPoints[0]);\n        for (let i = 1; i < this.weightedControlPoints.length; i++) {\n            let alpha;\n            if (i <= idx - this.degree)\n                alpha = 1;\n            else if (i >= idx + 1)\n                alpha = 0;\n            else\n                alpha = (knot - this.knots[i]) / (this.knots[i + this.degree] - this.knots[i]);\n            newWeightedControlPoints.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(this.weightedControlPoints[i], alpha), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(this.weightedControlPoints[i - 1], 1 - alpha)));\n        }\n        newWeightedControlPoints.push(this.weightedControlPoints[this.weightedControlPoints.length - 1]);\n        this.weightedControlPoints = newWeightedControlPoints;\n        this.knots.push(knot);\n        this.knots.sort();\n        this.updateSamples();\n    }\n    elevateDegree(n) {\n        console.log(this.knots);\n        console.log(this.weightedControlPoints);\n        // TODO: stuff this out\n        const newDegree = this.degree + n;\n        const bezierAlphas = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.calcBezierAlphas)(this.degree, newDegree);\n        //console.log(\"alphas\", bezierAlphas);\n        const bezierControls = [];\n        for (let i = 0; i < this.degree + 1; i++)\n            bezierControls.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create());\n        const elevatedBezierControls = [];\n        for (let i = 0; i < this.degree + n + 1; i++)\n            elevatedBezierControls.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create());\n        const nextBezierControls = [];\n        const alphas = [];\n        for (let i = 0; i < this.degree - 1; i++) {\n            nextBezierControls.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create());\n            alphas.push(0);\n        }\n        let distinctKnots = 1;\n        for (let i = 1; i < this.knots.length; i++) {\n            if (this.knots[i] != this.knots[i - 1])\n                distinctKnots++;\n        }\n        // console.log(\"distinct knots\", distinctKnots);\n        const newControlPoints = [];\n        for (let i = 0; i < this.weightedControlPoints.length + n * (distinctKnots - 1); i++) {\n            newControlPoints.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create());\n        }\n        const newKnots = [];\n        for (let i = 0; i < this.knots.length + n * distinctKnots; i++)\n            newKnots.push(0);\n        // Initialize First Segment\n        let mh = newDegree;\n        let kind = newDegree + 1;\n        let r = -1;\n        let a = this.degree;\n        let b = this.degree + 1;\n        let cind = 1;\n        let ua = this.knots[0];\n        newControlPoints[0] = this.weightedControlPoints[0];\n        for (let i = 0; i <= newDegree; i++)\n            newKnots[i] = ua;\n        for (let i = 0; i <= this.degree; i++)\n            bezierControls[i] = this.weightedControlPoints[i];\n        //main loop\n        while (b < this.knots.length - 1) {\n            console.log(\"bez controls start\", [...bezierControls]);\n            const IDK = b;\n            while (b < this.knots.length - 1 && this.knots[b] == this.knots[b + 1])\n                b++;\n            const mul = b - IDK + 1;\n            mh += mul + n;\n            const ub = this.knots[b];\n            const oldr = r;\n            r = this.degree - mul;\n            const lbz = (oldr > 0) ? Math.floor((oldr + 2) / 2) : 1;\n            const rbz = (r > 0) ? newDegree - Math.floor((r + 1) / 2) : newDegree;\n            //console.log(\"lbz, rbz\", lbz, rbz);\n            // insert knots  \n            if (r > 0) {\n                const num = ub - ua;\n                for (let k = this.degree; k > mul; k--)\n                    alphas[k - mul - 1] = num / (this.knots[a + k] - ua);\n                for (let j = 1; j <= r; j++) {\n                    const save = r - j;\n                    const s = mul + j;\n                    for (let k = this.degree; k >= s; k--) {\n                        bezierControls[k] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(bezierControls[k], alphas[k - s]), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(bezierControls[k - 1], 1 - alphas[k - s]));\n                    }\n                    nextBezierControls[save] = bezierControls[this.degree];\n                }\n            }\n            // Elevate Bezier \n            for (let i = lbz; i <= newDegree; i++) {\n                elevatedBezierControls[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(0, 0, 0, 0);\n                for (let j = Math.max(0, i - n); j <= Math.min(this.degree, i); j++) {\n                    elevatedBezierControls[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(elevatedBezierControls[i], wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(bezierControls[j], bezierAlphas[i][j]));\n                    //console.log(\"ba\", i, j, bezierAlphas[i][j])\n                }\n            }\n            console.log(\"bez controls elevated\", [...bezierControls]);\n            // console.log(\"elevated bezier\", [...elevatedBezierControls]);\n            //  Remove knots\n            if (oldr > 1) {\n                var first = kind - 2;\n                var last = kind;\n                const den = ub - ua;\n                const bet = (ub - newKnots[kind - 1]) / den;\n                for (let tr = 1; tr < oldr; tr++) {\n                    let i = first;\n                    let j = last;\n                    let kj = j - kind + 1;\n                    while (j - i > tr) {\n                        if (i < cind) {\n                            const alf = (ub - newKnots[i]) / (ua - newKnots[i]);\n                            newControlPoints[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(newControlPoints[i], alf), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(newControlPoints[i - 1], 1 - alf));\n                        }\n                        if (j >= lbz) {\n                            if (j - tr <= kind - newDegree - oldr) {\n                                const gam = (ub - newKnots[j - tr]) / den;\n                                elevatedBezierControls[kj] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(elevatedBezierControls[kj], gam), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(elevatedBezierControls[kj + 1], 1 - gam));\n                            }\n                            else {\n                                elevatedBezierControls[kj] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(elevatedBezierControls[kj], bet), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(elevatedBezierControls[kj + 1], 1 - bet));\n                            }\n                        }\n                        i++;\n                        j--;\n                        kj--;\n                    }\n                    first--;\n                    last++;\n                }\n            }\n            if (a != this.degree) {\n                for (let i = 0; i < newDegree - oldr; i++) {\n                    newKnots[kind++] = ua;\n                }\n            }\n            for (let j = lbz; j <= rbz; j++) {\n                //console.log(\"adding point\", elevatedBezierControls[j]);\n                newControlPoints[cind++] = elevatedBezierControls[j];\n            }\n            if (b < this.knots.length - 1) {\n                for (let j = 0; j < r; j++)\n                    bezierControls[j] = nextBezierControls[j];\n                for (let j = r; j <= this.degree; j++) {\n                    console.log(\"b\", b);\n                    console.log(\"j\", j);\n                    bezierControls[j] = this.weightedControlPoints[b - this.degree + j];\n                    console.log(bezierControls[j]);\n                }\n                a = b++;\n                ua = ub;\n            }\n            else {\n                for (let i = 0; i <= newDegree; i++) {\n                    newKnots[kind + i] = ub;\n                }\n            }\n            console.log(\"lap finished\", [...newControlPoints]);\n            // console.log(\"new knots\", newKnots);\n            //console.log(\"bezierControls\", bezierControls);\n        }\n        this.weightedControlPoints = newControlPoints;\n        this.knots = newKnots;\n        this.degree = newDegree;\n        console.log(newControlPoints);\n        console.log(newKnots);\n        this.updateSamples();\n    }\n}\nCurve.SAMPLES_PER_EDGE = 20;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNoQztnQkFDRCxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQ1IsRUFBRSxHQUFHLEVBQUUsQ0FBQzthQUNUO2lCQUFNO2dCQUNMLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ25DLFFBQVEsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO2lCQUN6QjthQUNGO1lBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUM7WUFDbEQsc0NBQXNDO1lBQ3RDLGdEQUFnRDtTQUNqRDtRQUdELElBQUksQ0FBQyxxQkFBcUIsR0FBRyxnQkFBZ0IsQ0FBQztRQUM5QyxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztRQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztRQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDOUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUV0QixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFFdkIsQ0FBQzs7QUF6VHNCLHNCQUFnQixHQUFHLEVBQUUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L251cmJzL2N1cnZlLnRzPzAzZjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgdmVjMywgVmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWxOYW1lIH0gZnJvbSBcIi4uLy4uL21hdGVyaWFscy9tYXRlcmlhbFwiO1xuaW1wb3J0IHsgYmluIH0gZnJvbSBcIi4uLy4uL3V0aWxzL21hdGhcIjtcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSBcIi4uL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgUG9pbnRzIH0gZnJvbSBcIi4uL3BvaW50c1wiO1xuaW1wb3J0IHsgUG9seUxpbmUgfSBmcm9tIFwiLi4vcG9seUxpbmVcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9yYXlcIjtcbmltcG9ydCB7IGJhc2lzRnVuY3MsIGNhbGNCZXppZXJBbHBoYXMsIGdlbmVyaWNLbm90VmVjdG9yLCBzcGFuIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGNsYXNzIEN1cnZlIGV4dGVuZHMgR2VvbWV0cnkge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNBTVBMRVNfUEVSX0VER0UgPSAyMDtcblxuICBwcml2YXRlIGNvbnRyb2xDYWdlOiBQb2x5TGluZSB8IG51bGw7XG4gIHByaXZhdGUgcG9seWxpbmU6IFBvbHlMaW5lIHwgbnVsbDtcbiAgcHJpdmF0ZSBjb250cm9sUG9pbnRzOiBQb2ludHMgfCBudWxsO1xuXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50OiBHZW9tZXRyeSB8IG51bGwsXG4gICAgcHJpdmF0ZSB3ZWlnaHRlZENvbnRyb2xQb2ludHM6IFZlYzRbXSxcbiAgICBwcml2YXRlIGRlZ3JlZTogbnVtYmVyLFxuICAgIHByaXZhdGUga25vdHM6IG51bWJlcltdID0gW10sXG4gICAgbW9kZWw/OiBNYXQ0LFxuICAgIG1hdGVyaWFsOiBNYXRlcmlhbE5hbWUgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG5cblxuICAgIGlmICh0aGlzLmtub3RzLmxlbmd0aCA9PSAwKSB7XG4gICAgICB0aGlzLmtub3RzID0gZ2VuZXJpY0tub3RWZWN0b3IodGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoLCB0aGlzLmRlZ3JlZSk7XG4gICAgfVxuICAgIHRoaXMuY29udHJvbFBvaW50cyA9IG51bGw7XG4gICAgdGhpcy5jb250cm9sQ2FnZSA9IG51bGw7XG4gICAgdGhpcy5wb2x5bGluZSA9IG51bGw7XG4gICAgdGhpcy51cGRhdGVTYW1wbGVzKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0S25vdHMoKTogbnVtYmVyW10ge1xuICAgIHJldHVybiB0aGlzLmtub3RzO1xuICB9XG5cbiAgcHVibGljIGdldFdlaWdodGVkQ29udHJvbFBvaW50cygpOiBWZWM0W10ge1xuICAgIHJldHVybiB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cztcbiAgfVxuXG4gIHB1YmxpYyBnZXRLbm90Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5rbm90cy5sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5KTogbnVtYmVyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMucG9seWxpbmUhLmludGVyc2VjdChyYXkpO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sQ2FnZSEuZ2V0Qm91bmRpbmdCb3goKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXREZWdyZWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5kZWdyZWU7XG4gIH1cblxuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRyb2xDYWdlIS5kZWxldGUoKTtcbiAgICB0aGlzLmNvbnRyb2xQb2ludHMhLmRlbGV0ZSgpO1xuICAgIHRoaXMucG9seWxpbmUhLmRlbGV0ZSgpO1xuICAgIHRoaXMuY29udHJvbFBvaW50cyEuZGVsZXRlKCk7XG4gIH1cblxuICBwdWJsaWMgYWRkQ29udHJvbFBvaW50KHBvaW50OiBWZWMzLCB3ZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLnB1c2godmVjNC5jcmVhdGUoLi4ucG9pbnQsIHdlaWdodCkpO1xuICAgIHRoaXMua25vdHMgPSBnZW5lcmljS25vdFZlY3Rvcih0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGgsIHRoaXMuZGVncmVlKTtcbiAgICB0aGlzLnVwZGF0ZVNhbXBsZXMoKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVMYXN0Q29udHJvbFBvaW50KHBvaW50OiBWZWMzLCB3ZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzW3RoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aCAtIDFdID0gdmVjNC5jcmVhdGUoLi4ucG9pbnQsIHdlaWdodCk7XG4gICAgdGhpcy51cGRhdGVTYW1wbGVzKCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTGFzdENvbnRyb2xQb2ludCgpOiB2b2lkIHtcbiAgICB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5wb3AoKTtcbiAgICBpZiAodGhpcy5kZWdyZWUgPT09IHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aCkgdGhpcy5kZWdyZWUtLTtcbiAgICB0aGlzLmtub3RzID0gZ2VuZXJpY0tub3RWZWN0b3IodGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoLCB0aGlzLmRlZ3JlZSk7XG4gICAgdGhpcy51cGRhdGVTYW1wbGVzKCk7XG4gIH1cblxuICBwdWJsaWMgY2hhbmdlRGVncmVlKGRlZ3JlZTogbnVtYmVyKSB7XG4gICAgd2hpbGUgKGRlZ3JlZSA+PSB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGgpIGRlZ3JlZS0tO1xuICAgIHRoaXMuZGVncmVlID0gZGVncmVlO1xuICAgIHRoaXMua25vdHMgPSBnZW5lcmljS25vdFZlY3Rvcih0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGgsIHRoaXMuZGVncmVlKTtcbiAgICB0aGlzLnVwZGF0ZVNhbXBsZXMoKTtcbiAgfVxuXG5cbiAgcHVibGljIGdldENvbnRyb2xQb2ludENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU2FtcGxlcygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb250cm9sQ2FnZSkgdGhpcy5jb250cm9sQ2FnZS5kZWxldGUoKTtcbiAgICBpZiAodGhpcy5wb2x5bGluZSkgdGhpcy5wb2x5bGluZS5kZWxldGUoKTtcbiAgICBpZiAodGhpcy5jb250cm9sUG9pbnRzKSB0aGlzLmNvbnRyb2xQb2ludHMuZGVsZXRlKCk7XG5cbiAgICBjb25zdCBzYW1wbGVzOiBWZWMzW10gPSBbXTtcbiAgICBjb25zdCBzYW1wbGVDb3VudDogbnVtYmVyID0gQ3VydmUuU0FNUExFU19QRVJfRURHRSAqICh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGggLSAxKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzYW1wbGVDb3VudDsgaSsrKSB7XG4gICAgICBzYW1wbGVzLnB1c2godGhpcy5zYW1wbGUoaSAvIHNhbXBsZUNvdW50KSk7XG4gICAgfVxuXG4gICAgY29uc3QgY29udHJvbFBvaW50QXJyYXk6IFZlYzNbXSA9IHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLm1hcCgocG9pbnQ6IFZlYzQpID0+IHtcbiAgICAgIHJldHVybiB2ZWMzLmNyZWF0ZShwb2ludFswXSAvIHBvaW50WzNdLCBwb2ludFsxXSAvIHBvaW50WzNdLCBwb2ludFsyXSAvIHBvaW50WzNdKTtcbiAgICB9KVxuXG4gICAgdGhpcy5wb2x5bGluZSA9IG5ldyBQb2x5TGluZSh0aGlzLCBzYW1wbGVzLCk7XG4gICAgdGhpcy5jb250cm9sQ2FnZSA9IG5ldyBQb2x5TGluZSh0aGlzLCBjb250cm9sUG9pbnRBcnJheSk7XG4gICAgdGhpcy5jb250cm9sUG9pbnRzID0gbmV3IFBvaW50cyh0aGlzLCBjb250cm9sUG9pbnRBcnJheSk7XG5cbiAgfVxuXG4gIHByaXZhdGUgc2FtcGxlKHQ6IG51bWJlcik6IFZlYzMge1xuICAgIGNvbnN0IHU6IG51bWJlciA9IHQgKiAodGhpcy5rbm90cy5hdCgtMSkhIC0gdGhpcy5rbm90cy5hdCgwKSEpO1xuICAgIGNvbnN0IGtub3RTcGFuOiBudW1iZXIgPSBzcGFuKHRoaXMua25vdHMsIHUsIHRoaXMuZGVncmVlKVxuICAgIGNvbnN0IGZ1bmNzOiBudW1iZXJbXSA9IGJhc2lzRnVuY3ModGhpcy5rbm90cywgdSwgdGhpcy5kZWdyZWUpO1xuICAgIGxldCByZXM6IFZlYzQgPSB2ZWM0LmNyZWF0ZSgwLCAwLCAwLCAwKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0aGlzLmRlZ3JlZTsgaSsrKSB7XG4gICAgICByZXMgPSB2ZWM0LmFkZChyZXMsIHZlYzQuc2NhbGUodGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNba25vdFNwYW4gLSB0aGlzLmRlZ3JlZSArIGldLCBmdW5jc1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gdmVjMy5jcmVhdGUocmVzWzBdIC8gcmVzWzNdLCByZXNbMV0gLyByZXNbM10sIHJlc1syXSAvIHJlc1szXSk7XG4gIH1cblxuICBwdWJsaWMgbm9ybWFsaXplS25vdHMoKTogdm9pZCB7XG4gICAgY29uc3Qgc3RhcnQ6IG51bWJlciA9IHRoaXMua25vdHNbMF07XG4gICAgY29uc3QgZW5kOiBudW1iZXIgPSB0aGlzLmtub3RzW3RoaXMua25vdHMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgZGlzdCA9IGVuZCAtIHN0YXJ0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5rbm90cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5rbm90c1tpXSA9ICh0aGlzLmtub3RzW2ldIC0gc3RhcnQpIC8gZGlzdDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW5zZXJ0S25vdChrbm90OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBpZHg6IG51bWJlciA9IHNwYW4odGhpcy5rbm90cywga25vdCwgdGhpcy5kZWdyZWUpO1xuICAgIGNvbnN0IG5ld1dlaWdodGVkQ29udHJvbFBvaW50czogVmVjNFtdID0gW107XG4gICAgbmV3V2VpZ2h0ZWRDb250cm9sUG9pbnRzLnB1c2godGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbMF0pO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBhbHBoYTogbnVtYmVyO1xuICAgICAgaWYgKGkgPD0gaWR4IC0gdGhpcy5kZWdyZWUpIGFscGhhID0gMTtcbiAgICAgIGVsc2UgaWYgKGkgPj0gaWR4ICsgMSkgYWxwaGEgPSAwO1xuICAgICAgZWxzZSBhbHBoYSA9IChrbm90IC0gdGhpcy5rbm90c1tpXSkgLyAodGhpcy5rbm90c1tpICsgdGhpcy5kZWdyZWVdIC0gdGhpcy5rbm90c1tpXSk7XG4gICAgICBuZXdXZWlnaHRlZENvbnRyb2xQb2ludHMucHVzaCh2ZWM0LmFkZChcbiAgICAgICAgdmVjNC5zY2FsZSh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1tpXSwgYWxwaGEpLFxuICAgICAgICB2ZWM0LnNjYWxlKHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzW2kgLSAxXSwgMSAtIGFscGhhKVxuICAgICAgKSk7XG4gICAgfVxuICAgIG5ld1dlaWdodGVkQ29udHJvbFBvaW50cy5wdXNoKHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzW3RoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aCAtIDFdKTtcbiAgICB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cyA9IG5ld1dlaWdodGVkQ29udHJvbFBvaW50cztcblxuICAgIHRoaXMua25vdHMucHVzaChrbm90KTtcbiAgICB0aGlzLmtub3RzLnNvcnQoKTtcblxuICAgIHRoaXMudXBkYXRlU2FtcGxlcygpO1xuXG4gIH1cblxuICBwdWJsaWMgZWxldmF0ZURlZ3JlZShuOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmtub3RzKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cyk7XG4gICAgLy8gVE9ETzogc3R1ZmYgdGhpcyBvdXRcbiAgICBjb25zdCBuZXdEZWdyZWU6IG51bWJlciA9IHRoaXMuZGVncmVlICsgbjtcbiAgICBjb25zdCBiZXppZXJBbHBoYXMgPSBjYWxjQmV6aWVyQWxwaGFzKHRoaXMuZGVncmVlLCBuZXdEZWdyZWUpO1xuICAgIC8vY29uc29sZS5sb2coXCJhbHBoYXNcIiwgYmV6aWVyQWxwaGFzKTtcbiAgICBjb25zdCBiZXppZXJDb250cm9sczogVmVjNFtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlZ3JlZSArIDE7IGkrKykgYmV6aWVyQ29udHJvbHMucHVzaCh2ZWM0LmNyZWF0ZSgpKTtcbiAgICBjb25zdCBlbGV2YXRlZEJlemllckNvbnRyb2xzOiBWZWM0W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGVncmVlICsgbiArIDE7IGkrKykgZWxldmF0ZWRCZXppZXJDb250cm9scy5wdXNoKHZlYzQuY3JlYXRlKCkpO1xuICAgIGNvbnN0IG5leHRCZXppZXJDb250cm9sczogVmVjNFtdID0gW107XG4gICAgY29uc3QgYWxwaGFzOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kZWdyZWUgLSAxOyBpKyspIHtcbiAgICAgIG5leHRCZXppZXJDb250cm9scy5wdXNoKHZlYzQuY3JlYXRlKCkpO1xuICAgICAgYWxwaGFzLnB1c2goMCk7XG4gICAgfVxuXG4gICAgbGV0IGRpc3RpbmN0S25vdHMgPSAxO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5rbm90cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMua25vdHNbaV0gIT0gdGhpcy5rbm90c1tpIC0gMV0pIGRpc3RpbmN0S25vdHMrKztcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coXCJkaXN0aW5jdCBrbm90c1wiLCBkaXN0aW5jdEtub3RzKTtcblxuICAgIGNvbnN0IG5ld0NvbnRyb2xQb2ludHM6IFZlYzRbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoICsgbiAqIChkaXN0aW5jdEtub3RzIC0gMSk7IGkrKykge1xuICAgICAgbmV3Q29udHJvbFBvaW50cy5wdXNoKHZlYzQuY3JlYXRlKCkpO1xuICAgIH1cbiAgICBjb25zdCBuZXdLbm90czogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMua25vdHMubGVuZ3RoICsgbiAqIGRpc3RpbmN0S25vdHM7IGkrKykgbmV3S25vdHMucHVzaCgwKTtcblxuXG4gICAgLy8gSW5pdGlhbGl6ZSBGaXJzdCBTZWdtZW50XG4gICAgbGV0IG1oOiBudW1iZXIgPSBuZXdEZWdyZWU7XG4gICAgbGV0IGtpbmQ6IG51bWJlciA9IG5ld0RlZ3JlZSArIDE7XG4gICAgbGV0IHI6IG51bWJlciA9IC0xO1xuICAgIGxldCBhOiBudW1iZXIgPSB0aGlzLmRlZ3JlZTtcbiAgICBsZXQgYjogbnVtYmVyID0gdGhpcy5kZWdyZWUgKyAxO1xuICAgIGxldCBjaW5kOiBudW1iZXIgPSAxO1xuICAgIGxldCB1YTogbnVtYmVyID0gdGhpcy5rbm90c1swXTtcbiAgICBuZXdDb250cm9sUG9pbnRzWzBdID0gdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbMF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbmV3RGVncmVlOyBpKyspIG5ld0tub3RzW2ldID0gdWE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGhpcy5kZWdyZWU7IGkrKykgYmV6aWVyQ29udHJvbHNbaV0gPSB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1tpXTtcblxuICAgIC8vbWFpbiBsb29wXG4gICAgd2hpbGUgKGIgPCB0aGlzLmtub3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiYmV6IGNvbnRyb2xzIHN0YXJ0XCIsIFsuLi5iZXppZXJDb250cm9sc10pO1xuICAgICAgY29uc3QgSURLOiBudW1iZXIgPSBiO1xuICAgICAgd2hpbGUgKGIgPCB0aGlzLmtub3RzLmxlbmd0aCAtIDEgJiYgdGhpcy5rbm90c1tiXSA9PSB0aGlzLmtub3RzW2IgKyAxXSkgYisrO1xuICAgICAgY29uc3QgbXVsOiBudW1iZXIgPSBiIC0gSURLICsgMTtcbiAgICAgIG1oICs9IG11bCArIG47XG4gICAgICBjb25zdCB1YjogbnVtYmVyID0gdGhpcy5rbm90c1tiXTtcbiAgICAgIGNvbnN0IG9sZHI6IG51bWJlciA9IHI7XG4gICAgICByID0gdGhpcy5kZWdyZWUgLSBtdWw7XG4gICAgICBjb25zdCBsYno6IG51bWJlciA9IChvbGRyID4gMCkgPyBNYXRoLmZsb29yKChvbGRyICsgMikgLyAyKSA6IDE7XG4gICAgICBjb25zdCByYno6IG51bWJlciA9IChyID4gMCkgPyBuZXdEZWdyZWUgLSBNYXRoLmZsb29yKChyICsgMSkgLyAyKSA6IG5ld0RlZ3JlZTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJsYnosIHJielwiLCBsYnosIHJieik7XG4gICAgICAvLyBpbnNlcnQga25vdHMgIFxuICAgICAgaWYgKHIgPiAwKSB7XG4gICAgICAgIGNvbnN0IG51bTogbnVtYmVyID0gdWIgLSB1YTtcbiAgICAgICAgZm9yIChsZXQgayA9IHRoaXMuZGVncmVlOyBrID4gbXVsOyBrLS0pIGFscGhhc1trIC0gbXVsIC0gMV0gPSBudW0gLyAodGhpcy5rbm90c1thICsga10gLSB1YSk7XG4gICAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHI7IGorKykge1xuICAgICAgICAgIGNvbnN0IHNhdmU6IG51bWJlciA9IHIgLSBqO1xuICAgICAgICAgIGNvbnN0IHM6IG51bWJlciA9IG11bCArIGo7XG4gICAgICAgICAgZm9yIChsZXQgayA9IHRoaXMuZGVncmVlOyBrID49IHM7IGstLSkge1xuICAgICAgICAgICAgYmV6aWVyQ29udHJvbHNba10gPSB2ZWM0LmFkZChcbiAgICAgICAgICAgICAgdmVjNC5zY2FsZShiZXppZXJDb250cm9sc1trXSwgYWxwaGFzW2sgLSBzXSksXG4gICAgICAgICAgICAgIHZlYzQuc2NhbGUoYmV6aWVyQ29udHJvbHNbayAtIDFdLCAxIC0gYWxwaGFzW2sgLSBzXSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRCZXppZXJDb250cm9sc1tzYXZlXSA9IGJlemllckNvbnRyb2xzW3RoaXMuZGVncmVlXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gRWxldmF0ZSBCZXppZXIgXG4gICAgICBmb3IgKGxldCBpID0gbGJ6OyBpIDw9IG5ld0RlZ3JlZTsgaSsrKSB7XG4gICAgICAgIGVsZXZhdGVkQmV6aWVyQ29udHJvbHNbaV0gPSB2ZWM0LmNyZWF0ZSgwLCAwLCAwLCAwKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IE1hdGgubWF4KDAsIGkgLSBuKTsgaiA8PSBNYXRoLm1pbih0aGlzLmRlZ3JlZSwgaSk7IGorKykge1xuICAgICAgICAgIGVsZXZhdGVkQmV6aWVyQ29udHJvbHNbaV0gPSB2ZWM0LmFkZChlbGV2YXRlZEJlemllckNvbnRyb2xzW2ldLFxuICAgICAgICAgICAgdmVjNC5zY2FsZShiZXppZXJDb250cm9sc1tqXSwgYmV6aWVyQWxwaGFzW2ldW2pdKSk7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcImJhXCIsIGksIGosIGJlemllckFscGhhc1tpXVtqXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJiZXogY29udHJvbHMgZWxldmF0ZWRcIiwgWy4uLmJlemllckNvbnRyb2xzXSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcImVsZXZhdGVkIGJlemllclwiLCBbLi4uZWxldmF0ZWRCZXppZXJDb250cm9sc10pO1xuICAgICAgLy8gIFJlbW92ZSBrbm90c1xuICAgICAgaWYgKG9sZHIgPiAxKSB7XG4gICAgICAgIHZhciBmaXJzdDogbnVtYmVyID0ga2luZCAtIDI7XG4gICAgICAgIHZhciBsYXN0OiBudW1iZXIgPSBraW5kO1xuICAgICAgICBjb25zdCBkZW46IG51bWJlciA9IHViIC0gdWE7XG4gICAgICAgIGNvbnN0IGJldDogbnVtYmVyID0gKHViIC0gbmV3S25vdHNba2luZCAtIDFdKSAvIGRlbjtcbiAgICAgICAgZm9yIChsZXQgdHIgPSAxOyB0ciA8IG9sZHI7IHRyKyspIHtcbiAgICAgICAgICBsZXQgaTogbnVtYmVyID0gZmlyc3Q7XG4gICAgICAgICAgbGV0IGo6IG51bWJlciA9IGxhc3Q7XG4gICAgICAgICAgbGV0IGtqOiBudW1iZXIgPSBqIC0ga2luZCArIDE7XG4gICAgICAgICAgd2hpbGUgKGogLSBpID4gdHIpIHtcbiAgICAgICAgICAgIGlmIChpIDwgY2luZCkge1xuICAgICAgICAgICAgICBjb25zdCBhbGYgPSAodWIgLSBuZXdLbm90c1tpXSkgLyAodWEgLSBuZXdLbm90c1tpXSk7XG4gICAgICAgICAgICAgIG5ld0NvbnRyb2xQb2ludHNbaV0gPSB2ZWM0LmFkZChcbiAgICAgICAgICAgICAgICB2ZWM0LnNjYWxlKG5ld0NvbnRyb2xQb2ludHNbaV0sIGFsZiksXG4gICAgICAgICAgICAgICAgdmVjNC5zY2FsZShuZXdDb250cm9sUG9pbnRzW2kgLSAxXSwgMSAtIGFsZilcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqID49IGxieikge1xuICAgICAgICAgICAgICBpZiAoaiAtIHRyIDw9IGtpbmQgLSBuZXdEZWdyZWUgLSBvbGRyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2FtOiBudW1iZXIgPSAodWIgLSBuZXdLbm90c1tqIC0gdHJdKSAvIGRlbjtcbiAgICAgICAgICAgICAgICBlbGV2YXRlZEJlemllckNvbnRyb2xzW2tqXSA9IHZlYzQuYWRkKFxuICAgICAgICAgICAgICAgICAgdmVjNC5zY2FsZShlbGV2YXRlZEJlemllckNvbnRyb2xzW2tqXSwgZ2FtKSxcbiAgICAgICAgICAgICAgICAgIHZlYzQuc2NhbGUoZWxldmF0ZWRCZXppZXJDb250cm9sc1traiArIDFdLCAxIC0gZ2FtKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxldmF0ZWRCZXppZXJDb250cm9sc1tral0gPSB2ZWM0LmFkZChcbiAgICAgICAgICAgICAgICAgIHZlYzQuc2NhbGUoZWxldmF0ZWRCZXppZXJDb250cm9sc1tral0sIGJldCksXG4gICAgICAgICAgICAgICAgICB2ZWM0LnNjYWxlKGVsZXZhdGVkQmV6aWVyQ29udHJvbHNba2ogKyAxXSwgMSAtIGJldClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7IGotLTsga2otLTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZmlyc3QtLTsgbGFzdCsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYSAhPSB0aGlzLmRlZ3JlZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0RlZ3JlZSAtIG9sZHI7IGkrKykge1xuICAgICAgICAgIG5ld0tub3RzW2tpbmQrK10gPSB1YTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaiA9IGxiejsgaiA8PSByYno7IGorKykge1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiYWRkaW5nIHBvaW50XCIsIGVsZXZhdGVkQmV6aWVyQ29udHJvbHNbal0pO1xuICAgICAgICBuZXdDb250cm9sUG9pbnRzW2NpbmQrK10gPSBlbGV2YXRlZEJlemllckNvbnRyb2xzW2pdO1xuICAgICAgfVxuICAgICAgaWYgKGIgPCB0aGlzLmtub3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByOyBqKyspIGJlemllckNvbnRyb2xzW2pdID0gbmV4dEJlemllckNvbnRyb2xzW2pdO1xuICAgICAgICBmb3IgKGxldCBqID0gcjsgaiA8PSB0aGlzLmRlZ3JlZTsgaisrKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJiXCIsIGIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwialwiLCBqKTtcbiAgICAgICAgICBiZXppZXJDb250cm9sc1tqXSA9IHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzW2IgLSB0aGlzLmRlZ3JlZSArIGpdO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGJlemllckNvbnRyb2xzW2pdKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gYisrO1xuICAgICAgICB1YSA9IHViO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbmV3RGVncmVlOyBpKyspIHtcbiAgICAgICAgICBuZXdLbm90c1traW5kICsgaV0gPSB1YjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhcImxhcCBmaW5pc2hlZFwiLCBbLi4ubmV3Q29udHJvbFBvaW50c10pXG4gICAgICAvLyBjb25zb2xlLmxvZyhcIm5ldyBrbm90c1wiLCBuZXdLbm90cyk7XG4gICAgICAvL2NvbnNvbGUubG9nKFwiYmV6aWVyQ29udHJvbHNcIiwgYmV6aWVyQ29udHJvbHMpO1xuICAgIH1cblxuXG4gICAgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMgPSBuZXdDb250cm9sUG9pbnRzO1xuICAgIHRoaXMua25vdHMgPSBuZXdLbm90cztcbiAgICB0aGlzLmRlZ3JlZSA9IG5ld0RlZ3JlZTtcbiAgICBjb25zb2xlLmxvZyhuZXdDb250cm9sUG9pbnRzKTtcbiAgICBjb25zb2xlLmxvZyhuZXdLbm90cyk7XG5cbiAgICB0aGlzLnVwZGF0ZVNhbXBsZXMoKTtcblxuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/curve.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/loft.ts":
/*!************************************!*\
  !*** ./src/geometry/nurbs/loft.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loft: () => (/* binding */ loft)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _surface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./surface */ \"./src/geometry/nurbs/surface.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/geometry/nurbs/utils.ts\");\n\n\n\nconst equals = function (a, b, e = 0.000001) { return Math.abs(a - b) < e; };\nconst loft = function (curves, degree) {\n    // match degrees\n    const degreeU = Math.min(degree, curves.length - 1);\n    let degreeV = 0;\n    for (let curve of curves)\n        degreeV = Math.max(degreeV, curve.getDegree());\n    for (let curve of curves)\n        if (curve.getDegree() < degreeV)\n            curve.elevateDegree(degreeV - curve.getDegree());\n    // match knots\n    for (let curve of curves)\n        curve.normalizeKnots();\n    for (let i = 0; i < curves[0].getKnotCount(); i++) {\n        var smallest = Number.POSITIVE_INFINITY;\n        var finished = true;\n        for (let curve of curves) {\n            if (i < curve.getKnotCount()) {\n                finished = false;\n                smallest = Math.min(smallest, curve.getKnots()[i]);\n            }\n        }\n        if (finished)\n            break;\n        for (let curve of curves) {\n            if (!equals(curve.getKnots()[i], smallest))\n                curve.insertKnot(smallest);\n        }\n    }\n    //loft\n    const points = [];\n    for (let i = 0; i < curves.length; i++) {\n        const curve = curves[i];\n        const curveControls = curve.getWeightedControlPoints();\n        points.push([]);\n        for (let j = 0; j < curveControls.length; j++) {\n            const model = curve.getModel();\n            const weight = curveControls[j][3];\n            var point = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(curveControls[j][0] / weight, curveControls[j][1] / weight, curveControls[j][2] / weight);\n            point = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.transformMat4(point, model);\n            points[i].push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec4.create(point[0] * weight, point[1] * weight, point[2] * weight, weight));\n        }\n    }\n    const knotsU = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.genericKnotVector)(curves.length, degreeU);\n    return new _surface__WEBPACK_IMPORTED_MODULE_0__.Surface(points, knotsU, curves[0].getKnots(), degreeU, degreeV);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxHQUFHLE1BQU0sRUFDNUIsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFDNUIsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FDN0IsQ0FBQztZQUNGLEtBQUssR0FBRyw2Q0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FDeEIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFDakIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFDakIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFDakIsTUFBTSxDQUNQLENBQUMsQ0FBQztTQUNKO0tBQ0Y7SUFFRCxNQUFNLE1BQU0sR0FBYSx5REFBaUIsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRW5FLE9BQU8sSUFBSSw2Q0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM3RSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbnVyYnMvbG9mdC50cz9lNTQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdDQsIFZlYzMsIHZlYzMsIHZlYzQsIFZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4vY3VydmVcIjtcbmltcG9ydCB7IFN1cmZhY2UgfSBmcm9tIFwiLi9zdXJmYWNlXCI7XG5pbXBvcnQgeyBnZW5lcmljS25vdFZlY3RvciB9IGZyb20gXCIuL3V0aWxzXCI7XG5cblxuXG5jb25zdCBlcXVhbHMgPSBmdW5jdGlvbihhOiBudW1iZXIsIGI6IG51bWJlciwgZTogbnVtYmVyID0gMC4wMDAwMDEpOiBib29sZWFuIHsgcmV0dXJuIE1hdGguYWJzKGEgLSBiKSA8IGU7IH07XG5cbmV4cG9ydCBjb25zdCBsb2Z0ID0gZnVuY3Rpb24oY3VydmVzOiBDdXJ2ZVtdLCBkZWdyZWU6IG51bWJlcik6IFN1cmZhY2Uge1xuICAvLyBtYXRjaCBkZWdyZWVzXG4gIGNvbnN0IGRlZ3JlZVU6IG51bWJlciA9IE1hdGgubWluKGRlZ3JlZSwgY3VydmVzLmxlbmd0aCAtIDEpO1xuICBsZXQgZGVncmVlVjogbnVtYmVyID0gMDtcbiAgZm9yIChsZXQgY3VydmUgb2YgY3VydmVzKSBkZWdyZWVWID0gTWF0aC5tYXgoZGVncmVlViwgY3VydmUuZ2V0RGVncmVlKCkpO1xuICBmb3IgKGxldCBjdXJ2ZSBvZiBjdXJ2ZXMpIGlmIChjdXJ2ZS5nZXREZWdyZWUoKSA8IGRlZ3JlZVYpIGN1cnZlLmVsZXZhdGVEZWdyZWUoZGVncmVlViAtIGN1cnZlLmdldERlZ3JlZSgpKTtcblxuICAvLyBtYXRjaCBrbm90c1xuICBmb3IgKGxldCBjdXJ2ZSBvZiBjdXJ2ZXMpIGN1cnZlLm5vcm1hbGl6ZUtub3RzKCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY3VydmVzWzBdLmdldEtub3RDb3VudCgpOyBpKyspIHtcbiAgICB2YXIgc21hbGxlc3Q6IG51bWJlciA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICB2YXIgZmluaXNoZWQ6IGJvb2xlYW4gPSB0cnVlO1xuICAgIGZvciAobGV0IGN1cnZlIG9mIGN1cnZlcykge1xuICAgICAgaWYgKGkgPCBjdXJ2ZS5nZXRLbm90Q291bnQoKSkge1xuICAgICAgICBmaW5pc2hlZCA9IGZhbHNlO1xuICAgICAgICBzbWFsbGVzdCA9IE1hdGgubWluKHNtYWxsZXN0LCBjdXJ2ZS5nZXRLbm90cygpW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpbmlzaGVkKSBicmVhaztcbiAgICBmb3IgKGxldCBjdXJ2ZSBvZiBjdXJ2ZXMpIHtcbiAgICAgIGlmICghZXF1YWxzKGN1cnZlLmdldEtub3RzKClbaV0sIHNtYWxsZXN0KSkgY3VydmUuaW5zZXJ0S25vdChzbWFsbGVzdCk7XG4gICAgfVxuICB9XG5cbiAgLy9sb2Z0XG4gIGNvbnN0IHBvaW50czogVmVjNFtdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJ2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjdXJ2ZTogQ3VydmUgPSBjdXJ2ZXNbaV07XG4gICAgY29uc3QgY3VydmVDb250cm9sczogVmVjNFtdID0gY3VydmUuZ2V0V2VpZ2h0ZWRDb250cm9sUG9pbnRzKCk7XG4gICAgcG9pbnRzLnB1c2goW10pO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgY3VydmVDb250cm9scy5sZW5ndGg7IGorKykge1xuICAgICAgY29uc3QgbW9kZWw6IE1hdDQgPSBjdXJ2ZS5nZXRNb2RlbCgpO1xuICAgICAgY29uc3Qgd2VpZ2h0OiBudW1iZXIgPSBjdXJ2ZUNvbnRyb2xzW2pdWzNdO1xuICAgICAgdmFyIHBvaW50OiBWZWMzID0gdmVjMy5jcmVhdGUoXG4gICAgICAgIGN1cnZlQ29udHJvbHNbal1bMF0gLyB3ZWlnaHQsXG4gICAgICAgIGN1cnZlQ29udHJvbHNbal1bMV0gLyB3ZWlnaHQsXG4gICAgICAgIGN1cnZlQ29udHJvbHNbal1bMl0gLyB3ZWlnaHQsXG4gICAgICApO1xuICAgICAgcG9pbnQgPSB2ZWMzLnRyYW5zZm9ybU1hdDQocG9pbnQsIG1vZGVsKTtcbiAgICAgIHBvaW50c1tpXS5wdXNoKHZlYzQuY3JlYXRlKFxuICAgICAgICBwb2ludFswXSAqIHdlaWdodCxcbiAgICAgICAgcG9pbnRbMV0gKiB3ZWlnaHQsXG4gICAgICAgIHBvaW50WzJdICogd2VpZ2h0LFxuICAgICAgICB3ZWlnaHRcbiAgICAgICkpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGtub3RzVTogbnVtYmVyW10gPSBnZW5lcmljS25vdFZlY3RvcihjdXJ2ZXMubGVuZ3RoLCBkZWdyZWVVKTtcblxuICByZXR1cm4gbmV3IFN1cmZhY2UocG9pbnRzLCBrbm90c1UsIGN1cnZlc1swXS5nZXRLbm90cygpLCBkZWdyZWVVLCBkZWdyZWVWKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/loft.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/surface.ts":
/*!***************************************!*\
  !*** ./src/geometry/nurbs/surface.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Surface: () => (/* binding */ Surface)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../mesh */ \"./src/geometry/mesh.ts\");\n/* harmony import */ var _curve__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./curve */ \"./src/geometry/nurbs/curve.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/geometry/nurbs/utils.ts\");\n\n\n\n\n\nclass Surface extends _geometry__WEBPACK_IMPORTED_MODULE_0__.Geometry {\n    constructor(weightedControlPoints, uKnots, vKnots, degreeU, degreeV, parent = null, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.identity(), material = null) {\n        super(parent, model, material);\n        this.weightedControlPoints = weightedControlPoints;\n        this.uKnots = uKnots;\n        this.vKnots = vKnots;\n        this.degreeU = degreeU;\n        this.degreeV = degreeV;\n        this.mesh = null;\n        this.edgeLowU = null;\n        this.edgeHighU = null;\n        this.edgeLowV = null;\n        this.edgeHighV = null;\n        this.update();\n    }\n    delete() {\n        var _a, _b, _c, _d, _e;\n        (_a = this.mesh) === null || _a === void 0 ? void 0 : _a.destroy();\n        (_b = this.edgeLowU) === null || _b === void 0 ? void 0 : _b.destroy();\n        (_c = this.edgeHighU) === null || _c === void 0 ? void 0 : _c.destroy();\n        (_d = this.edgeLowV) === null || _d === void 0 ? void 0 : _d.destroy();\n        (_e = this.edgeHighV) === null || _e === void 0 ? void 0 : _e.destroy();\n    }\n    getBoundingBox() {\n        return this.mesh.getBoundingBox();\n    }\n    intersect(ray) {\n        // TODO: come back to this...\n        throw new Error(\"not implemented\");\n    }\n    update() {\n        this.delete();\n        const sampleCountU = _curve__WEBPACK_IMPORTED_MODULE_2__.Curve.SAMPLES_PER_EDGE * (this.weightedControlPoints.length - 1);\n        const sampleCountV = _curve__WEBPACK_IMPORTED_MODULE_2__.Curve.SAMPLES_PER_EDGE * (this.weightedControlPoints[0].length - 1);\n        const firstKnotU = this.uKnots[0];\n        const firstKnotV = this.vKnots[0];\n        const knotSizeU = this.uKnots[this.uKnots.length - 1] - firstKnotU;\n        const knotSizeV = this.vKnots[this.vKnots.length - 1] - firstKnotV;\n        const stepU = knotSizeU / sampleCountU;\n        const stepV = knotSizeV / sampleCountV;\n        const meshVerts = [];\n        const meshNormals = [];\n        const meshIndices = [];\n        for (let i = 0; i <= sampleCountU; i++) {\n            for (let j = 0; j <= sampleCountV; j++) {\n                meshVerts.push(this.sample(firstKnotU + i * stepU, firstKnotV + j * stepV));\n            }\n        }\n        for (let i = 0; i < sampleCountU; i++) {\n            for (let j = 0; j < sampleCountV; j++) {\n                meshIndices.push(i * (sampleCountV + 1) + j);\n                meshIndices.push(i * (sampleCountV + 1) + j + 1);\n                meshIndices.push((i + 1) * (sampleCountV + 1) + j);\n                meshIndices.push(i * (sampleCountV + 1) + j + 1);\n                meshIndices.push((i + 1) * (sampleCountV + 1) + j + 1);\n                meshIndices.push((i + 1) * (sampleCountV + 1) + j);\n            }\n        }\n        for (let i = 0; i <= sampleCountU; i++) {\n            for (let j = 0; j <= sampleCountV; j++) {\n                const v1 = (i == 0)\n                    ? wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[(i + 1) * (sampleCountV + 1) + j])\n                    : wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[(i - 1) * (sampleCountV + 1) + j]);\n                const v2 = (j == 0)\n                    ? wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[i * (sampleCountV + 1) + j + 1])\n                    : wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[i * (sampleCountV + 1) + j - 1]);\n                var normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(v1, v2));\n                if (i == 0)\n                    normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(normal, -1);\n                if (j == 0)\n                    normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(normal, -1);\n                meshNormals.push(normal);\n            }\n        }\n        this.mesh = new _mesh__WEBPACK_IMPORTED_MODULE_1__.Mesh(this, meshVerts, meshNormals, meshIndices);\n    }\n    sample(u, v) {\n        const uSpan = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.span)(this.uKnots, u, this.degreeU);\n        const vSpan = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.span)(this.vKnots, v, this.degreeV);\n        const basisFuncsU = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.basisFuncs)(this.uKnots, u, this.degreeU);\n        const basisFuncsV = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.basisFuncs)(this.vKnots, v, this.degreeV);\n        var res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(0, 0, 0, 0);\n        for (let i = 0; i <= this.degreeU; i++) {\n            for (let j = 0; j <= this.degreeV; j++) {\n                res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.add(res, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.scale(this.weightedControlPoints[uSpan - this.degreeU + i][vSpan - this.degreeV + j], basisFuncsV[j] * basisFuncsU[i]));\n            }\n        }\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(res[0] / res[3], res[1] / res[3], res[2] / res[3]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0RBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkUsSUFBSSxHQUFHLEdBQVMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3RDLEdBQUcsR0FBRyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsNkNBQUksQ0FBQyxLQUFLLENBQzVCLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsRUFDOUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FDaEMsQ0FBQyxDQUFDO2FBQ0o7U0FDRjtRQUNELE9BQU8sNkNBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RSxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9udXJicy9zdXJmYWNlLnRzPzFmNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWxOYW1lIH0gZnJvbSBcIi4uLy4uL21hdGVyaWFscy9tYXRlcmlhbFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi4vYm91bmRpbmdCb3hcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBNZXNoIH0gZnJvbSBcIi4uL21lc2hcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9yYXlcIjtcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4vY3VydmVcIjtcbmltcG9ydCB7IGJhc2lzRnVuY3MsIHNwYW4gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5cblxuXG5leHBvcnQgY2xhc3MgU3VyZmFjZSBleHRlbmRzIEdlb21ldHJ5IHtcblxuICBwcml2YXRlIG1lc2g6IE1lc2ggfCBudWxsO1xuICBwcml2YXRlIGVkZ2VMb3dVOiBDdXJ2ZSB8IG51bGw7XG4gIHByaXZhdGUgZWRnZUhpZ2hVOiBDdXJ2ZSB8IG51bGw7XG4gIHByaXZhdGUgZWRnZUxvd1Y6IEN1cnZlIHwgbnVsbDtcbiAgcHJpdmF0ZSBlZGdlSGlnaFY6IEN1cnZlIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHdlaWdodGVkQ29udHJvbFBvaW50czogVmVjNFtdW10sXG4gICAgcHJpdmF0ZSB1S25vdHM6IG51bWJlcltdLFxuICAgIHByaXZhdGUgdktub3RzOiBudW1iZXJbXSxcbiAgICBwcml2YXRlIGRlZ3JlZVU6IG51bWJlcixcbiAgICBwcml2YXRlIGRlZ3JlZVY6IG51bWJlcixcbiAgICBwYXJlbnQ6IEdlb21ldHJ5IHwgbnVsbCA9IG51bGwsXG4gICAgbW9kZWw6IE1hdDQgPSBtYXQ0LmlkZW50aXR5KCksXG4gICAgbWF0ZXJpYWw6IE1hdGVyaWFsTmFtZSB8IG51bGwgPSBudWxsLFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG4gICAgdGhpcy5tZXNoID0gbnVsbDtcbiAgICB0aGlzLmVkZ2VMb3dVID0gbnVsbDtcbiAgICB0aGlzLmVkZ2VIaWdoVSA9IG51bGw7XG4gICAgdGhpcy5lZGdlTG93ViA9IG51bGw7XG4gICAgdGhpcy5lZGdlSGlnaFYgPSBudWxsO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlKCk6IHZvaWQge1xuICAgIHRoaXMubWVzaD8uZGVzdHJveSgpO1xuICAgIHRoaXMuZWRnZUxvd1U/LmRlc3Ryb3koKTtcbiAgICB0aGlzLmVkZ2VIaWdoVT8uZGVzdHJveSgpO1xuICAgIHRoaXMuZWRnZUxvd1Y/LmRlc3Ryb3koKTtcbiAgICB0aGlzLmVkZ2VIaWdoVj8uZGVzdHJveSgpO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICByZXR1cm4gdGhpcy5tZXNoIS5nZXRCb3VuZGluZ0JveCgpO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdChyYXk6IFJheSk6IG51bWJlciB8IG51bGwge1xuICAgIC8vIFRPRE86IGNvbWUgYmFjayB0byB0aGlzLi4uXG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5kZWxldGUoKTtcblxuICAgIGNvbnN0IHNhbXBsZUNvdW50VTogbnVtYmVyID0gQ3VydmUuU0FNUExFU19QRVJfRURHRSAqICh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGggLSAxKTtcbiAgICBjb25zdCBzYW1wbGVDb3VudFY6IG51bWJlciA9IEN1cnZlLlNBTVBMRVNfUEVSX0VER0UgKiAodGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbMF0ubGVuZ3RoIC0gMSk7XG5cbiAgICBjb25zdCBmaXJzdEtub3RVOiBudW1iZXIgPSB0aGlzLnVLbm90c1swXTtcbiAgICBjb25zdCBmaXJzdEtub3RWOiBudW1iZXIgPSB0aGlzLnZLbm90c1swXTtcblxuICAgIGNvbnN0IGtub3RTaXplVTogbnVtYmVyID0gdGhpcy51S25vdHNbdGhpcy51S25vdHMubGVuZ3RoIC0gMV0gLSBmaXJzdEtub3RVO1xuICAgIGNvbnN0IGtub3RTaXplVjogbnVtYmVyID0gdGhpcy52S25vdHNbdGhpcy52S25vdHMubGVuZ3RoIC0gMV0gLSBmaXJzdEtub3RWO1xuXG4gICAgY29uc3Qgc3RlcFU6IG51bWJlciA9IGtub3RTaXplVSAvIHNhbXBsZUNvdW50VTtcbiAgICBjb25zdCBzdGVwVjogbnVtYmVyID0ga25vdFNpemVWIC8gc2FtcGxlQ291bnRWO1xuXG4gICAgY29uc3QgbWVzaFZlcnRzOiBWZWMzW10gPSBbXTtcbiAgICBjb25zdCBtZXNoTm9ybWFsczogVmVjM1tdID0gW107XG4gICAgY29uc3QgbWVzaEluZGljZXM6IG51bWJlcltdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzYW1wbGVDb3VudFU7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gc2FtcGxlQ291bnRWOyBqKyspIHtcbiAgICAgICAgbWVzaFZlcnRzLnB1c2godGhpcy5zYW1wbGUoZmlyc3RLbm90VSArIGkgKiBzdGVwVSwgZmlyc3RLbm90ViArIGogKiBzdGVwVikpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZUNvdW50VTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNhbXBsZUNvdW50VjsgaisrKSB7XG4gICAgICAgIG1lc2hJbmRpY2VzLnB1c2goaSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGopO1xuICAgICAgICBtZXNoSW5kaWNlcy5wdXNoKGkgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqICsgMSk7XG4gICAgICAgIG1lc2hJbmRpY2VzLnB1c2goKGkgKyAxKSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGopO1xuICAgICAgICBtZXNoSW5kaWNlcy5wdXNoKGkgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqICsgMSk7XG4gICAgICAgIG1lc2hJbmRpY2VzLnB1c2goKGkgKyAxKSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGogKyAxKTtcbiAgICAgICAgbWVzaEluZGljZXMucHVzaCgoaSArIDEpICogKHNhbXBsZUNvdW50ViArIDEpICsgaik7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHNhbXBsZUNvdW50VTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBzYW1wbGVDb3VudFY7IGorKykge1xuICAgICAgICBjb25zdCB2MTogVmVjMyA9IChpID09IDApXG4gICAgICAgICAgPyB2ZWMzLnN1YihtZXNoVmVydHNbaSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGpdLCBtZXNoVmVydHNbKGkgKyAxKSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGpdKVxuICAgICAgICAgIDogdmVjMy5zdWIobWVzaFZlcnRzW2kgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqXSwgbWVzaFZlcnRzWyhpIC0gMSkgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqXSk7XG4gICAgICAgIGNvbnN0IHYyOiBWZWMzID0gKGogPT0gMClcbiAgICAgICAgICA/IHZlYzMuc3ViKG1lc2hWZXJ0c1tpICogKHNhbXBsZUNvdW50ViArIDEpICsgal0sIG1lc2hWZXJ0c1tpICogKHNhbXBsZUNvdW50ViArIDEpICsgaiArIDFdKVxuICAgICAgICAgIDogdmVjMy5zdWIobWVzaFZlcnRzW2kgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqXSwgbWVzaFZlcnRzW2kgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqIC0gMV0pO1xuICAgICAgICB2YXIgbm9ybWFsOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5jcm9zcyh2MSwgdjIpKTtcbiAgICAgICAgaWYgKGkgPT0gMCkgbm9ybWFsID0gdmVjMy5zY2FsZShub3JtYWwsIC0xKTtcbiAgICAgICAgaWYgKGogPT0gMCkgbm9ybWFsID0gdmVjMy5zY2FsZShub3JtYWwsIC0xKTtcbiAgICAgICAgbWVzaE5vcm1hbHMucHVzaChub3JtYWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWVzaCA9IG5ldyBNZXNoKHRoaXMsIG1lc2hWZXJ0cywgbWVzaE5vcm1hbHMsIG1lc2hJbmRpY2VzKTtcbiAgfVxuXG4gIHB1YmxpYyBzYW1wbGUodTogbnVtYmVyLCB2OiBudW1iZXIpOiBWZWMzIHtcbiAgICBjb25zdCB1U3BhbjogbnVtYmVyID0gc3Bhbih0aGlzLnVLbm90cywgdSwgdGhpcy5kZWdyZWVVKTtcbiAgICBjb25zdCB2U3BhbjogbnVtYmVyID0gc3Bhbih0aGlzLnZLbm90cywgdiwgdGhpcy5kZWdyZWVWKTtcbiAgICBjb25zdCBiYXNpc0Z1bmNzVTogbnVtYmVyW10gPSBiYXNpc0Z1bmNzKHRoaXMudUtub3RzLCB1LCB0aGlzLmRlZ3JlZVUpO1xuICAgIGNvbnN0IGJhc2lzRnVuY3NWOiBudW1iZXJbXSA9IGJhc2lzRnVuY3ModGhpcy52S25vdHMsIHYsIHRoaXMuZGVncmVlVik7XG4gICAgdmFyIHJlczogVmVjNCA9IHZlYzQuY3JlYXRlKDAsIDAsIDAsIDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHRoaXMuZGVncmVlVTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSB0aGlzLmRlZ3JlZVY7IGorKykge1xuICAgICAgICByZXMgPSB2ZWM0LmFkZChyZXMsIHZlYzQuc2NhbGUoXG4gICAgICAgICAgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbdVNwYW4gLSB0aGlzLmRlZ3JlZVUgKyBpXVt2U3BhbiAtIHRoaXMuZGVncmVlViArIGpdLFxuICAgICAgICAgIGJhc2lzRnVuY3NWW2pdICogYmFzaXNGdW5jc1VbaV1cbiAgICAgICAgKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2ZWMzLmNyZWF0ZShyZXNbMF0gLyByZXNbM10sIHJlc1sxXSAvIHJlc1szXSwgcmVzWzJdIC8gcmVzWzNdKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/surface.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/utils.ts":
/*!*************************************!*\
  !*** ./src/geometry/nurbs/utils.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   basisFuncs: () => (/* binding */ basisFuncs),\n/* harmony export */   calcBezierAlphas: () => (/* binding */ calcBezierAlphas),\n/* harmony export */   genericKnotVector: () => (/* binding */ genericKnotVector),\n/* harmony export */   span: () => (/* binding */ span),\n/* harmony export */   toWeightedControlPoints: () => (/* binding */ toWeightedControlPoints)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n\n\nconst span = function (knots, u, p) {\n    const n = knots.length - p - 2;\n    let l = p;\n    let h = n;\n    let m;\n    while (l < h) {\n        m = Math.floor((l + h) / 2);\n        if (u >= knots[m + 1])\n            l = m + 1;\n        else\n            h = m;\n    }\n    return l;\n};\nconst basisFuncs = function (knots, u, p) {\n    const funcs = [1];\n    const i = span(knots, u, p);\n    const left = (i, j) => { return u - knots[i - j + 1]; };\n    const right = (i, j) => { return knots[i + j] - u; };\n    for (let j = 1; j <= p; j++) {\n        let saved = 0;\n        for (let r = 0; r < j; r++) {\n            const temp = funcs[r] / (right(i, r + 1) + left(i, j - r));\n            funcs[r] = saved + right(i, r + 1) * temp;\n            saved = left(i, j - r) * temp;\n        }\n        funcs.push(saved);\n    }\n    return funcs;\n};\nconst genericKnotVector = function (pointCount, degree) {\n    const res = [];\n    for (let i = 0; i <= degree; i++)\n        res.push(0);\n    for (let i = 1; i < pointCount - degree; i++)\n        res.push(i);\n    for (let i = 0; i <= degree; i++)\n        res.push(pointCount - degree);\n    return res;\n};\nconst toWeightedControlPoints = function (points, weights) {\n    const res = [];\n    if (weights) {\n        for (let i = 0; i < weights.length; i++) {\n            const point = points[i];\n            res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(point[0] * weights[i], point[1] * weights[i], point[2] * weights[i], weights[i]));\n        }\n    }\n    else {\n        for (let point of points) {\n            res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(...point, 1));\n        }\n    }\n    return res;\n};\nconst calcBezierAlphas = function (startDegree, endDegree) {\n    const bezierAlphas = [];\n    for (let i = 0; i < endDegree + 1; i++) {\n        const temp = [];\n        for (let j = 0; j < startDegree + 1; j++) {\n            temp.push(0);\n        }\n        bezierAlphas.push(temp);\n    }\n    bezierAlphas[0][0] = bezierAlphas[endDegree][startDegree] = 1;\n    for (let i = 1; i <= Math.floor(endDegree / 2); i++) {\n        const inv = 1 / (0,_utils_math__WEBPACK_IMPORTED_MODULE_0__.bin)(endDegree, i);\n        const mpi = Math.min(startDegree, i);\n        for (let j = Math.max(0, i - endDegree + startDegree); j <= mpi; j++)\n            bezierAlphas[i][j] = inv * (0,_utils_math__WEBPACK_IMPORTED_MODULE_0__.bin)(startDegree, j) * (0,_utils_math__WEBPACK_IMPORTED_MODULE_0__.bin)(endDegree - startDegree, i - j);\n    }\n    for (let i = Math.floor(endDegree / 2) + 1; i <= endDegree - 1; i++) {\n        const mpi = Math.min(startDegree, i);\n        for (let j = Math.max(0, i - endDegree + startDegree); j <= mpi; j++)\n            bezierAlphas[i][j] = bezierAlphas[endDegree - i][startDegree - j];\n    }\n    return bezierAlphas;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbnVyYnMvdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUMrQztBQUNSO0FBRWhDLE1BQU0sSUFBSSxHQUFHLFVBQVMsS0FBZSxFQUFFLENBQVMsRUFBRSxDQUFTO0lBQ2hFLE1BQU0sQ0FBQyxHQUFXLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QyxJQUFJLENBQUMsR0FBVyxDQUFDLENBQUM7SUFDbEIsSUFBSSxDQUFDLEdBQVcsQ0FBQyxDQUFDO0lBQ2xCLElBQUksQ0FBUyxDQUFDO0lBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ1osQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7WUFDNUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNaO0lBQ0QsT0FBTyxDQUFDLENBQUM7QUFDWCxDQUFDO0FBRU0sTUFBTSxVQUFVLEdBQUcsVUFBUyxLQUFlLEVBQUUsQ0FBUyxFQUFFLENBQVM7SUFDdEUsTUFBTSxLQUFLLEdBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1QixNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1QixNQUFNLElBQUksR0FBRyxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsRUFBRSxHQUFHLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxFQUFFLEdBQUcsT0FBTyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzNCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNkLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDMUIsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzRCxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztZQUMxQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1NBQy9CO1FBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNuQjtJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUdNLE1BQU0saUJBQWlCLEdBQUcsVUFBUyxVQUFrQixFQUFFLE1BQWM7SUFDMUUsTUFBTSxHQUFHLEdBQWEsRUFBRSxDQUFDO0lBQ3pCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxFQUFFO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxHQUFHLE1BQU0sRUFBRSxDQUFDLEVBQUU7UUFBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxFQUFFO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLENBQUM7SUFDaEUsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBRU0sTUFBTSx1QkFBdUIsR0FBRyxVQUFTLE1BQWMsRUFBRSxPQUFrQjtJQUNoRixNQUFNLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFFdkIsSUFBSSxPQUFPLEVBQUU7UUFDWCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN2QyxNQUFNLEtBQUssR0FBUyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsR0FBRyxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FDbEIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFDckIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFDckIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFDckIsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUNYLENBQUMsQ0FBQztTQUNKO0tBQ0Y7U0FBTTtRQUNMLEtBQUssSUFBSSxLQUFLLElBQUksTUFBTSxFQUFFO1lBQ3hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNwQztLQUNGO0lBQ0QsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBRU0sTUFBTSxnQkFBZ0IsR0FBRyxVQUFTLFdBQW1CLEVBQUUsU0FBaUI7SUFDN0UsTUFBTSxZQUFZLEdBQWUsRUFBRSxDQUFDO0lBQ3BDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3RDLE1BQU0sSUFBSSxHQUFhLEVBQUUsQ0FBQztRQUMxQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2Q7UUFDRCxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3pCO0lBQ0QsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ25ELE1BQU0sR0FBRyxHQUFXLENBQUMsR0FBRyxnREFBRyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMxQyxNQUFNLEdBQUcsR0FBVyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM3QyxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLEdBQUcsV0FBVyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLEVBQUU7WUFDbEUsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxnREFBRyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsR0FBRyxnREFBRyxDQUFDLFNBQVMsR0FBRyxXQUFXLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBRXhGO0lBQ0QsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLFNBQVMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDbkUsTUFBTSxHQUFHLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0MsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxHQUFHLFdBQVcsQ0FBQyxFQUFFLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxFQUFFO1lBQ2xFLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNyRTtJQUNELE9BQU8sWUFBWSxDQUFDO0FBQ3RCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9udXJicy91dGlscy50cz9jNTI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHdhcm4gfSBmcm9tIFwiY29uc29sZVwiO1xuaW1wb3J0IHsgVmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgYmluIH0gZnJvbSBcIi4uLy4uL3V0aWxzL21hdGhcIjtcblxuZXhwb3J0IGNvbnN0IHNwYW4gPSBmdW5jdGlvbihrbm90czogbnVtYmVyW10sIHU6IG51bWJlciwgcDogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgbjogbnVtYmVyID0ga25vdHMubGVuZ3RoIC0gcCAtIDI7XG4gIGxldCBsOiBudW1iZXIgPSBwO1xuICBsZXQgaDogbnVtYmVyID0gbjtcbiAgbGV0IG06IG51bWJlcjtcbiAgd2hpbGUgKGwgPCBoKSB7XG4gICAgbSA9IE1hdGguZmxvb3IoKGwgKyBoKSAvIDIpO1xuICAgIGlmICh1ID49IGtub3RzW20gKyAxXSkgbCA9IG0gKyAxO1xuICAgIGVsc2UgaCA9IG07XG4gIH1cbiAgcmV0dXJuIGw7XG59XG5cbmV4cG9ydCBjb25zdCBiYXNpc0Z1bmNzID0gZnVuY3Rpb24oa25vdHM6IG51bWJlcltdLCB1OiBudW1iZXIsIHA6IG51bWJlcik6IG51bWJlcltdIHtcbiAgY29uc3QgZnVuY3M6IG51bWJlcltdID0gWzFdO1xuICBjb25zdCBpID0gc3Bhbihrbm90cywgdSwgcCk7XG4gIGNvbnN0IGxlZnQgPSAoaTogbnVtYmVyLCBqOiBudW1iZXIpID0+IHsgcmV0dXJuIHUgLSBrbm90c1tpIC0gaiArIDFdOyB9O1xuICBjb25zdCByaWdodCA9IChpOiBudW1iZXIsIGo6IG51bWJlcikgPT4geyByZXR1cm4ga25vdHNbaSArIGpdIC0gdTsgfTtcbiAgZm9yIChsZXQgaiA9IDE7IGogPD0gcDsgaisrKSB7XG4gICAgbGV0IHNhdmVkID0gMDtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IGo7IHIrKykge1xuICAgICAgY29uc3QgdGVtcCA9IGZ1bmNzW3JdIC8gKHJpZ2h0KGksIHIgKyAxKSArIGxlZnQoaSwgaiAtIHIpKTtcbiAgICAgIGZ1bmNzW3JdID0gc2F2ZWQgKyByaWdodChpLCByICsgMSkgKiB0ZW1wO1xuICAgICAgc2F2ZWQgPSBsZWZ0KGksIGogLSByKSAqIHRlbXA7XG4gICAgfVxuICAgIGZ1bmNzLnB1c2goc2F2ZWQpO1xuICB9XG4gIHJldHVybiBmdW5jcztcbn1cblxuXG5leHBvcnQgY29uc3QgZ2VuZXJpY0tub3RWZWN0b3IgPSBmdW5jdGlvbihwb2ludENvdW50OiBudW1iZXIsIGRlZ3JlZTogbnVtYmVyKTogbnVtYmVyW10ge1xuICBjb25zdCByZXM6IG51bWJlcltdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDw9IGRlZ3JlZTsgaSsrKSByZXMucHVzaCgwKTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludENvdW50IC0gZGVncmVlOyBpKyspICByZXMucHVzaChpKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZGVncmVlOyBpKyspIHJlcy5wdXNoKHBvaW50Q291bnQgLSBkZWdyZWUpO1xuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgY29uc3QgdG9XZWlnaHRlZENvbnRyb2xQb2ludHMgPSBmdW5jdGlvbihwb2ludHM6IFZlYzNbXSwgd2VpZ2h0cz86IG51bWJlcltdKTogVmVjNFtdIHtcbiAgY29uc3QgcmVzOiBWZWM0W10gPSBbXTtcblxuICBpZiAod2VpZ2h0cykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2VpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgPSBwb2ludHNbaV07XG4gICAgICByZXMucHVzaCh2ZWM0LmNyZWF0ZShcbiAgICAgICAgcG9pbnRbMF0gKiB3ZWlnaHRzW2ldLFxuICAgICAgICBwb2ludFsxXSAqIHdlaWdodHNbaV0sXG4gICAgICAgIHBvaW50WzJdICogd2VpZ2h0c1tpXSxcbiAgICAgICAgd2VpZ2h0c1tpXVxuICAgICAgKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAobGV0IHBvaW50IG9mIHBvaW50cykge1xuICAgICAgcmVzLnB1c2godmVjNC5jcmVhdGUoLi4ucG9pbnQsIDEpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGNvbnN0IGNhbGNCZXppZXJBbHBoYXMgPSBmdW5jdGlvbihzdGFydERlZ3JlZTogbnVtYmVyLCBlbmREZWdyZWU6IG51bWJlcik6IG51bWJlcltdW10ge1xuICBjb25zdCBiZXppZXJBbHBoYXM6IG51bWJlcltdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmREZWdyZWUgKyAxOyBpKyspIHtcbiAgICBjb25zdCB0ZW1wOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3RhcnREZWdyZWUgKyAxOyBqKyspIHtcbiAgICAgIHRlbXAucHVzaCgwKTtcbiAgICB9XG4gICAgYmV6aWVyQWxwaGFzLnB1c2godGVtcCk7XG4gIH1cbiAgYmV6aWVyQWxwaGFzWzBdWzBdID0gYmV6aWVyQWxwaGFzW2VuZERlZ3JlZV1bc3RhcnREZWdyZWVdID0gMTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gTWF0aC5mbG9vcihlbmREZWdyZWUgLyAyKTsgaSsrKSB7XG4gICAgY29uc3QgaW52OiBudW1iZXIgPSAxIC8gYmluKGVuZERlZ3JlZSwgaSk7XG4gICAgY29uc3QgbXBpOiBudW1iZXIgPSBNYXRoLm1pbihzdGFydERlZ3JlZSwgaSk7XG4gICAgZm9yIChsZXQgaiA9IE1hdGgubWF4KDAsIGkgLSBlbmREZWdyZWUgKyBzdGFydERlZ3JlZSk7IGogPD0gbXBpOyBqKyspXG4gICAgICBiZXppZXJBbHBoYXNbaV1bal0gPSBpbnYgKiBiaW4oc3RhcnREZWdyZWUsIGopICogYmluKGVuZERlZ3JlZSAtIHN0YXJ0RGVncmVlLCBpIC0gaik7XG5cbiAgfVxuICBmb3IgKGxldCBpID0gTWF0aC5mbG9vcihlbmREZWdyZWUgLyAyKSArIDE7IGkgPD0gZW5kRGVncmVlIC0gMTsgaSsrKSB7XG4gICAgY29uc3QgbXBpOiBudW1iZXIgPSBNYXRoLm1pbihzdGFydERlZ3JlZSwgaSk7XG4gICAgZm9yIChsZXQgaiA9IE1hdGgubWF4KDAsIGkgLSBlbmREZWdyZWUgKyBzdGFydERlZ3JlZSk7IGogPD0gbXBpOyBqKyspXG4gICAgICBiZXppZXJBbHBoYXNbaV1bal0gPSBiZXppZXJBbHBoYXNbZW5kRGVncmVlIC0gaV1bc3RhcnREZWdyZWUgLSBqXTtcbiAgfVxuICByZXR1cm4gYmV6aWVyQWxwaGFzO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/utils.ts\n");

/***/ }),

/***/ "./src/geometry/plane.ts":
/*!*******************************!*\
  !*** ./src/geometry/plane.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Plane: () => (/* binding */ Plane)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n\nclass Plane {\n    constructor(origin, normal) {\n        this.origin = origin;\n        this.normal = normal;\n        this.normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.normalize(this.normal);\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getNormal() {\n        return this.normal;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvcGxhbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFHakMsTUFBTSxLQUFLO0lBRWQsWUFDWSxNQUFZLEVBQ1osTUFBWTtRQURaLFdBQU0sR0FBTixNQUFNLENBQU07UUFDWixXQUFNLEdBQU4sTUFBTSxDQUFNO1FBRXBCLElBQUksQ0FBQyxNQUFNLEdBQUcsNkNBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFTSxTQUFTO1FBQ1osT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxTQUFTO1FBQ1osT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3ZCLENBQUM7Q0FFSiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L3BsYW5lLnRzPzg2M2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiXG5cblxuZXhwb3J0IGNsYXNzIFBsYW5lIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIG9yaWdpbjogVmVjMyxcbiAgICAgICAgcHJpdmF0ZSBub3JtYWw6IFZlYzNcbiAgICApIHtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSB2ZWMzLm5vcm1hbGl6ZSh0aGlzLm5vcm1hbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE9yaWdpbigpOiBWZWMzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROb3JtYWwoKTogVmVjMyB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbDtcbiAgICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/plane.ts\n");

/***/ }),

/***/ "./src/geometry/points.ts":
/*!********************************!*\
  !*** ./src/geometry/points.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Points: () => (/* binding */ Points)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _instancedMesh__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./instancedMesh */ \"./src/geometry/instancedMesh.ts\");\n\n\n\n\nconst unitPointVerts = [\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(1, 0, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 1, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 1),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(-1, 0, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, -1, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, -1),\n];\nconst unitPointIndices = [\n    0, 1, 2,\n    0, 2, 4,\n    0, 4, 5,\n    0, 5, 1,\n    3, 1, 5,\n    3, 5, 4,\n    3, 4, 2,\n    3, 2, 1,\n];\n// use instanced mesh\nclass Points extends _geometry__WEBPACK_IMPORTED_MODULE_0__.Geometry {\n    constructor(parent, points, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.identity(), material = null) {\n        super(parent, model, material);\n        this.instancedMesh = null;\n        this.update(points);\n    }\n    update(points) {\n        if (this.instancedMesh)\n            this.instancedMesh.destroy();\n        const transforms = [];\n        for (let i = 0; i < points.length; i++) {\n            const pointXZY = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(points[i][0], points[i][2], points[i][1]);\n            var translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.translate(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.identity(), pointXZY);\n            var scale = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.identity(), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0.01, 0.01, 0.01));\n            // make sure point scale is not affected by model scale\n            var modelScale = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.scaling(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.getScaling(this.getModel()));\n            var transform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.multiply(translation, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.multiply(scale, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.inverse(modelScale)));\n            transforms.push(transform);\n        }\n        this.instancedMesh = new _instancedMesh__WEBPACK_IMPORTED_MODULE_2__.InstancedMesh(this, unitPointVerts, unitPointVerts, unitPointIndices, transforms);\n    }\n    delete() {\n        this.instancedMesh.destroy();\n    }\n    getBoundingBox() {\n        return this.instancedMesh.getBoundingBox();\n    }\n    intersect(ray) {\n        const objectSpaceRay = _ray__WEBPACK_IMPORTED_MODULE_1__.Ray.transform(ray, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.inverse(this.getModel()));\n        return this.instancedMesh.intersect(objectSpaceRay);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxDQUN6QixDQUNGLENBQUM7WUFFRixVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQzVCO1FBRUQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLHlEQUFhLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDN0csQ0FBQztJQUVNLE1BQU07UUFDWCxJQUFJLENBQUMsYUFBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFHZSxjQUFjO1FBQzVCLE9BQU8sSUFBSSxDQUFDLGFBQWMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUM5QyxDQUFDO0lBQ2UsU0FBUyxDQUFDLEdBQVE7UUFDaEMsTUFBTSxjQUFjLEdBQVEscUNBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLDZDQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUUsT0FBTyxJQUFJLENBQUMsYUFBYyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUN2RCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9wb2ludHMudHM/ZDNlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBNYXRlcmlhbE5hbWUgfSBmcm9tIFwiLi4vbWF0ZXJpYWxzL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcbmltcG9ydCB7IEluc3RhbmNlZE1lc2ggfSBmcm9tIFwiLi9pbnN0YW5jZWRNZXNoXCI7XG5cblxuY29uc3QgdW5pdFBvaW50VmVydHM6IFZlYzNbXSA9IFtcbiAgdmVjMy5jcmVhdGUoMSwgMCwgMCksXG4gIHZlYzMuY3JlYXRlKDAsIDEsIDApLFxuICB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSxcbiAgdmVjMy5jcmVhdGUoLTEsIDAsIDApLFxuICB2ZWMzLmNyZWF0ZSgwLCAtMSwgMCksXG4gIHZlYzMuY3JlYXRlKDAsIDAsIC0xKSxcbl07XG5cbmNvbnN0IHVuaXRQb2ludEluZGljZXM6IG51bWJlcltdID0gW1xuICAwLCAxLCAyLFxuICAwLCAyLCA0LFxuICAwLCA0LCA1LFxuICAwLCA1LCAxLFxuXG4gIDMsIDEsIDUsXG4gIDMsIDUsIDQsXG4gIDMsIDQsIDIsXG4gIDMsIDIsIDEsXG5dXG5cbi8vIHVzZSBpbnN0YW5jZWQgbWVzaFxuZXhwb3J0IGNsYXNzIFBvaW50cyBleHRlbmRzIEdlb21ldHJ5IHtcblxuICBwcml2YXRlIGluc3RhbmNlZE1lc2g6IEluc3RhbmNlZE1lc2ggfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsLFxuICAgIHBvaW50czogVmVjM1tdLFxuICAgIG1vZGVsOiBNYXQ0ID0gbWF0NC5pZGVudGl0eSgpLFxuICAgIG1hdGVyaWFsOiBNYXRlcmlhbE5hbWUgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG4gICAgdGhpcy5pbnN0YW5jZWRNZXNoID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZShwb2ludHMpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGUocG9pbnRzOiBWZWMzW10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pbnN0YW5jZWRNZXNoKSB0aGlzLmluc3RhbmNlZE1lc2guZGVzdHJveSgpO1xuXG4gICAgY29uc3QgdHJhbnNmb3JtczogTWF0NFtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgY29uc3QgcG9pbnRYWlk6IFZlYzMgPSB2ZWMzLmNyZWF0ZShwb2ludHNbaV1bMF0sIHBvaW50c1tpXVsyXSwgcG9pbnRzW2ldWzFdKTtcbiAgICAgIHZhciB0cmFuc2xhdGlvbjogTWF0NCA9IG1hdDQudHJhbnNsYXRlKG1hdDQuaWRlbnRpdHkoKSwgcG9pbnRYWlkpO1xuXG4gICAgICB2YXIgc2NhbGU6IE1hdDQgPSBtYXQ0LnNjYWxlKG1hdDQuaWRlbnRpdHkoKSwgdmVjMy5jcmVhdGUoMC4wMSwgMC4wMSwgMC4wMSkpO1xuXG4gICAgICAvLyBtYWtlIHN1cmUgcG9pbnQgc2NhbGUgaXMgbm90IGFmZmVjdGVkIGJ5IG1vZGVsIHNjYWxlXG4gICAgICB2YXIgbW9kZWxTY2FsZTogTWF0NCA9IG1hdDQuc2NhbGluZyhtYXQ0LmdldFNjYWxpbmcodGhpcy5nZXRNb2RlbCgpKSk7XG5cbiAgICAgIHZhciB0cmFuc2Zvcm06IE1hdDQgPSBtYXQ0Lm11bHRpcGx5KFxuICAgICAgICB0cmFuc2xhdGlvbixcbiAgICAgICAgbWF0NC5tdWx0aXBseShcbiAgICAgICAgICBzY2FsZSxcbiAgICAgICAgICBtYXQ0LmludmVyc2UobW9kZWxTY2FsZSlcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgdHJhbnNmb3Jtcy5wdXNoKHRyYW5zZm9ybSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbnN0YW5jZWRNZXNoID0gbmV3IEluc3RhbmNlZE1lc2godGhpcywgdW5pdFBvaW50VmVydHMsIHVuaXRQb2ludFZlcnRzLCB1bml0UG9pbnRJbmRpY2VzLCB0cmFuc2Zvcm1zKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUoKTogdm9pZCB7XG4gICAgdGhpcy5pbnN0YW5jZWRNZXNoIS5kZXN0cm95KCk7XG4gIH1cblxuXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VkTWVzaCEuZ2V0Qm91bmRpbmdCb3goKTtcbiAgfVxuICBwdWJsaWMgb3ZlcnJpZGUgaW50ZXJzZWN0KHJheTogUmF5KTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3Qgb2JqZWN0U3BhY2VSYXk6IFJheSA9IFJheS50cmFuc2Zvcm0ocmF5LCBtYXQ0LmludmVyc2UodGhpcy5nZXRNb2RlbCgpKSk7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VkTWVzaCEuaW50ZXJzZWN0KG9iamVjdFNwYWNlUmF5KTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/points.ts\n");

/***/ }),

/***/ "./src/geometry/polyLine.ts":
/*!**********************************!*\
  !*** ./src/geometry/polyLine.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PolyLine: () => (/* binding */ PolyLine)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lineBoundingBoxHeirarchy */ \"./src/geometry/lineBoundingBoxHeirarchy.ts\");\n\n\n\n\n\n\nclass PolyLine extends _geometry__WEBPACK_IMPORTED_MODULE_3__.Geometry {\n    constructor(parent, points, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.identity(), material = null) {\n        super(parent, model, material);\n        this.points = points;\n        this.renderLines = 0;\n        this.update();\n    }\n    intersect(ray) {\n        return this.boundingBoxHeirarchy.almostIntersect(ray, this.points, 3);\n    }\n    getBoundingBox() {\n        return this.boundingBox;\n    }\n    getSegmentCount() {\n        return this.points.length - 1;\n    }\n    updateLastPoint(point) {\n        this.points[this.points.length - 1] = point;\n        this.update();\n    }\n    removeLastPoint() {\n        this.points.pop();\n        this.update();\n    }\n    addPoint(point) {\n        this.points.push(point);\n        this.update();\n    }\n    delete() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n    }\n    update() {\n        const verts = [];\n        const indices = [];\n        for (let i = 0; i < this.points.length; i++) {\n            verts.push(...this.points[i], 1.0);\n            indices.push(i, i + 1);\n        }\n        indices.pop();\n        indices.pop();\n        if (this.renderLines)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n        this.renderLines = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(new _render_renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines(this, new Float32Array(verts), new Int32Array(indices), this.getModel()));\n        this.updateBoundingBox();\n        this.boundingBoxHeirarchy = new _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_4__.LineBoundingBoxHeirarchy(this.points, indices);\n    }\n    updateBoundingBox() {\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_2__.BoundingBox();\n        const model = this.getModel();\n        this.points.forEach((point) => {\n            this.boundingBox.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.transformMat4(point, model));\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7SUFDakYsQ0FBQztJQUVPLGlCQUFpQjtRQUN2QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkscURBQVcsRUFBRSxDQUFDO1FBQ3JDLE1BQU0sS0FBSyxHQUFTLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNwQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQVcsRUFBRSxFQUFFO1lBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLDZDQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzdELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvcG9seUxpbmUudHM/YTFmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJlbmRlckxpbmVzIH0gZnJvbSBcIi4uL3JlbmRlci9yZW5kZXJMaW5lc1wiO1xuaW1wb3J0IHsgUmVuZGVySUQgfSBmcm9tIFwiLi4vc2NlbmUvc2NlbmVcIjtcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSBcIi4vYm91bmRpbmdCb3hcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSB9IGZyb20gXCIuL2xpbmVCb3VuZGluZ0JveEhlaXJhcmNoeVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cblxuZXhwb3J0IGNsYXNzIFBvbHlMaW5lIGV4dGVuZHMgR2VvbWV0cnkge1xuXG4gIHByaXZhdGUgcmVuZGVyTGluZXMhOiBSZW5kZXJJRDtcbiAgcHJpdmF0ZSBib3VuZGluZ0JveCE6IEJvdW5kaW5nQm94O1xuICBwcml2YXRlIGJvdW5kaW5nQm94SGVpcmFyY2h5ITogTGluZUJvdW5kaW5nQm94SGVpcmFyY2h5O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsLFxuICAgIHByaXZhdGUgcG9pbnRzOiBWZWMzW10sXG4gICAgbW9kZWw6IE1hdDQgPSBtYXQ0LmlkZW50aXR5KCksXG4gICAgbWF0ZXJpYWw6IE1hdGVyaWFsTmFtZSB8IG51bGwgPSBudWxsXG4gICkge1xuICAgIHN1cGVyKHBhcmVudCwgbW9kZWwsIG1hdGVyaWFsKTtcbiAgICB0aGlzLnJlbmRlckxpbmVzID0gMDtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdChyYXk6IFJheSk6IG51bWJlciB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5LmFsbW9zdEludGVyc2VjdChyYXksIHRoaXMucG9pbnRzLCAzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgcmV0dXJuIHRoaXMuYm91bmRpbmdCb3g7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2VnbWVudENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucG9pbnRzLmxlbmd0aCAtIDE7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlTGFzdFBvaW50KHBvaW50OiBWZWMzKTogdm9pZCB7XG4gICAgdGhpcy5wb2ludHNbdGhpcy5wb2ludHMubGVuZ3RoIC0gMV0gPSBwb2ludDtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUxhc3RQb2ludCgpOiB2b2lkIHtcbiAgICB0aGlzLnBvaW50cy5wb3AoKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIGFkZFBvaW50KHBvaW50OiBWZWMzKTogdm9pZCB7XG4gICAgdGhpcy5wb2ludHMucHVzaChwb2ludCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUoKTogdm9pZCB7XG4gICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5yZW1vdmVMaW5lcyh0aGlzLnJlbmRlckxpbmVzKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlKCk6IHZvaWQge1xuXG4gICAgY29uc3QgdmVydHM6IG51bWJlcltdID0gW107XG4gICAgY29uc3QgaW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2ZXJ0cy5wdXNoKC4uLnRoaXMucG9pbnRzW2ldLCAxLjApO1xuICAgICAgaW5kaWNlcy5wdXNoKGksIGkgKyAxKTtcbiAgICB9XG4gICAgaW5kaWNlcy5wb3AoKTsgaW5kaWNlcy5wb3AoKTtcblxuICAgIGlmICh0aGlzLnJlbmRlckxpbmVzKSBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUxpbmVzKHRoaXMucmVuZGVyTGluZXMpO1xuICAgIHRoaXMucmVuZGVyTGluZXMgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZFJlbmRlckxpbmVzKG5ldyBSZW5kZXJMaW5lcyhcbiAgICAgIHRoaXMsXG4gICAgICBuZXcgRmxvYXQzMkFycmF5KHZlcnRzKSxcbiAgICAgIG5ldyBJbnQzMkFycmF5KGluZGljZXMpLFxuICAgICAgdGhpcy5nZXRNb2RlbCgpLFxuICAgICkpO1xuXG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuICAgIHRoaXMuYm91bmRpbmdCb3hIZWlyYXJjaHkgPSBuZXcgTGluZUJvdW5kaW5nQm94SGVpcmFyY2h5KHRoaXMucG9pbnRzLCBpbmRpY2VzKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQm91bmRpbmdCb3goKTogdm9pZCB7XG4gICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgIGNvbnN0IG1vZGVsOiBNYXQ0ID0gdGhpcy5nZXRNb2RlbCgpO1xuICAgIHRoaXMucG9pbnRzLmZvckVhY2goKHBvaW50OiBWZWMzKSA9PiB7XG4gICAgICB0aGlzLmJvdW5kaW5nQm94LmFkZFZlYzModmVjMy50cmFuc2Zvcm1NYXQ0KHBvaW50LCBtb2RlbCkpO1xuICAgIH0pO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/polyLine.ts\n");

/***/ }),

/***/ "./src/geometry/ray.ts":
/*!*****************************!*\
  !*** ./src/geometry/ray.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ray: () => (/* binding */ Ray)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plane */ \"./src/geometry/plane.ts\");\n\n\n\nclass Ray {\n    constructor(origin, direction) {\n        this.origin = origin;\n        this.direction = direction;\n        this.direction = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.normalize(this.direction);\n    }\n    print() {\n        console.log(`RAY: origin: ${this.origin.toString()}, direction: ${this.direction.map((n) => {\n            return Math.round(n * 100);\n        }).toString()}`);\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getDirection() {\n        return this.direction;\n    }\n    at(time) {\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(this.origin, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(this.direction, time));\n    }\n    //todo make sure res is positive\n    intersectPlane(plane, allowNegative = false) {\n        const numerator = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(plane.getOrigin(), this.origin), plane.getNormal());\n        const denominator = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(this.direction, plane.getNormal());\n        if (denominator === 0) { // parallel case\n            return null;\n        }\n        const t = numerator / denominator;\n        if (allowNegative)\n            return t;\n        if (t <= 0)\n            return null;\n        return t;\n    }\n    almostIntersectBoundingBox(bb, pixels) {\n        var _a, _b, _c, _d, _e, _f;\n        const dxMin = Math.abs(this.origin[0] - bb.getXMin());\n        const dyMin = Math.abs(this.origin[1] - bb.getYMin());\n        const dzMin = Math.abs(this.origin[2] - bb.getZMin());\n        const dxMax = Math.abs(this.origin[0] - bb.getXMax());\n        const dyMax = Math.abs(this.origin[1] - bb.getYMax());\n        const dzMax = Math.abs(this.origin[2] - bb.getZMax());\n        const farthest = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(dxMin < dxMax ? bb.getXMax() : bb.getXMin(), dyMin < dyMax ? bb.getYMax() : bb.getYMin(), dzMin < dzMax ? bb.getZMax() : bb.getZMin());\n        const dist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.distance(this.origin, farthest);\n        const delta = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().pixelSizeAtDist(dist) * pixels;\n        const min = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(bb.getXMin() - delta, bb.getYMin() - delta, bb.getZMin() - delta);\n        const max = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(bb.getXMax() - delta, bb.getYMax() - delta, bb.getZMax() - delta);\n        if (this.direction[0] < 0)\n            [min[0], max[0]] = [max[0], min[0]];\n        if (this.direction[1] < 0)\n            [min[1], max[1]] = [max[1], min[1]];\n        if (this.direction[2] < 0)\n            [min[2], max[2]] = [max[2], min[2]];\n        var xMin = (_a = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(1, 0, 0)), true)) !== null && _a !== void 0 ? _a : -Infinity;\n        var yMin = (_b = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 1, 0)), true)) !== null && _b !== void 0 ? _b : -Infinity;\n        var zMin = (_c = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 0, 1)), true)) !== null && _c !== void 0 ? _c : -Infinity;\n        var xMax = (_d = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(1, 0, 0)), true)) !== null && _d !== void 0 ? _d : Infinity;\n        var yMax = (_e = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 1, 0)), true)) !== null && _e !== void 0 ? _e : Infinity;\n        var zMax = (_f = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 0, 1)), true)) !== null && _f !== void 0 ? _f : Infinity;\n        const end = Math.min(xMax, Math.min(yMax, zMax));\n        const start = Math.max(xMin, Math.max(yMin, zMin));\n        if (end < 0 || start > end)\n            return null;\n        return Math.max(start, 0);\n    }\n    intersectBoundingBox(bb) {\n        var _a, _b, _c, _d, _e, _f;\n        const min = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(bb.getXMin(), bb.getYMin(), bb.getZMin());\n        const max = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(bb.getXMax(), bb.getYMax(), bb.getZMax());\n        if (this.direction[0] < 0)\n            [min[0], max[0]] = [max[0], min[0]];\n        if (this.direction[1] < 0)\n            [min[1], max[1]] = [max[1], min[1]];\n        if (this.direction[2] < 0)\n            [min[2], max[2]] = [max[2], min[2]];\n        var xMin = (_a = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(1, 0, 0)), true)) !== null && _a !== void 0 ? _a : -Infinity;\n        var yMin = (_b = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 1, 0)), true)) !== null && _b !== void 0 ? _b : -Infinity;\n        var zMin = (_c = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 0, 1)), true)) !== null && _c !== void 0 ? _c : -Infinity;\n        var xMax = (_d = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(1, 0, 0)), true)) !== null && _d !== void 0 ? _d : Infinity;\n        var yMax = (_e = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 1, 0)), true)) !== null && _e !== void 0 ? _e : Infinity;\n        var zMax = (_f = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 0, 1)), true)) !== null && _f !== void 0 ? _f : Infinity;\n        const end = Math.min(xMax, Math.min(yMax, zMax));\n        const start = Math.max(xMin, Math.max(yMin, zMin));\n        if (end < 0 || start > end)\n            return null;\n        return Math.max(start, 0);\n    }\n    intersectScene(scene) {\n        const intersection = scene.getBoundingBoxHeirarchy().firstIntersection(this);\n        if (intersection !== null)\n            return intersection;\n        return null;\n    }\n    intersectTriangle(p1, p2, p3) {\n        const v12 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(p2, p1);\n        const v13 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(p3, p1);\n        const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.cross(v12, v13));\n        const denom = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(normal, this.direction);\n        if (denom === 0)\n            return null;\n        const t = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(p1, this.origin), normal) / denom;\n        if (t < 0)\n            return null;\n        const point = this.at(t);\n        const d1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(normal, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(point, p1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(p2, p1)));\n        const d2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(normal, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(point, p2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(p3, p2)));\n        const d3 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(normal, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(point, p3), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(p1, p3)));\n        if (\n        // remove one of these lines for back face culling.\n        d1 > 0 && d2 > 0 && d3 > 0 ||\n            d1 < 0 && d2 < 0 && d3 < 0)\n            return t;\n        else\n            return null;\n    }\n    static transform(ray, mat) {\n        return new Ray(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(ray.origin, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.getTranslation(mat)), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.transformMat4(ray.direction, mat));\n    }\n    almostIntersectLine(start, end, pixels) {\n        const a = this.direction;\n        const b = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(end, start));\n        if (a === b) {\n            return null;\n        }\n        const B = start;\n        const A = this.origin;\n        const c = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(B, A);\n        const ab = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(a, b);\n        const ac = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(a, c);\n        const bc = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(b, c);\n        const aa = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(a, a);\n        const bb = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.dot(b, b);\n        const denom = aa * bb - ab * ab;\n        if (denom === 0) {\n            throw new Error(\"You're fired!\");\n            // TODO: figure out whats happening here\n        }\n        const tRay = (ab * bc + ac * bb) / denom;\n        const length = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.distance(start, end);\n        const tLine = Math.min(Math.max((ab * ac - bc * aa) / denom, 0), length);\n        const pRay = this.at(tRay);\n        const pLine = this.at(tLine);\n        const closest = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.distance(pRay, pLine);\n        const distToIntersection = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.distance(this.origin, pRay);\n        const sizeOfPixel = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().pixelSizeAtDist(distToIntersection);\n        if (closest < sizeOfPixel * pixels) {\n            return tRay;\n        }\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxDQUFDLENBQUM7UUFFaEcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFL0QsSUFBSSxJQUFJLEdBQVcsVUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLHlDQUFLLENBQUMsR0FBRyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsbUNBQUksQ0FBQyxRQUFRLENBQUM7UUFDaEcsSUFBSSxJQUFJLEdBQVcsVUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLHlDQUFLLENBQUMsR0FBRyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsbUNBQUksQ0FBQyxRQUFRLENBQUM7UUFDaEcsSUFBSSxJQUFJLEdBQVcsVUFBSSxDQUFDLGNBQWMsQ0FBQyxJ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SUFFZCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9yYXkudHM/ODdhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IENvbnN0cnVjdGlvblBsYW5lIH0gZnJvbSBcIi4uL3NjZW5lL2NvbnN0cnVjdGlvblBsYW5lXCI7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9zY2VuZS9zY2VuZVwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi9wbGFuZVwiO1xuXG5leHBvcnQgY2xhc3MgUmF5IHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG9yaWdpbjogVmVjMyxcbiAgICBwcml2YXRlIGRpcmVjdGlvbjogVmVjM1xuICApIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IHZlYzMubm9ybWFsaXplKHRoaXMuZGlyZWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyBwcmludCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhgUkFZOiBvcmlnaW46ICR7dGhpcy5vcmlnaW4udG9TdHJpbmcoKX0sIGRpcmVjdGlvbjogJHt0aGlzLmRpcmVjdGlvbi5tYXAoKG46IG51bWJlcikgPT4ge1xuICAgICAgcmV0dXJuIE1hdGgucm91bmQobiAqIDEwMCk7XG4gICAgfSkudG9TdHJpbmcoKX1gKTtcbiAgfVxuXG5cblxuICBwdWJsaWMgZ2V0T3JpZ2luKCk6IFZlYzMge1xuICAgIHJldHVybiB0aGlzLm9yaWdpbjtcbiAgfVxuXG4gIHB1YmxpYyBnZXREaXJlY3Rpb24oKTogVmVjMyB7XG4gICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuICB9XG5cbiAgcHVibGljIGF0KHRpbWU6IG51bWJlcik6IFZlYzMge1xuICAgIHJldHVybiB2ZWMzLmFkZCh0aGlzLm9yaWdpbiwgdmVjMy5zY2FsZSh0aGlzLmRpcmVjdGlvbiwgdGltZSkpO1xuICB9XG5cbiAgLy90b2RvIG1ha2Ugc3VyZSByZXMgaXMgcG9zaXRpdmVcbiAgcHVibGljIGludGVyc2VjdFBsYW5lKHBsYW5lOiBQbGFuZSwgYWxsb3dOZWdhdGl2ZTogYm9vbGVhbiA9IGZhbHNlKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3QgbnVtZXJhdG9yOiBudW1iZXIgPSB2ZWMzLmRvdCh2ZWMzLnN1YihwbGFuZS5nZXRPcmlnaW4oKSwgdGhpcy5vcmlnaW4pLCBwbGFuZS5nZXROb3JtYWwoKSk7XG4gICAgY29uc3QgZGVub21pbmF0b3I6IG51bWJlciA9IHZlYzMuZG90KHRoaXMuZGlyZWN0aW9uLCBwbGFuZS5nZXROb3JtYWwoKSk7XG4gICAgaWYgKGRlbm9taW5hdG9yID09PSAwKSB7IC8vIHBhcmFsbGVsIGNhc2VcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0OiBudW1iZXIgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcbiAgICBpZiAoYWxsb3dOZWdhdGl2ZSkgcmV0dXJuIHQ7XG4gICAgaWYgKHQgPD0gMCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHQ7XG4gIH1cblxuICBwdWJsaWMgYWxtb3N0SW50ZXJzZWN0Qm91bmRpbmdCb3goYmI6IEJvdW5kaW5nQm94LCBwaXhlbHM6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuXG4gICAgY29uc3QgZHhNaW4gPSBNYXRoLmFicyh0aGlzLm9yaWdpblswXSAtIGJiLmdldFhNaW4oKSk7XG4gICAgY29uc3QgZHlNaW4gPSBNYXRoLmFicyh0aGlzLm9yaWdpblsxXSAtIGJiLmdldFlNaW4oKSk7XG4gICAgY29uc3QgZHpNaW4gPSBNYXRoLmFicyh0aGlzLm9yaWdpblsyXSAtIGJiLmdldFpNaW4oKSk7XG4gICAgY29uc3QgZHhNYXggPSBNYXRoLmFicyh0aGlzLm9yaWdpblswXSAtIGJiLmdldFhNYXgoKSk7XG4gICAgY29uc3QgZHlNYXggPSBNYXRoLmFicyh0aGlzLm9yaWdpblsxXSAtIGJiLmdldFlNYXgoKSk7XG4gICAgY29uc3QgZHpNYXggPSBNYXRoLmFicyh0aGlzLm9yaWdpblsyXSAtIGJiLmdldFpNYXgoKSk7XG5cbiAgICBjb25zdCBmYXJ0aGVzdDogVmVjMyA9IHZlYzMuY3JlYXRlKFxuICAgICAgZHhNaW4gPCBkeE1heCA/IGJiLmdldFhNYXgoKSA6IGJiLmdldFhNaW4oKSxcbiAgICAgIGR5TWluIDwgZHlNYXggPyBiYi5nZXRZTWF4KCkgOiBiYi5nZXRZTWluKCksXG4gICAgICBkek1pbiA8IGR6TWF4ID8gYmIuZ2V0Wk1heCgpIDogYmIuZ2V0Wk1pbigpLFxuICAgIClcblxuICAgIGNvbnN0IGRpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UodGhpcy5vcmlnaW4sIGZhcnRoZXN0KTtcbiAgICBjb25zdCBkZWx0YTogbnVtYmVyID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5waXhlbFNpemVBdERpc3QoZGlzdCkgKiBwaXhlbHM7XG5cbiAgICBjb25zdCBtaW46IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWluKCkgLSBkZWx0YSwgYmIuZ2V0WU1pbigpIC0gZGVsdGEsIGJiLmdldFpNaW4oKSAtIGRlbHRhKTtcbiAgICBjb25zdCBtYXg6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWF4KCkgLSBkZWx0YSwgYmIuZ2V0WU1heCgpIC0gZGVsdGEsIGJiLmdldFpNYXgoKSAtIGRlbHRhKTtcblxuICAgIGlmICh0aGlzLmRpcmVjdGlvblswXSA8IDApIFttaW5bMF0sIG1heFswXV0gPSBbbWF4WzBdLCBtaW5bMF1dO1xuICAgIGlmICh0aGlzLmRpcmVjdGlvblsxXSA8IDApIFttaW5bMV0sIG1heFsxXV0gPSBbbWF4WzFdLCBtaW5bMV1dO1xuICAgIGlmICh0aGlzLmRpcmVjdGlvblsyXSA8IDApIFttaW5bMl0sIG1heFsyXV0gPSBbbWF4WzJdLCBtaW5bMl1dO1xuXG4gICAgdmFyIHhNaW46IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1pbiwgdmVjMy5jcmVhdGUoMSwgMCwgMCkpLCB0cnVlKSA/PyAtSW5maW5pdHk7XG4gICAgdmFyIHlNaW46IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1pbiwgdmVjMy5jcmVhdGUoMCwgMSwgMCkpLCB0cnVlKSA/PyAtSW5maW5pdHk7XG4gICAgdmFyIHpNaW46IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1pbiwgdmVjMy5jcmVhdGUoMCwgMCwgMSkpLCB0cnVlKSA/PyAtSW5maW5pdHk7XG4gICAgdmFyIHhNYXg6IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1heCwgdmVjMy5jcmVhdGUoMSwgMCwgMCkpLCB0cnVlKSA/PyBJbmZpbml0eTtcbiAgICB2YXIgeU1heDogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWF4LCB2ZWMzLmNyZWF0ZSgwLCAxLCAwKSksIHRydWUpID8/IEluZmluaXR5O1xuICAgIHZhciB6TWF4OiBudW1iZXIgPSB0aGlzLmludGVyc2VjdFBsYW5lKG5ldyBQbGFuZShtYXgsIHZlYzMuY3JlYXRlKDAsIDAsIDEpKSwgdHJ1ZSkgPz8gSW5maW5pdHk7XG5cbiAgICBjb25zdCBlbmQgPSBNYXRoLm1pbih4TWF4LCBNYXRoLm1pbih5TWF4LCB6TWF4KSk7XG4gICAgY29uc3Qgc3RhcnQgPSBNYXRoLm1heCh4TWluLCBNYXRoLm1heCh5TWluLCB6TWluKSk7XG5cbiAgICBpZiAoZW5kIDwgMCB8fCBzdGFydCA+IGVuZCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIE1hdGgubWF4KHN0YXJ0LCAwKTtcblxuXG5cbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3RCb3VuZGluZ0JveChiYjogQm91bmRpbmdCb3gpOiBudW1iZXIgfCBudWxsIHtcblxuICAgIGNvbnN0IG1pbjogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNaW4oKSwgYmIuZ2V0WU1pbigpLCBiYi5nZXRaTWluKCkpO1xuICAgIGNvbnN0IG1heDogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNYXgoKSwgYmIuZ2V0WU1heCgpLCBiYi5nZXRaTWF4KCkpO1xuXG4gICAgaWYgKHRoaXMuZGlyZWN0aW9uWzBdIDwgMCkgW21pblswXSwgbWF4WzBdXSA9IFttYXhbMF0sIG1pblswXV07XG4gICAgaWYgKHRoaXMuZGlyZWN0aW9uWzFdIDwgMCkgW21pblsxXSwgbWF4WzFdXSA9IFttYXhbMV0sIG1pblsxXV07XG4gICAgaWYgKHRoaXMuZGlyZWN0aW9uWzJdIDwgMCkgW21pblsyXSwgbWF4WzJdXSA9IFttYXhbMl0sIG1pblsyXV07XG5cbiAgICB2YXIgeE1pbjogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWluLCB2ZWMzLmNyZWF0ZSgxLCAwLCAwKSksIHRydWUpID8/IC1JbmZpbml0eTtcbiAgICB2YXIgeU1pbjogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWluLCB2ZWMzLmNyZWF0ZSgwLCAxLCAwKSksIHRydWUpID8/IC1JbmZpbml0eTtcbiAgICB2YXIgek1pbjogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWluLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSksIHRydWUpID8/IC1JbmZpbml0eTtcbiAgICB2YXIgeE1heDogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWF4LCB2ZWMzLmNyZWF0ZSgxLCAwLCAwKSksIHRydWUpID8/IEluZmluaXR5O1xuICAgIHZhciB5TWF4OiBudW1iZXIgPSB0aGlzLmludGVyc2VjdFBsYW5lKG5ldyBQbGFuZShtYXgsIHZlYzMuY3JlYXRlKDAsIDEsIDApKSwgdHJ1ZSkgPz8gSW5maW5pdHk7XG4gICAgdmFyIHpNYXg6IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1heCwgdmVjMy5jcmVhdGUoMCwgMCwgMSkpLCB0cnVlKSA/PyBJbmZpbml0eTtcblxuICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKHhNYXgsIE1hdGgubWluKHlNYXgsIHpNYXgpKTtcbiAgICBjb25zdCBzdGFydCA9IE1hdGgubWF4KHhNaW4sIE1hdGgubWF4KHlNaW4sIHpNaW4pKTtcblxuICAgIGlmIChlbmQgPCAwIHx8IHN0YXJ0ID4gZW5kKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gTWF0aC5tYXgoc3RhcnQsIDApO1xuXG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0U2NlbmUoc2NlbmU6IFNjZW5lKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgY29uc3QgaW50ZXJzZWN0aW9uOiBudW1iZXIgfCBudWxsID0gc2NlbmUuZ2V0Qm91bmRpbmdCb3hIZWlyYXJjaHkoKS5maXJzdEludGVyc2VjdGlvbih0aGlzKTtcbiAgICBpZiAoaW50ZXJzZWN0aW9uICE9PSBudWxsKSByZXR1cm4gaW50ZXJzZWN0aW9uO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdFRyaWFuZ2xlKHAxOiBWZWMzLCBwMjogVmVjMywgcDM6IFZlYzMpOiBudW1iZXIgfCBudWxsIHtcblxuICAgIGNvbnN0IHYxMiA9IHZlYzMuc3ViKHAyLCBwMSk7XG4gICAgY29uc3QgdjEzID0gdmVjMy5zdWIocDMsIHAxKTtcbiAgICBjb25zdCBub3JtYWwgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKHYxMiwgdjEzKSk7XG4gICAgY29uc3QgZGVub20gPSB2ZWMzLmRvdChub3JtYWwsIHRoaXMuZGlyZWN0aW9uKTtcbiAgICBpZiAoZGVub20gPT09IDApIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHQgPSB2ZWMzLmRvdCh2ZWMzLnN1YihwMSwgdGhpcy5vcmlnaW4pLCBub3JtYWwpIC8gZGVub207XG4gICAgaWYgKHQgPCAwKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHBvaW50OiBWZWMzID0gdGhpcy5hdCh0KTtcblxuICAgIGNvbnN0IGQxID0gdmVjMy5kb3Qobm9ybWFsLCB2ZWMzLmNyb3NzKHZlYzMuc3ViKHBvaW50LCBwMSksIHZlYzMuc3ViKHAyLCBwMSkpKTtcbiAgICBjb25zdCBkMiA9IHZlYzMuZG90KG5vcm1hbCwgdmVjMy5jcm9zcyh2ZWMzLnN1Yihwb2ludCwgcDIpLCB2ZWMzLnN1YihwMywgcDIpKSk7XG4gICAgY29uc3QgZDMgPSB2ZWMzLmRvdChub3JtYWwsIHZlYzMuY3Jvc3ModmVjMy5zdWIocG9pbnQsIHAzKSwgdmVjMy5zdWIocDEsIHAzKSkpO1xuXG4gICAgaWYgKFxuICAgICAgLy8gcmVtb3ZlIG9uZSBvZiB0aGVzZSBsaW5lcyBmb3IgYmFjayBmYWNlIGN1bGxpbmcuXG4gICAgICBkMSA+IDAgJiYgZDIgPiAwICYmIGQzID4gMCB8fFxuICAgICAgZDEgPCAwICYmIGQyIDwgMCAmJiBkMyA8IDBcbiAgICApIHJldHVybiB0O1xuICAgIGVsc2UgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHRyYW5zZm9ybShyYXk6IFJheSwgbWF0OiBNYXQ0KTogUmF5IHtcbiAgICByZXR1cm4gbmV3IFJheShcbiAgICAgIHZlYzMuYWRkKHJheS5vcmlnaW4sIG1hdDQuZ2V0VHJhbnNsYXRpb24obWF0KSksXG4gICAgICB2ZWMzLnRyYW5zZm9ybU1hdDQocmF5LmRpcmVjdGlvbiwgbWF0KVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgYWxtb3N0SW50ZXJzZWN0TGluZShzdGFydDogVmVjMywgZW5kOiBWZWMzLCBwaXhlbHM6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IGE6IFZlYzMgPSB0aGlzLmRpcmVjdGlvbjtcbiAgICBjb25zdCBiOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5zdWIoZW5kLCBzdGFydCkpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgQjogVmVjMyA9IHN0YXJ0O1xuICAgIGNvbnN0IEE6IFZlYzMgPSB0aGlzLm9yaWdpbjtcbiAgICBjb25zdCBjOiBWZWMzID0gdmVjMy5zdWIoQiwgQSk7XG5cbiAgICBjb25zdCBhYjogbnVtYmVyID0gdmVjMy5kb3QoYSwgYik7XG4gICAgY29uc3QgYWM6IG51bWJlciA9IHZlYzMuZG90KGEsIGMpO1xuICAgIGNvbnN0IGJjOiBudW1iZXIgPSB2ZWMzLmRvdChiLCBjKTtcbiAgICBjb25zdCBhYTogbnVtYmVyID0gdmVjMy5kb3QoYSwgYSk7XG4gICAgY29uc3QgYmI6IG51bWJlciA9IHZlYzMuZG90KGIsIGIpO1xuXG4gICAgY29uc3QgZGVub206IG51bWJlciA9IGFhICogYmIgLSBhYiAqIGFiO1xuICAgIGlmIChkZW5vbSA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91J3JlIGZpcmVkIVwiKTtcbiAgICAgIC8vIFRPRE86IGZpZ3VyZSBvdXQgd2hhdHMgaGFwcGVuaW5nIGhlcmVcbiAgICB9XG5cbiAgICBjb25zdCB0UmF5OiBudW1iZXIgPSAoYWIgKiBiYyArIGFjICogYmIpIC8gZGVub207XG4gICAgY29uc3QgbGVuZ3RoOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHN0YXJ0LCBlbmQpO1xuICAgIGNvbnN0IHRMaW5lOiBudW1iZXIgPSBNYXRoLm1pbihNYXRoLm1heCgoYWIgKiBhYyAtIGJjICogYWEpIC8gZGVub20sIDApLCBsZW5ndGgpO1xuICAgIGNvbnN0IHBSYXk6IFZlYzMgPSB0aGlzLmF0KHRSYXkpO1xuICAgIGNvbnN0IHBMaW5lOiBWZWMzID0gdGhpcy5hdCh0TGluZSk7XG4gICAgY29uc3QgY2xvc2VzdDogbnVtYmVyID0gdmVjMy5kaXN0YW5jZShwUmF5LCBwTGluZSk7XG4gICAgY29uc3QgZGlzdFRvSW50ZXJzZWN0aW9uOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHRoaXMub3JpZ2luLCBwUmF5KTtcbiAgICBjb25zdCBzaXplT2ZQaXhlbDogbnVtYmVyID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5waXhlbFNpemVBdERpc3QoZGlzdFRvSW50ZXJzZWN0aW9uKTtcbiAgICBpZiAoY2xvc2VzdCA8IHNpemVPZlBpeGVsICogcGl4ZWxzKSB7XG4gICAgICByZXR1cm4gdFJheTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG5cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/ray.ts\n");

/***/ }),

/***/ "./src/geometry/sceneBoundingBoxHeirarcy.ts":
/*!**************************************************!*\
  !*** ./src/geometry/sceneBoundingBoxHeirarcy.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneBoundingBoxHeirarchy: () => (/* binding */ SceneBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\nclass BBHNode {\n    constructor(geometry, depth) {\n        this.depth = depth;\n        this.setup(geometry, depth);\n    }\n    setup(geometry, depth) {\n        this.axis = depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        geometry.forEach((geo) => { this.boundingBox.addBoundingBox(geo.getBoundingBox()); });\n        if (geometry.length <= SceneBoundingBoxHeirarchy.MAX_GEOMETRY_PER_LEAF) {\n            // leaf\n            this.geometry = geometry;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            // not a leaf\n            this.geometry = null;\n            const center = this.boundingBox.getCenter()[this.axis];\n            const child1Geometry = [];\n            const child2Geometry = [];\n            geometry.forEach((geo) => {\n                if (geo.getBoundingBox().getCenter()[this.axis] < center) {\n                    child1Geometry.push(geo);\n                }\n                else {\n                    child2Geometry.push(geo);\n                }\n            });\n            this.child1 = new BBHNode(child1Geometry, depth + 1);\n            this.child2 = new BBHNode(child2Geometry, depth + 1);\n        }\n    }\n    print() {\n        var _a, _b;\n        let str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.geometry)\n            str += `${this.geometry.length}geometry`;\n        else\n            str += \"node\";\n        console.log(str);\n        (_a = this.child1) === null || _a === void 0 ? void 0 : _a.print();\n        (_b = this.child2) === null || _b === void 0 ? void 0 : _b.print();\n    }\n    firstPositiveIntersectionTime(ray) {\n        if (ray.intersectBoundingBox(this.boundingBox) === null)\n            return null;\n        if (this.isLeaf()) {\n            var res = null;\n            this.geometry.forEach((geo) => {\n                var t = geo.intersect(ray);\n                if (t !== null && t > 0) {\n                    if (res === null)\n                        res = t;\n                    else\n                        res = Math.min(res, t);\n                }\n            });\n            return res;\n        }\n        else {\n            const t1 = this.child1.firstPositiveIntersectionTime(ray);\n            const t2 = this.child2.firstPositiveIntersectionTime(ray);\n            if (t1 === null)\n                return t2;\n            if (t2 === null)\n                return t1;\n            return Math.min(t1, t2);\n        }\n    }\n    add(geo) {\n        if (this.isLeaf()) {\n            if (this.geometry.length < SceneBoundingBoxHeirarchy.MAX_GEOMETRY_PER_LEAF) {\n                // leaf node with space\n                this.geometry.push(geo);\n            }\n            else {\n                this.geometry.push(geo);\n                this.setup(this.geometry, this.depth);\n            }\n        }\n        else {\n            // non leaf node\n            const nodeCenter = this.boundingBox.getCenter()[this.axis];\n            const geoCenter = geo.getBoundingBox().getCenter()[this.axis];\n            if (geoCenter < nodeCenter) {\n                this.child1.add(geo);\n            }\n            else {\n                this.child2.add(geo);\n            }\n        }\n        this.boundingBox.addBoundingBox(geo.getBoundingBox());\n    }\n    getDepth() {\n        return this.depth;\n    }\n    getChild1() {\n        return this.child1;\n    }\n    getChild2() {\n        return this.child2;\n    }\n    isLeaf() {\n        return this.geometry != null;\n    }\n}\nclass SceneBoundingBoxHeirarchy {\n    constructor(geometry) {\n        this.root = new BBHNode(geometry, 0);\n    }\n    add(geo) {\n        this.root.add(geo);\n    }\n    getRoot() {\n        return this.root;\n    }\n    firstIntersection(ray) {\n        return this.root.firstPositiveIntersectionTime(ray);\n    }\n    print() {\n        console.log(\"==========Scene-BBH===========\");\n        this.root.print();\n    }\n}\nSceneBoundingBoxHeirarchy.MAX_GEOMETRY_PER_LEAF = 5;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvc2NlbmVCb3VuZGluZ0JveEhlaXJhcmN5LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDO0FBSTVDLElBQUssSUFJSjtBQUpELFdBQUssSUFBSTtJQUNQLHlCQUFLO0lBQ0wseUJBQUs7SUFDTCx5QkFBSztBQUNQLENBQUMsRUFKSSxJQUFJLEtBQUosSUFBSSxRQUlSO0FBRUQsTUFBTSxPQUFPO0lBUVgsWUFDRSxRQUFvQixFQUNaLEtBQWE7UUFBYixVQUFLLEdBQUwsS0FBSyxDQUFRO1FBRXJCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFTyxLQUFLLENBQUMsUUFBb0IsRUFBRSxLQUFhO1FBQy9DLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkscURBQVcsRUFBRSxDQUFDO1FBQ3JDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFhLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFaEcsSUFBSSxRQUFRLENBQUMsTUFBTSxJQUFJLHlCQUF5QixDQUFDLHFCQUFxQixFQUFFO1lBQ3RFLE9BQU87WUFDUCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztZQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUNwQjthQUFNO1lBQ0wsYUFBYTtZQUNiLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLE1BQU0sTUFBTSxHQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9ELE1BQU0sY0FBYyxHQUFl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QU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVNLEdBQUcsQ0FBQyxHQUFhO1FBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFFTSxPQUFPO1FBQ1osT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ25CLENBQUM7SUFFTSxpQkFBaUIsQ0FBQyxHQUFRO1FBQy9CLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRU0sS0FBSztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3BCLENBQUM7O0FBdkJzQiwrQ0FBcUIsR0FBRyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9zY2VuZUJvdW5kaW5nQm94SGVpcmFyY3kudHM/Y2VhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcblxuZW51bSBBeGlzIHtcbiAgWCA9IDAsXG4gIFkgPSAxLFxuICBaID0gMixcbn1cblxuY2xhc3MgQkJITm9kZSB7XG5cbiAgcHJpdmF0ZSBheGlzITogQXhpcztcbiAgcHJpdmF0ZSBjaGlsZDEhOiBCQkhOb2RlIHwgbnVsbDtcbiAgcHJpdmF0ZSBjaGlsZDIhOiBCQkhOb2RlIHwgbnVsbDtcbiAgcHJpdmF0ZSBnZW9tZXRyeSE6IEdlb21ldHJ5W10gfCBudWxsO1xuICBwcml2YXRlIGJvdW5kaW5nQm94ITogQm91bmRpbmdCb3g7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgZ2VvbWV0cnk6IEdlb21ldHJ5W10sXG4gICAgcHJpdmF0ZSBkZXB0aDogbnVtYmVyLFxuICApIHtcbiAgICB0aGlzLnNldHVwKGdlb21ldHJ5LCBkZXB0aCk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwKGdlb21ldHJ5OiBHZW9tZXRyeVtdLCBkZXB0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5heGlzID0gZGVwdGggJSAzO1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICBnZW9tZXRyeS5mb3JFYWNoKChnZW86IEdlb21ldHJ5KSA9PiB7IHRoaXMuYm91bmRpbmdCb3guYWRkQm91bmRpbmdCb3goZ2VvLmdldEJvdW5kaW5nQm94KCkpOyB9KTtcblxuICAgIGlmIChnZW9tZXRyeS5sZW5ndGggPD0gU2NlbmVCb3VuZGluZ0JveEhlaXJhcmNoeS5NQVhfR0VPTUVUUllfUEVSX0xFQUYpIHtcbiAgICAgIC8vIGxlYWZcbiAgICAgIHRoaXMuZ2VvbWV0cnkgPSBnZW9tZXRyeTtcbiAgICAgIHRoaXMuY2hpbGQxID0gbnVsbDtcbiAgICAgIHRoaXMuY2hpbGQyID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm90IGEgbGVhZlxuICAgICAgdGhpcy5nZW9tZXRyeSA9IG51bGw7XG4gICAgICBjb25zdCBjZW50ZXI6IG51bWJlciA9IHRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKClbdGhpcy5heGlzXTtcbiAgICAgIGNvbnN0IGNoaWxkMUdlb21ldHJ5OiBHZW9tZXRyeVtdID0gW107XG4gICAgICBjb25zdCBjaGlsZDJHZW9tZXRyeTogR2VvbWV0cnlbXSA9IFtdO1xuICAgICAgZ2VvbWV0cnkuZm9yRWFjaCgoZ2VvOiBHZW9tZXRyeSkgPT4ge1xuICAgICAgICBpZiAoZ2VvLmdldEJvdW5kaW5nQm94KCkuZ2V0Q2VudGVyKClbdGhpcy5heGlzXSA8IGNlbnRlcikge1xuICAgICAgICAgIGNoaWxkMUdlb21ldHJ5LnB1c2goZ2VvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGlsZDJHZW9tZXRyeS5wdXNoKGdlbyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5jaGlsZDEgPSBuZXcgQkJITm9kZShjaGlsZDFHZW9tZXRyeSwgZGVwdGggKyAxKTtcbiAgICAgIHRoaXMuY2hpbGQyID0gbmV3IEJCSE5vZGUoY2hpbGQyR2VvbWV0cnksIGRlcHRoICsgMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGxldCBzdHI6IHN0cmluZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlcHRoOyBpKyspIHN0ciArPSBcIi0+XCI7XG4gICAgaWYgKHRoaXMuZ2VvbWV0cnkpIHN0ciArPSBgJHt0aGlzLmdlb21ldHJ5Lmxlbmd0aH1nZW9tZXRyeWA7XG4gICAgZWxzZSBzdHIgKz0gXCJub2RlXCI7XG4gICAgY29uc29sZS5sb2coc3RyKTtcbiAgICB0aGlzLmNoaWxkMT8ucHJpbnQoKTtcbiAgICB0aGlzLmNoaWxkMj8ucHJpbnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBmaXJzdFBvc2l0aXZlSW50ZXJzZWN0aW9uVGltZShyYXk6IFJheSk6IG51bWJlciB8IG51bGwge1xuXG4gICAgaWYgKHJheS5pbnRlcnNlY3RCb3VuZGluZ0JveCh0aGlzLmJvdW5kaW5nQm94KSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAodGhpcy5pc0xlYWYoKSkge1xuICAgICAgdmFyIHJlczogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgICB0aGlzLmdlb21ldHJ5IS5mb3JFYWNoKChnZW86IEdlb21ldHJ5KSA9PiB7XG4gICAgICAgIHZhciB0OiBudW1iZXIgfCBudWxsID0gZ2VvLmludGVyc2VjdChyYXkpO1xuICAgICAgICBpZiAodCAhPT0gbnVsbCAmJiB0ID4gMCkge1xuICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHJlcyA9IHQ7XG4gICAgICAgICAgZWxzZSByZXMgPSBNYXRoLm1pbihyZXMsIHQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHQxID0gdGhpcy5jaGlsZDEhLmZpcnN0UG9zaXRpdmVJbnRlcnNlY3Rpb25UaW1lKHJheSk7XG4gICAgICBjb25zdCB0MiA9IHRoaXMuY2hpbGQyIS5maXJzdFBvc2l0aXZlSW50ZXJzZWN0aW9uVGltZShyYXkpO1xuICAgICAgaWYgKHQxID09PSBudWxsKSByZXR1cm4gdDI7XG4gICAgICBpZiAodDIgPT09IG51bGwpIHJldHVybiB0MTtcbiAgICAgIHJldHVybiBNYXRoLm1pbih0MSwgdDIpO1xuICAgIH1cblxuICB9XG5cbiAgcHVibGljIGFkZChnZW86IEdlb21ldHJ5KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNMZWFmKCkpIHtcbiAgICAgIGlmICh0aGlzLmdlb21ldHJ5IS5sZW5ndGggPCBTY2VuZUJvdW5kaW5nQm94SGVpcmFyY2h5Lk1BWF9HRU9NRVRSWV9QRVJfTEVBRikge1xuICAgICAgICAvLyBsZWFmIG5vZGUgd2l0aCBzcGFjZVxuICAgICAgICB0aGlzLmdlb21ldHJ5IS5wdXNoKGdlbyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmdlb21ldHJ5IS5wdXNoKGdlbyk7XG4gICAgICAgIHRoaXMuc2V0dXAodGhpcy5nZW9tZXRyeSEsIHRoaXMuZGVwdGgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub24gbGVhZiBub2RlXG4gICAgICBjb25zdCBub2RlQ2VudGVyOiBudW1iZXIgPSB0aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcigpW3RoaXMuYXhpc107XG4gICAgICBjb25zdCBnZW9DZW50ZXI6IG51bWJlciA9IGdlby5nZXRCb3VuZGluZ0JveCgpLmdldENlbnRlcigpW3RoaXMuYXhpc107XG4gICAgICBpZiAoZ2VvQ2VudGVyIDwgbm9kZUNlbnRlcikge1xuICAgICAgICB0aGlzLmNoaWxkMSEuYWRkKGdlbyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoaWxkMiEuYWRkKGdlbyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYm91bmRpbmdCb3guYWRkQm91bmRpbmdCb3goZ2VvLmdldEJvdW5kaW5nQm94KCkpO1xuICB9XG5cbiAgcHVibGljIGdldERlcHRoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZGVwdGg7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2hpbGQxKCk6IEJCSE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZDE7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q2hpbGQyKCk6IEJCSE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZDI7XG4gIH1cblxuICBwdWJsaWMgaXNMZWFmKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdlb21ldHJ5ICE9IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNjZW5lQm91bmRpbmdCb3hIZWlyYXJjaHkge1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX0dFT01FVFJZX1BFUl9MRUFGID0gNTtcblxuICBwcml2YXRlIHJvb3Q6IEJCSE5vZGU7XG5cbiAgY29uc3RydWN0b3IoZ2VvbWV0cnk6IEdlb21ldHJ5W10pIHtcbiAgICB0aGlzLnJvb3QgPSBuZXcgQkJITm9kZShnZW9tZXRyeSwgMCk7XG4gIH1cblxuICBwdWJsaWMgYWRkKGdlbzogR2VvbWV0cnkpOiB2b2lkIHtcbiAgICB0aGlzLnJvb3QuYWRkKGdlbyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Um9vdCgpOiBCQkhOb2RlIHtcbiAgICByZXR1cm4gdGhpcy5yb290O1xuICB9XG5cbiAgcHVibGljIGZpcnN0SW50ZXJzZWN0aW9uKHJheTogUmF5KTogbnVtYmVyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMucm9vdC5maXJzdFBvc2l0aXZlSW50ZXJzZWN0aW9uVGltZShyYXkpO1xuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT09PVNjZW5lLUJCSD09PT09PT09PT09XCIpO1xuICAgIHRoaXMucm9vdC5wcmludCgpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/sceneBoundingBoxHeirarcy.ts\n");

/***/ }),

/***/ "./src/log.ts":
/*!********************!*\
  !*** ./src/log.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Log: () => (/* binding */ Log)\n/* harmony export */ });\nclass Log {\n    constructor() {\n        this.logs = \"<u>LOGS:</u>\";\n    }\n    log(text) {\n        this.logs += \"<br>\" + text;\n    }\n    getLogs() {\n        return this.logs;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbG9nLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFTyxNQUFNLEdBQUc7SUFJZDtRQUNFLElBQUksQ0FBQyxJQUFJLEdBQUcsY0FBYyxDQUFDO0lBQzdCLENBQUM7SUFFTSxHQUFHLENBQUMsSUFBWTtRQUNyQixJQUFJLENBQUMsSUFBSSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDN0IsQ0FBQztJQUVNLE9BQU87UUFDWixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztDQUdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvbG9nLnRzP2RkMzciXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmV4cG9ydCBjbGFzcyBMb2cge1xuXG4gIHByaXZhdGUgbG9nczogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubG9ncyA9IFwiPHU+TE9HUzo8L3U+XCI7XG4gIH1cblxuICBwdWJsaWMgbG9nKHRleHQ6IHN0cmluZykge1xuICAgIHRoaXMubG9ncyArPSBcIjxicj5cIiArIHRleHQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0TG9ncygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxvZ3M7XG4gIH1cblxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/log.ts\n");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cad */ \"./src/cad.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nconst main = function () {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.init();\n        yield _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.run();\n    });\n};\nmain();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUVnQztBQUVoQyxNQUFNLElBQUksR0FBRzs7UUFFVCxNQUFNLDBDQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdEIsTUFBTSwwQ0FBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBRXpCLENBQUM7Q0FBQTtBQUVELElBQUksRUFBRSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvbWFpbi50cz9jZDQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuL2NhZFwiXG5cbmNvbnN0IG1haW4gPSBhc3luYyBmdW5jdGlvbigpIHtcblxuICAgIGF3YWl0IElOU1RBTkNFLmluaXQoKTtcbiAgICBhd2FpdCBJTlNUQU5DRS5ydW4oKTtcblxufVxuXG5tYWluKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ }),

/***/ "./src/materials/material.ts":
/*!***********************************!*\
  !*** ./src/materials/material.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Material: () => (/* binding */ Material)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nclass Material {\n    constructor(name, color) {\n        this.name = name;\n        this.color = color;\n        // regular color\n        this.diffuseColorBuffer = null;\n        this.updateColor();\n    }\n    updateColor() {\n        if (this.color) {\n            this.diffuseColorBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n                label: \"color buffer for material \" + this.name,\n                size: 16,\n                usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n            });\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.diffuseColorBuffer, 0, this.color);\n        }\n        else {\n            this.diffuseColorBuffer = null;\n        }\n    }\n    getColorBuffer() {\n        return this.diffuseColorBuffer;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWF0ZXJpYWxzL21hdGVyaWFsLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQ2tDO0FBSTNCLE1BQU0sUUFBUTtJQUtuQixZQUNTLElBQVksRUFDWixLQUFrQjtRQURsQixTQUFJLEdBQUosSUFBSSxDQUFRO1FBQ1osVUFBSyxHQUFMLEtBQUssQ0FBYTtRQUwzQixnQkFBZ0I7UUFDUix1QkFBa0IsR0FBcUIsSUFBSSxDQUFDO1FBTWxELElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBRU8sV0FBVztRQUNqQixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxZQUFZLENBQUM7Z0JBQ3hFLEtBQUssRUFBRSw0QkFBNEIsR0FBRyxJQUFJLENBQUMsSUFBSTtnQkFDL0MsSUFBSSxFQUFFLEVBQUU7Z0JBQ1IsS0FBSyxFQUFFLGNBQWMsQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDLFFBQVE7YUFDeEQsQ0FBQztZQUNGLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxFQUFnQixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDNUc7YUFBTTtZQUNMLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7U0FDaEM7SUFDSCxDQUFDO0lBRU0sY0FBYztRQUNuQixPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztJQUNqQyxDQUFDO0NBR0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9tYXRlcmlhbHMvbWF0ZXJpYWwudHM/MmYzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcblxuZXhwb3J0IHR5cGUgTWF0ZXJpYWxOYW1lID0gc3RyaW5nO1xuXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWwge1xuXG4gIC8vIHJlZ3VsYXIgY29sb3JcbiAgcHJpdmF0ZSBkaWZmdXNlQ29sb3JCdWZmZXI6IEdQVUJ1ZmZlciB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXG4gICAgcHVibGljIGNvbG9yOiBWZWM0IHwgbnVsbCxcbiAgKSB7XG4gICAgdGhpcy51cGRhdGVDb2xvcigpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDb2xvcigpIHtcbiAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgdGhpcy5kaWZmdXNlQ29sb3JCdWZmZXIgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICAgIGxhYmVsOiBcImNvbG9yIGJ1ZmZlciBmb3IgbWF0ZXJpYWwgXCIgKyB0aGlzLm5hbWUsXG4gICAgICAgIHNpemU6IDE2LFxuICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgICAgfSlcbiAgICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5kaWZmdXNlQ29sb3JCdWZmZXIsIDAsIDxGbG9hdDMyQXJyYXk+dGhpcy5jb2xvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlmZnVzZUNvbG9yQnVmZmVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29sb3JCdWZmZXIoKTogR1BVQnVmZmVyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZGlmZnVzZUNvbG9yQnVmZmVyO1xuICB9XG5cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/materials/material.ts\n");

/***/ }),

/***/ "./src/materials/materialManager.ts":
/*!******************************************!*\
  !*** ./src/materials/materialManager.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MaterialManager: () => (/* binding */ MaterialManager)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./material */ \"./src/materials/material.ts\");\n\n\nclass MaterialManager {\n    constructor() {\n        this.materials = new Map();\n        this.createDefaultMaterial();\n    }\n    createDefaultMaterial() {\n        this.materials.set(\"default\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"default\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.4, 0.4, 0.4, 1.0)));\n        this.materials.set(\"darker grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"darker grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.1, 0.1, 0.1, 1.0)));\n        this.materials.set(\"dark grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"dark grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.3, 0.3, 0.3, 1.0)));\n        this.materials.set(\"lighter grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"lighter grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.9, 0.9, 0.9, 1.0)));\n        this.materials.set(\"light grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"light grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.7, 0.7, 0.7, 1.0)));\n        this.materials.set(\"mid grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"mid grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.5, 0.5, 0.5)));\n        this.materials.set(\"red\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"red\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(1, 0, 0, 1)));\n        this.materials.set(\"green\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"green\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0, 1, 0, 1)));\n        this.materials.set(\"blue\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"blue\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0, 1, 1, 1)));\n    }\n    getDefaultMaterial() {\n        if (!this.materials.has(\"default\"))\n            this.createDefaultMaterial();\n        return this.materials.get(\"default\");\n    }\n    getMaterials() {\n        return this.materials;\n    }\n    addMaterial(name, mat) {\n        this.materials.set(name, mat);\n    }\n    removeMaterial(name) {\n        this.materials.delete(name);\n        if (this.materials.size === 0)\n            this.createDefaultMaterial();\n    }\n    getMaterial(name) {\n        return this.materials.get(name);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTSxjQUFjLENBQUMsSUFBa0I7UUFDdEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUIsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksS0FBSyxDQUFDO1lBQUUsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7SUFDOUQsQ0FBQztJQUVNLFdBQVcsQ0FBQyxJQUFrQjtRQUNuQyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xDLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL21hdGVyaWFscy9tYXRlcmlhbE1hbmFnZXIudHM/NzdmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBNYXRlcmlhbCwgTWF0ZXJpYWxOYW1lIH0gZnJvbSBcIi4vbWF0ZXJpYWxcIjtcblxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsTWFuYWdlciB7XG5cbiAgcHJpdmF0ZSBtYXRlcmlhbHM6IE1hcDxNYXRlcmlhbE5hbWUsIE1hdGVyaWFsPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1hdGVyaWFscyA9IG5ldyBNYXA8TWF0ZXJpYWxOYW1lLCBNYXRlcmlhbD4oKTtcbiAgICB0aGlzLmNyZWF0ZURlZmF1bHRNYXRlcmlhbCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVEZWZhdWx0TWF0ZXJpYWwoKTogdm9pZCB7XG4gICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwiZGVmYXVsdFwiLCBuZXcgTWF0ZXJpYWwoXCJkZWZhdWx0XCIsIHZlYzQuY3JlYXRlKDAuNCwgMC40LCAwLjQsIDEuMCkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJkYXJrZXIgZ3JleVwiLCBuZXcgTWF0ZXJpYWwoXCJkYXJrZXIgZ3JleVwiLCB2ZWM0LmNyZWF0ZSgwLjEsIDAuMSwgMC4xLCAxLjApKSk7XG4gICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwiZGFyayBncmV5XCIsIG5ldyBNYXRlcmlhbChcImRhcmsgZ3JleVwiLCB2ZWM0LmNyZWF0ZSgwLjMsIDAuMywgMC4zLCAxLjApKSk7XG4gICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwibGlnaHRlciBncmV5XCIsIG5ldyBNYXRlcmlhbChcImxpZ2h0ZXIgZ3JleVwiLCB2ZWM0LmNyZWF0ZSgwLjksIDAuOSwgMC45LCAxLjApKSk7XG4gICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwibGlnaHQgZ3JleVwiLCBuZXcgTWF0ZXJpYWwoXCJsaWdodCBncmV5XCIsIHZlYzQuY3JlYXRlKDAuNywgMC43LCAwLjcsIDEuMCkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJtaWQgZ3JleVwiLCBuZXcgTWF0ZXJpYWwoXCJtaWQgZ3JleVwiLCB2ZWM0LmNyZWF0ZSgwLjUsIDAuNSwgMC41KSkpO1xuICAgIHRoaXMubWF0ZXJpYWxzLnNldChcInJlZFwiLCBuZXcgTWF0ZXJpYWwoXCJyZWRcIiwgdmVjNC5jcmVhdGUoMSwgMCwgMCwgMSkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJncmVlblwiLCBuZXcgTWF0ZXJpYWwoXCJncmVlblwiLCB2ZWM0LmNyZWF0ZSgwLCAxLCAwLCAxKSkpO1xuICAgIHRoaXMubWF0ZXJpYWxzLnNldChcImJsdWVcIiwgbmV3IE1hdGVyaWFsKFwiYmx1ZVwiLCB2ZWM0LmNyZWF0ZSgwLCAxLCAxLCAxKSkpO1xuICB9XG5cbiAgcHVibGljIGdldERlZmF1bHRNYXRlcmlhbCgpOiBNYXRlcmlhbCB7XG4gICAgaWYgKCF0aGlzLm1hdGVyaWFscy5oYXMoXCJkZWZhdWx0XCIpKSB0aGlzLmNyZWF0ZURlZmF1bHRNYXRlcmlhbCgpO1xuICAgIHJldHVybiB0aGlzLm1hdGVyaWFscy5nZXQoXCJkZWZhdWx0XCIpITtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNYXRlcmlhbHMoKTogTWFwPE1hdGVyaWFsTmFtZSwgTWF0ZXJpYWw+IHtcbiAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHM7XG4gIH1cblxuICBwdWJsaWMgYWRkTWF0ZXJpYWwobmFtZTogTWF0ZXJpYWxOYW1lLCBtYXQ6IE1hdGVyaWFsKSB7XG4gICAgdGhpcy5tYXRlcmlhbHMuc2V0KG5hbWUsIG1hdCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTWF0ZXJpYWwobmFtZTogTWF0ZXJpYWxOYW1lKTogdm9pZCB7XG4gICAgdGhpcy5tYXRlcmlhbHMuZGVsZXRlKG5hbWUpO1xuICAgIGlmICh0aGlzLm1hdGVyaWFscy5zaXplID09PSAwKSB0aGlzLmNyZWF0ZURlZmF1bHRNYXRlcmlhbCgpO1xuICB9XG5cbiAgcHVibGljIGdldE1hdGVyaWFsKG5hbWU6IE1hdGVyaWFsTmFtZSk6IE1hdGVyaWFsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHMuZ2V0KG5hbWUpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/materials/materialManager.ts\n");

/***/ }),

/***/ "./src/mode.ts":
/*!*********************!*\
  !*** ./src/mode.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperatingMode: () => (/* binding */ OperatingMode)\n/* harmony export */ });\nvar OperatingMode;\n(function (OperatingMode) {\n    OperatingMode[OperatingMode[\"Navigation\"] = 0] = \"Navigation\";\n    OperatingMode[OperatingMode[\"Command\"] = 1] = \"Command\";\n})(OperatingMode || (OperatingMode = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUEsSUFBWSxhQUdYO0FBSEQsV0FBWSxhQUFhO0lBQ3JCLDZEQUFVO0lBQ1YsdURBQU87QUFDWCxDQUFDLEVBSFcsYUFBYSxLQUFiLGFBQWEsUUFHeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9tb2RlLnRzP2RlMGQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmV4cG9ydCBlbnVtIE9wZXJhdGluZ01vZGUge1xuICAgIE5hdmlnYXRpb24sIC8vIEtleXMgY29udHJvbCBjYW1lcmEgbW90aW9uXG4gICAgQ29tbWFuZCwgLy8gS2V5cyBjb250cm9sIGNvbW1hbmQgaW5wdXRcbn1cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/mode.ts\n");

/***/ }),

/***/ "./src/render/flags.ts":
/*!*****************************!*\
  !*** ./src/render/flags.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CONSTANT_SCREEN_SIZE_BIT: () => (/* binding */ CONSTANT_SCREEN_SIZE_BIT),\n/* harmony export */   HOVER_BIT: () => (/* binding */ HOVER_BIT),\n/* harmony export */   SELECTED_BIT: () => (/* binding */ SELECTED_BIT)\n/* harmony export */ });\nconst CONSTANT_SCREEN_SIZE_BIT = 1 << 0;\nconst HOVER_BIT = 1 << 1;\nconst SELECTED_BIT = 1 << 2;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL2ZsYWdzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUdPLE1BQU0sd0JBQXdCLEdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoRCxNQUFNLFNBQVMsR0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLE1BQU0sWUFBWSxHQUFXLENBQUMsSUFBSSxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvZmxhZ3MudHM/NDczZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuXG5leHBvcnQgY29uc3QgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUOiBudW1iZXIgPSAxIDw8IDA7XG5leHBvcnQgY29uc3QgSE9WRVJfQklUOiBudW1iZXIgPSAxIDw8IDE7XG5leHBvcnQgY29uc3QgU0VMRUNURURfQklUOiBudW1iZXIgPSAxIDw8IDI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/flags.ts\n");

/***/ }),

/***/ "./src/render/globalUniforms.ts":
/*!**************************************!*\
  !*** ./src/render/globalUniforms.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalUniforms: () => (/* binding */ GlobalUniforms)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nvar ShadingMode;\n(function (ShadingMode) {\n    ShadingMode[ShadingMode[\"Default\"] = 0] = \"Default\";\n    ShadingMode[ShadingMode[\"Ghosted\"] = 1] = \"Ghosted\";\n})(ShadingMode || (ShadingMode = {}));\nclass GlobalUniforms {\n    constructor(device) {\n        this.device = device;\n        this.cameraPositionBuffer = this.device.createBuffer({\n            label: \"camera position buffer\",\n            size: 12,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.cameraViewProjBuffer = this.device.createBuffer({\n            label: \"camera view proj buffer\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.layout = this.device.createBindGroupLayout({\n            label: \"global uniforms layout\",\n            entries: [\n                {\n                    binding: 0,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                },\n                {\n                    binding: 1,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                }\n            ]\n        });\n        this.bindGroup = this.device.createBindGroup({\n            label: \"global uniforms\",\n            layout: this.layout,\n            entries: [\n                {\n                    binding: 0,\n                    resource: { buffer: this.cameraPositionBuffer },\n                },\n                {\n                    binding: 1,\n                    resource: { buffer: this.cameraViewProjBuffer },\n                }\n            ]\n        });\n    }\n    getLayout() {\n        return this.layout;\n    }\n    tick() {\n        this.device.queue.writeBuffer(this.cameraPositionBuffer, 0, _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPosition());\n        this.device.queue.writeBuffer(this.cameraViewProjBuffer, 0, _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getViewProj());\n    }\n    bind(pass) {\n        pass.setBindGroup(1, this.bindGroup);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL2dsb2JhbFVuaWZvcm1zLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQ2tDO0FBRWxDLElBQUssV0FHSjtBQUhELFdBQUssV0FBVztJQUNkLG1EQUFPO0lBQ1AsbURBQU87QUFDVCxDQUFDLEVBSEksV0FBVyxLQUFYLFdBQVcsUUFHZjtBQUVNLE1BQU0sY0FBYztJQVF6QixZQUNVLE1BQWlCO1FBQWpCLFdBQU0sR0FBTixNQUFNLENBQVc7UUFFekIsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO1lBQ25ELEtBQUssRUFBRSx3QkFBd0I7WUFDL0IsSUFBSSxFQUFFLEVBQUU7WUFDUixLQUFLLEVBQUUsY0FBYyxDQUFDLE9BQU8sR0FBRyxjQUFjLENBQUMsUUFBUTtTQUN4RCxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUM7WUFDbkQsS0FBSyxFQUFFLHlCQUF5QjtZQUNoQyxJQUFJLEVBQUUsRUFBRTtZQUNSLEtBQUssRUFBRSxjQUFjLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxRQUFRO1NBQ3hELENBQUM7UUFDRixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUM7WUFDOUMsS0FBSyxFQUFFLHdCQUF3QjtZQUMvQixPQUFPLEVBQUU7Z0JBQ1A7b0JBQ0UsT0FBTyxFQUFFLENBQUM7b0JBQ1YsVUFBVSxFQUFFLGNBQWMsQ0FBQyxNQUFNO29CQUNqQyxNQUFNLEVBQUUsRUFBRTtpQkFDWDtnQkFDRDtvQkFDRSxPQUFPLEVBQUUsQ0FBQztvQkFDVixVQUFVLEVBQUUsY0FBYyxDQUFDLE1BQU07b0JBQ2pDLE1BQU0sRUFBRSxFQUFFO2lCQUNYO2FBQ0Y7U0FDRixDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDO1lBQzNDLEtBQUssRUFBRSxpQkFBaUI7WUFDeEIsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNO1lBQ25CLE9BQU8sRUFBRTtnQkFDUDtvQkFDRSxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixFQUFFO2lCQUNoRDtnQkFDRDtvQkFDRSxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixFQUFFO2lCQUNoRDthQUNGO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVNLFNBQVM7UUFDZCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUdNLElBQUk7UUFDVCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsRUFBZ0IsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1FBQ3pILElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxFQUFFLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUM3RyxDQUFDO0lBRU0sSUFBSSxDQUFDLElBQTBCO1FBQ3BDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN2QyxDQUFDO0NBSUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvZ2xvYmFsVW5pZm9ybXMudHM/N2JjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMzLCBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcblxuZW51bSBTaGFkaW5nTW9kZSB7XG4gIERlZmF1bHQsXG4gIEdob3N0ZWQsXG59XG5cbmV4cG9ydCBjbGFzcyBHbG9iYWxVbmlmb3JtcyB7XG5cbiAgcHJpdmF0ZSBjYW1lcmFQb3NpdGlvbkJ1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIGNhbWVyYVZpZXdQcm9qQnVmZmVyOiBHUFVCdWZmZXI7XG5cbiAgcHJpdmF0ZSBsYXlvdXQ6IEdQVUJpbmRHcm91cExheW91dDtcbiAgcHJpdmF0ZSBiaW5kR3JvdXA6IEdQVUJpbmRHcm91cDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGRldmljZTogR1BVRGV2aWNlLFxuICApIHtcbiAgICB0aGlzLmNhbWVyYVBvc2l0aW9uQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcImNhbWVyYSBwb3NpdGlvbiBidWZmZXJcIixcbiAgICAgIHNpemU6IDEyLCAvLyAzICogNFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICB0aGlzLmNhbWVyYVZpZXdQcm9qQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcImNhbWVyYSB2aWV3IHByb2ogYnVmZmVyXCIsXG4gICAgICBzaXplOiA2NCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSlcbiAgICB0aGlzLmxheW91dCA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cExheW91dCh7XG4gICAgICBsYWJlbDogXCJnbG9iYWwgdW5pZm9ybXMgbGF5b3V0XCIsXG4gICAgICBlbnRyaWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBiaW5kaW5nOiAwLCAvLyBjYW1lcmEgcG9zXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgIGJ1ZmZlcjoge31cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJpbmRpbmc6IDEsIC8vIGNhbWVyIHZpZXcgcHJvalxuICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLlZFUlRFWCxcbiAgICAgICAgICBidWZmZXI6IHt9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgICB0aGlzLmJpbmRHcm91cCA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICBsYWJlbDogXCJnbG9iYWwgdW5pZm9ybXNcIixcbiAgICAgIGxheW91dDogdGhpcy5sYXlvdXQsXG4gICAgICBlbnRyaWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5jYW1lcmFQb3NpdGlvbkJ1ZmZlciB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYmluZGluZzogMSxcbiAgICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMuY2FtZXJhVmlld1Byb2pCdWZmZXIgfSxcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldExheW91dCgpOiBHUFVCaW5kR3JvdXBMYXlvdXQge1xuICAgIHJldHVybiB0aGlzLmxheW91dDtcbiAgfVxuXG5cbiAgcHVibGljIHRpY2soKTogdm9pZCB7XG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy5jYW1lcmFQb3NpdGlvbkJ1ZmZlciwgMCwgPEZsb2F0MzJBcnJheT5JTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLmdldFBvc2l0aW9uKCkpO1xuICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMuY2FtZXJhVmlld1Byb2pCdWZmZXIsIDAsIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0Vmlld1Byb2ooKSk7XG4gIH1cblxuICBwdWJsaWMgYmluZChwYXNzOiBHUFVSZW5kZXJQYXNzRW5jb2Rlcik6IHZvaWQge1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDEsIHRoaXMuYmluZEdyb3VwKTtcbiAgfVxuXG5cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/globalUniforms.ts\n");

/***/ }),

/***/ "./src/render/pipeline.ts":
/*!********************************!*\
  !*** ./src/render/pipeline.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pipeline: () => (/* binding */ Pipeline),\n/* harmony export */   PipelinePrimitive: () => (/* binding */ PipelinePrimitive)\n/* harmony export */ });\n/* harmony import */ var _renderMesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderMesh */ \"./src/render/renderMesh.ts\");\n/* harmony import */ var _renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _renderPoints__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderPoints */ \"./src/render/renderPoints.ts\");\n\n\n\nvar PipelinePrimitive;\n(function (PipelinePrimitive) {\n    PipelinePrimitive[PipelinePrimitive[\"Triangle\"] = 0] = \"Triangle\";\n    PipelinePrimitive[PipelinePrimitive[\"Line\"] = 1] = \"Line\";\n    PipelinePrimitive[PipelinePrimitive[\"Point\"] = 2] = \"Point\";\n})(PipelinePrimitive || (PipelinePrimitive = {}));\nclass Pipeline {\n    constructor(device, format, layouts, shaderModule, primitive) {\n        const pipelineLayout = device.createPipelineLayout({\n            label: getLabel(primitive) + \" label\",\n            bindGroupLayouts: layouts,\n        });\n        this.gpuPipeline = device.createRenderPipeline({\n            label: getLabel(primitive),\n            primitive: {\n                topology: getTopology(primitive),\n                cullMode: \"none\"\n            },\n            layout: pipelineLayout,\n            depthStencil: {\n                depthWriteEnabled: true,\n                depthCompare: \"less\",\n                format: \"depth24plus\"\n            },\n            vertex: {\n                module: shaderModule,\n                entryPoint: \"vertexMain\",\n                buffers: [getVertexBufferLayout(primitive)]\n            },\n            fragment: {\n                module: shaderModule,\n                entryPoint: \"fragmentMain\",\n                targets: [\n                    {\n                        format: format\n                    }\n                ]\n            },\n            multisample: {\n                count: 4\n            }\n        });\n    }\n    get() {\n        return this.gpuPipeline;\n    }\n}\nfunction getTopology(primitive) {\n    switch (primitive) {\n        case PipelinePrimitive.Triangle: return \"triangle-list\";\n        case PipelinePrimitive.Line: return \"line-list\";\n        case PipelinePrimitive.Point: return \"point-list\";\n        default:\n            console.error(\"unimplemented primitive\");\n            return \"triangle-list\";\n    }\n}\nfunction getVertexBufferLayout(primitive) {\n    switch (primitive) {\n        case PipelinePrimitive.Triangle: return _renderMesh__WEBPACK_IMPORTED_MODULE_0__.RenderMesh.getVertexBufferLayout();\n        case PipelinePrimitive.Line: return _renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines.getVertexBufferLayout();\n        case PipelinePrimitive.Point: return _renderPoints__WEBPACK_IMPORTED_MODULE_2__.RenderPoints.getVertexBufferLayout();\n        default:\n            console.error(\"unimplemented primitive\");\n            return _renderMesh__WEBPACK_IMPORTED_MODULE_0__.RenderMesh.getVertexBufferLayout();\n    }\n}\nfunction getLabel(primitive) {\n    switch (primitive) {\n        case PipelinePrimitive.Triangle: return \"trinagle pipeline\";\n        case PipelinePrimitive.Line: return \"line pipeline\";\n        case PipelinePrimitive.Point: return \"point pipeline\";\n        default: throw new Error(\"not implemented\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sZUFBZSxDQUFDO1FBQ3BELEtBQUssaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxnQkFBZ0IsQ0FBQztRQUN0RCxPQUFPLENBQUMsQ0FBQyxNQUFNLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7S0FDN0M7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3BpcGVsaW5lLnRzP2IzMGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVuZGVyTWVzaCB9IGZyb20gXCIuL3JlbmRlck1lc2hcIlxuaW1wb3J0IHsgUmVuZGVyTGluZXMgfSBmcm9tIFwiLi9yZW5kZXJMaW5lc1wiXG5pbXBvcnQgeyBSZW5kZXJQb2ludHMgfSBmcm9tIFwiLi9yZW5kZXJQb2ludHNcIjtcblxuZXhwb3J0IGVudW0gUGlwZWxpbmVQcmltaXRpdmUge1xuICBUcmlhbmdsZSxcbiAgTGluZSxcbiAgUG9pbnQsXG59XG5cbmV4cG9ydCBjbGFzcyBQaXBlbGluZSB7XG5cblxuICBwcml2YXRlIGdwdVBpcGVsaW5lOiBHUFVSZW5kZXJQaXBlbGluZTtcblxuICBjb25zdHJ1Y3RvcihkZXZpY2U6IEdQVURldmljZSwgZm9ybWF0OiBHUFVUZXh0dXJlRm9ybWF0LCBsYXlvdXRzOiBHUFVCaW5kR3JvdXBMYXlvdXRbXSwgc2hhZGVyTW9kdWxlOiBHUFVTaGFkZXJNb2R1bGUsIHByaW1pdGl2ZTogUGlwZWxpbmVQcmltaXRpdmUpIHtcblxuXG4gICAgY29uc3QgcGlwZWxpbmVMYXlvdXQ6IEdQVVBpcGVsaW5lTGF5b3V0ID0gZGV2aWNlLmNyZWF0ZVBpcGVsaW5lTGF5b3V0KHtcbiAgICAgIGxhYmVsOiBnZXRMYWJlbChwcmltaXRpdmUpICsgXCIgbGFiZWxcIixcbiAgICAgIGJpbmRHcm91cExheW91dHM6IGxheW91dHMsXG4gICAgfSk7XG5cbiAgICB0aGlzLmdwdVBpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZVJlbmRlclBpcGVsaW5lKHtcbiAgICAgIGxhYmVsOiBnZXRMYWJlbChwcmltaXRpdmUpLFxuICAgICAgcHJpbWl0aXZlOiB7XG4gICAgICAgIHRvcG9sb2d5OiBnZXRUb3BvbG9neShwcmltaXRpdmUpLFxuICAgICAgICBjdWxsTW9kZTogXCJub25lXCJcbiAgICAgIH0sXG4gICAgICBsYXlvdXQ6IHBpcGVsaW5lTGF5b3V0LFxuICAgICAgZGVwdGhTdGVuY2lsOiB7XG4gICAgICAgIGRlcHRoV3JpdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICBkZXB0aENvbXBhcmU6IFwibGVzc1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZGVwdGgyNHBsdXNcIlxuICAgICAgfSxcbiAgICAgIHZlcnRleDoge1xuICAgICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgICAgZW50cnlQb2ludDogXCJ2ZXJ0ZXhNYWluXCIsXG4gICAgICAgIGJ1ZmZlcnM6IFtnZXRWZXJ0ZXhCdWZmZXJMYXlvdXQocHJpbWl0aXZlKV1cbiAgICAgIH0sXG4gICAgICBmcmFnbWVudDoge1xuICAgICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgICAgZW50cnlQb2ludDogXCJmcmFnbWVudE1haW5cIixcbiAgICAgICAgdGFyZ2V0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgbXVsdGlzYW1wbGU6IHtcbiAgICAgICAgY291bnQ6IDRcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQoKTogR1BVUmVuZGVyUGlwZWxpbmUge1xuICAgIHJldHVybiB0aGlzLmdwdVBpcGVsaW5lO1xuICB9XG5cbn1cblxuZnVuY3Rpb24gZ2V0VG9wb2xvZ3kocHJpbWl0aXZlOiBQaXBlbGluZVByaW1pdGl2ZSk6IEdQVVByaW1pdGl2ZVRvcG9sb2d5IHtcbiAgc3dpdGNoIChwcmltaXRpdmUpIHtcbiAgICBjYXNlIFBpcGVsaW5lUHJpbWl0aXZlLlRyaWFuZ2xlOiByZXR1cm4gXCJ0cmlhbmdsZS1saXN0XCI7XG4gICAgY2FzZSBQaXBlbGluZVByaW1pdGl2ZS5MaW5lOiByZXR1cm4gXCJsaW5lLWxpc3RcIjtcbiAgICBjYXNlIFBpcGVsaW5lUHJpbWl0aXZlLlBvaW50OiByZXR1cm4gXCJwb2ludC1saXN0XCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJ1bmltcGxlbWVudGVkIHByaW1pdGl2ZVwiKTtcbiAgICAgIHJldHVybiBcInRyaWFuZ2xlLWxpc3RcIjtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VmVydGV4QnVmZmVyTGF5b3V0KHByaW1pdGl2ZTogUGlwZWxpbmVQcmltaXRpdmUpOiBHUFVWZXJ0ZXhCdWZmZXJMYXlvdXQge1xuICBzd2l0Y2ggKHByaW1pdGl2ZSkge1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuVHJpYW5nbGU6IHJldHVybiBSZW5kZXJNZXNoLmdldFZlcnRleEJ1ZmZlckxheW91dCgpO1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuTGluZTogcmV0dXJuIFJlbmRlckxpbmVzLmdldFZlcnRleEJ1ZmZlckxheW91dCgpO1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuUG9pbnQ6IHJldHVybiBSZW5kZXJQb2ludHMuZ2V0VmVydGV4QnVmZmVyTGF5b3V0KCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJ1bmltcGxlbWVudGVkIHByaW1pdGl2ZVwiKTtcbiAgICAgIHJldHVybiBSZW5kZXJNZXNoLmdldFZlcnRleEJ1ZmZlckxheW91dCgpO1xuICB9XG59XG5mdW5jdGlvbiBnZXRMYWJlbChwcmltaXRpdmU6IFBpcGVsaW5lUHJpbWl0aXZlKTogc3RyaW5nIHtcbiAgc3dpdGNoIChwcmltaXRpdmUpIHtcbiAgICBjYXNlIFBpcGVsaW5lUHJpbWl0aXZlLlRyaWFuZ2xlOiByZXR1cm4gXCJ0cmluYWdsZSBwaXBlbGluZVwiO1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuTGluZTogcmV0dXJuIFwibGluZSBwaXBlbGluZVwiO1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuUG9pbnQ6IHJldHVybiBcInBvaW50IHBpcGVsaW5lXCI7XG4gICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/pipeline.ts\n");

/***/ }),

/***/ "./src/render/renderLines.ts":
/*!***********************************!*\
  !*** ./src/render/renderLines.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderLines: () => (/* binding */ RenderLines)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\n\nclass RenderLines {\n    constructor(parent, vertices, indices, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.identity(), material = \"default\") {\n        this.parent = parent;\n        this.model = model;\n        this.material = material;\n        // vertex\n        this.vertexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"vertex buffer\",\n            size: vertices.byteLength,\n            usage: GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.vertexBuffer, 0, vertices);\n        //index\n        this.indexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"index buffer\",\n            size: indices.byteLength,\n            usage: GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.indexBuffer, 0, indices);\n        this.indexCount = indices.length;\n        //mvp\n        this.modelBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"mvp\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.flagsBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"render lines flags buffer\",\n            size: 4,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.flags = new Int32Array([0]);\n    }\n    draw(pass) {\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.setIndexBuffer(this.indexBuffer, \"uint32\");\n        pass.drawIndexed(this.indexCount);\n    }\n    update() {\n        this.updateFlags();\n        this.updateModel();\n        this.updateBindGroup();\n    }\n    updateFlags() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.flagsBuffer, 0, this.flags);\n    }\n    updateModel() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.modelBuffer, 0, this.model);\n    }\n    updateBindGroup() {\n        const mat = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getMaterial(this.material);\n        this.bindGroup = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBindGroup({\n            label: \"bind group\",\n            layout: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getBindGroupLayout(),\n            entries: [\n                {\n                    binding: 0,\n                    resource: { buffer: this.modelBuffer },\n                }, {\n                    binding: 1,\n                    resource: { buffer: this.parent.getColorBuffer() },\n                }, {\n                    binding: 2,\n                    resource: { buffer: this.flagsBuffer }\n                }\n            ]\n        });\n    }\n    static getVertexBufferLayout() {\n        return RenderLines.vertexBufferLayout;\n    }\n}\nRenderLines.vertexBufferLayout = {\n    arrayStride: 16,\n    attributes: [\n        {\n            format: \"float32x4\",\n            offset: 0,\n            shaderLocation: 0,\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWtCLEdBQTBCO0lBQ2xFLFdBQVcsRUFBRSxFQUFFO0lBQ2YsVUFBVSxFQUFFO1FBQ1Y7WUFDRSxNQUFNLEVBQUUsV0FBVztZQUNuQixNQUFNLEVBQUUsQ0FBQztZQUNULGNBQWMsRUFBRSxDQUFDO1NBQ2xCO0tBQ0Y7Q0FDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3JlbmRlckxpbmVzLnRzP2RiNTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgbWF0NCwgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiXG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIlxuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcbmltcG9ydCB7IE1hdGVyaWFsLCBNYXRlcmlhbE5hbWUgfSBmcm9tIFwiLi4vbWF0ZXJpYWxzL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBzd2l6emxlWVogfSBmcm9tIFwiLi4vdXRpbHMvbWF0aFwiO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyTGluZXMge1xuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHZlcnRleEJ1ZmZlckxheW91dDogR1BVVmVydGV4QnVmZmVyTGF5b3V0ID0ge1xuICAgIGFycmF5U3RyaWRlOiAxNixcbiAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICB7IC8vIGxvY2F0aW9uXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDMyeDRcIixcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBzaGFkZXJMb2NhdGlvbjogMCxcbiAgICAgIH1cbiAgICBdXG4gIH07XG5cblxuICBwcml2YXRlIHZlcnRleEJ1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIGluZGV4QnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByaXZhdGUgYmluZEdyb3VwITogR1BVQmluZEdyb3VwO1xuXG4gIHByaXZhdGUgbW9kZWxCdWZmZXI6IEdQVUJ1ZmZlcjtcblxuICBwcml2YXRlIGZsYWdzOiBJbnQzMkFycmF5O1xuICBwcml2YXRlIGZsYWdzQnVmZmVyOiBHUFVCdWZmZXI7XG5cbiAgcHJpdmF0ZSBpbmRleENvdW50OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwYXJlbnQ6IEdlb21ldHJ5LFxuICAgIHZlcnRpY2VzOiBGbG9hdDMyQXJyYXksXG4gICAgaW5kaWNlczogSW50MzJBcnJheSxcbiAgICBwcml2YXRlIG1vZGVsOiBNYXQ0ID0gbWF0NC5pZGVudGl0eSgpLFxuICAgIHByaXZhdGUgbWF0ZXJpYWw6IE1hdGVyaWFsTmFtZSA9IFwiZGVmYXVsdFwiXG4gICkge1xuXG4gICAgLy8gdmVydGV4XG4gICAgdGhpcy52ZXJ0ZXhCdWZmZXIgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBsYWJlbDogXCJ2ZXJ0ZXggYnVmZmVyXCIsXG4gICAgICBzaXplOiB2ZXJ0aWNlcy5ieXRlTGVuZ3RoLFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlZFUlRFWCB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgIH0pO1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy52ZXJ0ZXhCdWZmZXIsIDAsIHZlcnRpY2VzKTtcblxuICAgIC8vaW5kZXhcbiAgICB0aGlzLmluZGV4QnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwiaW5kZXggYnVmZmVyXCIsXG4gICAgICBzaXplOiBpbmRpY2VzLmJ5dGVMZW5ndGgsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuSU5ERVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIsIDAsIGluZGljZXMpO1xuICAgIHRoaXMuaW5kZXhDb3VudCA9IGluZGljZXMubGVuZ3RoO1xuXG4gICAgLy9tdnBcbiAgICB0aGlzLm1vZGVsQnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwibXZwXCIsXG4gICAgICBzaXplOiA2NCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG5cbiAgICB0aGlzLmZsYWdzQnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwicmVuZGVyIGxpbmVzIGZsYWdzIGJ1ZmZlclwiLFxuICAgICAgc2l6ZTogNCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSlcbiAgICB0aGlzLmZsYWdzID0gbmV3IEludDMyQXJyYXkoWzBdKTtcblxuICB9XG5cbiAgcHVibGljIGRyYXcocGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIpOiB2b2lkIHtcbiAgICBwYXNzLnNldEJpbmRHcm91cCgwLCB0aGlzLmJpbmRHcm91cCk7XG4gICAgcGFzcy5zZXRWZXJ0ZXhCdWZmZXIoMCwgdGhpcy52ZXJ0ZXhCdWZmZXIpO1xuICAgIHBhc3Muc2V0SW5kZXhCdWZmZXIodGhpcy5pbmRleEJ1ZmZlciwgXCJ1aW50MzJcIik7XG4gICAgcGFzcy5kcmF3SW5kZXhlZCh0aGlzLmluZGV4Q291bnQpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZUZsYWdzKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgIHRoaXMudXBkYXRlQmluZEdyb3VwKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUZsYWdzKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5mbGFnc0J1ZmZlciwgMCwgdGhpcy5mbGFncyk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU1vZGVsKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5tb2RlbEJ1ZmZlciwgMCwgPEZsb2F0MzJBcnJheT50aGlzLm1vZGVsKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQmluZEdyb3VwKCk6IHZvaWQge1xuICAgIGNvbnN0IG1hdDogTWF0ZXJpYWwgPSBJTlNUQU5DRS5nZXRNYXRlcmlhbE1hbmFnZXIoKS5nZXRNYXRlcmlhbCh0aGlzLm1hdGVyaWFsKSE7XG4gICAgdGhpcy5iaW5kR3JvdXAgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICBsYWJlbDogXCJiaW5kIGdyb3VwXCIsXG4gICAgICBsYXlvdXQ6IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0QmluZEdyb3VwTGF5b3V0KCksXG4gICAgICBlbnRyaWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5tb2RlbEJ1ZmZlciB9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgYmluZGluZzogMSxcbiAgICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMucGFyZW50LmdldENvbG9yQnVmZmVyKCkgfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDIsXG4gICAgICAgICAgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLmZsYWdzQnVmZmVyIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRWZXJ0ZXhCdWZmZXJMYXlvdXQoKTogR1BVVmVydGV4QnVmZmVyTGF5b3V0IHtcbiAgICByZXR1cm4gUmVuZGVyTGluZXMudmVydGV4QnVmZmVyTGF5b3V0O1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renderLines.ts\n");

/***/ }),

/***/ "./src/render/renderMesh.ts":
/*!**********************************!*\
  !*** ./src/render/renderMesh.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderMesh: () => (/* binding */ RenderMesh)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nclass RenderMesh {\n    constructor(parent, vertices, indices, model) {\n        this.parent = parent;\n        this.model = model;\n        //vertex\n        this.vertexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"vertex buffer\",\n            size: vertices.byteLength,\n            usage: GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.vertexBuffer, 0, vertices);\n        //index\n        this.indexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"index buffer\",\n            size: indices.byteLength,\n            usage: GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.indexBuffer, 0, indices);\n        this.indexCount = indices.length;\n        //mvp\n        this.modelBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"mvp\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        //flags \n        this.flagsBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"render mesh flags buffer\",\n            size: 4,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST\n        });\n        this.flags = new Int32Array([0]);\n    }\n    draw(pass) {\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.setIndexBuffer(this.indexBuffer, \"uint32\");\n        pass.drawIndexed(this.indexCount);\n    }\n    update() {\n        this.updateFlags();\n        this.updateModel();\n        this.updateBindGroup();\n    }\n    updateModel() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.modelBuffer, 0, this.model);\n    }\n    updateFlags() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.flagsBuffer, 0, this.flags);\n    }\n    updateBindGroup() {\n        this.bindGroup = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBindGroup({\n            label: \"bind group\",\n            layout: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getBindGroupLayout(),\n            entries: [\n                {\n                    binding: 0,\n                    resource: { buffer: this.modelBuffer },\n                }, {\n                    binding: 1,\n                    resource: { buffer: this.parent.getColorBuffer() },\n                }, {\n                    binding: 2,\n                    resource: { buffer: this.flagsBuffer },\n                }\n            ]\n        });\n    }\n    static getVertexBufferLayout() {\n        return this.vertexBufferLayout;\n    }\n}\nRenderMesh.vertexBufferLayout = {\n    arrayStride: 32,\n    attributes: [\n        {\n            format: \"float32x4\",\n            offset: 0,\n            shaderLocation: 0,\n        }, {\n            format: \"float32x4\",\n            offset: 16,\n            shaderLocation: 1,\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxFQUFFLEVBQUU7WUFDVixjQUFjLEVBQUUsQ0FBQztTQUNsQjtLQUNGO0NBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9yZW5kZXJNZXNoLnRzPzRmMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IG1hdDQsIE1hdDQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIlxuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcblxuZXhwb3J0IGNsYXNzIFJlbmRlck1lc2gge1xuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHZlcnRleEJ1ZmZlckxheW91dDogR1BVVmVydGV4QnVmZmVyTGF5b3V0ID0ge1xuICAgIGFycmF5U3RyaWRlOiAzMixcbiAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICB7IC8vIGxvY2F0aW9uXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDMyeDRcIixcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBzaGFkZXJMb2NhdGlvbjogMCxcbiAgICAgIH0sIHsgLy8gbm9ybWFsXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDMyeDRcIixcbiAgICAgICAgb2Zmc2V0OiAxNixcbiAgICAgICAgc2hhZGVyTG9jYXRpb246IDEsXG4gICAgICB9XG4gICAgXVxuICB9O1xuXG4gIHByb3RlY3RlZCB2ZXJ0ZXhCdWZmZXI6IEdQVUJ1ZmZlcjtcbiAgcHJvdGVjdGVkIGluZGV4QnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByb3RlY3RlZCBiaW5kR3JvdXAhOiBHUFVCaW5kR3JvdXA7XG5cbiAgcHJvdGVjdGVkIG1vZGVsQnVmZmVyOiBHUFVCdWZmZXI7XG5cbiAgcHJvdGVjdGVkIGZsYWdzOiBJbnQzMkFycmF5O1xuICBwcm90ZWN0ZWQgZmxhZ3NCdWZmZXI6IEdQVUJ1ZmZlcjtcblxuICBwcm90ZWN0ZWQgaW5kZXhDb3VudDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBwYXJlbnQ6IEdlb21ldHJ5LFxuICAgIHZlcnRpY2VzOiBGbG9hdDMyQXJyYXksXG4gICAgaW5kaWNlczogSW50MzJBcnJheSxcbiAgICBwcml2YXRlIG1vZGVsOiBNYXQ0KSB7XG5cbiAgICAvL3ZlcnRleFxuICAgIHRoaXMudmVydGV4QnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwidmVydGV4IGJ1ZmZlclwiLFxuICAgICAgc2l6ZTogdmVydGljZXMuYnl0ZUxlbmd0aCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5WRVJURVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMudmVydGV4QnVmZmVyLCAwLCB2ZXJ0aWNlcyk7XG5cbiAgICAvL2luZGV4XG4gICAgdGhpcy5pbmRleEJ1ZmZlciA9IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcImluZGV4IGJ1ZmZlclwiLFxuICAgICAgc2l6ZTogaW5kaWNlcy5ieXRlTGVuZ3RoLFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLklOREVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLmluZGV4QnVmZmVyLCAwLCBpbmRpY2VzKTtcbiAgICB0aGlzLmluZGV4Q291bnQgPSBpbmRpY2VzLmxlbmd0aDtcblxuICAgIC8vbXZwXG4gICAgdGhpcy5tb2RlbEJ1ZmZlciA9IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcIm12cFwiLFxuICAgICAgc2l6ZTogNjQsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgIH0pO1xuXG4gICAgLy9mbGFncyBcbiAgICB0aGlzLmZsYWdzQnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwicmVuZGVyIG1lc2ggZmxhZ3MgYnVmZmVyXCIsXG4gICAgICBzaXplOiA0LFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVFxuICAgIH0pXG4gICAgdGhpcy5mbGFncyA9IG5ldyBJbnQzMkFycmF5KFswXSk7XG5cbiAgfVxuXG4gIHB1YmxpYyBkcmF3KHBhc3M6IEdQVVJlbmRlclBhc3NFbmNvZGVyKTogdm9pZCB7XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgdGhpcy5iaW5kR3JvdXApO1xuICAgIHBhc3Muc2V0VmVydGV4QnVmZmVyKDAsIHRoaXMudmVydGV4QnVmZmVyKTtcbiAgICBwYXNzLnNldEluZGV4QnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIsIFwidWludDMyXCIpO1xuICAgIHBhc3MuZHJhd0luZGV4ZWQodGhpcy5pbmRleENvdW50KTtcbiAgfVxuXG5cbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZUZsYWdzKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgIHRoaXMudXBkYXRlQmluZEdyb3VwKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU1vZGVsKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5tb2RlbEJ1ZmZlciwgMCwgPEZsb2F0MzJBcnJheT50aGlzLm1vZGVsKTtcbiAgfVxuICBwcml2YXRlIHVwZGF0ZUZsYWdzKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5mbGFnc0J1ZmZlciwgMCwgdGhpcy5mbGFncyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgdXBkYXRlQmluZEdyb3VwKCk6IHZvaWQge1xuICAgIHRoaXMuYmluZEdyb3VwID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgICAgbGFiZWw6IFwiYmluZCBncm91cFwiLFxuICAgICAgbGF5b3V0OiBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldEJpbmRHcm91cExheW91dCgpLFxuICAgICAgZW50cmllczogW1xuICAgICAgICB7XG4gICAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMubW9kZWxCdWZmZXIgfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDEsXG4gICAgICAgICAgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLnBhcmVudC5nZXRDb2xvckJ1ZmZlcigpIH0sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAyLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5mbGFnc0J1ZmZlciB9LFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgZ2V0VmVydGV4QnVmZmVyTGF5b3V0KCk6IEdQVVZlcnRleEJ1ZmZlckxheW91dCB7XG4gICAgcmV0dXJuIHRoaXMudmVydGV4QnVmZmVyTGF5b3V0O1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renderMesh.ts\n");

/***/ }),

/***/ "./src/render/renderPoints.ts":
/*!************************************!*\
  !*** ./src/render/renderPoints.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderPoints: () => (/* binding */ RenderPoints)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\n\nclass RenderPoints {\n    constructor(parent, points, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.identity()) {\n        this.parent = parent;\n        this.model = model;\n        // vertex\n        const verts = [];\n        for (let i = 0; i < points.length; i++)\n            verts.push(...points[i], 1);\n        const vertexArray = new Float32Array(verts);\n        this.vertexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"points vertex buffer\",\n            size: vertexArray.byteLength,\n            usage: GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.vertexBuffer, 0, vertexArray);\n        this.vertexCount = vertexArray.length / 4;\n        //mvp\n        this.modelBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"mvp\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        //flags\n        this.flagsBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"render points flags buffer\",\n            size: 4,\n            usage: GPUBufferUsage.UNIFORM\n        });\n        this.flags = new Int32Array([0]);\n        this.update();\n    }\n    draw(pass) {\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.draw(this.vertexCount);\n    }\n    update() {\n        this.updateFlags();\n        this.updateModel();\n        this.updateBindGroup();\n    }\n    updateFlags() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.flagsBuffer, 0, this.flags);\n    }\n    updateModel() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.modelBuffer, 0, this.model);\n    }\n    updateBindGroup() {\n        this.bindGroup = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBindGroup({\n            label: \"points bind group\",\n            layout: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getBindGroupLayout(),\n            entries: [\n                {\n                    binding: 0,\n                    resource: { buffer: this.modelBuffer },\n                }, {\n                    binding: 1,\n                    resource: { buffer: this.parent.getColorBuffer() },\n                }, {\n                    binding: 2,\n                    resource: { buffer: this.flagsBuffer }\n                }\n            ]\n        });\n    }\n    static getVertexBufferLayout() {\n        return RenderPoints.vertexBufferLayout;\n    }\n}\nRenderPoints.vertexBufferLayout = {\n    arrayStride: 16,\n    attributes: [\n        {\n            format: \"float32x4\",\n            offset: 0,\n            shaderLocation: 0,\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFnQixJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEcsQ0FBQztJQUVPLGVBQWU7UUFDckIsSUFBSSxDQUFDLFNBQVMsR0FBRywwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNsRSxLQUFLLEVBQUUsbUJBQW1CO1lBQzFCLE1BQU0sRUFBRSwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLGtCQUFrQixFQUFFO1lBQ25ELE9BQU8sRUFBRTtnQkFDUDtvQkFDRSxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRTtpQkFDdkMsRUFBRTtvQkFDRCxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsRUFBRTtpQkFDbkQsRUFBRTtvQkFDRCxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRTtpQkFDdkM7YUFDRjtTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSxNQUFNLENBQUMscUJBQXFCO1FBQ2pDLE9BQU8sWUFBWSxDQUFDLGtCQUFrQixDQUFDO0lBQ3pDLENBQUM7O0FBbEd1QiwrQkFBa0IsR0FBMEI7SUFDbEUsV0FBVyxFQUFFLEVBQUU7SUFDZixVQUFVLEVBQUU7UUFDVjtZQUNFLE1BQU0sRUFBRSxXQUFXO1lBQ25CLE1BQU0sRUFBRSxDQUFDO1lBQ1QsY0FBYyxFQUFFLENBQUM7U0FDbEI7S0FDRjtDQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvcmVuZGVyUG9pbnRzLnRzP2QxZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgbWF0NCwgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiXG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIlxuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcblxuZXhwb3J0IGNsYXNzIFJlbmRlclBvaW50cyB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdmVydGV4QnVmZmVyTGF5b3V0OiBHUFVWZXJ0ZXhCdWZmZXJMYXlvdXQgPSB7XG4gICAgYXJyYXlTdHJpZGU6IDE2LFxuICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgIHsgLy8gbG9jYXRpb25cbiAgICAgICAgZm9ybWF0OiBcImZsb2F0MzJ4NFwiLFxuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLFxuICAgICAgfVxuICAgIF1cbiAgfTtcblxuICBwcml2YXRlIGJpbmRHcm91cCE6IEdQVUJpbmRHcm91cDtcblxuICBwcml2YXRlIG1vZGVsQnVmZmVyOiBHUFVCdWZmZXI7XG5cbiAgcHJpdmF0ZSBmbGFnczogSW50MzJBcnJheTtcbiAgcHJpdmF0ZSBmbGFnc0J1ZmZlcjogR1BVQnVmZmVyO1xuXG4gIHByaXZhdGUgdmVydGV4QnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByaXZhdGUgdmVydGV4Q291bnQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHBhcmVudDogR2VvbWV0cnksXG4gICAgcG9pbnRzOiBWZWMzW10sXG4gICAgcHJpdmF0ZSBtb2RlbDogTWF0NCA9IG1hdDQuaWRlbnRpdHkoKVxuICApIHtcblxuICAgIC8vIHZlcnRleFxuICAgIGNvbnN0IHZlcnRzOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB2ZXJ0cy5wdXNoKC4uLnBvaW50c1tpXSwgMSk7XG4gICAgY29uc3QgdmVydGV4QXJyYXk6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkodmVydHMpO1xuICAgIHRoaXMudmVydGV4QnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwicG9pbnRzIHZlcnRleCBidWZmZXJcIixcbiAgICAgIHNpemU6IHZlcnRleEFycmF5LmJ5dGVMZW5ndGgsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnZlcnRleEJ1ZmZlciwgMCwgdmVydGV4QXJyYXkpO1xuICAgIHRoaXMudmVydGV4Q291bnQgPSB2ZXJ0ZXhBcnJheS5sZW5ndGggLyA0O1xuXG4gICAgLy9tdnBcbiAgICB0aGlzLm1vZGVsQnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwibXZwXCIsXG4gICAgICBzaXplOiA2NCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG5cbiAgICAvL2ZsYWdzXG4gICAgdGhpcy5mbGFnc0J1ZmZlciA9IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcInJlbmRlciBwb2ludHMgZmxhZ3MgYnVmZmVyXCIsXG4gICAgICBzaXplOiA0LFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk1cbiAgICB9KTtcbiAgICB0aGlzLmZsYWdzID0gbmV3IEludDMyQXJyYXkoWzBdKTtcblxuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBwdWJsaWMgZHJhdyhwYXNzOiBHUFVSZW5kZXJQYXNzRW5jb2Rlcik6IHZvaWQge1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDAsIHRoaXMuYmluZEdyb3VwKTtcbiAgICBwYXNzLnNldFZlcnRleEJ1ZmZlcigwLCB0aGlzLnZlcnRleEJ1ZmZlcik7XG4gICAgcGFzcy5kcmF3KHRoaXMudmVydGV4Q291bnQpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZUZsYWdzKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICAgIHRoaXMudXBkYXRlQmluZEdyb3VwKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUZsYWdzKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5mbGFnc0J1ZmZlciwgMCwgdGhpcy5mbGFncyk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU1vZGVsKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5tb2RlbEJ1ZmZlciwgMCwgPEZsb2F0MzJBcnJheT50aGlzLm1vZGVsKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQmluZEdyb3VwKCk6IHZvaWQge1xuICAgIHRoaXMuYmluZEdyb3VwID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgICAgbGFiZWw6IFwicG9pbnRzIGJpbmQgZ3JvdXBcIixcbiAgICAgIGxheW91dDogSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXRCaW5kR3JvdXBMYXlvdXQoKSxcbiAgICAgIGVudHJpZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgICAgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLm1vZGVsQnVmZmVyIH0sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAxLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5wYXJlbnQuZ2V0Q29sb3JCdWZmZXIoKSB9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgYmluZGluZzogMixcbiAgICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMuZmxhZ3NCdWZmZXIgfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldFZlcnRleEJ1ZmZlckxheW91dCgpOiBHUFVWZXJ0ZXhCdWZmZXJMYXlvdXQge1xuICAgIHJldHVybiBSZW5kZXJQb2ludHMudmVydGV4QnVmZmVyTGF5b3V0O1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renderPoints.ts\n");

/***/ }),

/***/ "./src/render/renderer.ts":
/*!********************************!*\
  !*** ./src/render/renderer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Renderer: () => (/* binding */ Renderer)\n/* harmony export */ });\n/* harmony import */ var _shaders_triangleShader_wgsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shaders/triangleShader.wgsl */ \"./src/render/shaders/triangleShader.wgsl\");\n/* harmony import */ var _shaders_lineShader_wgsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shaders/lineShader.wgsl */ \"./src/render/shaders/lineShader.wgsl\");\n/* harmony import */ var _shaders_pointShader_wgsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/pointShader.wgsl */ \"./src/render/shaders/pointShader.wgsl\");\n/* harmony import */ var _shaders_instancedTriangleShader_wgsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/instancedTriangleShader.wgsl */ \"./src/render/shaders/instancedTriangleShader.wgsl\");\n/* harmony import */ var _pipeline__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pipeline */ \"./src/render/pipeline.ts\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _globalUniforms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./globalUniforms */ \"./src/render/globalUniforms.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\nconst compatibilityCheck = document.getElementById(\"compatibility-check\");\nclass Renderer {\n    constructor() {\n        this.clearColor = [0.1, 0.1, 0.1, 1.0];\n    }\n    getDevice() {\n        return this.device;\n    }\n    getBindGroupLayout() {\n        return this.bindGroupLayout;\n    }\n    getBindGroupLayoutInstanced() {\n        return this.bindGroupLayoutInstanced;\n    }\n    setClearColor(color) {\n        this.clearColor = color;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.createDevice();\n            this.createResources();\n            this.createPipelines();\n            this.updateScreenSize();\n        });\n    }\n    createDevice() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!navigator.gpu) {\n                alert(\"Your browser / computer does not support WebGPU.\");\n                compatibilityCheck.innerText = \"This browser does not support WebGPU. Check here for a list of supported browsers https://caniuse.com/webgpu\";\n                return;\n            }\n            var adapter;\n            try {\n                adapter = yield navigator.gpu.requestAdapter();\n            }\n            catch (error) {\n                console.log(error);\n            }\n            if (adapter == null) {\n                alert(\"Your browser / computer does not support WebGPU.\");\n                compatibilityCheck.innerText = \"No valid gpu adapter. Check here for a list of supported browsers https://caniuse.com/webgpu\";\n                return;\n            }\n            this.device = (yield adapter.requestDevice());\n            this.canvas = document.getElementById(\"screen\");\n            this.context = this.canvas.getContext(\"webgpu\");\n            this.canvasFormat = navigator.gpu.getPreferredCanvasFormat();\n            this.context.configure({\n                device: this.device,\n                format: this.canvasFormat,\n            });\n        });\n    }\n    createResources() {\n        this.triangleShaderModule = this.device.createShaderModule({\n            label: \"triangle shader module\",\n            code: _shaders_triangleShader_wgsl__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n        });\n        this.lineShaderModule = this.device.createShaderModule({\n            label: \"line shader module\",\n            code: _shaders_lineShader_wgsl__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n        });\n        this.pointShaderModule = this.device.createShaderModule({\n            label: \"point shader module\",\n            code: _shaders_pointShader_wgsl__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n        });\n        this.instancedTriangleShaderModule = this.device.createShaderModule({\n            label: \"instanced triangle shader module\",\n            code: _shaders_instancedTriangleShader_wgsl__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n        });\n        this.bindGroupLayout = this.device.createBindGroupLayout({\n            label: \"bind group layout\",\n            entries: [\n                {\n                    binding: 0,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                }, {\n                    binding: 1,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {},\n                }, {\n                    binding: 2,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {},\n                }\n            ]\n        });\n        this.bindGroupLayoutInstanced = this.device.createBindGroupLayout({\n            label: \"bind group layout instanced\",\n            entries: [\n                {\n                    binding: 0,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                }, {\n                    binding: 1,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {},\n                }, {\n                    binding: 2,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {},\n                }, {\n                    binding: 3,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: { type: \"read-only-storage\" },\n                }\n            ]\n        });\n        this.globalUniforms = new _globalUniforms__WEBPACK_IMPORTED_MODULE_6__.GlobalUniforms(this.device);\n        this.updateScreenSize();\n    }\n    createPipelines() {\n        this.trianglePipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_4__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout()], this.triangleShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_4__.PipelinePrimitive.Triangle);\n        this.linePipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_4__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout()], this.lineShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_4__.PipelinePrimitive.Line);\n        this.pointPipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_4__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout()], this.pointShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_4__.PipelinePrimitive.Point);\n        this.instancedTrianglePipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_4__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayoutInstanced, this.globalUniforms.getLayout()], this.instancedTriangleShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_4__.PipelinePrimitive.Triangle);\n    }\n    updateScreenSize() {\n        this.canvas.width = window.innerWidth;\n        this.canvas.height = window.innerHeight;\n        this.depthTexture = this.device.createTexture({\n            size: [this.canvas.width, this.canvas.height],\n            sampleCount: 4,\n            format: \"depth24plus\",\n            usage: GPUTextureUsage.RENDER_ATTACHMENT\n        });\n        this.renderTarget = this.device.createTexture({\n            size: [this.canvas.width, this.canvas.height],\n            sampleCount: 4,\n            format: this.canvasFormat,\n            usage: GPUTextureUsage.RENDER_ATTACHMENT\n        });\n    }\n    render(scene) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // TODO: Factor this stuff out of main loop\n            const encoder = this.device.createCommandEncoder();\n            const pass = encoder.beginRenderPass({\n                colorAttachments: [\n                    {\n                        view: this.renderTarget.createView(),\n                        resolveTarget: this.context.getCurrentTexture().createView(),\n                        loadOp: \"clear\",\n                        clearValue: this.clearColor,\n                        storeOp: \"store\",\n                    },\n                ],\n                depthStencilAttachment: {\n                    view: this.depthTexture.createView(),\n                    depthClearValue: 1.0,\n                    depthLoadOp: \"clear\",\n                    depthStoreOp: \"store\"\n                }\n            });\n            this.globalUniforms.tick();\n            this.globalUniforms.bind(pass);\n            var drawCalls = 0;\n            pass.setPipeline(this.trianglePipeline.get());\n            for (let mesh of scene.getAllMeshes()) {\n                mesh.draw(pass);\n                drawCalls++;\n            }\n            ;\n            pass.setPipeline(this.linePipeline.get());\n            for (let lines of scene.getAllLines()) {\n                lines.draw(pass);\n                drawCalls++;\n            }\n            ;\n            pass.setPipeline(this.pointPipeline.get());\n            for (let points of scene.getAllPoints()) {\n                points.draw(pass);\n                drawCalls++;\n            }\n            pass.setPipeline(this.instancedTrianglePipeline.get());\n            for (let mesh of scene.getAllMeshesInstanced()) {\n                mesh.draw(pass);\n                drawCalls++;\n            }\n            _cad__WEBPACK_IMPORTED_MODULE_5__.INSTANCE.getStats().setDrawCalls(drawCalls);\n            pass.end();\n            const commandBuffer = encoder.finish();\n            this.device.queue.submit([commandBuffer]);\n            yield this.device.queue.onSubmittedWorkDone();\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUMzQyxLQUFLLElBQUksTUFBTSxJQUFJLEtBQUssQ0FBQyxZQUFZLEVBQUUsRUFBRTtnQkFDdkMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbEIsU0FBUyxFQUFFLENBQUM7YUFDYjtZQUVELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLHlCQUF5QixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDdkQsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLENBQUMscUJBQXFCLEVBQUUsRUFBRTtnQkFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDaEIsU0FBUyxFQUFFLENBQUM7YUFDYjtZQUVELDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRTVDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUNYLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBRTFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUVoRCxDQUFDO0tBQUE7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9yZW5kZXJlci50cz9iNWM3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHRyaWFuZ2xlU2hhZGVyIGZyb20gXCIuL3NoYWRlcnMvdHJpYW5nbGVTaGFkZXIud2dzbFwiO1xuaW1wb3J0IGxpbmVTaGFkZXIgZnJvbSBcIi4vc2hhZGVycy9saW5lU2hhZGVyLndnc2xcIjtcbmltcG9ydCBwb2ludFNoYWRlciBmcm9tIFwiLi9zaGFkZXJzL3BvaW50U2hhZGVyLndnc2xcIjtcbmltcG9ydCBpbnN0YW5jZWRUcmlhbmdsZVNoYWRlciBmcm9tIFwiLi9zaGFkZXJzL2luc3RhbmNlZFRyaWFuZ2xlU2hhZGVyLndnc2xcIlxuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmUvc2NlbmVcIlxuaW1wb3J0IHsgUGlwZWxpbmUsIFBpcGVsaW5lUHJpbWl0aXZlIH0gZnJvbSBcIi4vcGlwZWxpbmVcIlxuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCI7XG5pbXBvcnQgeyBHbG9iYWxVbmlmb3JtcyB9IGZyb20gXCIuL2dsb2JhbFVuaWZvcm1zXCI7XG5cbmNvbnN0IGNvbXBhdGliaWxpdHlDaGVjazogSFRNTEVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wYXRpYmlsaXR5LWNoZWNrXCIpO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIge1xuXG4gIHByaXZhdGUgZGV2aWNlITogR1BVRGV2aWNlO1xuICBwcml2YXRlIGNvbnRleHQhOiBHUFVDYW52YXNDb250ZXh0O1xuICBwcml2YXRlIGNhbnZhcyE6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIGNhbnZhc0Zvcm1hdCE6IEdQVVRleHR1cmVGb3JtYXQ7XG5cbiAgcHJpdmF0ZSB0cmlhbmdsZVNoYWRlck1vZHVsZSE6IEdQVVNoYWRlck1vZHVsZTtcbiAgcHJpdmF0ZSBsaW5lU2hhZGVyTW9kdWxlITogR1BVU2hhZGVyTW9kdWxlO1xuICBwcml2YXRlIHBvaW50U2hhZGVyTW9kdWxlITogR1BVU2hhZGVyTW9kdWxlO1xuICBwcml2YXRlIGluc3RhbmNlZFRyaWFuZ2xlU2hhZGVyTW9kdWxlITogR1BVU2hhZGVyTW9kdWxlO1xuXG4gIHByaXZhdGUgZGVwdGhUZXh0dXJlITogR1BVVGV4dHVyZTtcbiAgcHJpdmF0ZSByZW5kZXJUYXJnZXQhOiBHUFVUZXh0dXJlO1xuXG4gIHByaXZhdGUgYmluZEdyb3VwTGF5b3V0ITogR1BVQmluZEdyb3VwTGF5b3V0O1xuICBwcml2YXRlIGJpbmRHcm91cExheW91dEluc3RhbmNlZCE6IEdQVUJpbmRHcm91cExheW91dDtcblxuICBwcml2YXRlIGdsb2JhbFVuaWZvcm1zITogR2xvYmFsVW5pZm9ybXM7XG5cbiAgcHJpdmF0ZSB0cmlhbmdsZVBpcGVsaW5lITogUGlwZWxpbmU7XG4gIHByaXZhdGUgbGluZVBpcGVsaW5lITogUGlwZWxpbmU7XG4gIHByaXZhdGUgcG9pbnRQaXBlbGluZSE6IFBpcGVsaW5lO1xuICBwcml2YXRlIGluc3RhbmNlZFRyaWFuZ2xlUGlwZWxpbmUhOiBQaXBlbGluZTtcblxuICBwcml2YXRlIGNsZWFyQ29sb3I6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xlYXJDb2xvciA9IFswLjEsIDAuMSwgMC4xLCAxLjBdO1xuICB9XG5cbiAgcHVibGljIGdldERldmljZSgpOiBHUFVEZXZpY2Uge1xuICAgIHJldHVybiB0aGlzLmRldmljZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCaW5kR3JvdXBMYXlvdXQoKTogR1BVQmluZEdyb3VwTGF5b3V0IHtcbiAgICByZXR1cm4gdGhpcy5iaW5kR3JvdXBMYXlvdXQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0QmluZEdyb3VwTGF5b3V0SW5zdGFuY2VkKCk6IEdQVUJpbmRHcm91cExheW91dCB7XG4gICAgcmV0dXJuIHRoaXMuYmluZEdyb3VwTGF5b3V0SW5zdGFuY2VkO1xuICB9XG5cbiAgcHVibGljIHNldENsZWFyQ29sb3IoY29sb3I6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhckNvbG9yID0gY29sb3I7XG4gIH1cblxuICBhc3luYyBpbml0KCkge1xuXG5cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZURldmljZSgpO1xuICAgIHRoaXMuY3JlYXRlUmVzb3VyY2VzKCk7XG4gICAgdGhpcy5jcmVhdGVQaXBlbGluZXMoKTtcbiAgICB0aGlzLnVwZGF0ZVNjcmVlblNpemUoKTtcblxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVEZXZpY2UoKSB7XG5cbiAgICBpZiAoIW5hdmlnYXRvci5ncHUpIHtcbiAgICAgIGFsZXJ0KFwiWW91ciBicm93c2VyIC8gY29tcHV0ZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJHUFUuXCIpO1xuICAgICAgY29tcGF0aWJpbGl0eUNoZWNrLmlubmVyVGV4dCA9IFwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgV2ViR1BVLiBDaGVjayBoZXJlIGZvciBhIGxpc3Qgb2Ygc3VwcG9ydGVkIGJyb3dzZXJzIGh0dHBzOi8vY2FuaXVzZS5jb20vd2ViZ3B1XCI7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGFkYXB0ZXI6IEdQVUFkYXB0ZXIgfCBudWxsO1xuICAgIHRyeSB7XG4gICAgICBhZGFwdGVyID0gYXdhaXQgbmF2aWdhdG9yLmdwdS5yZXF1ZXN0QWRhcHRlcigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKGFkYXB0ZXIhID09IG51bGwpIHtcbiAgICAgIGFsZXJ0KFwiWW91ciBicm93c2VyIC8gY29tcHV0ZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJHUFUuXCIpO1xuICAgICAgY29tcGF0aWJpbGl0eUNoZWNrLmlubmVyVGV4dCA9IFwiTm8gdmFsaWQgZ3B1IGFkYXB0ZXIuIENoZWNrIGhlcmUgZm9yIGEgbGlzdCBvZiBzdXBwb3J0ZWQgYnJvd3NlcnMgaHR0cHM6Ly9jYW5pdXNlLmNvbS93ZWJncHVcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmRldmljZSA9IDxHUFVEZXZpY2U+YXdhaXQgYWRhcHRlci5yZXF1ZXN0RGV2aWNlKCk7XG4gICAgdGhpcy5jYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY3JlZW5cIik7XG4gICAgdGhpcy5jb250ZXh0ID0gPEdQVUNhbnZhc0NvbnRleHQ+dGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIndlYmdwdVwiKTtcblxuXG4gICAgdGhpcy5jYW52YXNGb3JtYXQgPSBuYXZpZ2F0b3IuZ3B1LmdldFByZWZlcnJlZENhbnZhc0Zvcm1hdCgpO1xuICAgIHRoaXMuY29udGV4dC5jb25maWd1cmUoe1xuICAgICAgZGV2aWNlOiB0aGlzLmRldmljZSxcbiAgICAgIGZvcm1hdDogdGhpcy5jYW52YXNGb3JtYXQsXG4gICAgfSk7XG5cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUmVzb3VyY2VzKCkge1xuXG5cbiAgICB0aGlzLnRyaWFuZ2xlU2hhZGVyTW9kdWxlID0gdGhpcy5kZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgIGxhYmVsOiBcInRyaWFuZ2xlIHNoYWRlciBtb2R1bGVcIixcbiAgICAgIGNvZGU6IHRyaWFuZ2xlU2hhZGVyLFxuICAgIH0pO1xuXG4gICAgdGhpcy5saW5lU2hhZGVyTW9kdWxlID0gdGhpcy5kZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgIGxhYmVsOiBcImxpbmUgc2hhZGVyIG1vZHVsZVwiLFxuICAgICAgY29kZTogbGluZVNoYWRlcixcbiAgICB9KTtcblxuICAgIHRoaXMucG9pbnRTaGFkZXJNb2R1bGUgPSB0aGlzLmRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUoe1xuICAgICAgbGFiZWw6IFwicG9pbnQgc2hhZGVyIG1vZHVsZVwiLFxuICAgICAgY29kZTogcG9pbnRTaGFkZXIsXG4gICAgfSk7XG4gICAgdGhpcy5pbnN0YW5jZWRUcmlhbmdsZVNoYWRlck1vZHVsZSA9IHRoaXMuZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgICBsYWJlbDogXCJpbnN0YW5jZWQgdHJpYW5nbGUgc2hhZGVyIG1vZHVsZVwiLFxuICAgICAgY29kZTogaW5zdGFuY2VkVHJpYW5nbGVTaGFkZXIsXG4gICAgfSlcblxuICAgIHRoaXMuYmluZEdyb3VwTGF5b3V0ID0gdGhpcy5kZXZpY2UuY3JlYXRlQmluZEdyb3VwTGF5b3V0KHtcbiAgICAgIGxhYmVsOiBcImJpbmQgZ3JvdXAgbGF5b3V0XCIsXG4gICAgICBlbnRyaWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBiaW5kaW5nOiAwLCAvLyBtdnBcbiAgICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5WRVJURVgsXG4gICAgICAgICAgYnVmZmVyOiB7fVxuICAgICAgICB9LCB7XG4gICAgICAgICAgYmluZGluZzogMSwgLy8gY29sb3JcbiAgICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5GUkFHTUVOVCxcbiAgICAgICAgICBidWZmZXI6IHt9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgYmluZGluZzogMiwgLy8gZmxhZ3NcbiAgICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5WRVJURVgsXG4gICAgICAgICAgYnVmZmVyOiB7fSxcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICAgIHRoaXMuYmluZEdyb3VwTGF5b3V0SW5zdGFuY2VkID0gdGhpcy5kZXZpY2UuY3JlYXRlQmluZEdyb3VwTGF5b3V0KHtcbiAgICAgIGxhYmVsOiBcImJpbmQgZ3JvdXAgbGF5b3V0IGluc3RhbmNlZFwiLFxuICAgICAgZW50cmllczogW1xuICAgICAgICB7XG4gICAgICAgICAgYmluZGluZzogMCwgLy8gbXZwXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgIGJ1ZmZlcjoge31cbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDEsIC8vIGNvbG9yXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuRlJBR01FTlQsXG4gICAgICAgICAgYnVmZmVyOiB7fSxcbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDIsIC8vIGZsYWdzXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgIGJ1ZmZlcjoge30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAzLCAvLyB0cmFuc2Zvcm0gYnVmZmVyXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgIGJ1ZmZlcjogeyB0eXBlOiBcInJlYWQtb25seS1zdG9yYWdlXCIgfSxcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICAgIHRoaXMuZ2xvYmFsVW5pZm9ybXMgPSBuZXcgR2xvYmFsVW5pZm9ybXModGhpcy5kZXZpY2UpO1xuXG4gICAgdGhpcy51cGRhdGVTY3JlZW5TaXplKCk7XG5cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlUGlwZWxpbmVzKCkge1xuICAgIHRoaXMudHJpYW5nbGVQaXBlbGluZSA9IG5ldyBQaXBlbGluZShcbiAgICAgIHRoaXMuZGV2aWNlLFxuICAgICAgdGhpcy5jYW52YXNGb3JtYXQsXG4gICAgICBbdGhpcy5iaW5kR3JvdXBMYXlvdXQsIHRoaXMuZ2xvYmFsVW5pZm9ybXMuZ2V0TGF5b3V0KCldLFxuICAgICAgdGhpcy50cmlhbmdsZVNoYWRlck1vZHVsZSxcbiAgICAgIFBpcGVsaW5lUHJpbWl0aXZlLlRyaWFuZ2xlKTtcbiAgICB0aGlzLmxpbmVQaXBlbGluZSA9IG5ldyBQaXBlbGluZShcbiAgICAgIHRoaXMuZGV2aWNlLFxuICAgICAgdGhpcy5jYW52YXNGb3JtYXQsXG4gICAgICBbdGhpcy5iaW5kR3JvdXBMYXlvdXQsIHRoaXMuZ2xvYmFsVW5pZm9ybXMuZ2V0TGF5b3V0KCldLFxuICAgICAgdGhpcy5saW5lU2hhZGVyTW9kdWxlLFxuICAgICAgUGlwZWxpbmVQcmltaXRpdmUuTGluZSk7XG4gICAgdGhpcy5wb2ludFBpcGVsaW5lID0gbmV3IFBpcGVsaW5lKFxuICAgICAgdGhpcy5kZXZpY2UsXG4gICAgICB0aGlzLmNhbnZhc0Zvcm1hdCxcbiAgICAgIFt0aGlzLmJpbmRHcm91cExheW91dCwgdGhpcy5nbG9iYWxVbmlmb3Jtcy5nZXRMYXlvdXQoKV0sXG4gICAgICB0aGlzLnBvaW50U2hhZGVyTW9kdWxlLFxuICAgICAgUGlwZWxpbmVQcmltaXRpdmUuUG9pbnQpO1xuICAgIHRoaXMuaW5zdGFuY2VkVHJpYW5nbGVQaXBlbGluZSA9IG5ldyBQaXBlbGluZShcbiAgICAgIHRoaXMuZGV2aWNlLFxuICAgICAgdGhpcy5jYW52YXNGb3JtYXQsXG4gICAgICBbdGhpcy5iaW5kR3JvdXBMYXlvdXRJbnN0YW5jZWQsIHRoaXMuZ2xvYmFsVW5pZm9ybXMuZ2V0TGF5b3V0KCldLFxuICAgICAgdGhpcy5pbnN0YW5jZWRUcmlhbmdsZVNoYWRlck1vZHVsZSxcbiAgICAgIFBpcGVsaW5lUHJpbWl0aXZlLlRyaWFuZ2xlKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVTY3JlZW5TaXplKCk6IHZvaWQge1xuICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIHRoaXMuZGVwdGhUZXh0dXJlID0gdGhpcy5kZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgICBzaXplOiBbdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodF0sXG4gICAgICBzYW1wbGVDb3VudDogNCxcbiAgICAgIGZvcm1hdDogXCJkZXB0aDI0cGx1c1wiLFxuICAgICAgdXNhZ2U6IEdQVVRleHR1cmVVc2FnZS5SRU5ERVJfQVRUQUNITUVOVFxuICAgIH0pO1xuXG4gICAgdGhpcy5yZW5kZXJUYXJnZXQgPSB0aGlzLmRldmljZS5jcmVhdGVUZXh0dXJlKHtcbiAgICAgIHNpemU6IFt0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0XSxcbiAgICAgIHNhbXBsZUNvdW50OiA0LFxuICAgICAgZm9ybWF0OiB0aGlzLmNhbnZhc0Zvcm1hdCxcbiAgICAgIHVzYWdlOiBHUFVUZXh0dXJlVXNhZ2UuUkVOREVSX0FUVEFDSE1FTlRcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHJlbmRlcihzY2VuZTogU2NlbmUpIHtcblxuICAgIC8vIFRPRE86IEZhY3RvciB0aGlzIHN0dWZmIG91dCBvZiBtYWluIGxvb3BcbiAgICBjb25zdCBlbmNvZGVyOiBHUFVDb21tYW5kRW5jb2RlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUNvbW1hbmRFbmNvZGVyKCk7XG4gICAgY29uc3QgcGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIgPSBlbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyh7XG4gICAgICBjb2xvckF0dGFjaG1lbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB2aWV3OiB0aGlzLnJlbmRlclRhcmdldC5jcmVhdGVWaWV3KCksXG4gICAgICAgICAgcmVzb2x2ZVRhcmdldDogdGhpcy5jb250ZXh0LmdldEN1cnJlbnRUZXh0dXJlKCkuY3JlYXRlVmlldygpLFxuICAgICAgICAgIGxvYWRPcDogXCJjbGVhclwiLFxuICAgICAgICAgIGNsZWFyVmFsdWU6IHRoaXMuY2xlYXJDb2xvcixcbiAgICAgICAgICBzdG9yZU9wOiBcInN0b3JlXCIsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZGVwdGhTdGVuY2lsQXR0YWNobWVudDoge1xuICAgICAgICB2aWV3OiB0aGlzLmRlcHRoVGV4dHVyZS5jcmVhdGVWaWV3KCksXG4gICAgICAgIGRlcHRoQ2xlYXJWYWx1ZTogMS4wLFxuICAgICAgICBkZXB0aExvYWRPcDogXCJjbGVhclwiLFxuICAgICAgICBkZXB0aFN0b3JlT3A6IFwic3RvcmVcIlxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5nbG9iYWxVbmlmb3Jtcy50aWNrKCk7XG4gICAgdGhpcy5nbG9iYWxVbmlmb3Jtcy5iaW5kKHBhc3MpO1xuXG4gICAgdmFyIGRyYXdDYWxsczogbnVtYmVyID0gMDtcblxuICAgIHBhc3Muc2V0UGlwZWxpbmUodGhpcy50cmlhbmdsZVBpcGVsaW5lLmdldCgpKTtcbiAgICBmb3IgKGxldCBtZXNoIG9mIHNjZW5lLmdldEFsbE1lc2hlcygpKSB7XG4gICAgICBtZXNoLmRyYXcocGFzcyk7XG4gICAgICBkcmF3Q2FsbHMrKztcbiAgICB9O1xuXG4gICAgcGFzcy5zZXRQaXBlbGluZSh0aGlzLmxpbmVQaXBlbGluZS5nZXQoKSk7XG4gICAgZm9yIChsZXQgbGluZXMgb2Ygc2NlbmUuZ2V0QWxsTGluZXMoKSkge1xuICAgICAgbGluZXMuZHJhdyhwYXNzKTtcbiAgICAgIGRyYXdDYWxscysrO1xuICAgIH07XG5cbiAgICBwYXNzLnNldFBpcGVsaW5lKHRoaXMucG9pbnRQaXBlbGluZS5nZXQoKSk7XG4gICAgZm9yIChsZXQgcG9pbnRzIG9mIHNjZW5lLmdldEFsbFBvaW50cygpKSB7XG4gICAgICBwb2ludHMuZHJhdyhwYXNzKTtcbiAgICAgIGRyYXdDYWxscysrO1xuICAgIH1cblxuICAgIHBhc3Muc2V0UGlwZWxpbmUodGhpcy5pbnN0YW5jZWRUcmlhbmdsZVBpcGVsaW5lLmdldCgpKTtcbiAgICBmb3IgKGxldCBtZXNoIG9mIHNjZW5lLmdldEFsbE1lc2hlc0luc3RhbmNlZCgpKSB7XG4gICAgICBtZXNoLmRyYXcocGFzcyk7XG4gICAgICBkcmF3Q2FsbHMrKztcbiAgICB9XG5cbiAgICBJTlNUQU5DRS5nZXRTdGF0cygpLnNldERyYXdDYWxscyhkcmF3Q2FsbHMpO1xuXG4gICAgcGFzcy5lbmQoKTtcbiAgICBjb25zdCBjb21tYW5kQnVmZmVyID0gZW5jb2Rlci5maW5pc2goKTtcbiAgICB0aGlzLmRldmljZS5xdWV1ZS5zdWJtaXQoW2NvbW1hbmRCdWZmZXJdKTtcblxuICAgIGF3YWl0IHRoaXMuZGV2aWNlLnF1ZXVlLm9uU3VibWl0dGVkV29ya0RvbmUoKTtcblxuICB9XG5cbn1cblxuXG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renderer.ts\n");

/***/ }),

/***/ "./src/render/renterMeshInstanced.ts":
/*!*******************************************!*\
  !*** ./src/render/renterMeshInstanced.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderMeshInstanced: () => (/* binding */ RenderMeshInstanced)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _renderMesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderMesh */ \"./src/render/renderMesh.ts\");\n/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./flags */ \"./src/render/flags.ts\");\n\n\n\nclass RenderMeshInstanced extends _renderMesh__WEBPACK_IMPORTED_MODULE_1__.RenderMesh {\n    constructor(parent, vertices, indices, model, transforms) {\n        super(parent, vertices, indices, model);\n        this.instanceCount = transforms.length;\n        const transformsList = [];\n        for (let i = 0; i < transforms.length; i++)\n            transformsList.push(...transforms[i]);\n        const transformsArray = new Float32Array(transformsList);\n        this.transformBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"transform array\",\n            size: transformsArray.byteLength,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.transformBuffer, 0, transformsArray);\n    }\n    updateBindGroup() {\n        this.bindGroup = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBindGroup({\n            label: \"bind group instanced mesh\",\n            layout: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getBindGroupLayoutInstanced(),\n            entries: [\n                {\n                    binding: 0,\n                    resource: { buffer: this.modelBuffer },\n                }, {\n                    binding: 1,\n                    resource: { buffer: this.parent.getColorBuffer() },\n                }, {\n                    binding: 2,\n                    resource: { buffer: this.flagsBuffer }\n                }, {\n                    binding: 3,\n                    resource: { buffer: this.transformBuffer }\n                }\n            ]\n        });\n    }\n    setConstantScreenSize(b) {\n        if (b) {\n            this.flags[0] |= _flags__WEBPACK_IMPORTED_MODULE_2__.CONSTANT_SCREEN_SIZE_BIT;\n        }\n        else {\n            this.flags[0] &= ~_flags__WEBPACK_IMPORTED_MODULE_2__.CONSTANT_SCREEN_SIZE_BIT;\n        }\n    }\n    draw(pass) {\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.setIndexBuffer(this.indexBuffer, \"uint32\");\n        pass.drawIndexed(this.indexCount, this.instanceCount);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDeEQsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3JlbnRlck1lc2hJbnN0YW5jZWQudHM/OGFjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiXG5pbXBvcnQgeyBtYXQ0LCBNYXQ0IH0gZnJvbSBcIndncHUtbWF0cml4XCJcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBSZW5kZXJNZXNoIH0gZnJvbSBcIi4vcmVuZGVyTWVzaFwiO1xuaW1wb3J0IHsgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUIH0gZnJvbSBcIi4vZmxhZ3NcIjtcblxuZXhwb3J0IGNsYXNzIFJlbmRlck1lc2hJbnN0YW5jZWQgZXh0ZW5kcyBSZW5kZXJNZXNoIHtcblxuICBwcml2YXRlIGluc3RhbmNlQ291bnQ6IG51bWJlcjtcbiAgcHJpdmF0ZSB0cmFuc2Zvcm1CdWZmZXIhOiBHUFVCdWZmZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50OiBHZW9tZXRyeSxcbiAgICB2ZXJ0aWNlczogRmxvYXQzMkFycmF5LFxuICAgIGluZGljZXM6IEludDMyQXJyYXksXG4gICAgbW9kZWw6IE1hdDQsXG4gICAgdHJhbnNmb3JtczogTWF0NFtdXG4gICkge1xuICAgIHN1cGVyKHBhcmVudCwgdmVydGljZXMsIGluZGljZXMsIG1vZGVsKTtcblxuICAgIHRoaXMuaW5zdGFuY2VDb3VudCA9IHRyYW5zZm9ybXMubGVuZ3RoO1xuXG4gICAgY29uc3QgdHJhbnNmb3Jtc0xpc3Q6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB0cmFuc2Zvcm1zTGlzdC5wdXNoKC4uLnRyYW5zZm9ybXNbaV0pO1xuICAgIGNvbnN0IHRyYW5zZm9ybXNBcnJheTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0cmFuc2Zvcm1zTGlzdCk7XG4gICAgdGhpcy50cmFuc2Zvcm1CdWZmZXIgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBsYWJlbDogXCJ0cmFuc2Zvcm0gYXJyYXlcIixcbiAgICAgIHNpemU6IHRyYW5zZm9ybXNBcnJheS5ieXRlTGVuZ3RoLFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMudHJhbnNmb3JtQnVmZmVyLCAwLCB0cmFuc2Zvcm1zQXJyYXkpO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdXBkYXRlQmluZEdyb3VwKCk6IHZvaWQge1xuICAgIHRoaXMuYmluZEdyb3VwID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgICAgbGFiZWw6IFwiYmluZCBncm91cCBpbnN0YW5jZWQgbWVzaFwiLFxuICAgICAgbGF5b3V0OiBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldEJpbmRHcm91cExheW91dEluc3RhbmNlZCgpLFxuICAgICAgZW50cmllczogW1xuICAgICAgICB7XG4gICAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMubW9kZWxCdWZmZXIgfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDEsXG4gICAgICAgICAgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLnBhcmVudC5nZXRDb2xvckJ1ZmZlcigpIH0sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAyLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5mbGFnc0J1ZmZlciB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAzLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy50cmFuc2Zvcm1CdWZmZXIgfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0Q29uc3RhbnRTY3JlZW5TaXplKGI6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoYikge1xuICAgICAgdGhpcy5mbGFnc1swXSB8PSBDT05TVEFOVF9TQ1JFRU5fU0laRV9CSVQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmxhZ3NbMF0gJj0gfkNPTlNUQU5UX1NDUkVFTl9TSVpFX0JJVDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZHJhdyhwYXNzOiBHUFVSZW5kZXJQYXNzRW5jb2Rlcik6IHZvaWQge1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDAsIHRoaXMuYmluZEdyb3VwKTtcbiAgICBwYXNzLnNldFZlcnRleEJ1ZmZlcigwLCB0aGlzLnZlcnRleEJ1ZmZlcik7XG4gICAgcGFzcy5zZXRJbmRleEJ1ZmZlcih0aGlzLmluZGV4QnVmZmVyLCBcInVpbnQzMlwiKTtcbiAgICBwYXNzLmRyYXdJbmRleGVkKHRoaXMuaW5kZXhDb3VudCwgdGhpcy5pbnN0YW5jZUNvdW50KTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/renterMeshInstanced.ts\n");

/***/ }),

/***/ "./src/scene/camera.ts":
/*!*****************************!*\
  !*** ./src/scene/camera.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Camera: () => (/* binding */ Camera)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mode */ \"./src/mode.ts\");\n\n\n\n\n\nclass Camera {\n    constructor(position, up, forward, fovy, screen) {\n        this.position = position;\n        this.up = up;\n        this.forward = forward;\n        this.fovy = fovy;\n        this.screen = screen;\n        this.isTurningRight = false;\n        this.isTurningLeft = false;\n        this.isMovingForward = false;\n        this.isMovingBackward = false;\n        this.isLookingUp = false;\n        this.isLookingDown = false;\n        this.isMovingLeft = false;\n        this.isMovingRight = false;\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(this.up);\n        this.lastFrameTime = performance.now();\n        this.viewProj = new Float32Array(16);\n        this.addEvents();\n    }\n    getViewProj() {\n        return this.viewProj;\n    }\n    getPosition() {\n        return this.position;\n    }\n    getFovy() {\n        return this.fovy;\n    }\n    setFovy(newFovy) {\n        this.fovy = newFovy;\n        this.updateViewProj();\n    }\n    getPixelAtPoint(point) {\n        const dir = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(point, this.position));\n        const center = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(this.position, this.forward);\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.forward, this.up);\n        const xRes = window.innerWidth;\n        const yRes = window.innerHeight;\n        const sizeY = 2.0 * Math.tan(this.fovy / 2.0);\n        const sizeX = sizeY / yRes * xRes;\n        const ray = new _geometry_ray__WEBPACK_IMPORTED_MODULE_2__.Ray(this.position, dir);\n        const tScreen = ray.intersectPlane(new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(center, this.forward), true);\n        const pScreen = ray.at(tScreen);\n        const topLeft = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(center, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(this.up, sizeY / 2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(right, sizeX / -2)));\n        const topLeftToPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(pScreen, topLeft);\n        const x = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.dot(topLeftToPoint, right);\n        const y = -wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.dot(topLeftToPoint, this.up);\n        return [\n            Math.floor(x / sizeX * xRes),\n            Math.floor(y / sizeY * yRes)\n        ];\n    }\n    getRayAtPixel(x, y) {\n        const center = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(this.position, this.forward);\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.forward, this.up);\n        const xRes = window.innerWidth;\n        const yRes = window.innerHeight;\n        const sizeY = 2.0 * Math.tan(this.fovy / 2.0);\n        const sizeX = sizeY / yRes * xRes;\n        const screenPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(center, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(right, sizeX / xRes * (x - xRes / 2.0)), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(this.up, sizeY / yRes * (y - yRes / 2.0))));\n        return new _geometry_ray__WEBPACK_IMPORTED_MODULE_2__.Ray(this.position, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(screenPoint, this.position));\n    }\n    pixelSizeAtDist(dist) {\n        const yRes = window.innerHeight;\n        const sizeY = 2.0 * Math.tan(this.fovy / 2.0);\n        return sizeY / yRes * dist;\n    }\n    addEvents() {\n        document.addEventListener('keydown', (event) => {\n            switch (event.code) {\n                case 'ArrowLeft':\n                    this.isTurningLeft = true;\n                    break;\n                case 'ArrowRight':\n                    this.isTurningRight = true;\n                    break;\n                case 'ArrowUp':\n                    this.isLookingUp = true;\n                    break;\n                case 'ArrowDown':\n                    this.isLookingDown = true;\n                    break;\n                case 'KeyW':\n                    this.isMovingForward = true;\n                    break;\n                case 'KeyS':\n                    this.isMovingBackward = true;\n                    break;\n                case 'KeyA':\n                    this.isMovingLeft = true;\n                    break;\n                case 'KeyD':\n                    this.isMovingRight = true;\n                    break;\n            }\n        }, false);\n        document.addEventListener('keyup', (event) => {\n            switch (event.code) {\n                case 'ArrowLeft':\n                    this.isTurningLeft = false;\n                    break;\n                case 'ArrowRight':\n                    this.isTurningRight = false;\n                    break;\n                case 'ArrowUp':\n                    this.isLookingUp = false;\n                    break;\n                case 'ArrowDown':\n                    this.isLookingDown = false;\n                    break;\n                case 'KeyW':\n                    this.isMovingForward = false;\n                    break;\n                case 'KeyS':\n                    this.isMovingBackward = false;\n                    break;\n                case 'KeyA':\n                    this.isMovingLeft = false;\n                    break;\n                case 'KeyD':\n                    this.isMovingRight = false;\n                    break;\n            }\n        }, false);\n    }\n    tick() {\n        var now = performance.now();\n        if (_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMode() == _mode__WEBPACK_IMPORTED_MODULE_3__.OperatingMode.Navigation) {\n            if (this.isTurningLeft) {\n                this.turnRight((this.lastFrameTime - now) / 500);\n            }\n            else if (this.isTurningRight == true) {\n                this.turnRight((now - this.lastFrameTime) / 500);\n            }\n            if (this.isLookingUp) {\n                this.lookUp((now - this.lastFrameTime) / 500);\n            }\n            else if (this.isLookingDown) {\n                this.lookUp((this.lastFrameTime - now) / 500);\n            }\n            if (this.isMovingForward) {\n                this.goForward((now - this.lastFrameTime) / 20);\n            }\n            else if (this.isMovingBackward) {\n                this.goForward((this.lastFrameTime - now) / 20);\n            }\n            if (this.isMovingRight) {\n                this.goRight((now - this.lastFrameTime) / 20);\n            }\n            else if (this.isMovingLeft) {\n                this.goRight((this.lastFrameTime - now) / 20);\n            }\n        }\n        this.updateViewProj();\n        this.lastFrameTime = now;\n    }\n    turnRight(amount) {\n        const rotation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.rotateZ(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.identity(), -amount);\n        this.forward = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.forward, rotation);\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.up, rotation);\n    }\n    lookUp(amount) {\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.forward, this.up);\n        const rotation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.axisRotate(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.identity(), right, amount);\n        this.forward = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.forward, rotation);\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.up, rotation);\n    }\n    goForward(amount) {\n        this.position = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(this.forward, amount), this.position);\n    }\n    goRight(amount) {\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.up, this.forward);\n        this.position = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(this.position, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(right, -amount));\n    }\n    updateViewProj() {\n        const view = new Float32Array(16);\n        const proj = new Float32Array(16);\n        const swapYZ = (v) => {\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(v[0], v[2], v[1]);\n        };\n        const forward = swapYZ(this.forward);\n        const position = swapYZ(this.position);\n        const up = swapYZ(this.up);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.lookAt(position, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(position, forward), up, view);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.perspective(this.fovy, this.screen.width / this.screen.height, 0.1, 10000.0, proj);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.multiply(proj, view, this.viewProj);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NlbmUvY2FtZXJhLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvRDtBQUNuQjtBQUNTO0FBQ0o7QUFDQztBQUVoQyxNQUFNLE1BQU07SUFhakIsWUFDVSxRQUFjLEVBQ2QsRUFBUSxFQUNSLE9BQWEsRUFDYixJQUFZLEVBQ1osTUFBeUI7UUFKekIsYUFBUSxHQUFSLFFBQVEsQ0FBTTtRQUNkLE9BQUUsR0FBRixFQUFFLENBQU07UUFDUixZQUFPLEdBQVAsT0FBTyxDQUFNO1FBQ2IsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUNaLFdBQU0sR0FBTixNQUFNLENBQW1CO1FBZDNCLG1CQUFjLEdBQVksS0FBSyxDQUFDO1FBQ2hDLGtCQUFhLEdBQVksS0FBSyxDQUFDO1FBQy9CLG9CQUFlLEdBQVksS0FBSyxDQUFDO1FBQ2pDLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQUNsQyxnQkFBVyxHQUFZLEtBQUssQ0FBQztRQUM3QixrQkFBYSxHQUFZLEtBQUssQ0FBQztRQUMvQixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUM5QixrQkFBYSxHQUFZLEtBQUssQ0FBQztRQVFyQyxJQUFJLENBQUMsRUFBRSxHQUFHLDZDQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsQyxJQUFJLENBQUMsYUFBYSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN2QyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBRUQsV0FBVztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBRUQsV0FBVztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBRUQsT0FBTztRQUNMLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztJQUNuQixDQUFDO0lBRUQsT0FBTyxDQUFDLE9BQWU7UUFDckIsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7UUFDcEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFTSxlQUFlLENBQUMsS0FBVztRQUVoQyxNQUFNLEdBQUcsR0FBUyw2Q0FBSSxDQUFDLFNBQVMsQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDakUsTUFBTSxNQUFNLEdBQVMsNkNBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0QsTUFBTSxLQUFLLEdBQVMsNkNBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDdEQsTUFBTSxJQUFJLEdBQVcsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUN2QyxNQUFNLElBQUksR0FBVyxNQUFNLENBQUMsV0FBVyxDQUFDO1FBQ3hDLE1BQU0sS0FBSyxHQUFXLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDdEQsTUFBTSxLQUFLLEdBQVcsS0FBSyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUM7UUFFMUMsTUFBTSxHQUFHLEdBQVEsSUFBSSw4Q0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDN0MsTUFBTSxPQUFPLEdBQVcsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLGtEQUFLLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLENBQUUsQ0FBQztRQUNuRixNQUFNLE9BQU8sR0FBUyxHQUFHLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRXRDLE1BQU0sT0FBTyxHQUFTLDZDQUFJLENBQUMsR0FBRyxDQUM1QixNQUFNLEVBQ04sNkNBQUksQ0FBQyxHQUFHLENBQ04sNkNBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQzlCLDZDQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FDOUIsQ0FDRixDQUFDO1FBRUYsTUFBTSxjQUFjLEdBQUcsNkNBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2xELE1BQU0sQ0FBQyxHQUFXLDZDQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNsRCxNQUFNLENBQUMsR0FBVyxDQUFDLDZDQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFckQsT0FBTztZQUNMLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDNUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQztTQUM3QixDQUFDO0lBQ0osQ0FBQztJQUVNLGFBQWEsQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUN2QyxNQUFNLE1BQU0sR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMzRCxNQUFNLEtBQUssR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0RCxNQUFNLElBQUksR0FBVyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ3ZDLE1BQU0sSUFBSSxHQUFXLE1BQU0sQ0FBQyxXQUFXLENBQUM7UUFDeEMsTUFBTSxLQUFLLEdBQVcsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztRQUN0RCxNQUFNLEtBQUssR0FBVyxLQUFLLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQztRQUMxQyxNQUFNLFdBQVcsR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FDaEMsTUFBTSxFQUNOLDZDQUFJLENBQUMsR0FBRyxDQUNOLDZDQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUNsRCw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQ3JELENBQ0YsQ0FBQztRQUNGLE9BQU8sSUFBSSw4Q0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsNkNBQUksQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFTSxlQUFlLENBQUMsSUFBWTtRQUNqQyxNQUFNLElBQUksR0FBVyxNQUFNLENBQUMsV0FBVyxDQUFDO1FBQ3hDLE1BQU0sS0FBSyxHQUFXLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDdEQsT0FBTyxLQUFLLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQztJQUM3QixDQUFDO0lBRU8sU0FBUztRQUVmLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUM3QyxRQUFRLEtBQUssQ0FBQyxJQUFJLEVBQUU7Z0JBQ2xCLEtBQUssV0FBVztvQkFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztvQkFBQyxNQUFNO2dCQUNuRCxLQUFLLFlBQVk7b0JBQUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7b0JBQUMsTUFBTTtnQkFDckQsS0FBSyxTQUFTO29CQUFFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO29CQUFDLE1BQU07Z0JBQy9DLEtBQUssV0FBVztvQkFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztvQkFBQyxNQUFNO2dCQUNuRCxLQUFLLE1BQU07b0JBQUUsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7b0JBQUMsTUFBTTtnQkFDaEQsS0FBSyxNQUFNO29CQUFFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7b0JBQUMsTUFBTTtnQkFDakQsS0FBSyxNQUFNO29CQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO29CQUFDLE1BQU07Z0JBQzdDLEtBQUssTUFBTTtvQkFBRSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztvQkFBQyxNQUFNO2FBQy9DO1FBQ0gsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRVYsUUFBUSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQzNDLFFBQVEsS0FBSyxDQUFDLElBQUksRUFBRTtnQkFDbEIsS0FBSyxXQUFXO29CQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO29CQUFDLE1BQU07Z0JBQ3BELEtBQUssWUFBWTtvQkFBRSxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztvQkFBQyxNQUFNO2dCQUN0RCxLQUFLLFNBQVM7b0JBQUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7b0JBQUMsTUFBTTtnQkFDaEQsS0FBSyxXQUFXO29CQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO29CQUFDLE1BQU07Z0JBQ3BELEtBQUssTUFBTTtvQkFBRSxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztvQkFBQyxNQUFNO2dCQUNqRCxLQUFLLE1BQU07b0JBQUUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztvQkFBQyxNQUFNO2dCQUNsRCxLQUFLLE1BQU07b0JBQUUsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7b0JBQUMsTUFBTTtnQkFDOUMsS0FBSyxNQUFNO29CQUFFLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO29CQUFDLE1BQU07YUFDaEQ7UUFDSCxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFFWixDQUFDO0lBR0QsSUFBSTtRQUdGLElBQUksR0FBRyxHQUFXLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUVwQyxJQUFJLDBDQUFRLENBQUMsT0FBTyxFQUFFLElBQUksZ0RBQWEsQ0FBQyxVQUFVLEVBQUU7WUFDbEQsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO2dCQUN0QixJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQzthQUNsRDtpQkFBTSxJQUFJLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxFQUFFO2dCQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQzthQUNsRDtZQUVELElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtnQkFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7YUFDL0M7aUJBQU0sSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO2dCQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQzthQUMvQztZQUVELElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtnQkFDeEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7YUFDakQ7aUJBQU0sSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ2hDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2FBQ2pEO1lBRUQsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO2dCQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQzthQUMvQztpQkFBTSxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7Z0JBQzVCLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2FBQy9DO1NBQ0Y7UUFDRCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUM7SUFDM0IsQ0FBQztJQUVPLFNBQVMsQ0FBQyxNQUFjO1FBQzlCLE1BQU0sUUFBUSxHQUFTLDZDQUFJLENBQUMsT0FBTyxDQUFDLDZDQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5RCxJQUFJLENBQUMsT0FBTyxHQUFHLDZDQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLEVBQUUsR0FBRyw2Q0FBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFDTyxNQUFNLENBQUMsTUFBYztRQUMzQixNQUFNLEtBQUssR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN0RCxNQUFNLFFBQVEsR0FBUyw2Q0FBSSxDQUFDLFVBQVUsQ0FBQyw2Q0FBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN2RSxJQUFJLENBQUMsT0FBTyxHQUFHLDZDQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLEVBQUUsR0FBRyw2Q0FBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0lBQ2xELENBQUM7SUFFTyxTQUFTLENBQUMsTUFBYztRQUM5QixJQUFJLENBQUMsUUFBUSxHQUFHLDZDQUFJLENBQUMsR0FBRyxDQUFDLDZDQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFFTyxPQUFPLENBQUMsTUFBYztRQUM1QixNQUFNLEtBQUssR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsUUFBUSxHQUFHLDZDQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsNkNBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBRU8sY0FBYztRQUNwQixNQUFNLElBQUksR0FBRyxJQUFJLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsQyxNQUFNLElBQUksR0FBRyxJQUFJLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUVsQyxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQU8sRUFBRSxFQUFFO1lBQ3pCLE9BQU8sNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QyxDQUFDO1FBRUQsTUFBTSxPQUFPLEdBQVMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMzQyxNQUFNLFFBQVEsR0FBUyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzdDLE1BQU0sRUFBRSxHQUFTLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFakMsNkNBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLDZDQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDN0QsNkNBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3hGLDZDQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTNDLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3NjZW5lL2NhbWVyYS50cz8xNWFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdDQsIHZlYzMsIE1hdDQsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIlxuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BsYW5lXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmF5XCI7XG5pbXBvcnQgeyBPcGVyYXRpbmdNb2RlIH0gZnJvbSBcIi4uL21vZGVcIlxuXG5leHBvcnQgY2xhc3MgQ2FtZXJhIHtcblxuICBwcml2YXRlIHZpZXdQcm9qOiBGbG9hdDMyQXJyYXk7XG4gIHByaXZhdGUgbGFzdEZyYW1lVGltZTogbnVtYmVyO1xuICBwcml2YXRlIGlzVHVybmluZ1JpZ2h0OiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgaXNUdXJuaW5nTGVmdDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGlzTW92aW5nRm9yd2FyZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGlzTW92aW5nQmFja3dhcmQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc0xvb2tpbmdVcDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGlzTG9va2luZ0Rvd246IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc01vdmluZ0xlZnQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc01vdmluZ1JpZ2h0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwb3NpdGlvbjogVmVjMyxcbiAgICBwcml2YXRlIHVwOiBWZWMzLFxuICAgIHByaXZhdGUgZm9yd2FyZDogVmVjMyxcbiAgICBwcml2YXRlIGZvdnk6IG51bWJlcixcbiAgICBwcml2YXRlIHNjcmVlbjogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICB0aGlzLnVwID0gdmVjMy5ub3JtYWxpemUodGhpcy51cCk7XG4gICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgdGhpcy52aWV3UHJvaiA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xuICAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gIH1cblxuICBnZXRWaWV3UHJvaigpOiBGbG9hdDMyQXJyYXkge1xuICAgIHJldHVybiB0aGlzLnZpZXdQcm9qO1xuICB9XG5cbiAgZ2V0UG9zaXRpb24oKTogVmVjMyB7XG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb247XG4gIH1cblxuICBnZXRGb3Z5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZm92eTtcbiAgfVxuXG4gIHNldEZvdnkobmV3Rm92eTogbnVtYmVyKSB7XG4gICAgdGhpcy5mb3Z5ID0gbmV3Rm92eTtcbiAgICB0aGlzLnVwZGF0ZVZpZXdQcm9qKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UGl4ZWxBdFBvaW50KHBvaW50OiBWZWMzKTogW251bWJlciwgbnVtYmVyXSB7XG5cbiAgICBjb25zdCBkaXI6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1Yihwb2ludCwgdGhpcy5wb3NpdGlvbikpO1xuICAgIGNvbnN0IGNlbnRlcjogVmVjMyA9IHZlYzMuYWRkKHRoaXMucG9zaXRpb24sIHRoaXMuZm9yd2FyZCk7XG4gICAgY29uc3QgcmlnaHQ6IFZlYzMgPSB2ZWMzLmNyb3NzKHRoaXMuZm9yd2FyZCwgdGhpcy51cCk7XG4gICAgY29uc3QgeFJlczogbnVtYmVyID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgY29uc3QgeVJlczogbnVtYmVyID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGNvbnN0IHNpemVZOiBudW1iZXIgPSAyLjAgKiBNYXRoLnRhbih0aGlzLmZvdnkgLyAyLjApO1xuICAgIGNvbnN0IHNpemVYOiBudW1iZXIgPSBzaXplWSAvIHlSZXMgKiB4UmVzO1xuXG4gICAgY29uc3QgcmF5OiBSYXkgPSBuZXcgUmF5KHRoaXMucG9zaXRpb24sIGRpcik7XG4gICAgY29uc3QgdFNjcmVlbjogbnVtYmVyID0gcmF5LmludGVyc2VjdFBsYW5lKG5ldyBQbGFuZShjZW50ZXIsIHRoaXMuZm9yd2FyZCksIHRydWUpITtcbiAgICBjb25zdCBwU2NyZWVuOiBWZWMzID0gcmF5LmF0KHRTY3JlZW4pO1xuXG4gICAgY29uc3QgdG9wTGVmdDogVmVjMyA9IHZlYzMuYWRkKFxuICAgICAgY2VudGVyLFxuICAgICAgdmVjMy5hZGQoXG4gICAgICAgIHZlYzMuc2NhbGUodGhpcy51cCwgc2l6ZVkgLyAyKSxcbiAgICAgICAgdmVjMy5zY2FsZShyaWdodCwgc2l6ZVggLyAtMilcbiAgICAgIClcbiAgICApO1xuXG4gICAgY29uc3QgdG9wTGVmdFRvUG9pbnQgPSB2ZWMzLnN1YihwU2NyZWVuLCB0b3BMZWZ0KTtcbiAgICBjb25zdCB4OiBudW1iZXIgPSB2ZWMzLmRvdCh0b3BMZWZ0VG9Qb2ludCwgcmlnaHQpO1xuICAgIGNvbnN0IHk6IG51bWJlciA9IC12ZWMzLmRvdCh0b3BMZWZ0VG9Qb2ludCwgdGhpcy51cCk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgTWF0aC5mbG9vcih4IC8gc2l6ZVggKiB4UmVzKSxcbiAgICAgIE1hdGguZmxvb3IoeSAvIHNpemVZICogeVJlcylcbiAgICBdO1xuICB9XG5cbiAgcHVibGljIGdldFJheUF0UGl4ZWwoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBSYXkge1xuICAgIGNvbnN0IGNlbnRlcjogVmVjMyA9IHZlYzMuYWRkKHRoaXMucG9zaXRpb24sIHRoaXMuZm9yd2FyZCk7XG4gICAgY29uc3QgcmlnaHQ6IFZlYzMgPSB2ZWMzLmNyb3NzKHRoaXMuZm9yd2FyZCwgdGhpcy51cCk7XG4gICAgY29uc3QgeFJlczogbnVtYmVyID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgY29uc3QgeVJlczogbnVtYmVyID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGNvbnN0IHNpemVZOiBudW1iZXIgPSAyLjAgKiBNYXRoLnRhbih0aGlzLmZvdnkgLyAyLjApO1xuICAgIGNvbnN0IHNpemVYOiBudW1iZXIgPSBzaXplWSAvIHlSZXMgKiB4UmVzO1xuICAgIGNvbnN0IHNjcmVlblBvaW50OiBWZWMzID0gdmVjMy5hZGQoXG4gICAgICBjZW50ZXIsXG4gICAgICB2ZWMzLnN1YihcbiAgICAgICAgdmVjMy5zY2FsZShyaWdodCwgc2l6ZVggLyB4UmVzICogKHggLSB4UmVzIC8gMi4wKSksXG4gICAgICAgIHZlYzMuc2NhbGUodGhpcy51cCwgc2l6ZVkgLyB5UmVzICogKHkgLSB5UmVzIC8gMi4wKSlcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiBuZXcgUmF5KHRoaXMucG9zaXRpb24sIHZlYzMuc3ViKHNjcmVlblBvaW50LCB0aGlzLnBvc2l0aW9uKSk7XG4gIH1cblxuICBwdWJsaWMgcGl4ZWxTaXplQXREaXN0KGRpc3Q6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgeVJlczogbnVtYmVyID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGNvbnN0IHNpemVZOiBudW1iZXIgPSAyLjAgKiBNYXRoLnRhbih0aGlzLmZvdnkgLyAyLjApO1xuICAgIHJldHVybiBzaXplWSAvIHlSZXMgKiBkaXN0O1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRFdmVudHMoKSB7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmNvZGUpIHtcbiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzogdGhpcy5pc1R1cm5pbmdMZWZ0ID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOiB0aGlzLmlzVHVybmluZ1JpZ2h0ID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOiB0aGlzLmlzTG9va2luZ1VwID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6IHRoaXMuaXNMb29raW5nRG93biA9IHRydWU7IGJyZWFrO1xuICAgICAgICBjYXNlICdLZXlXJzogdGhpcy5pc01vdmluZ0ZvcndhcmQgPSB0cnVlOyBicmVhaztcbiAgICAgICAgY2FzZSAnS2V5Uyc6IHRoaXMuaXNNb3ZpbmdCYWNrd2FyZCA9IHRydWU7IGJyZWFrO1xuICAgICAgICBjYXNlICdLZXlBJzogdGhpcy5pc01vdmluZ0xlZnQgPSB0cnVlOyBicmVhaztcbiAgICAgICAgY2FzZSAnS2V5RCc6IHRoaXMuaXNNb3ZpbmdSaWdodCA9IHRydWU7IGJyZWFrO1xuICAgICAgfVxuICAgIH0sIGZhbHNlKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LmNvZGUpIHtcbiAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzogdGhpcy5pc1R1cm5pbmdMZWZ0ID0gZmFsc2U7IGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzogdGhpcy5pc1R1cm5pbmdSaWdodCA9IGZhbHNlOyBicmVhaztcbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6IHRoaXMuaXNMb29raW5nVXAgPSBmYWxzZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6IHRoaXMuaXNMb29raW5nRG93biA9IGZhbHNlOyBicmVhaztcbiAgICAgICAgY2FzZSAnS2V5Vyc6IHRoaXMuaXNNb3ZpbmdGb3J3YXJkID0gZmFsc2U7IGJyZWFrO1xuICAgICAgICBjYXNlICdLZXlTJzogdGhpcy5pc01vdmluZ0JhY2t3YXJkID0gZmFsc2U7IGJyZWFrO1xuICAgICAgICBjYXNlICdLZXlBJzogdGhpcy5pc01vdmluZ0xlZnQgPSBmYWxzZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0tleUQnOiB0aGlzLmlzTW92aW5nUmlnaHQgPSBmYWxzZTsgYnJlYWs7XG4gICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gIH1cblxuXG4gIHRpY2soKTogdm9pZCB7XG5cblxuICAgIHZhciBub3c6IG51bWJlciA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgaWYgKElOU1RBTkNFLmdldE1vZGUoKSA9PSBPcGVyYXRpbmdNb2RlLk5hdmlnYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmlzVHVybmluZ0xlZnQpIHtcbiAgICAgICAgdGhpcy50dXJuUmlnaHQoKHRoaXMubGFzdEZyYW1lVGltZSAtIG5vdykgLyA1MDApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzVHVybmluZ1JpZ2h0ID09IHRydWUpIHtcbiAgICAgICAgdGhpcy50dXJuUmlnaHQoKG5vdyAtIHRoaXMubGFzdEZyYW1lVGltZSkgLyA1MDApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc0xvb2tpbmdVcCkge1xuICAgICAgICB0aGlzLmxvb2tVcCgobm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lKSAvIDUwMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNMb29raW5nRG93bikge1xuICAgICAgICB0aGlzLmxvb2tVcCgodGhpcy5sYXN0RnJhbWVUaW1lIC0gbm93KSAvIDUwMCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmlzTW92aW5nRm9yd2FyZCkge1xuICAgICAgICB0aGlzLmdvRm9yd2FyZCgobm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lKSAvIDIwKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc01vdmluZ0JhY2t3YXJkKSB7XG4gICAgICAgIHRoaXMuZ29Gb3J3YXJkKCh0aGlzLmxhc3RGcmFtZVRpbWUgLSBub3cpIC8gMjApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc01vdmluZ1JpZ2h0KSB7XG4gICAgICAgIHRoaXMuZ29SaWdodCgobm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lKSAvIDIwKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc01vdmluZ0xlZnQpIHtcbiAgICAgICAgdGhpcy5nb1JpZ2h0KCh0aGlzLmxhc3RGcmFtZVRpbWUgLSBub3cpIC8gMjApO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVZpZXdQcm9qKCk7XG4gICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gbm93O1xuICB9XG5cbiAgcHJpdmF0ZSB0dXJuUmlnaHQoYW1vdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByb3RhdGlvbjogTWF0NCA9IG1hdDQucm90YXRlWihtYXQ0LmlkZW50aXR5KCksIC1hbW91bnQpO1xuICAgIHRoaXMuZm9yd2FyZCA9IHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLmZvcndhcmQsIHJvdGF0aW9uKTtcbiAgICB0aGlzLnVwID0gdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudXAsIHJvdGF0aW9uKTtcbiAgfVxuICBwcml2YXRlIGxvb2tVcChhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHJpZ2h0OiBWZWMzID0gdmVjMy5jcm9zcyh0aGlzLmZvcndhcmQsIHRoaXMudXApO1xuICAgIGNvbnN0IHJvdGF0aW9uOiBNYXQ0ID0gbWF0NC5heGlzUm90YXRlKG1hdDQuaWRlbnRpdHkoKSwgcmlnaHQsIGFtb3VudCk7XG4gICAgdGhpcy5mb3J3YXJkID0gdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMuZm9yd2FyZCwgcm90YXRpb24pO1xuICAgIHRoaXMudXAgPSB2ZWMzLnRyYW5zZm9ybU1hdDQodGhpcy51cCwgcm90YXRpb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBnb0ZvcndhcmQoYW1vdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gdmVjMy5hZGQodmVjMy5zY2FsZSh0aGlzLmZvcndhcmQsIGFtb3VudCksIHRoaXMucG9zaXRpb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBnb1JpZ2h0KGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgcmlnaHQ6IFZlYzMgPSB2ZWMzLmNyb3NzKHRoaXMudXAsIHRoaXMuZm9yd2FyZCk7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHZlYzMuYWRkKHRoaXMucG9zaXRpb24sIHZlYzMuc2NhbGUocmlnaHQsIC1hbW91bnQpKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVmlld1Byb2ooKTogdm9pZCB7XG4gICAgY29uc3QgdmlldyA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xuICAgIGNvbnN0IHByb2ogPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcblxuICAgIGNvbnN0IHN3YXBZWiA9ICh2OiBWZWMzKSA9PiB7XG4gICAgICByZXR1cm4gdmVjMy5jcmVhdGUodlswXSwgdlsyXSwgdlsxXSk7XG4gICAgfVxuXG4gICAgY29uc3QgZm9yd2FyZDogVmVjMyA9IHN3YXBZWih0aGlzLmZvcndhcmQpO1xuICAgIGNvbnN0IHBvc2l0aW9uOiBWZWMzID0gc3dhcFlaKHRoaXMucG9zaXRpb24pO1xuICAgIGNvbnN0IHVwOiBWZWMzID0gc3dhcFlaKHRoaXMudXApO1xuXG4gICAgbWF0NC5sb29rQXQocG9zaXRpb24sIHZlYzMuYWRkKHBvc2l0aW9uLCBmb3J3YXJkKSwgdXAsIHZpZXcpO1xuICAgIG1hdDQucGVyc3BlY3RpdmUodGhpcy5mb3Z5LCB0aGlzLnNjcmVlbi53aWR0aCAvIHRoaXMuc2NyZWVuLmhlaWdodCwgMC4xLCAxMDAwMC4wLCBwcm9qKTtcbiAgICBtYXQ0Lm11bHRpcGx5KHByb2osIHZpZXcsIHRoaXMudmlld1Byb2opO1xuXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/scene/camera.ts\n");

/***/ }),

/***/ "./src/scene/constructionPlane.ts":
/*!****************************************!*\
  !*** ./src/scene/constructionPlane.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConstructionPlane: () => (/* binding */ ConstructionPlane)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _geometry_line__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geometry/line */ \"./src/geometry/line.ts\");\n/* harmony import */ var _geometry_lines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/lines */ \"./src/geometry/lines.ts\");\n\n\n\n// TODO: draw this first, disable depth buffer while drawing\nclass ConstructionPlane {\n    constructor(majorCount = 10, minorCount = 10, cellSize = 1) {\n        this.majorCount = majorCount;\n        this.minorCount = minorCount;\n        this.cellSize = cellSize;\n        this.majorLines = null;\n        this.minorLines = null;\n        this.xAxis = null;\n        this.yAxis = null;\n        this.setup();\n    }\n    setup() {\n        const cellCount = this.majorCount * this.minorCount;\n        const size = cellCount * this.cellSize;\n        const majorVerts = [];\n        const minorVerts = [];\n        const majorIndices = [];\n        const minorIndices = [];\n        var majorIndex = 0;\n        var minorIndex = 0;\n        const halfSize = size / 2.0;\n        const start = -halfSize;\n        const z = -0.001;\n        for (var i = 0; i <= cellCount; i++) {\n            let midOrEnd = (i === cellCount / 2) ? 0 : halfSize;\n            if (i % this.minorCount === 0) { // major line\n                majorVerts.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(start + i * this.cellSize, -halfSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(start + i * this.cellSize, midOrEnd, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(-halfSize, start + i * this.cellSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(midOrEnd, start + i * this.cellSize));\n                majorIndices.push(majorIndex, majorIndex + 1, majorIndex + 2, majorIndex + 3);\n                majorIndex += 4;\n            }\n            else { // minor line\n                minorVerts.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(start + i * this.cellSize, -halfSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(start + i * this.cellSize, midOrEnd, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(-halfSize, start + i * this.cellSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(midOrEnd, start + i * this.cellSize, z));\n                minorIndices.push(minorIndex, minorIndex + 1, minorIndex + 2, minorIndex + 3);\n                minorIndex += 4;\n            }\n        }\n        if (this.majorLines)\n            this.majorLines.delete();\n        if (this.minorLines)\n            this.minorLines.delete();\n        if (this.xAxis)\n            this.xAxis.delete();\n        if (this.yAxis)\n            this.yAxis.delete();\n        this.majorLines = new _geometry_lines__WEBPACK_IMPORTED_MODULE_1__.Lines(majorVerts, majorIndices, null, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.identity(), \"lighter grey\");\n        this.minorLines = new _geometry_lines__WEBPACK_IMPORTED_MODULE_1__.Lines(minorVerts, minorIndices, null, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.identity(), \"mid grey\");\n        this.xAxis = new _geometry_line__WEBPACK_IMPORTED_MODULE_0__.Line(null, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(halfSize, 0, 0), undefined, \"red\");\n        this.yAxis = new _geometry_line__WEBPACK_IMPORTED_MODULE_0__.Line(null, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, halfSize, 0), undefined, \"green\");\n    }\n    snapToGrid(point) {\n        const alignedWithOrigin = ((this.minorCount * this.majorCount) & 1) === 0;\n        var dx = point[0] % this.cellSize;\n        var dy = point[1] % this.cellSize;\n        if (dx < 0)\n            dx += this.cellSize;\n        if (dy < 0)\n            dy += this.cellSize;\n        if (!alignedWithOrigin) {\n            point[0] += this.cellSize / 2;\n            point[1] += this.cellSize / 2;\n        }\n        if (dx < this.cellSize / 2)\n            point[0] -= dx;\n        else\n            point[0] += this.cellSize - dx;\n        if (dy < this.cellSize / 2)\n            point[1] -= dy;\n        else\n            point[1] += this.cellSize - dy;\n        if (!alignedWithOrigin) {\n            point[0] -= this.cellSize / 2;\n            point[1] -= this.cellSize / 2;\n        }\n        return point;\n    }\n    getMinorCount() {\n        return this.minorCount;\n    }\n    getMajorCount() {\n        return this.majorCount;\n    }\n    getCellSize() {\n        return this.cellSize;\n    }\n    setMajorMaterial(mat) {\n        this.majorLines.setMaterial(mat);\n    }\n    setMinorMaterial(mat) {\n        this.minorLines.setMaterial(mat);\n    }\n    setMinorCount(count) {\n        this.minorCount = count;\n        this.setup();\n    }\n    setMajorCount(count) {\n        this.majorCount = count;\n        this.setup();\n    }\n    setCellSize(size) {\n        this.cellSize = size;\n        this.setup();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUN4QixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDZixDQUFDO0lBRU0sV0FBVyxDQUFDLElBQVk7UUFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2YsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvc2NlbmUvY29uc3RydWN0aW9uUGxhbmUudHM/OTJjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3YXJuIH0gZnJvbSBcImNvbnNvbGVcIjtcbmltcG9ydCB7IG1hdDQsIHZlYzMsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9saW5lXCI7XG5pbXBvcnQgeyBMaW5lcyB9IGZyb20gXCIuLi9nZW9tZXRyeS9saW5lc1wiO1xuaW1wb3J0IHsgTWF0ZXJpYWxOYW1lIH0gZnJvbSBcIi4uL21hdGVyaWFscy9tYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmVuZGVyTGluZXMgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlckxpbmVzXCJcbmltcG9ydCB7IFJlbmRlcklEIH0gZnJvbSBcIi4vc2NlbmVcIjtcblxuLy8gVE9ETzogZHJhdyB0aGlzIGZpcnN0LCBkaXNhYmxlIGRlcHRoIGJ1ZmZlciB3aGlsZSBkcmF3aW5nXG5leHBvcnQgY2xhc3MgQ29uc3RydWN0aW9uUGxhbmUge1xuXG4gIHByaXZhdGUgbWFqb3JMaW5lczogTGluZXMgfCBudWxsO1xuICBwcml2YXRlIG1pbm9yTGluZXM6IExpbmVzIHwgbnVsbDtcbiAgcHJpdmF0ZSB4QXhpczogTGluZSB8IG51bGw7XG4gIHByaXZhdGUgeUF4aXM6IExpbmUgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbWFqb3JDb3VudDogbnVtYmVyID0gMTAsXG4gICAgcHJpdmF0ZSBtaW5vckNvdW50OiBudW1iZXIgPSAxMCxcbiAgICBwcml2YXRlIGNlbGxTaXplOiBudW1iZXIgPSAxKSB7XG4gICAgdGhpcy5tYWpvckxpbmVzID0gbnVsbDtcbiAgICB0aGlzLm1pbm9yTGluZXMgPSBudWxsO1xuICAgIHRoaXMueEF4aXMgPSBudWxsO1xuICAgIHRoaXMueUF4aXMgPSBudWxsO1xuICAgIHRoaXMuc2V0dXAoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXAoKSB7XG5cblxuICAgIGNvbnN0IGNlbGxDb3VudCA9IHRoaXMubWFqb3JDb3VudCAqIHRoaXMubWlub3JDb3VudDtcbiAgICBjb25zdCBzaXplID0gY2VsbENvdW50ICogdGhpcy5jZWxsU2l6ZTtcblxuICAgIGNvbnN0IG1ham9yVmVydHM6IFZlYzNbXSA9IFtdO1xuICAgIGNvbnN0IG1pbm9yVmVydHM6IFZlYzNbXSA9IFtdO1xuICAgIGNvbnN0IG1ham9ySW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgICBjb25zdCBtaW5vckluZGljZXM6IG51bWJlcltdID0gW107XG5cbiAgICB2YXIgbWFqb3JJbmRleDogbnVtYmVyID0gMDtcbiAgICB2YXIgbWlub3JJbmRleDogbnVtYmVyID0gMDtcblxuICAgIGNvbnN0IGhhbGZTaXplID0gc2l6ZSAvIDIuMDtcbiAgICBjb25zdCBzdGFydDogbnVtYmVyID0gLWhhbGZTaXplO1xuICAgIGNvbnN0IHo6IG51bWJlciA9IC0wLjAwMTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGNlbGxDb3VudDsgaSsrKSB7XG4gICAgICBsZXQgbWlkT3JFbmQ6IG51bWJlciA9IChpID09PSBjZWxsQ291bnQgLyAyKSA/IDAgOiBoYWxmU2l6ZTtcbiAgICAgIGlmIChpICUgdGhpcy5taW5vckNvdW50ID09PSAwKSB7IC8vIG1ham9yIGxpbmVcbiAgICAgICAgbWFqb3JWZXJ0cy5wdXNoKFxuICAgICAgICAgIHZlYzMuY3JlYXRlKHN0YXJ0ICsgaSAqIHRoaXMuY2VsbFNpemUsIC1oYWxmU2l6ZSwgeiksXG4gICAgICAgICAgdmVjMy5jcmVhdGUoc3RhcnQgKyBpICogdGhpcy5jZWxsU2l6ZSwgbWlkT3JFbmQsIHopLFxuICAgICAgICAgIHZlYzMuY3JlYXRlKC1oYWxmU2l6ZSwgc3RhcnQgKyBpICogdGhpcy5jZWxsU2l6ZSwgeiksXG4gICAgICAgICAgdmVjMy5jcmVhdGUobWlkT3JFbmQsIHN0YXJ0ICsgaSAqIHRoaXMuY2VsbFNpemUsKSxcbiAgICAgICAgKTtcbiAgICAgICAgbWFqb3JJbmRpY2VzLnB1c2gobWFqb3JJbmRleCwgbWFqb3JJbmRleCArIDEsIG1ham9ySW5kZXggKyAyLCBtYWpvckluZGV4ICsgMyk7XG4gICAgICAgIG1ham9ySW5kZXggKz0gNDtcbiAgICAgIH0gZWxzZSB7IC8vIG1pbm9yIGxpbmVcbiAgICAgICAgbWlub3JWZXJ0cy5wdXNoKFxuICAgICAgICAgIHZlYzMuY3JlYXRlKHN0YXJ0ICsgaSAqIHRoaXMuY2VsbFNpemUsIC1oYWxmU2l6ZSwgeiksXG4gICAgICAgICAgdmVjMy5jcmVhdGUoc3RhcnQgKyBpICogdGhpcy5jZWxsU2l6ZSwgbWlkT3JFbmQsIHopLFxuICAgICAgICAgIHZlYzMuY3JlYXRlKC1oYWxmU2l6ZSwgc3RhcnQgKyBpICogdGhpcy5jZWxsU2l6ZSwgeiksXG4gICAgICAgICAgdmVjMy5jcmVhdGUobWlkT3JFbmQsIHN0YXJ0ICsgaSAqIHRoaXMuY2VsbFNpemUsIHopLFxuICAgICAgICApO1xuICAgICAgICBtaW5vckluZGljZXMucHVzaChtaW5vckluZGV4LCBtaW5vckluZGV4ICsgMSwgbWlub3JJbmRleCArIDIsIG1pbm9ySW5kZXggKyAzKTtcbiAgICAgICAgbWlub3JJbmRleCArPSA0O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5tYWpvckxpbmVzKSB0aGlzLm1ham9yTGluZXMuZGVsZXRlKCk7XG4gICAgaWYgKHRoaXMubWlub3JMaW5lcykgdGhpcy5taW5vckxpbmVzLmRlbGV0ZSgpO1xuICAgIGlmICh0aGlzLnhBeGlzKSB0aGlzLnhBeGlzLmRlbGV0ZSgpO1xuICAgIGlmICh0aGlzLnlBeGlzKSB0aGlzLnlBeGlzLmRlbGV0ZSgpO1xuICAgIHRoaXMubWFqb3JMaW5lcyA9IG5ldyBMaW5lcyhtYWpvclZlcnRzLCBtYWpvckluZGljZXMsIG51bGwsIG1hdDQuaWRlbnRpdHkoKSwgXCJsaWdodGVyIGdyZXlcIik7XG4gICAgdGhpcy5taW5vckxpbmVzID0gbmV3IExpbmVzKG1pbm9yVmVydHMsIG1pbm9ySW5kaWNlcywgbnVsbCwgbWF0NC5pZGVudGl0eSgpLCBcIm1pZCBncmV5XCIpO1xuICAgIHRoaXMueEF4aXMgPSBuZXcgTGluZShudWxsLCB2ZWMzLmNyZWF0ZSgwLCAwLCAwKSwgdmVjMy5jcmVhdGUoaGFsZlNpemUsIDAsIDApLCB1bmRlZmluZWQsIFwicmVkXCIpO1xuICAgIHRoaXMueUF4aXMgPSBuZXcgTGluZShudWxsLCB2ZWMzLmNyZWF0ZSgwLCAwLCAwKSwgdmVjMy5jcmVhdGUoMCwgaGFsZlNpemUsIDApLCB1bmRlZmluZWQsIFwiZ3JlZW5cIik7XG4gIH1cblxuXG4gIHB1YmxpYyBzbmFwVG9HcmlkKHBvaW50OiBWZWMzKTogVmVjMyB7XG4gICAgY29uc3QgYWxpZ25lZFdpdGhPcmlnaW46IGJvb2xlYW4gPSAoKHRoaXMubWlub3JDb3VudCAqIHRoaXMubWFqb3JDb3VudCkgJiAxKSA9PT0gMDtcbiAgICB2YXIgZHg6IG51bWJlciA9IHBvaW50WzBdICUgdGhpcy5jZWxsU2l6ZTtcbiAgICB2YXIgZHk6IG51bWJlciA9IHBvaW50WzFdICUgdGhpcy5jZWxsU2l6ZTtcbiAgICBpZiAoZHggPCAwKSBkeCArPSB0aGlzLmNlbGxTaXplO1xuICAgIGlmIChkeSA8IDApIGR5ICs9IHRoaXMuY2VsbFNpemU7XG4gICAgaWYgKCFhbGlnbmVkV2l0aE9yaWdpbikge1xuICAgICAgcG9pbnRbMF0gKz0gdGhpcy5jZWxsU2l6ZSAvIDI7XG4gICAgICBwb2ludFsxXSArPSB0aGlzLmNlbGxTaXplIC8gMjtcbiAgICB9XG4gICAgaWYgKGR4IDwgdGhpcy5jZWxsU2l6ZSAvIDIpIHBvaW50WzBdIC09IGR4O1xuICAgIGVsc2UgcG9pbnRbMF0gKz0gdGhpcy5jZWxsU2l6ZSAtIGR4O1xuICAgIGlmIChkeSA8IHRoaXMuY2VsbFNpemUgLyAyKSBwb2ludFsxXSAtPSBkeTtcbiAgICBlbHNlIHBvaW50WzFdICs9IHRoaXMuY2VsbFNpemUgLSBkeTtcblxuICAgIGlmICghYWxpZ25lZFdpdGhPcmlnaW4pIHtcbiAgICAgIHBvaW50WzBdIC09IHRoaXMuY2VsbFNpemUgLyAyO1xuICAgICAgcG9pbnRbMV0gLT0gdGhpcy5jZWxsU2l6ZSAvIDI7XG4gICAgfVxuICAgIHJldHVybiBwb2ludDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNaW5vckNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubWlub3JDb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNYWpvckNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubWFqb3JDb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDZWxsU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNlbGxTaXplO1xuICB9XG5cbiAgcHVibGljIHNldE1ham9yTWF0ZXJpYWwobWF0OiBNYXRlcmlhbE5hbWUpIHtcbiAgICB0aGlzLm1ham9yTGluZXMhLnNldE1hdGVyaWFsKG1hdCk7XG4gIH1cbiAgcHVibGljIHNldE1pbm9yTWF0ZXJpYWwobWF0OiBNYXRlcmlhbE5hbWUpIHtcbiAgICB0aGlzLm1pbm9yTGluZXMhLnNldE1hdGVyaWFsKG1hdCk7XG4gIH1cblxuICBwdWJsaWMgc2V0TWlub3JDb3VudChjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5taW5vckNvdW50ID0gY291bnQ7XG4gICAgdGhpcy5zZXR1cCgpO1xuICB9XG5cbiAgcHVibGljIHNldE1ham9yQ291bnQoY291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubWFqb3JDb3VudCA9IGNvdW50O1xuICAgIHRoaXMuc2V0dXAoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDZWxsU2l6ZShzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmNlbGxTaXplID0gc2l6ZTtcbiAgICB0aGlzLnNldHVwKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scene/constructionPlane.ts\n");

/***/ }),

/***/ "./src/scene/scene.ts":
/*!****************************!*\
  !*** ./src/scene/scene.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Scene: () => (/* binding */ Scene)\n/* harmony export */ });\n/* harmony import */ var _camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./camera */ \"./src/scene/camera.ts\");\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _constructionPlane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constructionPlane */ \"./src/scene/constructionPlane.ts\");\n/* harmony import */ var _geometry_sceneBoundingBoxHeirarcy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/sceneBoundingBoxHeirarcy */ \"./src/geometry/sceneBoundingBoxHeirarcy.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\nclass Scene {\n    constructor() {\n        this.renderLines = new Map();\n        this.renderMeshes = new Map();\n        this.renderPoints = new Map();\n        this.renderMeshesInstanced = new Map();\n        this.geometryMap = new Map();\n        this.renderIDGenerator = 1;\n        this.objectIDGenerator = 1;\n        this.boundingBoxHeirarchy = new _geometry_sceneBoundingBoxHeirarcy__WEBPACK_IMPORTED_MODULE_2__.SceneBoundingBoxHeirarchy([]);\n        this.camera = new _camera__WEBPACK_IMPORTED_MODULE_0__.Camera(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0.0, -80.0, 20.0), //position\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0.0, 0.0, 1.0), //up\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0.0, 1.0, 0.0), //forward\n        1, //fovy\n        document.getElementById(\"screen\"));\n    }\n    getConstructionPlane() {\n        return this.constructionPlane;\n    }\n    getBoundingBoxHeirarchy() {\n        return this.boundingBoxHeirarchy;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.constructionPlane = new _constructionPlane__WEBPACK_IMPORTED_MODULE_1__.ConstructionPlane();\n        });\n    }\n    addGeometry(geo) {\n        this.geometryMap.set(this.objectIDGenerator, geo);\n        this.boundingBoxHeirarchy.add(geo);\n        return this.objectIDGenerator++;\n    }\n    getGeometry(id) {\n        return this.geometryMap.get(id);\n    }\n    addRenderMesh(mesh) {\n        this.renderMeshes.set(this.renderIDGenerator, mesh);\n        return this.renderIDGenerator++;\n    }\n    addRenderMeshInstanced(mesh) {\n        this.renderMeshesInstanced.set(this.renderIDGenerator, mesh);\n        return this.renderIDGenerator++;\n    }\n    addRenderLines(lines) {\n        this.renderLines.set(this.renderIDGenerator, lines);\n        return this.renderIDGenerator++;\n    }\n    addRenderPoints(points) {\n        this.renderPoints.set(this.renderIDGenerator, points);\n        return this.renderIDGenerator++;\n    }\n    getLines(id) {\n        return this.renderLines.get(id);\n    }\n    getMesh(id) {\n        return this.renderMeshes.get(id);\n    }\n    getPoints(id) {\n        return this.renderPoints.get(id);\n    }\n    getMeshInstanced(id) {\n        return this.renderMeshes.get(id);\n    }\n    getAllLines() {\n        return this.renderLines.values();\n    }\n    getAllMeshes() {\n        return this.renderMeshes.values();\n    }\n    getAllPoints() {\n        return this.renderPoints.values();\n    }\n    getAllMeshesInstanced() {\n        return this.renderMeshesInstanced.values();\n    }\n    removeMesh(id) {\n        this.renderMeshes.delete(id);\n    }\n    removeLines(id) {\n        this.renderLines.delete(id);\n    }\n    removePoints(id) {\n        this.renderPoints.delete(id);\n    }\n    removeMeshInstanced(id) {\n        this.renderMeshesInstanced.delete(id);\n    }\n    tick() {\n        this.camera.tick();\n        for (const line of this.renderLines.values()) {\n            line.update();\n        }\n        for (const mesh of this.renderMeshes.values()) {\n            mesh.update();\n        }\n        for (const point of this.renderPoints.values()) {\n            point.update();\n        }\n        for (const mesh of this.renderMeshesInstanced.values()) {\n            mesh.update();\n        }\n    }\n    getCamera() {\n        return this.camera;\n    }\n}\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRU0sSUFBSTtRQUVULElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbkIsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQzVDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO1FBQ0QsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQzdDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO1FBQ0QsS0FBSyxNQUFNLEtBQUssSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQzlDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNoQjtRQUNELEtBQUssTUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3RELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO0lBRUgsQ0FBQztJQUVNLFNBQVM7UUFDZCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztDQUVGO0FBQUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3NjZW5lL3NjZW5lLnRzP2M5YmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4vY2FtZXJhXCJcbmltcG9ydCB7IHZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIlxuaW1wb3J0IHsgUmVuZGVyTWVzaCB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyTWVzaFwiXG5pbXBvcnQgeyBSZW5kZXJMaW5lcyB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyTGluZXNcIlxuaW1wb3J0IHsgQ29uc3RydWN0aW9uUGxhbmUgfSBmcm9tIFwiLi9jb25zdHJ1Y3Rpb25QbGFuZVwiXG5pbXBvcnQgeyBSZW5kZXJQb2ludHMgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlclBvaW50c1wiXG5pbXBvcnQgeyBTY2VuZUJvdW5kaW5nQm94SGVpcmFyY2h5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3NjZW5lQm91bmRpbmdCb3hIZWlyYXJjeVwiXG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9nZW9tZXRyeS9nZW9tZXRyeVwiXG5pbXBvcnQgeyBSZW5kZXJNZXNoSW5zdGFuY2VkIH0gZnJvbSBcIi4uL3JlbmRlci9yZW50ZXJNZXNoSW5zdGFuY2VkXCJcblxuZXhwb3J0IHR5cGUgUmVuZGVySUQgPSBudW1iZXI7IC8vIGZvciBncHUgb2JqZWN0c1xuZXhwb3J0IHR5cGUgT2JqZWN0SUQgPSBudW1iZXI7IC8vIGZvciBjcHUgb2JqZWN0c1xuXG5leHBvcnQgY2xhc3MgU2NlbmUge1xuXG4gIHByaXZhdGUgY2FtZXJhOiBDYW1lcmE7XG4gIHByaXZhdGUgY29uc3RydWN0aW9uUGxhbmUhOiBDb25zdHJ1Y3Rpb25QbGFuZTtcblxuICBwcml2YXRlIHJlbmRlckxpbmVzOiBNYXA8UmVuZGVySUQsIFJlbmRlckxpbmVzPiA9IG5ldyBNYXA8UmVuZGVySUQsIFJlbmRlckxpbmVzPigpO1xuICBwcml2YXRlIHJlbmRlck1lc2hlczogTWFwPFJlbmRlcklELCBSZW5kZXJNZXNoPiA9IG5ldyBNYXA8UmVuZGVySUQsIFJlbmRlck1lc2g+KCk7XG4gIHByaXZhdGUgcmVuZGVyUG9pbnRzOiBNYXA8UmVuZGVySUQsIFJlbmRlclBvaW50cz4gPSBuZXcgTWFwPFJlbmRlcklELCBSZW5kZXJQb2ludHM+KCk7XG4gIHByaXZhdGUgcmVuZGVyTWVzaGVzSW5zdGFuY2VkOiBNYXA8UmVuZGVySUQsIFJlbmRlck1lc2hJbnN0YW5jZWQ+ID0gbmV3IE1hcDxSZW5kZXJJRCwgUmVuZGVyTWVzaEluc3RhbmNlZD4oKTtcbiAgcHJpdmF0ZSBnZW9tZXRyeU1hcDogTWFwPE9iamVjdElELCBHZW9tZXRyeT4gPSBuZXcgTWFwPE9iamVjdElELCBHZW9tZXRyeT4oKTtcblxuICBwcml2YXRlIHJlbmRlcklER2VuZXJhdG9yOiBSZW5kZXJJRCA9IDE7XG4gIHByaXZhdGUgb2JqZWN0SURHZW5lcmF0b3I6IE9iamVjdElEID0gMTtcbiAgcHJpdmF0ZSBib3VuZGluZ0JveEhlaXJhcmNoeTogU2NlbmVCb3VuZGluZ0JveEhlaXJhcmNoeSA9IG5ldyBTY2VuZUJvdW5kaW5nQm94SGVpcmFyY2h5KFtdKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgKSB7XG5cbiAgICB0aGlzLmNhbWVyYSA9IG5ldyBDYW1lcmEoXG4gICAgICB2ZWMzLmNyZWF0ZSgwLjAsIC04MC4wLCAyMC4wKSxcdC8vcG9zaXRpb25cbiAgICAgIHZlYzMuY3JlYXRlKDAuMCwgMC4wLCAxLjApLFx0Ly91cFxuICAgICAgdmVjMy5jcmVhdGUoMC4wLCAxLjAsIDAuMCksXHQvL2ZvcndhcmRcbiAgICAgIDEsXHRcdC8vZm92eVxuICAgICAgPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NyZWVuXCIpXG4gICAgKTtcblxuICB9XG5cblxuICBwdWJsaWMgZ2V0Q29uc3RydWN0aW9uUGxhbmUoKTogQ29uc3RydWN0aW9uUGxhbmUge1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdGlvblBsYW5lO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kaW5nQm94SGVpcmFyY2h5KCk6IFNjZW5lQm91bmRpbmdCb3hIZWlyYXJjaHkge1xuICAgIHJldHVybiB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5O1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jb25zdHJ1Y3Rpb25QbGFuZSA9IG5ldyBDb25zdHJ1Y3Rpb25QbGFuZSgpO1xuICB9XG5cbiAgcHVibGljIGFkZEdlb21ldHJ5KGdlbzogR2VvbWV0cnkpOiBPYmplY3RJRCB7XG4gICAgdGhpcy5nZW9tZXRyeU1hcC5zZXQodGhpcy5vYmplY3RJREdlbmVyYXRvciwgZ2VvKTtcbiAgICB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5LmFkZChnZW8pO1xuICAgIHJldHVybiB0aGlzLm9iamVjdElER2VuZXJhdG9yKys7XG4gIH1cbiAgcHVibGljIGdldEdlb21ldHJ5KGlkOiBPYmplY3RJRCk6IEdlb21ldHJ5IHtcbiAgICByZXR1cm4gdGhpcy5nZW9tZXRyeU1hcC5nZXQoaWQpITtcbiAgfVxuXG4gIHB1YmxpYyBhZGRSZW5kZXJNZXNoKG1lc2g6IFJlbmRlck1lc2gpOiBSZW5kZXJJRCB7XG4gICAgdGhpcy5yZW5kZXJNZXNoZXMuc2V0KHRoaXMucmVuZGVySURHZW5lcmF0b3IsIG1lc2gpO1xuICAgIHJldHVybiB0aGlzLnJlbmRlcklER2VuZXJhdG9yKys7XG4gIH1cbiAgcHVibGljIGFkZFJlbmRlck1lc2hJbnN0YW5jZWQobWVzaDogUmVuZGVyTWVzaEluc3RhbmNlZCk6IFJlbmRlcklEIHtcbiAgICB0aGlzLnJlbmRlck1lc2hlc0luc3RhbmNlZC5zZXQodGhpcy5yZW5kZXJJREdlbmVyYXRvciwgbWVzaCk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVySURHZW5lcmF0b3IrKztcbiAgfVxuICBwdWJsaWMgYWRkUmVuZGVyTGluZXMobGluZXM6IFJlbmRlckxpbmVzKTogUmVuZGVySUQge1xuICAgIHRoaXMucmVuZGVyTGluZXMuc2V0KHRoaXMucmVuZGVySURHZW5lcmF0b3IsIGxpbmVzKTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJJREdlbmVyYXRvcisrO1xuICB9XG4gIHB1YmxpYyBhZGRSZW5kZXJQb2ludHMocG9pbnRzOiBSZW5kZXJQb2ludHMpOiBSZW5kZXJJRCB7XG4gICAgdGhpcy5yZW5kZXJQb2ludHMuc2V0KHRoaXMucmVuZGVySURHZW5lcmF0b3IsIHBvaW50cyk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVySURHZW5lcmF0b3IrKztcbiAgfVxuXG4gIHB1YmxpYyBnZXRMaW5lcyhpZDogUmVuZGVySUQpOiBSZW5kZXJMaW5lcyB7XG4gICAgcmV0dXJuIDxSZW5kZXJMaW5lcz50aGlzLnJlbmRlckxpbmVzLmdldChpZCk7XG4gIH1cbiAgcHVibGljIGdldE1lc2goaWQ6IFJlbmRlcklEKTogUmVuZGVyTWVzaCB7XG4gICAgcmV0dXJuIDxSZW5kZXJNZXNoPnRoaXMucmVuZGVyTWVzaGVzLmdldChpZCk7XG4gIH1cbiAgcHVibGljIGdldFBvaW50cyhpZDogUmVuZGVySUQpOiBSZW5kZXJQb2ludHMge1xuICAgIHJldHVybiA8UmVuZGVyUG9pbnRzPnRoaXMucmVuZGVyUG9pbnRzLmdldChpZCk7XG4gIH1cbiAgcHVibGljIGdldE1lc2hJbnN0YW5jZWQoaWQ6IFJlbmRlcklEKTogUmVuZGVyTWVzaEluc3RhbmNlZCB7XG4gICAgcmV0dXJuIDxSZW5kZXJNZXNoSW5zdGFuY2VkPnRoaXMucmVuZGVyTWVzaGVzLmdldChpZCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QWxsTGluZXMoKTogSXRlcmFibGVJdGVyYXRvcjxSZW5kZXJMaW5lcz4ge1xuICAgIHJldHVybiB0aGlzLnJlbmRlckxpbmVzLnZhbHVlcygpO1xuICB9XG4gIHB1YmxpYyBnZXRBbGxNZXNoZXMoKTogSXRlcmFibGVJdGVyYXRvcjxSZW5kZXJNZXNoPiB7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzaGVzLnZhbHVlcygpO1xuICB9XG4gIHB1YmxpYyBnZXRBbGxQb2ludHMoKTogSXRlcmFibGVJdGVyYXRvcjxSZW5kZXJQb2ludHM+IHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJQb2ludHMudmFsdWVzKCk7XG4gIH1cbiAgcHVibGljIGdldEFsbE1lc2hlc0luc3RhbmNlZCgpOiBJdGVyYWJsZUl0ZXJhdG9yPFJlbmRlck1lc2hJbnN0YW5jZWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJNZXNoZXNJbnN0YW5jZWQudmFsdWVzKCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTWVzaChpZDogUmVuZGVySUQpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlck1lc2hlcy5kZWxldGUoaWQpO1xuICB9XG4gIHB1YmxpYyByZW1vdmVMaW5lcyhpZDogUmVuZGVySUQpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlckxpbmVzLmRlbGV0ZShpZCk7XG4gIH1cbiAgcHVibGljIHJlbW92ZVBvaW50cyhpZDogUmVuZGVySUQpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclBvaW50cy5kZWxldGUoaWQpO1xuICB9XG4gIHB1YmxpYyByZW1vdmVNZXNoSW5zdGFuY2VkKGlkOiBSZW5kZXJJRCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyTWVzaGVzSW5zdGFuY2VkLmRlbGV0ZShpZCk7XG4gIH1cblxuICBwdWJsaWMgdGljaygpOiB2b2lkIHtcblxuICAgIHRoaXMuY2FtZXJhLnRpY2soKTtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGhpcy5yZW5kZXJMaW5lcy52YWx1ZXMoKSkge1xuICAgICAgbGluZS51cGRhdGUoKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBtZXNoIG9mIHRoaXMucmVuZGVyTWVzaGVzLnZhbHVlcygpKSB7XG4gICAgICBtZXNoLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHBvaW50IG9mIHRoaXMucmVuZGVyUG9pbnRzLnZhbHVlcygpKSB7XG4gICAgICBwb2ludC51cGRhdGUoKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBtZXNoIG9mIHRoaXMucmVuZGVyTWVzaGVzSW5zdGFuY2VkLnZhbHVlcygpKSB7XG4gICAgICBtZXNoLnVwZGF0ZSgpO1xuICAgIH1cblxuICB9XG5cbiAgcHVibGljIGdldENhbWVyYSgpOiBDYW1lcmEge1xuICAgIHJldHVybiB0aGlzLmNhbWVyYTtcbiAgfVxuXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scene/scene.ts\n");

/***/ }),

/***/ "./src/settings/settingsManager.ts":
/*!*****************************************!*\
  !*** ./src/settings/settingsManager.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsManager: () => (/* binding */ SettingsManager)\n/* harmony export */ });\n/* harmony import */ var _snapsManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./snapsManager */ \"./src/settings/snapsManager.ts\");\n\nclass SettingsManager {\n    constructor() {\n        this.snapSettingsManager = new _snapsManager__WEBPACK_IMPORTED_MODULE_0__.SnapSettingsManager();\n    }\n    getSnapSettingsManager() {\n        return this.snapSettingsManager;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2V0dGluZ3Mvc2V0dGluZ3NNYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRTlDLE1BQU0sZUFBZTtJQUkxQjtRQUNFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLDhEQUFtQixFQUFFLENBQUM7SUFDdkQsQ0FBQztJQUVNLHNCQUFzQjtRQUMzQixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUNsQyxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9zZXR0aW5ncy9zZXR0aW5nc01hbmFnZXIudHM/ZjBmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTbmFwU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSBcIi4vc25hcHNNYW5hZ2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc01hbmFnZXIge1xuXG4gIHByaXZhdGUgc25hcFNldHRpbmdzTWFuYWdlcjogU25hcFNldHRpbmdzTWFuYWdlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNuYXBTZXR0aW5nc01hbmFnZXIgPSBuZXcgU25hcFNldHRpbmdzTWFuYWdlcigpO1xuICB9XG5cbiAgcHVibGljIGdldFNuYXBTZXR0aW5nc01hbmFnZXIoKTogU25hcFNldHRpbmdzTWFuYWdlciB7XG4gICAgcmV0dXJuIHRoaXMuc25hcFNldHRpbmdzTWFuYWdlcjtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/settings/settingsManager.ts\n");

/***/ }),

/***/ "./src/settings/snapsManager.ts":
/*!**************************************!*\
  !*** ./src/settings/snapsManager.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapSettings: () => (/* binding */ SnapSettings),\n/* harmony export */   SnapSettingsManager: () => (/* binding */ SnapSettingsManager)\n/* harmony export */ });\nclass SnapSettings {\n    constructor() {\n        this.snapGrid = true;\n        this.snapLine = true;\n        this.snapPoint = true;\n        this.snapScreenPercent = false;\n    }\n}\nclass SnapSettingsManager {\n    constructor() {\n        this.stack = [new SnapSettings()];\n    }\n    push() {\n        this.stack.push(new SnapSettings());\n    }\n    pop() {\n        this.stack.pop();\n    }\n    getSnapSettings() {\n        return this.stack.at(-1);\n    }\n    getHTML() {\n        const settings = this.stack.at(-1);\n        return `\n      <u>SNAPS:</u><br>\n      <br>\n      grid(${settings.snapGrid ? \"on\" : \"off\"})<br>\n      line(${settings.snapLine ? \"on\" : \"off\"})<br>\n      point(${settings.snapPoint ? \"on\" : \"off\"})<br>\n    `;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2V0dGluZ3Mvc25hcHNNYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRU8sTUFBTSxZQUFZO0lBQXpCO1FBRUUsYUFBUSxHQUFZLElBQUksQ0FBQztRQUN6QixhQUFRLEdBQVksSUFBSSxDQUFDO1FBQ3pCLGNBQVMsR0FBWSxJQUFJLENBQUM7UUFDMUIsc0JBQWlCLEdBQVksS0FBSyxDQUFDO0lBRXJDLENBQUM7Q0FBQTtBQUdNLE1BQU0sbUJBQW1CO0lBSTlCO1FBQ0UsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLElBQUksWUFBWSxFQUFFLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRU0sSUFBSTtRQUNULElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksWUFBWSxFQUFFLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRU0sR0FBRztRQUNSLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbkIsQ0FBQztJQUVNLGVBQWU7UUFDcEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBRSxDQUFDO0lBQzVCLENBQUM7SUFFTSxPQUFPO1FBQ1osTUFBTSxRQUFRLEdBQWlCLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFFLENBQUM7UUFDbEQsT0FBTzs7O2FBR0UsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLO2FBQ2hDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSztjQUMvQixRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUs7S0FDMUMsQ0FBQztJQUNKLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3NldHRpbmdzL3NuYXBzTWFuYWdlci50cz9kMzVlIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgY2xhc3MgU25hcFNldHRpbmdzIHtcblxuICBzbmFwR3JpZDogYm9vbGVhbiA9IHRydWU7XG4gIHNuYXBMaW5lOiBib29sZWFuID0gdHJ1ZTtcbiAgc25hcFBvaW50OiBib29sZWFuID0gdHJ1ZTtcbiAgc25hcFNjcmVlblBlcmNlbnQ6IGJvb2xlYW4gPSBmYWxzZTtcblxufVxuXG5cbmV4cG9ydCBjbGFzcyBTbmFwU2V0dGluZ3NNYW5hZ2VyIHtcblxuICBwcml2YXRlIHN0YWNrOiBTbmFwU2V0dGluZ3NbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0YWNrID0gW25ldyBTbmFwU2V0dGluZ3MoKV07XG4gIH1cblxuICBwdWJsaWMgcHVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0YWNrLnB1c2gobmV3IFNuYXBTZXR0aW5ncygpKTtcbiAgfVxuXG4gIHB1YmxpYyBwb3AoKTogdm9pZCB7XG4gICAgdGhpcy5zdGFjay5wb3AoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTbmFwU2V0dGluZ3MoKTogU25hcFNldHRpbmdzIHtcbiAgICByZXR1cm4gdGhpcy5zdGFjay5hdCgtMSkhO1xuICB9XG5cbiAgcHVibGljIGdldEhUTUwoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZXR0aW5nczogU25hcFNldHRpbmdzID0gdGhpcy5zdGFjay5hdCgtMSkhO1xuICAgIHJldHVybiBgXG4gICAgICA8dT5TTkFQUzo8L3U+PGJyPlxuICAgICAgPGJyPlxuICAgICAgZ3JpZCgke3NldHRpbmdzLnNuYXBHcmlkID8gXCJvblwiIDogXCJvZmZcIn0pPGJyPlxuICAgICAgbGluZSgke3NldHRpbmdzLnNuYXBMaW5lID8gXCJvblwiIDogXCJvZmZcIn0pPGJyPlxuICAgICAgcG9pbnQoJHtzZXR0aW5ncy5zbmFwUG9pbnQgPyBcIm9uXCIgOiBcIm9mZlwifSk8YnI+XG4gICAgYDtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/settings/snapsManager.ts\n");

/***/ }),

/***/ "./src/stats.ts":
/*!**********************!*\
  !*** ./src/stats.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderStats: () => (/* binding */ RenderStats)\n/* harmony export */ });\nclass RenderStats {\n    constructor() {\n        this.reset();\n    }\n    reset() {\n        this.renderTime = NaN;\n        this.frameTime = NaN;\n        this.sceneTime = NaN;\n        this.framesOver100ms = 0;\n        this.totalFrames = 0;\n        this.startTime = Date.now();\n    }\n    setRenderTime(renderTime) {\n        this.renderTime = renderTime;\n    }\n    setFrameTime(frameTime) {\n        this.totalFrames++;\n        if (frameTime > 0.1)\n            this.framesOver100ms++;\n        this.frameTime = frameTime;\n    }\n    setSceneTime(sceneTime) {\n        this.sceneTime = sceneTime;\n    }\n    setDrawCalls(count) {\n        this.drawCalls = count;\n    }\n    getInnerHTML() {\n        var _a, _b, _c, _d;\n        const fps = (1.0 / this.frameTime).toFixed(3);\n        const averageFps = (1000.0 * this.totalFrames / (Date.now() - this.startTime)).toFixed(3);\n        const html = \"<u>STATS:</u><br>\" +\n            \"<br>\" +\n            \"FPS: \" + fps + \"<br>\" +\n            \"Average FPS: \" + averageFps + \"<br>\" +\n            \"<br>\" +\n            \"Render Time: \" + ((_a = this.renderTime) === null || _a === void 0 ? void 0 : _a.toFixed(3)) + \"<br>\" +\n            \"Frame Time: \" + ((_b = this.frameTime) === null || _b === void 0 ? void 0 : _b.toFixed(3)) + \"<br>\" +\n            \"Scene Time: \" + ((_c = this.sceneTime) === null || _c === void 0 ? void 0 : _c.toFixed(3)) + \"<br>\" +\n            \"<br>\" +\n            \"Frames Over 100ms: \" + this.framesOver100ms.toString() + \"<br>\" +\n            \"<br>\" +\n            \"Draw Calls: \" + ((_d = this.drawCalls) === null || _d === void 0 ? void 0 : _d.toString());\n        return html;\n    }\n}\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RhdHMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUNPLE1BQU0sV0FBVztJQVd0QjtRQUNFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNmLENBQUM7SUFFTSxLQUFLO1FBRVYsSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUM7UUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7UUFDckIsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7UUFDckIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVNLGFBQWEsQ0FBQyxVQUFrQjtRQUNyQyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUMvQixDQUFDO0lBRU0sWUFBWSxDQUFDLFNBQWlCO1FBQ25DLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNuQixJQUFJLFNBQVMsR0FBRyxHQUFHO1lBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzdCLENBQUM7SUFFTSxZQUFZLENBQUMsU0FBaUI7UUFDbkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDN0IsQ0FBQztJQUVNLFlBQVksQ0FBQyxLQUFhO1FBQy9CLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLENBQUM7SUFFTSxZQUFZOztRQUNqQixNQUFNLEdBQUcsR0FBVyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RELE1BQU0sVUFBVSxHQUFXLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xHLE1BQU0sSUFBSSxHQUFXLG1CQUFtQjtZQUN0QyxNQUFNO1lBQ04sT0FBTyxHQUFHLEdBQUcsR0FBRyxNQUFNO1lBQ3RCLGVBQWUsR0FBRyxVQUFVLEdBQUcsTUFBTTtZQUNyQyxNQUFNO1lBQ04sZUFBZSxJQUFHLFVBQUksQ0FBQyxVQUFVLDBDQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBRyxNQUFNO1lBQ3RELGNBQWMsSUFBRyxVQUFJLENBQUMsU0FBUywwQ0FBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUcsTUFBTTtZQUNwRCxjQUFjLElBQUcsVUFBSSxDQUFDLFNBQVMsMENBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFHLE1BQU07WUFDcEQsTUFBTTtZQUNOLHFCQUFxQixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLEdBQUcsTUFBTTtZQUNoRSxNQUFNO1lBQ04sY0FBYyxJQUFHLFVBQUksQ0FBQyxTQUFTLDBDQUFFLFFBQVEsRUFBRSxFQUFDO1FBQzlDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztDQUdGO0FBQUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3N0YXRzLnRzPzAyNWQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgY2xhc3MgUmVuZGVyU3RhdHMge1xuXG4gIC8vcHJpdmF0ZSBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSByZW5kZXJUaW1lITogbnVtYmVyO1xuICBwcml2YXRlIGZyYW1lVGltZSE6IG51bWJlcjtcbiAgcHJpdmF0ZSBzY2VuZVRpbWUhOiBudW1iZXI7XG4gIHByaXZhdGUgZnJhbWVzT3ZlcjEwMG1zITogbnVtYmVyO1xuICBwcml2YXRlIHRvdGFsRnJhbWVzITogbnVtYmVyO1xuICBwcml2YXRlIHN0YXJ0VGltZSE6IG51bWJlcjtcbiAgcHJpdmF0ZSBkcmF3Q2FsbHMhOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuXG4gICAgdGhpcy5yZW5kZXJUaW1lID0gTmFOO1xuICAgIHRoaXMuZnJhbWVUaW1lID0gTmFOO1xuICAgIHRoaXMuc2NlbmVUaW1lID0gTmFOO1xuICAgIHRoaXMuZnJhbWVzT3ZlcjEwMG1zID0gMDtcbiAgICB0aGlzLnRvdGFsRnJhbWVzID0gMDtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gIH1cblxuICBwdWJsaWMgc2V0UmVuZGVyVGltZShyZW5kZXJUaW1lOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclRpbWUgPSByZW5kZXJUaW1lO1xuICB9XG5cbiAgcHVibGljIHNldEZyYW1lVGltZShmcmFtZVRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudG90YWxGcmFtZXMrKztcbiAgICBpZiAoZnJhbWVUaW1lID4gMC4xKSB0aGlzLmZyYW1lc092ZXIxMDBtcysrO1xuICAgIHRoaXMuZnJhbWVUaW1lID0gZnJhbWVUaW1lO1xuICB9XG5cbiAgcHVibGljIHNldFNjZW5lVGltZShzY2VuZVRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc2NlbmVUaW1lID0gc2NlbmVUaW1lO1xuICB9XG5cbiAgcHVibGljIHNldERyYXdDYWxscyhjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5kcmF3Q2FsbHMgPSBjb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbm5lckhUTUwoKTogc3RyaW5nIHtcbiAgICBjb25zdCBmcHM6IHN0cmluZyA9ICgxLjAgLyB0aGlzLmZyYW1lVGltZSkudG9GaXhlZCgzKTtcbiAgICBjb25zdCBhdmVyYWdlRnBzOiBzdHJpbmcgPSAoMTAwMC4wICogdGhpcy50b3RhbEZyYW1lcyAvIChEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWUpKS50b0ZpeGVkKDMpO1xuICAgIGNvbnN0IGh0bWw6IHN0cmluZyA9IFwiPHU+U1RBVFM6PC91Pjxicj5cIiArXG4gICAgICBcIjxicj5cIiArXG4gICAgICBcIkZQUzogXCIgKyBmcHMgKyBcIjxicj5cIiArXG4gICAgICBcIkF2ZXJhZ2UgRlBTOiBcIiArIGF2ZXJhZ2VGcHMgKyBcIjxicj5cIiArXG4gICAgICBcIjxicj5cIiArXG4gICAgICBcIlJlbmRlciBUaW1lOiBcIiArIHRoaXMucmVuZGVyVGltZT8udG9GaXhlZCgzKSArIFwiPGJyPlwiICtcbiAgICAgIFwiRnJhbWUgVGltZTogXCIgKyB0aGlzLmZyYW1lVGltZT8udG9GaXhlZCgzKSArIFwiPGJyPlwiICtcbiAgICAgIFwiU2NlbmUgVGltZTogXCIgKyB0aGlzLnNjZW5lVGltZT8udG9GaXhlZCgzKSArIFwiPGJyPlwiICtcbiAgICAgIFwiPGJyPlwiICtcbiAgICAgIFwiRnJhbWVzIE92ZXIgMTAwbXM6IFwiICsgdGhpcy5mcmFtZXNPdmVyMTAwbXMudG9TdHJpbmcoKSArIFwiPGJyPlwiICtcbiAgICAgIFwiPGJyPlwiICtcbiAgICAgIFwiRHJhdyBDYWxsczogXCIgKyB0aGlzLmRyYXdDYWxscz8udG9TdHJpbmcoKTtcbiAgICByZXR1cm4gaHRtbDtcbiAgfVxuXG5cbn07XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/stats.ts\n");

/***/ }),

/***/ "./src/tests/testScene1.ts":
/*!*********************************!*\
  !*** ./src/tests/testScene1.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addTestScene1: () => (/* binding */ addTestScene1)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_mesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/mesh */ \"./src/geometry/mesh.ts\");\n/* harmony import */ var _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/nurbs/curve */ \"./src/geometry/nurbs/curve.ts\");\n/* harmony import */ var _geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry/nurbs/loft */ \"./src/geometry/nurbs/loft.ts\");\n\n\n\n\n\nconst addTestScene1 = function () {\n    const mesh = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(new _geometry_mesh__WEBPACK_IMPORTED_MODULE_1__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(-5, -5, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(5, -5, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(5, 5, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(-5, 5, 1)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0]));\n    const curve1 = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(new _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_2__.Curve(null, [\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-50, -50, 0, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-50, 50, 0, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(50, 50, 0, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(50, -50, 0, 1)\n    ], 2));\n    const curve2 = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(new _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_2__.Curve(null, [\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-40, -40, 10, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-40, 40, 10, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(40, 40, 10, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(40, -40, 10, 1)\n    ], 2));\n    const curve3 = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(new _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_2__.Curve(null, [\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-50, -50, 30, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(-50, 50, 30, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(50, 50, 30, 1),\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(50, -50, 30, 1),\n        //vec4.create(150, -50, 30, 1),\n        //  vec4.create(150, 50, 30, 1),\n        // vec4.create(250, 50, 30, 1),\n        // vec4.create(250, -50, 30, 1),\n        // vec4.create(350, -50, 30, 1),\n        // vec4.create(350, 50, 30, 1),\n    ], 3));\n    // (<Curve>INSTANCE.getScene().getGeometry(curve3)).elevateDegree(1);\n    const surface = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry((0,_geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_3__.loft)([_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getGeometry(curve1),\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getGeometry(curve2),\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getGeometry(curve3)], 2));\n    /*\n    const surface: ObjectID = INSTANCE.getScene().addGeometry(\n      new Surface(\n        [],\n        [],\n        [],\n        [],\n        2,\n        2,\n      )\n    );\n    */\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDO1FBQzNCLDZDQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMxQiw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMzQiwrQkFBK0I7UUFDL0IsZ0NBQWdDO1FBQ2hDLCtCQUErQjtRQUMvQixnQ0FBZ0M7UUFDaEMsZ0NBQWdDO1FBQ2hDLCtCQUErQjtLQUNoQyxFQUNDLENBQUMsQ0FDRixDQUNGLENBQUM7SUFDRixxRUFBcUU7SUFFckUsTUFBTSxPQUFPLEdBQWEsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLENBQ3ZELDBEQUFJLENBQ0YsQ0FBUSwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUM7UUFDeEMsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDO1FBQ3ZDLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQy9DLENBQUMsQ0FDRixDQUNGLENBQUM7SUFDRjs7Ozs7Ozs7Ozs7TUFXRTtBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy90ZXN0cy90ZXN0U2NlbmUxLnRzPzUxMTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgdmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiXG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIlxuaW1wb3J0IHsgTWVzaCB9IGZyb20gXCIuLi9nZW9tZXRyeS9tZXNoXCJcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4uL2dlb21ldHJ5L251cmJzL2N1cnZlXCI7XG5pbXBvcnQgeyBsb2Z0IH0gZnJvbSBcIi4uL2dlb21ldHJ5L251cmJzL2xvZnRcIjtcbmltcG9ydCB7IFN1cmZhY2UgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvbnVyYnMvc3VyZmFjZVwiO1xuaW1wb3J0IHsgT2JqZWN0SUQgfSBmcm9tIFwiLi4vc2NlbmUvc2NlbmVcIjtcblxuZXhwb3J0IGNvbnN0IGFkZFRlc3RTY2VuZTEgPSBmdW5jdGlvbigpIHtcblxuICBjb25zdCBtZXNoOiBPYmplY3RJRCA9IElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoXG4gICAgbmV3IE1lc2goXG4gICAgICBudWxsLFxuICAgICAgW3ZlYzMuY3JlYXRlKC01LCAtNSwgMSksIHZlYzMuY3JlYXRlKDUsIC01LCAxKSwgdmVjMy5jcmVhdGUoNSwgNSwgMSksIHZlYzMuY3JlYXRlKC01LCA1LCAxKV0sXG4gICAgICBbdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSldLFxuICAgICAgWzAsIDEsIDIsIDIsIDMsIDBdXG4gICAgKVxuICApO1xuICBjb25zdCBjdXJ2ZTE6IE9iamVjdElEID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeShcbiAgICBuZXcgQ3VydmUobnVsbCwgW1xuICAgICAgdmVjNC5jcmVhdGUoLTUwLCAtNTAsIDAsIDEpLFxuICAgICAgdmVjNC5jcmVhdGUoLTUwLCA1MCwgMCwgMSksXG4gICAgICB2ZWM0LmNyZWF0ZSg1MCwgNTAsIDAsIDEpLFxuICAgICAgdmVjNC5jcmVhdGUoNTAsIC01MCwgMCwgMSlcbiAgICBdLFxuICAgICAgMlxuICAgIClcbiAgKTtcbiAgY29uc3QgY3VydmUyOiBPYmplY3RJRCA9IElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoXG4gICAgbmV3IEN1cnZlKG51bGwsIFtcbiAgICAgIHZlYzQuY3JlYXRlKC00MCwgLTQwLCAxMCwgMSksXG4gICAgICB2ZWM0LmNyZWF0ZSgtNDAsIDQwLCAxMCwgMSksXG4gICAgICB2ZWM0LmNyZWF0ZSg0MCwgNDAsIDEwLCAxKSxcbiAgICAgIHZlYzQuY3JlYXRlKDQwLCAtNDAsIDEwLCAxKVxuICAgIF0sXG4gICAgICAyXG4gICAgKVxuICApO1xuICBjb25zdCBjdXJ2ZTM6IE9iamVjdElEID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeShcbiAgICBuZXcgQ3VydmUobnVsbCwgW1xuICAgICAgdmVjNC5jcmVhdGUoLTUwLCAtNTAsIDMwLCAxKSxcbiAgICAgIHZlYzQuY3JlYXRlKC01MCwgNTAsIDMwLCAxKSxcbiAgICAgIHZlYzQuY3JlYXRlKDUwLCA1MCwgMzAsIDEpLFxuICAgICAgdmVjNC5jcmVhdGUoNTAsIC01MCwgMzAsIDEpLFxuICAgICAgLy92ZWM0LmNyZWF0ZSgxNTAsIC01MCwgMzAsIDEpLFxuICAgICAgLy8gIHZlYzQuY3JlYXRlKDE1MCwgNTAsIDMwLCAxKSxcbiAgICAgIC8vIHZlYzQuY3JlYXRlKDI1MCwgNTAsIDMwLCAxKSxcbiAgICAgIC8vIHZlYzQuY3JlYXRlKDI1MCwgLTUwLCAzMCwgMSksXG4gICAgICAvLyB2ZWM0LmNyZWF0ZSgzNTAsIC01MCwgMzAsIDEpLFxuICAgICAgLy8gdmVjNC5jcmVhdGUoMzUwLCA1MCwgMzAsIDEpLFxuICAgIF0sXG4gICAgICAzXG4gICAgKVxuICApO1xuICAvLyAoPEN1cnZlPklOU1RBTkNFLmdldFNjZW5lKCkuZ2V0R2VvbWV0cnkoY3VydmUzKSkuZWxldmF0ZURlZ3JlZSgxKTtcblxuICBjb25zdCBzdXJmYWNlOiBPYmplY3RJRCA9IElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoXG4gICAgbG9mdChcbiAgICAgIFs8Q3VydmU+SU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRHZW9tZXRyeShjdXJ2ZTEpLFxuICAgICAgPEN1cnZlPklOU1RBTkNFLmdldFNjZW5lKCkuZ2V0R2VvbWV0cnkoY3VydmUyKSxcbiAgICAgIDxDdXJ2ZT5JTlNUQU5DRS5nZXRTY2VuZSgpLmdldEdlb21ldHJ5KGN1cnZlMyldLFxuICAgICAgMlxuICAgIClcbiAgKTtcbiAgLypcbiAgY29uc3Qgc3VyZmFjZTogT2JqZWN0SUQgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KFxuICAgIG5ldyBTdXJmYWNlKFxuICAgICAgW10sXG4gICAgICBbXSxcbiAgICAgIFtdLFxuICAgICAgW10sXG4gICAgICAyLFxuICAgICAgMixcbiAgICApXG4gICk7XG4gICovXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/tests/testScene1.ts\n");

/***/ }),

/***/ "./src/utils/math.ts":
/*!***************************!*\
  !*** ./src/utils/math.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bin: () => (/* binding */ bin),\n/* harmony export */   swizzleYZ: () => (/* binding */ swizzleYZ)\n/* harmony export */ });\nconst swizzleYZ = function (mat) {\n    [mat[1], mat[2]] = [mat[2], mat[1]];\n    [mat[7], mat[11]] = [mat[11], mat[7]];\n    [mat[14], mat[13]] = [mat[13], mat[14]];\n    [mat[8], mat[4]] = [mat[4], mat[8]];\n    [mat[6], mat[9]] = [mat[9], mat[6]];\n    [mat[5], mat[10]] = [mat[10], mat[5]];\n    return mat;\n};\nconst bin = function (a, b) {\n    let res = 1;\n    for (let i = a; i > a - b; i--)\n        res *= i;\n    for (let i = 2; i <= b; i++)\n        res = res / i;\n    return res;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvbWF0aC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUdPLE1BQU0sU0FBUyxHQUFHLFVBQVMsR0FBUztJQUN6QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0QyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN4QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0QyxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFDTSxNQUFNLEdBQUcsR0FBRyxVQUFTLENBQVMsRUFBRSxDQUFTO0lBQzlDLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQztJQUNwQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFO1FBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDM0MsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy91dGlscy9tYXRoLnRzP2IyY2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuXG5cbmV4cG9ydCBjb25zdCBzd2l6emxlWVogPSBmdW5jdGlvbihtYXQ6IE1hdDQpOiBNYXQ0IHtcbiAgW21hdFsxXSwgbWF0WzJdXSA9IFttYXRbMl0sIG1hdFsxXV07XG4gIFttYXRbN10sIG1hdFsxMV1dID0gW21hdFsxMV0sIG1hdFs3XV07XG4gIFttYXRbMTRdLCBtYXRbMTNdXSA9IFttYXRbMTNdLCBtYXRbMTRdXTtcbiAgW21hdFs4XSwgbWF0WzRdXSA9IFttYXRbNF0sIG1hdFs4XV07XG4gIFttYXRbNl0sIG1hdFs5XV0gPSBbbWF0WzldLCBtYXRbNl1dO1xuICBbbWF0WzVdLCBtYXRbMTBdXSA9IFttYXRbMTBdLCBtYXRbNV1dO1xuICByZXR1cm4gbWF0O1xufVxuZXhwb3J0IGNvbnN0IGJpbiA9IGZ1bmN0aW9uKGE6IG51bWJlciwgYjogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IHJlczogbnVtYmVyID0gMTtcbiAgZm9yIChsZXQgaSA9IGE7IGkgPiBhIC0gYjsgaS0tKSByZXMgKj0gaTtcbiAgZm9yIChsZXQgaSA9IDI7IGkgPD0gYjsgaSsrKSByZXMgPSByZXMgLyBpO1xuICByZXR1cm4gcmVzO1xufTtcblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/math.ts\n");

/***/ }),

/***/ "./src/utils/print.ts":
/*!****************************!*\
  !*** ./src/utils/print.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   printMat4: () => (/* binding */ printMat4),\n/* harmony export */   printVec3: () => (/* binding */ printVec3),\n/* harmony export */   vec3ToString: () => (/* binding */ vec3ToString),\n/* harmony export */   vec4ToString: () => (/* binding */ vec4ToString)\n/* harmony export */ });\nconst printMat4 = function (m) {\n    var str = \"\";\n    for (var i = 0; i < 4; i++) {\n        for (var j = 0; j < 4; j++) {\n            str += m[4 * i + j].toFixed(2) + \",  \";\n        }\n        str += \"\\n\";\n    }\n    console.log(str);\n};\nconst printVec3 = function (v, decimals = 2) {\n    console.log(vec3ToString(v, decimals));\n};\nconst vec3ToString = function (v, decimals = 2) {\n    var str = \"\";\n    for (var i = 0; i < 3; i++) {\n        str += v[i].toFixed(decimals) + \",  \";\n    }\n    str = str.slice(0, -1);\n    return str;\n};\nconst vec4ToString = function (v, decimals = 2) {\n    var str = \"[\";\n    for (var i = 0; i < 4; i++) {\n        str += v[i].toFixed(decimals) + \",\";\n    }\n    str = str.slice(0, -1);\n    return str + \"]\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvcHJpbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdPLE1BQU0sU0FBUyxHQUFHLFVBQVMsQ0FBTztJQUN2QyxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDckIsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNsQyxLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2xDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1NBQ3hDO1FBQ0QsR0FBRyxJQUFJLElBQUksQ0FBQztLQUNiO0lBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNuQixDQUFDO0FBRU0sTUFBTSxTQUFTLEdBQUcsVUFBUyxDQUFPLEVBQUUsV0FBbUIsQ0FBQztJQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUN6QyxDQUFDO0FBRU0sTUFBTSxZQUFZLEdBQUcsVUFBUyxDQUFPLEVBQUUsV0FBbUIsQ0FBQztJQUNoRSxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDckIsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNsQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUM7S0FDdkM7SUFDRCxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2QixPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFTSxNQUFNLFlBQVksR0FBRyxVQUFTLENBQU8sRUFBRSxXQUFtQixDQUFDO0lBQ2hFLElBQUksR0FBRyxHQUFXLEdBQUcsQ0FBQztJQUN0QixLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2xDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNyQztJQUNELEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZCLE9BQU8sR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUNuQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvdXRpbHMvcHJpbnQudHM/ZDc2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3YXJuIH0gZnJvbSBcImNvbnNvbGVcIjtcbmltcG9ydCB7IG1hdDQsIG1hdDMsIE1hdDQsIFZlYzMsIFZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcblxuZXhwb3J0IGNvbnN0IHByaW50TWF0NCA9IGZ1bmN0aW9uKG06IE1hdDQpOiB2b2lkIHtcbiAgdmFyIHN0cjogc3RyaW5nID0gXCJcIjtcbiAgZm9yICh2YXIgaTogbnVtYmVyID0gMDsgaSA8IDQ7IGkrKykge1xuICAgIGZvciAodmFyIGo6IG51bWJlciA9IDA7IGogPCA0OyBqKyspIHtcbiAgICAgIHN0ciArPSBtWzQgKiBpICsgal0udG9GaXhlZCgyKSArIFwiLCAgXCI7XG4gICAgfVxuICAgIHN0ciArPSBcIlxcblwiO1xuICB9XG4gIGNvbnNvbGUubG9nKHN0cik7XG59XG5cbmV4cG9ydCBjb25zdCBwcmludFZlYzMgPSBmdW5jdGlvbih2OiBWZWMzLCBkZWNpbWFsczogbnVtYmVyID0gMik6IHZvaWQge1xuICBjb25zb2xlLmxvZyh2ZWMzVG9TdHJpbmcodiwgZGVjaW1hbHMpKTtcbn1cblxuZXhwb3J0IGNvbnN0IHZlYzNUb1N0cmluZyA9IGZ1bmN0aW9uKHY6IFZlYzMsIGRlY2ltYWxzOiBudW1iZXIgPSAyKTogc3RyaW5nIHtcbiAgdmFyIHN0cjogc3RyaW5nID0gXCJcIjtcbiAgZm9yICh2YXIgaTogbnVtYmVyID0gMDsgaSA8IDM7IGkrKykge1xuICAgIHN0ciArPSB2W2ldLnRvRml4ZWQoZGVjaW1hbHMpICsgXCIsICBcIjtcbiAgfVxuICBzdHIgPSBzdHIuc2xpY2UoMCwgLTEpO1xuICByZXR1cm4gc3RyO1xufVxuXG5leHBvcnQgY29uc3QgdmVjNFRvU3RyaW5nID0gZnVuY3Rpb24odjogVmVjNCwgZGVjaW1hbHM6IG51bWJlciA9IDIpOiBzdHJpbmcge1xuICB2YXIgc3RyOiBzdHJpbmcgPSBcIltcIjtcbiAgZm9yICh2YXIgaTogbnVtYmVyID0gMDsgaSA8IDQ7IGkrKykge1xuICAgIHN0ciArPSB2W2ldLnRvRml4ZWQoZGVjaW1hbHMpICsgXCIsXCI7XG4gIH1cbiAgc3RyID0gc3RyLnNsaWNlKDAsIC0xKTtcbiAgcmV0dXJuIHN0ciArIFwiXVwiO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/print.ts\n");

/***/ }),

/***/ "./src/utils/timer.ts":
/*!****************************!*\
  !*** ./src/utils/timer.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Timer: () => (/* binding */ Timer)\n/* harmony export */ });\nclass Timer {\n    constructor() {\n        this.startTime = 0;\n        this.reset();\n    }\n    reset() {\n        this.startTime = Date.now();\n    }\n    logTime() {\n        console.log((Date.now() - this.startTime) / 1000.0);\n    }\n    getTime() {\n        return (Date.now() - this.startTime) / 1000.0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvdGltZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUdPLE1BQU0sS0FBSztJQUlkO1FBRlEsY0FBUyxHQUFXLENBQUMsQ0FBQztRQUcxQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLEtBQUs7UUFDUixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBRU0sT0FBTztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFTSxPQUFPO1FBQ1YsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ2xELENBQUM7Q0FFSiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3V0aWxzL3RpbWVyLnRzPzI4ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cblxuZXhwb3J0IGNsYXNzIFRpbWVyIHtcblxuICAgIHByaXZhdGUgc3RhcnRUaW1lOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9nVGltZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc29sZS5sb2coKERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZSkgLyAxMDAwLjApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaW1lKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAoRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lKSAvIDEwMDAuMDtcbiAgICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/timer.ts\n");

/***/ }),

/***/ "./src/widgets/cursor.ts":
/*!*******************************!*\
  !*** ./src/widgets/cursor.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Cursor: () => (/* binding */ Cursor)\n/* harmony export */ });\nclass Cursor {\n    constructor() {\n        this.cursor = this.createCursor();\n    }\n    setPosition(pos) {\n        this.cursor[0].style.left = (pos[0]).toString() + \"px\";\n        this.cursor[0].style.top = (pos[1] - 5).toString() + \"px\";\n        this.cursor[1].style.left = (pos[0] - 5).toString() + \"px\";\n        this.cursor[1].style.top = (pos[1]).toString() + \"px\";\n    }\n    destroy() {\n        document.body.removeChild(this.cursor[0]);\n        document.body.removeChild(this.cursor[1]);\n    }\n    createCursor() {\n        const cursorVertical = document.createElement(\"div\");\n        const cursorHorizontal = document.createElement(\"div\");\n        cursorVertical.className = \"floating-window\";\n        cursorVertical.style.borderRadius = \"0px\";\n        cursorVertical.style.padding = \"0px\";\n        cursorVertical.style.margin = \"0px\";\n        cursorVertical.style.width = \"0px\";\n        cursorVertical.style.height = \"10px\";\n        cursorHorizontal.className = \"floating-window\";\n        cursorHorizontal.style.borderRadius = \"0px\";\n        cursorHorizontal.style.padding = \"0px\";\n        cursorHorizontal.style.margin = \"0px\";\n        cursorHorizontal.style.width = \"10px\";\n        cursorHorizontal.style.height = \"0px\";\n        document.body.appendChild(cursorVertical);\n        document.body.appendChild(cursorHorizontal);\n        const res = [cursorVertical, cursorHorizontal];\n        return res;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2lkZ2V0cy9jdXJzb3IudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU0sTUFBTTtJQUlqQjtRQUNFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3BDLENBQUM7SUFFTSxXQUFXLENBQUMsR0FBcUI7UUFDdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDMUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQztRQUMzRCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUM7SUFDeEQsQ0FBQztJQUVNLE9BQU87UUFDWixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFTyxZQUFZO1FBQ2xCLE1BQU0sY0FBYyxHQUFtQixRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JFLE1BQU0sZ0JBQWdCLEdBQW1CLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkUsY0FBYyxDQUFDLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQztRQUM3QyxjQUFjLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFDMUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ3JDLGNBQWMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQyxjQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkMsY0FBYyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JDLGdCQUFnQixDQUFDLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQztRQUMvQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUM1QyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUN2QyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUN0QyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUN0QyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUN0QyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMxQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sR0FBRyxHQUFxQyxDQUFDLGNBQWMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2pGLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvd2lkZ2V0cy9jdXJzb3IudHM/ZWUwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ3Vyc29yIHtcblxuICBwcml2YXRlIGN1cnNvcjogW0hUTUxEaXZFbGVtZW50LCBIVE1MRGl2RWxlbWVudF07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jdXJzb3IgPSB0aGlzLmNyZWF0ZUN1cnNvcigpO1xuICB9XG5cbiAgcHVibGljIHNldFBvc2l0aW9uKHBvczogW251bWJlciwgbnVtYmVyXSk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yWzBdLnN0eWxlLmxlZnQgPSAocG9zWzBdKS50b1N0cmluZygpICsgXCJweFwiO1xuICAgIHRoaXMuY3Vyc29yWzBdLnN0eWxlLnRvcCA9IChwb3NbMV0gLSA1KS50b1N0cmluZygpICsgXCJweFwiO1xuICAgIHRoaXMuY3Vyc29yWzFdLnN0eWxlLmxlZnQgPSAocG9zWzBdIC0gNSkudG9TdHJpbmcoKSArIFwicHhcIjtcbiAgICB0aGlzLmN1cnNvclsxXS5zdHlsZS50b3AgPSAocG9zWzFdKS50b1N0cmluZygpICsgXCJweFwiO1xuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmN1cnNvclswXSk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmN1cnNvclsxXSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUN1cnNvcigpOiBbSFRNTERpdkVsZW1lbnQsIEhUTUxEaXZFbGVtZW50XSB7XG4gICAgY29uc3QgY3Vyc29yVmVydGljYWw6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBjdXJzb3JIb3Jpem9udGFsOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY3Vyc29yVmVydGljYWwuY2xhc3NOYW1lID0gXCJmbG9hdGluZy13aW5kb3dcIjtcbiAgICBjdXJzb3JWZXJ0aWNhbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjBweFwiO1xuICAgIGN1cnNvclZlcnRpY2FsLnN0eWxlLnBhZGRpbmcgPSBcIjBweFwiO1xuICAgIGN1cnNvclZlcnRpY2FsLnN0eWxlLm1hcmdpbiA9IFwiMHB4XCI7XG4gICAgY3Vyc29yVmVydGljYWwuc3R5bGUud2lkdGggPSBcIjBweFwiO1xuICAgIGN1cnNvclZlcnRpY2FsLnN0eWxlLmhlaWdodCA9IFwiMTBweFwiO1xuICAgIGN1cnNvckhvcml6b250YWwuY2xhc3NOYW1lID0gXCJmbG9hdGluZy13aW5kb3dcIjtcbiAgICBjdXJzb3JIb3Jpem9udGFsLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiMHB4XCI7XG4gICAgY3Vyc29ySG9yaXpvbnRhbC5zdHlsZS5wYWRkaW5nID0gXCIwcHhcIjtcbiAgICBjdXJzb3JIb3Jpem9udGFsLnN0eWxlLm1hcmdpbiA9IFwiMHB4XCI7XG4gICAgY3Vyc29ySG9yaXpvbnRhbC5zdHlsZS53aWR0aCA9IFwiMTBweFwiO1xuICAgIGN1cnNvckhvcml6b250YWwuc3R5bGUuaGVpZ2h0ID0gXCIwcHhcIjtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGN1cnNvclZlcnRpY2FsKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGN1cnNvckhvcml6b250YWwpO1xuICAgIGNvbnN0IHJlczogW0hUTUxEaXZFbGVtZW50LCBIVE1MRGl2RWxlbWVudF0gPSBbY3Vyc29yVmVydGljYWwsIGN1cnNvckhvcml6b250YWxdO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/widgets/cursor.ts\n");

/***/ }),

/***/ "./src/window/window.ts":
/*!******************************!*\
  !*** ./src/window/window.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CADWindow: () => (/* binding */ CADWindow)\n/* harmony export */ });\nclass CADWindow {\n    constructor(name, start, end) {\n        this.start = start;\n        this.end = end;\n        this.element = document.createElement(\"div\");\n        this.element.id = name;\n        this.element.className = \"floating-window\";\n        this.updateSize();\n        document.body.appendChild(this.element);\n        this.populate();\n    }\n    updateEnd(end) {\n        this.end = end;\n        this.updateSize();\n    }\n    updateSize() {\n        const left = Math.min(this.start[0], this.end[0]);\n        const top = Math.min(this.start[1], this.end[1]);\n        const width = Math.abs(this.start[0] - this.end[0]) - 10;\n        const height = Math.abs(this.start[1] - this.end[1]) - 10;\n        this.element.setAttribute(\"style\", `\n      left:${left}px;\n      top:${top}px;\n      width:${width}px;\n      height:${height}px;`);\n    }\n    destroy() {\n        document.body.removeChild(this.element);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvdy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBZSxTQUFTO0lBSTdCLFlBQVksSUFBWSxFQUNkLEtBQXVCLEVBQ3ZCLEdBQXFCO1FBRHJCLFVBQUssR0FBTCxLQUFLLENBQWtCO1FBQ3ZCLFFBQUcsR0FBSCxHQUFHLENBQWtCO1FBQzdCLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUM7UUFDM0MsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUVNLFNBQVMsQ0FBQyxHQUFxQjtRQUNwQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRU8sVUFBVTtRQUNoQixNQUFNLElBQUksR0FBVyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELE1BQU0sR0FBRyxHQUFXLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekQsTUFBTSxLQUFLLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDakUsTUFBTSxNQUFNLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDbEUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFO2FBQzFCLElBQUk7WUFDTCxHQUFHO2NBQ0QsS0FBSztlQUNKLE1BQU0sS0FBSyxDQUNyQixDQUFDO0lBQ0osQ0FBQztJQUVNLE9BQU87UUFDWixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDMUMsQ0FBQztDQUtGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvd2luZG93L3dpbmRvdy50cz9kN2NhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDQURXaW5kb3cge1xuXG4gIHByb3RlY3RlZCBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBzdGFydDogW251bWJlciwgbnVtYmVyXSxcbiAgICBwcml2YXRlIGVuZDogW251bWJlciwgbnVtYmVyXSkge1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5lbGVtZW50LmlkID0gbmFtZTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJmbG9hdGluZy13aW5kb3dcIjtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5wb3B1bGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUVuZChlbmQ6IFtudW1iZXIsIG51bWJlcl0pOiB2b2lkIHtcbiAgICB0aGlzLmVuZCA9IGVuZDtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU2l6ZSgpOiB2b2lkIHtcbiAgICBjb25zdCBsZWZ0OiBudW1iZXIgPSBNYXRoLm1pbih0aGlzLnN0YXJ0WzBdLCB0aGlzLmVuZFswXSk7XG4gICAgY29uc3QgdG9wOiBudW1iZXIgPSBNYXRoLm1pbih0aGlzLnN0YXJ0WzFdLCB0aGlzLmVuZFsxXSk7XG4gICAgY29uc3Qgd2lkdGg6IG51bWJlciA9IE1hdGguYWJzKHRoaXMuc3RhcnRbMF0gLSB0aGlzLmVuZFswXSkgLSAxMDtcbiAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IE1hdGguYWJzKHRoaXMuc3RhcnRbMV0gLSB0aGlzLmVuZFsxXSkgLSAxMDtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYFxuICAgICAgbGVmdDoke2xlZnR9cHg7XG4gICAgICB0b3A6JHt0b3B9cHg7XG4gICAgICB3aWR0aDoke3dpZHRofXB4O1xuICAgICAgaGVpZ2h0OiR7aGVpZ2h0fXB4O2BcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IHBvcHVsYXRlKCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCB0aWNrKCk6IHZvaWQ7XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/window/window.ts\n");

/***/ }),

/***/ "./src/window/windowManager.ts":
/*!*************************************!*\
  !*** ./src/window/windowManager.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WINDOW_NAMES: () => (/* binding */ WINDOW_NAMES),\n/* harmony export */   WindowManager: () => (/* binding */ WindowManager)\n/* harmony export */ });\n/* harmony import */ var _windows_logWindow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./windows/logWindow */ \"./src/window/windows/logWindow.ts\");\n/* harmony import */ var _windows_materialsWindow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./windows/materialsWindow */ \"./src/window/windows/materialsWindow.ts\");\n/* harmony import */ var _windows_sceneWindow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./windows/sceneWindow */ \"./src/window/windows/sceneWindow.ts\");\n/* harmony import */ var _windows_snapsWindow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./windows/snapsWindow */ \"./src/window/windows/snapsWindow.ts\");\n/* harmony import */ var _windows_statsWindow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./windows/statsWindow */ \"./src/window/windows/statsWindow.ts\");\n\n\n\n\n\nconst WINDOW_NAMES = new Map();\nWINDOW_NAMES.set(1, \"stats\");\nWINDOW_NAMES.set(2, \"log\");\nWINDOW_NAMES.set(3, \"materials\");\nWINDOW_NAMES.set(4, \"scene\");\nWINDOW_NAMES.set(5, \"snaps\");\nclass WindowManager {\n    constructor() {\n        this.windows = new Map();\n        this.setupDefaultWindows();\n    }\n    setupDefaultWindows() {\n        this.addWindow(\"log\", [10, 10], [200, 400]);\n        this.addWindow(\"stats\", [220, 10], [400, 210]);\n        this.addWindow(\"snaps\", [420, 10], [550, 100]);\n    }\n    getWindows() {\n        return this.windows;\n    }\n    addWindow(windowName, start, end) {\n        this.removeWindow(windowName);\n        switch (windowName) {\n            case \"stats\":\n                this.windows.set(\"stats\", new _windows_statsWindow__WEBPACK_IMPORTED_MODULE_4__.StatsWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"log\":\n                this.windows.set(\"log\", new _windows_logWindow__WEBPACK_IMPORTED_MODULE_0__.LogWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"materials\":\n                this.windows.set(\"materials\", new _windows_materialsWindow__WEBPACK_IMPORTED_MODULE_1__.MaterialsWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"scene\":\n                this.windows.set(\"scene\", new _windows_sceneWindow__WEBPACK_IMPORTED_MODULE_2__.SceneWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"snaps\":\n                this.windows.set(\"snaps\", new _windows_snapsWindow__WEBPACK_IMPORTED_MODULE_3__.SnapsWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            default:\n                throw new Error(\"not implemented\");\n        }\n    }\n    removeWindow(windowName) {\n        var _a;\n        (_a = this.windows.get(windowName)) === null || _a === void 0 ? void 0 : _a.destroy();\n        this.windows.delete(windowName);\n    }\n    tick() {\n        for (let window of this.windows.values()) {\n            window.tick();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd01hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNnRDtBQUNZO0FBQ1I7QUFDQTtBQUNBO0FBRTdDLE1BQU0sWUFBWSxHQUF3QixJQUFJLEdBQUcsRUFBa0IsQ0FBQztBQUMzRSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM3QixZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMzQixZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUNqQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM3QixZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUV0QixNQUFNLGFBQWE7SUFJeEI7UUFDRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksR0FBRyxFQUFxQixDQUFDO1FBQzVDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFTyxtQkFBbUI7UUFDekIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM1QyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUNNLFVBQVU7UUFDZixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDdEIsQ0FBQztJQUVNLFNBQVMsQ0FBQyxVQUFrQixFQUFFLEtBQXVCLEVBQUUsR0FBc0I7UUFDbEYsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5QixRQUFRLFVBQVUsRUFBRTtZQUNsQixLQUFLLE9BQU87Z0JBQ1YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksNkRBQVcsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLEdBQUcsYUFBSCxHQUFHLGNBQUgsR0FBRyxHQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQzVFLE1BQU07WUFDUixLQUFLLEtBQUs7Z0JBQ1IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLElBQUkseURBQVMsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLEdBQUcsYUFBSCxHQUFHLGNBQUgsR0FBRyxHQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ3hFLE1BQU07WUFDUixLQUFLLFdBQVc7Z0JBQ2QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUkscUVBQWUsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLEdBQUcsYUFBSCxHQUFHLGNBQUgsR0FBRyxHQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ3BGLE1BQU07WUFDUixLQUFLLE9BQU87Z0JBQ1YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksNkRBQVcsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLEdBQUcsYUFBSCxHQUFHLGNBQUgsR0FBRyxHQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQzVFLE1BQU07WUFDUixLQUFLLE9BQU87Z0JBQ1YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksNkRBQVcsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLEdBQUcsYUFBSCxHQUFHLGNBQUgsR0FBRyxHQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQzVFLE1BQU07WUFDUjtnQkFDRSxNQUFNLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDdEM7SUFDSCxDQUFDO0lBRU0sWUFBWSxDQUFDLFVBQWtCOztRQUNwQyxVQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsMENBQUUsT0FBTyxFQUFFLENBQUM7UUFDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVNLElBQUk7UUFDVCxLQUFLLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDeEMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2Y7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy93aW5kb3cvd2luZG93TWFuYWdlci50cz80YTM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENBRFdpbmRvdyB9IGZyb20gXCIuL3dpbmRvd1wiO1xuaW1wb3J0IHsgTG9nV2luZG93IH0gZnJvbSBcIi4vd2luZG93cy9sb2dXaW5kb3dcIjtcbmltcG9ydCB7IE1hdGVyaWFsc1dpbmRvdyB9IGZyb20gXCIuL3dpbmRvd3MvbWF0ZXJpYWxzV2luZG93XCI7XG5pbXBvcnQgeyBTY2VuZVdpbmRvdyB9IGZyb20gXCIuL3dpbmRvd3Mvc2NlbmVXaW5kb3dcIjtcbmltcG9ydCB7IFNuYXBzV2luZG93IH0gZnJvbSBcIi4vd2luZG93cy9zbmFwc1dpbmRvd1wiO1xuaW1wb3J0IHsgU3RhdHNXaW5kb3cgfSBmcm9tIFwiLi93aW5kb3dzL3N0YXRzV2luZG93XCI7XG5cbmV4cG9ydCBjb25zdCBXSU5ET1dfTkFNRVM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwPG51bWJlciwgc3RyaW5nPigpO1xuV0lORE9XX05BTUVTLnNldCgxLCBcInN0YXRzXCIpO1xuV0lORE9XX05BTUVTLnNldCgyLCBcImxvZ1wiKTtcbldJTkRPV19OQU1FUy5zZXQoMywgXCJtYXRlcmlhbHNcIik7XG5XSU5ET1dfTkFNRVMuc2V0KDQsIFwic2NlbmVcIik7XG5XSU5ET1dfTkFNRVMuc2V0KDUsIFwic25hcHNcIik7XG5cbmV4cG9ydCBjbGFzcyBXaW5kb3dNYW5hZ2VyIHtcblxuICBwcml2YXRlIHdpbmRvd3M6IE1hcDxzdHJpbmcsIENBRFdpbmRvdz47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy53aW5kb3dzID0gbmV3IE1hcDxzdHJpbmcsIENBRFdpbmRvdz4oKTtcbiAgICB0aGlzLnNldHVwRGVmYXVsdFdpbmRvd3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBEZWZhdWx0V2luZG93cygpOiB2b2lkIHtcbiAgICB0aGlzLmFkZFdpbmRvdyhcImxvZ1wiLCBbMTAsIDEwXSwgWzIwMCwgNDAwXSk7XG4gICAgdGhpcy5hZGRXaW5kb3coXCJzdGF0c1wiLCBbMjIwLCAxMF0sIFs0MDAsIDIxMF0pO1xuICAgIHRoaXMuYWRkV2luZG93KFwic25hcHNcIiwgWzQyMCwgMTBdLCBbNTUwLCAxMDBdKTtcbiAgfVxuICBwdWJsaWMgZ2V0V2luZG93cygpOiBNYXA8c3RyaW5nLCBDQURXaW5kb3c+IHtcbiAgICByZXR1cm4gdGhpcy53aW5kb3dzO1xuICB9XG5cbiAgcHVibGljIGFkZFdpbmRvdyh3aW5kb3dOYW1lOiBzdHJpbmcsIHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ/OiBbbnVtYmVyLCBudW1iZXJdKSB7XG4gICAgdGhpcy5yZW1vdmVXaW5kb3cod2luZG93TmFtZSk7XG4gICAgc3dpdGNoICh3aW5kb3dOYW1lKSB7XG4gICAgICBjYXNlIFwic3RhdHNcIjpcbiAgICAgICAgdGhpcy53aW5kb3dzLnNldChcInN0YXRzXCIsIG5ldyBTdGF0c1dpbmRvdyh3aW5kb3dOYW1lLCBzdGFydCwgZW5kID8/IHN0YXJ0KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImxvZ1wiOlxuICAgICAgICB0aGlzLndpbmRvd3Muc2V0KFwibG9nXCIsIG5ldyBMb2dXaW5kb3cod2luZG93TmFtZSwgc3RhcnQsIGVuZCA/PyBzdGFydCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtYXRlcmlhbHNcIjpcbiAgICAgICAgdGhpcy53aW5kb3dzLnNldChcIm1hdGVyaWFsc1wiLCBuZXcgTWF0ZXJpYWxzV2luZG93KHdpbmRvd05hbWUsIHN0YXJ0LCBlbmQgPz8gc3RhcnQpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwic2NlbmVcIjpcbiAgICAgICAgdGhpcy53aW5kb3dzLnNldChcInNjZW5lXCIsIG5ldyBTY2VuZVdpbmRvdyh3aW5kb3dOYW1lLCBzdGFydCwgZW5kID8/IHN0YXJ0KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInNuYXBzXCI6XG4gICAgICAgIHRoaXMud2luZG93cy5zZXQoXCJzbmFwc1wiLCBuZXcgU25hcHNXaW5kb3cod2luZG93TmFtZSwgc3RhcnQsIGVuZCA/PyBzdGFydCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlV2luZG93KHdpbmRvd05hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMud2luZG93cy5nZXQod2luZG93TmFtZSk/LmRlc3Ryb3koKTtcbiAgICB0aGlzLndpbmRvd3MuZGVsZXRlKHdpbmRvd05hbWUpO1xuICB9XG5cbiAgcHVibGljIHRpY2soKTogdm9pZCB7XG4gICAgZm9yIChsZXQgd2luZG93IG9mIHRoaXMud2luZG93cy52YWx1ZXMoKSkge1xuICAgICAgd2luZG93LnRpY2soKTtcbiAgICB9XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windowManager.ts\n");

/***/ }),

/***/ "./src/window/windows/logWindow.ts":
/*!*****************************************!*\
  !*** ./src/window/windows/logWindow.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogWindow: () => (/* binding */ LogWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\nclass LogWindow extends _window__WEBPACK_IMPORTED_MODULE_1__.CADWindow {\n    populate() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getLog().getLogs();\n    }\n    tick() {\n        this.populate();\n        this.element.scrollTop = this.element.scrollHeight;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3MvbG9nV2luZG93LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUNDO0FBRS9CLE1BQU0sU0FBVSxTQUFRLDhDQUFTO0lBRS9CLFFBQVE7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRywwQ0FBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3ZELENBQUM7SUFFTSxJQUFJO1FBRVQsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0lBQ3JELENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL2xvZ1dpbmRvdy50cz83NWEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgQ0FEV2luZG93IH0gZnJvbSBcIi4uL3dpbmRvd1wiO1xuXG5leHBvcnQgY2xhc3MgTG9nV2luZG93IGV4dGVuZHMgQ0FEV2luZG93IHtcblxuICBwdWJsaWMgcG9wdWxhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IElOU1RBTkNFLmdldExvZygpLmdldExvZ3MoKTtcbiAgfVxuXG4gIHB1YmxpYyB0aWNrKCk6IHZvaWQge1xuXG4gICAgdGhpcy5wb3B1bGF0ZSgpO1xuICAgIHRoaXMuZWxlbWVudC5zY3JvbGxUb3AgPSB0aGlzLmVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/window/windows/logWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/materialsWindow.ts":
/*!***********************************************!*\
  !*** ./src/window/windows/materialsWindow.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MaterialsWindow: () => (/* binding */ MaterialsWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _utils_print__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/print */ \"./src/utils/print.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\n\nclass MaterialsWindow extends _window__WEBPACK_IMPORTED_MODULE_2__.CADWindow {\n    populate() {\n        const materials = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getMaterials();\n        var html = \"<u>MATERIALS</u><br>\";\n        materials.forEach((mat) => {\n            html +=\n                \"name:\" + mat.name +\n                    \", color:\" + (mat.color !== null ? (0,_utils_print__WEBPACK_IMPORTED_MODULE_1__.vec4ToString)(mat.color) : \"none\") +\n                    \"<br>\";\n        });\n        this.element.innerHTML = html;\n    }\n    tick() {\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3MvbWF0ZXJpYWxzV2luZG93LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDcUM7QUFFWTtBQUNaO0FBRzlCLE1BQU0sZUFBZ0IsU0FBUSw4Q0FBUztJQUVyQyxRQUFRO1FBQ2IsTUFBTSxTQUFTLEdBQTBCLDBDQUFRLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN0RixJQUFJLElBQUksR0FBVyxzQkFBc0IsQ0FBQztRQUMxQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBYSxFQUFFLEVBQUU7WUFDbEMsSUFBSTtnQkFDRixPQUFPLEdBQUcsR0FBRyxDQUFDLElBQUk7b0JBQ2xCLFVBQVUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQywwREFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO29CQUNyRSxNQUFNLENBQUM7UUFDWCxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztJQUNoQyxDQUFDO0lBRU0sSUFBSTtJQUVYLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL21hdGVyaWFsc1dpbmRvdy50cz8zNDdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHdhcm4gfSBmcm9tIFwiY29uc29sZVwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gXCIuLi8uLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IHZlYzRUb1N0cmluZyB9IGZyb20gXCIuLi8uLi91dGlscy9wcmludFwiO1xuaW1wb3J0IHsgQ0FEV2luZG93IH0gZnJvbSBcIi4uL3dpbmRvd1wiXG5cblxuZXhwb3J0IGNsYXNzIE1hdGVyaWFsc1dpbmRvdyBleHRlbmRzIENBRFdpbmRvdyB7XG5cbiAgcHVibGljIHBvcHVsYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1hdGVyaWFsczogTWFwPHN0cmluZywgTWF0ZXJpYWw+ID0gSU5TVEFOQ0UuZ2V0TWF0ZXJpYWxNYW5hZ2VyKCkuZ2V0TWF0ZXJpYWxzKCk7XG4gICAgdmFyIGh0bWw6IHN0cmluZyA9IFwiPHU+TUFURVJJQUxTPC91Pjxicj5cIjtcbiAgICBtYXRlcmlhbHMuZm9yRWFjaCgobWF0OiBNYXRlcmlhbCkgPT4ge1xuICAgICAgaHRtbCArPVxuICAgICAgICBcIm5hbWU6XCIgKyBtYXQubmFtZSArXG4gICAgICAgIFwiLCBjb2xvcjpcIiArIChtYXQuY29sb3IgIT09IG51bGwgPyB2ZWM0VG9TdHJpbmcobWF0LmNvbG9yISkgOiBcIm5vbmVcIikgK1xuICAgICAgICBcIjxicj5cIjtcbiAgICB9KTtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcbiAgfVxuXG4gIHB1YmxpYyB0aWNrKCk6IHZvaWQge1xuXG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windows/materialsWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/sceneWindow.ts":
/*!*******************************************!*\
  !*** ./src/window/windows/sceneWindow.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneWindow: () => (/* binding */ SceneWindow)\n/* harmony export */ });\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\nclass SceneWindow extends _window__WEBPACK_IMPORTED_MODULE_0__.CADWindow {\n    populate() {\n        this.element.innerHTML = \"<u>SCENE:</u><br>todo\";\n    }\n    tick() {\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3Mvc2NlbmVXaW5kb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFFL0IsTUFBTSxXQUFZLFNBQVEsOENBQVM7SUFFakMsUUFBUTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLHVCQUF1QixDQUFDO0lBQ25ELENBQUM7SUFFTSxJQUFJO0lBRVgsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvd2luZG93L3dpbmRvd3Mvc2NlbmVXaW5kb3cudHM/Njk3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDQURXaW5kb3cgfSBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmV4cG9ydCBjbGFzcyBTY2VuZVdpbmRvdyBleHRlbmRzIENBRFdpbmRvdyB7XG5cbiAgcHVibGljIHBvcHVsYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIjx1PlNDRU5FOjwvdT48YnI+dG9kb1wiO1xuICB9XG5cbiAgcHVibGljIHRpY2soKTogdm9pZCB7XG5cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windows/sceneWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/snapsWindow.ts":
/*!*******************************************!*\
  !*** ./src/window/windows/snapsWindow.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapsWindow: () => (/* binding */ SnapsWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\nclass SnapsWindow extends _window__WEBPACK_IMPORTED_MODULE_1__.CADWindow {\n    populate() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getHTML();\n    }\n    tick() {\n        this.populate();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3Mvc25hcHNXaW5kb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ0M7QUFFL0IsTUFBTSxXQUFZLFNBQVEsOENBQVM7SUFHakMsUUFBUTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLDBDQUFRLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVGLENBQUM7SUFFTSxJQUFJO1FBQ1QsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ2xCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL3NuYXBzV2luZG93LnRzPzk5MmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBDQURXaW5kb3cgfSBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmV4cG9ydCBjbGFzcyBTbmFwc1dpbmRvdyBleHRlbmRzIENBRFdpbmRvdyB7XG5cblxuICBwdWJsaWMgcG9wdWxhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IElOU1RBTkNFLmdldFNldHRpbmdzTWFuYWdlcigpLmdldFNuYXBTZXR0aW5nc01hbmFnZXIoKS5nZXRIVE1MKCk7XG4gIH1cblxuICBwdWJsaWMgdGljaygpOiB2b2lkIHtcbiAgICB0aGlzLnBvcHVsYXRlKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windows/snapsWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/statsWindow.ts":
/*!*******************************************!*\
  !*** ./src/window/windows/statsWindow.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StatsWindow: () => (/* binding */ StatsWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\nclass StatsWindow extends _window__WEBPACK_IMPORTED_MODULE_1__.CADWindow {\n    populate() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getStats().getInnerHTML();\n    }\n    tick() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getStats().getInnerHTML();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3Mvc3RhdHNXaW5kb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ0M7QUFFL0IsTUFBTSxXQUFZLFNBQVEsOENBQVM7SUFFakMsUUFBUTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDOUQsQ0FBQztJQUVNLElBQUk7UUFDVCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzlELENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL3N0YXRzV2luZG93LnRzPzUyNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBDQURXaW5kb3cgfSBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmV4cG9ydCBjbGFzcyBTdGF0c1dpbmRvdyBleHRlbmRzIENBRFdpbmRvdyB7XG5cbiAgcHVibGljIHBvcHVsYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBJTlNUQU5DRS5nZXRTdGF0cygpLmdldElubmVySFRNTCgpO1xuICB9XG5cbiAgcHVibGljIHRpY2soKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IElOU1RBTkNFLmdldFN0YXRzKCkuZ2V0SW5uZXJIVE1MKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windows/statsWindow.ts\n");

/***/ }),

/***/ "./src/render/shaders/instancedTriangleShader.wgsl":
/*!*********************************************************!*\
  !*** ./src/render/shaders/instancedTriangleShader.wgsl ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"\\nstruct VertexOutput {\\n  @builtin(position) position: vec4<f32>,\\n    @location(0) @interpolate(linear) normal: vec4<f32>\\n}\\n\\n// local uniforms:\\n@group(0) @binding(0) var<uniform> model: mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> color: vec4<f32>;\\n@group(0) @binding(2) var<uniform> flags: u32;\\n@group(0) @binding(3) var<storage, read> transforms: array<mat4x4<f32>>;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n\\nconst CONSTANT_SCREEN_SIZE_BIT: u32 = 1 << 0;\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) objectSpacePosition: vec4<f32>,\\n    @location(1) normal: vec4<f32>,\\n    @builtin(instance_index) instanceID: u32) -> VertexOutput \\n{\\n\\n  var toWorldSpace = model * transforms[instanceID];\\n  var worldSpacePosition = toWorldSpace * objectSpacePosition.xzyw;\\n\\n  if ((flags & CONSTANT_SCREEN_SIZE_BIT) != 0) {\\n    // scale object by distance (in model space)\\n    var dist: f32 = distance(worldSpacePosition.xyz, cameraPos.xzy);\\n    worldSpacePosition = toWorldSpace * vec4<f32>(objectSpacePosition.xzy * dist, objectSpacePosition.w);\\n  } \\n\\n  var output: VertexOutput;\\n  output.normal = normal.xzyw;\\n  output.position = cameraViewProj * worldSpacePosition;\\n  return output;\\n}\\n\\n\\n@fragment\\nfn fragmentMain(@location(0) @interpolate(linear) normal: vec4f) -> @location(0) vec4f {\\n\\n  var normalizedNormal: vec3<f32> = normalize(normal.xyz);\\n  return vec4<f32>(normalizedNormal/2.0 + vec3<f32>(0.5, 0.5, 0.5), 1.0);\\n\\n}\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvaW5zdGFuY2VkVHJpYW5nbGVTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsd0JBQXdCLHVHQUF1Ryw4RUFBOEUsc0RBQXNELGdEQUFnRCwwRUFBMEUsaUZBQWlGLGlFQUFpRSxpREFBaUQscUxBQXFMLHdEQUF3RCxxRUFBcUUsb0RBQW9ELHdIQUF3SCwyR0FBMkcsTUFBTSwrQkFBK0IsZ0NBQWdDLDBEQUEwRCxrQkFBa0IsR0FBRyx5R0FBeUcsOERBQThELDJFQUEyRSxLQUFLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3NoYWRlcnMvaW5zdGFuY2VkVHJpYW5nbGVTaGFkZXIud2dzbD8xYzljIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuc3RydWN0IFZlcnRleE91dHB1dCB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb246IHZlYzQ8ZjMyPixcXG4gICAgQGxvY2F0aW9uKDApIEBpbnRlcnBvbGF0ZShsaW5lYXIpIG5vcm1hbDogdmVjNDxmMzI+XFxufVxcblxcbi8vIGxvY2FsIHVuaWZvcm1zOlxcbkBncm91cCgwKSBAYmluZGluZygwKSB2YXI8dW5pZm9ybT4gbW9kZWw6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gY29sb3I6IHZlYzQ8ZjMyPjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IGZsYWdzOiB1MzI7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDMpIHZhcjxzdG9yYWdlLCByZWFkPiB0cmFuc2Zvcm1zOiBhcnJheTxtYXQ0eDQ8ZjMyPj47XFxuXFxuLy8gZ2xvYmFsIHVuaWZvcm1zOlxcbkBncm91cCgxKSBAYmluZGluZygwKSB2YXI8dW5pZm9ybT4gY2FtZXJhUG9zOiB2ZWMzPGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDEpIHZhcjx1bmlmb3JtPiBjYW1lcmFWaWV3UHJvajogbWF0NHg0PGYzMj47XFxuXFxuY29uc3QgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUOiB1MzIgPSAxIDw8IDA7XFxuXFxuQHZlcnRleFxcbmZuIHZlcnRleE1haW4oXFxuICAgIEBsb2NhdGlvbigwKSBvYmplY3RTcGFjZVBvc2l0aW9uOiB2ZWM0PGYzMj4sXFxuICAgIEBsb2NhdGlvbigxKSBub3JtYWw6IHZlYzQ8ZjMyPixcXG4gICAgQGJ1aWx0aW4oaW5zdGFuY2VfaW5kZXgpIGluc3RhbmNlSUQ6IHUzMikgLT4gVmVydGV4T3V0cHV0IFxcbntcXG5cXG4gIHZhciB0b1dvcmxkU3BhY2UgPSBtb2RlbCAqIHRyYW5zZm9ybXNbaW5zdGFuY2VJRF07XFxuICB2YXIgd29ybGRTcGFjZVBvc2l0aW9uID0gdG9Xb3JsZFNwYWNlICogb2JqZWN0U3BhY2VQb3NpdGlvbi54enl3O1xcblxcbiAgaWYgKChmbGFncyAmIENPTlNUQU5UX1NDUkVFTl9TSVpFX0JJVCkgIT0gMCkge1xcbiAgICAvLyBzY2FsZSBvYmplY3QgYnkgZGlzdGFuY2UgKGluIG1vZGVsIHNwYWNlKVxcbiAgICB2YXIgZGlzdDogZjMyID0gZGlzdGFuY2Uod29ybGRTcGFjZVBvc2l0aW9uLnh5eiwgY2FtZXJhUG9zLnh6eSk7XFxuICAgIHdvcmxkU3BhY2VQb3NpdGlvbiA9IHRvV29ybGRTcGFjZSAqIHZlYzQ8ZjMyPihvYmplY3RTcGFjZVBvc2l0aW9uLnh6eSAqIGRpc3QsIG9iamVjdFNwYWNlUG9zaXRpb24udyk7XFxuICB9IFxcblxcbiAgdmFyIG91dHB1dDogVmVydGV4T3V0cHV0O1xcbiAgb3V0cHV0Lm5vcm1hbCA9IG5vcm1hbC54enl3O1xcbiAgb3V0cHV0LnBvc2l0aW9uID0gY2FtZXJhVmlld1Byb2ogKiB3b3JsZFNwYWNlUG9zaXRpb247XFxuICByZXR1cm4gb3V0cHV0O1xcbn1cXG5cXG5cXG5AZnJhZ21lbnRcXG5mbiBmcmFnbWVudE1haW4oQGxvY2F0aW9uKDApIEBpbnRlcnBvbGF0ZShsaW5lYXIpIG5vcm1hbDogdmVjNGYpIC0+IEBsb2NhdGlvbigwKSB2ZWM0ZiB7XFxuXFxuICB2YXIgbm9ybWFsaXplZE5vcm1hbDogdmVjMzxmMzI+ID0gbm9ybWFsaXplKG5vcm1hbC54eXopO1xcbiAgcmV0dXJuIHZlYzQ8ZjMyPihub3JtYWxpemVkTm9ybWFsLzIuMCArIHZlYzM8ZjMyPigwLjUsIDAuNSwgMC41KSwgMS4wKTtcXG5cXG59XFxuXFxuXFxuXFxuXCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/shaders/instancedTriangleShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/lineShader.wgsl":
/*!********************************************!*\
  !*** ./src/render/shaders/lineShader.wgsl ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"\\nstruct VertexOutput {\\n  @builtin(position) position : vec4<f32>,\\n}\\n\\n@group(0) @binding(0) var<uniform> model : mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> color : vec4<f32>;\\n@group(0) @binding(2) var<uniform> flags: i32;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) position : vec4<f32>,\\n    ) -> VertexOutput\\n{\\n  var output: VertexOutput;\\n  output.position = cameraViewProj * model * position.xzyw;\\n  return output;\\n}\\n\\nstruct FragOutputs {\\n  @builtin(frag_depth) depth: f32,\\n  @location(0) color: vec4f,\\n}\\n\\nstruct FragInputs {\\n  @builtin(position) position: vec4<f32>,\\n}\\n\\n@fragment\\nfn fragmentMain(input: FragInputs) -> FragOutputs {\\n  var output: FragOutputs;\\n  output.color = color;\\n  output.depth = input.position.z * 0.9999999;\\n  return output;\\n}\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvbGluZVNoYWRlci53Z3NsIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSx3QkFBd0IsK0NBQStDLDJEQUEyRCx1REFBdUQsZ0RBQWdELGlGQUFpRixpRUFBaUUsNkZBQTZGLDZCQUE2Qiw2REFBNkQsa0JBQWtCLEdBQUcsd0JBQXdCLHFFQUFxRSx1QkFBdUIsOENBQThDLGtFQUFrRSw0QkFBNEIseUJBQXlCLGdEQUFnRCxrQkFBa0IsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9zaGFkZXJzL2xpbmVTaGFkZXIud2dzbD8yNTRjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuc3RydWN0IFZlcnRleE91dHB1dCB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0PGYzMj4sXFxufVxcblxcbkBncm91cCgwKSBAYmluZGluZygwKSB2YXI8dW5pZm9ybT4gbW9kZWwgOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMSkgdmFyPHVuaWZvcm0+IGNvbG9yIDogdmVjNDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygyKSB2YXI8dW5pZm9ybT4gZmxhZ3M6IGkzMjtcXG5cXG4vLyBnbG9iYWwgdW5pZm9ybXM6XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBjYW1lcmFQb3M6IHZlYzM8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMSkgdmFyPHVuaWZvcm0+IGNhbWVyYVZpZXdQcm9qOiBtYXQ0eDQ8ZjMyPjtcXG5cXG5AdmVydGV4XFxuZm4gdmVydGV4TWFpbihcXG4gICAgQGxvY2F0aW9uKDApIHBvc2l0aW9uIDogdmVjNDxmMzI+LFxcbiAgICApIC0+IFZlcnRleE91dHB1dFxcbntcXG4gIHZhciBvdXRwdXQ6IFZlcnRleE91dHB1dDtcXG4gIG91dHB1dC5wb3NpdGlvbiA9IGNhbWVyYVZpZXdQcm9qICogbW9kZWwgKiBwb3NpdGlvbi54enl3O1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXFxuc3RydWN0IEZyYWdPdXRwdXRzIHtcXG4gIEBidWlsdGluKGZyYWdfZGVwdGgpIGRlcHRoOiBmMzIsXFxuICBAbG9jYXRpb24oMCkgY29sb3I6IHZlYzRmLFxcbn1cXG5cXG5zdHJ1Y3QgRnJhZ0lucHV0cyB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb246IHZlYzQ8ZjMyPixcXG59XFxuXFxuQGZyYWdtZW50XFxuZm4gZnJhZ21lbnRNYWluKGlucHV0OiBGcmFnSW5wdXRzKSAtPiBGcmFnT3V0cHV0cyB7XFxuICB2YXIgb3V0cHV0OiBGcmFnT3V0cHV0cztcXG4gIG91dHB1dC5jb2xvciA9IGNvbG9yO1xcbiAgb3V0cHV0LmRlcHRoID0gaW5wdXQucG9zaXRpb24ueiAqIDAuOTk5OTk5OTtcXG4gIHJldHVybiBvdXRwdXQ7XFxufVxcblxcblxcblxcblwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/shaders/lineShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/pointShader.wgsl":
/*!*********************************************!*\
  !*** ./src/render/shaders/pointShader.wgsl ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"\\nstruct VertexOutput {\\n  @builtin(position) position : vec4<f32>,\\n}\\n\\n@group(0) @binding(0) var<uniform> model : mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> color : vec4<f32>;\\n@group(0) @binding(2) var<uniform> flags: i32;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) position : vec4<f32>,\\n    ) -> VertexOutput\\n{\\n  var output: VertexOutput;\\n  output.position = cameraViewProj * model * position.xzyw;\\n  return output;\\n}\\n\\nstruct FragOutputs {\\n  @builtin(frag_depth) depth: f32,\\n  @location(0) color: vec4f,\\n}\\n\\nstruct FragInputs {\\n  @builtin(position) position: vec4<f32>,\\n}\\n\\n@fragment\\nfn fragmentMain(input: FragInputs) -> FragOutputs {\\n  var output: FragOutputs;\\n  output.color = vec4<f32>(1,0,0,1);\\n  output.depth = input.position.z * 0.9999;\\n  return output;\\n}\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvcG9pbnRTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsd0JBQXdCLCtDQUErQywyREFBMkQsdURBQXVELGdEQUFnRCxpRkFBaUYsaUVBQWlFLDZGQUE2Riw2QkFBNkIsNkRBQTZELGtCQUFrQixHQUFHLHdCQUF3QixxRUFBcUUsdUJBQXVCLDhDQUE4QyxrRUFBa0UsNEJBQTRCLHNDQUFzQyw2Q0FBNkMsa0JBQWtCLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvc2hhZGVycy9wb2ludFNoYWRlci53Z3NsPzYwZDUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJcXG5zdHJ1Y3QgVmVydGV4T3V0cHV0IHtcXG4gIEBidWlsdGluKHBvc2l0aW9uKSBwb3NpdGlvbiA6IHZlYzQ8ZjMyPixcXG59XFxuXFxuQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBtb2RlbCA6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gY29sb3IgOiB2ZWM0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiBmbGFnczogaTMyO1xcblxcbi8vIGdsb2JhbCB1bmlmb3JtczpcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IGNhbWVyYVBvczogdmVjMzxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gY2FtZXJhVmlld1Byb2o6IG1hdDR4NDxmMzI+O1xcblxcbkB2ZXJ0ZXhcXG5mbiB2ZXJ0ZXhNYWluKFxcbiAgICBAbG9jYXRpb24oMCkgcG9zaXRpb24gOiB2ZWM0PGYzMj4sXFxuICAgICkgLT4gVmVydGV4T3V0cHV0XFxue1xcbiAgdmFyIG91dHB1dDogVmVydGV4T3V0cHV0O1xcbiAgb3V0cHV0LnBvc2l0aW9uID0gY2FtZXJhVmlld1Byb2ogKiBtb2RlbCAqIHBvc2l0aW9uLnh6eXc7XFxuICByZXR1cm4gb3V0cHV0O1xcbn1cXG5cXG5zdHJ1Y3QgRnJhZ091dHB1dHMge1xcbiAgQGJ1aWx0aW4oZnJhZ19kZXB0aCkgZGVwdGg6IGYzMixcXG4gIEBsb2NhdGlvbigwKSBjb2xvcjogdmVjNGYsXFxufVxcblxcbnN0cnVjdCBGcmFnSW5wdXRzIHtcXG4gIEBidWlsdGluKHBvc2l0aW9uKSBwb3NpdGlvbjogdmVjNDxmMzI+LFxcbn1cXG5cXG5AZnJhZ21lbnRcXG5mbiBmcmFnbWVudE1haW4oaW5wdXQ6IEZyYWdJbnB1dHMpIC0+IEZyYWdPdXRwdXRzIHtcXG4gIHZhciBvdXRwdXQ6IEZyYWdPdXRwdXRzO1xcbiAgb3V0cHV0LmNvbG9yID0gdmVjNDxmMzI+KDEsMCwwLDEpO1xcbiAgb3V0cHV0LmRlcHRoID0gaW5wdXQucG9zaXRpb24ueiAqIDAuOTk5OTtcXG4gIHJldHVybiBvdXRwdXQ7XFxufVxcblxcblxcblwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/shaders/pointShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/triangleShader.wgsl":
/*!************************************************!*\
  !*** ./src/render/shaders/triangleShader.wgsl ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"struct VertexOutput {\\n\\t@builtin(position) position : vec4<f32>,\\n\\t@location(0) @interpolate(linear) normal : vec4<f32>\\n}\\n\\n@group(0) @binding(0) var<uniform> model : mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> color : vec4<f32>;\\n@group(0) @binding(2) var<uniform> flags: i32;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n\\n@vertex\\nfn vertexMain(\\n\\t@location(0) position : vec4<f32>,\\n\\t@location(1) normal : vec4<f32>\\n\\t) -> VertexOutput\\n{\\n\\tvar output: VertexOutput;\\n\\toutput.normal = normal.xzyw;\\n\\toutput.position = cameraViewProj * model * position.xzyw;\\n\\treturn output;\\n}\\n\\n\\n@fragment\\nfn fragmentMain(@location(0) @interpolate(linear) normal : vec4f) -> @location(0) vec4f {\\n\\n\\tvar normalizedNormal: vec3<f32> = normalize(normal.xyz);\\n    return vec4<f32>(normalizedNormal/2.0 + vec3<f32>(0.5, 0.5, 0.5), 1.0);\\n\\n}\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvdHJpYW5nbGVTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsc0JBQXNCLHVHQUF1RywyREFBMkQsdURBQXVELGdEQUFnRCxpRkFBaUYsaUVBQWlFLDRIQUE0SCw2QkFBNkIsZ0NBQWdDLDZEQUE2RCxrQkFBa0IsR0FBRywwR0FBMEcsOERBQThELDZFQUE2RSxLQUFLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3NoYWRlcnMvdHJpYW5nbGVTaGFkZXIud2dzbD9kM2RkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwic3RydWN0IFZlcnRleE91dHB1dCB7XFxuXFx0QGJ1aWx0aW4ocG9zaXRpb24pIHBvc2l0aW9uIDogdmVjNDxmMzI+LFxcblxcdEBsb2NhdGlvbigwKSBAaW50ZXJwb2xhdGUobGluZWFyKSBub3JtYWwgOiB2ZWM0PGYzMj5cXG59XFxuXFxuQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBtb2RlbCA6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gY29sb3IgOiB2ZWM0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiBmbGFnczogaTMyO1xcblxcbi8vIGdsb2JhbCB1bmlmb3JtczpcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IGNhbWVyYVBvczogdmVjMzxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gY2FtZXJhVmlld1Byb2o6IG1hdDR4NDxmMzI+O1xcblxcbkB2ZXJ0ZXhcXG5mbiB2ZXJ0ZXhNYWluKFxcblxcdEBsb2NhdGlvbigwKSBwb3NpdGlvbiA6IHZlYzQ8ZjMyPixcXG5cXHRAbG9jYXRpb24oMSkgbm9ybWFsIDogdmVjNDxmMzI+XFxuXFx0KSAtPiBWZXJ0ZXhPdXRwdXRcXG57XFxuXFx0dmFyIG91dHB1dDogVmVydGV4T3V0cHV0O1xcblxcdG91dHB1dC5ub3JtYWwgPSBub3JtYWwueHp5dztcXG5cXHRvdXRwdXQucG9zaXRpb24gPSBjYW1lcmFWaWV3UHJvaiAqIG1vZGVsICogcG9zaXRpb24ueHp5dztcXG5cXHRyZXR1cm4gb3V0cHV0O1xcbn1cXG5cXG5cXG5AZnJhZ21lbnRcXG5mbiBmcmFnbWVudE1haW4oQGxvY2F0aW9uKDApIEBpbnRlcnBvbGF0ZShsaW5lYXIpIG5vcm1hbCA6IHZlYzRmKSAtPiBAbG9jYXRpb24oMCkgdmVjNGYge1xcblxcblxcdHZhciBub3JtYWxpemVkTm9ybWFsOiB2ZWMzPGYzMj4gPSBub3JtYWxpemUobm9ybWFsLnh5eik7XFxuICAgIHJldHVybiB2ZWM0PGYzMj4obm9ybWFsaXplZE5vcm1hbC8yLjAgKyB2ZWMzPGYzMj4oMC41LCAwLjUsIDAuNSksIDEuMCk7XFxuXFxufVxcblxcblxcblxcblwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/shaders/triangleShader.wgsl\n");

/***/ }),

/***/ "./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js":
/*!*****************************************************************!*\
  !*** ./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mat3: () => (/* binding */ mat3Impl),\n/* harmony export */   mat4: () => (/* binding */ mat4Impl),\n/* harmony export */   quat: () => (/* binding */ quatImpl),\n/* harmony export */   setDefaultType: () => (/* binding */ setDefaultType),\n/* harmony export */   utils: () => (/* binding */ utils),\n/* harmony export */   vec2: () => (/* binding */ vec2Impl),\n/* harmony export */   vec3: () => (/* binding */ vec3Impl),\n/* harmony export */   vec4: () => (/* binding */ vec4Impl)\n/* harmony export */ });\n/* wgpu-matrix@2.5.0, license MIT */\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nlet EPSILON = 0.000001;\n/**\n * Set the value for EPSILON for various checks\n * @param v - Value to use for EPSILON.\n * @returns previous value of EPSILON;\n */\nfunction setEpsilon(v) {\n    const old = EPSILON;\n    EPSILON = v;\n    return old;\n}\n/**\n * Convert degrees to radians\n * @param degrees - Angle in degrees\n * @returns angle converted to radians\n */\nfunction degToRad(degrees) {\n    return degrees * Math.PI / 180;\n}\n/**\n * Convert radians to degrees\n * @param radians - Angle in radians\n * @returns angle converted to degrees\n */\nfunction radToDeg(radians) {\n    return radians * 180 / Math.PI;\n}\n/**\n * Lerps between a and b via t\n * @param a - starting value\n * @param b - ending value\n * @param t - value where 0 = a and 1 = b\n * @returns a + (b - a) * t\n */\nfunction lerp$4(a, b, t) {\n    return a + (b - a) * t;\n}\n/**\n * Compute the opposite of lerp. Given a and b and a value between\n * a and b returns a value between 0 and 1. 0 if a, 1 if b.\n * Note: no clamping is done.\n * @param a - start value\n * @param b - end value\n * @param v - value between a and b\n * @returns (v - a) / (b - a)\n */\nfunction inverseLerp(a, b, v) {\n    const d = b - a;\n    return (Math.abs(b - a) < EPSILON)\n        ? a\n        : (v - a) / d;\n}\n/**\n * Compute the euclidean modulo\n *\n * ```\n * // table for n / 3\n * -5, -4, -3, -2, -1,  0,  1,  2,  3,  4,  5   <- n\n * ------------------------------------\n * -2  -1  -0  -2  -1   0,  1,  2,  0,  1,  2   <- n % 3\n *  1   2   0   1   2   0,  1,  2,  0,  1,  2   <- euclideanModule(n, 3)\n * ```\n *\n * @param n - dividend\n * @param m - divisor\n * @returns the euclidean modulo of n / m\n */\nfunction euclideanModulo(n, m) {\n    return ((n % m) + m) % m;\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    get EPSILON () { return EPSILON; },\n    setEpsilon: setEpsilon,\n    degToRad: degToRad,\n    radToDeg: radToDeg,\n    lerp: lerp$4,\n    inverseLerp: inverseLerp,\n    euclideanModulo: euclideanModulo\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Vec2 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new Vec2. In other words you can do this\n *\n *     const v = vec2.cross(v1, v2);  // Creates a new Vec2 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = vec2.create();\n *     vec2.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     vec2.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet VecType$2 = Float32Array;\n/**\n * Sets the type this library creates for a Vec2\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Vec2\n */\nfunction setDefaultType$6(ctor) {\n    const oldType = VecType$2;\n    VecType$2 = ctor;\n    return oldType;\n}\n/**\n * Creates a Vec2; may be called with x, y, z to set initial values.\n *\n * Note: Since passing in a raw JavaScript array\n * is valid in all circumstances, if you want to\n * force a JavaScript array into a Vec2's specified type\n * it would be faster to use\n *\n * ```\n * const v = vec2.clone(someJSArray);\n * ```\n *\n * Note: a consequence of the implementation is if your Vec2Type = `Array`\n * instead of `Float32Array` or `Float64Array` then any values you\n * don't pass in will be undefined. Usually this is not an issue since\n * (a) using `Array` is rare and (b) using `vec2.create` is usually used\n * to create a Vec2 to be filled out as in\n *\n * ```\n * const sum = vec2.create();\n * vec2.add(v1, v2, sum);\n * ```\n *\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @returns the created vector\n */\nfunction create$5(x = 0, y = 0) {\n    const dst = new VecType$2(2);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a Vec2; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @returns the created vector\n */\nconst fromValues$3 = create$5;\n/**\n * Sets the values of a Vec2\n * Also see {@link vec2.create} and {@link vec2.copy}\n *\n * @param x first value\n * @param y second value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set$5(x, y, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = x;\n    dst[1] = y;\n    return dst;\n}\n/**\n * Applies Math.ceil to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the ceil of each element of v.\n */\nfunction ceil$2(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.ceil(v[0]);\n    dst[1] = Math.ceil(v[1]);\n    return dst;\n}\n/**\n * Applies Math.floor to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the floor of each element of v.\n */\nfunction floor$2(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.floor(v[0]);\n    dst[1] = Math.floor(v[1]);\n    return dst;\n}\n/**\n * Applies Math.round to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the round of each element of v.\n */\nfunction round$2(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.round(v[0]);\n    dst[1] = Math.round(v[1]);\n    return dst;\n}\n/**\n * Clamp each element of vector between min and max\n * @param v - Operand vector.\n * @param max - Min value, default 0\n * @param min - Max value, default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that the clamped value of each element of v.\n */\nfunction clamp$2(v, min = 0, max = 1, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.min(max, Math.max(min, v[0]));\n    dst[1] = Math.min(max, Math.max(min, v[1]));\n    return dst;\n}\n/**\n * Adds two vectors; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a and b.\n */\nfunction add$3(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    return dst;\n}\n/**\n * Adds two vectors, scaling the 2nd; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param scale - Amount to scale b\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a + b * scale.\n */\nfunction addScaled$2(a, b, scale, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + b[0] * scale;\n    dst[1] = a[1] + b[1] * scale;\n    return dst;\n}\n/**\n * Returns the angle in radians between two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns The angle in radians between the 2 vectors.\n */\nfunction angle$2(a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const bx = a[0];\n    const by = a[1];\n    const mag1 = Math.sqrt(ax * ax + ay * ay);\n    const mag2 = Math.sqrt(bx * bx + by * by);\n    const mag = mag1 * mag2;\n    const cosine = mag && dot$3(a, b) / mag;\n    return Math.acos(cosine);\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nfunction subtract$3(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nconst sub$3 = subtract$3;\n/**\n * Check if 2 vectors are approximately equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are approximately equal\n */\nfunction equalsApproximately$5(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON;\n}\n/**\n * Check if 2 vectors are exactly equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are exactly equal\n */\nfunction equals$5(a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficient.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp$3(a, b, t, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient vector t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficients vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns the linear interpolated result.\n */\nfunction lerpV$2(a, b, t, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + t[0] * (b[0] - a[0]);\n    dst[1] = a[1] + t[1] * (b[1] - a[1]);\n    return dst;\n}\n/**\n * Return max values of two vectors.\n * Given vectors a and b returns\n * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The max components vector.\n */\nfunction max$2(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.max(a[0], b[0]);\n    dst[1] = Math.max(a[1], b[1]);\n    return dst;\n}\n/**\n * Return min values of two vectors.\n * Given vectors a and b returns\n * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The min components vector.\n */\nfunction min$2(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.min(a[0], b[0]);\n    dst[1] = Math.min(a[1], b[1]);\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction mulScalar$3(v, k, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar. (same as mulScalar)\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nconst scale$5 = mulScalar$3;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction divScalar$3(v, k, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    return dst;\n}\n/**\n * Inverse a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nfunction inverse$5(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = 1 / v[0];\n    dst[1] = 1 / v[1];\n    return dst;\n}\n/**\n * Invert a vector. (same as inverse)\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nconst invert$4 = inverse$5;\n/**\n * Computes the cross product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of a cross b.\n */\nfunction cross$1(a, b, dst) {\n    dst = dst || new VecType$2(3);\n    const z = a[0] * b[1] - a[1] * b[0];\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = z;\n    return dst;\n}\n/**\n * Computes the dot product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns dot product\n */\nfunction dot$3(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the length of vector\n * @param v - vector.\n * @returns length of vector.\n */\nfunction length$3(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    return Math.sqrt(v0 * v0 + v1 * v1);\n}\n/**\n * Computes the length of vector (same as length)\n * @param v - vector.\n * @returns length of vector.\n */\nconst len$3 = length$3;\n/**\n * Computes the square of the length of vector\n * @param v - vector.\n * @returns square of the length of vector.\n */\nfunction lengthSq$3(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    return v0 * v0 + v1 * v1;\n}\n/**\n * Computes the square of the length of vector (same as lengthSq)\n * @param v - vector.\n * @returns square of the length of vector.\n */\nconst lenSq$3 = lengthSq$3;\n/**\n * Computes the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nfunction distance$2(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\n/**\n * Computes the distance between 2 points (same as distance)\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nconst dist$2 = distance$2;\n/**\n * Computes the square of the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nfunction distanceSq$2(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    return dx * dx + dy * dy;\n}\n/**\n * Computes the square of the distance between 2 points (same as distanceSq)\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nconst distSq$2 = distanceSq$2;\n/**\n * Divides a vector by its Euclidean length and returns the quotient.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The normalized vector.\n */\nfunction normalize$3(v, dst) {\n    dst = dst || new VecType$2(2);\n    const v0 = v[0];\n    const v1 = v[1];\n    const len = Math.sqrt(v0 * v0 + v1 * v1);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n    }\n    return dst;\n}\n/**\n * Negates a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns -v.\n */\nfunction negate$4(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = -v[0];\n    dst[1] = -v[1];\n    return dst;\n}\n/**\n * Copies a vector. (same as {@link vec2.clone})\n * Also see {@link vec2.create} and {@link vec2.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nfunction copy$5(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = v[0];\n    dst[1] = v[1];\n    return dst;\n}\n/**\n * Clones a vector. (same as {@link vec2.copy})\n * Also see {@link vec2.create} and {@link vec2.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nconst clone$5 = copy$5;\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nfunction multiply$5(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] * b[0];\n    dst[1] = a[1] * b[1];\n    return dst;\n}\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as mul)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nconst mul$5 = multiply$5;\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nfunction divide$2(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] / b[0];\n    dst[1] = a[1] / b[1];\n    return dst;\n}\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as divide)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nconst div$2 = divide$2;\n/**\n * Creates a random unit vector * scale\n * @param scale - Default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The random vector.\n */\nfunction random$1(scale = 1, dst) {\n    dst = dst || new VecType$2(2);\n    const angle = Math.random() * 2 * Math.PI;\n    dst[0] = Math.cos(angle) * scale;\n    dst[1] = Math.sin(angle) * scale;\n    return dst;\n}\n/**\n * Zero's a vector\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The zeroed vector.\n */\nfunction zero$2(dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = 0;\n    dst[1] = 0;\n    return dst;\n}\n/**\n * transform Vec2 by 4x4 matrix\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional Vec2 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat4$2(v, m, dst) {\n    dst = dst || new VecType$2(2);\n    const x = v[0];\n    const y = v[1];\n    dst[0] = x * m[0] + y * m[4] + m[12];\n    dst[1] = x * m[1] + y * m[5] + m[13];\n    return dst;\n}\n/**\n * Transforms vec4 by 3x3 matrix\n *\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional Vec2 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat3$1(v, m, dst) {\n    dst = dst || new VecType$2(2);\n    const x = v[0];\n    const y = v[1];\n    dst[0] = m[0] * x + m[4] * y + m[8];\n    dst[1] = m[1] * x + m[5] * y + m[9];\n    return dst;\n}\n\nvar vec2Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create$5,\n    setDefaultType: setDefaultType$6,\n    fromValues: fromValues$3,\n    set: set$5,\n    ceil: ceil$2,\n    floor: floor$2,\n    round: round$2,\n    clamp: clamp$2,\n    add: add$3,\n    addScaled: addScaled$2,\n    angle: angle$2,\n    subtract: subtract$3,\n    sub: sub$3,\n    equalsApproximately: equalsApproximately$5,\n    equals: equals$5,\n    lerp: lerp$3,\n    lerpV: lerpV$2,\n    max: max$2,\n    min: min$2,\n    mulScalar: mulScalar$3,\n    scale: scale$5,\n    divScalar: divScalar$3,\n    inverse: inverse$5,\n    invert: invert$4,\n    cross: cross$1,\n    dot: dot$3,\n    length: length$3,\n    len: len$3,\n    lengthSq: lengthSq$3,\n    lenSq: lenSq$3,\n    distance: distance$2,\n    dist: dist$2,\n    distanceSq: distanceSq$2,\n    distSq: distSq$2,\n    normalize: normalize$3,\n    negate: negate$4,\n    copy: copy$5,\n    clone: clone$5,\n    multiply: multiply$5,\n    mul: mul$5,\n    divide: divide$2,\n    div: div$2,\n    random: random$1,\n    zero: zero$2,\n    transformMat4: transformMat4$2,\n    transformMat3: transformMat3$1\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * 3x3 Matrix math math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new matrix. In other words you can do this\n *\n *     const mat = mat3.translation([1, 2, 3]);  // Creates a new translation matrix\n *\n * or\n *\n *     const mat = mat3.create();\n *     mat3.translation([1, 2, 3], mat);  // Puts translation matrix in mat.\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always save to pass any matrix as the destination. So for example\n *\n *     const mat = mat3.identity();\n *     const trans = mat3.translation([1, 2, 3]);\n *     mat3.multiply(mat, trans, mat);  // Multiplies mat * trans and puts result in mat.\n *\n */\nlet MatType$1 = Float32Array;\n// This mess is because with Mat3 we have 3 unused elements.\n// For Float32Array and Float64Array that's not an issue\n// but for Array it's troublesome\nconst ctorMap = new Map([\n    [Float32Array, () => new Float32Array(12)],\n    [Float64Array, () => new Float64Array(12)],\n    [Array, () => new Array(12).fill(0)],\n]);\nlet newMat3 = ctorMap.get(Float32Array);\n/**\n * Sets the type this library creates for a Mat3\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Mat3\n */\nfunction setDefaultType$5(ctor) {\n    const oldType = MatType$1;\n    MatType$1 = ctor;\n    newMat3 = ctorMap.get(ctor);\n    return oldType;\n}\n/**\n * Create a Mat3 from values\n *\n * Note: Since passing in a raw JavaScript array\n * is valid in all circumstances, if you want to\n * force a JavaScript array into a Mat3's specified type\n * it would be faster to use\n *\n * ```\n * const m = mat3.clone(someJSArray);\n * ```\n *\n * Note: a consequence of the implementation is if your Mat3Type = `Array`\n * instead of `Float32Array` or `Float64Array` then any values you\n * don't pass in will be undefined. Usually this is not an issue since\n * (a) using `Array` is rare and (b) using `mat3.create` is usually used\n * to create a Mat3 to be filled out as in\n *\n * ```\n * const m = mat3.create();\n * mat3.perspective(fov, aspect, near, far, m);\n * ```\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @returns matrix created from values.\n */\nfunction create$4(v0, v1, v2, v3, v4, v5, v6, v7, v8) {\n    const dst = newMat3();\n    // to make the array homogenous\n    dst[3] = 0;\n    dst[7] = 0;\n    dst[11] = 0;\n    if (v0 !== undefined) {\n        dst[0] = v0;\n        if (v1 !== undefined) {\n            dst[1] = v1;\n            if (v2 !== undefined) {\n                dst[2] = v2;\n                if (v3 !== undefined) {\n                    dst[4] = v3;\n                    if (v4 !== undefined) {\n                        dst[5] = v4;\n                        if (v5 !== undefined) {\n                            dst[6] = v5;\n                            if (v6 !== undefined) {\n                                dst[8] = v6;\n                                if (v7 !== undefined) {\n                                    dst[9] = v7;\n                                    if (v8 !== undefined) {\n                                        dst[10] = v8;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return dst;\n}\n/**\n * Sets the values of a Mat3\n * Also see {@link mat3.create} and {@link mat3.copy}\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat3 set from values.\n */\nfunction set$4(v0, v1, v2, v3, v4, v5, v6, v7, v8, dst) {\n    dst = dst || newMat3();\n    dst[0] = v0;\n    dst[1] = v1;\n    dst[2] = v2;\n    dst[3] = 0;\n    dst[4] = v3;\n    dst[5] = v4;\n    dst[6] = v5;\n    dst[7] = 0;\n    dst[8] = v6;\n    dst[9] = v7;\n    dst[10] = v8;\n    dst[11] = 0;\n    return dst;\n}\n/**\n * Creates a Mat3 from the upper left 3x3 part of a Mat4\n * @param m4 - source matrix\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat3 made from m4\n */\nfunction fromMat4(m4, dst) {\n    dst = dst || newMat3();\n    dst[0] = m4[0];\n    dst[1] = m4[1];\n    dst[2] = m4[2];\n    dst[3] = 0;\n    dst[4] = m4[4];\n    dst[5] = m4[5];\n    dst[6] = m4[6];\n    dst[7] = 0;\n    dst[8] = m4[8];\n    dst[9] = m4[9];\n    dst[10] = m4[10];\n    dst[11] = 0;\n    return dst;\n}\n/**\n * Creates a Mat3 rotation matrix from a quaternion\n * @param q - quaternion to create matrix from\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat3 made from q\n */\nfunction fromQuat$1(q, dst) {\n    dst = dst || newMat3();\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const yx = y * x2;\n    const yy = y * y2;\n    const zx = z * x2;\n    const zy = z * y2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    dst[0] = 1 - yy - zz;\n    dst[1] = yx + wz;\n    dst[2] = zx - wy;\n    dst[3] = 0;\n    dst[4] = yx - wz;\n    dst[5] = 1 - xx - zz;\n    dst[6] = zy + wx;\n    dst[7] = 0;\n    dst[8] = zx + wy;\n    dst[9] = zy - wx;\n    dst[10] = 1 - xx - yy;\n    dst[11] = 0;\n    return dst;\n}\n/**\n * Negates a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns -m.\n */\nfunction negate$3(m, dst) {\n    dst = dst || newMat3();\n    dst[0] = -m[0];\n    dst[1] = -m[1];\n    dst[2] = -m[2];\n    dst[4] = -m[4];\n    dst[5] = -m[5];\n    dst[6] = -m[6];\n    dst[8] = -m[8];\n    dst[9] = -m[9];\n    dst[10] = -m[10];\n    return dst;\n}\n/**\n * Copies a matrix. (same as {@link mat3.clone})\n * Also see {@link mat3.create} and {@link mat3.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nfunction copy$4(m, dst) {\n    dst = dst || newMat3();\n    dst[0] = m[0];\n    dst[1] = m[1];\n    dst[2] = m[2];\n    dst[4] = m[4];\n    dst[5] = m[5];\n    dst[6] = m[6];\n    dst[8] = m[8];\n    dst[9] = m[9];\n    dst[10] = m[10];\n    return dst;\n}\n/**\n * Copies a matrix (same as {@link mat3.copy})\n * Also see {@link mat3.create} and {@link mat3.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nconst clone$4 = copy$4;\n/**\n * Check if 2 matrices are approximately equal\n * @param a Operand matrix.\n * @param b Operand matrix.\n * @returns true if matrices are approximately equal\n */\nfunction equalsApproximately$4(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[4] - b[4]) < EPSILON &&\n        Math.abs(a[5] - b[5]) < EPSILON &&\n        Math.abs(a[6] - b[6]) < EPSILON &&\n        Math.abs(a[8] - b[8]) < EPSILON &&\n        Math.abs(a[9] - b[9]) < EPSILON &&\n        Math.abs(a[10] - b[10]) < EPSILON;\n}\n/**\n * Check if 2 matrices are exactly equal\n * @param a Operand matrix.\n * @param b Operand matrix.\n * @returns true if matrices are exactly equal\n */\nfunction equals$4(a, b) {\n    return a[0] === b[0] &&\n        a[1] === b[1] &&\n        a[2] === b[2] &&\n        a[4] === b[4] &&\n        a[5] === b[5] &&\n        a[6] === b[6] &&\n        a[8] === b[8] &&\n        a[9] === b[9] &&\n        a[10] === b[10];\n}\n/**\n * Creates a 3-by-3 identity matrix.\n *\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A 3-by-3 identity matrix.\n */\nfunction identity$2(dst) {\n    dst = dst || newMat3();\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Takes the transpose of a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The transpose of m.\n */\nfunction transpose$1(m, dst) {\n    dst = dst || newMat3();\n    if (dst === m) {\n        let t;\n        // 0 1 2\n        // 4 5 6\n        // 8 9 10\n        t = m[1];\n        m[1] = m[4];\n        m[4] = t;\n        t = m[2];\n        m[2] = m[8];\n        m[8] = t;\n        t = m[6];\n        m[6] = m[9];\n        m[9] = t;\n        return dst;\n    }\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    dst[0] = m00;\n    dst[1] = m10;\n    dst[2] = m20;\n    dst[4] = m01;\n    dst[5] = m11;\n    dst[6] = m21;\n    dst[8] = m02;\n    dst[9] = m12;\n    dst[10] = m22;\n    return dst;\n}\n/**\n * Computes the inverse of a 3-by-3 matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nfunction inverse$4(m, dst) {\n    dst = dst || newMat3();\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const b01 = m22 * m11 - m12 * m21;\n    const b11 = -m22 * m10 + m12 * m20;\n    const b21 = m21 * m10 - m11 * m20;\n    const invDet = 1 / (m00 * b01 + m01 * b11 + m02 * b21);\n    dst[0] = b01 * invDet;\n    dst[1] = (-m22 * m01 + m02 * m21) * invDet;\n    dst[2] = (m12 * m01 - m02 * m11) * invDet;\n    dst[4] = b11 * invDet;\n    dst[5] = (m22 * m00 - m02 * m20) * invDet;\n    dst[6] = (-m12 * m00 + m02 * m10) * invDet;\n    dst[8] = b21 * invDet;\n    dst[9] = (-m21 * m00 + m01 * m20) * invDet;\n    dst[10] = (m11 * m00 - m01 * m10) * invDet;\n    return dst;\n}\n/**\n * Compute the determinant of a matrix\n * @param m - the matrix\n * @returns the determinant\n */\nfunction determinant$1(m) {\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    return m00 * (m11 * m22 - m21 * m12) -\n        m10 * (m01 * m22 - m21 * m02) +\n        m20 * (m01 * m12 - m11 * m02);\n}\n/**\n * Computes the inverse of a 3-by-3 matrix. (same as inverse)\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nconst invert$3 = inverse$4;\n/**\n * Multiplies two 3-by-3 matrices with a on the left and b on the right\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nfunction multiply$4(a, b, dst) {\n    dst = dst || newMat3();\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a10 = a[4 + 0];\n    const a11 = a[4 + 1];\n    const a12 = a[4 + 2];\n    const a20 = a[8 + 0];\n    const a21 = a[8 + 1];\n    const a22 = a[8 + 2];\n    const b00 = b[0];\n    const b01 = b[1];\n    const b02 = b[2];\n    const b10 = b[4 + 0];\n    const b11 = b[4 + 1];\n    const b12 = b[4 + 2];\n    const b20 = b[8 + 0];\n    const b21 = b[8 + 1];\n    const b22 = b[8 + 2];\n    dst[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    dst[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    dst[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    dst[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    dst[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    dst[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    dst[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    dst[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    dst[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    return dst;\n}\n/**\n * Multiplies two 3-by-3 matrices with a on the left and b on the right (same as multiply)\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nconst mul$4 = multiply$4;\n/**\n * Sets the translation component of a 3-by-3 matrix to the given\n * vector.\n * @param a - The matrix.\n * @param v - The vector.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix with translation set.\n */\nfunction setTranslation$1(a, v, dst) {\n    dst = dst || identity$2();\n    if (a !== dst) {\n        dst[0] = a[0];\n        dst[1] = a[1];\n        dst[2] = a[2];\n        dst[4] = a[4];\n        dst[5] = a[5];\n        dst[6] = a[6];\n    }\n    dst[8] = v[0];\n    dst[9] = v[1];\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Returns the translation component of a 3-by-3 matrix as a vector with 3\n * entries.\n * @param m - The matrix.\n * @param dst - vector to hold result. If not passed a new one is created.\n * @returns The translation component of m.\n */\nfunction getTranslation$2(m, dst) {\n    dst = dst || create$5();\n    dst[0] = m[8];\n    dst[1] = m[9];\n    return dst;\n}\n/**\n * Returns an axis of a 3x3 matrix as a vector with 2 entries\n * @param m - The matrix.\n * @param axis - The axis 0 = x, 1 = y,\n * @returns The axis component of m.\n */\nfunction getAxis$2(m, axis, dst) {\n    dst = dst || create$5();\n    const off = axis * 4;\n    dst[0] = m[off + 0];\n    dst[1] = m[off + 1];\n    return dst;\n}\n/**\n * Sets an axis of a 3x3 matrix as a vector with 2 entries\n * @param m - The matrix.\n * @param v - the axis vector\n * @param axis - The axis  0 = x, 1 = y;\n * @param dst - The matrix to set. If not passed a new one is created.\n * @returns The matrix with axis set.\n */\nfunction setAxis$1(m, v, axis, dst) {\n    if (dst !== m) {\n        dst = copy$4(m, dst);\n    }\n    const off = axis * 4;\n    dst[off + 0] = v[0];\n    dst[off + 1] = v[1];\n    return dst;\n}\n/**\n * Returns the scaling component of the matrix\n * @param m - The Matrix\n * @param dst - The vector to set. If not passed a new one is created.\n */\nfunction getScaling$2(m, dst) {\n    dst = dst || create$5();\n    const xx = m[0];\n    const xy = m[1];\n    const yx = m[4];\n    const yy = m[5];\n    dst[0] = Math.sqrt(xx * xx + xy * xy);\n    dst[1] = Math.sqrt(yx * yx + yy * yy);\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which translates by the given vector v.\n * @param v - The vector by which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translation matrix.\n */\nfunction translation$1(v, dst) {\n    dst = dst || newMat3();\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[8] = v[0];\n    dst[9] = v[1];\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Translates the given 3-by-3 matrix by the given vector v.\n * @param m - The matrix.\n * @param v - The vector by which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translated matrix.\n */\nfunction translate$1(m, v, dst) {\n    dst = dst || newMat3();\n    const v0 = v[0];\n    const v1 = v[1];\n    const m00 = m[0];\n    const m01 = m[1];\n    const m02 = m[2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    if (m !== dst) {\n        dst[0] = m00;\n        dst[1] = m01;\n        dst[2] = m02;\n        dst[4] = m10;\n        dst[5] = m11;\n        dst[6] = m12;\n    }\n    dst[8] = m00 * v0 + m10 * v1 + m20;\n    dst[9] = m01 * v0 + m11 * v1 + m21;\n    dst[10] = m02 * v0 + m12 * v1 + m22;\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which rotates  by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotation$1(angleInRadians, dst) {\n    dst = dst || newMat3();\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c;\n    dst[1] = s;\n    dst[2] = 0;\n    dst[4] = -s;\n    dst[5] = c;\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Rotates the given 3-by-3 matrix  by the given angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotate$1(m, angleInRadians, dst) {\n    dst = dst || newMat3();\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c * m00 + s * m10;\n    dst[1] = c * m01 + s * m11;\n    dst[2] = c * m02 + s * m12;\n    dst[4] = c * m10 - s * m00;\n    dst[5] = c * m11 - s * m01;\n    dst[6] = c * m12 - s * m02;\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n    }\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which scales in each dimension by an amount given by\n * the corresponding entry in the given vector; assumes the vector has three\n * entries.\n * @param v - A vector of\n *     2 entries specifying the factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction scaling$1(v, dst) {\n    dst = dst || newMat3();\n    dst[0] = v[0];\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = v[1];\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Scales the given 3-by-3 matrix in each dimension by an amount\n * given by the corresponding entry in the given vector; assumes the vector has\n * three entries.\n * @param m - The matrix to be modified.\n * @param v - A vector of 2 entries specifying the\n *     factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction scale$4(m, v, dst) {\n    dst = dst || newMat3();\n    const v0 = v[0];\n    const v1 = v[1];\n    dst[0] = v0 * m[0 * 4 + 0];\n    dst[1] = v0 * m[0 * 4 + 1];\n    dst[2] = v0 * m[0 * 4 + 2];\n    dst[4] = v1 * m[1 * 4 + 0];\n    dst[5] = v1 * m[1 * 4 + 1];\n    dst[6] = v1 * m[1 * 4 + 2];\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n    }\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which scales uniformly in each dimension\n * @param s - Amount to scale\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction uniformScaling$1(s, dst) {\n    dst = dst || newMat3();\n    dst[0] = s;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = s;\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Scales the given 3-by-3 matrix in each dimension by an amount\n * given.\n * @param m - The matrix to be modified.\n * @param s - Amount to scale.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction uniformScale$1(m, s, dst) {\n    dst = dst || newMat3();\n    dst[0] = s * m[0 * 4 + 0];\n    dst[1] = s * m[0 * 4 + 1];\n    dst[2] = s * m[0 * 4 + 2];\n    dst[4] = s * m[1 * 4 + 0];\n    dst[5] = s * m[1 * 4 + 1];\n    dst[6] = s * m[1 * 4 + 2];\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n    }\n    return dst;\n}\n\nvar mat3Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    setDefaultType: setDefaultType$5,\n    create: create$4,\n    set: set$4,\n    fromMat4: fromMat4,\n    fromQuat: fromQuat$1,\n    negate: negate$3,\n    copy: copy$4,\n    clone: clone$4,\n    equalsApproximately: equalsApproximately$4,\n    equals: equals$4,\n    identity: identity$2,\n    transpose: transpose$1,\n    inverse: inverse$4,\n    determinant: determinant$1,\n    invert: invert$3,\n    multiply: multiply$4,\n    mul: mul$4,\n    setTranslation: setTranslation$1,\n    getTranslation: getTranslation$2,\n    getAxis: getAxis$2,\n    setAxis: setAxis$1,\n    getScaling: getScaling$2,\n    translation: translation$1,\n    translate: translate$1,\n    rotation: rotation$1,\n    rotate: rotate$1,\n    scaling: scaling$1,\n    scale: scale$4,\n    uniformScaling: uniformScaling$1,\n    uniformScale: uniformScale$1\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Vec3 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new `Vec3`. In other words you can do this\n *\n *     const v = vec3.cross(v1, v2);  // Creates a new Vec3 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = vec3.create();\n *     vec3.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     vec3.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet VecType$1 = Float32Array;\n/**\n * Sets the type this library creates for a Vec3\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Vec3\n */\nfunction setDefaultType$4(ctor) {\n    const oldType = VecType$1;\n    VecType$1 = ctor;\n    return oldType;\n}\n/**\n * Creates a vec3; may be called with x, y, z to set initial values.\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @returns the created vector\n */\nfunction create$3(x, y, z) {\n    const dst = new VecType$1(3);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n            if (z !== undefined) {\n                dst[2] = z;\n            }\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a vec3; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @returns the created vector\n */\nconst fromValues$2 = create$3;\n/**\n * Sets the values of a Vec3\n * Also see {@link vec3.create} and {@link vec3.copy}\n *\n * @param x first value\n * @param y second value\n * @param z third value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set$3(x, y, z, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = x;\n    dst[1] = y;\n    dst[2] = z;\n    return dst;\n}\n/**\n * Applies Math.ceil to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the ceil of each element of v.\n */\nfunction ceil$1(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.ceil(v[0]);\n    dst[1] = Math.ceil(v[1]);\n    dst[2] = Math.ceil(v[2]);\n    return dst;\n}\n/**\n * Applies Math.floor to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the floor of each element of v.\n */\nfunction floor$1(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.floor(v[0]);\n    dst[1] = Math.floor(v[1]);\n    dst[2] = Math.floor(v[2]);\n    return dst;\n}\n/**\n * Applies Math.round to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the round of each element of v.\n */\nfunction round$1(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.round(v[0]);\n    dst[1] = Math.round(v[1]);\n    dst[2] = Math.round(v[2]);\n    return dst;\n}\n/**\n * Clamp each element of vector between min and max\n * @param v - Operand vector.\n * @param max - Min value, default 0\n * @param min - Max value, default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that the clamped value of each element of v.\n */\nfunction clamp$1(v, min = 0, max = 1, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.min(max, Math.max(min, v[0]));\n    dst[1] = Math.min(max, Math.max(min, v[1]));\n    dst[2] = Math.min(max, Math.max(min, v[2]));\n    return dst;\n}\n/**\n * Adds two vectors; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a and b.\n */\nfunction add$2(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    dst[2] = a[2] + b[2];\n    return dst;\n}\n/**\n * Adds two vectors, scaling the 2nd; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param scale - Amount to scale b\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a + b * scale.\n */\nfunction addScaled$1(a, b, scale, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + b[0] * scale;\n    dst[1] = a[1] + b[1] * scale;\n    dst[2] = a[2] + b[2] * scale;\n    return dst;\n}\n/**\n * Returns the angle in radians between two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns The angle in radians between the 2 vectors.\n */\nfunction angle$1(a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const bx = a[0];\n    const by = a[1];\n    const bz = a[2];\n    const mag1 = Math.sqrt(ax * ax + ay * ay + az * az);\n    const mag2 = Math.sqrt(bx * bx + by * by + bz * bz);\n    const mag = mag1 * mag2;\n    const cosine = mag && dot$2(a, b) / mag;\n    return Math.acos(cosine);\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nfunction subtract$2(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    dst[2] = a[2] - b[2];\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nconst sub$2 = subtract$2;\n/**\n * Check if 2 vectors are approximately equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are approximately equal\n */\nfunction equalsApproximately$3(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON;\n}\n/**\n * Check if 2 vectors are exactly equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are exactly equal\n */\nfunction equals$3(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficient.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp$2(a, b, t, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    dst[2] = a[2] + t * (b[2] - a[2]);\n    return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient vector t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficients vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns the linear interpolated result.\n */\nfunction lerpV$1(a, b, t, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + t[0] * (b[0] - a[0]);\n    dst[1] = a[1] + t[1] * (b[1] - a[1]);\n    dst[2] = a[2] + t[2] * (b[2] - a[2]);\n    return dst;\n}\n/**\n * Return max values of two vectors.\n * Given vectors a and b returns\n * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The max components vector.\n */\nfunction max$1(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.max(a[0], b[0]);\n    dst[1] = Math.max(a[1], b[1]);\n    dst[2] = Math.max(a[2], b[2]);\n    return dst;\n}\n/**\n * Return min values of two vectors.\n * Given vectors a and b returns\n * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The min components vector.\n */\nfunction min$1(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.min(a[0], b[0]);\n    dst[1] = Math.min(a[1], b[1]);\n    dst[2] = Math.min(a[2], b[2]);\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction mulScalar$2(v, k, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    dst[2] = v[2] * k;\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar. (same as mulScalar)\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nconst scale$3 = mulScalar$2;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction divScalar$2(v, k, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    dst[2] = v[2] / k;\n    return dst;\n}\n/**\n * Inverse a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nfunction inverse$3(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = 1 / v[0];\n    dst[1] = 1 / v[1];\n    dst[2] = 1 / v[2];\n    return dst;\n}\n/**\n * Invert a vector. (same as inverse)\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nconst invert$2 = inverse$3;\n/**\n * Computes the cross product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of a cross b.\n */\nfunction cross(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    const t1 = a[2] * b[0] - a[0] * b[2];\n    const t2 = a[0] * b[1] - a[1] * b[0];\n    dst[0] = a[1] * b[2] - a[2] * b[1];\n    dst[1] = t1;\n    dst[2] = t2;\n    return dst;\n}\n/**\n * Computes the dot product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns dot product\n */\nfunction dot$2(a, b) {\n    return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\n}\n/**\n * Computes the length of vector\n * @param v - vector.\n * @returns length of vector.\n */\nfunction length$2(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    return Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2);\n}\n/**\n * Computes the length of vector (same as length)\n * @param v - vector.\n * @returns length of vector.\n */\nconst len$2 = length$2;\n/**\n * Computes the square of the length of vector\n * @param v - vector.\n * @returns square of the length of vector.\n */\nfunction lengthSq$2(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    return v0 * v0 + v1 * v1 + v2 * v2;\n}\n/**\n * Computes the square of the length of vector (same as lengthSq)\n * @param v - vector.\n * @returns square of the length of vector.\n */\nconst lenSq$2 = lengthSq$2;\n/**\n * Computes the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nfunction distance$1(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\n/**\n * Computes the distance between 2 points (same as distance)\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nconst dist$1 = distance$1;\n/**\n * Computes the square of the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nfunction distanceSq$1(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    return dx * dx + dy * dy + dz * dz;\n}\n/**\n * Computes the square of the distance between 2 points (same as distanceSq)\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nconst distSq$1 = distanceSq$1;\n/**\n * Divides a vector by its Euclidean length and returns the quotient.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The normalized vector.\n */\nfunction normalize$2(v, dst) {\n    dst = dst || new VecType$1(3);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const len = Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n        dst[2] = v2 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n    }\n    return dst;\n}\n/**\n * Negates a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns -v.\n */\nfunction negate$2(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = -v[0];\n    dst[1] = -v[1];\n    dst[2] = -v[2];\n    return dst;\n}\n/**\n * Copies a vector. (same as {@link vec3.clone})\n * Also see {@link vec3.create} and {@link vec3.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nfunction copy$3(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = v[0];\n    dst[1] = v[1];\n    dst[2] = v[2];\n    return dst;\n}\n/**\n * Clones a vector. (same as {@link vec3.copy})\n * Also see {@link vec3.create} and {@link vec3.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nconst clone$3 = copy$3;\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nfunction multiply$3(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] * b[0];\n    dst[1] = a[1] * b[1];\n    dst[2] = a[2] * b[2];\n    return dst;\n}\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as mul)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nconst mul$3 = multiply$3;\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nfunction divide$1(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] / b[0];\n    dst[1] = a[1] / b[1];\n    dst[2] = a[2] / b[2];\n    return dst;\n}\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as divide)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nconst div$1 = divide$1;\n/**\n * Creates a random vector\n * @param scale - Default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The random vector.\n */\nfunction random(scale = 1, dst) {\n    dst = dst || new VecType$1(3);\n    const angle = Math.random() * 2 * Math.PI;\n    const z = Math.random() * 2 - 1;\n    const zScale = Math.sqrt(1 - z * z) * scale;\n    dst[0] = Math.cos(angle) * zScale;\n    dst[1] = Math.sin(angle) * zScale;\n    dst[2] = z * scale;\n    return dst;\n}\n/**\n * Zero's a vector\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The zeroed vector.\n */\nfunction zero$1(dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = 0;\n    return dst;\n}\n/**\n * transform vec3 by 4x4 matrix\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional vec3 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat4$1(v, m, dst) {\n    dst = dst || new VecType$1(3);\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const w = (m[3] * x + m[7] * y + m[11] * z + m[15]) || 1;\n    dst[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    dst[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    dst[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return dst;\n}\n/**\n * Transform vec4 by upper 3x3 matrix inside 4x4 matrix.\n * @param v - The direction.\n * @param m - The matrix.\n * @param dst - optional Vec3 to store result. If not passed a new one is created.\n * @returns The transformed vector.\n */\nfunction transformMat4Upper3x3(v, m, dst) {\n    dst = dst || new VecType$1(3);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];\n    dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];\n    dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];\n    return dst;\n}\n/**\n * Transforms vec3 by 3x3 matrix\n *\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional vec3 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat3(v, m, dst) {\n    dst = dst || new VecType$1(3);\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    dst[0] = x * m[0] + y * m[4] + z * m[8];\n    dst[1] = x * m[1] + y * m[5] + z * m[9];\n    dst[2] = x * m[2] + y * m[6] + z * m[10];\n    return dst;\n}\n/**\n * Transforms vec3 by Quaternion\n * @param v - the vector to transform\n * @param q - the quaternion to transform by\n * @param dst - optional vec3 to store result. If not passed a new one is created.\n * @returns the transformed\n */\nfunction transformQuat(v, q, dst) {\n    dst = dst || new VecType$1(3);\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const w2 = q[3] * 2;\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const uvX = qy * z - qz * y;\n    const uvY = qz * x - qx * z;\n    const uvZ = qx * y - qy * x;\n    dst[0] = x + uvX * w2 + (qy * uvZ - qz * uvY) * 2;\n    dst[1] = y + uvY * w2 + (qz * uvX - qx * uvZ) * 2;\n    dst[2] = z + uvZ * w2 + (qx * uvY - qy * uvX) * 2;\n    return dst;\n}\n/**\n * Returns the translation component of a 4-by-4 matrix as a vector with 3\n * entries.\n * @param m - The matrix.\n * @param dst - vector to hold result. If not passed a new one is created.\n * @returns The translation component of m.\n */\nfunction getTranslation$1(m, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = m[12];\n    dst[1] = m[13];\n    dst[2] = m[14];\n    return dst;\n}\n/**\n * Returns an axis of a 4x4 matrix as a vector with 3 entries\n * @param m - The matrix.\n * @param axis - The axis 0 = x, 1 = y, 2 = z;\n * @returns The axis component of m.\n */\nfunction getAxis$1(m, axis, dst) {\n    dst = dst || new VecType$1(3);\n    const off = axis * 4;\n    dst[0] = m[off + 0];\n    dst[1] = m[off + 1];\n    dst[2] = m[off + 2];\n    return dst;\n}\n/**\n * Returns the scaling component of the matrix\n * @param m - The Matrix\n * @param dst - The vector to set. If not passed a new one is created.\n */\nfunction getScaling$1(m, dst) {\n    dst = dst || new VecType$1(3);\n    const xx = m[0];\n    const xy = m[1];\n    const xz = m[2];\n    const yx = m[4];\n    const yy = m[5];\n    const yz = m[6];\n    const zx = m[8];\n    const zy = m[9];\n    const zz = m[10];\n    dst[0] = Math.sqrt(xx * xx + xy * xy + xz * xz);\n    dst[1] = Math.sqrt(yx * yx + yy * yy + yz * yz);\n    dst[2] = Math.sqrt(zx * zx + zy * zy + zz * zz);\n    return dst;\n}\n\nvar vec3Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create$3,\n    setDefaultType: setDefaultType$4,\n    fromValues: fromValues$2,\n    set: set$3,\n    ceil: ceil$1,\n    floor: floor$1,\n    round: round$1,\n    clamp: clamp$1,\n    add: add$2,\n    addScaled: addScaled$1,\n    angle: angle$1,\n    subtract: subtract$2,\n    sub: sub$2,\n    equalsApproximately: equalsApproximately$3,\n    equals: equals$3,\n    lerp: lerp$2,\n    lerpV: lerpV$1,\n    max: max$1,\n    min: min$1,\n    mulScalar: mulScalar$2,\n    scale: scale$3,\n    divScalar: divScalar$2,\n    inverse: inverse$3,\n    invert: invert$2,\n    cross: cross,\n    dot: dot$2,\n    length: length$2,\n    len: len$2,\n    lengthSq: lengthSq$2,\n    lenSq: lenSq$2,\n    distance: distance$1,\n    dist: dist$1,\n    distanceSq: distanceSq$1,\n    distSq: distSq$1,\n    normalize: normalize$2,\n    negate: negate$2,\n    copy: copy$3,\n    clone: clone$3,\n    multiply: multiply$3,\n    mul: mul$3,\n    divide: divide$1,\n    div: div$1,\n    random: random,\n    zero: zero$1,\n    transformMat4: transformMat4$1,\n    transformMat4Upper3x3: transformMat4Upper3x3,\n    transformMat3: transformMat3,\n    transformQuat: transformQuat,\n    getTranslation: getTranslation$1,\n    getAxis: getAxis$1,\n    getScaling: getScaling$1\n});\n\n/**\n * 4x4 Matrix math math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new matrix. In other words you can do this\n *\n *     const mat = mat4.translation([1, 2, 3]);  // Creates a new translation matrix\n *\n * or\n *\n *     const mat = mat4.create();\n *     mat4.translation([1, 2, 3], mat);  // Puts translation matrix in mat.\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always save to pass any matrix as the destination. So for example\n *\n *     const mat = mat4.identity();\n *     const trans = mat4.translation([1, 2, 3]);\n *     mat4.multiply(mat, trans, mat);  // Multiplies mat * trans and puts result in mat.\n *\n */\nlet MatType = Float32Array;\n/**\n * Sets the type this library creates for a Mat4\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Mat4\n */\nfunction setDefaultType$3(ctor) {\n    const oldType = MatType;\n    MatType = ctor;\n    return oldType;\n}\n/**\n * Create a Mat4 from values\n *\n * Note: Since passing in a raw JavaScript array\n * is valid in all circumstances, if you want to\n * force a JavaScript array into a Mat4's specified type\n * it would be faster to use\n *\n * ```\n * const m = mat4.clone(someJSArray);\n * ```\n *\n * Note: a consequence of the implementation is if your Mat4Type = `Array`\n * instead of `Float32Array` or `Float64Array` then any values you\n * don't pass in will be undefined. Usually this is not an issue since\n * (a) using `Array` is rare and (b) using `mat4.create` is usually used\n * to create a Mat4 to be filled out as in\n *\n * ```\n * const m = mat4.create();\n * mat4.perspective(fov, aspect, near, far, m);\n * ```\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @param v9 - value for element 9\n * @param v10 - value for element 10\n * @param v11 - value for element 11\n * @param v12 - value for element 12\n * @param v13 - value for element 13\n * @param v14 - value for element 14\n * @param v15 - value for element 15\n * @returns created from values.\n */\nfunction create$2(v0, v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14, v15) {\n    const dst = new MatType(16);\n    if (v0 !== undefined) {\n        dst[0] = v0;\n        if (v1 !== undefined) {\n            dst[1] = v1;\n            if (v2 !== undefined) {\n                dst[2] = v2;\n                if (v3 !== undefined) {\n                    dst[3] = v3;\n                    if (v4 !== undefined) {\n                        dst[4] = v4;\n                        if (v5 !== undefined) {\n                            dst[5] = v5;\n                            if (v6 !== undefined) {\n                                dst[6] = v6;\n                                if (v7 !== undefined) {\n                                    dst[7] = v7;\n                                    if (v8 !== undefined) {\n                                        dst[8] = v8;\n                                        if (v9 !== undefined) {\n                                            dst[9] = v9;\n                                            if (v10 !== undefined) {\n                                                dst[10] = v10;\n                                                if (v11 !== undefined) {\n                                                    dst[11] = v11;\n                                                    if (v12 !== undefined) {\n                                                        dst[12] = v12;\n                                                        if (v13 !== undefined) {\n                                                            dst[13] = v13;\n                                                            if (v14 !== undefined) {\n                                                                dst[14] = v14;\n                                                                if (v15 !== undefined) {\n                                                                    dst[15] = v15;\n                                                                }\n                                                            }\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return dst;\n}\n/**\n * Sets the values of a Mat4\n * Also see {@link mat4.create} and {@link mat4.copy}\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @param v9 - value for element 9\n * @param v10 - value for element 10\n * @param v11 - value for element 11\n * @param v12 - value for element 12\n * @param v13 - value for element 13\n * @param v14 - value for element 14\n * @param v15 - value for element 15\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat4 created from values.\n */\nfunction set$2(v0, v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14, v15, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = v0;\n    dst[1] = v1;\n    dst[2] = v2;\n    dst[3] = v3;\n    dst[4] = v4;\n    dst[5] = v5;\n    dst[6] = v6;\n    dst[7] = v7;\n    dst[8] = v8;\n    dst[9] = v9;\n    dst[10] = v10;\n    dst[11] = v11;\n    dst[12] = v12;\n    dst[13] = v13;\n    dst[14] = v14;\n    dst[15] = v15;\n    return dst;\n}\n/**\n * Creates a Mat4 from a Mat3\n * @param m3 - source matrix\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat4 made from m3\n */\nfunction fromMat3(m3, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = m3[0];\n    dst[1] = m3[1];\n    dst[2] = m3[2];\n    dst[3] = 0;\n    dst[4] = m3[4];\n    dst[5] = m3[5];\n    dst[6] = m3[6];\n    dst[7] = 0;\n    dst[8] = m3[8];\n    dst[9] = m3[9];\n    dst[10] = m3[10];\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Creates a Mat4 rotation matrix from a quaternion\n * @param q - quaternion to create matrix from\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat4 made from q\n */\nfunction fromQuat(q, dst) {\n    dst = dst || new MatType(16);\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const yx = y * x2;\n    const yy = y * y2;\n    const zx = z * x2;\n    const zy = z * y2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    dst[0] = 1 - yy - zz;\n    dst[1] = yx + wz;\n    dst[2] = zx - wy;\n    dst[3] = 0;\n    dst[4] = yx - wz;\n    dst[5] = 1 - xx - zz;\n    dst[6] = zy + wx;\n    dst[7] = 0;\n    dst[8] = zx + wy;\n    dst[9] = zy - wx;\n    dst[10] = 1 - xx - yy;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Negates a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns -m.\n */\nfunction negate$1(m, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = -m[0];\n    dst[1] = -m[1];\n    dst[2] = -m[2];\n    dst[3] = -m[3];\n    dst[4] = -m[4];\n    dst[5] = -m[5];\n    dst[6] = -m[6];\n    dst[7] = -m[7];\n    dst[8] = -m[8];\n    dst[9] = -m[9];\n    dst[10] = -m[10];\n    dst[11] = -m[11];\n    dst[12] = -m[12];\n    dst[13] = -m[13];\n    dst[14] = -m[14];\n    dst[15] = -m[15];\n    return dst;\n}\n/**\n * Copies a matrix. (same as {@link mat4.clone})\n * Also see {@link mat4.create} and {@link mat4.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nfunction copy$2(m, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = m[0];\n    dst[1] = m[1];\n    dst[2] = m[2];\n    dst[3] = m[3];\n    dst[4] = m[4];\n    dst[5] = m[5];\n    dst[6] = m[6];\n    dst[7] = m[7];\n    dst[8] = m[8];\n    dst[9] = m[9];\n    dst[10] = m[10];\n    dst[11] = m[11];\n    dst[12] = m[12];\n    dst[13] = m[13];\n    dst[14] = m[14];\n    dst[15] = m[15];\n    return dst;\n}\n/**\n * Copies a matrix (same as {@link mat4.copy})\n * Also see {@link mat4.create} and {@link mat4.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nconst clone$2 = copy$2;\n/**\n * Check if 2 matrices are approximately equal\n * @param a - Operand matrix.\n * @param b - Operand matrix.\n * @returns true if matrices are approximately equal\n */\nfunction equalsApproximately$2(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[3] - b[3]) < EPSILON &&\n        Math.abs(a[4] - b[4]) < EPSILON &&\n        Math.abs(a[5] - b[5]) < EPSILON &&\n        Math.abs(a[6] - b[6]) < EPSILON &&\n        Math.abs(a[7] - b[7]) < EPSILON &&\n        Math.abs(a[8] - b[8]) < EPSILON &&\n        Math.abs(a[9] - b[9]) < EPSILON &&\n        Math.abs(a[10] - b[10]) < EPSILON &&\n        Math.abs(a[11] - b[11]) < EPSILON &&\n        Math.abs(a[12] - b[12]) < EPSILON &&\n        Math.abs(a[13] - b[13]) < EPSILON &&\n        Math.abs(a[14] - b[14]) < EPSILON &&\n        Math.abs(a[15] - b[15]) < EPSILON;\n}\n/**\n * Check if 2 matrices are exactly equal\n * @param a - Operand matrix.\n * @param b - Operand matrix.\n * @returns true if matrices are exactly equal\n */\nfunction equals$2(a, b) {\n    return a[0] === b[0] &&\n        a[1] === b[1] &&\n        a[2] === b[2] &&\n        a[3] === b[3] &&\n        a[4] === b[4] &&\n        a[5] === b[5] &&\n        a[6] === b[6] &&\n        a[7] === b[7] &&\n        a[8] === b[8] &&\n        a[9] === b[9] &&\n        a[10] === b[10] &&\n        a[11] === b[11] &&\n        a[12] === b[12] &&\n        a[13] === b[13] &&\n        a[14] === b[14] &&\n        a[15] === b[15];\n}\n/**\n * Creates a 4-by-4 identity matrix.\n *\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A 4-by-4 identity matrix.\n */\nfunction identity$1(dst) {\n    dst = dst || new MatType(16);\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Takes the transpose of a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The transpose of m.\n */\nfunction transpose(m, dst) {\n    dst = dst || new MatType(16);\n    if (dst === m) {\n        let t;\n        t = m[1];\n        m[1] = m[4];\n        m[4] = t;\n        t = m[2];\n        m[2] = m[8];\n        m[8] = t;\n        t = m[3];\n        m[3] = m[12];\n        m[12] = t;\n        t = m[6];\n        m[6] = m[9];\n        m[9] = t;\n        t = m[7];\n        m[7] = m[13];\n        m[13] = t;\n        t = m[11];\n        m[11] = m[14];\n        m[14] = t;\n        return dst;\n    }\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    dst[0] = m00;\n    dst[1] = m10;\n    dst[2] = m20;\n    dst[3] = m30;\n    dst[4] = m01;\n    dst[5] = m11;\n    dst[6] = m21;\n    dst[7] = m31;\n    dst[8] = m02;\n    dst[9] = m12;\n    dst[10] = m22;\n    dst[11] = m32;\n    dst[12] = m03;\n    dst[13] = m13;\n    dst[14] = m23;\n    dst[15] = m33;\n    return dst;\n}\n/**\n * Computes the inverse of a 4-by-4 matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nfunction inverse$2(m, dst) {\n    dst = dst || new MatType(16);\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    const tmp0 = m22 * m33;\n    const tmp1 = m32 * m23;\n    const tmp2 = m12 * m33;\n    const tmp3 = m32 * m13;\n    const tmp4 = m12 * m23;\n    const tmp5 = m22 * m13;\n    const tmp6 = m02 * m33;\n    const tmp7 = m32 * m03;\n    const tmp8 = m02 * m23;\n    const tmp9 = m22 * m03;\n    const tmp10 = m02 * m13;\n    const tmp11 = m12 * m03;\n    const tmp12 = m20 * m31;\n    const tmp13 = m30 * m21;\n    const tmp14 = m10 * m31;\n    const tmp15 = m30 * m11;\n    const tmp16 = m10 * m21;\n    const tmp17 = m20 * m11;\n    const tmp18 = m00 * m31;\n    const tmp19 = m30 * m01;\n    const tmp20 = m00 * m21;\n    const tmp21 = m20 * m01;\n    const tmp22 = m00 * m11;\n    const tmp23 = m10 * m01;\n    const t0 = (tmp0 * m11 + tmp3 * m21 + tmp4 * m31) -\n        (tmp1 * m11 + tmp2 * m21 + tmp5 * m31);\n    const t1 = (tmp1 * m01 + tmp6 * m21 + tmp9 * m31) -\n        (tmp0 * m01 + tmp7 * m21 + tmp8 * m31);\n    const t2 = (tmp2 * m01 + tmp7 * m11 + tmp10 * m31) -\n        (tmp3 * m01 + tmp6 * m11 + tmp11 * m31);\n    const t3 = (tmp5 * m01 + tmp8 * m11 + tmp11 * m21) -\n        (tmp4 * m01 + tmp9 * m11 + tmp10 * m21);\n    const d = 1 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n    dst[0] = d * t0;\n    dst[1] = d * t1;\n    dst[2] = d * t2;\n    dst[3] = d * t3;\n    dst[4] = d * ((tmp1 * m10 + tmp2 * m20 + tmp5 * m30) -\n        (tmp0 * m10 + tmp3 * m20 + tmp4 * m30));\n    dst[5] = d * ((tmp0 * m00 + tmp7 * m20 + tmp8 * m30) -\n        (tmp1 * m00 + tmp6 * m20 + tmp9 * m30));\n    dst[6] = d * ((tmp3 * m00 + tmp6 * m10 + tmp11 * m30) -\n        (tmp2 * m00 + tmp7 * m10 + tmp10 * m30));\n    dst[7] = d * ((tmp4 * m00 + tmp9 * m10 + tmp10 * m20) -\n        (tmp5 * m00 + tmp8 * m10 + tmp11 * m20));\n    dst[8] = d * ((tmp12 * m13 + tmp15 * m23 + tmp16 * m33) -\n        (tmp13 * m13 + tmp14 * m23 + tmp17 * m33));\n    dst[9] = d * ((tmp13 * m03 + tmp18 * m23 + tmp21 * m33) -\n        (tmp12 * m03 + tmp19 * m23 + tmp20 * m33));\n    dst[10] = d * ((tmp14 * m03 + tmp19 * m13 + tmp22 * m33) -\n        (tmp15 * m03 + tmp18 * m13 + tmp23 * m33));\n    dst[11] = d * ((tmp17 * m03 + tmp20 * m13 + tmp23 * m23) -\n        (tmp16 * m03 + tmp21 * m13 + tmp22 * m23));\n    dst[12] = d * ((tmp14 * m22 + tmp17 * m32 + tmp13 * m12) -\n        (tmp16 * m32 + tmp12 * m12 + tmp15 * m22));\n    dst[13] = d * ((tmp20 * m32 + tmp12 * m02 + tmp19 * m22) -\n        (tmp18 * m22 + tmp21 * m32 + tmp13 * m02));\n    dst[14] = d * ((tmp18 * m12 + tmp23 * m32 + tmp15 * m02) -\n        (tmp22 * m32 + tmp14 * m02 + tmp19 * m12));\n    dst[15] = d * ((tmp22 * m22 + tmp16 * m02 + tmp21 * m12) -\n        (tmp20 * m12 + tmp23 * m22 + tmp17 * m02));\n    return dst;\n}\n/**\n * Compute the determinant of a matrix\n * @param m - the matrix\n * @returns the determinant\n */\nfunction determinant(m) {\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    const tmp0 = m22 * m33;\n    const tmp1 = m32 * m23;\n    const tmp2 = m12 * m33;\n    const tmp3 = m32 * m13;\n    const tmp4 = m12 * m23;\n    const tmp5 = m22 * m13;\n    const tmp6 = m02 * m33;\n    const tmp7 = m32 * m03;\n    const tmp8 = m02 * m23;\n    const tmp9 = m22 * m03;\n    const tmp10 = m02 * m13;\n    const tmp11 = m12 * m03;\n    const t0 = (tmp0 * m11 + tmp3 * m21 + tmp4 * m31) -\n        (tmp1 * m11 + tmp2 * m21 + tmp5 * m31);\n    const t1 = (tmp1 * m01 + tmp6 * m21 + tmp9 * m31) -\n        (tmp0 * m01 + tmp7 * m21 + tmp8 * m31);\n    const t2 = (tmp2 * m01 + tmp7 * m11 + tmp10 * m31) -\n        (tmp3 * m01 + tmp6 * m11 + tmp11 * m31);\n    const t3 = (tmp5 * m01 + tmp8 * m11 + tmp11 * m21) -\n        (tmp4 * m01 + tmp9 * m11 + tmp10 * m21);\n    return m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3;\n}\n/**\n * Computes the inverse of a 4-by-4 matrix. (same as inverse)\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nconst invert$1 = inverse$2;\n/**\n * Multiplies two 4-by-4 matrices with a on the left and b on the right\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nfunction multiply$2(a, b, dst) {\n    dst = dst || new MatType(16);\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4 + 0];\n    const a11 = a[4 + 1];\n    const a12 = a[4 + 2];\n    const a13 = a[4 + 3];\n    const a20 = a[8 + 0];\n    const a21 = a[8 + 1];\n    const a22 = a[8 + 2];\n    const a23 = a[8 + 3];\n    const a30 = a[12 + 0];\n    const a31 = a[12 + 1];\n    const a32 = a[12 + 2];\n    const a33 = a[12 + 3];\n    const b00 = b[0];\n    const b01 = b[1];\n    const b02 = b[2];\n    const b03 = b[3];\n    const b10 = b[4 + 0];\n    const b11 = b[4 + 1];\n    const b12 = b[4 + 2];\n    const b13 = b[4 + 3];\n    const b20 = b[8 + 0];\n    const b21 = b[8 + 1];\n    const b22 = b[8 + 2];\n    const b23 = b[8 + 3];\n    const b30 = b[12 + 0];\n    const b31 = b[12 + 1];\n    const b32 = b[12 + 2];\n    const b33 = b[12 + 3];\n    dst[0] = a00 * b00 + a10 * b01 + a20 * b02 + a30 * b03;\n    dst[1] = a01 * b00 + a11 * b01 + a21 * b02 + a31 * b03;\n    dst[2] = a02 * b00 + a12 * b01 + a22 * b02 + a32 * b03;\n    dst[3] = a03 * b00 + a13 * b01 + a23 * b02 + a33 * b03;\n    dst[4] = a00 * b10 + a10 * b11 + a20 * b12 + a30 * b13;\n    dst[5] = a01 * b10 + a11 * b11 + a21 * b12 + a31 * b13;\n    dst[6] = a02 * b10 + a12 * b11 + a22 * b12 + a32 * b13;\n    dst[7] = a03 * b10 + a13 * b11 + a23 * b12 + a33 * b13;\n    dst[8] = a00 * b20 + a10 * b21 + a20 * b22 + a30 * b23;\n    dst[9] = a01 * b20 + a11 * b21 + a21 * b22 + a31 * b23;\n    dst[10] = a02 * b20 + a12 * b21 + a22 * b22 + a32 * b23;\n    dst[11] = a03 * b20 + a13 * b21 + a23 * b22 + a33 * b23;\n    dst[12] = a00 * b30 + a10 * b31 + a20 * b32 + a30 * b33;\n    dst[13] = a01 * b30 + a11 * b31 + a21 * b32 + a31 * b33;\n    dst[14] = a02 * b30 + a12 * b31 + a22 * b32 + a32 * b33;\n    dst[15] = a03 * b30 + a13 * b31 + a23 * b32 + a33 * b33;\n    return dst;\n}\n/**\n * Multiplies two 4-by-4 matrices with a on the left and b on the right (same as multiply)\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nconst mul$2 = multiply$2;\n/**\n * Sets the translation component of a 4-by-4 matrix to the given\n * vector.\n * @param a - The matrix.\n * @param v - The vector.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix with translation set.\n */\nfunction setTranslation(a, v, dst) {\n    dst = dst || identity$1();\n    if (a !== dst) {\n        dst[0] = a[0];\n        dst[1] = a[1];\n        dst[2] = a[2];\n        dst[3] = a[3];\n        dst[4] = a[4];\n        dst[5] = a[5];\n        dst[6] = a[6];\n        dst[7] = a[7];\n        dst[8] = a[8];\n        dst[9] = a[9];\n        dst[10] = a[10];\n        dst[11] = a[11];\n    }\n    dst[12] = v[0];\n    dst[13] = v[1];\n    dst[14] = v[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Returns the translation component of a 4-by-4 matrix as a vector with 3\n * entries.\n * @param m - The matrix.\n * @param dst - vector to hold result. If not passed a new one is created.\n * @returns The translation component of m.\n */\nfunction getTranslation(m, dst) {\n    dst = dst || create$3();\n    dst[0] = m[12];\n    dst[1] = m[13];\n    dst[2] = m[14];\n    return dst;\n}\n/**\n * Returns an axis of a 4x4 matrix as a vector with 3 entries\n * @param m - The matrix.\n * @param axis - The axis 0 = x, 1 = y, 2 = z;\n * @returns The axis component of m.\n */\nfunction getAxis(m, axis, dst) {\n    dst = dst || create$3();\n    const off = axis * 4;\n    dst[0] = m[off + 0];\n    dst[1] = m[off + 1];\n    dst[2] = m[off + 2];\n    return dst;\n}\n/**\n * Sets an axis of a 4x4 matrix as a vector with 3 entries\n * @param m - The matrix.\n * @param v - the axis vector\n * @param axis - The axis  0 = x, 1 = y, 2 = z;\n * @param dst - The matrix to set. If not passed a new one is created.\n * @returns The matrix with axis set.\n */\nfunction setAxis(a, v, axis, dst) {\n    if (dst !== a) {\n        dst = copy$2(a, dst);\n    }\n    const off = axis * 4;\n    dst[off + 0] = v[0];\n    dst[off + 1] = v[1];\n    dst[off + 2] = v[2];\n    return dst;\n}\n/**\n * Returns the scaling component of the matrix\n * @param m - The Matrix\n * @param dst - The vector to set. If not passed a new one is created.\n */\nfunction getScaling(m, dst) {\n    dst = dst || create$3();\n    const xx = m[0];\n    const xy = m[1];\n    const xz = m[2];\n    const yx = m[4];\n    const yy = m[5];\n    const yz = m[6];\n    const zx = m[8];\n    const zy = m[9];\n    const zz = m[10];\n    dst[0] = Math.sqrt(xx * xx + xy * xy + xz * xz);\n    dst[1] = Math.sqrt(yx * yx + yy * yy + yz * yz);\n    dst[2] = Math.sqrt(zx * zx + zy * zy + zz * zz);\n    return dst;\n}\n/**\n * Computes a 4-by-4 perspective transformation matrix given the angular height\n * of the frustum, the aspect ratio, and the near and far clipping planes.  The\n * arguments define a frustum extending in the negative z direction.  The given\n * angle is the vertical angle of the frustum, and the horizontal angle is\n * determined to produce the given aspect ratio.  The arguments near and far are\n * the distances to the near and far clipping planes.  Note that near and far\n * are not z coordinates, but rather they are distances along the negative\n * z-axis.  The matrix generated sends the viewing frustum to the unit box.\n * We assume a unit box extending from -1 to 1 in the x and y dimensions and\n * from 0 to 1 in the z dimension.\n *\n * Note: If you pass `Infinity` for zFar then it will produce a projection matrix\n * returns -Infinity for Z when transforming coordinates with Z <= 0 and +Infinity for Z\n * otherwise.\n *\n * @param fieldOfViewYInRadians - The camera angle from top to bottom (in radians).\n * @param aspect - The aspect ratio width / height.\n * @param zNear - The depth (negative z coordinate)\n *     of the near clipping plane.\n * @param zFar - The depth (negative z coordinate)\n *     of the far clipping plane.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The perspective matrix.\n */\nfunction perspective(fieldOfViewYInRadians, aspect, zNear, zFar, dst) {\n    dst = dst || new MatType(16);\n    const f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewYInRadians);\n    dst[0] = f / aspect;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = f;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[11] = -1;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[15] = 0;\n    if (zFar === Infinity) {\n        dst[10] = -1;\n        dst[14] = -zNear;\n    }\n    else {\n        const rangeInv = 1 / (zNear - zFar);\n        dst[10] = zFar * rangeInv;\n        dst[14] = zFar * zNear * rangeInv;\n    }\n    return dst;\n}\n/**\n * Computes a 4-by-4 orthogonal transformation matrix that transforms from\n * the given the left, right, bottom, and top dimensions to -1 +1 in x, and y\n * and 0 to +1 in z.\n * @param left - Left side of the near clipping plane viewport.\n * @param right - Right side of the near clipping plane viewport.\n * @param bottom - Bottom of the near clipping plane viewport.\n * @param top - Top of the near clipping plane viewport.\n * @param near - The depth (negative z coordinate)\n *     of the near clipping plane.\n * @param far - The depth (negative z coordinate)\n *     of the far clipping plane.\n * @param dst - Output matrix. If not passed a new one is created.\n * @returns The orthographic projection matrix.\n */\nfunction ortho(left, right, bottom, top, near, far, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = 2 / (right - left);\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 2 / (top - bottom);\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1 / (near - far);\n    dst[11] = 0;\n    dst[12] = (right + left) / (left - right);\n    dst[13] = (top + bottom) / (bottom - top);\n    dst[14] = near / (near - far);\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Computes a 4-by-4 perspective transformation matrix given the left, right,\n * top, bottom, near and far clipping planes. The arguments define a frustum\n * extending in the negative z direction. The arguments near and far are the\n * distances to the near and far clipping planes. Note that near and far are not\n * z coordinates, but rather they are distances along the negative z-axis. The\n * matrix generated sends the viewing frustum to the unit box. We assume a unit\n * box extending from -1 to 1 in the x and y dimensions and from 0 to 1 in the z\n * dimension.\n * @param left - The x coordinate of the left plane of the box.\n * @param right - The x coordinate of the right plane of the box.\n * @param bottom - The y coordinate of the bottom plane of the box.\n * @param top - The y coordinate of the right plane of the box.\n * @param near - The negative z coordinate of the near plane of the box.\n * @param far - The negative z coordinate of the far plane of the box.\n * @param dst - Output matrix. If not passed a new one is created.\n * @returns The perspective projection matrix.\n */\nfunction frustum(left, right, bottom, top, near, far, dst) {\n    dst = dst || new MatType(16);\n    const dx = (right - left);\n    const dy = (top - bottom);\n    const dz = (near - far);\n    dst[0] = 2 * near / dx;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 2 * near / dy;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = (left + right) / dx;\n    dst[9] = (top + bottom) / dy;\n    dst[10] = far / dz;\n    dst[11] = -1;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = near * far / dz;\n    dst[15] = 0;\n    return dst;\n}\nlet xAxis;\nlet yAxis;\nlet zAxis;\n/**\n * Computes a 4-by-4 aim transformation.\n *\n * This is a matrix which positions an object aiming down positive Z.\n * toward the target.\n *\n * Note: this is **NOT** the inverse of lookAt as lookAt looks at negative Z.\n *\n * @param position - The position of the object.\n * @param target - The position meant to be aimed at.\n * @param up - A vector pointing up.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The aim matrix.\n */\nfunction aim(position, target, up, dst) {\n    dst = dst || new MatType(16);\n    xAxis = xAxis || create$3();\n    yAxis = yAxis || create$3();\n    zAxis = zAxis || create$3();\n    normalize$2(subtract$2(target, position, zAxis), zAxis);\n    normalize$2(cross(up, zAxis, xAxis), xAxis);\n    normalize$2(cross(zAxis, xAxis, yAxis), yAxis);\n    dst[0] = xAxis[0];\n    dst[1] = xAxis[1];\n    dst[2] = xAxis[2];\n    dst[3] = 0;\n    dst[4] = yAxis[0];\n    dst[5] = yAxis[1];\n    dst[6] = yAxis[2];\n    dst[7] = 0;\n    dst[8] = zAxis[0];\n    dst[9] = zAxis[1];\n    dst[10] = zAxis[2];\n    dst[11] = 0;\n    dst[12] = position[0];\n    dst[13] = position[1];\n    dst[14] = position[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Computes a 4-by-4 camera aim transformation.\n *\n * This is a matrix which positions an object aiming down negative Z.\n * toward the target.\n *\n * Note: this is the inverse of `lookAt`\n *\n * @param eye - The position of the object.\n * @param target - The position meant to be aimed at.\n * @param up - A vector pointing up.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The aim matrix.\n */\nfunction cameraAim(eye, target, up, dst) {\n    dst = dst || new MatType(16);\n    xAxis = xAxis || create$3();\n    yAxis = yAxis || create$3();\n    zAxis = zAxis || create$3();\n    normalize$2(subtract$2(eye, target, zAxis), zAxis);\n    normalize$2(cross(up, zAxis, xAxis), xAxis);\n    normalize$2(cross(zAxis, xAxis, yAxis), yAxis);\n    dst[0] = xAxis[0];\n    dst[1] = xAxis[1];\n    dst[2] = xAxis[2];\n    dst[3] = 0;\n    dst[4] = yAxis[0];\n    dst[5] = yAxis[1];\n    dst[6] = yAxis[2];\n    dst[7] = 0;\n    dst[8] = zAxis[0];\n    dst[9] = zAxis[1];\n    dst[10] = zAxis[2];\n    dst[11] = 0;\n    dst[12] = eye[0];\n    dst[13] = eye[1];\n    dst[14] = eye[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Computes a 4-by-4 view transformation.\n *\n * This is a view matrix which transforms all other objects\n * to be in the space of the view defined by the parameters.\n *\n * @param eye - The position of the object.\n * @param target - The position meant to be aimed at.\n * @param up - A vector pointing up.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The look-at matrix.\n */\nfunction lookAt(eye, target, up, dst) {\n    dst = dst || new MatType(16);\n    xAxis = xAxis || create$3();\n    yAxis = yAxis || create$3();\n    zAxis = zAxis || create$3();\n    normalize$2(subtract$2(eye, target, zAxis), zAxis);\n    normalize$2(cross(up, zAxis, xAxis), xAxis);\n    normalize$2(cross(zAxis, xAxis, yAxis), yAxis);\n    dst[0] = xAxis[0];\n    dst[1] = yAxis[0];\n    dst[2] = zAxis[0];\n    dst[3] = 0;\n    dst[4] = xAxis[1];\n    dst[5] = yAxis[1];\n    dst[6] = zAxis[1];\n    dst[7] = 0;\n    dst[8] = xAxis[2];\n    dst[9] = yAxis[2];\n    dst[10] = zAxis[2];\n    dst[11] = 0;\n    dst[12] = -(xAxis[0] * eye[0] + xAxis[1] * eye[1] + xAxis[2] * eye[2]);\n    dst[13] = -(yAxis[0] * eye[0] + yAxis[1] * eye[1] + yAxis[2] * eye[2]);\n    dst[14] = -(zAxis[0] * eye[0] + zAxis[1] * eye[1] + zAxis[2] * eye[2]);\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which translates by the given vector v.\n * @param v - The vector by\n *     which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translation matrix.\n */\nfunction translation(v, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = v[0];\n    dst[13] = v[1];\n    dst[14] = v[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Translates the given 4-by-4 matrix by the given vector v.\n * @param m - The matrix.\n * @param v - The vector by\n *     which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translated matrix.\n */\nfunction translate(m, v, dst) {\n    dst = dst || new MatType(16);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const m00 = m[0];\n    const m01 = m[1];\n    const m02 = m[2];\n    const m03 = m[3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    if (m !== dst) {\n        dst[0] = m00;\n        dst[1] = m01;\n        dst[2] = m02;\n        dst[3] = m03;\n        dst[4] = m10;\n        dst[5] = m11;\n        dst[6] = m12;\n        dst[7] = m13;\n        dst[8] = m20;\n        dst[9] = m21;\n        dst[10] = m22;\n        dst[11] = m23;\n    }\n    dst[12] = m00 * v0 + m10 * v1 + m20 * v2 + m30;\n    dst[13] = m01 * v0 + m11 * v1 + m21 * v2 + m31;\n    dst[14] = m02 * v0 + m12 * v1 + m22 * v2 + m32;\n    dst[15] = m03 * v0 + m13 * v1 + m23 * v2 + m33;\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the x-axis by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotationX(angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = c;\n    dst[6] = s;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = -s;\n    dst[10] = c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the x-axis by the given\n * angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotateX$1(m, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const m10 = m[4];\n    const m11 = m[5];\n    const m12 = m[6];\n    const m13 = m[7];\n    const m20 = m[8];\n    const m21 = m[9];\n    const m22 = m[10];\n    const m23 = m[11];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[4] = c * m10 + s * m20;\n    dst[5] = c * m11 + s * m21;\n    dst[6] = c * m12 + s * m22;\n    dst[7] = c * m13 + s * m23;\n    dst[8] = c * m20 - s * m10;\n    dst[9] = c * m21 - s * m11;\n    dst[10] = c * m22 - s * m12;\n    dst[11] = c * m23 - s * m13;\n    if (m !== dst) {\n        dst[0] = m[0];\n        dst[1] = m[1];\n        dst[2] = m[2];\n        dst[3] = m[3];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the y-axis by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotationY(angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c;\n    dst[1] = 0;\n    dst[2] = -s;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = s;\n    dst[9] = 0;\n    dst[10] = c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the y-axis by the given\n * angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotateY$1(m, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c * m00 - s * m20;\n    dst[1] = c * m01 - s * m21;\n    dst[2] = c * m02 - s * m22;\n    dst[3] = c * m03 - s * m23;\n    dst[8] = c * m20 + s * m00;\n    dst[9] = c * m21 + s * m01;\n    dst[10] = c * m22 + s * m02;\n    dst[11] = c * m23 + s * m03;\n    if (m !== dst) {\n        dst[4] = m[4];\n        dst[5] = m[5];\n        dst[6] = m[6];\n        dst[7] = m[7];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the z-axis by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotationZ(angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c;\n    dst[1] = s;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = -s;\n    dst[5] = c;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the z-axis by the given\n * angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotateZ$1(m, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c * m00 + s * m10;\n    dst[1] = c * m01 + s * m11;\n    dst[2] = c * m02 + s * m12;\n    dst[3] = c * m03 + s * m13;\n    dst[4] = c * m10 - s * m00;\n    dst[5] = c * m11 - s * m01;\n    dst[6] = c * m12 - s * m02;\n    dst[7] = c * m13 - s * m03;\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n        dst[11] = m[11];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the given axis by the given\n * angle.\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A matrix which rotates angle radians\n *     around the axis.\n */\nfunction axisRotation(axis, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    const n = Math.sqrt(x * x + y * y + z * z);\n    x /= n;\n    y /= n;\n    z /= n;\n    const xx = x * x;\n    const yy = y * y;\n    const zz = z * z;\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    const oneMinusCosine = 1 - c;\n    dst[0] = xx + (1 - xx) * c;\n    dst[1] = x * y * oneMinusCosine + z * s;\n    dst[2] = x * z * oneMinusCosine - y * s;\n    dst[3] = 0;\n    dst[4] = x * y * oneMinusCosine - z * s;\n    dst[5] = yy + (1 - yy) * c;\n    dst[6] = y * z * oneMinusCosine + x * s;\n    dst[7] = 0;\n    dst[8] = x * z * oneMinusCosine + y * s;\n    dst[9] = y * z * oneMinusCosine - x * s;\n    dst[10] = zz + (1 - zz) * c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the given axis by the given\n * angle. (same as axisRotation)\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A matrix which rotates angle radians\n *     around the axis.\n */\nconst rotation = axisRotation;\n/**\n * Rotates the given 4-by-4 matrix around the given axis by the\n * given angle.\n * @param m - The matrix.\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction axisRotate(m, axis, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    const n = Math.sqrt(x * x + y * y + z * z);\n    x /= n;\n    y /= n;\n    z /= n;\n    const xx = x * x;\n    const yy = y * y;\n    const zz = z * z;\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    const oneMinusCosine = 1 - c;\n    const r00 = xx + (1 - xx) * c;\n    const r01 = x * y * oneMinusCosine + z * s;\n    const r02 = x * z * oneMinusCosine - y * s;\n    const r10 = x * y * oneMinusCosine - z * s;\n    const r11 = yy + (1 - yy) * c;\n    const r12 = y * z * oneMinusCosine + x * s;\n    const r20 = x * z * oneMinusCosine + y * s;\n    const r21 = y * z * oneMinusCosine - x * s;\n    const r22 = zz + (1 - zz) * c;\n    const m00 = m[0];\n    const m01 = m[1];\n    const m02 = m[2];\n    const m03 = m[3];\n    const m10 = m[4];\n    const m11 = m[5];\n    const m12 = m[6];\n    const m13 = m[7];\n    const m20 = m[8];\n    const m21 = m[9];\n    const m22 = m[10];\n    const m23 = m[11];\n    dst[0] = r00 * m00 + r01 * m10 + r02 * m20;\n    dst[1] = r00 * m01 + r01 * m11 + r02 * m21;\n    dst[2] = r00 * m02 + r01 * m12 + r02 * m22;\n    dst[3] = r00 * m03 + r01 * m13 + r02 * m23;\n    dst[4] = r10 * m00 + r11 * m10 + r12 * m20;\n    dst[5] = r10 * m01 + r11 * m11 + r12 * m21;\n    dst[6] = r10 * m02 + r11 * m12 + r12 * m22;\n    dst[7] = r10 * m03 + r11 * m13 + r12 * m23;\n    dst[8] = r20 * m00 + r21 * m10 + r22 * m20;\n    dst[9] = r20 * m01 + r21 * m11 + r22 * m21;\n    dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\n    dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the given axis by the\n * given angle. (same as rotate)\n * @param m - The matrix.\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nconst rotate = axisRotate;\n/**\n * Creates a 4-by-4 matrix which scales in each dimension by an amount given by\n * the corresponding entry in the given vector; assumes the vector has three\n * entries.\n * @param v - A vector of\n *     three entries specifying the factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction scaling(v, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = v[0];\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = v[1];\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = v[2];\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Scales the given 4-by-4 matrix in each dimension by an amount\n * given by the corresponding entry in the given vector; assumes the vector has\n * three entries.\n * @param m - The matrix to be modified.\n * @param v - A vector of three entries specifying the\n *     factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction scale$2(m, v, dst) {\n    dst = dst || new MatType(16);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    dst[0] = v0 * m[0 * 4 + 0];\n    dst[1] = v0 * m[0 * 4 + 1];\n    dst[2] = v0 * m[0 * 4 + 2];\n    dst[3] = v0 * m[0 * 4 + 3];\n    dst[4] = v1 * m[1 * 4 + 0];\n    dst[5] = v1 * m[1 * 4 + 1];\n    dst[6] = v1 * m[1 * 4 + 2];\n    dst[7] = v1 * m[1 * 4 + 3];\n    dst[8] = v2 * m[2 * 4 + 0];\n    dst[9] = v2 * m[2 * 4 + 1];\n    dst[10] = v2 * m[2 * 4 + 2];\n    dst[11] = v2 * m[2 * 4 + 3];\n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which scales a uniform amount in each dimension.\n * @param s - the amount to scale\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction uniformScaling(s, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = s;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = s;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = s;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Scales the given 4-by-4 matrix in each dimension by a uniform scale.\n * @param m - The matrix to be modified.\n * @param s - The amount to scale.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction uniformScale(m, s, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = s * m[0 * 4 + 0];\n    dst[1] = s * m[0 * 4 + 1];\n    dst[2] = s * m[0 * 4 + 2];\n    dst[3] = s * m[0 * 4 + 3];\n    dst[4] = s * m[1 * 4 + 0];\n    dst[5] = s * m[1 * 4 + 1];\n    dst[6] = s * m[1 * 4 + 2];\n    dst[7] = s * m[1 * 4 + 3];\n    dst[8] = s * m[2 * 4 + 0];\n    dst[9] = s * m[2 * 4 + 1];\n    dst[10] = s * m[2 * 4 + 2];\n    dst[11] = s * m[2 * 4 + 3];\n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n\nvar mat4Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    setDefaultType: setDefaultType$3,\n    create: create$2,\n    set: set$2,\n    fromMat3: fromMat3,\n    fromQuat: fromQuat,\n    negate: negate$1,\n    copy: copy$2,\n    clone: clone$2,\n    equalsApproximately: equalsApproximately$2,\n    equals: equals$2,\n    identity: identity$1,\n    transpose: transpose,\n    inverse: inverse$2,\n    determinant: determinant,\n    invert: invert$1,\n    multiply: multiply$2,\n    mul: mul$2,\n    setTranslation: setTranslation,\n    getTranslation: getTranslation,\n    getAxis: getAxis,\n    setAxis: setAxis,\n    getScaling: getScaling,\n    perspective: perspective,\n    ortho: ortho,\n    frustum: frustum,\n    aim: aim,\n    cameraAim: cameraAim,\n    lookAt: lookAt,\n    translation: translation,\n    translate: translate,\n    rotationX: rotationX,\n    rotateX: rotateX$1,\n    rotationY: rotationY,\n    rotateY: rotateY$1,\n    rotationZ: rotationZ,\n    rotateZ: rotateZ$1,\n    axisRotation: axisRotation,\n    rotation: rotation,\n    axisRotate: axisRotate,\n    rotate: rotate,\n    scaling: scaling,\n    scale: scale$2,\n    uniformScaling: uniformScaling,\n    uniformScale: uniformScale\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Quat4 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new `Quat4`. In other words you can do this\n *\n *     const v = quat4.cross(v1, v2);  // Creates a new Quat4 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = quat4.create();\n *     quat4.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     quat4.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet QuatType = Float32Array;\n/**\n * Sets the type this library creates for a Quat4\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Quat4\n */\nfunction setDefaultType$2(ctor) {\n    const oldType = QuatType;\n    QuatType = ctor;\n    return oldType;\n}\n/**\n * Creates a quat4; may be called with x, y, z to set initial values.\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param w - Initial w value.\n * @returns the created vector\n */\nfunction create$1(x, y, z, w) {\n    const dst = new QuatType(4);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n            if (z !== undefined) {\n                dst[2] = z;\n                if (w !== undefined) {\n                    dst[3] = w;\n                }\n            }\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a Quat; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param z - Initial w value.\n * @returns the created vector\n */\nconst fromValues$1 = create$1;\n/**\n * Sets the values of a Quat\n * Also see {@link quat.create} and {@link quat.copy}\n *\n * @param x first value\n * @param y second value\n * @param z third value\n * @param w fourth value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set$1(x, y, z, w, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = x;\n    dst[1] = y;\n    dst[2] = z;\n    dst[3] = w;\n    return dst;\n}\n/**\n * Sets a quaternion from the given angle and  axis,\n * then returns it.\n *\n * @param axis - the axis to rotate around\n * @param angleInRadians - the angle\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The quaternion that represents the given axis and angle\n **/\nfunction fromAxisAngle(axis, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const s = Math.sin(halfAngle);\n    dst[0] = s * axis[0];\n    dst[1] = s * axis[1];\n    dst[2] = s * axis[2];\n    dst[3] = Math.cos(halfAngle);\n    return dst;\n}\n/**\n * Gets the rotation axis and angle\n * @param q - quaternion to compute from\n * @param dst - Vec3 to hold result. If not passed in a new one is created.\n * @return angle and axis\n */\nfunction toAxisAngle(q, dst) {\n    dst = dst || create$3(4);\n    const angle = Math.acos(q[3]) * 2;\n    const s = Math.sin(angle * 0.5);\n    if (s > EPSILON) {\n        dst[0] = q[0] / s;\n        dst[1] = q[1] / s;\n        dst[2] = q[2] / s;\n    }\n    else {\n        dst[0] = 1;\n        dst[1] = 0;\n        dst[2] = 0;\n    }\n    return { angle, axis: dst };\n}\n/**\n * Returns the angle in degrees between two rotations a and b.\n * @param a - quaternion a\n * @param b - quaternion b\n * @return angle in radians between the two quaternions\n */\nfunction angle(a, b) {\n    const d = dot$1(a, b);\n    return Math.acos(2 * d * d - 1);\n}\n/**\n * Multiplies two quaternions\n *\n * @param a - the first quaternion\n * @param b - the second quaternion\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction multiply$1(a, b, dst) {\n    dst = dst || new QuatType(4);\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const aw = a[3];\n    const bx = b[0];\n    const by = b[1];\n    const bz = b[2];\n    const bw = b[3];\n    dst[0] = ax * bw + aw * bx + ay * bz - az * by;\n    dst[1] = ay * bw + aw * by + az * bx - ax * bz;\n    dst[2] = az * bw + aw * bz + ax * by - ay * bx;\n    dst[3] = aw * bw - ax * bx - ay * by - az * bz;\n    return dst;\n}\n/**\n * Multiplies two quaternions\n *\n * @param a - the first quaternion\n * @param b - the second quaternion\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nconst mul$1 = multiply$1;\n/**\n * Rotates the given quaternion around the X axis by the given angle.\n * @param q - quaternion to rotate\n * @param angleInRadians - The angle by which to rotate\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction rotateX(q, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const bx = Math.sin(halfAngle);\n    const bw = Math.cos(halfAngle);\n    dst[0] = qx * bw + qw * bx;\n    dst[1] = qy * bw + qz * bx;\n    dst[2] = qz * bw - qy * bx;\n    dst[3] = qw * bw - qx * bx;\n    return dst;\n}\n/**\n * Rotates the given quaternion around the Y axis by the given angle.\n * @param q - quaternion to rotate\n * @param angleInRadians - The angle by which to rotate\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction rotateY(q, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const by = Math.sin(halfAngle);\n    const bw = Math.cos(halfAngle);\n    dst[0] = qx * bw - qz * by;\n    dst[1] = qy * bw + qw * by;\n    dst[2] = qz * bw + qx * by;\n    dst[3] = qw * bw - qy * by;\n    return dst;\n}\n/**\n * Rotates the given quaternion around the Z axis by the given angle.\n * @param q - quaternion to rotate\n * @param angleInRadians - The angle by which to rotate\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction rotateZ(q, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const bz = Math.sin(halfAngle);\n    const bw = Math.cos(halfAngle);\n    dst[0] = qx * bw + qy * bz;\n    dst[1] = qy * bw - qx * bz;\n    dst[2] = qz * bw + qw * bz;\n    dst[3] = qw * bw - qz * bz;\n    return dst;\n}\n/**\n * Spherically linear interpolate between two quaternions\n *\n * @param a - starting value\n * @param b - ending value\n * @param t - value where 0 = a and 1 = b\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction slerp(a, b, t, dst) {\n    dst = dst || new QuatType(4);\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const aw = a[3];\n    let bx = b[0];\n    let by = b[1];\n    let bz = b[2];\n    let bw = b[3];\n    let cosOmega = ax * bx + ay * by + az * bz + aw * bw;\n    if (cosOmega < 0) {\n        cosOmega = -cosOmega;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n    }\n    let scale0;\n    let scale1;\n    if (1.0 - cosOmega > EPSILON) {\n        const omega = Math.acos(cosOmega);\n        const sinOmega = Math.sin(omega);\n        scale0 = Math.sin((1 - t) * omega) / sinOmega;\n        scale1 = Math.sin(t * omega) / sinOmega;\n    }\n    else {\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    dst[0] = scale0 * ax + scale1 * bx;\n    dst[1] = scale0 * ay + scale1 * by;\n    dst[2] = scale0 * az + scale1 * bz;\n    dst[3] = scale0 * aw + scale1 * bw;\n    return dst;\n}\n/**\n * Compute the inverse of a quaternion\n *\n * @param q - quaternion to compute the inverse of\n * @returns A quaternion that is the result of a * b\n */\nfunction inverse$1(q, dst) {\n    dst = dst || new QuatType(4);\n    const a0 = q[0];\n    const a1 = q[1];\n    const a2 = q[2];\n    const a3 = q[3];\n    const dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n    const invDot = dot ? 1 / dot : 0;\n    dst[0] = -a0 * invDot;\n    dst[1] = -a1 * invDot;\n    dst[2] = -a2 * invDot;\n    dst[3] = a3 * invDot;\n    return dst;\n}\n/**\n * Compute the conjugate of a quaternion\n * For quaternions with a magnitude of 1 (a unit quaternion)\n * this returns the same as the inverse but is faster to calculate.\n *\n * @param q - quaternion to compute the conjugate of.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The conjugate of q\n */\nfunction conjugate(q, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = -q[0];\n    dst[1] = -q[1];\n    dst[2] = -q[2];\n    dst[3] = q[3];\n    return dst;\n}\n/**\n * Creates a quaternion from the given rotation matrix.\n *\n * The created quaternion is not normalized.\n *\n * @param m - rotation matrix\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns the result\n */\nfunction fromMat(m, dst) {\n    dst = dst || new QuatType(4);\n    /*\n    0 1 2\n    3 4 5\n    6 7 8\n  \n    0 1 2\n    4 5 6\n    8 9 10\n     */\n    // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n    // article \"Quaternion Calculus and Fast Animation\".\n    const trace = m[0] + m[5] + m[10];\n    if (trace > 0.0) {\n        // |w| > 1/2, may as well choose w > 1/2\n        const root = Math.sqrt(trace + 1); // 2w\n        dst[3] = 0.5 * root;\n        const invRoot = 0.5 / root; // 1/(4w)\n        dst[0] = (m[6] - m[9]) * invRoot;\n        dst[1] = (m[8] - m[2]) * invRoot;\n        dst[2] = (m[1] - m[4]) * invRoot;\n    }\n    else {\n        // |w| <= 1/2\n        let i = 0;\n        if (m[5] > m[0]) {\n            i = 1;\n        }\n        if (m[10] > m[i * 4 + i]) {\n            i = 2;\n        }\n        const j = (i + 1) % 3;\n        const k = (i + 2) % 3;\n        const root = Math.sqrt(m[i * 4 + i] - m[j * 4 + j] - m[k * 4 + k] + 1.0);\n        dst[i] = 0.5 * root;\n        const invRoot = 0.5 / root;\n        dst[3] = (m[j * 4 + k] - m[k * 4 + j]) * invRoot;\n        dst[j] = (m[j * 4 + i] + m[i * 4 + j]) * invRoot;\n        dst[k] = (m[k * 4 + i] + m[i * 4 + k]) * invRoot;\n    }\n    return dst;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z using the provided intrinsic order for the conversion.\n *\n * @param xAngleInRadians - angle to rotate around X axis in radians.\n * @param yAngleInRadians - angle to rotate around Y axis in radians.\n * @param zAngleInRadians - angle to rotate around Z axis in radians.\n * @param order - order to apply euler angles\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion representing the same rotation as the euler angles applied in the given order\n */\nfunction fromEuler(xAngleInRadians, yAngleInRadians, zAngleInRadians, order, dst) {\n    dst = dst || new QuatType(4);\n    const xHalfAngle = xAngleInRadians * 0.5;\n    const yHalfAngle = yAngleInRadians * 0.5;\n    const zHalfAngle = zAngleInRadians * 0.5;\n    const sx = Math.sin(xHalfAngle);\n    const cx = Math.cos(xHalfAngle);\n    const sy = Math.sin(yHalfAngle);\n    const cy = Math.cos(yHalfAngle);\n    const sz = Math.sin(zHalfAngle);\n    const cz = Math.cos(zHalfAngle);\n    switch (order) {\n        case 'xyz':\n            dst[0] = sx * cy * cz + cx * sy * sz;\n            dst[1] = cx * sy * cz - sx * cy * sz;\n            dst[2] = cx * cy * sz + sx * sy * cz;\n            dst[3] = cx * cy * cz - sx * sy * sz;\n            break;\n        case 'xzy':\n            dst[0] = sx * cy * cz - cx * sy * sz;\n            dst[1] = cx * sy * cz - sx * cy * sz;\n            dst[2] = cx * cy * sz + sx * sy * cz;\n            dst[3] = cx * cy * cz + sx * sy * sz;\n            break;\n        case 'yxz':\n            dst[0] = sx * cy * cz + cx * sy * sz;\n            dst[1] = cx * sy * cz - sx * cy * sz;\n            dst[2] = cx * cy * sz - sx * sy * cz;\n            dst[3] = cx * cy * cz + sx * sy * sz;\n            break;\n        case 'yzx':\n            dst[0] = sx * cy * cz + cx * sy * sz;\n            dst[1] = cx * sy * cz + sx * cy * sz;\n            dst[2] = cx * cy * sz - sx * sy * cz;\n            dst[3] = cx * cy * cz - sx * sy * sz;\n            break;\n        case 'zxy':\n            dst[0] = sx * cy * cz - cx * sy * sz;\n            dst[1] = cx * sy * cz + sx * cy * sz;\n            dst[2] = cx * cy * sz + sx * sy * cz;\n            dst[3] = cx * cy * cz - sx * sy * sz;\n            break;\n        case 'zyx':\n            dst[0] = sx * cy * cz - cx * sy * sz;\n            dst[1] = cx * sy * cz + sx * cy * sz;\n            dst[2] = cx * cy * sz - sx * sy * cz;\n            dst[3] = cx * cy * cz + sx * sy * sz;\n            break;\n        default:\n            throw new Error(`Unknown rotation order: ${order}`);\n    }\n    return dst;\n}\n/**\n * Copies a quaternion. (same as {@link quat.clone})\n * Also see {@link quat.create} and {@link quat.set}\n * @param q - The quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is a copy of q\n */\nfunction copy$1(q, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = q[0];\n    dst[1] = q[1];\n    dst[2] = q[2];\n    dst[3] = q[3];\n    return dst;\n}\n/**\n * Clones a quaternion. (same as {@link quat.copy})\n * Also see {@link quat.create} and {@link quat.set}\n * @param q - The quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A copy of q.\n */\nconst clone$1 = copy$1;\n/**\n * Adds two quaternions; assumes a and b have the same dimension.\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the sum of a and b.\n */\nfunction add$1(a, b, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    dst[2] = a[2] + b[2];\n    dst[3] = a[3] + b[3];\n    return dst;\n}\n/**\n * Subtracts two quaternions.\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the difference of a and b.\n */\nfunction subtract$1(a, b, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    dst[2] = a[2] - b[2];\n    dst[3] = a[3] - b[3];\n    return dst;\n}\n/**\n * Subtracts two quaternions.\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the difference of a and b.\n */\nconst sub$1 = subtract$1;\n/**\n * Multiplies a quaternion by a scalar.\n * @param v - The quaternion.\n * @param k - The scalar.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The scaled quaternion.\n */\nfunction mulScalar$1(v, k, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    dst[2] = v[2] * k;\n    dst[3] = v[3] * k;\n    return dst;\n}\n/**\n * Multiplies a quaternion by a scalar. (same as mulScalar)\n * @param v - The quaternion.\n * @param k - The scalar.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The scaled quaternion.\n */\nconst scale$1 = mulScalar$1;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The scaled quaternion.\n */\nfunction divScalar$1(v, k, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    dst[2] = v[2] / k;\n    dst[3] = v[3] / k;\n    return dst;\n}\n/**\n * Computes the dot product of two quaternions\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @returns dot product\n */\nfunction dot$1(a, b) {\n    return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]) + (a[3] * b[3]);\n}\n/**\n * Performs linear interpolation on two quaternions.\n * Given quaternions a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param t - Interpolation coefficient.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp$1(a, b, t, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    dst[2] = a[2] + t * (b[2] - a[2]);\n    dst[3] = a[3] + t * (b[3] - a[3]);\n    return dst;\n}\n/**\n * Computes the length of quaternion\n * @param v - quaternion.\n * @returns length of quaternion.\n */\nfunction length$1(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n}\n/**\n * Computes the length of quaternion (same as length)\n * @param v - quaternion.\n * @returns length of quaternion.\n */\nconst len$1 = length$1;\n/**\n * Computes the square of the length of quaternion\n * @param v - quaternion.\n * @returns square of the length of quaternion.\n */\nfunction lengthSq$1(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3;\n}\n/**\n * Computes the square of the length of quaternion (same as lengthSq)\n * @param v - quaternion.\n * @returns square of the length of quaternion.\n */\nconst lenSq$1 = lengthSq$1;\n/**\n * Divides a quaternion by its Euclidean length and returns the quotient.\n * @param v - The quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The normalized quaternion.\n */\nfunction normalize$1(v, dst) {\n    dst = dst || new QuatType(4);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    const len = Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n        dst[2] = v2 / len;\n        dst[3] = v3 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n        dst[3] = 0;\n    }\n    return dst;\n}\n/**\n * Check if 2 quaternions are approximately equal\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @returns true if quaternions are approximately equal\n */\nfunction equalsApproximately$1(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[3] - b[3]) < EPSILON;\n}\n/**\n * Check if 2 quaternions are exactly equal\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @returns true if quaternions are exactly equal\n */\nfunction equals$1(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Creates an identity quaternion\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns an identity quaternion\n */\nfunction identity(dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 1;\n    return dst;\n}\nlet tempVec3;\nlet xUnitVec3;\nlet yUnitVec3;\n/**\n * Computes a quaternion to represent the shortest rotation from one vector to another.\n *\n * @param aUnit - the start vector\n * @param bUnit - the end vector\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns the result\n */\nfunction rotationTo(aUnit, bUnit, dst) {\n    dst = dst || new QuatType(4);\n    tempVec3 = tempVec3 || create$3();\n    xUnitVec3 = xUnitVec3 || create$3(1, 0, 0);\n    yUnitVec3 = yUnitVec3 || create$3(0, 1, 0);\n    const dot = dot$2(aUnit, bUnit);\n    if (dot < -0.999999) {\n        cross(xUnitVec3, aUnit, tempVec3);\n        if (len$2(tempVec3) < 0.000001) {\n            cross(yUnitVec3, aUnit, tempVec3);\n        }\n        normalize$2(tempVec3, tempVec3);\n        fromAxisAngle(tempVec3, Math.PI, dst);\n        return dst;\n    }\n    else if (dot > 0.999999) {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n        dst[3] = 1;\n        return dst;\n    }\n    else {\n        cross(aUnit, bUnit, tempVec3);\n        dst[0] = tempVec3[0];\n        dst[1] = tempVec3[1];\n        dst[2] = tempVec3[2];\n        dst[3] = 1 + dot;\n        return normalize$1(dst, dst);\n    }\n}\nlet tempQuat1;\nlet tempQuat2;\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param a - the first quaternion\n * @param b - the second quaternion\n * @param c - the third quaternion\n * @param d - the fourth quaternion\n * @param t - Interpolation coefficient 0 to 1\n * @returns result\n */\nfunction sqlerp(a, b, c, d, t, dst) {\n    dst = dst || new QuatType(4);\n    tempQuat1 = tempQuat1 || new QuatType(4);\n    tempQuat2 = tempQuat2 || new QuatType(4);\n    slerp(a, d, t, tempQuat1);\n    slerp(b, c, t, tempQuat2);\n    slerp(tempQuat1, tempQuat2, 2 * t * (1 - t), dst);\n    return dst;\n}\n\nvar quatImpl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create$1,\n    setDefaultType: setDefaultType$2,\n    fromValues: fromValues$1,\n    set: set$1,\n    fromAxisAngle: fromAxisAngle,\n    toAxisAngle: toAxisAngle,\n    angle: angle,\n    multiply: multiply$1,\n    mul: mul$1,\n    rotateX: rotateX,\n    rotateY: rotateY,\n    rotateZ: rotateZ,\n    slerp: slerp,\n    inverse: inverse$1,\n    conjugate: conjugate,\n    fromMat: fromMat,\n    fromEuler: fromEuler,\n    copy: copy$1,\n    clone: clone$1,\n    add: add$1,\n    subtract: subtract$1,\n    sub: sub$1,\n    mulScalar: mulScalar$1,\n    scale: scale$1,\n    divScalar: divScalar$1,\n    dot: dot$1,\n    lerp: lerp$1,\n    length: length$1,\n    len: len$1,\n    lengthSq: lengthSq$1,\n    lenSq: lenSq$1,\n    normalize: normalize$1,\n    equalsApproximately: equalsApproximately$1,\n    equals: equals$1,\n    identity: identity,\n    rotationTo: rotationTo,\n    sqlerp: sqlerp\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Vec4 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new `Vec4`. In other words you can do this\n *\n *     const v = vec4.cross(v1, v2);  // Creates a new Vec4 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = vec4.create();\n *     vec4.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     vec4.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet VecType = Float32Array;\n/**\n * Sets the type this library creates for a Vec4\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Vec4\n */\nfunction setDefaultType$1(ctor) {\n    const oldType = VecType;\n    VecType = ctor;\n    return oldType;\n}\n/**\n * Creates a vec4; may be called with x, y, z to set initial values.\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param w - Initial w value.\n * @returns the created vector\n */\nfunction create(x, y, z, w) {\n    const dst = new VecType(4);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n            if (z !== undefined) {\n                dst[2] = z;\n                if (w !== undefined) {\n                    dst[3] = w;\n                }\n            }\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a vec4; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param z - Initial w value.\n * @returns the created vector\n */\nconst fromValues = create;\n/**\n * Sets the values of a Vec4\n * Also see {@link vec4.create} and {@link vec4.copy}\n *\n * @param x first value\n * @param y second value\n * @param z third value\n * @param w fourth value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set(x, y, z, w, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = x;\n    dst[1] = y;\n    dst[2] = z;\n    dst[3] = w;\n    return dst;\n}\n/**\n * Applies Math.ceil to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the ceil of each element of v.\n */\nfunction ceil(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.ceil(v[0]);\n    dst[1] = Math.ceil(v[1]);\n    dst[2] = Math.ceil(v[2]);\n    dst[3] = Math.ceil(v[3]);\n    return dst;\n}\n/**\n * Applies Math.floor to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the floor of each element of v.\n */\nfunction floor(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.floor(v[0]);\n    dst[1] = Math.floor(v[1]);\n    dst[2] = Math.floor(v[2]);\n    dst[3] = Math.floor(v[3]);\n    return dst;\n}\n/**\n * Applies Math.round to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the round of each element of v.\n */\nfunction round(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.round(v[0]);\n    dst[1] = Math.round(v[1]);\n    dst[2] = Math.round(v[2]);\n    dst[3] = Math.round(v[3]);\n    return dst;\n}\n/**\n * Clamp each element of vector between min and max\n * @param v - Operand vector.\n * @param max - Min value, default 0\n * @param min - Max value, default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that the clamped value of each element of v.\n */\nfunction clamp(v, min = 0, max = 1, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.min(max, Math.max(min, v[0]));\n    dst[1] = Math.min(max, Math.max(min, v[1]));\n    dst[2] = Math.min(max, Math.max(min, v[2]));\n    dst[3] = Math.min(max, Math.max(min, v[3]));\n    return dst;\n}\n/**\n * Adds two vectors; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a and b.\n */\nfunction add(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    dst[2] = a[2] + b[2];\n    dst[3] = a[3] + b[3];\n    return dst;\n}\n/**\n * Adds two vectors, scaling the 2nd; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param scale - Amount to scale b\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a + b * scale.\n */\nfunction addScaled(a, b, scale, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + b[0] * scale;\n    dst[1] = a[1] + b[1] * scale;\n    dst[2] = a[2] + b[2] * scale;\n    dst[3] = a[3] + b[3] * scale;\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nfunction subtract(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    dst[2] = a[2] - b[2];\n    dst[3] = a[3] - b[3];\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nconst sub = subtract;\n/**\n * Check if 2 vectors are approximately equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are approximately equal\n */\nfunction equalsApproximately(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[3] - b[3]) < EPSILON;\n}\n/**\n * Check if 2 vectors are exactly equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are exactly equal\n */\nfunction equals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficient.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp(a, b, t, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    dst[2] = a[2] + t * (b[2] - a[2]);\n    dst[3] = a[3] + t * (b[3] - a[3]);\n    return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient vector t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficients vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns the linear interpolated result.\n */\nfunction lerpV(a, b, t, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + t[0] * (b[0] - a[0]);\n    dst[1] = a[1] + t[1] * (b[1] - a[1]);\n    dst[2] = a[2] + t[2] * (b[2] - a[2]);\n    dst[3] = a[3] + t[3] * (b[3] - a[3]);\n    return dst;\n}\n/**\n * Return max values of two vectors.\n * Given vectors a and b returns\n * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The max components vector.\n */\nfunction max(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.max(a[0], b[0]);\n    dst[1] = Math.max(a[1], b[1]);\n    dst[2] = Math.max(a[2], b[2]);\n    dst[3] = Math.max(a[3], b[3]);\n    return dst;\n}\n/**\n * Return min values of two vectors.\n * Given vectors a and b returns\n * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The min components vector.\n */\nfunction min(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.min(a[0], b[0]);\n    dst[1] = Math.min(a[1], b[1]);\n    dst[2] = Math.min(a[2], b[2]);\n    dst[3] = Math.min(a[3], b[3]);\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction mulScalar(v, k, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    dst[2] = v[2] * k;\n    dst[3] = v[3] * k;\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar. (same as mulScalar)\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nconst scale = mulScalar;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction divScalar(v, k, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    dst[2] = v[2] / k;\n    dst[3] = v[3] / k;\n    return dst;\n}\n/**\n * Inverse a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nfunction inverse(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = 1 / v[0];\n    dst[1] = 1 / v[1];\n    dst[2] = 1 / v[2];\n    dst[3] = 1 / v[3];\n    return dst;\n}\n/**\n * Invert a vector. (same as inverse)\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nconst invert = inverse;\n/**\n * Computes the dot product of two vectors\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns dot product\n */\nfunction dot(a, b) {\n    return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]) + (a[3] * b[3]);\n}\n/**\n * Computes the length of vector\n * @param v - vector.\n * @returns length of vector.\n */\nfunction length(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n}\n/**\n * Computes the length of vector (same as length)\n * @param v - vector.\n * @returns length of vector.\n */\nconst len = length;\n/**\n * Computes the square of the length of vector\n * @param v - vector.\n * @returns square of the length of vector.\n */\nfunction lengthSq(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3;\n}\n/**\n * Computes the square of the length of vector (same as lengthSq)\n * @param v - vector.\n * @returns square of the length of vector.\n */\nconst lenSq = lengthSq;\n/**\n * Computes the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nfunction distance(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    const dw = a[3] - b[3];\n    return Math.sqrt(dx * dx + dy * dy + dz * dz + dw * dw);\n}\n/**\n * Computes the distance between 2 points (same as distance)\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nconst dist = distance;\n/**\n * Computes the square of the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nfunction distanceSq(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    const dw = a[3] - b[3];\n    return dx * dx + dy * dy + dz * dz + dw * dw;\n}\n/**\n * Computes the square of the distance between 2 points (same as distanceSq)\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nconst distSq = distanceSq;\n/**\n * Divides a vector by its Euclidean length and returns the quotient.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The normalized vector.\n */\nfunction normalize(v, dst) {\n    dst = dst || new VecType(4);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    const len = Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n        dst[2] = v2 / len;\n        dst[3] = v3 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n        dst[3] = 0;\n    }\n    return dst;\n}\n/**\n * Negates a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns -v.\n */\nfunction negate(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = -v[0];\n    dst[1] = -v[1];\n    dst[2] = -v[2];\n    dst[3] = -v[3];\n    return dst;\n}\n/**\n * Copies a vector. (same as {@link vec4.clone})\n * Also see {@link vec4.create} and {@link vec4.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nfunction copy(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = v[0];\n    dst[1] = v[1];\n    dst[2] = v[2];\n    dst[3] = v[3];\n    return dst;\n}\n/**\n * Clones a vector. (same as {@link vec4.copy})\n * Also see {@link vec4.create} and {@link vec4.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nconst clone = copy;\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nfunction multiply(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] * b[0];\n    dst[1] = a[1] * b[1];\n    dst[2] = a[2] * b[2];\n    dst[3] = a[3] * b[3];\n    return dst;\n}\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as mul)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nconst mul = multiply;\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nfunction divide(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] / b[0];\n    dst[1] = a[1] / b[1];\n    dst[2] = a[2] / b[2];\n    dst[3] = a[3] / b[3];\n    return dst;\n}\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as divide)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nconst div = divide;\n/**\n * Zero's a vector\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The zeroed vector.\n */\nfunction zero(dst) {\n    dst = dst || new VecType(4);\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    return dst;\n}\n/**\n * transform vec4 by 4x4 matrix\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional vec4 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat4(v, m, dst) {\n    dst = dst || new VecType(4);\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const w = v[3];\n    dst[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    dst[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    dst[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    dst[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return dst;\n}\n\nvar vec4Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create,\n    setDefaultType: setDefaultType$1,\n    fromValues: fromValues,\n    set: set,\n    ceil: ceil,\n    floor: floor,\n    round: round,\n    clamp: clamp,\n    add: add,\n    addScaled: addScaled,\n    subtract: subtract,\n    sub: sub,\n    equalsApproximately: equalsApproximately,\n    equals: equals,\n    lerp: lerp,\n    lerpV: lerpV,\n    max: max,\n    min: min,\n    mulScalar: mulScalar,\n    scale: scale,\n    divScalar: divScalar,\n    inverse: inverse,\n    invert: invert,\n    dot: dot,\n    length: length,\n    len: len,\n    lengthSq: lengthSq,\n    lenSq: lenSq,\n    distance: distance,\n    dist: dist,\n    distanceSq: distanceSq,\n    distSq: distSq,\n    normalize: normalize,\n    negate: negate,\n    copy: copy,\n    clone: clone,\n    multiply: multiply,\n    mul: mul,\n    divide: divide,\n    div: div,\n    zero: zero,\n    transformMat4: transformMat4\n});\n\n/**\n * Sets the type this library creates for all types\n *\n * example:\n *\n * ```\n * setDefaultType(Float64Array);\n * ```\n *\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n */\nfunction setDefaultType(ctor) {\n    setDefaultType$5(ctor);\n    setDefaultType$3(ctor);\n    setDefaultType$2(ctor);\n    setDefaultType$6(ctor);\n    setDefaultType$4(ctor);\n    setDefaultType$1(ctor);\n}\n\n\n//# sourceMappingURL=wgpu-matrix.module.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2dwdS1tYXRyaXgvZGlzdC8yLngvd2dwdS1tYXRyaXgubW9kdWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLGlCQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0MsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdCQUFnQjtBQUM5QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaUJBQWlCO0FBQy9DLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaUJBQWlCO0FBQy9DLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdCQUFnQjtBQUM5QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlCQUFpQjtBQUMvQyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELE1BQU07QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaUJBQWlCO0FBQ25ELGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0JBQWdCO0FBQ2xELGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0MsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnQkFBZ0I7QUFDOUMsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFNkk7QUFDN0kiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL25vZGVfbW9kdWxlcy93Z3B1LW1hdHJpeC9kaXN0LzIueC93Z3B1LW1hdHJpeC5tb2R1bGUuanM/N2Q2YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB3Z3B1LW1hdHJpeEAyLjUuMCwgbGljZW5zZSBNSVQgKi9cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbmxldCBFUFNJTE9OID0gMC4wMDAwMDE7XG4vKipcbiAqIFNldCB0aGUgdmFsdWUgZm9yIEVQU0lMT04gZm9yIHZhcmlvdXMgY2hlY2tzXG4gKiBAcGFyYW0gdiAtIFZhbHVlIHRvIHVzZSBmb3IgRVBTSUxPTi5cbiAqIEByZXR1cm5zIHByZXZpb3VzIHZhbHVlIG9mIEVQU0lMT047XG4gKi9cbmZ1bmN0aW9uIHNldEVwc2lsb24odikge1xuICAgIGNvbnN0IG9sZCA9IEVQU0lMT047XG4gICAgRVBTSUxPTiA9IHY7XG4gICAgcmV0dXJuIG9sZDtcbn1cbi8qKlxuICogQ29udmVydCBkZWdyZWVzIHRvIHJhZGlhbnNcbiAqIEBwYXJhbSBkZWdyZWVzIC0gQW5nbGUgaW4gZGVncmVlc1xuICogQHJldHVybnMgYW5nbGUgY29udmVydGVkIHRvIHJhZGlhbnNcbiAqL1xuZnVuY3Rpb24gZGVnVG9SYWQoZGVncmVlcykge1xuICAgIHJldHVybiBkZWdyZWVzICogTWF0aC5QSSAvIDE4MDtcbn1cbi8qKlxuICogQ29udmVydCByYWRpYW5zIHRvIGRlZ3JlZXNcbiAqIEBwYXJhbSByYWRpYW5zIC0gQW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMgYW5nbGUgY29udmVydGVkIHRvIGRlZ3JlZXNcbiAqL1xuZnVuY3Rpb24gcmFkVG9EZWcocmFkaWFucykge1xuICAgIHJldHVybiByYWRpYW5zICogMTgwIC8gTWF0aC5QSTtcbn1cbi8qKlxuICogTGVycHMgYmV0d2VlbiBhIGFuZCBiIHZpYSB0XG4gKiBAcGFyYW0gYSAtIHN0YXJ0aW5nIHZhbHVlXG4gKiBAcGFyYW0gYiAtIGVuZGluZyB2YWx1ZVxuICogQHBhcmFtIHQgLSB2YWx1ZSB3aGVyZSAwID0gYSBhbmQgMSA9IGJcbiAqIEByZXR1cm5zIGEgKyAoYiAtIGEpICogdFxuICovXG5mdW5jdGlvbiBsZXJwJDQoYSwgYiwgdCkge1xuICAgIHJldHVybiBhICsgKGIgLSBhKSAqIHQ7XG59XG4vKipcbiAqIENvbXB1dGUgdGhlIG9wcG9zaXRlIG9mIGxlcnAuIEdpdmVuIGEgYW5kIGIgYW5kIGEgdmFsdWUgYmV0d2VlblxuICogYSBhbmQgYiByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLiAwIGlmIGEsIDEgaWYgYi5cbiAqIE5vdGU6IG5vIGNsYW1waW5nIGlzIGRvbmUuXG4gKiBAcGFyYW0gYSAtIHN0YXJ0IHZhbHVlXG4gKiBAcGFyYW0gYiAtIGVuZCB2YWx1ZVxuICogQHBhcmFtIHYgLSB2YWx1ZSBiZXR3ZWVuIGEgYW5kIGJcbiAqIEByZXR1cm5zICh2IC0gYSkgLyAoYiAtIGEpXG4gKi9cbmZ1bmN0aW9uIGludmVyc2VMZXJwKGEsIGIsIHYpIHtcbiAgICBjb25zdCBkID0gYiAtIGE7XG4gICAgcmV0dXJuIChNYXRoLmFicyhiIC0gYSkgPCBFUFNJTE9OKVxuICAgICAgICA/IGFcbiAgICAgICAgOiAodiAtIGEpIC8gZDtcbn1cbi8qKlxuICogQ29tcHV0ZSB0aGUgZXVjbGlkZWFuIG1vZHVsb1xuICpcbiAqIGBgYFxuICogLy8gdGFibGUgZm9yIG4gLyAzXG4gKiAtNSwgLTQsIC0zLCAtMiwgLTEsICAwLCAgMSwgIDIsICAzLCAgNCwgIDUgICA8LSBuXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIC0yICAtMSAgLTAgIC0yICAtMSAgIDAsICAxLCAgMiwgIDAsICAxLCAgMiAgIDwtIG4gJSAzXG4gKiAgMSAgIDIgICAwICAgMSAgIDIgICAwLCAgMSwgIDIsICAwLCAgMSwgIDIgICA8LSBldWNsaWRlYW5Nb2R1bGUobiwgMylcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBuIC0gZGl2aWRlbmRcbiAqIEBwYXJhbSBtIC0gZGl2aXNvclxuICogQHJldHVybnMgdGhlIGV1Y2xpZGVhbiBtb2R1bG8gb2YgbiAvIG1cbiAqL1xuZnVuY3Rpb24gZXVjbGlkZWFuTW9kdWxvKG4sIG0pIHtcbiAgICByZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XG59XG5cbnZhciB1dGlscyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgZ2V0IEVQU0lMT04gKCkgeyByZXR1cm4gRVBTSUxPTjsgfSxcbiAgICBzZXRFcHNpbG9uOiBzZXRFcHNpbG9uLFxuICAgIGRlZ1RvUmFkOiBkZWdUb1JhZCxcbiAgICByYWRUb0RlZzogcmFkVG9EZWcsXG4gICAgbGVycDogbGVycCQ0LFxuICAgIGludmVyc2VMZXJwOiBpbnZlcnNlTGVycCxcbiAgICBldWNsaWRlYW5Nb2R1bG86IGV1Y2xpZGVhbk1vZHVsb1xufSk7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbi8qKlxuICpcbiAqIFZlYzIgbWF0aCBmdW5jdGlvbnMuXG4gKlxuICogQWxtb3N0IGFsbCBmdW5jdGlvbnMgdGFrZSBhbiBvcHRpb25hbCBgZHN0YCBhcmd1bWVudC4gSWYgaXQgaXMgbm90IHBhc3NlZCBpbiB0aGVcbiAqIGZ1bmN0aW9ucyB3aWxsIGNyZWF0ZSBhIG5ldyBWZWMyLiBJbiBvdGhlciB3b3JkcyB5b3UgY2FuIGRvIHRoaXNcbiAqXG4gKiAgICAgY29uc3QgdiA9IHZlYzIuY3Jvc3ModjEsIHYyKTsgIC8vIENyZWF0ZXMgYSBuZXcgVmVjMiB3aXRoIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHYxIHggdjIuXG4gKlxuICogb3JcbiAqXG4gKiAgICAgY29uc3QgdiA9IHZlYzIuY3JlYXRlKCk7XG4gKiAgICAgdmVjMi5jcm9zcyh2MSwgdjIsIHYpOyAgLy8gUHV0cyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyIGluIHZcbiAqXG4gKiBUaGUgZmlyc3Qgc3R5bGUgaXMgb2Z0ZW4gZWFzaWVyIGJ1dCBkZXBlbmRpbmcgb24gd2hlcmUgaXQncyB1c2VkIGl0IGdlbmVyYXRlcyBnYXJiYWdlIHdoZXJlXG4gKiBhcyB0aGVyZSBpcyBhbG1vc3QgbmV2ZXIgYWxsb2NhdGlvbiB3aXRoIHRoZSBzZWNvbmQgc3R5bGUuXG4gKlxuICogSXQgaXMgYWx3YXlzIHNhZmUgdG8gcGFzcyBhbnkgdmVjdG9yIGFzIHRoZSBkZXN0aW5hdGlvbi4gU28gZm9yIGV4YW1wbGVcbiAqXG4gKiAgICAgdmVjMi5jcm9zcyh2MSwgdjIsIHYxKTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2MVxuICpcbiAqL1xubGV0IFZlY1R5cGUkMiA9IEZsb2F0MzJBcnJheTtcbi8qKlxuICogU2V0cyB0aGUgdHlwZSB0aGlzIGxpYnJhcnkgY3JlYXRlcyBmb3IgYSBWZWMyXG4gKiBAcGFyYW0gY3RvciAtIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUuIEVpdGhlciBgRmxvYXQzMkFycmF5YCwgYEZsb2F0NjRBcnJheWAsIG9yIGBBcnJheWBcbiAqIEByZXR1cm5zIHByZXZpb3VzIGNvbnN0cnVjdG9yIGZvciBWZWMyXG4gKi9cbmZ1bmN0aW9uIHNldERlZmF1bHRUeXBlJDYoY3Rvcikge1xuICAgIGNvbnN0IG9sZFR5cGUgPSBWZWNUeXBlJDI7XG4gICAgVmVjVHlwZSQyID0gY3RvcjtcbiAgICByZXR1cm4gb2xkVHlwZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIFZlYzI7IG1heSBiZSBjYWxsZWQgd2l0aCB4LCB5LCB6IHRvIHNldCBpbml0aWFsIHZhbHVlcy5cbiAqXG4gKiBOb3RlOiBTaW5jZSBwYXNzaW5nIGluIGEgcmF3IEphdmFTY3JpcHQgYXJyYXlcbiAqIGlzIHZhbGlkIGluIGFsbCBjaXJjdW1zdGFuY2VzLCBpZiB5b3Ugd2FudCB0b1xuICogZm9yY2UgYSBKYXZhU2NyaXB0IGFycmF5IGludG8gYSBWZWMyJ3Mgc3BlY2lmaWVkIHR5cGVcbiAqIGl0IHdvdWxkIGJlIGZhc3RlciB0byB1c2VcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHYgPSB2ZWMyLmNsb25lKHNvbWVKU0FycmF5KTtcbiAqIGBgYFxuICpcbiAqIE5vdGU6IGEgY29uc2VxdWVuY2Ugb2YgdGhlIGltcGxlbWVudGF0aW9uIGlzIGlmIHlvdXIgVmVjMlR5cGUgPSBgQXJyYXlgXG4gKiBpbnN0ZWFkIG9mIGBGbG9hdDMyQXJyYXlgIG9yIGBGbG9hdDY0QXJyYXlgIHRoZW4gYW55IHZhbHVlcyB5b3VcbiAqIGRvbid0IHBhc3MgaW4gd2lsbCBiZSB1bmRlZmluZWQuIFVzdWFsbHkgdGhpcyBpcyBub3QgYW4gaXNzdWUgc2luY2VcbiAqIChhKSB1c2luZyBgQXJyYXlgIGlzIHJhcmUgYW5kIChiKSB1c2luZyBgdmVjMi5jcmVhdGVgIGlzIHVzdWFsbHkgdXNlZFxuICogdG8gY3JlYXRlIGEgVmVjMiB0byBiZSBmaWxsZWQgb3V0IGFzIGluXG4gKlxuICogYGBgXG4gKiBjb25zdCBzdW0gPSB2ZWMyLmNyZWF0ZSgpO1xuICogdmVjMi5hZGQodjEsIHYyLCBzdW0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHggLSBJbml0aWFsIHggdmFsdWUuXG4gKiBAcGFyYW0geSAtIEluaXRpYWwgeSB2YWx1ZS5cbiAqIEByZXR1cm5zIHRoZSBjcmVhdGVkIHZlY3RvclxuICovXG5mdW5jdGlvbiBjcmVhdGUkNSh4ID0gMCwgeSA9IDApIHtcbiAgICBjb25zdCBkc3QgPSBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGlmICh4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHN0WzBdID0geDtcbiAgICAgICAgaWYgKHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHN0WzFdID0geTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuXG4vKlxuICogQ29weXJpZ2h0IDIwMjIgR3JlZ2cgVGF2YXJlc1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG4gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uXG4gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTExcbiAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSBWZWMyOyBtYXkgYmUgY2FsbGVkIHdpdGggeCwgeSwgeiB0byBzZXQgaW5pdGlhbCB2YWx1ZXMuIChzYW1lIGFzIGNyZWF0ZSlcbiAqIEBwYXJhbSB4IC0gSW5pdGlhbCB4IHZhbHVlLlxuICogQHBhcmFtIHkgLSBJbml0aWFsIHkgdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuY29uc3QgZnJvbVZhbHVlcyQzID0gY3JlYXRlJDU7XG4vKipcbiAqIFNldHMgdGhlIHZhbHVlcyBvZiBhIFZlYzJcbiAqIEFsc28gc2VlIHtAbGluayB2ZWMyLmNyZWF0ZX0gYW5kIHtAbGluayB2ZWMyLmNvcHl9XG4gKlxuICogQHBhcmFtIHggZmlyc3QgdmFsdWVcbiAqIEBwYXJhbSB5IHNlY29uZCB2YWx1ZVxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHdpdGggaXRzIGVsZW1lbnRzIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0JDUoeCwgeSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0geDtcbiAgICBkc3RbMV0gPSB5O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5jZWlsIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgY2VpbCBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2VpbCQyKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IE1hdGguY2VpbCh2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmNlaWwodlsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQXBwbGllcyBNYXRoLmZsb29yIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZmxvb3Igb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIGZsb29yJDIodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5mbG9vcih2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmZsb29yKHZbMV0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5yb3VuZCB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIHJvdW5kIG9mIGVhY2ggZWxlbWVudCBvZiB2LlxuICovXG5mdW5jdGlvbiByb3VuZCQyKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IE1hdGgucm91bmQodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5yb3VuZCh2WzFdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDbGFtcCBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yIGJldHdlZW4gbWluIGFuZCBtYXhcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gbWF4IC0gTWluIHZhbHVlLCBkZWZhdWx0IDBcbiAqIEBwYXJhbSBtaW4gLSBNYXggdmFsdWUsIGRlZmF1bHQgMVxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgdGhlIGNsYW1wZWQgdmFsdWUgb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIGNsYW1wJDIodiwgbWluID0gMCwgbWF4ID0gMSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZbMF0pKTtcbiAgICBkc3RbMV0gPSBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdlsxXSkpO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYSBhbmQgYiBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIHN1bSBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBhZGQkMyhhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBkc3RbMF0gPSBhWzBdICsgYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdICsgYlsxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWN0b3JzLCBzY2FsaW5nIHRoZSAybmQ7IGFzc3VtZXMgYSBhbmQgYiBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHNjYWxlIC0gQW1vdW50IHRvIHNjYWxlIGJcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBzdW0gb2YgYSArIGIgKiBzY2FsZS5cbiAqL1xuZnVuY3Rpb24gYWRkU2NhbGVkJDIoYSwgYiwgc2NhbGUsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIFRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdGhlIDIgdmVjdG9ycy5cbiAqL1xuZnVuY3Rpb24gYW5nbGUkMihhLCBiKSB7XG4gICAgY29uc3QgYXggPSBhWzBdO1xuICAgIGNvbnN0IGF5ID0gYVsxXTtcbiAgICBjb25zdCBieCA9IGFbMF07XG4gICAgY29uc3QgYnkgPSBhWzFdO1xuICAgIGNvbnN0IG1hZzEgPSBNYXRoLnNxcnQoYXggKiBheCArIGF5ICogYXkpO1xuICAgIGNvbnN0IG1hZzIgPSBNYXRoLnNxcnQoYnggKiBieCArIGJ5ICogYnkpO1xuICAgIGNvbnN0IG1hZyA9IG1hZzEgKiBtYWcyO1xuICAgIGNvbnN0IGNvc2luZSA9IG1hZyAmJiBkb3QkMyhhLCBiKSAvIG1hZztcbiAgICByZXR1cm4gTWF0aC5hY29zKGNvc2luZSk7XG59XG4vKipcbiAqIFN1YnRyYWN0cyB0d28gdmVjdG9ycy5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIGRpZmZlcmVuY2Ugb2YgYSBhbmQgYi5cbiAqL1xuZnVuY3Rpb24gc3VidHJhY3QkMyhhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBkc3RbMF0gPSBhWzBdIC0gYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdIC0gYlsxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBkaWZmZXJlbmNlIG9mIGEgYW5kIGIuXG4gKi9cbmNvbnN0IHN1YiQzID0gc3VidHJhY3QkMztcbi8qKlxuICogQ2hlY2sgaWYgMiB2ZWN0b3JzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHRydWUgaWYgdmVjdG9ycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDUoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT047XG59XG4vKipcbiAqIENoZWNrIGlmIDIgdmVjdG9ycyBhcmUgZXhhY3RseSBlcXVhbFxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZlY3RvcnMgYXJlIGV4YWN0bHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzJDUoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV07XG59XG4vKipcbiAqIFBlcmZvcm1zIGxpbmVhciBpbnRlcnBvbGF0aW9uIG9uIHR3byB2ZWN0b3JzLlxuICogR2l2ZW4gdmVjdG9ycyBhIGFuZCBiIGFuZCBpbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50IHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50LlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBsaW5lYXIgaW50ZXJwb2xhdGVkIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gbGVycCQzKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0ICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdCAqIChiWzFdIC0gYVsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUGVyZm9ybXMgbGluZWFyIGludGVycG9sYXRpb24gb24gdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgYW5kIGludGVycG9sYXRpb24gY29lZmZpY2llbnQgdmVjdG9yIHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50cyB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIGxpbmVhciBpbnRlcnBvbGF0ZWQgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBsZXJwViQyKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0WzBdICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdFsxXSAqIChiWzFdIC0gYVsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJuIG1heCB2YWx1ZXMgb2YgdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgcmV0dXJuc1xuICogW21heChhWzBdLCBiWzBdKSwgbWF4KGFbMV0sIGJbMV0pLCBtYXgoYVsyXSwgYlsyXSldLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1heCBjb21wb25lbnRzIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbWF4JDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJuIG1pbiB2YWx1ZXMgb2YgdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgcmV0dXJuc1xuICogW21pbihhWzBdLCBiWzBdKSwgbWluKGFbMV0sIGJbMV0pLCBtaW4oYVsyXSwgYlsyXSldLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1pbiBjb21wb25lbnRzIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbWluJDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5taW4oYVswXSwgYlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhIHNjYWxhci5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbXVsU2NhbGFyJDModiwgaywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gdlswXSAqIGs7XG4gICAgZHN0WzFdID0gdlsxXSAqIGs7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhIHNjYWxhci4gKHNhbWUgYXMgbXVsU2NhbGFyKVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGsgLSBUaGUgc2NhbGFyLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgdmVjdG9yLlxuICovXG5jb25zdCBzY2FsZSQ1ID0gbXVsU2NhbGFyJDM7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGRpdlNjYWxhciQzKHYsIGssIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IHZbMF0gLyBrO1xuICAgIGRzdFsxXSA9IHZbMV0gLyBrO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEludmVyc2UgYSB2ZWN0b3IuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGludmVydGVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gaW52ZXJzZSQ1KHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IDEgLyB2WzBdO1xuICAgIGRzdFsxXSA9IDEgLyB2WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEludmVydCBhIHZlY3Rvci4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJ0ZWQgdmVjdG9yLlxuICovXG5jb25zdCBpbnZlcnQkNCA9IGludmVyc2UkNTtcbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYm90aCB2ZWN0b3JzIGhhdmVcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdmVjdG9yIG9mIGEgY3Jvc3MgYi5cbiAqL1xuZnVuY3Rpb24gY3Jvc3MkMShhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigzKTtcbiAgICBjb25zdCB6ID0gYVswXSAqIGJbMV0gLSBhWzFdICogYlswXTtcbiAgICBkc3RbMF0gPSAwO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gejtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYm90aCB2ZWN0b3JzIGhhdmVcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRvdCBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIGRvdCQzKGEsIGIpIHtcbiAgICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbGVuZ3RoJDModikge1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSk7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aClcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHZlY3Rvci5cbiAqL1xuY29uc3QgbGVuJDMgPSBsZW5ndGgkMztcbi8qKlxuICogQ29tcHV0ZXMgdGhlIHNxdWFyZSBvZiB0aGUgbGVuZ3RoIG9mIHZlY3RvclxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGxlbmd0aFNxJDModikge1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgcmV0dXJuIHYwICogdjAgKyB2MSAqIHYxO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aFNxKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlblNxJDMgPSBsZW5ndGhTcSQzO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIHBvaW50c1xuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5mdW5jdGlvbiBkaXN0YW5jZSQyKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlKVxuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5jb25zdCBkaXN0JDIgPSBkaXN0YW5jZSQyO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VTcSQyKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlU3EpXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuY29uc3QgZGlzdFNxJDIgPSBkaXN0YW5jZVNxJDI7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgaXRzIEV1Y2xpZGVhbiBsZW5ndGggYW5kIHJldHVybnMgdGhlIHF1b3RpZW50LlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplJDModiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLnNxcnQodjAgKiB2MCArIHYxICogdjEpO1xuICAgIGlmIChsZW4gPiAwLjAwMDAxKSB7XG4gICAgICAgIGRzdFswXSA9IHYwIC8gbGVuO1xuICAgICAgICBkc3RbMV0gPSB2MSAvIGxlbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRzdFswXSA9IDA7XG4gICAgICAgIGRzdFsxXSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE5lZ2F0ZXMgYSB2ZWN0b3IuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgLXYuXG4gKi9cbmZ1bmN0aW9uIG5lZ2F0ZSQ0KHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IC12WzBdO1xuICAgIGRzdFsxXSA9IC12WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzIuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIHZlYzIuY3JlYXRlfSBhbmQge0BsaW5rIHZlYzIuc2V0fVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiB2LlxuICovXG5mdW5jdGlvbiBjb3B5JDUodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gdlswXTtcbiAgICBkc3RbMV0gPSB2WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsb25lcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzIuY29weX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgdmVjMi5jcmVhdGV9IGFuZCB7QGxpbmsgdmVjMi5zZXR9XG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIHYuXG4gKi9cbmNvbnN0IGNsb25lJDUgPSBjb3B5JDU7XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB2ZWN0b3Igb2YgcHJvZHVjdHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBtdWx0aXBseSQ1KGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKiBiWzBdO1xuICAgIGRzdFsxXSA9IGFbMV0gKiBiWzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC4gKHNhbWUgYXMgbXVsKVxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBwcm9kdWN0cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmNvbnN0IG11bCQ1ID0gbXVsdGlwbHkkNTtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBkaXZpZGUkMihhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBkc3RbMF0gPSBhWzBdIC8gYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdIC8gYlsxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBEaXZpZGVzIGEgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIChjb21wb25lbnQtd2lzZSk7IGFzc3VtZXMgYSBhbmRcbiAqIGIgaGF2ZSB0aGUgc2FtZSBsZW5ndGguIChzYW1lIGFzIGRpdmlkZSlcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB2ZWN0b3Igb2YgcXVvdGllbnRzIG9mIGVudHJpZXMgb2YgYSBhbmQgYi5cbiAqL1xuY29uc3QgZGl2JDIgPSBkaXZpZGUkMjtcbi8qKlxuICogQ3JlYXRlcyBhIHJhbmRvbSB1bml0IHZlY3RvciAqIHNjYWxlXG4gKiBAcGFyYW0gc2NhbGUgLSBEZWZhdWx0IDFcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcmFuZG9tIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gcmFuZG9tJDEoc2NhbGUgPSAxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBjb25zdCBhbmdsZSA9IE1hdGgucmFuZG9tKCkgKiAyICogTWF0aC5QSTtcbiAgICBkc3RbMF0gPSBNYXRoLmNvcyhhbmdsZSkgKiBzY2FsZTtcbiAgICBkc3RbMV0gPSBNYXRoLnNpbihhbmdsZSkgKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBaZXJvJ3MgYSB2ZWN0b3JcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgemVyb2VkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gemVybyQyKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IDA7XG4gICAgZHN0WzFdID0gMDtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiB0cmFuc2Zvcm0gVmVjMiBieSA0eDQgbWF0cml4XG4gKiBAcGFyYW0gdiAtIHRoZSB2ZWN0b3JcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBvcHRpb25hbCBWZWMyIHRvIHN0b3JlIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSB0cmFuc2Zvcm1lZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtTWF0NCQyKHYsIG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGRzdFswXSA9IHggKiBtWzBdICsgeSAqIG1bNF0gKyBtWzEyXTtcbiAgICBkc3RbMV0gPSB4ICogbVsxXSArIHkgKiBtWzVdICsgbVsxM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB2ZWM0IGJ5IDN4MyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0gdiAtIHRoZSB2ZWN0b3JcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBvcHRpb25hbCBWZWMyIHRvIHN0b3JlIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSB0cmFuc2Zvcm1lZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtTWF0MyQxKHYsIG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGRzdFswXSA9IG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdO1xuICAgIGRzdFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldO1xuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciB2ZWMySW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgY3JlYXRlOiBjcmVhdGUkNSxcbiAgICBzZXREZWZhdWx0VHlwZTogc2V0RGVmYXVsdFR5cGUkNixcbiAgICBmcm9tVmFsdWVzOiBmcm9tVmFsdWVzJDMsXG4gICAgc2V0OiBzZXQkNSxcbiAgICBjZWlsOiBjZWlsJDIsXG4gICAgZmxvb3I6IGZsb29yJDIsXG4gICAgcm91bmQ6IHJvdW5kJDIsXG4gICAgY2xhbXA6IGNsYW1wJDIsXG4gICAgYWRkOiBhZGQkMyxcbiAgICBhZGRTY2FsZWQ6IGFkZFNjYWxlZCQyLFxuICAgIGFuZ2xlOiBhbmdsZSQyLFxuICAgIHN1YnRyYWN0OiBzdWJ0cmFjdCQzLFxuICAgIHN1Yjogc3ViJDMsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSQ1LFxuICAgIGVxdWFsczogZXF1YWxzJDUsXG4gICAgbGVycDogbGVycCQzLFxuICAgIGxlcnBWOiBsZXJwViQyLFxuICAgIG1heDogbWF4JDIsXG4gICAgbWluOiBtaW4kMixcbiAgICBtdWxTY2FsYXI6IG11bFNjYWxhciQzLFxuICAgIHNjYWxlOiBzY2FsZSQ1LFxuICAgIGRpdlNjYWxhcjogZGl2U2NhbGFyJDMsXG4gICAgaW52ZXJzZTogaW52ZXJzZSQ1LFxuICAgIGludmVydDogaW52ZXJ0JDQsXG4gICAgY3Jvc3M6IGNyb3NzJDEsXG4gICAgZG90OiBkb3QkMyxcbiAgICBsZW5ndGg6IGxlbmd0aCQzLFxuICAgIGxlbjogbGVuJDMsXG4gICAgbGVuZ3RoU3E6IGxlbmd0aFNxJDMsXG4gICAgbGVuU3E6IGxlblNxJDMsXG4gICAgZGlzdGFuY2U6IGRpc3RhbmNlJDIsXG4gICAgZGlzdDogZGlzdCQyLFxuICAgIGRpc3RhbmNlU3E6IGRpc3RhbmNlU3EkMixcbiAgICBkaXN0U3E6IGRpc3RTcSQyLFxuICAgIG5vcm1hbGl6ZTogbm9ybWFsaXplJDMsXG4gICAgbmVnYXRlOiBuZWdhdGUkNCxcbiAgICBjb3B5OiBjb3B5JDUsXG4gICAgY2xvbmU6IGNsb25lJDUsXG4gICAgbXVsdGlwbHk6IG11bHRpcGx5JDUsXG4gICAgbXVsOiBtdWwkNSxcbiAgICBkaXZpZGU6IGRpdmlkZSQyLFxuICAgIGRpdjogZGl2JDIsXG4gICAgcmFuZG9tOiByYW5kb20kMSxcbiAgICB6ZXJvOiB6ZXJvJDIsXG4gICAgdHJhbnNmb3JtTWF0NDogdHJhbnNmb3JtTWF0NCQyLFxuICAgIHRyYW5zZm9ybU1hdDM6IHRyYW5zZm9ybU1hdDMkMVxufSk7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbi8qKlxuICogM3gzIE1hdHJpeCBtYXRoIG1hdGggZnVuY3Rpb25zLlxuICpcbiAqIEFsbW9zdCBhbGwgZnVuY3Rpb25zIHRha2UgYW4gb3B0aW9uYWwgYGRzdGAgYXJndW1lbnQuIElmIGl0IGlzIG5vdCBwYXNzZWQgaW4gdGhlXG4gKiBmdW5jdGlvbnMgd2lsbCBjcmVhdGUgYSBuZXcgbWF0cml4LiBJbiBvdGhlciB3b3JkcyB5b3UgY2FuIGRvIHRoaXNcbiAqXG4gKiAgICAgY29uc3QgbWF0ID0gbWF0My50cmFuc2xhdGlvbihbMSwgMiwgM10pOyAgLy8gQ3JlYXRlcyBhIG5ldyB0cmFuc2xhdGlvbiBtYXRyaXhcbiAqXG4gKiBvclxuICpcbiAqICAgICBjb25zdCBtYXQgPSBtYXQzLmNyZWF0ZSgpO1xuICogICAgIG1hdDMudHJhbnNsYXRpb24oWzEsIDIsIDNdLCBtYXQpOyAgLy8gUHV0cyB0cmFuc2xhdGlvbiBtYXRyaXggaW4gbWF0LlxuICpcbiAqIFRoZSBmaXJzdCBzdHlsZSBpcyBvZnRlbiBlYXNpZXIgYnV0IGRlcGVuZGluZyBvbiB3aGVyZSBpdCdzIHVzZWQgaXQgZ2VuZXJhdGVzIGdhcmJhZ2Ugd2hlcmVcbiAqIGFzIHRoZXJlIGlzIGFsbW9zdCBuZXZlciBhbGxvY2F0aW9uIHdpdGggdGhlIHNlY29uZCBzdHlsZS5cbiAqXG4gKiBJdCBpcyBhbHdheXMgc2F2ZSB0byBwYXNzIGFueSBtYXRyaXggYXMgdGhlIGRlc3RpbmF0aW9uLiBTbyBmb3IgZXhhbXBsZVxuICpcbiAqICAgICBjb25zdCBtYXQgPSBtYXQzLmlkZW50aXR5KCk7XG4gKiAgICAgY29uc3QgdHJhbnMgPSBtYXQzLnRyYW5zbGF0aW9uKFsxLCAyLCAzXSk7XG4gKiAgICAgbWF0My5tdWx0aXBseShtYXQsIHRyYW5zLCBtYXQpOyAgLy8gTXVsdGlwbGllcyBtYXQgKiB0cmFucyBhbmQgcHV0cyByZXN1bHQgaW4gbWF0LlxuICpcbiAqL1xubGV0IE1hdFR5cGUkMSA9IEZsb2F0MzJBcnJheTtcbi8vIFRoaXMgbWVzcyBpcyBiZWNhdXNlIHdpdGggTWF0MyB3ZSBoYXZlIDMgdW51c2VkIGVsZW1lbnRzLlxuLy8gRm9yIEZsb2F0MzJBcnJheSBhbmQgRmxvYXQ2NEFycmF5IHRoYXQncyBub3QgYW4gaXNzdWVcbi8vIGJ1dCBmb3IgQXJyYXkgaXQncyB0cm91Ymxlc29tZVxuY29uc3QgY3Rvck1hcCA9IG5ldyBNYXAoW1xuICAgIFtGbG9hdDMyQXJyYXksICgpID0+IG5ldyBGbG9hdDMyQXJyYXkoMTIpXSxcbiAgICBbRmxvYXQ2NEFycmF5LCAoKSA9PiBuZXcgRmxvYXQ2NEFycmF5KDEyKV0sXG4gICAgW0FycmF5LCAoKSA9PiBuZXcgQXJyYXkoMTIpLmZpbGwoMCldLFxuXSk7XG5sZXQgbmV3TWF0MyA9IGN0b3JNYXAuZ2V0KEZsb2F0MzJBcnJheSk7XG4vKipcbiAqIFNldHMgdGhlIHR5cGUgdGhpcyBsaWJyYXJ5IGNyZWF0ZXMgZm9yIGEgTWF0M1xuICogQHBhcmFtIGN0b3IgLSB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlLiBFaXRoZXIgYEZsb2F0MzJBcnJheWAsIGBGbG9hdDY0QXJyYXlgLCBvciBgQXJyYXlgXG4gKiBAcmV0dXJucyBwcmV2aW91cyBjb25zdHJ1Y3RvciBmb3IgTWF0M1xuICovXG5mdW5jdGlvbiBzZXREZWZhdWx0VHlwZSQ1KGN0b3IpIHtcbiAgICBjb25zdCBvbGRUeXBlID0gTWF0VHlwZSQxO1xuICAgIE1hdFR5cGUkMSA9IGN0b3I7XG4gICAgbmV3TWF0MyA9IGN0b3JNYXAuZ2V0KGN0b3IpO1xuICAgIHJldHVybiBvbGRUeXBlO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBNYXQzIGZyb20gdmFsdWVzXG4gKlxuICogTm90ZTogU2luY2UgcGFzc2luZyBpbiBhIHJhdyBKYXZhU2NyaXB0IGFycmF5XG4gKiBpcyB2YWxpZCBpbiBhbGwgY2lyY3Vtc3RhbmNlcywgaWYgeW91IHdhbnQgdG9cbiAqIGZvcmNlIGEgSmF2YVNjcmlwdCBhcnJheSBpbnRvIGEgTWF0MydzIHNwZWNpZmllZCB0eXBlXG4gKiBpdCB3b3VsZCBiZSBmYXN0ZXIgdG8gdXNlXG4gKlxuICogYGBgXG4gKiBjb25zdCBtID0gbWF0My5jbG9uZShzb21lSlNBcnJheSk7XG4gKiBgYGBcbiAqXG4gKiBOb3RlOiBhIGNvbnNlcXVlbmNlIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBpZiB5b3VyIE1hdDNUeXBlID0gYEFycmF5YFxuICogaW5zdGVhZCBvZiBgRmxvYXQzMkFycmF5YCBvciBgRmxvYXQ2NEFycmF5YCB0aGVuIGFueSB2YWx1ZXMgeW91XG4gKiBkb24ndCBwYXNzIGluIHdpbGwgYmUgdW5kZWZpbmVkLiBVc3VhbGx5IHRoaXMgaXMgbm90IGFuIGlzc3VlIHNpbmNlXG4gKiAoYSkgdXNpbmcgYEFycmF5YCBpcyByYXJlIGFuZCAoYikgdXNpbmcgYG1hdDMuY3JlYXRlYCBpcyB1c3VhbGx5IHVzZWRcbiAqIHRvIGNyZWF0ZSBhIE1hdDMgdG8gYmUgZmlsbGVkIG91dCBhcyBpblxuICpcbiAqIGBgYFxuICogY29uc3QgbSA9IG1hdDMuY3JlYXRlKCk7XG4gKiBtYXQzLnBlcnNwZWN0aXZlKGZvdiwgYXNwZWN0LCBuZWFyLCBmYXIsIG0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHYwIC0gdmFsdWUgZm9yIGVsZW1lbnQgMFxuICogQHBhcmFtIHYxIC0gdmFsdWUgZm9yIGVsZW1lbnQgMVxuICogQHBhcmFtIHYyIC0gdmFsdWUgZm9yIGVsZW1lbnQgMlxuICogQHBhcmFtIHYzIC0gdmFsdWUgZm9yIGVsZW1lbnQgM1xuICogQHBhcmFtIHY0IC0gdmFsdWUgZm9yIGVsZW1lbnQgNFxuICogQHBhcmFtIHY1IC0gdmFsdWUgZm9yIGVsZW1lbnQgNVxuICogQHBhcmFtIHY2IC0gdmFsdWUgZm9yIGVsZW1lbnQgNlxuICogQHBhcmFtIHY3IC0gdmFsdWUgZm9yIGVsZW1lbnQgN1xuICogQHBhcmFtIHY4IC0gdmFsdWUgZm9yIGVsZW1lbnQgOFxuICogQHJldHVybnMgbWF0cml4IGNyZWF0ZWQgZnJvbSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZSQ0KHYwLCB2MSwgdjIsIHYzLCB2NCwgdjUsIHY2LCB2NywgdjgpIHtcbiAgICBjb25zdCBkc3QgPSBuZXdNYXQzKCk7XG4gICAgLy8gdG8gbWFrZSB0aGUgYXJyYXkgaG9tb2dlbm91c1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBpZiAodjAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkc3RbMF0gPSB2MDtcbiAgICAgICAgaWYgKHYxICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzdFsxXSA9IHYxO1xuICAgICAgICAgICAgaWYgKHYyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkc3RbMl0gPSB2MjtcbiAgICAgICAgICAgICAgICBpZiAodjMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBkc3RbNF0gPSB2MztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHY0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs1XSA9IHY0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY1ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbNl0gPSB2NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbOF0gPSB2NjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs5XSA9IHY3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbMTBdID0gdjg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU2V0cyB0aGUgdmFsdWVzIG9mIGEgTWF0M1xuICogQWxzbyBzZWUge0BsaW5rIG1hdDMuY3JlYXRlfSBhbmQge0BsaW5rIG1hdDMuY29weX1cbiAqXG4gKiBAcGFyYW0gdjAgLSB2YWx1ZSBmb3IgZWxlbWVudCAwXG4gKiBAcGFyYW0gdjEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxXG4gKiBAcGFyYW0gdjIgLSB2YWx1ZSBmb3IgZWxlbWVudCAyXG4gKiBAcGFyYW0gdjMgLSB2YWx1ZSBmb3IgZWxlbWVudCAzXG4gKiBAcGFyYW0gdjQgLSB2YWx1ZSBmb3IgZWxlbWVudCA0XG4gKiBAcGFyYW0gdjUgLSB2YWx1ZSBmb3IgZWxlbWVudCA1XG4gKiBAcGFyYW0gdjYgLSB2YWx1ZSBmb3IgZWxlbWVudCA2XG4gKiBAcGFyYW0gdjcgLSB2YWx1ZSBmb3IgZWxlbWVudCA3XG4gKiBAcGFyYW0gdjggLSB2YWx1ZSBmb3IgZWxlbWVudCA4XG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgTWF0MyBzZXQgZnJvbSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIHNldCQ0KHYwLCB2MSwgdjIsIHYzLCB2NCwgdjUsIHY2LCB2NywgdjgsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gdjA7XG4gICAgZHN0WzFdID0gdjE7XG4gICAgZHN0WzJdID0gdjI7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB2MztcbiAgICBkc3RbNV0gPSB2NDtcbiAgICBkc3RbNl0gPSB2NTtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHY2O1xuICAgIGRzdFs5XSA9IHY3O1xuICAgIGRzdFsxMF0gPSB2ODtcbiAgICBkc3RbMTFdID0gMDtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgTWF0MyBmcm9tIHRoZSB1cHBlciBsZWZ0IDN4MyBwYXJ0IG9mIGEgTWF0NFxuICogQHBhcmFtIG00IC0gc291cmNlIG1hdHJpeFxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDMgbWFkZSBmcm9tIG00XG4gKi9cbmZ1bmN0aW9uIGZyb21NYXQ0KG00LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGRzdFswXSA9IG00WzBdO1xuICAgIGRzdFsxXSA9IG00WzFdO1xuICAgIGRzdFsyXSA9IG00WzJdO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gbTRbNF07XG4gICAgZHN0WzVdID0gbTRbNV07XG4gICAgZHN0WzZdID0gbTRbNl07XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSBtNFs4XTtcbiAgICBkc3RbOV0gPSBtNFs5XTtcbiAgICBkc3RbMTBdID0gbTRbMTBdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBNYXQzIHJvdGF0aW9uIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvblxuICogQHBhcmFtIHEgLSBxdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDMgbWFkZSBmcm9tIHFcbiAqL1xuZnVuY3Rpb24gZnJvbVF1YXQkMShxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IHggPSBxWzBdO1xuICAgIGNvbnN0IHkgPSBxWzFdO1xuICAgIGNvbnN0IHogPSBxWzJdO1xuICAgIGNvbnN0IHcgPSBxWzNdO1xuICAgIGNvbnN0IHgyID0geCArIHg7XG4gICAgY29uc3QgeTIgPSB5ICsgeTtcbiAgICBjb25zdCB6MiA9IHogKyB6O1xuICAgIGNvbnN0IHh4ID0geCAqIHgyO1xuICAgIGNvbnN0IHl4ID0geSAqIHgyO1xuICAgIGNvbnN0IHl5ID0geSAqIHkyO1xuICAgIGNvbnN0IHp4ID0geiAqIHgyO1xuICAgIGNvbnN0IHp5ID0geiAqIHkyO1xuICAgIGNvbnN0IHp6ID0geiAqIHoyO1xuICAgIGNvbnN0IHd4ID0gdyAqIHgyO1xuICAgIGNvbnN0IHd5ID0gdyAqIHkyO1xuICAgIGNvbnN0IHd6ID0gdyAqIHoyO1xuICAgIGRzdFswXSA9IDEgLSB5eSAtIHp6O1xuICAgIGRzdFsxXSA9IHl4ICsgd3o7XG4gICAgZHN0WzJdID0genggLSB3eTtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IHl4IC0gd3o7XG4gICAgZHN0WzVdID0gMSAtIHh4IC0geno7XG4gICAgZHN0WzZdID0genkgKyB3eDtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHp4ICsgd3k7XG4gICAgZHN0WzldID0genkgLSB3eDtcbiAgICBkc3RbMTBdID0gMSAtIHh4IC0geXk7XG4gICAgZHN0WzExXSA9IDA7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTmVnYXRlcyBhIG1hdHJpeC5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyAtbS5cbiAqL1xuZnVuY3Rpb24gbmVnYXRlJDMobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBkc3RbMF0gPSAtbVswXTtcbiAgICBkc3RbMV0gPSAtbVsxXTtcbiAgICBkc3RbMl0gPSAtbVsyXTtcbiAgICBkc3RbNF0gPSAtbVs0XTtcbiAgICBkc3RbNV0gPSAtbVs1XTtcbiAgICBkc3RbNl0gPSAtbVs2XTtcbiAgICBkc3RbOF0gPSAtbVs4XTtcbiAgICBkc3RbOV0gPSAtbVs5XTtcbiAgICBkc3RbMTBdID0gLW1bMTBdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIG1hdHJpeC4gKHNhbWUgYXMge0BsaW5rIG1hdDMuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIG1hdDMuY3JlYXRlfSBhbmQge0BsaW5rIG1hdDMuc2V0fVxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIFRoZSBtYXRyaXguIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIGNvcHkgb2YgbS5cbiAqL1xuZnVuY3Rpb24gY29weSQ0KG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gbVswXTtcbiAgICBkc3RbMV0gPSBtWzFdO1xuICAgIGRzdFsyXSA9IG1bMl07XG4gICAgZHN0WzRdID0gbVs0XTtcbiAgICBkc3RbNV0gPSBtWzVdO1xuICAgIGRzdFs2XSA9IG1bNl07XG4gICAgZHN0WzhdID0gbVs4XTtcbiAgICBkc3RbOV0gPSBtWzldO1xuICAgIGRzdFsxMF0gPSBtWzEwXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb3BpZXMgYSBtYXRyaXggKHNhbWUgYXMge0BsaW5rIG1hdDMuY29weX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgbWF0My5jcmVhdGV9IGFuZCB7QGxpbmsgbWF0My5zZXR9XG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gVGhlIG1hdHJpeC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiBtLlxuICovXG5jb25zdCBjbG9uZSQ0ID0gY29weSQ0O1xuLyoqXG4gKiBDaGVjayBpZiAyIG1hdHJpY2VzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSBPcGVyYW5kIG1hdHJpeC5cbiAqIEBwYXJhbSBiIE9wZXJhbmQgbWF0cml4LlxuICogQHJldHVybnMgdHJ1ZSBpZiBtYXRyaWNlcyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDQoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsyXSAtIGJbMl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzRdIC0gYls0XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbNV0gLSBiWzVdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVs2XSAtIGJbNl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzhdIC0gYls4XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbOV0gLSBiWzldKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsxMF0gLSBiWzEwXSkgPCBFUFNJTE9OO1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIG1hdHJpY2VzIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSBPcGVyYW5kIG1hdHJpeC5cbiAqIEBwYXJhbSBiIE9wZXJhbmQgbWF0cml4LlxuICogQHJldHVybnMgdHJ1ZSBpZiBtYXRyaWNlcyBhcmUgZXhhY3RseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHMkNChhLCBiKSB7XG4gICAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiZcbiAgICAgICAgYVsxXSA9PT0gYlsxXSAmJlxuICAgICAgICBhWzJdID09PSBiWzJdICYmXG4gICAgICAgIGFbNF0gPT09IGJbNF0gJiZcbiAgICAgICAgYVs1XSA9PT0gYls1XSAmJlxuICAgICAgICBhWzZdID09PSBiWzZdICYmXG4gICAgICAgIGFbOF0gPT09IGJbOF0gJiZcbiAgICAgICAgYVs5XSA9PT0gYls5XSAmJlxuICAgICAgICBhWzEwXSA9PT0gYlsxMF07XG59XG4vKipcbiAqIENyZWF0ZXMgYSAzLWJ5LTMgaWRlbnRpdHkgbWF0cml4LlxuICpcbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIDMtYnktMyBpZGVudGl0eSBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5JDIoZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBkc3RbMF0gPSAxO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDE7XG4gICAgZHN0WzZdID0gMDtcbiAgICBkc3RbOF0gPSAwO1xuICAgIGRzdFs5XSA9IDA7XG4gICAgZHN0WzEwXSA9IDE7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVGFrZXMgdGhlIHRyYW5zcG9zZSBvZiBhIG1hdHJpeC5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNwb3NlIG9mIG0uXG4gKi9cbmZ1bmN0aW9uIHRyYW5zcG9zZSQxKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgaWYgKGRzdCA9PT0gbSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgLy8gMCAxIDJcbiAgICAgICAgLy8gNCA1IDZcbiAgICAgICAgLy8gOCA5IDEwXG4gICAgICAgIHQgPSBtWzFdO1xuICAgICAgICBtWzFdID0gbVs0XTtcbiAgICAgICAgbVs0XSA9IHQ7XG4gICAgICAgIHQgPSBtWzJdO1xuICAgICAgICBtWzJdID0gbVs4XTtcbiAgICAgICAgbVs4XSA9IHQ7XG4gICAgICAgIHQgPSBtWzZdO1xuICAgICAgICBtWzZdID0gbVs5XTtcbiAgICAgICAgbVs5XSA9IHQ7XG4gICAgICAgIHJldHVybiBkc3Q7XG4gICAgfVxuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGRzdFswXSA9IG0wMDtcbiAgICBkc3RbMV0gPSBtMTA7XG4gICAgZHN0WzJdID0gbTIwO1xuICAgIGRzdFs0XSA9IG0wMTtcbiAgICBkc3RbNV0gPSBtMTE7XG4gICAgZHN0WzZdID0gbTIxO1xuICAgIGRzdFs4XSA9IG0wMjtcbiAgICBkc3RbOV0gPSBtMTI7XG4gICAgZHN0WzEwXSA9IG0yMjtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgaW52ZXJzZSBvZiBhIDMtYnktMyBtYXRyaXguXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGludmVyc2Ugb2YgbS5cbiAqL1xuZnVuY3Rpb24gaW52ZXJzZSQ0KG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgY29uc3QgbTAwID0gbVswICogNCArIDBdO1xuICAgIGNvbnN0IG0wMSA9IG1bMCAqIDQgKyAxXTtcbiAgICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTIwID0gbVsyICogNCArIDBdO1xuICAgIGNvbnN0IG0yMSA9IG1bMiAqIDQgKyAxXTtcbiAgICBjb25zdCBtMjIgPSBtWzIgKiA0ICsgMl07XG4gICAgY29uc3QgYjAxID0gbTIyICogbTExIC0gbTEyICogbTIxO1xuICAgIGNvbnN0IGIxMSA9IC1tMjIgKiBtMTAgKyBtMTIgKiBtMjA7XG4gICAgY29uc3QgYjIxID0gbTIxICogbTEwIC0gbTExICogbTIwO1xuICAgIGNvbnN0IGludkRldCA9IDEgLyAobTAwICogYjAxICsgbTAxICogYjExICsgbTAyICogYjIxKTtcbiAgICBkc3RbMF0gPSBiMDEgKiBpbnZEZXQ7XG4gICAgZHN0WzFdID0gKC1tMjIgKiBtMDEgKyBtMDIgKiBtMjEpICogaW52RGV0O1xuICAgIGRzdFsyXSA9IChtMTIgKiBtMDEgLSBtMDIgKiBtMTEpICogaW52RGV0O1xuICAgIGRzdFs0XSA9IGIxMSAqIGludkRldDtcbiAgICBkc3RbNV0gPSAobTIyICogbTAwIC0gbTAyICogbTIwKSAqIGludkRldDtcbiAgICBkc3RbNl0gPSAoLW0xMiAqIG0wMCArIG0wMiAqIG0xMCkgKiBpbnZEZXQ7XG4gICAgZHN0WzhdID0gYjIxICogaW52RGV0O1xuICAgIGRzdFs5XSA9ICgtbTIxICogbTAwICsgbTAxICogbTIwKSAqIGludkRldDtcbiAgICBkc3RbMTBdID0gKG0xMSAqIG0wMCAtIG0wMSAqIG0xMCkgKiBpbnZEZXQ7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ29tcHV0ZSB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gdGhlIG1hdHJpeFxuICogQHJldHVybnMgdGhlIGRldGVybWluYW50XG4gKi9cbmZ1bmN0aW9uIGRldGVybWluYW50JDEobSkge1xuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIHJldHVybiBtMDAgKiAobTExICogbTIyIC0gbTIxICogbTEyKSAtXG4gICAgICAgIG0xMCAqIChtMDEgKiBtMjIgLSBtMjEgKiBtMDIpICtcbiAgICAgICAgbTIwICogKG0wMSAqIG0xMiAtIG0xMSAqIG0wMik7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBpbnZlcnNlIG9mIGEgMy1ieS0zIG1hdHJpeC4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJzZSBvZiBtLlxuICovXG5jb25zdCBpbnZlcnQkMyA9IGludmVyc2UkNDtcbi8qKlxuICogTXVsdGlwbGllcyB0d28gMy1ieS0zIG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHRcbiAqIEBwYXJhbSBhIC0gVGhlIG1hdHJpeCBvbiB0aGUgbGVmdC5cbiAqIEBwYXJhbSBiIC0gVGhlIG1hdHJpeCBvbiB0aGUgcmlnaHQuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCBwcm9kdWN0IG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5JDQoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBjb25zdCBhMDAgPSBhWzBdO1xuICAgIGNvbnN0IGEwMSA9IGFbMV07XG4gICAgY29uc3QgYTAyID0gYVsyXTtcbiAgICBjb25zdCBhMTAgPSBhWzQgKyAwXTtcbiAgICBjb25zdCBhMTEgPSBhWzQgKyAxXTtcbiAgICBjb25zdCBhMTIgPSBhWzQgKyAyXTtcbiAgICBjb25zdCBhMjAgPSBhWzggKyAwXTtcbiAgICBjb25zdCBhMjEgPSBhWzggKyAxXTtcbiAgICBjb25zdCBhMjIgPSBhWzggKyAyXTtcbiAgICBjb25zdCBiMDAgPSBiWzBdO1xuICAgIGNvbnN0IGIwMSA9IGJbMV07XG4gICAgY29uc3QgYjAyID0gYlsyXTtcbiAgICBjb25zdCBiMTAgPSBiWzQgKyAwXTtcbiAgICBjb25zdCBiMTEgPSBiWzQgKyAxXTtcbiAgICBjb25zdCBiMTIgPSBiWzQgKyAyXTtcbiAgICBjb25zdCBiMjAgPSBiWzggKyAwXTtcbiAgICBjb25zdCBiMjEgPSBiWzggKyAxXTtcbiAgICBjb25zdCBiMjIgPSBiWzggKyAyXTtcbiAgICBkc3RbMF0gPSBhMDAgKiBiMDAgKyBhMTAgKiBiMDEgKyBhMjAgKiBiMDI7XG4gICAgZHN0WzFdID0gYTAxICogYjAwICsgYTExICogYjAxICsgYTIxICogYjAyO1xuICAgIGRzdFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMjtcbiAgICBkc3RbNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTI7XG4gICAgZHN0WzVdID0gYTAxICogYjEwICsgYTExICogYjExICsgYTIxICogYjEyO1xuICAgIGRzdFs2XSA9IGEwMiAqIGIxMCArIGExMiAqIGIxMSArIGEyMiAqIGIxMjtcbiAgICBkc3RbOF0gPSBhMDAgKiBiMjAgKyBhMTAgKiBiMjEgKyBhMjAgKiBiMjI7XG4gICAgZHN0WzldID0gYTAxICogYjIwICsgYTExICogYjIxICsgYTIxICogYjIyO1xuICAgIGRzdFsxMF0gPSBhMDIgKiBiMjAgKyBhMTIgKiBiMjEgKyBhMjIgKiBiMjI7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gMy1ieS0zIG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHQgKHNhbWUgYXMgbXVsdGlwbHkpXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXggb24gdGhlIGxlZnQuXG4gKiBAcGFyYW0gYiAtIFRoZSBtYXRyaXggb24gdGhlIHJpZ2h0LlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtYXRyaXggcHJvZHVjdCBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBtdWwkNCA9IG11bHRpcGx5JDQ7XG4vKipcbiAqIFNldHMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDMtYnktMyBtYXRyaXggdG8gdGhlIGdpdmVuXG4gKiB2ZWN0b3IuXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIHRyYW5zbGF0aW9uIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0VHJhbnNsYXRpb24kMShhLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgaWRlbnRpdHkkMigpO1xuICAgIGlmIChhICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzBdID0gYVswXTtcbiAgICAgICAgZHN0WzFdID0gYVsxXTtcbiAgICAgICAgZHN0WzJdID0gYVsyXTtcbiAgICAgICAgZHN0WzRdID0gYVs0XTtcbiAgICAgICAgZHN0WzVdID0gYVs1XTtcbiAgICAgICAgZHN0WzZdID0gYVs2XTtcbiAgICB9XG4gICAgZHN0WzhdID0gdlswXTtcbiAgICBkc3RbOV0gPSB2WzFdO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDMtYnktMyBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzXG4gKiBlbnRyaWVzLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24kMihtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgY3JlYXRlJDUoKTtcbiAgICBkc3RbMF0gPSBtWzhdO1xuICAgIGRzdFsxXSA9IG1bOV07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJucyBhbiBheGlzIG9mIGEgM3gzIG1hdHJpeCBhcyBhIHZlY3RvciB3aXRoIDIgZW50cmllc1xuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGF4aXMgLSBUaGUgYXhpcyAwID0geCwgMSA9IHksXG4gKiBAcmV0dXJucyBUaGUgYXhpcyBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXhpcyQyKG0sIGF4aXMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkNSgpO1xuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFswXSA9IG1bb2ZmICsgMF07XG4gICAgZHN0WzFdID0gbVtvZmYgKyAxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTZXRzIGFuIGF4aXMgb2YgYSAzeDMgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggMiBlbnRyaWVzXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIHRoZSBheGlzIHZlY3RvclxuICogQHBhcmFtIGF4aXMgLSBUaGUgYXhpcyAgMCA9IHgsIDEgPSB5O1xuICogQHBhcmFtIGRzdCAtIFRoZSBtYXRyaXggdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIGF4aXMgc2V0LlxuICovXG5mdW5jdGlvbiBzZXRBeGlzJDEobSwgdiwgYXhpcywgZHN0KSB7XG4gICAgaWYgKGRzdCAhPT0gbSkge1xuICAgICAgICBkc3QgPSBjb3B5JDQobSwgZHN0KTtcbiAgICB9XG4gICAgY29uc3Qgb2ZmID0gYXhpcyAqIDQ7XG4gICAgZHN0W29mZiArIDBdID0gdlswXTtcbiAgICBkc3Rbb2ZmICsgMV0gPSB2WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgY29tcG9uZW50IG9mIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gVGhlIE1hdHJpeFxuICogQHBhcmFtIGRzdCAtIFRoZSB2ZWN0b3IgdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICovXG5mdW5jdGlvbiBnZXRTY2FsaW5nJDIobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IGNyZWF0ZSQ1KCk7XG4gICAgY29uc3QgeHggPSBtWzBdO1xuICAgIGNvbnN0IHh5ID0gbVsxXTtcbiAgICBjb25zdCB5eCA9IG1bNF07XG4gICAgY29uc3QgeXkgPSBtWzVdO1xuICAgIGRzdFswXSA9IE1hdGguc3FydCh4eCAqIHh4ICsgeHkgKiB4eSk7XG4gICAgZHN0WzFdID0gTWF0aC5zcXJ0KHl4ICogeXggKyB5eSAqIHl5KTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgMy1ieS0zIG1hdHJpeCB3aGljaCB0cmFuc2xhdGVzIGJ5IHRoZSBnaXZlbiB2ZWN0b3Igdi5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3RvciBieSB3aGljaCB0byB0cmFuc2xhdGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHRyYW5zbGF0aW9uIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gdHJhbnNsYXRpb24kMSh2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGRzdFswXSA9IDE7XG4gICAgZHN0WzFdID0gMDtcbiAgICBkc3RbMl0gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gMTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs4XSA9IHZbMF07XG4gICAgZHN0WzldID0gdlsxXTtcbiAgICBkc3RbMTBdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBnaXZlbiAzLWJ5LTMgbWF0cml4IGJ5IHRoZSBnaXZlbiB2ZWN0b3Igdi5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3RvciBieSB3aGljaCB0byB0cmFuc2xhdGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHRyYW5zbGF0ZWQgbWF0cml4LlxuICovXG5mdW5jdGlvbiB0cmFuc2xhdGUkMShtLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgbTAwID0gbVswXTtcbiAgICBjb25zdCBtMDEgPSBtWzFdO1xuICAgIGNvbnN0IG0wMiA9IG1bMl07XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTIwID0gbVsyICogNCArIDBdO1xuICAgIGNvbnN0IG0yMSA9IG1bMiAqIDQgKyAxXTtcbiAgICBjb25zdCBtMjIgPSBtWzIgKiA0ICsgMl07XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbMF0gPSBtMDA7XG4gICAgICAgIGRzdFsxXSA9IG0wMTtcbiAgICAgICAgZHN0WzJdID0gbTAyO1xuICAgICAgICBkc3RbNF0gPSBtMTA7XG4gICAgICAgIGRzdFs1XSA9IG0xMTtcbiAgICAgICAgZHN0WzZdID0gbTEyO1xuICAgIH1cbiAgICBkc3RbOF0gPSBtMDAgKiB2MCArIG0xMCAqIHYxICsgbTIwO1xuICAgIGRzdFs5XSA9IG0wMSAqIHYwICsgbTExICogdjEgKyBtMjE7XG4gICAgZHN0WzEwXSA9IG0wMiAqIHYwICsgbTEyICogdjEgKyBtMjI7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDMtYnktMyBtYXRyaXggd2hpY2ggcm90YXRlcyAgYnkgdGhlIGdpdmVuIGFuZ2xlLlxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHJvdGF0aW9uIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcm90YXRpb24kMShhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG4gICAgZHN0WzBdID0gYztcbiAgICBkc3RbMV0gPSBzO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzRdID0gLXM7XG4gICAgZHN0WzVdID0gYztcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs4XSA9IDA7XG4gICAgZHN0WzldID0gMDtcbiAgICBkc3RbMTBdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSb3RhdGVzIHRoZSBnaXZlbiAzLWJ5LTMgbWF0cml4ICBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHJvdGF0ZSQxKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBkc3RbMF0gPSBjICogbTAwICsgcyAqIG0xMDtcbiAgICBkc3RbMV0gPSBjICogbTAxICsgcyAqIG0xMTtcbiAgICBkc3RbMl0gPSBjICogbTAyICsgcyAqIG0xMjtcbiAgICBkc3RbNF0gPSBjICogbTEwIC0gcyAqIG0wMDtcbiAgICBkc3RbNV0gPSBjICogbTExIC0gcyAqIG0wMTtcbiAgICBkc3RbNl0gPSBjICogbTEyIC0gcyAqIG0wMjtcbiAgICBpZiAobSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFs4XSA9IG1bOF07XG4gICAgICAgIGRzdFs5XSA9IG1bOV07XG4gICAgICAgIGRzdFsxMF0gPSBtWzEwXTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDMtYnktMyBtYXRyaXggd2hpY2ggc2NhbGVzIGluIGVhY2ggZGltZW5zaW9uIGJ5IGFuIGFtb3VudCBnaXZlbiBieVxuICogdGhlIGNvcnJlc3BvbmRpbmcgZW50cnkgaW4gdGhlIGdpdmVuIHZlY3RvcjsgYXNzdW1lcyB0aGUgdmVjdG9yIGhhcyB0aHJlZVxuICogZW50cmllcy5cbiAqIEBwYXJhbSB2IC0gQSB2ZWN0b3Igb2ZcbiAqICAgICAyIGVudHJpZXMgc3BlY2lmeWluZyB0aGUgZmFjdG9yIGJ5IHdoaWNoIHRvIHNjYWxlIGluIGVhY2ggZGltZW5zaW9uLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsaW5nIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gc2NhbGluZyQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gdlswXTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSB2WzFdO1xuICAgIGRzdFs2XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gMy1ieS0zIG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhbiBhbW91bnRcbiAqIGdpdmVuIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGVudHJ5IGluIHRoZSBnaXZlbiB2ZWN0b3I7IGFzc3VtZXMgdGhlIHZlY3RvciBoYXNcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXggdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0gdiAtIEEgdmVjdG9yIG9mIDIgZW50cmllcyBzcGVjaWZ5aW5nIHRoZVxuICogICAgIGZhY3RvciBieSB3aGljaCB0byBzY2FsZSBpbiBlYWNoIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gc2NhbGUkNChtLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgZHN0WzBdID0gdjAgKiBtWzAgKiA0ICsgMF07XG4gICAgZHN0WzFdID0gdjAgKiBtWzAgKiA0ICsgMV07XG4gICAgZHN0WzJdID0gdjAgKiBtWzAgKiA0ICsgMl07XG4gICAgZHN0WzRdID0gdjEgKiBtWzEgKiA0ICsgMF07XG4gICAgZHN0WzVdID0gdjEgKiBtWzEgKiA0ICsgMV07XG4gICAgZHN0WzZdID0gdjEgKiBtWzEgKiA0ICsgMl07XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbOF0gPSBtWzhdO1xuICAgICAgICBkc3RbOV0gPSBtWzldO1xuICAgICAgICBkc3RbMTBdID0gbVsxMF07XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSAzLWJ5LTMgbWF0cml4IHdoaWNoIHNjYWxlcyB1bmlmb3JtbHkgaW4gZWFjaCBkaW1lbnNpb25cbiAqIEBwYXJhbSBzIC0gQW1vdW50IHRvIHNjYWxlXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxpbmcgbWF0cml4LlxuICovXG5mdW5jdGlvbiB1bmlmb3JtU2NhbGluZyQxKHMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gcztcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSBzO1xuICAgIGRzdFs2XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gMy1ieS0zIG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhbiBhbW91bnRcbiAqIGdpdmVuLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4IHRvIGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHMgLSBBbW91bnQgdG8gc2NhbGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHVuaWZvcm1TY2FsZSQxKG0sIHMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gcyAqIG1bMCAqIDQgKyAwXTtcbiAgICBkc3RbMV0gPSBzICogbVswICogNCArIDFdO1xuICAgIGRzdFsyXSA9IHMgKiBtWzAgKiA0ICsgMl07XG4gICAgZHN0WzRdID0gcyAqIG1bMSAqIDQgKyAwXTtcbiAgICBkc3RbNV0gPSBzICogbVsxICogNCArIDFdO1xuICAgIGRzdFs2XSA9IHMgKiBtWzEgKiA0ICsgMl07XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbOF0gPSBtWzhdO1xuICAgICAgICBkc3RbOV0gPSBtWzldO1xuICAgICAgICBkc3RbMTBdID0gbVsxMF07XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciBtYXQzSW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgc2V0RGVmYXVsdFR5cGU6IHNldERlZmF1bHRUeXBlJDUsXG4gICAgY3JlYXRlOiBjcmVhdGUkNCxcbiAgICBzZXQ6IHNldCQ0LFxuICAgIGZyb21NYXQ0OiBmcm9tTWF0NCxcbiAgICBmcm9tUXVhdDogZnJvbVF1YXQkMSxcbiAgICBuZWdhdGU6IG5lZ2F0ZSQzLFxuICAgIGNvcHk6IGNvcHkkNCxcbiAgICBjbG9uZTogY2xvbmUkNCxcbiAgICBlcXVhbHNBcHByb3hpbWF0ZWx5OiBlcXVhbHNBcHByb3hpbWF0ZWx5JDQsXG4gICAgZXF1YWxzOiBlcXVhbHMkNCxcbiAgICBpZGVudGl0eTogaWRlbnRpdHkkMixcbiAgICB0cmFuc3Bvc2U6IHRyYW5zcG9zZSQxLFxuICAgIGludmVyc2U6IGludmVyc2UkNCxcbiAgICBkZXRlcm1pbmFudDogZGV0ZXJtaW5hbnQkMSxcbiAgICBpbnZlcnQ6IGludmVydCQzLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQ0LFxuICAgIG11bDogbXVsJDQsXG4gICAgc2V0VHJhbnNsYXRpb246IHNldFRyYW5zbGF0aW9uJDEsXG4gICAgZ2V0VHJhbnNsYXRpb246IGdldFRyYW5zbGF0aW9uJDIsXG4gICAgZ2V0QXhpczogZ2V0QXhpcyQyLFxuICAgIHNldEF4aXM6IHNldEF4aXMkMSxcbiAgICBnZXRTY2FsaW5nOiBnZXRTY2FsaW5nJDIsXG4gICAgdHJhbnNsYXRpb246IHRyYW5zbGF0aW9uJDEsXG4gICAgdHJhbnNsYXRlOiB0cmFuc2xhdGUkMSxcbiAgICByb3RhdGlvbjogcm90YXRpb24kMSxcbiAgICByb3RhdGU6IHJvdGF0ZSQxLFxuICAgIHNjYWxpbmc6IHNjYWxpbmckMSxcbiAgICBzY2FsZTogc2NhbGUkNCxcbiAgICB1bmlmb3JtU2NhbGluZzogdW5pZm9ybVNjYWxpbmckMSxcbiAgICB1bmlmb3JtU2NhbGU6IHVuaWZvcm1TY2FsZSQxXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKlxuICogVmVjMyBtYXRoIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbG1vc3QgYWxsIGZ1bmN0aW9ucyB0YWtlIGFuIG9wdGlvbmFsIGBkc3RgIGFyZ3VtZW50LiBJZiBpdCBpcyBub3QgcGFzc2VkIGluIHRoZVxuICogZnVuY3Rpb25zIHdpbGwgY3JlYXRlIGEgbmV3IGBWZWMzYC4gSW4gb3RoZXIgd29yZHMgeW91IGNhbiBkbyB0aGlzXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWMzLmNyb3NzKHYxLCB2Mik7ICAvLyBDcmVhdGVzIGEgbmV3IFZlYzMgd2l0aCB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyLlxuICpcbiAqIG9yXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWMzLmNyZWF0ZSgpO1xuICogICAgIHZlYzMuY3Jvc3ModjEsIHYyLCB2KTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2XG4gKlxuICogVGhlIGZpcnN0IHN0eWxlIGlzIG9mdGVuIGVhc2llciBidXQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0J3MgdXNlZCBpdCBnZW5lcmF0ZXMgZ2FyYmFnZSB3aGVyZVxuICogYXMgdGhlcmUgaXMgYWxtb3N0IG5ldmVyIGFsbG9jYXRpb24gd2l0aCB0aGUgc2Vjb25kIHN0eWxlLlxuICpcbiAqIEl0IGlzIGFsd2F5cyBzYWZlIHRvIHBhc3MgYW55IHZlY3RvciBhcyB0aGUgZGVzdGluYXRpb24uIFNvIGZvciBleGFtcGxlXG4gKlxuICogICAgIHZlYzMuY3Jvc3ModjEsIHYyLCB2MSk7ICAvLyBQdXRzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHYxIHggdjIgaW4gdjFcbiAqXG4gKi9cbmxldCBWZWNUeXBlJDEgPSBGbG9hdDMyQXJyYXk7XG4vKipcbiAqIFNldHMgdGhlIHR5cGUgdGhpcyBsaWJyYXJ5IGNyZWF0ZXMgZm9yIGEgVmVjM1xuICogQHBhcmFtIGN0b3IgLSB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlLiBFaXRoZXIgYEZsb2F0MzJBcnJheWAsIGBGbG9hdDY0QXJyYXlgLCBvciBgQXJyYXlgXG4gKiBAcmV0dXJucyBwcmV2aW91cyBjb25zdHJ1Y3RvciBmb3IgVmVjM1xuICovXG5mdW5jdGlvbiBzZXREZWZhdWx0VHlwZSQ0KGN0b3IpIHtcbiAgICBjb25zdCBvbGRUeXBlID0gVmVjVHlwZSQxO1xuICAgIFZlY1R5cGUkMSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB2ZWMzOyBtYXkgYmUgY2FsbGVkIHdpdGggeCwgeSwgeiB0byBzZXQgaW5pdGlhbCB2YWx1ZXMuXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gY3JlYXRlJDMoeCwgeSwgeikge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgaWYgKHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkc3RbMF0gPSB4O1xuICAgICAgICBpZiAoeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkc3RbMV0gPSB5O1xuICAgICAgICAgICAgaWYgKHogIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRzdFsyXSA9IHo7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdmVjMzsgbWF5IGJlIGNhbGxlZCB3aXRoIHgsIHksIHogdG8gc2V0IGluaXRpYWwgdmFsdWVzLiAoc2FtZSBhcyBjcmVhdGUpXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuY29uc3QgZnJvbVZhbHVlcyQyID0gY3JlYXRlJDM7XG4vKipcbiAqIFNldHMgdGhlIHZhbHVlcyBvZiBhIFZlYzNcbiAqIEFsc28gc2VlIHtAbGluayB2ZWMzLmNyZWF0ZX0gYW5kIHtAbGluayB2ZWMzLmNvcHl9XG4gKlxuICogQHBhcmFtIHggZmlyc3QgdmFsdWVcbiAqIEBwYXJhbSB5IHNlY29uZCB2YWx1ZVxuICogQHBhcmFtIHogdGhpcmQgdmFsdWVcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB3aXRoIGl0cyBlbGVtZW50cyBzZXQuXG4gKi9cbmZ1bmN0aW9uIHNldCQzKHgsIHksIHosIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IHg7XG4gICAgZHN0WzFdID0geTtcbiAgICBkc3RbMl0gPSB6O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5jZWlsIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgY2VpbCBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2VpbCQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGguY2VpbCh2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmNlaWwodlsxXSk7XG4gICAgZHN0WzJdID0gTWF0aC5jZWlsKHZbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5mbG9vciB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIGZsb29yIG9mIGVhY2ggZWxlbWVudCBvZiB2LlxuICovXG5mdW5jdGlvbiBmbG9vciQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGguZmxvb3IodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5mbG9vcih2WzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLmZsb29yKHZbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5yb3VuZCB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIHJvdW5kIG9mIGVhY2ggZWxlbWVudCBvZiB2LlxuICovXG5mdW5jdGlvbiByb3VuZCQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGgucm91bmQodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5yb3VuZCh2WzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLnJvdW5kKHZbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsYW1wIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3IgYmV0d2VlbiBtaW4gYW5kIG1heFxuICogQHBhcmFtIHYgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBtYXggLSBNaW4gdmFsdWUsIGRlZmF1bHQgMFxuICogQHBhcmFtIG1pbiAtIE1heCB2YWx1ZSwgZGVmYXVsdCAxXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCB0aGUgY2xhbXBlZCB2YWx1ZSBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2xhbXAkMSh2LCBtaW4gPSAwLCBtYXggPSAxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdlswXSkpO1xuICAgIGRzdFsxXSA9IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2WzFdKSk7XG4gICAgZHN0WzJdID0gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZbMl0pKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWN0b3JzOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBzdW0gb2YgYSBhbmQgYi5cbiAqL1xuZnVuY3Rpb24gYWRkJDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSArIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjdG9ycywgc2NhbGluZyB0aGUgMm5kOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBzY2FsZSAtIEFtb3VudCB0byBzY2FsZSBiXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgc3VtIG9mIGEgKyBiICogc2NhbGUuXG4gKi9cbmZ1bmN0aW9uIGFkZFNjYWxlZCQxKGEsIGIsIHNjYWxlLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICAgIGRzdFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIFRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdGhlIDIgdmVjdG9ycy5cbiAqL1xuZnVuY3Rpb24gYW5nbGUkMShhLCBiKSB7XG4gICAgY29uc3QgYXggPSBhWzBdO1xuICAgIGNvbnN0IGF5ID0gYVsxXTtcbiAgICBjb25zdCBheiA9IGFbMl07XG4gICAgY29uc3QgYnggPSBhWzBdO1xuICAgIGNvbnN0IGJ5ID0gYVsxXTtcbiAgICBjb25zdCBieiA9IGFbMl07XG4gICAgY29uc3QgbWFnMSA9IE1hdGguc3FydChheCAqIGF4ICsgYXkgKiBheSArIGF6ICogYXopO1xuICAgIGNvbnN0IG1hZzIgPSBNYXRoLnNxcnQoYnggKiBieCArIGJ5ICogYnkgKyBieiAqIGJ6KTtcbiAgICBjb25zdCBtYWcgPSBtYWcxICogbWFnMjtcbiAgICBjb25zdCBjb3NpbmUgPSBtYWcgJiYgZG90JDIoYSwgYikgLyBtYWc7XG4gICAgcmV0dXJuIE1hdGguYWNvcyhjb3NpbmUpO1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBkaWZmZXJlbmNlIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIHN1YnRyYWN0JDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSAtIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSAtIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSAtIGJbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byB2ZWN0b3JzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBzdWIkMiA9IHN1YnRyYWN0JDI7XG4vKipcbiAqIENoZWNrIGlmIDIgdmVjdG9ycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZlY3RvcnMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzQXBwcm94aW1hdGVseSQzKGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoYVswXSAtIGJbMF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzFdIC0gYlsxXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMl0gLSBiWzJdKSA8IEVQU0lMT047XG59XG4vKipcbiAqIENoZWNrIGlmIDIgdmVjdG9ycyBhcmUgZXhhY3RseSBlcXVhbFxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZlY3RvcnMgYXJlIGV4YWN0bHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzJDMoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXTtcbn1cbi8qKlxuICogUGVyZm9ybXMgbGluZWFyIGludGVycG9sYXRpb24gb24gdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgYW5kIGludGVycG9sYXRpb24gY29lZmZpY2llbnQgdCwgcmV0dXJuc1xuICogYSArIHQgKiAoYiAtIGEpLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gdCAtIEludGVycG9sYXRpb24gY29lZmZpY2llbnQuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGxpbmVhciBpbnRlcnBvbGF0ZWQgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBsZXJwJDIoYSwgYiwgdCwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSArIHQgKiAoYlswXSAtIGFbMF0pO1xuICAgIGRzdFsxXSA9IGFbMV0gKyB0ICogKGJbMV0gLSBhWzFdKTtcbiAgICBkc3RbMl0gPSBhWzJdICsgdCAqIChiWzJdIC0gYVsyXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUGVyZm9ybXMgbGluZWFyIGludGVycG9sYXRpb24gb24gdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgYW5kIGludGVycG9sYXRpb24gY29lZmZpY2llbnQgdmVjdG9yIHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50cyB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIGxpbmVhciBpbnRlcnBvbGF0ZWQgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBsZXJwViQxKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0WzBdICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdFsxXSAqIChiWzFdIC0gYVsxXSk7XG4gICAgZHN0WzJdID0gYVsyXSArIHRbMl0gKiAoYlsyXSAtIGFbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybiBtYXggdmFsdWVzIG9mIHR3byB2ZWN0b3JzLlxuICogR2l2ZW4gdmVjdG9ycyBhIGFuZCBiIHJldHVybnNcbiAqIFttYXgoYVswXSwgYlswXSksIG1heChhWzFdLCBiWzFdKSwgbWF4KGFbMl0sIGJbMl0pXS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtYXggY29tcG9uZW50cyB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG1heCQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICAgIGRzdFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybiBtaW4gdmFsdWVzIG9mIHR3byB2ZWN0b3JzLlxuICogR2l2ZW4gdmVjdG9ycyBhIGFuZCBiIHJldHVybnNcbiAqIFttaW4oYVswXSwgYlswXSksIG1pbihhWzFdLCBiWzFdKSwgbWluKGFbMl0sIGJbMl0pXS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtaW4gY29tcG9uZW50cyB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG1pbiQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICAgIGRzdFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG11bFNjYWxhciQyKHYsIGssIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IHZbMF0gKiBrO1xuICAgIGRzdFsxXSA9IHZbMV0gKiBrO1xuICAgIGRzdFsyXSA9IHZbMl0gKiBrO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuIChzYW1lIGFzIG11bFNjYWxhcilcbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIHZlY3Rvci5cbiAqL1xuY29uc3Qgc2NhbGUkMyA9IG11bFNjYWxhciQyO1xuLyoqXG4gKiBEaXZpZGVzIGEgdmVjdG9yIGJ5IGEgc2NhbGFyLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGsgLSBUaGUgc2NhbGFyLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBkaXZTY2FsYXIkMih2LCBrLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSB2WzBdIC8gaztcbiAgICBkc3RbMV0gPSB2WzFdIC8gaztcbiAgICBkc3RbMl0gPSB2WzJdIC8gaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBJbnZlcnNlIGEgdmVjdG9yLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBpbnZlcnRlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGludmVyc2UkMyh2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSAxIC8gdlswXTtcbiAgICBkc3RbMV0gPSAxIC8gdlsxXTtcbiAgICBkc3RbMl0gPSAxIC8gdlsyXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBJbnZlcnQgYSB2ZWN0b3IuIChzYW1lIGFzIGludmVyc2UpXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGludmVydGVkIHZlY3Rvci5cbiAqL1xuY29uc3QgaW52ZXJ0JDIgPSBpbnZlcnNlJDM7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzOyBhc3N1bWVzIGJvdGggdmVjdG9ycyBoYXZlXG4gKiB0aHJlZSBlbnRyaWVzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBhIGNyb3NzIGIuXG4gKi9cbmZ1bmN0aW9uIGNyb3NzKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGNvbnN0IHQxID0gYVsyXSAqIGJbMF0gLSBhWzBdICogYlsyXTtcbiAgICBjb25zdCB0MiA9IGFbMF0gKiBiWzFdIC0gYVsxXSAqIGJbMF07XG4gICAgZHN0WzBdID0gYVsxXSAqIGJbMl0gLSBhWzJdICogYlsxXTtcbiAgICBkc3RbMV0gPSB0MTtcbiAgICBkc3RbMl0gPSB0MjtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYm90aCB2ZWN0b3JzIGhhdmVcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRvdCBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIGRvdCQyKGEsIGIpIHtcbiAgICByZXR1cm4gKGFbMF0gKiBiWzBdKSArIChhWzFdICogYlsxXSkgKyAoYVsyXSAqIGJbMl0pO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbGVuZ3RoIG9mIHZlY3RvclxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBsZW5ndGgkMih2KSB7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIpO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbGVuZ3RoIG9mIHZlY3RvciAoc2FtZSBhcyBsZW5ndGgpXG4gKiBAcGFyYW0gdiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlbiQyID0gbGVuZ3RoJDI7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBsZW5ndGhTcSQyKHYpIHtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICByZXR1cm4gdjAgKiB2MCArIHYxICogdjEgKyB2MiAqIHYyO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aFNxKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlblNxJDIgPSBsZW5ndGhTcSQyO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIHBvaW50c1xuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5mdW5jdGlvbiBkaXN0YW5jZSQxKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkeik7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlKVxuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5jb25zdCBkaXN0JDEgPSBkaXN0YW5jZSQxO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VTcSQxKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlU3EpXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuY29uc3QgZGlzdFNxJDEgPSBkaXN0YW5jZVNxJDE7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgaXRzIEV1Y2xpZGVhbiBsZW5ndGggYW5kIHJldHVybnMgdGhlIHF1b3RpZW50LlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplJDIodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgY29uc3QgbGVuID0gTWF0aC5zcXJ0KHYwICogdjAgKyB2MSAqIHYxICsgdjIgKiB2Mik7XG4gICAgaWYgKGxlbiA+IDAuMDAwMDEpIHtcbiAgICAgICAgZHN0WzBdID0gdjAgLyBsZW47XG4gICAgICAgIGRzdFsxXSA9IHYxIC8gbGVuO1xuICAgICAgICBkc3RbMl0gPSB2MiAvIGxlbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRzdFswXSA9IDA7XG4gICAgICAgIGRzdFsxXSA9IDA7XG4gICAgICAgIGRzdFsyXSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE5lZ2F0ZXMgYSB2ZWN0b3IuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgLXYuXG4gKi9cbmZ1bmN0aW9uIG5lZ2F0ZSQyKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IC12WzBdO1xuICAgIGRzdFsxXSA9IC12WzFdO1xuICAgIGRzdFsyXSA9IC12WzJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzMuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIHZlYzMuY3JlYXRlfSBhbmQge0BsaW5rIHZlYzMuc2V0fVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiB2LlxuICovXG5mdW5jdGlvbiBjb3B5JDModiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gdlswXTtcbiAgICBkc3RbMV0gPSB2WzFdO1xuICAgIGRzdFsyXSA9IHZbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ2xvbmVzIGEgdmVjdG9yLiAoc2FtZSBhcyB7QGxpbmsgdmVjMy5jb3B5fSlcbiAqIEFsc28gc2VlIHtAbGluayB2ZWMzLmNyZWF0ZX0gYW5kIHtAbGluayB2ZWMzLnNldH1cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIGNvcHkgb2Ygdi5cbiAqL1xuY29uc3QgY2xvbmUkMyA9IGNvcHkkMztcbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBwcm9kdWN0cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5JDMoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSAqIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSAqIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSAqIGJbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLiAoc2FtZSBhcyBtdWwpXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdmVjdG9yIG9mIHByb2R1Y3RzIG9mIGVudHJpZXMgb2YgYSBhbmQgYi5cbiAqL1xuY29uc3QgbXVsJDMgPSBtdWx0aXBseSQzO1xuLyoqXG4gKiBEaXZpZGVzIGEgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIChjb21wb25lbnQtd2lzZSk7IGFzc3VtZXMgYSBhbmRcbiAqIGIgaGF2ZSB0aGUgc2FtZSBsZW5ndGguXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdmVjdG9yIG9mIHF1b3RpZW50cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIGRpdmlkZSQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IGFbMF0gLyBiWzBdO1xuICAgIGRzdFsxXSA9IGFbMV0gLyBiWzFdO1xuICAgIGRzdFsyXSA9IGFbMl0gLyBiWzJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC4gKHNhbWUgYXMgZGl2aWRlKVxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBkaXYkMSA9IGRpdmlkZSQxO1xuLyoqXG4gKiBDcmVhdGVzIGEgcmFuZG9tIHZlY3RvclxuICogQHBhcmFtIHNjYWxlIC0gRGVmYXVsdCAxXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHJhbmRvbSB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIHJhbmRvbShzY2FsZSA9IDEsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5yYW5kb20oKSAqIDIgKiBNYXRoLlBJO1xuICAgIGNvbnN0IHogPSBNYXRoLnJhbmRvbSgpICogMiAtIDE7XG4gICAgY29uc3QgelNjYWxlID0gTWF0aC5zcXJ0KDEgLSB6ICogeikgKiBzY2FsZTtcbiAgICBkc3RbMF0gPSBNYXRoLmNvcyhhbmdsZSkgKiB6U2NhbGU7XG4gICAgZHN0WzFdID0gTWF0aC5zaW4oYW5nbGUpICogelNjYWxlO1xuICAgIGRzdFsyXSA9IHogKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBaZXJvJ3MgYSB2ZWN0b3JcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgemVyb2VkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gemVybyQxKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IDA7XG4gICAgZHN0WzFdID0gMDtcbiAgICBkc3RbMl0gPSAwO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIHRyYW5zZm9ybSB2ZWMzIGJ5IDR4NCBtYXRyaXhcbiAqIEBwYXJhbSB2IC0gdGhlIHZlY3RvclxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIG9wdGlvbmFsIHZlYzMgdG8gc3RvcmUgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIHRyYW5zZm9ybWVkIHZlY3RvclxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0JDEodiwgbSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgeCA9IHZbMF07XG4gICAgY29uc3QgeSA9IHZbMV07XG4gICAgY29uc3QgeiA9IHZbMl07XG4gICAgY29uc3QgdyA9IChtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV0pIHx8IDE7XG4gICAgZHN0WzBdID0gKG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdKSAvIHc7XG4gICAgZHN0WzFdID0gKG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdKSAvIHc7XG4gICAgZHN0WzJdID0gKG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSkgLyB3O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFRyYW5zZm9ybSB2ZWM0IGJ5IHVwcGVyIDN4MyBtYXRyaXggaW5zaWRlIDR4NCBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIFRoZSBkaXJlY3Rpb24uXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gb3B0aW9uYWwgVmVjMyB0byBzdG9yZSByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0VXBwZXIzeDModiwgbSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgZHN0WzBdID0gdjAgKiBtWzAgKiA0ICsgMF0gKyB2MSAqIG1bMSAqIDQgKyAwXSArIHYyICogbVsyICogNCArIDBdO1xuICAgIGRzdFsxXSA9IHYwICogbVswICogNCArIDFdICsgdjEgKiBtWzEgKiA0ICsgMV0gKyB2MiAqIG1bMiAqIDQgKyAxXTtcbiAgICBkc3RbMl0gPSB2MCAqIG1bMCAqIDQgKyAyXSArIHYxICogbVsxICogNCArIDJdICsgdjIgKiBtWzIgKiA0ICsgMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB2ZWMzIGJ5IDN4MyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0gdiAtIHRoZSB2ZWN0b3JcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBvcHRpb25hbCB2ZWMzIHRvIHN0b3JlIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSB0cmFuc2Zvcm1lZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtTWF0Myh2LCBtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBjb25zdCB4ID0gdlswXTtcbiAgICBjb25zdCB5ID0gdlsxXTtcbiAgICBjb25zdCB6ID0gdlsyXTtcbiAgICBkc3RbMF0gPSB4ICogbVswXSArIHkgKiBtWzRdICsgeiAqIG1bOF07XG4gICAgZHN0WzFdID0geCAqIG1bMV0gKyB5ICogbVs1XSArIHogKiBtWzldO1xuICAgIGRzdFsyXSA9IHggKiBtWzJdICsgeSAqIG1bNl0gKyB6ICogbVsxMF07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB2ZWMzIGJ5IFF1YXRlcm5pb25cbiAqIEBwYXJhbSB2IC0gdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSBxIC0gdGhlIHF1YXRlcm5pb24gdG8gdHJhbnNmb3JtIGJ5XG4gKiBAcGFyYW0gZHN0IC0gb3B0aW9uYWwgdmVjMyB0byBzdG9yZSByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyB0aGUgdHJhbnNmb3JtZWRcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtUXVhdCh2LCBxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBjb25zdCBxeCA9IHFbMF07XG4gICAgY29uc3QgcXkgPSBxWzFdO1xuICAgIGNvbnN0IHF6ID0gcVsyXTtcbiAgICBjb25zdCB3MiA9IHFbM10gKiAyO1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGNvbnN0IHogPSB2WzJdO1xuICAgIGNvbnN0IHV2WCA9IHF5ICogeiAtIHF6ICogeTtcbiAgICBjb25zdCB1dlkgPSBxeiAqIHggLSBxeCAqIHo7XG4gICAgY29uc3QgdXZaID0gcXggKiB5IC0gcXkgKiB4O1xuICAgIGRzdFswXSA9IHggKyB1dlggKiB3MiArIChxeSAqIHV2WiAtIHF6ICogdXZZKSAqIDI7XG4gICAgZHN0WzFdID0geSArIHV2WSAqIHcyICsgKHF6ICogdXZYIC0gcXggKiB1dlopICogMjtcbiAgICBkc3RbMl0gPSB6ICsgdXZaICogdzIgKyAocXggKiB1dlkgLSBxeSAqIHV2WCkgKiAyO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDQtYnktNCBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzXG4gKiBlbnRyaWVzLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24kMShtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSBtWzEyXTtcbiAgICBkc3RbMV0gPSBtWzEzXTtcbiAgICBkc3RbMl0gPSBtWzE0XTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGFuIGF4aXMgb2YgYSA0eDQgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggMyBlbnRyaWVzXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gYXhpcyAtIFRoZSBheGlzIDAgPSB4LCAxID0geSwgMiA9IHo7XG4gKiBAcmV0dXJucyBUaGUgYXhpcyBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXhpcyQxKG0sIGF4aXMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFswXSA9IG1bb2ZmICsgMF07XG4gICAgZHN0WzFdID0gbVtvZmYgKyAxXTtcbiAgICBkc3RbMl0gPSBtW29mZiArIDJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgY29tcG9uZW50IG9mIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gVGhlIE1hdHJpeFxuICogQHBhcmFtIGRzdCAtIFRoZSB2ZWN0b3IgdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICovXG5mdW5jdGlvbiBnZXRTY2FsaW5nJDEobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgeHggPSBtWzBdO1xuICAgIGNvbnN0IHh5ID0gbVsxXTtcbiAgICBjb25zdCB4eiA9IG1bMl07XG4gICAgY29uc3QgeXggPSBtWzRdO1xuICAgIGNvbnN0IHl5ID0gbVs1XTtcbiAgICBjb25zdCB5eiA9IG1bNl07XG4gICAgY29uc3QgenggPSBtWzhdO1xuICAgIGNvbnN0IHp5ID0gbVs5XTtcbiAgICBjb25zdCB6eiA9IG1bMTBdO1xuICAgIGRzdFswXSA9IE1hdGguc3FydCh4eCAqIHh4ICsgeHkgKiB4eSArIHh6ICogeHopO1xuICAgIGRzdFsxXSA9IE1hdGguc3FydCh5eCAqIHl4ICsgeXkgKiB5eSArIHl6ICogeXopO1xuICAgIGRzdFsyXSA9IE1hdGguc3FydCh6eCAqIHp4ICsgenkgKiB6eSArIHp6ICogenopO1xuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciB2ZWMzSW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgY3JlYXRlOiBjcmVhdGUkMyxcbiAgICBzZXREZWZhdWx0VHlwZTogc2V0RGVmYXVsdFR5cGUkNCxcbiAgICBmcm9tVmFsdWVzOiBmcm9tVmFsdWVzJDIsXG4gICAgc2V0OiBzZXQkMyxcbiAgICBjZWlsOiBjZWlsJDEsXG4gICAgZmxvb3I6IGZsb29yJDEsXG4gICAgcm91bmQ6IHJvdW5kJDEsXG4gICAgY2xhbXA6IGNsYW1wJDEsXG4gICAgYWRkOiBhZGQkMixcbiAgICBhZGRTY2FsZWQ6IGFkZFNjYWxlZCQxLFxuICAgIGFuZ2xlOiBhbmdsZSQxLFxuICAgIHN1YnRyYWN0OiBzdWJ0cmFjdCQyLFxuICAgIHN1Yjogc3ViJDIsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSQzLFxuICAgIGVxdWFsczogZXF1YWxzJDMsXG4gICAgbGVycDogbGVycCQyLFxuICAgIGxlcnBWOiBsZXJwViQxLFxuICAgIG1heDogbWF4JDEsXG4gICAgbWluOiBtaW4kMSxcbiAgICBtdWxTY2FsYXI6IG11bFNjYWxhciQyLFxuICAgIHNjYWxlOiBzY2FsZSQzLFxuICAgIGRpdlNjYWxhcjogZGl2U2NhbGFyJDIsXG4gICAgaW52ZXJzZTogaW52ZXJzZSQzLFxuICAgIGludmVydDogaW52ZXJ0JDIsXG4gICAgY3Jvc3M6IGNyb3NzLFxuICAgIGRvdDogZG90JDIsXG4gICAgbGVuZ3RoOiBsZW5ndGgkMixcbiAgICBsZW46IGxlbiQyLFxuICAgIGxlbmd0aFNxOiBsZW5ndGhTcSQyLFxuICAgIGxlblNxOiBsZW5TcSQyLFxuICAgIGRpc3RhbmNlOiBkaXN0YW5jZSQxLFxuICAgIGRpc3Q6IGRpc3QkMSxcbiAgICBkaXN0YW5jZVNxOiBkaXN0YW5jZVNxJDEsXG4gICAgZGlzdFNxOiBkaXN0U3EkMSxcbiAgICBub3JtYWxpemU6IG5vcm1hbGl6ZSQyLFxuICAgIG5lZ2F0ZTogbmVnYXRlJDIsXG4gICAgY29weTogY29weSQzLFxuICAgIGNsb25lOiBjbG9uZSQzLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQzLFxuICAgIG11bDogbXVsJDMsXG4gICAgZGl2aWRlOiBkaXZpZGUkMSxcbiAgICBkaXY6IGRpdiQxLFxuICAgIHJhbmRvbTogcmFuZG9tLFxuICAgIHplcm86IHplcm8kMSxcbiAgICB0cmFuc2Zvcm1NYXQ0OiB0cmFuc2Zvcm1NYXQ0JDEsXG4gICAgdHJhbnNmb3JtTWF0NFVwcGVyM3gzOiB0cmFuc2Zvcm1NYXQ0VXBwZXIzeDMsXG4gICAgdHJhbnNmb3JtTWF0MzogdHJhbnNmb3JtTWF0MyxcbiAgICB0cmFuc2Zvcm1RdWF0OiB0cmFuc2Zvcm1RdWF0LFxuICAgIGdldFRyYW5zbGF0aW9uOiBnZXRUcmFuc2xhdGlvbiQxLFxuICAgIGdldEF4aXM6IGdldEF4aXMkMSxcbiAgICBnZXRTY2FsaW5nOiBnZXRTY2FsaW5nJDFcbn0pO1xuXG4vKipcbiAqIDR4NCBNYXRyaXggbWF0aCBtYXRoIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbG1vc3QgYWxsIGZ1bmN0aW9ucyB0YWtlIGFuIG9wdGlvbmFsIGBkc3RgIGFyZ3VtZW50LiBJZiBpdCBpcyBub3QgcGFzc2VkIGluIHRoZVxuICogZnVuY3Rpb25zIHdpbGwgY3JlYXRlIGEgbmV3IG1hdHJpeC4gSW4gb3RoZXIgd29yZHMgeW91IGNhbiBkbyB0aGlzXG4gKlxuICogICAgIGNvbnN0IG1hdCA9IG1hdDQudHJhbnNsYXRpb24oWzEsIDIsIDNdKTsgIC8vIENyZWF0ZXMgYSBuZXcgdHJhbnNsYXRpb24gbWF0cml4XG4gKlxuICogb3JcbiAqXG4gKiAgICAgY29uc3QgbWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0aW9uKFsxLCAyLCAzXSwgbWF0KTsgIC8vIFB1dHMgdHJhbnNsYXRpb24gbWF0cml4IGluIG1hdC5cbiAqXG4gKiBUaGUgZmlyc3Qgc3R5bGUgaXMgb2Z0ZW4gZWFzaWVyIGJ1dCBkZXBlbmRpbmcgb24gd2hlcmUgaXQncyB1c2VkIGl0IGdlbmVyYXRlcyBnYXJiYWdlIHdoZXJlXG4gKiBhcyB0aGVyZSBpcyBhbG1vc3QgbmV2ZXIgYWxsb2NhdGlvbiB3aXRoIHRoZSBzZWNvbmQgc3R5bGUuXG4gKlxuICogSXQgaXMgYWx3YXlzIHNhdmUgdG8gcGFzcyBhbnkgbWF0cml4IGFzIHRoZSBkZXN0aW5hdGlvbi4gU28gZm9yIGV4YW1wbGVcbiAqXG4gKiAgICAgY29uc3QgbWF0ID0gbWF0NC5pZGVudGl0eSgpO1xuICogICAgIGNvbnN0IHRyYW5zID0gbWF0NC50cmFuc2xhdGlvbihbMSwgMiwgM10pO1xuICogICAgIG1hdDQubXVsdGlwbHkobWF0LCB0cmFucywgbWF0KTsgIC8vIE11bHRpcGxpZXMgbWF0ICogdHJhbnMgYW5kIHB1dHMgcmVzdWx0IGluIG1hdC5cbiAqXG4gKi9cbmxldCBNYXRUeXBlID0gRmxvYXQzMkFycmF5O1xuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIHRoaXMgbGlicmFyeSBjcmVhdGVzIGZvciBhIE1hdDRcbiAqIEBwYXJhbSBjdG9yIC0gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRWl0aGVyIGBGbG9hdDMyQXJyYXlgLCBgRmxvYXQ2NEFycmF5YCwgb3IgYEFycmF5YFxuICogQHJldHVybnMgcHJldmlvdXMgY29uc3RydWN0b3IgZm9yIE1hdDRcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdFR5cGUkMyhjdG9yKSB7XG4gICAgY29uc3Qgb2xkVHlwZSA9IE1hdFR5cGU7XG4gICAgTWF0VHlwZSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZSBhIE1hdDQgZnJvbSB2YWx1ZXNcbiAqXG4gKiBOb3RlOiBTaW5jZSBwYXNzaW5nIGluIGEgcmF3IEphdmFTY3JpcHQgYXJyYXlcbiAqIGlzIHZhbGlkIGluIGFsbCBjaXJjdW1zdGFuY2VzLCBpZiB5b3Ugd2FudCB0b1xuICogZm9yY2UgYSBKYXZhU2NyaXB0IGFycmF5IGludG8gYSBNYXQ0J3Mgc3BlY2lmaWVkIHR5cGVcbiAqIGl0IHdvdWxkIGJlIGZhc3RlciB0byB1c2VcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IG0gPSBtYXQ0LmNsb25lKHNvbWVKU0FycmF5KTtcbiAqIGBgYFxuICpcbiAqIE5vdGU6IGEgY29uc2VxdWVuY2Ugb2YgdGhlIGltcGxlbWVudGF0aW9uIGlzIGlmIHlvdXIgTWF0NFR5cGUgPSBgQXJyYXlgXG4gKiBpbnN0ZWFkIG9mIGBGbG9hdDMyQXJyYXlgIG9yIGBGbG9hdDY0QXJyYXlgIHRoZW4gYW55IHZhbHVlcyB5b3VcbiAqIGRvbid0IHBhc3MgaW4gd2lsbCBiZSB1bmRlZmluZWQuIFVzdWFsbHkgdGhpcyBpcyBub3QgYW4gaXNzdWUgc2luY2VcbiAqIChhKSB1c2luZyBgQXJyYXlgIGlzIHJhcmUgYW5kIChiKSB1c2luZyBgbWF0NC5jcmVhdGVgIGlzIHVzdWFsbHkgdXNlZFxuICogdG8gY3JlYXRlIGEgTWF0NCB0byBiZSBmaWxsZWQgb3V0IGFzIGluXG4gKlxuICogYGBgXG4gKiBjb25zdCBtID0gbWF0NC5jcmVhdGUoKTtcbiAqIG1hdDQucGVyc3BlY3RpdmUoZm92LCBhc3BlY3QsIG5lYXIsIGZhciwgbSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdjAgLSB2YWx1ZSBmb3IgZWxlbWVudCAwXG4gKiBAcGFyYW0gdjEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxXG4gKiBAcGFyYW0gdjIgLSB2YWx1ZSBmb3IgZWxlbWVudCAyXG4gKiBAcGFyYW0gdjMgLSB2YWx1ZSBmb3IgZWxlbWVudCAzXG4gKiBAcGFyYW0gdjQgLSB2YWx1ZSBmb3IgZWxlbWVudCA0XG4gKiBAcGFyYW0gdjUgLSB2YWx1ZSBmb3IgZWxlbWVudCA1XG4gKiBAcGFyYW0gdjYgLSB2YWx1ZSBmb3IgZWxlbWVudCA2XG4gKiBAcGFyYW0gdjcgLSB2YWx1ZSBmb3IgZWxlbWVudCA3XG4gKiBAcGFyYW0gdjggLSB2YWx1ZSBmb3IgZWxlbWVudCA4XG4gKiBAcGFyYW0gdjkgLSB2YWx1ZSBmb3IgZWxlbWVudCA5XG4gKiBAcGFyYW0gdjEwIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTBcbiAqIEBwYXJhbSB2MTEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxMVxuICogQHBhcmFtIHYxMiAtIHZhbHVlIGZvciBlbGVtZW50IDEyXG4gKiBAcGFyYW0gdjEzIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTNcbiAqIEBwYXJhbSB2MTQgLSB2YWx1ZSBmb3IgZWxlbWVudCAxNFxuICogQHBhcmFtIHYxNSAtIHZhbHVlIGZvciBlbGVtZW50IDE1XG4gKiBAcmV0dXJucyBjcmVhdGVkIGZyb20gdmFsdWVzLlxuICovXG5mdW5jdGlvbiBjcmVhdGUkMih2MCwgdjEsIHYyLCB2MywgdjQsIHY1LCB2NiwgdjcsIHY4LCB2OSwgdjEwLCB2MTEsIHYxMiwgdjEzLCB2MTQsIHYxNSkge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBpZiAodjAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkc3RbMF0gPSB2MDtcbiAgICAgICAgaWYgKHYxICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzdFsxXSA9IHYxO1xuICAgICAgICAgICAgaWYgKHYyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkc3RbMl0gPSB2MjtcbiAgICAgICAgICAgICAgICBpZiAodjMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBkc3RbM10gPSB2MztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHY0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs0XSA9IHY0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY1ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbNV0gPSB2NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbNl0gPSB2NjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs3XSA9IHY3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbOF0gPSB2ODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbOV0gPSB2OTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbMTBdID0gdjEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzExXSA9IHYxMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzEyXSA9IHYxMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbMTNdID0gdjEzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzE0XSA9IHYxNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzE1XSA9IHYxNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU2V0cyB0aGUgdmFsdWVzIG9mIGEgTWF0NFxuICogQWxzbyBzZWUge0BsaW5rIG1hdDQuY3JlYXRlfSBhbmQge0BsaW5rIG1hdDQuY29weX1cbiAqXG4gKiBAcGFyYW0gdjAgLSB2YWx1ZSBmb3IgZWxlbWVudCAwXG4gKiBAcGFyYW0gdjEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxXG4gKiBAcGFyYW0gdjIgLSB2YWx1ZSBmb3IgZWxlbWVudCAyXG4gKiBAcGFyYW0gdjMgLSB2YWx1ZSBmb3IgZWxlbWVudCAzXG4gKiBAcGFyYW0gdjQgLSB2YWx1ZSBmb3IgZWxlbWVudCA0XG4gKiBAcGFyYW0gdjUgLSB2YWx1ZSBmb3IgZWxlbWVudCA1XG4gKiBAcGFyYW0gdjYgLSB2YWx1ZSBmb3IgZWxlbWVudCA2XG4gKiBAcGFyYW0gdjcgLSB2YWx1ZSBmb3IgZWxlbWVudCA3XG4gKiBAcGFyYW0gdjggLSB2YWx1ZSBmb3IgZWxlbWVudCA4XG4gKiBAcGFyYW0gdjkgLSB2YWx1ZSBmb3IgZWxlbWVudCA5XG4gKiBAcGFyYW0gdjEwIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTBcbiAqIEBwYXJhbSB2MTEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxMVxuICogQHBhcmFtIHYxMiAtIHZhbHVlIGZvciBlbGVtZW50IDEyXG4gKiBAcGFyYW0gdjEzIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTNcbiAqIEBwYXJhbSB2MTQgLSB2YWx1ZSBmb3IgZWxlbWVudCAxNFxuICogQHBhcmFtIHYxNSAtIHZhbHVlIGZvciBlbGVtZW50IDE1XG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgTWF0NCBjcmVhdGVkIGZyb20gdmFsdWVzLlxuICovXG5mdW5jdGlvbiBzZXQkMih2MCwgdjEsIHYyLCB2MywgdjQsIHY1LCB2NiwgdjcsIHY4LCB2OSwgdjEwLCB2MTEsIHYxMiwgdjEzLCB2MTQsIHYxNSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSB2MDtcbiAgICBkc3RbMV0gPSB2MTtcbiAgICBkc3RbMl0gPSB2MjtcbiAgICBkc3RbM10gPSB2MztcbiAgICBkc3RbNF0gPSB2NDtcbiAgICBkc3RbNV0gPSB2NTtcbiAgICBkc3RbNl0gPSB2NjtcbiAgICBkc3RbN10gPSB2NztcbiAgICBkc3RbOF0gPSB2ODtcbiAgICBkc3RbOV0gPSB2OTtcbiAgICBkc3RbMTBdID0gdjEwO1xuICAgIGRzdFsxMV0gPSB2MTE7XG4gICAgZHN0WzEyXSA9IHYxMjtcbiAgICBkc3RbMTNdID0gdjEzO1xuICAgIGRzdFsxNF0gPSB2MTQ7XG4gICAgZHN0WzE1XSA9IHYxNTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgTWF0NCBmcm9tIGEgTWF0M1xuICogQHBhcmFtIG0zIC0gc291cmNlIG1hdHJpeFxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDQgbWFkZSBmcm9tIG0zXG4gKi9cbmZ1bmN0aW9uIGZyb21NYXQzKG0zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGRzdFswXSA9IG0zWzBdO1xuICAgIGRzdFsxXSA9IG0zWzFdO1xuICAgIGRzdFsyXSA9IG0zWzJdO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gbTNbNF07XG4gICAgZHN0WzVdID0gbTNbNV07XG4gICAgZHN0WzZdID0gbTNbNl07XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSBtM1s4XTtcbiAgICBkc3RbOV0gPSBtM1s5XTtcbiAgICBkc3RbMTBdID0gbTNbMTBdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBNYXQ0IHJvdGF0aW9uIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvblxuICogQHBhcmFtIHEgLSBxdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDQgbWFkZSBmcm9tIHFcbiAqL1xuZnVuY3Rpb24gZnJvbVF1YXQocSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCB4ID0gcVswXTtcbiAgICBjb25zdCB5ID0gcVsxXTtcbiAgICBjb25zdCB6ID0gcVsyXTtcbiAgICBjb25zdCB3ID0gcVszXTtcbiAgICBjb25zdCB4MiA9IHggKyB4O1xuICAgIGNvbnN0IHkyID0geSArIHk7XG4gICAgY29uc3QgejIgPSB6ICsgejtcbiAgICBjb25zdCB4eCA9IHggKiB4MjtcbiAgICBjb25zdCB5eCA9IHkgKiB4MjtcbiAgICBjb25zdCB5eSA9IHkgKiB5MjtcbiAgICBjb25zdCB6eCA9IHogKiB4MjtcbiAgICBjb25zdCB6eSA9IHogKiB5MjtcbiAgICBjb25zdCB6eiA9IHogKiB6MjtcbiAgICBjb25zdCB3eCA9IHcgKiB4MjtcbiAgICBjb25zdCB3eSA9IHcgKiB5MjtcbiAgICBjb25zdCB3eiA9IHcgKiB6MjtcbiAgICBkc3RbMF0gPSAxIC0geXkgLSB6ejtcbiAgICBkc3RbMV0gPSB5eCArIHd6O1xuICAgIGRzdFsyXSA9IHp4IC0gd3k7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB5eCAtIHd6O1xuICAgIGRzdFs1XSA9IDEgLSB4eCAtIHp6O1xuICAgIGRzdFs2XSA9IHp5ICsgd3g7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSB6eCArIHd5O1xuICAgIGRzdFs5XSA9IHp5IC0gd3g7XG4gICAgZHN0WzEwXSA9IDEgLSB4eCAtIHl5O1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE5lZ2F0ZXMgYSBtYXRyaXguXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgLW0uXG4gKi9cbmZ1bmN0aW9uIG5lZ2F0ZSQxKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgZHN0WzBdID0gLW1bMF07XG4gICAgZHN0WzFdID0gLW1bMV07XG4gICAgZHN0WzJdID0gLW1bMl07XG4gICAgZHN0WzNdID0gLW1bM107XG4gICAgZHN0WzRdID0gLW1bNF07XG4gICAgZHN0WzVdID0gLW1bNV07XG4gICAgZHN0WzZdID0gLW1bNl07XG4gICAgZHN0WzddID0gLW1bN107XG4gICAgZHN0WzhdID0gLW1bOF07XG4gICAgZHN0WzldID0gLW1bOV07XG4gICAgZHN0WzEwXSA9IC1tWzEwXTtcbiAgICBkc3RbMTFdID0gLW1bMTFdO1xuICAgIGRzdFsxMl0gPSAtbVsxMl07XG4gICAgZHN0WzEzXSA9IC1tWzEzXTtcbiAgICBkc3RbMTRdID0gLW1bMTRdO1xuICAgIGRzdFsxNV0gPSAtbVsxNV07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ29waWVzIGEgbWF0cml4LiAoc2FtZSBhcyB7QGxpbmsgbWF0NC5jbG9uZX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgbWF0NC5jcmVhdGV9IGFuZCB7QGxpbmsgbWF0NC5zZXR9XG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gVGhlIG1hdHJpeC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiBtLlxuICovXG5mdW5jdGlvbiBjb3B5JDIobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSBtWzBdO1xuICAgIGRzdFsxXSA9IG1bMV07XG4gICAgZHN0WzJdID0gbVsyXTtcbiAgICBkc3RbM10gPSBtWzNdO1xuICAgIGRzdFs0XSA9IG1bNF07XG4gICAgZHN0WzVdID0gbVs1XTtcbiAgICBkc3RbNl0gPSBtWzZdO1xuICAgIGRzdFs3XSA9IG1bN107XG4gICAgZHN0WzhdID0gbVs4XTtcbiAgICBkc3RbOV0gPSBtWzldO1xuICAgIGRzdFsxMF0gPSBtWzEwXTtcbiAgICBkc3RbMTFdID0gbVsxMV07XG4gICAgZHN0WzEyXSA9IG1bMTJdO1xuICAgIGRzdFsxM10gPSBtWzEzXTtcbiAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgZHN0WzE1XSA9IG1bMTVdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIG1hdHJpeCAoc2FtZSBhcyB7QGxpbmsgbWF0NC5jb3B5fSlcbiAqIEFsc28gc2VlIHtAbGluayBtYXQ0LmNyZWF0ZX0gYW5kIHtAbGluayBtYXQ0LnNldH1cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBUaGUgbWF0cml4LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIG0uXG4gKi9cbmNvbnN0IGNsb25lJDIgPSBjb3B5JDI7XG4vKipcbiAqIENoZWNrIGlmIDIgbWF0cmljZXMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWxcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCBtYXRyaXguXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgbWF0cml4LlxuICogQHJldHVybnMgdHJ1ZSBpZiBtYXRyaWNlcyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDIoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsyXSAtIGJbMl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzNdIC0gYlszXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbNF0gLSBiWzRdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVs1XSAtIGJbNV0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzZdIC0gYls2XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbN10gLSBiWzddKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVs4XSAtIGJbOF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzldIC0gYls5XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMTBdIC0gYlsxMF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzExXSAtIGJbMTFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsxMl0gLSBiWzEyXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMTNdIC0gYlsxM10pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzE0XSAtIGJbMTRdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsxNV0gLSBiWzE1XSkgPCBFUFNJTE9OO1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIG1hdHJpY2VzIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgbWF0cml4LlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHRydWUgaWYgbWF0cmljZXMgYXJlIGV4YWN0bHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzJDIoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmXG4gICAgICAgIGFbMV0gPT09IGJbMV0gJiZcbiAgICAgICAgYVsyXSA9PT0gYlsyXSAmJlxuICAgICAgICBhWzNdID09PSBiWzNdICYmXG4gICAgICAgIGFbNF0gPT09IGJbNF0gJiZcbiAgICAgICAgYVs1XSA9PT0gYls1XSAmJlxuICAgICAgICBhWzZdID09PSBiWzZdICYmXG4gICAgICAgIGFbN10gPT09IGJbN10gJiZcbiAgICAgICAgYVs4XSA9PT0gYls4XSAmJlxuICAgICAgICBhWzldID09PSBiWzldICYmXG4gICAgICAgIGFbMTBdID09PSBiWzEwXSAmJlxuICAgICAgICBhWzExXSA9PT0gYlsxMV0gJiZcbiAgICAgICAgYVsxMl0gPT09IGJbMTJdICYmXG4gICAgICAgIGFbMTNdID09PSBiWzEzXSAmJlxuICAgICAgICBhWzE0XSA9PT0gYlsxNF0gJiZcbiAgICAgICAgYVsxNV0gPT09IGJbMTVdO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IGlkZW50aXR5IG1hdHJpeC5cbiAqXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSA0LWJ5LTQgaWRlbnRpdHkgbWF0cml4LlxuICovXG5mdW5jdGlvbiBpZGVudGl0eSQxKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgZHN0WzBdID0gMTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDE7XG4gICAgZHN0WzZdID0gMDtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IDA7XG4gICAgZHN0WzldID0gMDtcbiAgICBkc3RbMTBdID0gMTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gMDtcbiAgICBkc3RbMTNdID0gMDtcbiAgICBkc3RbMTRdID0gMDtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBUYWtlcyB0aGUgdHJhbnNwb3NlIG9mIGEgbWF0cml4LlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc3Bvc2Ugb2YgbS5cbiAqL1xuZnVuY3Rpb24gdHJhbnNwb3NlKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgaWYgKGRzdCA9PT0gbSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgdCA9IG1bMV07XG4gICAgICAgIG1bMV0gPSBtWzRdO1xuICAgICAgICBtWzRdID0gdDtcbiAgICAgICAgdCA9IG1bMl07XG4gICAgICAgIG1bMl0gPSBtWzhdO1xuICAgICAgICBtWzhdID0gdDtcbiAgICAgICAgdCA9IG1bM107XG4gICAgICAgIG1bM10gPSBtWzEyXTtcbiAgICAgICAgbVsxMl0gPSB0O1xuICAgICAgICB0ID0gbVs2XTtcbiAgICAgICAgbVs2XSA9IG1bOV07XG4gICAgICAgIG1bOV0gPSB0O1xuICAgICAgICB0ID0gbVs3XTtcbiAgICAgICAgbVs3XSA9IG1bMTNdO1xuICAgICAgICBtWzEzXSA9IHQ7XG4gICAgICAgIHQgPSBtWzExXTtcbiAgICAgICAgbVsxMV0gPSBtWzE0XTtcbiAgICAgICAgbVsxNF0gPSB0O1xuICAgICAgICByZXR1cm4gZHN0O1xuICAgIH1cbiAgICBjb25zdCBtMDAgPSBtWzAgKiA0ICsgMF07XG4gICAgY29uc3QgbTAxID0gbVswICogNCArIDFdO1xuICAgIGNvbnN0IG0wMiA9IG1bMCAqIDQgKyAyXTtcbiAgICBjb25zdCBtMDMgPSBtWzAgKiA0ICsgM107XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTEzID0gbVsxICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBtMzAgPSBtWzMgKiA0ICsgMF07XG4gICAgY29uc3QgbTMxID0gbVszICogNCArIDFdO1xuICAgIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgICBjb25zdCBtMzMgPSBtWzMgKiA0ICsgM107XG4gICAgZHN0WzBdID0gbTAwO1xuICAgIGRzdFsxXSA9IG0xMDtcbiAgICBkc3RbMl0gPSBtMjA7XG4gICAgZHN0WzNdID0gbTMwO1xuICAgIGRzdFs0XSA9IG0wMTtcbiAgICBkc3RbNV0gPSBtMTE7XG4gICAgZHN0WzZdID0gbTIxO1xuICAgIGRzdFs3XSA9IG0zMTtcbiAgICBkc3RbOF0gPSBtMDI7XG4gICAgZHN0WzldID0gbTEyO1xuICAgIGRzdFsxMF0gPSBtMjI7XG4gICAgZHN0WzExXSA9IG0zMjtcbiAgICBkc3RbMTJdID0gbTAzO1xuICAgIGRzdFsxM10gPSBtMTM7XG4gICAgZHN0WzE0XSA9IG0yMztcbiAgICBkc3RbMTVdID0gbTMzO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBpbnZlcnNlIG9mIGEgNC1ieS00IG1hdHJpeC5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJzZSBvZiBtLlxuICovXG5mdW5jdGlvbiBpbnZlcnNlJDIobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCBtMDAgPSBtWzAgKiA0ICsgMF07XG4gICAgY29uc3QgbTAxID0gbVswICogNCArIDFdO1xuICAgIGNvbnN0IG0wMiA9IG1bMCAqIDQgKyAyXTtcbiAgICBjb25zdCBtMDMgPSBtWzAgKiA0ICsgM107XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTEzID0gbVsxICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBtMzAgPSBtWzMgKiA0ICsgMF07XG4gICAgY29uc3QgbTMxID0gbVszICogNCArIDFdO1xuICAgIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgICBjb25zdCBtMzMgPSBtWzMgKiA0ICsgM107XG4gICAgY29uc3QgdG1wMCA9IG0yMiAqIG0zMztcbiAgICBjb25zdCB0bXAxID0gbTMyICogbTIzO1xuICAgIGNvbnN0IHRtcDIgPSBtMTIgKiBtMzM7XG4gICAgY29uc3QgdG1wMyA9IG0zMiAqIG0xMztcbiAgICBjb25zdCB0bXA0ID0gbTEyICogbTIzO1xuICAgIGNvbnN0IHRtcDUgPSBtMjIgKiBtMTM7XG4gICAgY29uc3QgdG1wNiA9IG0wMiAqIG0zMztcbiAgICBjb25zdCB0bXA3ID0gbTMyICogbTAzO1xuICAgIGNvbnN0IHRtcDggPSBtMDIgKiBtMjM7XG4gICAgY29uc3QgdG1wOSA9IG0yMiAqIG0wMztcbiAgICBjb25zdCB0bXAxMCA9IG0wMiAqIG0xMztcbiAgICBjb25zdCB0bXAxMSA9IG0xMiAqIG0wMztcbiAgICBjb25zdCB0bXAxMiA9IG0yMCAqIG0zMTtcbiAgICBjb25zdCB0bXAxMyA9IG0zMCAqIG0yMTtcbiAgICBjb25zdCB0bXAxNCA9IG0xMCAqIG0zMTtcbiAgICBjb25zdCB0bXAxNSA9IG0zMCAqIG0xMTtcbiAgICBjb25zdCB0bXAxNiA9IG0xMCAqIG0yMTtcbiAgICBjb25zdCB0bXAxNyA9IG0yMCAqIG0xMTtcbiAgICBjb25zdCB0bXAxOCA9IG0wMCAqIG0zMTtcbiAgICBjb25zdCB0bXAxOSA9IG0zMCAqIG0wMTtcbiAgICBjb25zdCB0bXAyMCA9IG0wMCAqIG0yMTtcbiAgICBjb25zdCB0bXAyMSA9IG0yMCAqIG0wMTtcbiAgICBjb25zdCB0bXAyMiA9IG0wMCAqIG0xMTtcbiAgICBjb25zdCB0bXAyMyA9IG0xMCAqIG0wMTtcbiAgICBjb25zdCB0MCA9ICh0bXAwICogbTExICsgdG1wMyAqIG0yMSArIHRtcDQgKiBtMzEpIC1cbiAgICAgICAgKHRtcDEgKiBtMTEgKyB0bXAyICogbTIxICsgdG1wNSAqIG0zMSk7XG4gICAgY29uc3QgdDEgPSAodG1wMSAqIG0wMSArIHRtcDYgKiBtMjEgKyB0bXA5ICogbTMxKSAtXG4gICAgICAgICh0bXAwICogbTAxICsgdG1wNyAqIG0yMSArIHRtcDggKiBtMzEpO1xuICAgIGNvbnN0IHQyID0gKHRtcDIgKiBtMDEgKyB0bXA3ICogbTExICsgdG1wMTAgKiBtMzEpIC1cbiAgICAgICAgKHRtcDMgKiBtMDEgKyB0bXA2ICogbTExICsgdG1wMTEgKiBtMzEpO1xuICAgIGNvbnN0IHQzID0gKHRtcDUgKiBtMDEgKyB0bXA4ICogbTExICsgdG1wMTEgKiBtMjEpIC1cbiAgICAgICAgKHRtcDQgKiBtMDEgKyB0bXA5ICogbTExICsgdG1wMTAgKiBtMjEpO1xuICAgIGNvbnN0IGQgPSAxIC8gKG0wMCAqIHQwICsgbTEwICogdDEgKyBtMjAgKiB0MiArIG0zMCAqIHQzKTtcbiAgICBkc3RbMF0gPSBkICogdDA7XG4gICAgZHN0WzFdID0gZCAqIHQxO1xuICAgIGRzdFsyXSA9IGQgKiB0MjtcbiAgICBkc3RbM10gPSBkICogdDM7XG4gICAgZHN0WzRdID0gZCAqICgodG1wMSAqIG0xMCArIHRtcDIgKiBtMjAgKyB0bXA1ICogbTMwKSAtXG4gICAgICAgICh0bXAwICogbTEwICsgdG1wMyAqIG0yMCArIHRtcDQgKiBtMzApKTtcbiAgICBkc3RbNV0gPSBkICogKCh0bXAwICogbTAwICsgdG1wNyAqIG0yMCArIHRtcDggKiBtMzApIC1cbiAgICAgICAgKHRtcDEgKiBtMDAgKyB0bXA2ICogbTIwICsgdG1wOSAqIG0zMCkpO1xuICAgIGRzdFs2XSA9IGQgKiAoKHRtcDMgKiBtMDAgKyB0bXA2ICogbTEwICsgdG1wMTEgKiBtMzApIC1cbiAgICAgICAgKHRtcDIgKiBtMDAgKyB0bXA3ICogbTEwICsgdG1wMTAgKiBtMzApKTtcbiAgICBkc3RbN10gPSBkICogKCh0bXA0ICogbTAwICsgdG1wOSAqIG0xMCArIHRtcDEwICogbTIwKSAtXG4gICAgICAgICh0bXA1ICogbTAwICsgdG1wOCAqIG0xMCArIHRtcDExICogbTIwKSk7XG4gICAgZHN0WzhdID0gZCAqICgodG1wMTIgKiBtMTMgKyB0bXAxNSAqIG0yMyArIHRtcDE2ICogbTMzKSAtXG4gICAgICAgICh0bXAxMyAqIG0xMyArIHRtcDE0ICogbTIzICsgdG1wMTcgKiBtMzMpKTtcbiAgICBkc3RbOV0gPSBkICogKCh0bXAxMyAqIG0wMyArIHRtcDE4ICogbTIzICsgdG1wMjEgKiBtMzMpIC1cbiAgICAgICAgKHRtcDEyICogbTAzICsgdG1wMTkgKiBtMjMgKyB0bXAyMCAqIG0zMykpO1xuICAgIGRzdFsxMF0gPSBkICogKCh0bXAxNCAqIG0wMyArIHRtcDE5ICogbTEzICsgdG1wMjIgKiBtMzMpIC1cbiAgICAgICAgKHRtcDE1ICogbTAzICsgdG1wMTggKiBtMTMgKyB0bXAyMyAqIG0zMykpO1xuICAgIGRzdFsxMV0gPSBkICogKCh0bXAxNyAqIG0wMyArIHRtcDIwICogbTEzICsgdG1wMjMgKiBtMjMpIC1cbiAgICAgICAgKHRtcDE2ICogbTAzICsgdG1wMjEgKiBtMTMgKyB0bXAyMiAqIG0yMykpO1xuICAgIGRzdFsxMl0gPSBkICogKCh0bXAxNCAqIG0yMiArIHRtcDE3ICogbTMyICsgdG1wMTMgKiBtMTIpIC1cbiAgICAgICAgKHRtcDE2ICogbTMyICsgdG1wMTIgKiBtMTIgKyB0bXAxNSAqIG0yMikpO1xuICAgIGRzdFsxM10gPSBkICogKCh0bXAyMCAqIG0zMiArIHRtcDEyICogbTAyICsgdG1wMTkgKiBtMjIpIC1cbiAgICAgICAgKHRtcDE4ICogbTIyICsgdG1wMjEgKiBtMzIgKyB0bXAxMyAqIG0wMikpO1xuICAgIGRzdFsxNF0gPSBkICogKCh0bXAxOCAqIG0xMiArIHRtcDIzICogbTMyICsgdG1wMTUgKiBtMDIpIC1cbiAgICAgICAgKHRtcDIyICogbTMyICsgdG1wMTQgKiBtMDIgKyB0bXAxOSAqIG0xMikpO1xuICAgIGRzdFsxNV0gPSBkICogKCh0bXAyMiAqIG0yMiArIHRtcDE2ICogbTAyICsgdG1wMjEgKiBtMTIpIC1cbiAgICAgICAgKHRtcDIwICogbTEyICsgdG1wMjMgKiBtMjIgKyB0bXAxNyAqIG0wMikpO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGUgdGhlIGRldGVybWluYW50IG9mIGEgbWF0cml4XG4gKiBAcGFyYW0gbSAtIHRoZSBtYXRyaXhcbiAqIEByZXR1cm5zIHRoZSBkZXRlcm1pbmFudFxuICovXG5mdW5jdGlvbiBkZXRlcm1pbmFudChtKSB7XG4gICAgY29uc3QgbTAwID0gbVswICogNCArIDBdO1xuICAgIGNvbnN0IG0wMSA9IG1bMCAqIDQgKyAxXTtcbiAgICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gICAgY29uc3QgbTAzID0gbVswICogNCArIDNdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IG0xMyA9IG1bMSAqIDQgKyAzXTtcbiAgICBjb25zdCBtMjAgPSBtWzIgKiA0ICsgMF07XG4gICAgY29uc3QgbTIxID0gbVsyICogNCArIDFdO1xuICAgIGNvbnN0IG0yMiA9IG1bMiAqIDQgKyAyXTtcbiAgICBjb25zdCBtMjMgPSBtWzIgKiA0ICsgM107XG4gICAgY29uc3QgbTMwID0gbVszICogNCArIDBdO1xuICAgIGNvbnN0IG0zMSA9IG1bMyAqIDQgKyAxXTtcbiAgICBjb25zdCBtMzIgPSBtWzMgKiA0ICsgMl07XG4gICAgY29uc3QgbTMzID0gbVszICogNCArIDNdO1xuICAgIGNvbnN0IHRtcDAgPSBtMjIgKiBtMzM7XG4gICAgY29uc3QgdG1wMSA9IG0zMiAqIG0yMztcbiAgICBjb25zdCB0bXAyID0gbTEyICogbTMzO1xuICAgIGNvbnN0IHRtcDMgPSBtMzIgKiBtMTM7XG4gICAgY29uc3QgdG1wNCA9IG0xMiAqIG0yMztcbiAgICBjb25zdCB0bXA1ID0gbTIyICogbTEzO1xuICAgIGNvbnN0IHRtcDYgPSBtMDIgKiBtMzM7XG4gICAgY29uc3QgdG1wNyA9IG0zMiAqIG0wMztcbiAgICBjb25zdCB0bXA4ID0gbTAyICogbTIzO1xuICAgIGNvbnN0IHRtcDkgPSBtMjIgKiBtMDM7XG4gICAgY29uc3QgdG1wMTAgPSBtMDIgKiBtMTM7XG4gICAgY29uc3QgdG1wMTEgPSBtMTIgKiBtMDM7XG4gICAgY29uc3QgdDAgPSAodG1wMCAqIG0xMSArIHRtcDMgKiBtMjEgKyB0bXA0ICogbTMxKSAtXG4gICAgICAgICh0bXAxICogbTExICsgdG1wMiAqIG0yMSArIHRtcDUgKiBtMzEpO1xuICAgIGNvbnN0IHQxID0gKHRtcDEgKiBtMDEgKyB0bXA2ICogbTIxICsgdG1wOSAqIG0zMSkgLVxuICAgICAgICAodG1wMCAqIG0wMSArIHRtcDcgKiBtMjEgKyB0bXA4ICogbTMxKTtcbiAgICBjb25zdCB0MiA9ICh0bXAyICogbTAxICsgdG1wNyAqIG0xMSArIHRtcDEwICogbTMxKSAtXG4gICAgICAgICh0bXAzICogbTAxICsgdG1wNiAqIG0xMSArIHRtcDExICogbTMxKTtcbiAgICBjb25zdCB0MyA9ICh0bXA1ICogbTAxICsgdG1wOCAqIG0xMSArIHRtcDExICogbTIxKSAtXG4gICAgICAgICh0bXA0ICogbTAxICsgdG1wOSAqIG0xMSArIHRtcDEwICogbTIxKTtcbiAgICByZXR1cm4gbTAwICogdDAgKyBtMTAgKiB0MSArIG0yMCAqIHQyICsgbTMwICogdDM7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBpbnZlcnNlIG9mIGEgNC1ieS00IG1hdHJpeC4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJzZSBvZiBtLlxuICovXG5jb25zdCBpbnZlcnQkMSA9IGludmVyc2UkMjtcbi8qKlxuICogTXVsdGlwbGllcyB0d28gNC1ieS00IG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHRcbiAqIEBwYXJhbSBhIC0gVGhlIG1hdHJpeCBvbiB0aGUgbGVmdC5cbiAqIEBwYXJhbSBiIC0gVGhlIG1hdHJpeCBvbiB0aGUgcmlnaHQuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCBwcm9kdWN0IG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5JDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCBhMDAgPSBhWzBdO1xuICAgIGNvbnN0IGEwMSA9IGFbMV07XG4gICAgY29uc3QgYTAyID0gYVsyXTtcbiAgICBjb25zdCBhMDMgPSBhWzNdO1xuICAgIGNvbnN0IGExMCA9IGFbNCArIDBdO1xuICAgIGNvbnN0IGExMSA9IGFbNCArIDFdO1xuICAgIGNvbnN0IGExMiA9IGFbNCArIDJdO1xuICAgIGNvbnN0IGExMyA9IGFbNCArIDNdO1xuICAgIGNvbnN0IGEyMCA9IGFbOCArIDBdO1xuICAgIGNvbnN0IGEyMSA9IGFbOCArIDFdO1xuICAgIGNvbnN0IGEyMiA9IGFbOCArIDJdO1xuICAgIGNvbnN0IGEyMyA9IGFbOCArIDNdO1xuICAgIGNvbnN0IGEzMCA9IGFbMTIgKyAwXTtcbiAgICBjb25zdCBhMzEgPSBhWzEyICsgMV07XG4gICAgY29uc3QgYTMyID0gYVsxMiArIDJdO1xuICAgIGNvbnN0IGEzMyA9IGFbMTIgKyAzXTtcbiAgICBjb25zdCBiMDAgPSBiWzBdO1xuICAgIGNvbnN0IGIwMSA9IGJbMV07XG4gICAgY29uc3QgYjAyID0gYlsyXTtcbiAgICBjb25zdCBiMDMgPSBiWzNdO1xuICAgIGNvbnN0IGIxMCA9IGJbNCArIDBdO1xuICAgIGNvbnN0IGIxMSA9IGJbNCArIDFdO1xuICAgIGNvbnN0IGIxMiA9IGJbNCArIDJdO1xuICAgIGNvbnN0IGIxMyA9IGJbNCArIDNdO1xuICAgIGNvbnN0IGIyMCA9IGJbOCArIDBdO1xuICAgIGNvbnN0IGIyMSA9IGJbOCArIDFdO1xuICAgIGNvbnN0IGIyMiA9IGJbOCArIDJdO1xuICAgIGNvbnN0IGIyMyA9IGJbOCArIDNdO1xuICAgIGNvbnN0IGIzMCA9IGJbMTIgKyAwXTtcbiAgICBjb25zdCBiMzEgPSBiWzEyICsgMV07XG4gICAgY29uc3QgYjMyID0gYlsxMiArIDJdO1xuICAgIGNvbnN0IGIzMyA9IGJbMTIgKyAzXTtcbiAgICBkc3RbMF0gPSBhMDAgKiBiMDAgKyBhMTAgKiBiMDEgKyBhMjAgKiBiMDIgKyBhMzAgKiBiMDM7XG4gICAgZHN0WzFdID0gYTAxICogYjAwICsgYTExICogYjAxICsgYTIxICogYjAyICsgYTMxICogYjAzO1xuICAgIGRzdFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMiArIGEzMiAqIGIwMztcbiAgICBkc3RbM10gPSBhMDMgKiBiMDAgKyBhMTMgKiBiMDEgKyBhMjMgKiBiMDIgKyBhMzMgKiBiMDM7XG4gICAgZHN0WzRdID0gYTAwICogYjEwICsgYTEwICogYjExICsgYTIwICogYjEyICsgYTMwICogYjEzO1xuICAgIGRzdFs1XSA9IGEwMSAqIGIxMCArIGExMSAqIGIxMSArIGEyMSAqIGIxMiArIGEzMSAqIGIxMztcbiAgICBkc3RbNl0gPSBhMDIgKiBiMTAgKyBhMTIgKiBiMTEgKyBhMjIgKiBiMTIgKyBhMzIgKiBiMTM7XG4gICAgZHN0WzddID0gYTAzICogYjEwICsgYTEzICogYjExICsgYTIzICogYjEyICsgYTMzICogYjEzO1xuICAgIGRzdFs4XSA9IGEwMCAqIGIyMCArIGExMCAqIGIyMSArIGEyMCAqIGIyMiArIGEzMCAqIGIyMztcbiAgICBkc3RbOV0gPSBhMDEgKiBiMjAgKyBhMTEgKiBiMjEgKyBhMjEgKiBiMjIgKyBhMzEgKiBiMjM7XG4gICAgZHN0WzEwXSA9IGEwMiAqIGIyMCArIGExMiAqIGIyMSArIGEyMiAqIGIyMiArIGEzMiAqIGIyMztcbiAgICBkc3RbMTFdID0gYTAzICogYjIwICsgYTEzICogYjIxICsgYTIzICogYjIyICsgYTMzICogYjIzO1xuICAgIGRzdFsxMl0gPSBhMDAgKiBiMzAgKyBhMTAgKiBiMzEgKyBhMjAgKiBiMzIgKyBhMzAgKiBiMzM7XG4gICAgZHN0WzEzXSA9IGEwMSAqIGIzMCArIGExMSAqIGIzMSArIGEyMSAqIGIzMiArIGEzMSAqIGIzMztcbiAgICBkc3RbMTRdID0gYTAyICogYjMwICsgYTEyICogYjMxICsgYTIyICogYjMyICsgYTMyICogYjMzO1xuICAgIGRzdFsxNV0gPSBhMDMgKiBiMzAgKyBhMTMgKiBiMzEgKyBhMjMgKiBiMzIgKyBhMzMgKiBiMzM7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gNC1ieS00IG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHQgKHNhbWUgYXMgbXVsdGlwbHkpXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXggb24gdGhlIGxlZnQuXG4gKiBAcGFyYW0gYiAtIFRoZSBtYXRyaXggb24gdGhlIHJpZ2h0LlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtYXRyaXggcHJvZHVjdCBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBtdWwkMiA9IG11bHRpcGx5JDI7XG4vKipcbiAqIFNldHMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDQtYnktNCBtYXRyaXggdG8gdGhlIGdpdmVuXG4gKiB2ZWN0b3IuXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIHRyYW5zbGF0aW9uIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0VHJhbnNsYXRpb24oYSwgdiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IGlkZW50aXR5JDEoKTtcbiAgICBpZiAoYSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFswXSA9IGFbMF07XG4gICAgICAgIGRzdFsxXSA9IGFbMV07XG4gICAgICAgIGRzdFsyXSA9IGFbMl07XG4gICAgICAgIGRzdFszXSA9IGFbM107XG4gICAgICAgIGRzdFs0XSA9IGFbNF07XG4gICAgICAgIGRzdFs1XSA9IGFbNV07XG4gICAgICAgIGRzdFs2XSA9IGFbNl07XG4gICAgICAgIGRzdFs3XSA9IGFbN107XG4gICAgICAgIGRzdFs4XSA9IGFbOF07XG4gICAgICAgIGRzdFs5XSA9IGFbOV07XG4gICAgICAgIGRzdFsxMF0gPSBhWzEwXTtcbiAgICAgICAgZHN0WzExXSA9IGFbMTFdO1xuICAgIH1cbiAgICBkc3RbMTJdID0gdlswXTtcbiAgICBkc3RbMTNdID0gdlsxXTtcbiAgICBkc3RbMTRdID0gdlsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgYSA0LWJ5LTQgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggM1xuICogZW50cmllcy5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNsYXRpb24gY29tcG9uZW50IG9mIG0uXG4gKi9cbmZ1bmN0aW9uIGdldFRyYW5zbGF0aW9uKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkMygpO1xuICAgIGRzdFswXSA9IG1bMTJdO1xuICAgIGRzdFsxXSA9IG1bMTNdO1xuICAgIGRzdFsyXSA9IG1bMTRdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgYW4gYXhpcyBvZiBhIDR4NCBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXNcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBheGlzIC0gVGhlIGF4aXMgMCA9IHgsIDEgPSB5LCAyID0gejtcbiAqIEByZXR1cm5zIFRoZSBheGlzIGNvbXBvbmVudCBvZiBtLlxuICovXG5mdW5jdGlvbiBnZXRBeGlzKG0sIGF4aXMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkMygpO1xuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFswXSA9IG1bb2ZmICsgMF07XG4gICAgZHN0WzFdID0gbVtvZmYgKyAxXTtcbiAgICBkc3RbMl0gPSBtW29mZiArIDJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNldHMgYW4gYXhpcyBvZiBhIDR4NCBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXNcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB2IC0gdGhlIGF4aXMgdmVjdG9yXG4gKiBAcGFyYW0gYXhpcyAtIFRoZSBheGlzICAwID0geCwgMSA9IHksIDIgPSB6O1xuICogQHBhcmFtIGRzdCAtIFRoZSBtYXRyaXggdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIGF4aXMgc2V0LlxuICovXG5mdW5jdGlvbiBzZXRBeGlzKGEsIHYsIGF4aXMsIGRzdCkge1xuICAgIGlmIChkc3QgIT09IGEpIHtcbiAgICAgICAgZHN0ID0gY29weSQyKGEsIGRzdCk7XG4gICAgfVxuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFtvZmYgKyAwXSA9IHZbMF07XG4gICAgZHN0W29mZiArIDFdID0gdlsxXTtcbiAgICBkc3Rbb2ZmICsgMl0gPSB2WzJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgY29tcG9uZW50IG9mIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gVGhlIE1hdHJpeFxuICogQHBhcmFtIGRzdCAtIFRoZSB2ZWN0b3IgdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICovXG5mdW5jdGlvbiBnZXRTY2FsaW5nKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkMygpO1xuICAgIGNvbnN0IHh4ID0gbVswXTtcbiAgICBjb25zdCB4eSA9IG1bMV07XG4gICAgY29uc3QgeHogPSBtWzJdO1xuICAgIGNvbnN0IHl4ID0gbVs0XTtcbiAgICBjb25zdCB5eSA9IG1bNV07XG4gICAgY29uc3QgeXogPSBtWzZdO1xuICAgIGNvbnN0IHp4ID0gbVs4XTtcbiAgICBjb25zdCB6eSA9IG1bOV07XG4gICAgY29uc3QgenogPSBtWzEwXTtcbiAgICBkc3RbMF0gPSBNYXRoLnNxcnQoeHggKiB4eCArIHh5ICogeHkgKyB4eiAqIHh6KTtcbiAgICBkc3RbMV0gPSBNYXRoLnNxcnQoeXggKiB5eCArIHl5ICogeXkgKyB5eiAqIHl6KTtcbiAgICBkc3RbMl0gPSBNYXRoLnNxcnQoenggKiB6eCArIHp5ICogenkgKyB6eiAqIHp6KTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggZ2l2ZW4gdGhlIGFuZ3VsYXIgaGVpZ2h0XG4gKiBvZiB0aGUgZnJ1c3R1bSwgdGhlIGFzcGVjdCByYXRpbywgYW5kIHRoZSBuZWFyIGFuZCBmYXIgY2xpcHBpbmcgcGxhbmVzLiAgVGhlXG4gKiBhcmd1bWVudHMgZGVmaW5lIGEgZnJ1c3R1bSBleHRlbmRpbmcgaW4gdGhlIG5lZ2F0aXZlIHogZGlyZWN0aW9uLiAgVGhlIGdpdmVuXG4gKiBhbmdsZSBpcyB0aGUgdmVydGljYWwgYW5nbGUgb2YgdGhlIGZydXN0dW0sIGFuZCB0aGUgaG9yaXpvbnRhbCBhbmdsZSBpc1xuICogZGV0ZXJtaW5lZCB0byBwcm9kdWNlIHRoZSBnaXZlbiBhc3BlY3QgcmF0aW8uICBUaGUgYXJndW1lbnRzIG5lYXIgYW5kIGZhciBhcmVcbiAqIHRoZSBkaXN0YW5jZXMgdG8gdGhlIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuICBOb3RlIHRoYXQgbmVhciBhbmQgZmFyXG4gKiBhcmUgbm90IHogY29vcmRpbmF0ZXMsIGJ1dCByYXRoZXIgdGhleSBhcmUgZGlzdGFuY2VzIGFsb25nIHRoZSBuZWdhdGl2ZVxuICogei1heGlzLiAgVGhlIG1hdHJpeCBnZW5lcmF0ZWQgc2VuZHMgdGhlIHZpZXdpbmcgZnJ1c3R1bSB0byB0aGUgdW5pdCBib3guXG4gKiBXZSBhc3N1bWUgYSB1bml0IGJveCBleHRlbmRpbmcgZnJvbSAtMSB0byAxIGluIHRoZSB4IGFuZCB5IGRpbWVuc2lvbnMgYW5kXG4gKiBmcm9tIDAgdG8gMSBpbiB0aGUgeiBkaW1lbnNpb24uXG4gKlxuICogTm90ZTogSWYgeW91IHBhc3MgYEluZmluaXR5YCBmb3IgekZhciB0aGVuIGl0IHdpbGwgcHJvZHVjZSBhIHByb2plY3Rpb24gbWF0cml4XG4gKiByZXR1cm5zIC1JbmZpbml0eSBmb3IgWiB3aGVuIHRyYW5zZm9ybWluZyBjb29yZGluYXRlcyB3aXRoIFogPD0gMCBhbmQgK0luZmluaXR5IGZvciBaXG4gKiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIGZpZWxkT2ZWaWV3WUluUmFkaWFucyAtIFRoZSBjYW1lcmEgYW5nbGUgZnJvbSB0b3AgdG8gYm90dG9tIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBhc3BlY3QgLSBUaGUgYXNwZWN0IHJhdGlvIHdpZHRoIC8gaGVpZ2h0LlxuICogQHBhcmFtIHpOZWFyIC0gVGhlIGRlcHRoIChuZWdhdGl2ZSB6IGNvb3JkaW5hdGUpXG4gKiAgICAgb2YgdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUuXG4gKiBAcGFyYW0gekZhciAtIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBmYXIgY2xpcHBpbmcgcGxhbmUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHBlcnNwZWN0aXZlIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcGVyc3BlY3RpdmUoZmllbGRPZlZpZXdZSW5SYWRpYW5zLCBhc3BlY3QsIHpOZWFyLCB6RmFyLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IGYgPSBNYXRoLnRhbihNYXRoLlBJICogMC41IC0gMC41ICogZmllbGRPZlZpZXdZSW5SYWRpYW5zKTtcbiAgICBkc3RbMF0gPSBmIC8gYXNwZWN0O1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gZjtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMV0gPSAtMTtcbiAgICBkc3RbMTJdID0gMDtcbiAgICBkc3RbMTNdID0gMDtcbiAgICBkc3RbMTVdID0gMDtcbiAgICBpZiAoekZhciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgZHN0WzEwXSA9IC0xO1xuICAgICAgICBkc3RbMTRdID0gLXpOZWFyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbnYgPSAxIC8gKHpOZWFyIC0gekZhcik7XG4gICAgICAgIGRzdFsxMF0gPSB6RmFyICogcmFuZ2VJbnY7XG4gICAgICAgIGRzdFsxNF0gPSB6RmFyICogek5lYXIgKiByYW5nZUludjtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ29tcHV0ZXMgYSA0LWJ5LTQgb3J0aG9nb25hbCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggdGhhdCB0cmFuc2Zvcm1zIGZyb21cbiAqIHRoZSBnaXZlbiB0aGUgbGVmdCwgcmlnaHQsIGJvdHRvbSwgYW5kIHRvcCBkaW1lbnNpb25zIHRvIC0xICsxIGluIHgsIGFuZCB5XG4gKiBhbmQgMCB0byArMSBpbiB6LlxuICogQHBhcmFtIGxlZnQgLSBMZWZ0IHNpZGUgb2YgdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUgdmlld3BvcnQuXG4gKiBAcGFyYW0gcmlnaHQgLSBSaWdodCBzaWRlIG9mIHRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lIHZpZXdwb3J0LlxuICogQHBhcmFtIGJvdHRvbSAtIEJvdHRvbSBvZiB0aGUgbmVhciBjbGlwcGluZyBwbGFuZSB2aWV3cG9ydC5cbiAqIEBwYXJhbSB0b3AgLSBUb3Agb2YgdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUgdmlld3BvcnQuXG4gKiBAcGFyYW0gbmVhciAtIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lLlxuICogQHBhcmFtIGZhciAtIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBmYXIgY2xpcHBpbmcgcGxhbmUuXG4gKiBAcGFyYW0gZHN0IC0gT3V0cHV0IG1hdHJpeC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBvcnRob2dyYXBoaWMgcHJvamVjdGlvbiBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIG9ydGhvKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGRzdFswXSA9IDIgLyAocmlnaHQgLSBsZWZ0KTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDIgLyAodG9wIC0gYm90dG9tKTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAocmlnaHQgKyBsZWZ0KSAvIChsZWZ0IC0gcmlnaHQpO1xuICAgIGRzdFsxM10gPSAodG9wICsgYm90dG9tKSAvIChib3R0b20gLSB0b3ApO1xuICAgIGRzdFsxNF0gPSBuZWFyIC8gKG5lYXIgLSBmYXIpO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGVzIGEgNC1ieS00IHBlcnNwZWN0aXZlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBnaXZlbiB0aGUgbGVmdCwgcmlnaHQsXG4gKiB0b3AsIGJvdHRvbSwgbmVhciBhbmQgZmFyIGNsaXBwaW5nIHBsYW5lcy4gVGhlIGFyZ3VtZW50cyBkZWZpbmUgYSBmcnVzdHVtXG4gKiBleHRlbmRpbmcgaW4gdGhlIG5lZ2F0aXZlIHogZGlyZWN0aW9uLiBUaGUgYXJndW1lbnRzIG5lYXIgYW5kIGZhciBhcmUgdGhlXG4gKiBkaXN0YW5jZXMgdG8gdGhlIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuIE5vdGUgdGhhdCBuZWFyIGFuZCBmYXIgYXJlIG5vdFxuICogeiBjb29yZGluYXRlcywgYnV0IHJhdGhlciB0aGV5IGFyZSBkaXN0YW5jZXMgYWxvbmcgdGhlIG5lZ2F0aXZlIHotYXhpcy4gVGhlXG4gKiBtYXRyaXggZ2VuZXJhdGVkIHNlbmRzIHRoZSB2aWV3aW5nIGZydXN0dW0gdG8gdGhlIHVuaXQgYm94LiBXZSBhc3N1bWUgYSB1bml0XG4gKiBib3ggZXh0ZW5kaW5nIGZyb20gLTEgdG8gMSBpbiB0aGUgeCBhbmQgeSBkaW1lbnNpb25zIGFuZCBmcm9tIDAgdG8gMSBpbiB0aGUgelxuICogZGltZW5zaW9uLlxuICogQHBhcmFtIGxlZnQgLSBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IHBsYW5lIG9mIHRoZSBib3guXG4gKiBAcGFyYW0gcmlnaHQgLSBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSByaWdodCBwbGFuZSBvZiB0aGUgYm94LlxuICogQHBhcmFtIGJvdHRvbSAtIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIGJvdHRvbSBwbGFuZSBvZiB0aGUgYm94LlxuICogQHBhcmFtIHRvcCAtIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IHBsYW5lIG9mIHRoZSBib3guXG4gKiBAcGFyYW0gbmVhciAtIFRoZSBuZWdhdGl2ZSB6IGNvb3JkaW5hdGUgb2YgdGhlIG5lYXIgcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSBmYXIgLSBUaGUgbmVnYXRpdmUgeiBjb29yZGluYXRlIG9mIHRoZSBmYXIgcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSBkc3QgLSBPdXRwdXQgbWF0cml4LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4LlxuICovXG5mdW5jdGlvbiBmcnVzdHVtKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IGR4ID0gKHJpZ2h0IC0gbGVmdCk7XG4gICAgY29uc3QgZHkgPSAodG9wIC0gYm90dG9tKTtcbiAgICBjb25zdCBkeiA9IChuZWFyIC0gZmFyKTtcbiAgICBkc3RbMF0gPSAyICogbmVhciAvIGR4O1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gMiAqIG5lYXIgLyBkeTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gKGxlZnQgKyByaWdodCkgLyBkeDtcbiAgICBkc3RbOV0gPSAodG9wICsgYm90dG9tKSAvIGR5O1xuICAgIGRzdFsxMF0gPSBmYXIgLyBkejtcbiAgICBkc3RbMTFdID0gLTE7XG4gICAgZHN0WzEyXSA9IDA7XG4gICAgZHN0WzEzXSA9IDA7XG4gICAgZHN0WzE0XSA9IG5lYXIgKiBmYXIgLyBkejtcbiAgICBkc3RbMTVdID0gMDtcbiAgICByZXR1cm4gZHN0O1xufVxubGV0IHhBeGlzO1xubGV0IHlBeGlzO1xubGV0IHpBeGlzO1xuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBhaW0gdHJhbnNmb3JtYXRpb24uXG4gKlxuICogVGhpcyBpcyBhIG1hdHJpeCB3aGljaCBwb3NpdGlvbnMgYW4gb2JqZWN0IGFpbWluZyBkb3duIHBvc2l0aXZlIFouXG4gKiB0b3dhcmQgdGhlIHRhcmdldC5cbiAqXG4gKiBOb3RlOiB0aGlzIGlzICoqTk9UKiogdGhlIGludmVyc2Ugb2YgbG9va0F0IGFzIGxvb2tBdCBsb29rcyBhdCBuZWdhdGl2ZSBaLlxuICpcbiAqIEBwYXJhbSBwb3NpdGlvbiAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHRhcmdldCAtIFRoZSBwb3NpdGlvbiBtZWFudCB0byBiZSBhaW1lZCBhdC5cbiAqIEBwYXJhbSB1cCAtIEEgdmVjdG9yIHBvaW50aW5nIHVwLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBhaW0gbWF0cml4LlxuICovXG5mdW5jdGlvbiBhaW0ocG9zaXRpb24sIHRhcmdldCwgdXAsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgeEF4aXMgPSB4QXhpcyB8fCBjcmVhdGUkMygpO1xuICAgIHlBeGlzID0geUF4aXMgfHwgY3JlYXRlJDMoKTtcbiAgICB6QXhpcyA9IHpBeGlzIHx8IGNyZWF0ZSQzKCk7XG4gICAgbm9ybWFsaXplJDIoc3VidHJhY3QkMih0YXJnZXQsIHBvc2l0aW9uLCB6QXhpcyksIHpBeGlzKTtcbiAgICBub3JtYWxpemUkMihjcm9zcyh1cCwgekF4aXMsIHhBeGlzKSwgeEF4aXMpO1xuICAgIG5vcm1hbGl6ZSQyKGNyb3NzKHpBeGlzLCB4QXhpcywgeUF4aXMpLCB5QXhpcyk7XG4gICAgZHN0WzBdID0geEF4aXNbMF07XG4gICAgZHN0WzFdID0geEF4aXNbMV07XG4gICAgZHN0WzJdID0geEF4aXNbMl07XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB5QXhpc1swXTtcbiAgICBkc3RbNV0gPSB5QXhpc1sxXTtcbiAgICBkc3RbNl0gPSB5QXhpc1syXTtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHpBeGlzWzBdO1xuICAgIGRzdFs5XSA9IHpBeGlzWzFdO1xuICAgIGRzdFsxMF0gPSB6QXhpc1syXTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gcG9zaXRpb25bMF07XG4gICAgZHN0WzEzXSA9IHBvc2l0aW9uWzFdO1xuICAgIGRzdFsxNF0gPSBwb3NpdGlvblsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBjYW1lcmEgYWltIHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqIFRoaXMgaXMgYSBtYXRyaXggd2hpY2ggcG9zaXRpb25zIGFuIG9iamVjdCBhaW1pbmcgZG93biBuZWdhdGl2ZSBaLlxuICogdG93YXJkIHRoZSB0YXJnZXQuXG4gKlxuICogTm90ZTogdGhpcyBpcyB0aGUgaW52ZXJzZSBvZiBgbG9va0F0YFxuICpcbiAqIEBwYXJhbSBleWUgLSBUaGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdC5cbiAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgcG9zaXRpb24gbWVhbnQgdG8gYmUgYWltZWQgYXQuXG4gKiBAcGFyYW0gdXAgLSBBIHZlY3RvciBwb2ludGluZyB1cC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgYWltIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gY2FtZXJhQWltKGV5ZSwgdGFyZ2V0LCB1cCwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICB4QXhpcyA9IHhBeGlzIHx8IGNyZWF0ZSQzKCk7XG4gICAgeUF4aXMgPSB5QXhpcyB8fCBjcmVhdGUkMygpO1xuICAgIHpBeGlzID0gekF4aXMgfHwgY3JlYXRlJDMoKTtcbiAgICBub3JtYWxpemUkMihzdWJ0cmFjdCQyKGV5ZSwgdGFyZ2V0LCB6QXhpcyksIHpBeGlzKTtcbiAgICBub3JtYWxpemUkMihjcm9zcyh1cCwgekF4aXMsIHhBeGlzKSwgeEF4aXMpO1xuICAgIG5vcm1hbGl6ZSQyKGNyb3NzKHpBeGlzLCB4QXhpcywgeUF4aXMpLCB5QXhpcyk7XG4gICAgZHN0WzBdID0geEF4aXNbMF07XG4gICAgZHN0WzFdID0geEF4aXNbMV07XG4gICAgZHN0WzJdID0geEF4aXNbMl07XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB5QXhpc1swXTtcbiAgICBkc3RbNV0gPSB5QXhpc1sxXTtcbiAgICBkc3RbNl0gPSB5QXhpc1syXTtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHpBeGlzWzBdO1xuICAgIGRzdFs5XSA9IHpBeGlzWzFdO1xuICAgIGRzdFsxMF0gPSB6QXhpc1syXTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gZXllWzBdO1xuICAgIGRzdFsxM10gPSBleWVbMV07XG4gICAgZHN0WzE0XSA9IGV5ZVsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCB2aWV3IHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqIFRoaXMgaXMgYSB2aWV3IG1hdHJpeCB3aGljaCB0cmFuc2Zvcm1zIGFsbCBvdGhlciBvYmplY3RzXG4gKiB0byBiZSBpbiB0aGUgc3BhY2Ugb2YgdGhlIHZpZXcgZGVmaW5lZCBieSB0aGUgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0gZXllIC0gVGhlIHBvc2l0aW9uIG9mIHRoZSBvYmplY3QuXG4gKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHBvc2l0aW9uIG1lYW50IHRvIGJlIGFpbWVkIGF0LlxuICogQHBhcmFtIHVwIC0gQSB2ZWN0b3IgcG9pbnRpbmcgdXAuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGxvb2stYXQgbWF0cml4LlxuICovXG5mdW5jdGlvbiBsb29rQXQoZXllLCB0YXJnZXQsIHVwLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIHhBeGlzID0geEF4aXMgfHwgY3JlYXRlJDMoKTtcbiAgICB5QXhpcyA9IHlBeGlzIHx8IGNyZWF0ZSQzKCk7XG4gICAgekF4aXMgPSB6QXhpcyB8fCBjcmVhdGUkMygpO1xuICAgIG5vcm1hbGl6ZSQyKHN1YnRyYWN0JDIoZXllLCB0YXJnZXQsIHpBeGlzKSwgekF4aXMpO1xuICAgIG5vcm1hbGl6ZSQyKGNyb3NzKHVwLCB6QXhpcywgeEF4aXMpLCB4QXhpcyk7XG4gICAgbm9ybWFsaXplJDIoY3Jvc3MoekF4aXMsIHhBeGlzLCB5QXhpcyksIHlBeGlzKTtcbiAgICBkc3RbMF0gPSB4QXhpc1swXTtcbiAgICBkc3RbMV0gPSB5QXhpc1swXTtcbiAgICBkc3RbMl0gPSB6QXhpc1swXTtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IHhBeGlzWzFdO1xuICAgIGRzdFs1XSA9IHlBeGlzWzFdO1xuICAgIGRzdFs2XSA9IHpBeGlzWzFdO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0geEF4aXNbMl07XG4gICAgZHN0WzldID0geUF4aXNbMl07XG4gICAgZHN0WzEwXSA9IHpBeGlzWzJdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAtKHhBeGlzWzBdICogZXllWzBdICsgeEF4aXNbMV0gKiBleWVbMV0gKyB4QXhpc1syXSAqIGV5ZVsyXSk7XG4gICAgZHN0WzEzXSA9IC0oeUF4aXNbMF0gKiBleWVbMF0gKyB5QXhpc1sxXSAqIGV5ZVsxXSArIHlBeGlzWzJdICogZXllWzJdKTtcbiAgICBkc3RbMTRdID0gLSh6QXhpc1swXSAqIGV5ZVswXSArIHpBeGlzWzFdICogZXllWzFdICsgekF4aXNbMl0gKiBleWVbMl0pO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSA0LWJ5LTQgbWF0cml4IHdoaWNoIHRyYW5zbGF0ZXMgYnkgdGhlIGdpdmVuIHZlY3RvciB2LlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yIGJ5XG4gKiAgICAgd2hpY2ggdG8gdHJhbnNsYXRlLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2xhdGlvbiBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHRyYW5zbGF0aW9uKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgZHN0WzBdID0gMTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDE7XG4gICAgZHN0WzZdID0gMDtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IDA7XG4gICAgZHN0WzldID0gMDtcbiAgICBkc3RbMTBdID0gMTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gdlswXTtcbiAgICBkc3RbMTNdID0gdlsxXTtcbiAgICBkc3RbMTRdID0gdlsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBnaXZlbiA0LWJ5LTQgbWF0cml4IGJ5IHRoZSBnaXZlbiB2ZWN0b3Igdi5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3RvciBieVxuICogICAgIHdoaWNoIHRvIHRyYW5zbGF0ZS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNsYXRlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHRyYW5zbGF0ZShtLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgdjIgPSB2WzJdO1xuICAgIGNvbnN0IG0wMCA9IG1bMF07XG4gICAgY29uc3QgbTAxID0gbVsxXTtcbiAgICBjb25zdCBtMDIgPSBtWzJdO1xuICAgIGNvbnN0IG0wMyA9IG1bM107XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTEzID0gbVsxICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBtMzAgPSBtWzMgKiA0ICsgMF07XG4gICAgY29uc3QgbTMxID0gbVszICogNCArIDFdO1xuICAgIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgICBjb25zdCBtMzMgPSBtWzMgKiA0ICsgM107XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbMF0gPSBtMDA7XG4gICAgICAgIGRzdFsxXSA9IG0wMTtcbiAgICAgICAgZHN0WzJdID0gbTAyO1xuICAgICAgICBkc3RbM10gPSBtMDM7XG4gICAgICAgIGRzdFs0XSA9IG0xMDtcbiAgICAgICAgZHN0WzVdID0gbTExO1xuICAgICAgICBkc3RbNl0gPSBtMTI7XG4gICAgICAgIGRzdFs3XSA9IG0xMztcbiAgICAgICAgZHN0WzhdID0gbTIwO1xuICAgICAgICBkc3RbOV0gPSBtMjE7XG4gICAgICAgIGRzdFsxMF0gPSBtMjI7XG4gICAgICAgIGRzdFsxMV0gPSBtMjM7XG4gICAgfVxuICAgIGRzdFsxMl0gPSBtMDAgKiB2MCArIG0xMCAqIHYxICsgbTIwICogdjIgKyBtMzA7XG4gICAgZHN0WzEzXSA9IG0wMSAqIHYwICsgbTExICogdjEgKyBtMjEgKiB2MiArIG0zMTtcbiAgICBkc3RbMTRdID0gbTAyICogdjAgKyBtMTIgKiB2MSArIG0yMiAqIHYyICsgbTMyO1xuICAgIGRzdFsxNV0gPSBtMDMgKiB2MCArIG0xMyAqIHYxICsgbTIzICogdjIgKyBtMzM7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggcm90YXRlcyBhcm91bmQgdGhlIHgtYXhpcyBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRpb24gbWF0cml4LlxuICovXG5mdW5jdGlvbiByb3RhdGlvblgoYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGRzdFswXSA9IDE7XG4gICAgZHN0WzFdID0gMDtcbiAgICBkc3RbMl0gPSAwO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSBjO1xuICAgIGRzdFs2XSA9IHM7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSAwO1xuICAgIGRzdFs5XSA9IC1zO1xuICAgIGRzdFsxMF0gPSBjO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJvdGF0ZXMgdGhlIGdpdmVuIDQtYnktNCBtYXRyaXggYXJvdW5kIHRoZSB4LWF4aXMgYnkgdGhlIGdpdmVuXG4gKiBhbmdsZS5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcm90YXRlWCQxKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IG0xMCA9IG1bNF07XG4gICAgY29uc3QgbTExID0gbVs1XTtcbiAgICBjb25zdCBtMTIgPSBtWzZdO1xuICAgIGNvbnN0IG0xMyA9IG1bN107XG4gICAgY29uc3QgbTIwID0gbVs4XTtcbiAgICBjb25zdCBtMjEgPSBtWzldO1xuICAgIGNvbnN0IG0yMiA9IG1bMTBdO1xuICAgIGNvbnN0IG0yMyA9IG1bMTFdO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBkc3RbNF0gPSBjICogbTEwICsgcyAqIG0yMDtcbiAgICBkc3RbNV0gPSBjICogbTExICsgcyAqIG0yMTtcbiAgICBkc3RbNl0gPSBjICogbTEyICsgcyAqIG0yMjtcbiAgICBkc3RbN10gPSBjICogbTEzICsgcyAqIG0yMztcbiAgICBkc3RbOF0gPSBjICogbTIwIC0gcyAqIG0xMDtcbiAgICBkc3RbOV0gPSBjICogbTIxIC0gcyAqIG0xMTtcbiAgICBkc3RbMTBdID0gYyAqIG0yMiAtIHMgKiBtMTI7XG4gICAgZHN0WzExXSA9IGMgKiBtMjMgLSBzICogbTEzO1xuICAgIGlmIChtICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzBdID0gbVswXTtcbiAgICAgICAgZHN0WzFdID0gbVsxXTtcbiAgICAgICAgZHN0WzJdID0gbVsyXTtcbiAgICAgICAgZHN0WzNdID0gbVszXTtcbiAgICAgICAgZHN0WzEyXSA9IG1bMTJdO1xuICAgICAgICBkc3RbMTNdID0gbVsxM107XG4gICAgICAgIGRzdFsxNF0gPSBtWzE0XTtcbiAgICAgICAgZHN0WzE1XSA9IG1bMTVdO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCByb3RhdGVzIGFyb3VuZCB0aGUgeS1heGlzIGJ5IHRoZSBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGlvbiBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHJvdGF0aW9uWShhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG4gICAgZHN0WzBdID0gYztcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IC1zO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSAxO1xuICAgIGRzdFs2XSA9IDA7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSBzO1xuICAgIGRzdFs5XSA9IDA7XG4gICAgZHN0WzEwXSA9IGM7XG4gICAgZHN0WzExXSA9IDA7XG4gICAgZHN0WzEyXSA9IDA7XG4gICAgZHN0WzEzXSA9IDA7XG4gICAgZHN0WzE0XSA9IDA7XG4gICAgZHN0WzE1XSA9IDE7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIHktYXhpcyBieSB0aGUgZ2l2ZW5cbiAqIGFuZ2xlLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHJvdGF0ZWQgbWF0cml4LlxuICovXG5mdW5jdGlvbiByb3RhdGVZJDEobSwgYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgY29uc3QgbTAwID0gbVswICogNCArIDBdO1xuICAgIGNvbnN0IG0wMSA9IG1bMCAqIDQgKyAxXTtcbiAgICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gICAgY29uc3QgbTAzID0gbVswICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG4gICAgZHN0WzBdID0gYyAqIG0wMCAtIHMgKiBtMjA7XG4gICAgZHN0WzFdID0gYyAqIG0wMSAtIHMgKiBtMjE7XG4gICAgZHN0WzJdID0gYyAqIG0wMiAtIHMgKiBtMjI7XG4gICAgZHN0WzNdID0gYyAqIG0wMyAtIHMgKiBtMjM7XG4gICAgZHN0WzhdID0gYyAqIG0yMCArIHMgKiBtMDA7XG4gICAgZHN0WzldID0gYyAqIG0yMSArIHMgKiBtMDE7XG4gICAgZHN0WzEwXSA9IGMgKiBtMjIgKyBzICogbTAyO1xuICAgIGRzdFsxMV0gPSBjICogbTIzICsgcyAqIG0wMztcbiAgICBpZiAobSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFs0XSA9IG1bNF07XG4gICAgICAgIGRzdFs1XSA9IG1bNV07XG4gICAgICAgIGRzdFs2XSA9IG1bNl07XG4gICAgICAgIGRzdFs3XSA9IG1bN107XG4gICAgICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICAgICAgZHN0WzEzXSA9IG1bMTNdO1xuICAgICAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggcm90YXRlcyBhcm91bmQgdGhlIHotYXhpcyBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRpb24gbWF0cml4LlxuICovXG5mdW5jdGlvbiByb3RhdGlvblooYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGRzdFswXSA9IGM7XG4gICAgZHN0WzFdID0gcztcbiAgICBkc3RbMl0gPSAwO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gLXM7XG4gICAgZHN0WzVdID0gYztcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJvdGF0ZXMgdGhlIGdpdmVuIDQtYnktNCBtYXRyaXggYXJvdW5kIHRoZSB6LWF4aXMgYnkgdGhlIGdpdmVuXG4gKiBhbmdsZS5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcm90YXRlWiQxKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0wMyA9IG1bMCAqIDQgKyAzXTtcbiAgICBjb25zdCBtMTAgPSBtWzEgKiA0ICsgMF07XG4gICAgY29uc3QgbTExID0gbVsxICogNCArIDFdO1xuICAgIGNvbnN0IG0xMiA9IG1bMSAqIDQgKyAyXTtcbiAgICBjb25zdCBtMTMgPSBtWzEgKiA0ICsgM107XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGRzdFswXSA9IGMgKiBtMDAgKyBzICogbTEwO1xuICAgIGRzdFsxXSA9IGMgKiBtMDEgKyBzICogbTExO1xuICAgIGRzdFsyXSA9IGMgKiBtMDIgKyBzICogbTEyO1xuICAgIGRzdFszXSA9IGMgKiBtMDMgKyBzICogbTEzO1xuICAgIGRzdFs0XSA9IGMgKiBtMTAgLSBzICogbTAwO1xuICAgIGRzdFs1XSA9IGMgKiBtMTEgLSBzICogbTAxO1xuICAgIGRzdFs2XSA9IGMgKiBtMTIgLSBzICogbTAyO1xuICAgIGRzdFs3XSA9IGMgKiBtMTMgLSBzICogbTAzO1xuICAgIGlmIChtICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzhdID0gbVs4XTtcbiAgICAgICAgZHN0WzldID0gbVs5XTtcbiAgICAgICAgZHN0WzEwXSA9IG1bMTBdO1xuICAgICAgICBkc3RbMTFdID0gbVsxMV07XG4gICAgICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICAgICAgZHN0WzEzXSA9IG1bMTNdO1xuICAgICAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggcm90YXRlcyBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlIGdpdmVuXG4gKiBhbmdsZS5cbiAqIEBwYXJhbSBheGlzIC0gVGhlIGF4aXNcbiAqICAgICBhYm91dCB3aGljaCB0byByb3RhdGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIG1hdHJpeCB3aGljaCByb3RhdGVzIGFuZ2xlIHJhZGlhbnNcbiAqICAgICBhcm91bmQgdGhlIGF4aXMuXG4gKi9cbmZ1bmN0aW9uIGF4aXNSb3RhdGlvbihheGlzLCBhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBsZXQgeCA9IGF4aXNbMF07XG4gICAgbGV0IHkgPSBheGlzWzFdO1xuICAgIGxldCB6ID0gYXhpc1syXTtcbiAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gICAgeCAvPSBuO1xuICAgIHkgLz0gbjtcbiAgICB6IC89IG47XG4gICAgY29uc3QgeHggPSB4ICogeDtcbiAgICBjb25zdCB5eSA9IHkgKiB5O1xuICAgIGNvbnN0IHp6ID0geiAqIHo7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IG9uZU1pbnVzQ29zaW5lID0gMSAtIGM7XG4gICAgZHN0WzBdID0geHggKyAoMSAtIHh4KSAqIGM7XG4gICAgZHN0WzFdID0geCAqIHkgKiBvbmVNaW51c0Nvc2luZSArIHogKiBzO1xuICAgIGRzdFsyXSA9IHggKiB6ICogb25lTWludXNDb3NpbmUgLSB5ICogcztcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IHggKiB5ICogb25lTWludXNDb3NpbmUgLSB6ICogcztcbiAgICBkc3RbNV0gPSB5eSArICgxIC0geXkpICogYztcbiAgICBkc3RbNl0gPSB5ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeCAqIHM7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeSAqIHM7XG4gICAgZHN0WzldID0geSAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHggKiBzO1xuICAgIGRzdFsxMF0gPSB6eiArICgxIC0genopICogYztcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gMDtcbiAgICBkc3RbMTNdID0gMDtcbiAgICBkc3RbMTRdID0gMDtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCByb3RhdGVzIGFyb3VuZCB0aGUgZ2l2ZW4gYXhpcyBieSB0aGUgZ2l2ZW5cbiAqIGFuZ2xlLiAoc2FtZSBhcyBheGlzUm90YXRpb24pXG4gKiBAcGFyYW0gYXhpcyAtIFRoZSBheGlzXG4gKiAgICAgYWJvdXQgd2hpY2ggdG8gcm90YXRlLlxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBtYXRyaXggd2hpY2ggcm90YXRlcyBhbmdsZSByYWRpYW5zXG4gKiAgICAgYXJvdW5kIHRoZSBheGlzLlxuICovXG5jb25zdCByb3RhdGlvbiA9IGF4aXNSb3RhdGlvbjtcbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlXG4gKiBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBheGlzIC0gVGhlIGF4aXNcbiAqICAgICBhYm91dCB3aGljaCB0byByb3RhdGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIGF4aXNSb3RhdGUobSwgYXhpcywgYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgbGV0IHggPSBheGlzWzBdO1xuICAgIGxldCB5ID0gYXhpc1sxXTtcbiAgICBsZXQgeiA9IGF4aXNbMl07XG4gICAgY29uc3QgbiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICAgIHggLz0gbjtcbiAgICB5IC89IG47XG4gICAgeiAvPSBuO1xuICAgIGNvbnN0IHh4ID0geCAqIHg7XG4gICAgY29uc3QgeXkgPSB5ICogeTtcbiAgICBjb25zdCB6eiA9IHogKiB6O1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBvbmVNaW51c0Nvc2luZSA9IDEgLSBjO1xuICAgIGNvbnN0IHIwMCA9IHh4ICsgKDEgLSB4eCkgKiBjO1xuICAgIGNvbnN0IHIwMSA9IHggKiB5ICogb25lTWludXNDb3NpbmUgKyB6ICogcztcbiAgICBjb25zdCByMDIgPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lIC0geSAqIHM7XG4gICAgY29uc3QgcjEwID0geCAqIHkgKiBvbmVNaW51c0Nvc2luZSAtIHogKiBzO1xuICAgIGNvbnN0IHIxMSA9IHl5ICsgKDEgLSB5eSkgKiBjO1xuICAgIGNvbnN0IHIxMiA9IHkgKiB6ICogb25lTWludXNDb3NpbmUgKyB4ICogcztcbiAgICBjb25zdCByMjAgPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeSAqIHM7XG4gICAgY29uc3QgcjIxID0geSAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHggKiBzO1xuICAgIGNvbnN0IHIyMiA9IHp6ICsgKDEgLSB6eikgKiBjO1xuICAgIGNvbnN0IG0wMCA9IG1bMF07XG4gICAgY29uc3QgbTAxID0gbVsxXTtcbiAgICBjb25zdCBtMDIgPSBtWzJdO1xuICAgIGNvbnN0IG0wMyA9IG1bM107XG4gICAgY29uc3QgbTEwID0gbVs0XTtcbiAgICBjb25zdCBtMTEgPSBtWzVdO1xuICAgIGNvbnN0IG0xMiA9IG1bNl07XG4gICAgY29uc3QgbTEzID0gbVs3XTtcbiAgICBjb25zdCBtMjAgPSBtWzhdO1xuICAgIGNvbnN0IG0yMSA9IG1bOV07XG4gICAgY29uc3QgbTIyID0gbVsxMF07XG4gICAgY29uc3QgbTIzID0gbVsxMV07XG4gICAgZHN0WzBdID0gcjAwICogbTAwICsgcjAxICogbTEwICsgcjAyICogbTIwO1xuICAgIGRzdFsxXSA9IHIwMCAqIG0wMSArIHIwMSAqIG0xMSArIHIwMiAqIG0yMTtcbiAgICBkc3RbMl0gPSByMDAgKiBtMDIgKyByMDEgKiBtMTIgKyByMDIgKiBtMjI7XG4gICAgZHN0WzNdID0gcjAwICogbTAzICsgcjAxICogbTEzICsgcjAyICogbTIzO1xuICAgIGRzdFs0XSA9IHIxMCAqIG0wMCArIHIxMSAqIG0xMCArIHIxMiAqIG0yMDtcbiAgICBkc3RbNV0gPSByMTAgKiBtMDEgKyByMTEgKiBtMTEgKyByMTIgKiBtMjE7XG4gICAgZHN0WzZdID0gcjEwICogbTAyICsgcjExICogbTEyICsgcjEyICogbTIyO1xuICAgIGRzdFs3XSA9IHIxMCAqIG0wMyArIHIxMSAqIG0xMyArIHIxMiAqIG0yMztcbiAgICBkc3RbOF0gPSByMjAgKiBtMDAgKyByMjEgKiBtMTAgKyByMjIgKiBtMjA7XG4gICAgZHN0WzldID0gcjIwICogbTAxICsgcjIxICogbTExICsgcjIyICogbTIxO1xuICAgIGRzdFsxMF0gPSByMjAgKiBtMDIgKyByMjEgKiBtMTIgKyByMjIgKiBtMjI7XG4gICAgZHN0WzExXSA9IHIyMCAqIG0wMyArIHIyMSAqIG0xMyArIHIyMiAqIG0yMztcbiAgICBpZiAobSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICAgICAgZHN0WzEzXSA9IG1bMTNdO1xuICAgICAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlXG4gKiBnaXZlbiBhbmdsZS4gKHNhbWUgYXMgcm90YXRlKVxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGF4aXMgLSBUaGUgYXhpc1xuICogICAgIGFib3V0IHdoaWNoIHRvIHJvdGF0ZS5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqL1xuY29uc3Qgcm90YXRlID0gYXhpc1JvdGF0ZTtcbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggc2NhbGVzIGluIGVhY2ggZGltZW5zaW9uIGJ5IGFuIGFtb3VudCBnaXZlbiBieVxuICogdGhlIGNvcnJlc3BvbmRpbmcgZW50cnkgaW4gdGhlIGdpdmVuIHZlY3RvcjsgYXNzdW1lcyB0aGUgdmVjdG9yIGhhcyB0aHJlZVxuICogZW50cmllcy5cbiAqIEBwYXJhbSB2IC0gQSB2ZWN0b3Igb2ZcbiAqICAgICB0aHJlZSBlbnRyaWVzIHNwZWNpZnlpbmcgdGhlIGZhY3RvciBieSB3aGljaCB0byBzY2FsZSBpbiBlYWNoIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGluZyBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHNjYWxpbmcodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSB2WzBdO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gdlsxXTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSB2WzJdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhbiBhbW91bnRcbiAqIGdpdmVuIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGVudHJ5IGluIHRoZSBnaXZlbiB2ZWN0b3I7IGFzc3VtZXMgdGhlIHZlY3RvciBoYXNcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXggdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0gdiAtIEEgdmVjdG9yIG9mIHRocmVlIGVudHJpZXMgc3BlY2lmeWluZyB0aGVcbiAqICAgICBmYWN0b3IgYnkgd2hpY2ggdG8gc2NhbGUgaW4gZWFjaCBkaW1lbnNpb24uXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHNjYWxlJDIobSwgdiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICBkc3RbMF0gPSB2MCAqIG1bMCAqIDQgKyAwXTtcbiAgICBkc3RbMV0gPSB2MCAqIG1bMCAqIDQgKyAxXTtcbiAgICBkc3RbMl0gPSB2MCAqIG1bMCAqIDQgKyAyXTtcbiAgICBkc3RbM10gPSB2MCAqIG1bMCAqIDQgKyAzXTtcbiAgICBkc3RbNF0gPSB2MSAqIG1bMSAqIDQgKyAwXTtcbiAgICBkc3RbNV0gPSB2MSAqIG1bMSAqIDQgKyAxXTtcbiAgICBkc3RbNl0gPSB2MSAqIG1bMSAqIDQgKyAyXTtcbiAgICBkc3RbN10gPSB2MSAqIG1bMSAqIDQgKyAzXTtcbiAgICBkc3RbOF0gPSB2MiAqIG1bMiAqIDQgKyAwXTtcbiAgICBkc3RbOV0gPSB2MiAqIG1bMiAqIDQgKyAxXTtcbiAgICBkc3RbMTBdID0gdjIgKiBtWzIgKiA0ICsgMl07XG4gICAgZHN0WzExXSA9IHYyICogbVsyICogNCArIDNdO1xuICAgIGlmIChtICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzEyXSA9IG1bMTJdO1xuICAgICAgICBkc3RbMTNdID0gbVsxM107XG4gICAgICAgIGRzdFsxNF0gPSBtWzE0XTtcbiAgICAgICAgZHN0WzE1XSA9IG1bMTVdO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCBzY2FsZXMgYSB1bmlmb3JtIGFtb3VudCBpbiBlYWNoIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBzIC0gdGhlIGFtb3VudCB0byBzY2FsZVxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsaW5nIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gdW5pZm9ybVNjYWxpbmcocywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSBzO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gcztcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSBzO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhIHVuaWZvcm0gc2NhbGUuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXggdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0gcyAtIFRoZSBhbW91bnQgdG8gc2NhbGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHVuaWZvcm1TY2FsZShtLCBzLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGRzdFswXSA9IHMgKiBtWzAgKiA0ICsgMF07XG4gICAgZHN0WzFdID0gcyAqIG1bMCAqIDQgKyAxXTtcbiAgICBkc3RbMl0gPSBzICogbVswICogNCArIDJdO1xuICAgIGRzdFszXSA9IHMgKiBtWzAgKiA0ICsgM107XG4gICAgZHN0WzRdID0gcyAqIG1bMSAqIDQgKyAwXTtcbiAgICBkc3RbNV0gPSBzICogbVsxICogNCArIDFdO1xuICAgIGRzdFs2XSA9IHMgKiBtWzEgKiA0ICsgMl07XG4gICAgZHN0WzddID0gcyAqIG1bMSAqIDQgKyAzXTtcbiAgICBkc3RbOF0gPSBzICogbVsyICogNCArIDBdO1xuICAgIGRzdFs5XSA9IHMgKiBtWzIgKiA0ICsgMV07XG4gICAgZHN0WzEwXSA9IHMgKiBtWzIgKiA0ICsgMl07XG4gICAgZHN0WzExXSA9IHMgKiBtWzIgKiA0ICsgM107XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbMTJdID0gbVsxMl07XG4gICAgICAgIGRzdFsxM10gPSBtWzEzXTtcbiAgICAgICAgZHN0WzE0XSA9IG1bMTRdO1xuICAgICAgICBkc3RbMTVdID0gbVsxNV07XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciBtYXQ0SW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgc2V0RGVmYXVsdFR5cGU6IHNldERlZmF1bHRUeXBlJDMsXG4gICAgY3JlYXRlOiBjcmVhdGUkMixcbiAgICBzZXQ6IHNldCQyLFxuICAgIGZyb21NYXQzOiBmcm9tTWF0MyxcbiAgICBmcm9tUXVhdDogZnJvbVF1YXQsXG4gICAgbmVnYXRlOiBuZWdhdGUkMSxcbiAgICBjb3B5OiBjb3B5JDIsXG4gICAgY2xvbmU6IGNsb25lJDIsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSQyLFxuICAgIGVxdWFsczogZXF1YWxzJDIsXG4gICAgaWRlbnRpdHk6IGlkZW50aXR5JDEsXG4gICAgdHJhbnNwb3NlOiB0cmFuc3Bvc2UsXG4gICAgaW52ZXJzZTogaW52ZXJzZSQyLFxuICAgIGRldGVybWluYW50OiBkZXRlcm1pbmFudCxcbiAgICBpbnZlcnQ6IGludmVydCQxLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQyLFxuICAgIG11bDogbXVsJDIsXG4gICAgc2V0VHJhbnNsYXRpb246IHNldFRyYW5zbGF0aW9uLFxuICAgIGdldFRyYW5zbGF0aW9uOiBnZXRUcmFuc2xhdGlvbixcbiAgICBnZXRBeGlzOiBnZXRBeGlzLFxuICAgIHNldEF4aXM6IHNldEF4aXMsXG4gICAgZ2V0U2NhbGluZzogZ2V0U2NhbGluZyxcbiAgICBwZXJzcGVjdGl2ZTogcGVyc3BlY3RpdmUsXG4gICAgb3J0aG86IG9ydGhvLFxuICAgIGZydXN0dW06IGZydXN0dW0sXG4gICAgYWltOiBhaW0sXG4gICAgY2FtZXJhQWltOiBjYW1lcmFBaW0sXG4gICAgbG9va0F0OiBsb29rQXQsXG4gICAgdHJhbnNsYXRpb246IHRyYW5zbGF0aW9uLFxuICAgIHRyYW5zbGF0ZTogdHJhbnNsYXRlLFxuICAgIHJvdGF0aW9uWDogcm90YXRpb25YLFxuICAgIHJvdGF0ZVg6IHJvdGF0ZVgkMSxcbiAgICByb3RhdGlvblk6IHJvdGF0aW9uWSxcbiAgICByb3RhdGVZOiByb3RhdGVZJDEsXG4gICAgcm90YXRpb25aOiByb3RhdGlvblosXG4gICAgcm90YXRlWjogcm90YXRlWiQxLFxuICAgIGF4aXNSb3RhdGlvbjogYXhpc1JvdGF0aW9uLFxuICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICBheGlzUm90YXRlOiBheGlzUm90YXRlLFxuICAgIHJvdGF0ZTogcm90YXRlLFxuICAgIHNjYWxpbmc6IHNjYWxpbmcsXG4gICAgc2NhbGU6IHNjYWxlJDIsXG4gICAgdW5pZm9ybVNjYWxpbmc6IHVuaWZvcm1TY2FsaW5nLFxuICAgIHVuaWZvcm1TY2FsZTogdW5pZm9ybVNjYWxlXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKlxuICogUXVhdDQgbWF0aCBmdW5jdGlvbnMuXG4gKlxuICogQWxtb3N0IGFsbCBmdW5jdGlvbnMgdGFrZSBhbiBvcHRpb25hbCBgZHN0YCBhcmd1bWVudC4gSWYgaXQgaXMgbm90IHBhc3NlZCBpbiB0aGVcbiAqIGZ1bmN0aW9ucyB3aWxsIGNyZWF0ZSBhIG5ldyBgUXVhdDRgLiBJbiBvdGhlciB3b3JkcyB5b3UgY2FuIGRvIHRoaXNcbiAqXG4gKiAgICAgY29uc3QgdiA9IHF1YXQ0LmNyb3NzKHYxLCB2Mik7ICAvLyBDcmVhdGVzIGEgbmV3IFF1YXQ0IHdpdGggdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2Mi5cbiAqXG4gKiBvclxuICpcbiAqICAgICBjb25zdCB2ID0gcXVhdDQuY3JlYXRlKCk7XG4gKiAgICAgcXVhdDQuY3Jvc3ModjEsIHYyLCB2KTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2XG4gKlxuICogVGhlIGZpcnN0IHN0eWxlIGlzIG9mdGVuIGVhc2llciBidXQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0J3MgdXNlZCBpdCBnZW5lcmF0ZXMgZ2FyYmFnZSB3aGVyZVxuICogYXMgdGhlcmUgaXMgYWxtb3N0IG5ldmVyIGFsbG9jYXRpb24gd2l0aCB0aGUgc2Vjb25kIHN0eWxlLlxuICpcbiAqIEl0IGlzIGFsd2F5cyBzYWZlIHRvIHBhc3MgYW55IHZlY3RvciBhcyB0aGUgZGVzdGluYXRpb24uIFNvIGZvciBleGFtcGxlXG4gKlxuICogICAgIHF1YXQ0LmNyb3NzKHYxLCB2MiwgdjEpOyAgLy8gUHV0cyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyIGluIHYxXG4gKlxuICovXG5sZXQgUXVhdFR5cGUgPSBGbG9hdDMyQXJyYXk7XG4vKipcbiAqIFNldHMgdGhlIHR5cGUgdGhpcyBsaWJyYXJ5IGNyZWF0ZXMgZm9yIGEgUXVhdDRcbiAqIEBwYXJhbSBjdG9yIC0gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRWl0aGVyIGBGbG9hdDMyQXJyYXlgLCBgRmxvYXQ2NEFycmF5YCwgb3IgYEFycmF5YFxuICogQHJldHVybnMgcHJldmlvdXMgY29uc3RydWN0b3IgZm9yIFF1YXQ0XG4gKi9cbmZ1bmN0aW9uIHNldERlZmF1bHRUeXBlJDIoY3Rvcikge1xuICAgIGNvbnN0IG9sZFR5cGUgPSBRdWF0VHlwZTtcbiAgICBRdWF0VHlwZSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0NDsgbWF5IGJlIGNhbGxlZCB3aXRoIHgsIHksIHogdG8gc2V0IGluaXRpYWwgdmFsdWVzLlxuICogQHBhcmFtIHggLSBJbml0aWFsIHggdmFsdWUuXG4gKiBAcGFyYW0geSAtIEluaXRpYWwgeSB2YWx1ZS5cbiAqIEBwYXJhbSB6IC0gSW5pdGlhbCB6IHZhbHVlLlxuICogQHBhcmFtIHcgLSBJbml0aWFsIHcgdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gY3JlYXRlJDEoeCwgeSwgeiwgdykge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBpZiAoeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRzdFswXSA9IHg7XG4gICAgICAgIGlmICh5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzdFsxXSA9IHk7XG4gICAgICAgICAgICBpZiAoeiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZHN0WzJdID0gejtcbiAgICAgICAgICAgICAgICBpZiAodyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRzdFszXSA9IHc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFF1YXQ7IG1heSBiZSBjYWxsZWQgd2l0aCB4LCB5LCB6IHRvIHNldCBpbml0aWFsIHZhbHVlcy4gKHNhbWUgYXMgY3JlYXRlKVxuICogQHBhcmFtIHggLSBJbml0aWFsIHggdmFsdWUuXG4gKiBAcGFyYW0geSAtIEluaXRpYWwgeSB2YWx1ZS5cbiAqIEBwYXJhbSB6IC0gSW5pdGlhbCB6IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHcgdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuY29uc3QgZnJvbVZhbHVlcyQxID0gY3JlYXRlJDE7XG4vKipcbiAqIFNldHMgdGhlIHZhbHVlcyBvZiBhIFF1YXRcbiAqIEFsc28gc2VlIHtAbGluayBxdWF0LmNyZWF0ZX0gYW5kIHtAbGluayBxdWF0LmNvcHl9XG4gKlxuICogQHBhcmFtIHggZmlyc3QgdmFsdWVcbiAqIEBwYXJhbSB5IHNlY29uZCB2YWx1ZVxuICogQHBhcmFtIHogdGhpcmQgdmFsdWVcbiAqIEBwYXJhbSB3IGZvdXJ0aCB2YWx1ZVxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHdpdGggaXRzIGVsZW1lbnRzIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0JDEoeCwgeSwgeiwgdywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSB4O1xuICAgIGRzdFsxXSA9IHk7XG4gICAgZHN0WzJdID0gejtcbiAgICBkc3RbM10gPSB3O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNldHMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFuZCAgYXhpcyxcbiAqIHRoZW4gcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0gYXhpcyAtIHRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmRcbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIHRoZSBhbmdsZVxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcXVhdGVybmlvbiB0aGF0IHJlcHJlc2VudHMgdGhlIGdpdmVuIGF4aXMgYW5kIGFuZ2xlXG4gKiovXG5mdW5jdGlvbiBmcm9tQXhpc0FuZ2xlKGF4aXMsIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGhhbGZBbmdsZSA9IGFuZ2xlSW5SYWRpYW5zICogMC41O1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihoYWxmQW5nbGUpO1xuICAgIGRzdFswXSA9IHMgKiBheGlzWzBdO1xuICAgIGRzdFsxXSA9IHMgKiBheGlzWzFdO1xuICAgIGRzdFsyXSA9IHMgKiBheGlzWzJdO1xuICAgIGRzdFszXSA9IE1hdGguY29zKGhhbGZBbmdsZSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogR2V0cyB0aGUgcm90YXRpb24gYXhpcyBhbmQgYW5nbGVcbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byBjb21wdXRlIGZyb21cbiAqIEBwYXJhbSBkc3QgLSBWZWMzIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiBhbmdsZSBhbmQgYXhpc1xuICovXG5mdW5jdGlvbiB0b0F4aXNBbmdsZShxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgY3JlYXRlJDMoNCk7XG4gICAgY29uc3QgYW5nbGUgPSBNYXRoLmFjb3MocVszXSkgKiAyO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7XG4gICAgaWYgKHMgPiBFUFNJTE9OKSB7XG4gICAgICAgIGRzdFswXSA9IHFbMF0gLyBzO1xuICAgICAgICBkc3RbMV0gPSBxWzFdIC8gcztcbiAgICAgICAgZHN0WzJdID0gcVsyXSAvIHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkc3RbMF0gPSAxO1xuICAgICAgICBkc3RbMV0gPSAwO1xuICAgICAgICBkc3RbMl0gPSAwO1xuICAgIH1cbiAgICByZXR1cm4geyBhbmdsZSwgYXhpczogZHN0IH07XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGFuZ2xlIGluIGRlZ3JlZXMgYmV0d2VlbiB0d28gcm90YXRpb25zIGEgYW5kIGIuXG4gKiBAcGFyYW0gYSAtIHF1YXRlcm5pb24gYVxuICogQHBhcmFtIGIgLSBxdWF0ZXJuaW9uIGJcbiAqIEByZXR1cm4gYW5nbGUgaW4gcmFkaWFucyBiZXR3ZWVuIHRoZSB0d28gcXVhdGVybmlvbnNcbiAqL1xuZnVuY3Rpb24gYW5nbGUoYSwgYikge1xuICAgIGNvbnN0IGQgPSBkb3QkMShhLCBiKTtcbiAgICByZXR1cm4gTWF0aC5hY29zKDIgKiBkICogZCAtIDEpO1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSBhIC0gdGhlIGZpcnN0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSBiIC0gdGhlIHNlY29uZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYSAqIGJcbiAqL1xuZnVuY3Rpb24gbXVsdGlwbHkkMShhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGF4ID0gYVswXTtcbiAgICBjb25zdCBheSA9IGFbMV07XG4gICAgY29uc3QgYXogPSBhWzJdO1xuICAgIGNvbnN0IGF3ID0gYVszXTtcbiAgICBjb25zdCBieCA9IGJbMF07XG4gICAgY29uc3QgYnkgPSBiWzFdO1xuICAgIGNvbnN0IGJ6ID0gYlsyXTtcbiAgICBjb25zdCBidyA9IGJbM107XG4gICAgZHN0WzBdID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieTtcbiAgICBkc3RbMV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICAgIGRzdFsyXSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gICAgZHN0WzNdID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSBhIC0gdGhlIGZpcnN0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSBiIC0gdGhlIHNlY29uZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYSAqIGJcbiAqL1xuY29uc3QgbXVsJDEgPSBtdWx0aXBseSQxO1xuLyoqXG4gKiBSb3RhdGVzIHRoZSBnaXZlbiBxdWF0ZXJuaW9uIGFyb3VuZCB0aGUgWCBheGlzIGJ5IHRoZSBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBxdWF0ZXJuaW9uIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhICogYlxuICovXG5mdW5jdGlvbiByb3RhdGVYKHEsIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGhhbGZBbmdsZSA9IGFuZ2xlSW5SYWRpYW5zICogMC41O1xuICAgIGNvbnN0IHF4ID0gcVswXTtcbiAgICBjb25zdCBxeSA9IHFbMV07XG4gICAgY29uc3QgcXogPSBxWzJdO1xuICAgIGNvbnN0IHF3ID0gcVszXTtcbiAgICBjb25zdCBieCA9IE1hdGguc2luKGhhbGZBbmdsZSk7XG4gICAgY29uc3QgYncgPSBNYXRoLmNvcyhoYWxmQW5nbGUpO1xuICAgIGRzdFswXSA9IHF4ICogYncgKyBxdyAqIGJ4O1xuICAgIGRzdFsxXSA9IHF5ICogYncgKyBxeiAqIGJ4O1xuICAgIGRzdFsyXSA9IHF6ICogYncgLSBxeSAqIGJ4O1xuICAgIGRzdFszXSA9IHF3ICogYncgLSBxeCAqIGJ4O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJvdGF0ZXMgdGhlIGdpdmVuIHF1YXRlcm5pb24gYXJvdW5kIHRoZSBZIGF4aXMgYnkgdGhlIGdpdmVuIGFuZ2xlLlxuICogQHBhcmFtIHEgLSBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZVxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGEgKiBiXG4gKi9cbmZ1bmN0aW9uIHJvdGF0ZVkocSwgYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgY29uc3QgaGFsZkFuZ2xlID0gYW5nbGVJblJhZGlhbnMgKiAwLjU7XG4gICAgY29uc3QgcXggPSBxWzBdO1xuICAgIGNvbnN0IHF5ID0gcVsxXTtcbiAgICBjb25zdCBxeiA9IHFbMl07XG4gICAgY29uc3QgcXcgPSBxWzNdO1xuICAgIGNvbnN0IGJ5ID0gTWF0aC5zaW4oaGFsZkFuZ2xlKTtcbiAgICBjb25zdCBidyA9IE1hdGguY29zKGhhbGZBbmdsZSk7XG4gICAgZHN0WzBdID0gcXggKiBidyAtIHF6ICogYnk7XG4gICAgZHN0WzFdID0gcXkgKiBidyArIHF3ICogYnk7XG4gICAgZHN0WzJdID0gcXogKiBidyArIHF4ICogYnk7XG4gICAgZHN0WzNdID0gcXcgKiBidyAtIHF5ICogYnk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gcXVhdGVybmlvbiBhcm91bmQgdGhlIFogYXhpcyBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gcSAtIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYSAqIGJcbiAqL1xuZnVuY3Rpb24gcm90YXRlWihxLCBhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBjb25zdCBoYWxmQW5nbGUgPSBhbmdsZUluUmFkaWFucyAqIDAuNTtcbiAgICBjb25zdCBxeCA9IHFbMF07XG4gICAgY29uc3QgcXkgPSBxWzFdO1xuICAgIGNvbnN0IHF6ID0gcVsyXTtcbiAgICBjb25zdCBxdyA9IHFbM107XG4gICAgY29uc3QgYnogPSBNYXRoLnNpbihoYWxmQW5nbGUpO1xuICAgIGNvbnN0IGJ3ID0gTWF0aC5jb3MoaGFsZkFuZ2xlKTtcbiAgICBkc3RbMF0gPSBxeCAqIGJ3ICsgcXkgKiBiejtcbiAgICBkc3RbMV0gPSBxeSAqIGJ3IC0gcXggKiBiejtcbiAgICBkc3RbMl0gPSBxeiAqIGJ3ICsgcXcgKiBiejtcbiAgICBkc3RbM10gPSBxdyAqIGJ3IC0gcXogKiBiejtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTcGhlcmljYWxseSBsaW5lYXIgaW50ZXJwb2xhdGUgYmV0d2VlbiB0d28gcXVhdGVybmlvbnNcbiAqXG4gKiBAcGFyYW0gYSAtIHN0YXJ0aW5nIHZhbHVlXG4gKiBAcGFyYW0gYiAtIGVuZGluZyB2YWx1ZVxuICogQHBhcmFtIHQgLSB2YWx1ZSB3aGVyZSAwID0gYSBhbmQgMSA9IGJcbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBxdWF0ZXJuaW9uIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhICogYlxuICovXG5mdW5jdGlvbiBzbGVycChhLCBiLCB0LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGF4ID0gYVswXTtcbiAgICBjb25zdCBheSA9IGFbMV07XG4gICAgY29uc3QgYXogPSBhWzJdO1xuICAgIGNvbnN0IGF3ID0gYVszXTtcbiAgICBsZXQgYnggPSBiWzBdO1xuICAgIGxldCBieSA9IGJbMV07XG4gICAgbGV0IGJ6ID0gYlsyXTtcbiAgICBsZXQgYncgPSBiWzNdO1xuICAgIGxldCBjb3NPbWVnYSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7XG4gICAgaWYgKGNvc09tZWdhIDwgMCkge1xuICAgICAgICBjb3NPbWVnYSA9IC1jb3NPbWVnYTtcbiAgICAgICAgYnggPSAtYng7XG4gICAgICAgIGJ5ID0gLWJ5O1xuICAgICAgICBieiA9IC1iejtcbiAgICAgICAgYncgPSAtYnc7XG4gICAgfVxuICAgIGxldCBzY2FsZTA7XG4gICAgbGV0IHNjYWxlMTtcbiAgICBpZiAoMS4wIC0gY29zT21lZ2EgPiBFUFNJTE9OKSB7XG4gICAgICAgIGNvbnN0IG9tZWdhID0gTWF0aC5hY29zKGNvc09tZWdhKTtcbiAgICAgICAgY29uc3Qgc2luT21lZ2EgPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgICAgIHNjYWxlMCA9IE1hdGguc2luKCgxIC0gdCkgKiBvbWVnYSkgLyBzaW5PbWVnYTtcbiAgICAgICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbk9tZWdhO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICAgICAgc2NhbGUxID0gdDtcbiAgICB9XG4gICAgZHN0WzBdID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDtcbiAgICBkc3RbMV0gPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICAgIGRzdFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gICAgZHN0WzNdID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlIHRoZSBpbnZlcnNlIG9mIGEgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byBjb21wdXRlIHRoZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGEgKiBiXG4gKi9cbmZ1bmN0aW9uIGludmVyc2UkMShxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGEwID0gcVswXTtcbiAgICBjb25zdCBhMSA9IHFbMV07XG4gICAgY29uc3QgYTIgPSBxWzJdO1xuICAgIGNvbnN0IGEzID0gcVszXTtcbiAgICBjb25zdCBkb3QgPSBhMCAqIGEwICsgYTEgKiBhMSArIGEyICogYTIgKyBhMyAqIGEzO1xuICAgIGNvbnN0IGludkRvdCA9IGRvdCA/IDEgLyBkb3QgOiAwO1xuICAgIGRzdFswXSA9IC1hMCAqIGludkRvdDtcbiAgICBkc3RbMV0gPSAtYTEgKiBpbnZEb3Q7XG4gICAgZHN0WzJdID0gLWEyICogaW52RG90O1xuICAgIGRzdFszXSA9IGEzICogaW52RG90O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGUgdGhlIGNvbmp1Z2F0ZSBvZiBhIHF1YXRlcm5pb25cbiAqIEZvciBxdWF0ZXJuaW9ucyB3aXRoIGEgbWFnbml0dWRlIG9mIDEgKGEgdW5pdCBxdWF0ZXJuaW9uKVxuICogdGhpcyByZXR1cm5zIHRoZSBzYW1lIGFzIHRoZSBpbnZlcnNlIGJ1dCBpcyBmYXN0ZXIgdG8gY2FsY3VsYXRlLlxuICpcbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byBjb21wdXRlIHRoZSBjb25qdWdhdGUgb2YuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBjb25qdWdhdGUgb2YgcVxuICovXG5mdW5jdGlvbiBjb25qdWdhdGUocSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSAtcVswXTtcbiAgICBkc3RbMV0gPSAtcVsxXTtcbiAgICBkc3RbMl0gPSAtcVsyXTtcbiAgICBkc3RbM10gPSBxWzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBUaGUgY3JlYXRlZCBxdWF0ZXJuaW9uIGlzIG5vdCBub3JtYWxpemVkLlxuICpcbiAqIEBwYXJhbSBtIC0gcm90YXRpb24gbWF0cml4XG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSByZXN1bHRcbiAqL1xuZnVuY3Rpb24gZnJvbU1hdChtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIC8qXG4gICAgMCAxIDJcbiAgICAzIDQgNVxuICAgIDYgNyA4XG4gIFxuICAgIDAgMSAyXG4gICAgNCA1IDZcbiAgICA4IDkgMTBcbiAgICAgKi9cbiAgICAvLyBBbGdvcml0aG0gaW4gS2VuIFNob2VtYWtlJ3MgYXJ0aWNsZSBpbiAxOTg3IFNJR0dSQVBIIGNvdXJzZSBub3Rlc1xuICAgIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICAgIGNvbnN0IHRyYWNlID0gbVswXSArIG1bNV0gKyBtWzEwXTtcbiAgICBpZiAodHJhY2UgPiAwLjApIHtcbiAgICAgICAgLy8gfHd8ID4gMS8yLCBtYXkgYXMgd2VsbCBjaG9vc2UgdyA+IDEvMlxuICAgICAgICBjb25zdCByb290ID0gTWF0aC5zcXJ0KHRyYWNlICsgMSk7IC8vIDJ3XG4gICAgICAgIGRzdFszXSA9IDAuNSAqIHJvb3Q7XG4gICAgICAgIGNvbnN0IGludlJvb3QgPSAwLjUgLyByb290OyAvLyAxLyg0dylcbiAgICAgICAgZHN0WzBdID0gKG1bNl0gLSBtWzldKSAqIGludlJvb3Q7XG4gICAgICAgIGRzdFsxXSA9IChtWzhdIC0gbVsyXSkgKiBpbnZSb290O1xuICAgICAgICBkc3RbMl0gPSAobVsxXSAtIG1bNF0pICogaW52Um9vdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHx3fCA8PSAxLzJcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBpZiAobVs1XSA+IG1bMF0pIHtcbiAgICAgICAgICAgIGkgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtWzEwXSA+IG1baSAqIDQgKyBpXSkge1xuICAgICAgICAgICAgaSA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaiA9IChpICsgMSkgJSAzO1xuICAgICAgICBjb25zdCBrID0gKGkgKyAyKSAlIDM7XG4gICAgICAgIGNvbnN0IHJvb3QgPSBNYXRoLnNxcnQobVtpICogNCArIGldIC0gbVtqICogNCArIGpdIC0gbVtrICogNCArIGtdICsgMS4wKTtcbiAgICAgICAgZHN0W2ldID0gMC41ICogcm9vdDtcbiAgICAgICAgY29uc3QgaW52Um9vdCA9IDAuNSAvIHJvb3Q7XG4gICAgICAgIGRzdFszXSA9IChtW2ogKiA0ICsga10gLSBtW2sgKiA0ICsgal0pICogaW52Um9vdDtcbiAgICAgICAgZHN0W2pdID0gKG1baiAqIDQgKyBpXSArIG1baSAqIDQgKyBqXSkgKiBpbnZSb290O1xuICAgICAgICBkc3Rba10gPSAobVtrICogNCArIGldICsgbVtpICogNCArIGtdKSAqIGludlJvb3Q7XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIGV1bGVyIGFuZ2xlIHgsIHksIHogdXNpbmcgdGhlIHByb3ZpZGVkIGludHJpbnNpYyBvcmRlciBmb3IgdGhlIGNvbnZlcnNpb24uXG4gKlxuICogQHBhcmFtIHhBbmdsZUluUmFkaWFucyAtIGFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQgWCBheGlzIGluIHJhZGlhbnMuXG4gKiBAcGFyYW0geUFuZ2xlSW5SYWRpYW5zIC0gYW5nbGUgdG8gcm90YXRlIGFyb3VuZCBZIGF4aXMgaW4gcmFkaWFucy5cbiAqIEBwYXJhbSB6QW5nbGVJblJhZGlhbnMgLSBhbmdsZSB0byByb3RhdGUgYXJvdW5kIFogYXhpcyBpbiByYWRpYW5zLlxuICogQHBhcmFtIG9yZGVyIC0gb3JkZXIgdG8gYXBwbHkgZXVsZXIgYW5nbGVzXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiByZXByZXNlbnRpbmcgdGhlIHNhbWUgcm90YXRpb24gYXMgdGhlIGV1bGVyIGFuZ2xlcyBhcHBsaWVkIGluIHRoZSBnaXZlbiBvcmRlclxuICovXG5mdW5jdGlvbiBmcm9tRXVsZXIoeEFuZ2xlSW5SYWRpYW5zLCB5QW5nbGVJblJhZGlhbnMsIHpBbmdsZUluUmFkaWFucywgb3JkZXIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgY29uc3QgeEhhbGZBbmdsZSA9IHhBbmdsZUluUmFkaWFucyAqIDAuNTtcbiAgICBjb25zdCB5SGFsZkFuZ2xlID0geUFuZ2xlSW5SYWRpYW5zICogMC41O1xuICAgIGNvbnN0IHpIYWxmQW5nbGUgPSB6QW5nbGVJblJhZGlhbnMgKiAwLjU7XG4gICAgY29uc3Qgc3ggPSBNYXRoLnNpbih4SGFsZkFuZ2xlKTtcbiAgICBjb25zdCBjeCA9IE1hdGguY29zKHhIYWxmQW5nbGUpO1xuICAgIGNvbnN0IHN5ID0gTWF0aC5zaW4oeUhhbGZBbmdsZSk7XG4gICAgY29uc3QgY3kgPSBNYXRoLmNvcyh5SGFsZkFuZ2xlKTtcbiAgICBjb25zdCBzeiA9IE1hdGguc2luKHpIYWxmQW5nbGUpO1xuICAgIGNvbnN0IGN6ID0gTWF0aC5jb3MoekhhbGZBbmdsZSk7XG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgICBjYXNlICd4eXonOlxuICAgICAgICAgICAgZHN0WzBdID0gc3ggKiBjeSAqIGN6ICsgY3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzFdID0gY3ggKiBzeSAqIGN6IC0gc3ggKiBjeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzJdID0gY3ggKiBjeSAqIHN6ICsgc3ggKiBzeSAqIGN6O1xuICAgICAgICAgICAgZHN0WzNdID0gY3ggKiBjeSAqIGN6IC0gc3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3h6eSc6XG4gICAgICAgICAgICBkc3RbMF0gPSBzeCAqIGN5ICogY3ogLSBjeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMV0gPSBjeCAqIHN5ICogY3ogLSBzeCAqIGN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMl0gPSBjeCAqIGN5ICogc3ogKyBzeCAqIHN5ICogY3o7XG4gICAgICAgICAgICBkc3RbM10gPSBjeCAqIGN5ICogY3ogKyBzeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAneXh6JzpcbiAgICAgICAgICAgIGRzdFswXSA9IHN4ICogY3kgKiBjeiArIGN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsxXSA9IGN4ICogc3kgKiBjeiAtIHN4ICogY3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgICAgICAgICAgIGRzdFszXSA9IGN4ICogY3kgKiBjeiArIHN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd5engnOlxuICAgICAgICAgICAgZHN0WzBdID0gc3ggKiBjeSAqIGN6ICsgY3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzFdID0gY3ggKiBzeSAqIGN6ICsgc3ggKiBjeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzJdID0gY3ggKiBjeSAqIHN6IC0gc3ggKiBzeSAqIGN6O1xuICAgICAgICAgICAgZHN0WzNdID0gY3ggKiBjeSAqIGN6IC0gc3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3p4eSc6XG4gICAgICAgICAgICBkc3RbMF0gPSBzeCAqIGN5ICogY3ogLSBjeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMV0gPSBjeCAqIHN5ICogY3ogKyBzeCAqIGN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMl0gPSBjeCAqIGN5ICogc3ogKyBzeCAqIHN5ICogY3o7XG4gICAgICAgICAgICBkc3RbM10gPSBjeCAqIGN5ICogY3ogLSBzeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnenl4JzpcbiAgICAgICAgICAgIGRzdFswXSA9IHN4ICogY3kgKiBjeiAtIGN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsxXSA9IGN4ICogc3kgKiBjeiArIHN4ICogY3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgICAgICAgICAgIGRzdFszXSA9IGN4ICogY3kgKiBjeiArIHN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHJvdGF0aW9uIG9yZGVyOiAke29yZGVyfWApO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb3BpZXMgYSBxdWF0ZXJuaW9uLiAoc2FtZSBhcyB7QGxpbmsgcXVhdC5jbG9uZX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgcXVhdC5jcmVhdGV9IGFuZCB7QGxpbmsgcXVhdC5zZXR9XG4gKiBAcGFyYW0gcSAtIFRoZSBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyBhIGNvcHkgb2YgcVxuICovXG5mdW5jdGlvbiBjb3B5JDEocSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSBxWzBdO1xuICAgIGRzdFsxXSA9IHFbMV07XG4gICAgZHN0WzJdID0gcVsyXTtcbiAgICBkc3RbM10gPSBxWzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsb25lcyBhIHF1YXRlcm5pb24uIChzYW1lIGFzIHtAbGluayBxdWF0LmNvcHl9KVxuICogQWxzbyBzZWUge0BsaW5rIHF1YXQuY3JlYXRlfSBhbmQge0BsaW5rIHF1YXQuc2V0fVxuICogQHBhcmFtIHEgLSBUaGUgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIHEuXG4gKi9cbmNvbnN0IGNsb25lJDEgPSBjb3B5JDE7XG4vKipcbiAqIEFkZHMgdHdvIHF1YXRlcm5pb25zOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyB0aGUgc3VtIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIGFkZCQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSArIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl07XG4gICAgZHN0WzNdID0gYVszXSArIGJbM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byBxdWF0ZXJuaW9ucy5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSBkaWZmZXJlbmNlIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIHN1YnRyYWN0JDEoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSBhWzBdIC0gYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdIC0gYlsxXTtcbiAgICBkc3RbMl0gPSBhWzJdIC0gYlsyXTtcbiAgICBkc3RbM10gPSBhWzNdIC0gYlszXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdHdvIHF1YXRlcm5pb25zLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBxdWF0ZXJuaW9uIHRoYXQgaXMgdGhlIGRpZmZlcmVuY2Ugb2YgYSBhbmQgYi5cbiAqL1xuY29uc3Qgc3ViJDEgPSBzdWJ0cmFjdCQxO1xuLyoqXG4gKiBNdWx0aXBsaWVzIGEgcXVhdGVybmlvbiBieSBhIHNjYWxhci5cbiAqIEBwYXJhbSB2IC0gVGhlIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgcXVhdGVybmlvbi5cbiAqL1xuZnVuY3Rpb24gbXVsU2NhbGFyJDEodiwgaywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdICogaztcbiAgICBkc3RbMV0gPSB2WzFdICogaztcbiAgICBkc3RbMl0gPSB2WzJdICogaztcbiAgICBkc3RbM10gPSB2WzNdICogaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIGEgcXVhdGVybmlvbiBieSBhIHNjYWxhci4gKHNhbWUgYXMgbXVsU2NhbGFyKVxuICogQHBhcmFtIHYgLSBUaGUgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBxdWF0ZXJuaW9uLlxuICovXG5jb25zdCBzY2FsZSQxID0gbXVsU2NhbGFyJDE7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgcXVhdGVybmlvbi5cbiAqL1xuZnVuY3Rpb24gZGl2U2NhbGFyJDEodiwgaywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdIC8gaztcbiAgICBkc3RbMV0gPSB2WzFdIC8gaztcbiAgICBkc3RbMl0gPSB2WzJdIC8gaztcbiAgICBkc3RbM10gPSB2WzNdIC8gaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHF1YXRlcm5pb25zXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgZG90IHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gZG90JDEoYSwgYikge1xuICAgIHJldHVybiAoYVswXSAqIGJbMF0pICsgKGFbMV0gKiBiWzFdKSArIChhWzJdICogYlsyXSkgKyAoYVszXSAqIGJbM10pO1xufVxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gcXVhdGVybmlvbnMuXG4gKiBHaXZlbiBxdWF0ZXJuaW9ucyBhIGFuZCBiIGFuZCBpbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50IHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gdCAtIEludGVycG9sYXRpb24gY29lZmZpY2llbnQuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBsaW5lYXIgaW50ZXJwb2xhdGVkIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gbGVycCQxKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSArIHQgKiAoYlswXSAtIGFbMF0pO1xuICAgIGRzdFsxXSA9IGFbMV0gKyB0ICogKGJbMV0gLSBhWzFdKTtcbiAgICBkc3RbMl0gPSBhWzJdICsgdCAqIChiWzJdIC0gYVsyXSk7XG4gICAgZHN0WzNdID0gYVszXSArIHQgKiAoYlszXSAtIGFbM10pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvblxuICogQHBhcmFtIHYgLSBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHF1YXRlcm5pb24uXG4gKi9cbmZ1bmN0aW9uIGxlbmd0aCQxKHYpIHtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICBjb25zdCB2MyA9IHZbM107XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzKTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiBxdWF0ZXJuaW9uIChzYW1lIGFzIGxlbmd0aClcbiAqIEBwYXJhbSB2IC0gcXVhdGVybmlvbi5cbiAqIEByZXR1cm5zIGxlbmd0aCBvZiBxdWF0ZXJuaW9uLlxuICovXG5jb25zdCBsZW4kMSA9IGxlbmd0aCQxO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvblxuICogQHBhcmFtIHYgLSBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvbi5cbiAqL1xuZnVuY3Rpb24gbGVuZ3RoU3EkMSh2KSB7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgY29uc3QgdjMgPSB2WzNdO1xuICAgIHJldHVybiB2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvbiAoc2FtZSBhcyBsZW5ndGhTcSlcbiAqIEBwYXJhbSB2IC0gcXVhdGVybmlvbi5cbiAqIEByZXR1cm5zIHNxdWFyZSBvZiB0aGUgbGVuZ3RoIG9mIHF1YXRlcm5pb24uXG4gKi9cbmNvbnN0IGxlblNxJDEgPSBsZW5ndGhTcSQxO1xuLyoqXG4gKiBEaXZpZGVzIGEgcXVhdGVybmlvbiBieSBpdHMgRXVjbGlkZWFuIGxlbmd0aCBhbmQgcmV0dXJucyB0aGUgcXVvdGllbnQuXG4gKiBAcGFyYW0gdiAtIFRoZSBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgbm9ybWFsaXplZCBxdWF0ZXJuaW9uLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemUkMSh2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgdjIgPSB2WzJdO1xuICAgIGNvbnN0IHYzID0gdlszXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLnNxcnQodjAgKiB2MCArIHYxICogdjEgKyB2MiAqIHYyICsgdjMgKiB2Myk7XG4gICAgaWYgKGxlbiA+IDAuMDAwMDEpIHtcbiAgICAgICAgZHN0WzBdID0gdjAgLyBsZW47XG4gICAgICAgIGRzdFsxXSA9IHYxIC8gbGVuO1xuICAgICAgICBkc3RbMl0gPSB2MiAvIGxlbjtcbiAgICAgICAgZHN0WzNdID0gdjMgLyBsZW47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkc3RbMF0gPSAwO1xuICAgICAgICBkc3RbMV0gPSAwO1xuICAgICAgICBkc3RbMl0gPSAwO1xuICAgICAgICBkc3RbM10gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIHF1YXRlcm5pb25zIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgdHJ1ZSBpZiBxdWF0ZXJuaW9ucyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDEoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsyXSAtIGJbMl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzNdIC0gYlszXSkgPCBFUFNJTE9OO1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIHF1YXRlcm5pb25zIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgdHJ1ZSBpZiBxdWF0ZXJuaW9ucyBhcmUgZXhhY3RseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHMkMShhLCBiKSB7XG4gICAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM107XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gaWRlbnRpdHkgcXVhdGVybmlvblxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBhbiBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgZHN0WzBdID0gMDtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxubGV0IHRlbXBWZWMzO1xubGV0IHhVbml0VmVjMztcbmxldCB5VW5pdFZlYzM7XG4vKipcbiAqIENvbXB1dGVzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lIHZlY3RvciB0byBhbm90aGVyLlxuICpcbiAqIEBwYXJhbSBhVW5pdCAtIHRoZSBzdGFydCB2ZWN0b3JcbiAqIEBwYXJhbSBiVW5pdCAtIHRoZSBlbmQgdmVjdG9yXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSByZXN1bHRcbiAqL1xuZnVuY3Rpb24gcm90YXRpb25UbyhhVW5pdCwgYlVuaXQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgdGVtcFZlYzMgPSB0ZW1wVmVjMyB8fCBjcmVhdGUkMygpO1xuICAgIHhVbml0VmVjMyA9IHhVbml0VmVjMyB8fCBjcmVhdGUkMygxLCAwLCAwKTtcbiAgICB5VW5pdFZlYzMgPSB5VW5pdFZlYzMgfHwgY3JlYXRlJDMoMCwgMSwgMCk7XG4gICAgY29uc3QgZG90ID0gZG90JDIoYVVuaXQsIGJVbml0KTtcbiAgICBpZiAoZG90IDwgLTAuOTk5OTk5KSB7XG4gICAgICAgIGNyb3NzKHhVbml0VmVjMywgYVVuaXQsIHRlbXBWZWMzKTtcbiAgICAgICAgaWYgKGxlbiQyKHRlbXBWZWMzKSA8IDAuMDAwMDAxKSB7XG4gICAgICAgICAgICBjcm9zcyh5VW5pdFZlYzMsIGFVbml0LCB0ZW1wVmVjMyk7XG4gICAgICAgIH1cbiAgICAgICAgbm9ybWFsaXplJDIodGVtcFZlYzMsIHRlbXBWZWMzKTtcbiAgICAgICAgZnJvbUF4aXNBbmdsZSh0ZW1wVmVjMywgTWF0aC5QSSwgZHN0KTtcbiAgICAgICAgcmV0dXJuIGRzdDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZG90ID4gMC45OTk5OTkpIHtcbiAgICAgICAgZHN0WzBdID0gMDtcbiAgICAgICAgZHN0WzFdID0gMDtcbiAgICAgICAgZHN0WzJdID0gMDtcbiAgICAgICAgZHN0WzNdID0gMTtcbiAgICAgICAgcmV0dXJuIGRzdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNyb3NzKGFVbml0LCBiVW5pdCwgdGVtcFZlYzMpO1xuICAgICAgICBkc3RbMF0gPSB0ZW1wVmVjM1swXTtcbiAgICAgICAgZHN0WzFdID0gdGVtcFZlYzNbMV07XG4gICAgICAgIGRzdFsyXSA9IHRlbXBWZWMzWzJdO1xuICAgICAgICBkc3RbM10gPSAxICsgZG90O1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplJDEoZHN0LCBkc3QpO1xuICAgIH1cbn1cbmxldCB0ZW1wUXVhdDE7XG5sZXQgdGVtcFF1YXQyO1xuLyoqXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSBhIC0gdGhlIGZpcnN0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSBiIC0gdGhlIHNlY29uZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gYyAtIHRoZSB0aGlyZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gZCAtIHRoZSBmb3VydGggcXVhdGVybmlvblxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50IDAgdG8gMVxuICogQHJldHVybnMgcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIHNxbGVycChhLCBiLCBjLCBkLCB0LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIHRlbXBRdWF0MSA9IHRlbXBRdWF0MSB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgdGVtcFF1YXQyID0gdGVtcFF1YXQyIHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBzbGVycChhLCBkLCB0LCB0ZW1wUXVhdDEpO1xuICAgIHNsZXJwKGIsIGMsIHQsIHRlbXBRdWF0Mik7XG4gICAgc2xlcnAodGVtcFF1YXQxLCB0ZW1wUXVhdDIsIDIgKiB0ICogKDEgLSB0KSwgZHN0KTtcbiAgICByZXR1cm4gZHN0O1xufVxuXG52YXIgcXVhdEltcGwgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIGNyZWF0ZTogY3JlYXRlJDEsXG4gICAgc2V0RGVmYXVsdFR5cGU6IHNldERlZmF1bHRUeXBlJDIsXG4gICAgZnJvbVZhbHVlczogZnJvbVZhbHVlcyQxLFxuICAgIHNldDogc2V0JDEsXG4gICAgZnJvbUF4aXNBbmdsZTogZnJvbUF4aXNBbmdsZSxcbiAgICB0b0F4aXNBbmdsZTogdG9BeGlzQW5nbGUsXG4gICAgYW5nbGU6IGFuZ2xlLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQxLFxuICAgIG11bDogbXVsJDEsXG4gICAgcm90YXRlWDogcm90YXRlWCxcbiAgICByb3RhdGVZOiByb3RhdGVZLFxuICAgIHJvdGF0ZVo6IHJvdGF0ZVosXG4gICAgc2xlcnA6IHNsZXJwLFxuICAgIGludmVyc2U6IGludmVyc2UkMSxcbiAgICBjb25qdWdhdGU6IGNvbmp1Z2F0ZSxcbiAgICBmcm9tTWF0OiBmcm9tTWF0LFxuICAgIGZyb21FdWxlcjogZnJvbUV1bGVyLFxuICAgIGNvcHk6IGNvcHkkMSxcbiAgICBjbG9uZTogY2xvbmUkMSxcbiAgICBhZGQ6IGFkZCQxLFxuICAgIHN1YnRyYWN0OiBzdWJ0cmFjdCQxLFxuICAgIHN1Yjogc3ViJDEsXG4gICAgbXVsU2NhbGFyOiBtdWxTY2FsYXIkMSxcbiAgICBzY2FsZTogc2NhbGUkMSxcbiAgICBkaXZTY2FsYXI6IGRpdlNjYWxhciQxLFxuICAgIGRvdDogZG90JDEsXG4gICAgbGVycDogbGVycCQxLFxuICAgIGxlbmd0aDogbGVuZ3RoJDEsXG4gICAgbGVuOiBsZW4kMSxcbiAgICBsZW5ndGhTcTogbGVuZ3RoU3EkMSxcbiAgICBsZW5TcTogbGVuU3EkMSxcbiAgICBub3JtYWxpemU6IG5vcm1hbGl6ZSQxLFxuICAgIGVxdWFsc0FwcHJveGltYXRlbHk6IGVxdWFsc0FwcHJveGltYXRlbHkkMSxcbiAgICBlcXVhbHM6IGVxdWFscyQxLFxuICAgIGlkZW50aXR5OiBpZGVudGl0eSxcbiAgICByb3RhdGlvblRvOiByb3RhdGlvblRvLFxuICAgIHNxbGVycDogc3FsZXJwXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKlxuICogVmVjNCBtYXRoIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbG1vc3QgYWxsIGZ1bmN0aW9ucyB0YWtlIGFuIG9wdGlvbmFsIGBkc3RgIGFyZ3VtZW50LiBJZiBpdCBpcyBub3QgcGFzc2VkIGluIHRoZVxuICogZnVuY3Rpb25zIHdpbGwgY3JlYXRlIGEgbmV3IGBWZWM0YC4gSW4gb3RoZXIgd29yZHMgeW91IGNhbiBkbyB0aGlzXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWM0LmNyb3NzKHYxLCB2Mik7ICAvLyBDcmVhdGVzIGEgbmV3IFZlYzQgd2l0aCB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyLlxuICpcbiAqIG9yXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWM0LmNyZWF0ZSgpO1xuICogICAgIHZlYzQuY3Jvc3ModjEsIHYyLCB2KTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2XG4gKlxuICogVGhlIGZpcnN0IHN0eWxlIGlzIG9mdGVuIGVhc2llciBidXQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0J3MgdXNlZCBpdCBnZW5lcmF0ZXMgZ2FyYmFnZSB3aGVyZVxuICogYXMgdGhlcmUgaXMgYWxtb3N0IG5ldmVyIGFsbG9jYXRpb24gd2l0aCB0aGUgc2Vjb25kIHN0eWxlLlxuICpcbiAqIEl0IGlzIGFsd2F5cyBzYWZlIHRvIHBhc3MgYW55IHZlY3RvciBhcyB0aGUgZGVzdGluYXRpb24uIFNvIGZvciBleGFtcGxlXG4gKlxuICogICAgIHZlYzQuY3Jvc3ModjEsIHYyLCB2MSk7ICAvLyBQdXRzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHYxIHggdjIgaW4gdjFcbiAqXG4gKi9cbmxldCBWZWNUeXBlID0gRmxvYXQzMkFycmF5O1xuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIHRoaXMgbGlicmFyeSBjcmVhdGVzIGZvciBhIFZlYzRcbiAqIEBwYXJhbSBjdG9yIC0gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRWl0aGVyIGBGbG9hdDMyQXJyYXlgLCBgRmxvYXQ2NEFycmF5YCwgb3IgYEFycmF5YFxuICogQHJldHVybnMgcHJldmlvdXMgY29uc3RydWN0b3IgZm9yIFZlYzRcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdFR5cGUkMShjdG9yKSB7XG4gICAgY29uc3Qgb2xkVHlwZSA9IFZlY1R5cGU7XG4gICAgVmVjVHlwZSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB2ZWM0OyBtYXkgYmUgY2FsbGVkIHdpdGggeCwgeSwgeiB0byBzZXQgaW5pdGlhbCB2YWx1ZXMuXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcGFyYW0gdyAtIEluaXRpYWwgdyB2YWx1ZS5cbiAqIEByZXR1cm5zIHRoZSBjcmVhdGVkIHZlY3RvclxuICovXG5mdW5jdGlvbiBjcmVhdGUoeCwgeSwgeiwgdykge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBWZWNUeXBlKDQpO1xuICAgIGlmICh4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHN0WzBdID0geDtcbiAgICAgICAgaWYgKHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHN0WzFdID0geTtcbiAgICAgICAgICAgIGlmICh6ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkc3RbMl0gPSB6O1xuICAgICAgICAgICAgICAgIGlmICh3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZHN0WzNdID0gdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdmVjNDsgbWF5IGJlIGNhbGxlZCB3aXRoIHgsIHksIHogdG8gc2V0IGluaXRpYWwgdmFsdWVzLiAoc2FtZSBhcyBjcmVhdGUpXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcGFyYW0geiAtIEluaXRpYWwgdyB2YWx1ZS5cbiAqIEByZXR1cm5zIHRoZSBjcmVhdGVkIHZlY3RvclxuICovXG5jb25zdCBmcm9tVmFsdWVzID0gY3JlYXRlO1xuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZXMgb2YgYSBWZWM0XG4gKiBBbHNvIHNlZSB7QGxpbmsgdmVjNC5jcmVhdGV9IGFuZCB7QGxpbmsgdmVjNC5jb3B5fVxuICpcbiAqIEBwYXJhbSB4IGZpcnN0IHZhbHVlXG4gKiBAcGFyYW0geSBzZWNvbmQgdmFsdWVcbiAqIEBwYXJhbSB6IHRoaXJkIHZhbHVlXG4gKiBAcGFyYW0gdyBmb3VydGggdmFsdWVcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB3aXRoIGl0cyBlbGVtZW50cyBzZXQuXG4gKi9cbmZ1bmN0aW9uIHNldCh4LCB5LCB6LCB3LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0geDtcbiAgICBkc3RbMV0gPSB5O1xuICAgIGRzdFsyXSA9IHo7XG4gICAgZHN0WzNdID0gdztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBcHBsaWVzIE1hdGguY2VpbCB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIGNlaWwgb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIGNlaWwodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGguY2VpbCh2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmNlaWwodlsxXSk7XG4gICAgZHN0WzJdID0gTWF0aC5jZWlsKHZbMl0pO1xuICAgIGRzdFszXSA9IE1hdGguY2VpbCh2WzNdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBcHBsaWVzIE1hdGguZmxvb3IgdG8gZWFjaCBlbGVtZW50IG9mIHZlY3RvclxuICogQHBhcmFtIHYgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBmbG9vciBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gZmxvb3IodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGguZmxvb3IodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5mbG9vcih2WzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLmZsb29yKHZbMl0pO1xuICAgIGRzdFszXSA9IE1hdGguZmxvb3IodlszXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQXBwbGllcyBNYXRoLnJvdW5kIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgcm91bmQgb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIHJvdW5kKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBNYXRoLnJvdW5kKHZbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgucm91bmQodlsxXSk7XG4gICAgZHN0WzJdID0gTWF0aC5yb3VuZCh2WzJdKTtcbiAgICBkc3RbM10gPSBNYXRoLnJvdW5kKHZbM10pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsYW1wIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3IgYmV0d2VlbiBtaW4gYW5kIG1heFxuICogQHBhcmFtIHYgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBtYXggLSBNaW4gdmFsdWUsIGRlZmF1bHQgMFxuICogQHBhcmFtIG1pbiAtIE1heCB2YWx1ZSwgZGVmYXVsdCAxXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCB0aGUgY2xhbXBlZCB2YWx1ZSBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2xhbXAodiwgbWluID0gMCwgbWF4ID0gMSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2WzBdKSk7XG4gICAgZHN0WzFdID0gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZbMV0pKTtcbiAgICBkc3RbMl0gPSBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdlsyXSkpO1xuICAgIGRzdFszXSA9IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2WzNdKSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjdG9yczsgYXNzdW1lcyBhIGFuZCBiIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9uLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgc3VtIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIGFkZChhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSArIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl07XG4gICAgZHN0WzNdID0gYVszXSArIGJbM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjdG9ycywgc2NhbGluZyB0aGUgMm5kOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBzY2FsZSAtIEFtb3VudCB0byBzY2FsZSBiXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgc3VtIG9mIGEgKyBiICogc2NhbGUuXG4gKi9cbmZ1bmN0aW9uIGFkZFNjYWxlZChhLCBiLCBzY2FsZSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgICBkc3RbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICAgIGRzdFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byB2ZWN0b3JzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBzdWJ0cmFjdChhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSAtIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSAtIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSAtIGJbMl07XG4gICAgZHN0WzNdID0gYVszXSAtIGJbM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byB2ZWN0b3JzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBzdWIgPSBzdWJ0cmFjdDtcbi8qKlxuICogQ2hlY2sgaWYgMiB2ZWN0b3JzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHRydWUgaWYgdmVjdG9ycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5KGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoYVswXSAtIGJbMF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzFdIC0gYlsxXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMl0gLSBiWzJdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVszXSAtIGJbM10pIDwgRVBTSUxPTjtcbn1cbi8qKlxuICogQ2hlY2sgaWYgMiB2ZWN0b3JzIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHRydWUgaWYgdmVjdG9ycyBhcmUgZXhhY3RseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdO1xufVxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiBhbmQgaW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudCB0LCByZXR1cm5zXG4gKiBhICsgdCAqIChiIC0gYSkuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSB0IC0gSW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudC5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgbGluZWFyIGludGVycG9sYXRlZCByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIGxlcnAoYSwgYiwgdCwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0ICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdCAqIChiWzFdIC0gYVsxXSk7XG4gICAgZHN0WzJdID0gYVsyXSArIHQgKiAoYlsyXSAtIGFbMl0pO1xuICAgIGRzdFszXSA9IGFbM10gKyB0ICogKGJbM10gLSBhWzNdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiBhbmQgaW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudCB2ZWN0b3IgdCwgcmV0dXJuc1xuICogYSArIHQgKiAoYiAtIGEpLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gdCAtIEludGVycG9sYXRpb24gY29lZmZpY2llbnRzIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyB0aGUgbGluZWFyIGludGVycG9sYXRlZCByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIGxlcnBWKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBhWzBdICsgdFswXSAqIChiWzBdIC0gYVswXSk7XG4gICAgZHN0WzFdID0gYVsxXSArIHRbMV0gKiAoYlsxXSAtIGFbMV0pO1xuICAgIGRzdFsyXSA9IGFbMl0gKyB0WzJdICogKGJbMl0gLSBhWzJdKTtcbiAgICBkc3RbM10gPSBhWzNdICsgdFszXSAqIChiWzNdIC0gYVszXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJuIG1heCB2YWx1ZXMgb2YgdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgcmV0dXJuc1xuICogW21heChhWzBdLCBiWzBdKSwgbWF4KGFbMV0sIGJbMV0pLCBtYXgoYVsyXSwgYlsyXSldLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1heCBjb21wb25lbnRzIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbWF4KGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgICBkc3RbM10gPSBNYXRoLm1heChhWzNdLCBiWzNdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm4gbWluIHZhbHVlcyBvZiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiByZXR1cm5zXG4gKiBbbWluKGFbMF0sIGJbMF0pLCBtaW4oYVsxXSwgYlsxXSksIG1pbihhWzJdLCBiWzJdKV0uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgbWluIGNvbXBvbmVudHMgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBtaW4oYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICAgIGRzdFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICAgIGRzdFszXSA9IE1hdGgubWluKGFbM10sIGJbM10pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG11bFNjYWxhcih2LCBrLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0gdlswXSAqIGs7XG4gICAgZHN0WzFdID0gdlsxXSAqIGs7XG4gICAgZHN0WzJdID0gdlsyXSAqIGs7XG4gICAgZHN0WzNdID0gdlszXSAqIGs7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhIHNjYWxhci4gKHNhbWUgYXMgbXVsU2NhbGFyKVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGsgLSBUaGUgc2NhbGFyLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgdmVjdG9yLlxuICovXG5jb25zdCBzY2FsZSA9IG11bFNjYWxhcjtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhIHNjYWxhci5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gZGl2U2NhbGFyKHYsIGssIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdIC8gaztcbiAgICBkc3RbMV0gPSB2WzFdIC8gaztcbiAgICBkc3RbMl0gPSB2WzJdIC8gaztcbiAgICBkc3RbM10gPSB2WzNdIC8gaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBJbnZlcnNlIGEgdmVjdG9yLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBpbnZlcnRlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGludmVyc2UodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IDEgLyB2WzBdO1xuICAgIGRzdFsxXSA9IDEgLyB2WzFdO1xuICAgIGRzdFsyXSA9IDEgLyB2WzJdO1xuICAgIGRzdFszXSA9IDEgLyB2WzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEludmVydCBhIHZlY3Rvci4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJ0ZWQgdmVjdG9yLlxuICovXG5jb25zdCBpbnZlcnQgPSBpbnZlcnNlO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnNcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHJldHVybnMgZG90IHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgICByZXR1cm4gKGFbMF0gKiBiWzBdKSArIChhWzFdICogYlsxXSkgKyAoYVsyXSAqIGJbMl0pICsgKGFbM10gKiBiWzNdKTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbGVuZ3RoKHYpIHtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICBjb25zdCB2MyA9IHZbM107XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzKTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiB2ZWN0b3IgKHNhbWUgYXMgbGVuZ3RoKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5jb25zdCBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBsZW5ndGhTcSh2KSB7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgY29uc3QgdjMgPSB2WzNdO1xuICAgIHJldHVybiB2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aFNxKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlblNxID0gbGVuZ3RoU3E7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cbmZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICBjb25zdCBkdyA9IGFbM10gLSBiWzNdO1xuICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6ICsgZHcgKiBkdyk7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlKVxuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5jb25zdCBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gMiBwb2ludHNcbiAqIEBwYXJhbSBhIC0gdmVjdG9yLlxuICogQHBhcmFtIGIgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5mdW5jdGlvbiBkaXN0YW5jZVNxKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICBjb25zdCBkdyA9IGFbM10gLSBiWzNdO1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHogKyBkdyAqIGR3O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlU3EpXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuY29uc3QgZGlzdFNxID0gZGlzdGFuY2VTcTtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBpdHMgRXVjbGlkZWFuIGxlbmd0aCBhbmQgcmV0dXJucyB0aGUgcXVvdGllbnQuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG5vcm1hbGl6ZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemUodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgdjIgPSB2WzJdO1xuICAgIGNvbnN0IHYzID0gdlszXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLnNxcnQodjAgKiB2MCArIHYxICogdjEgKyB2MiAqIHYyICsgdjMgKiB2Myk7XG4gICAgaWYgKGxlbiA+IDAuMDAwMDEpIHtcbiAgICAgICAgZHN0WzBdID0gdjAgLyBsZW47XG4gICAgICAgIGRzdFsxXSA9IHYxIC8gbGVuO1xuICAgICAgICBkc3RbMl0gPSB2MiAvIGxlbjtcbiAgICAgICAgZHN0WzNdID0gdjMgLyBsZW47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkc3RbMF0gPSAwO1xuICAgICAgICBkc3RbMV0gPSAwO1xuICAgICAgICBkc3RbMl0gPSAwO1xuICAgICAgICBkc3RbM10gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBOZWdhdGVzIGEgdmVjdG9yLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIC12LlxuICovXG5mdW5jdGlvbiBuZWdhdGUodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IC12WzBdO1xuICAgIGRzdFsxXSA9IC12WzFdO1xuICAgIGRzdFsyXSA9IC12WzJdO1xuICAgIGRzdFszXSA9IC12WzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzQuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIHZlYzQuY3JlYXRlfSBhbmQge0BsaW5rIHZlYzQuc2V0fVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiB2LlxuICovXG5mdW5jdGlvbiBjb3B5KHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdO1xuICAgIGRzdFsxXSA9IHZbMV07XG4gICAgZHN0WzJdID0gdlsyXTtcbiAgICBkc3RbM10gPSB2WzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsb25lcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzQuY29weX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgdmVjNC5jcmVhdGV9IGFuZCB7QGxpbmsgdmVjNC5zZXR9XG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIHYuXG4gKi9cbmNvbnN0IGNsb25lID0gY29weTtcbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBwcm9kdWN0cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5KGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBhWzBdICogYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdICogYlsxXTtcbiAgICBkc3RbMl0gPSBhWzJdICogYlsyXTtcbiAgICBkc3RbM10gPSBhWzNdICogYlszXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIGEgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIChjb21wb25lbnQtd2lzZSk7IGFzc3VtZXMgYSBhbmRcbiAqIGIgaGF2ZSB0aGUgc2FtZSBsZW5ndGguIChzYW1lIGFzIG11bClcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB2ZWN0b3Igb2YgcHJvZHVjdHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBkaXZpZGUoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IGFbMF0gLyBiWzBdO1xuICAgIGRzdFsxXSA9IGFbMV0gLyBiWzFdO1xuICAgIGRzdFsyXSA9IGFbMl0gLyBiWzJdO1xuICAgIGRzdFszXSA9IGFbM10gLyBiWzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC4gKHNhbWUgYXMgZGl2aWRlKVxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBkaXYgPSBkaXZpZGU7XG4vKipcbiAqIFplcm8ncyBhIHZlY3RvclxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB6ZXJvZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiB6ZXJvKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSAwO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIHRyYW5zZm9ybSB2ZWM0IGJ5IDR4NCBtYXRyaXhcbiAqIEBwYXJhbSB2IC0gdGhlIHZlY3RvclxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIG9wdGlvbmFsIHZlYzQgdG8gc3RvcmUgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIHRyYW5zZm9ybWVkIHZlY3RvclxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0KHYsIG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBjb25zdCB4ID0gdlswXTtcbiAgICBjb25zdCB5ID0gdlsxXTtcbiAgICBjb25zdCB6ID0gdlsyXTtcbiAgICBjb25zdCB3ID0gdlszXTtcbiAgICBkc3RbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSAqIHc7XG4gICAgZHN0WzFdID0gbVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10gKiB3O1xuICAgIGRzdFsyXSA9IG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSAqIHc7XG4gICAgZHN0WzNdID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdICogdztcbiAgICByZXR1cm4gZHN0O1xufVxuXG52YXIgdmVjNEltcGwgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIGNyZWF0ZTogY3JlYXRlLFxuICAgIHNldERlZmF1bHRUeXBlOiBzZXREZWZhdWx0VHlwZSQxLFxuICAgIGZyb21WYWx1ZXM6IGZyb21WYWx1ZXMsXG4gICAgc2V0OiBzZXQsXG4gICAgY2VpbDogY2VpbCxcbiAgICBmbG9vcjogZmxvb3IsXG4gICAgcm91bmQ6IHJvdW5kLFxuICAgIGNsYW1wOiBjbGFtcCxcbiAgICBhZGQ6IGFkZCxcbiAgICBhZGRTY2FsZWQ6IGFkZFNjYWxlZCxcbiAgICBzdWJ0cmFjdDogc3VidHJhY3QsXG4gICAgc3ViOiBzdWIsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSxcbiAgICBlcXVhbHM6IGVxdWFscyxcbiAgICBsZXJwOiBsZXJwLFxuICAgIGxlcnBWOiBsZXJwVixcbiAgICBtYXg6IG1heCxcbiAgICBtaW46IG1pbixcbiAgICBtdWxTY2FsYXI6IG11bFNjYWxhcixcbiAgICBzY2FsZTogc2NhbGUsXG4gICAgZGl2U2NhbGFyOiBkaXZTY2FsYXIsXG4gICAgaW52ZXJzZTogaW52ZXJzZSxcbiAgICBpbnZlcnQ6IGludmVydCxcbiAgICBkb3Q6IGRvdCxcbiAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICBsZW46IGxlbixcbiAgICBsZW5ndGhTcTogbGVuZ3RoU3EsXG4gICAgbGVuU3E6IGxlblNxLFxuICAgIGRpc3RhbmNlOiBkaXN0YW5jZSxcbiAgICBkaXN0OiBkaXN0LFxuICAgIGRpc3RhbmNlU3E6IGRpc3RhbmNlU3EsXG4gICAgZGlzdFNxOiBkaXN0U3EsXG4gICAgbm9ybWFsaXplOiBub3JtYWxpemUsXG4gICAgbmVnYXRlOiBuZWdhdGUsXG4gICAgY29weTogY29weSxcbiAgICBjbG9uZTogY2xvbmUsXG4gICAgbXVsdGlwbHk6IG11bHRpcGx5LFxuICAgIG11bDogbXVsLFxuICAgIGRpdmlkZTogZGl2aWRlLFxuICAgIGRpdjogZGl2LFxuICAgIHplcm86IHplcm8sXG4gICAgdHJhbnNmb3JtTWF0NDogdHJhbnNmb3JtTWF0NFxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgdHlwZSB0aGlzIGxpYnJhcnkgY3JlYXRlcyBmb3IgYWxsIHR5cGVzXG4gKlxuICogZXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHNldERlZmF1bHRUeXBlKEZsb2F0NjRBcnJheSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY3RvciAtIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUuIEVpdGhlciBgRmxvYXQzMkFycmF5YCwgYEZsb2F0NjRBcnJheWAsIG9yIGBBcnJheWBcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdFR5cGUoY3Rvcikge1xuICAgIHNldERlZmF1bHRUeXBlJDUoY3Rvcik7XG4gICAgc2V0RGVmYXVsdFR5cGUkMyhjdG9yKTtcbiAgICBzZXREZWZhdWx0VHlwZSQyKGN0b3IpO1xuICAgIHNldERlZmF1bHRUeXBlJDYoY3Rvcik7XG4gICAgc2V0RGVmYXVsdFR5cGUkNChjdG9yKTtcbiAgICBzZXREZWZhdWx0VHlwZSQxKGN0b3IpO1xufVxuXG5leHBvcnQgeyBtYXQzSW1wbCBhcyBtYXQzLCBtYXQ0SW1wbCBhcyBtYXQ0LCBxdWF0SW1wbCBhcyBxdWF0LCBzZXREZWZhdWx0VHlwZSwgdXRpbHMsIHZlYzJJbXBsIGFzIHZlYzIsIHZlYzNJbXBsIGFzIHZlYzMsIHZlYzRJbXBsIGFzIHZlYzQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdncHUtbWF0cml4Lm1vZHVsZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;