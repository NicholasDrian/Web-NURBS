/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/cad.ts":
/*!********************!*\
  !*** ./src/cad.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INSTANCE: () => (/* binding */ INSTANCE)\n/* harmony export */ });\n/* harmony import */ var _render_renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./render/renderer */ \"./src/render/renderer.ts\");\n/* harmony import */ var _scene_scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scene/scene */ \"./src/scene/scene.ts\");\n/* harmony import */ var _utils_timer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/timer */ \"./src/utils/timer.ts\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stats */ \"./src/stats.ts\");\n/* harmony import */ var _events_eventManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./events/eventManager */ \"./src/events/eventManager.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mode */ \"./src/mode.ts\");\n/* harmony import */ var _commands_cli__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./commands/cli */ \"./src/commands/cli.ts\");\n/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./log */ \"./src/log.ts\");\n/* harmony import */ var _commands_commandManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./commands/commandManager */ \"./src/commands/commandManager.ts\");\n/* harmony import */ var _window_windowManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./window/windowManager */ \"./src/window/windowManager.ts\");\n/* harmony import */ var _settings_settingsManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./settings/settingsManager */ \"./src/settings/settingsManager.ts\");\n/* harmony import */ var _materials_materialManager__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./materials/materialManager */ \"./src/materials/materialManager.ts\");\n/* harmony import */ var _commands_selector__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./commands/selector */ \"./src/commands/selector.ts\");\n/* harmony import */ var _widgets_mover__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./widgets/mover */ \"./src/widgets/mover.ts\");\n/* harmony import */ var _events_eventQueue__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./events/eventQueue */ \"./src/events/eventQueue.ts\");\n/* harmony import */ var _tests_testSceneSphere__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./tests/testSceneSphere */ \"./src/tests/testSceneSphere.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*\n  * Browser Based NURBS Modeling Software\n  * Inspired by Rhino, Vim, CSS\n  *\n  * By Nick Drian\n  *\n*/\nclass CAD {\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.eventQueue = new _events_eventQueue__WEBPACK_IMPORTED_MODULE_14__.EventQueue();\n            this.settingsManager = new _settings_settingsManager__WEBPACK_IMPORTED_MODULE_10__.SettingsManager();\n            this.commandManager = new _commands_commandManager__WEBPACK_IMPORTED_MODULE_8__.CommandManager();\n            this.cli = new _commands_cli__WEBPACK_IMPORTED_MODULE_6__.CLI();\n            this.setMode(_mode__WEBPACK_IMPORTED_MODULE_5__.OperatingMode.Command);\n            this.renderer = new _render_renderer__WEBPACK_IMPORTED_MODULE_0__.Renderer();\n            yield this.renderer.init();\n            this.materialManager = new _materials_materialManager__WEBPACK_IMPORTED_MODULE_11__.MaterialManager();\n            this.scene = new _scene_scene__WEBPACK_IMPORTED_MODULE_1__.Scene();\n            this.scene.init();\n            this.eventManager = new _events_eventManager__WEBPACK_IMPORTED_MODULE_4__.EventManager();\n            this.log = new _log__WEBPACK_IMPORTED_MODULE_7__.Log();\n            this.renderStats = new _stats__WEBPACK_IMPORTED_MODULE_3__.RenderStats();\n            this.windowManager = new _window_windowManager__WEBPACK_IMPORTED_MODULE_9__.WindowManager();\n            this.selector = new _commands_selector__WEBPACK_IMPORTED_MODULE_12__.Selector();\n            this.mover = new _widgets_mover__WEBPACK_IMPORTED_MODULE_13__.Mover();\n            //addTestSceneComplex();\n            //addTestSceneRevolve();\n            (0,_tests_testSceneSphere__WEBPACK_IMPORTED_MODULE_15__.addTestSceneSphere)();\n            //addTestSceneSweep2();\n            //addTestSceneCurve();\n            //addTestSceneArc();\n        });\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            while (true) {\n                if (document.hasFocus()) {\n                    var frameTimer = new _utils_timer__WEBPACK_IMPORTED_MODULE_2__.Timer();\n                    // update scene\n                    var sceneTimer = new _utils_timer__WEBPACK_IMPORTED_MODULE_2__.Timer();\n                    this.scene.tick();\n                    this.mover.tick();\n                    this.renderStats.setSceneTime(sceneTimer.getTime());\n                    // render\n                    var renderTimer = new _utils_timer__WEBPACK_IMPORTED_MODULE_2__.Timer();\n                    yield this.renderer.render(this.scene);\n                    this.renderStats.setRenderTime(renderTimer.getTime());\n                    //stats\n                    this.renderStats.setFrameTime(frameTimer.getTime());\n                    // windows\n                    this.windowManager.tick();\n                }\n                else {\n                    yield new Promise(r => setTimeout(r, 100));\n                }\n            }\n        });\n    }\n    getMode() {\n        return this.operatingMode;\n    }\n    setMode(operatingMode) {\n        this.operatingMode = operatingMode;\n        if (this.operatingMode == _mode__WEBPACK_IMPORTED_MODULE_5__.OperatingMode.Command) {\n            this.cli.show();\n        }\n        else {\n            this.cli.hide();\n        }\n    }\n    getCli() {\n        return this.cli;\n    }\n    getStats() {\n        return this.renderStats;\n    }\n    getScene() {\n        return this.scene;\n    }\n    getRenderer() {\n        return this.renderer;\n    }\n    getLog() {\n        return this.log;\n    }\n    getCommandManager() {\n        return this.commandManager;\n    }\n    getWindowManager() {\n        return this.windowManager;\n    }\n    getSettingsManager() {\n        return this.settingsManager;\n    }\n    getMaterialManager() {\n        return this.materialManager;\n    }\n    getEventManager() {\n        return this.eventManager;\n    }\n    getSelector() {\n        return this.selector;\n    }\n    getMover() {\n        return this.mover;\n    }\n    getEventQueue() {\n        return this.eventQueue;\n    }\n}\nconst INSTANCE = new CAD();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3BCLENBQUM7SUFFTSxhQUFhO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0NBRUY7QUFFTSxNQUFNLFFBQVEsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY2FkLnRzP2RkZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tIFwiLi9yZW5kZXIvcmVuZGVyZXJcIlxuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9zY2VuZS9zY2VuZVwiO1xuaW1wb3J0IHsgVGltZXIgfSBmcm9tIFwiLi91dGlscy90aW1lclwiXG5pbXBvcnQgeyBSZW5kZXJTdGF0cyB9IGZyb20gXCIuL3N0YXRzXCJcbmltcG9ydCB7IEV2ZW50TWFuYWdlciB9IGZyb20gXCIuL2V2ZW50cy9ldmVudE1hbmFnZXJcIlxuaW1wb3J0IHsgT3BlcmF0aW5nTW9kZSB9IGZyb20gXCIuL21vZGVcIlxuaW1wb3J0IHsgQ0xJIH0gZnJvbSBcIi4vY29tbWFuZHMvY2xpXCJcbmltcG9ydCB7IExvZyB9IGZyb20gXCIuL2xvZ1wiO1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tIFwiLi9jb21tYW5kcy9jb21tYW5kTWFuYWdlclwiO1xuaW1wb3J0IHsgV2luZG93TWFuYWdlciB9IGZyb20gXCIuL3dpbmRvdy93aW5kb3dNYW5hZ2VyXCI7XG5pbXBvcnQgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tIFwiLi9zZXR0aW5ncy9zZXR0aW5nc01hbmFnZXJcIjtcbmltcG9ydCB7IE1hdGVyaWFsTWFuYWdlciB9IGZyb20gXCIuL21hdGVyaWFscy9tYXRlcmlhbE1hbmFnZXJcIjtcbmltcG9ydCB7IFNlbGVjdG9yIH0gZnJvbSBcIi4vY29tbWFuZHMvc2VsZWN0b3JcIjtcblxuaW1wb3J0IHsgYWRkVGVzdFNjZW5lQ29tcGxleCB9IGZyb20gXCIuL3Rlc3RzL3Rlc3RTY2VuZUNvbXBsZXhcIjtcbmltcG9ydCB7IGFkZFRlc3RTY2VuZUN1cnZlIH0gZnJvbSBcIi4vdGVzdHMvdGVzdFNjZW5lQ3VydmVcIlxuaW1wb3J0IHsgYWRkVGVzdFNjZW5lQXJjIH0gZnJvbSBcIi4vdGVzdHMvdGVzdFNjZW5lQXJjXCI7XG5pbXBvcnQgeyBNb3ZlciB9IGZyb20gXCIuL3dpZGdldHMvbW92ZXJcIjtcbmltcG9ydCB7IGFkZFRlc3RTY2VuZVJldm9sdmUgfSBmcm9tIFwiLi90ZXN0cy90ZXN0U2NlbmVSZXZvbHZlXCI7XG5pbXBvcnQgeyBFdmVudFF1ZXVlIH0gZnJvbSBcIi4vZXZlbnRzL2V2ZW50UXVldWVcIjtcbmltcG9ydCB7IGFkZFRlc3RTY2VuZVNwaGVyZSB9IGZyb20gXCIuL3Rlc3RzL3Rlc3RTY2VuZVNwaGVyZVwiO1xuaW1wb3J0IHsgYWRkVGVzdFNjZW5lU3dlZXAyIH0gZnJvbSBcIi4vdGVzdHMvdGVzdFNjZW5lU3dlZXAyXCI7XG5cbi8qXG4gICogQnJvd3NlciBCYXNlZCBOVVJCUyBNb2RlbGluZyBTb2Z0d2FyZVxuICAqIEluc3BpcmVkIGJ5IFJoaW5vLCBWaW0sIENTU1xuICAqXG4gICogQnkgTmljayBEcmlhblxuICAqXG4qL1xuXG5jbGFzcyBDQUQge1xuXG4gIHByaXZhdGUgZXZlbnRRdWV1ZSE6IEV2ZW50UXVldWU7XG4gIHByaXZhdGUgcmVuZGVyZXIhOiBSZW5kZXJlcjtcbiAgcHJpdmF0ZSBzY2VuZSE6IFNjZW5lO1xuICBwcml2YXRlIGV2ZW50TWFuYWdlciE6IEV2ZW50TWFuYWdlcjtcbiAgcHJpdmF0ZSBjb21tYW5kTWFuYWdlciE6IENvbW1hbmRNYW5hZ2VyO1xuICBwcml2YXRlIHdpbmRvd01hbmFnZXIhOiBXaW5kb3dNYW5hZ2VyO1xuICBwcml2YXRlIHNldHRpbmdzTWFuYWdlciE6IFNldHRpbmdzTWFuYWdlcjtcbiAgcHJpdmF0ZSBtYXRlcmlhbE1hbmFnZXIhOiBNYXRlcmlhbE1hbmFnZXI7XG4gIHByaXZhdGUgc2VsZWN0b3IhOiBTZWxlY3RvcjtcbiAgcHJpdmF0ZSBtb3ZlciE6IE1vdmVyO1xuXG4gIHByaXZhdGUgcmVuZGVyU3RhdHMhOiBSZW5kZXJTdGF0cztcbiAgcHJpdmF0ZSBvcGVyYXRpbmdNb2RlITogT3BlcmF0aW5nTW9kZTtcbiAgcHJpdmF0ZSBjbGkhOiBDTEk7XG4gIHByaXZhdGUgbG9nITogTG9nXG5cbiAgcHVibGljIGFzeW5jIGluaXQoKSB7XG5cbiAgICB0aGlzLmV2ZW50UXVldWUgPSBuZXcgRXZlbnRRdWV1ZSgpO1xuICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gbmV3IFNldHRpbmdzTWFuYWdlcigpO1xuICAgIHRoaXMuY29tbWFuZE1hbmFnZXIgPSBuZXcgQ29tbWFuZE1hbmFnZXIoKTtcbiAgICB0aGlzLmNsaSA9IG5ldyBDTEkoKTtcblxuICAgIHRoaXMuc2V0TW9kZShPcGVyYXRpbmdNb2RlLkNvbW1hbmQpO1xuXG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcigpO1xuICAgIGF3YWl0IHRoaXMucmVuZGVyZXIuaW5pdCgpO1xuXG4gICAgdGhpcy5tYXRlcmlhbE1hbmFnZXIgPSBuZXcgTWF0ZXJpYWxNYW5hZ2VyKCk7XG5cbiAgICB0aGlzLnNjZW5lID0gbmV3IFNjZW5lKCk7XG4gICAgdGhpcy5zY2VuZS5pbml0KCk7XG5cbiAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTtcbiAgICB0aGlzLmxvZyA9IG5ldyBMb2coKTtcblxuICAgIHRoaXMucmVuZGVyU3RhdHMgPSBuZXcgUmVuZGVyU3RhdHMoKTtcbiAgICB0aGlzLndpbmRvd01hbmFnZXIgPSBuZXcgV2luZG93TWFuYWdlcigpO1xuICAgIHRoaXMuc2VsZWN0b3IgPSBuZXcgU2VsZWN0b3IoKTtcbiAgICB0aGlzLm1vdmVyID0gbmV3IE1vdmVyKCk7XG5cbiAgICAvL2FkZFRlc3RTY2VuZUNvbXBsZXgoKTtcbiAgICAvL2FkZFRlc3RTY2VuZVJldm9sdmUoKTtcbiAgICBhZGRUZXN0U2NlbmVTcGhlcmUoKTtcbiAgICAvL2FkZFRlc3RTY2VuZVN3ZWVwMigpO1xuICAgIC8vYWRkVGVzdFNjZW5lQ3VydmUoKTtcbiAgICAvL2FkZFRlc3RTY2VuZUFyYygpO1xuXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcnVuKCkge1xuXG4gICAgd2hpbGUgKHRydWUpIHtcblxuICAgICAgaWYgKGRvY3VtZW50Lmhhc0ZvY3VzKCkpIHtcblxuICAgICAgICB2YXIgZnJhbWVUaW1lciA9IG5ldyBUaW1lcigpO1xuXG4gICAgICAgIC8vIHVwZGF0ZSBzY2VuZVxuICAgICAgICB2YXIgc2NlbmVUaW1lciA9IG5ldyBUaW1lcigpO1xuICAgICAgICB0aGlzLnNjZW5lLnRpY2soKTtcbiAgICAgICAgdGhpcy5tb3Zlci50aWNrKCk7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhdHMuc2V0U2NlbmVUaW1lKHNjZW5lVGltZXIuZ2V0VGltZSgpKTtcblxuICAgICAgICAvLyByZW5kZXJcbiAgICAgICAgdmFyIHJlbmRlclRpbWVyID0gbmV3IFRpbWVyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUpO1xuICAgICAgICB0aGlzLnJlbmRlclN0YXRzLnNldFJlbmRlclRpbWUocmVuZGVyVGltZXIuZ2V0VGltZSgpKTtcblxuICAgICAgICAvL3N0YXRzXG4gICAgICAgIHRoaXMucmVuZGVyU3RhdHMuc2V0RnJhbWVUaW1lKGZyYW1lVGltZXIuZ2V0VGltZSgpKTtcblxuICAgICAgICAvLyB3aW5kb3dzXG4gICAgICAgIHRoaXMud2luZG93TWFuYWdlci50aWNrKCk7XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDEwMCkpO1xuXG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBwdWJsaWMgZ2V0TW9kZSgpOiBPcGVyYXRpbmdNb2RlIHtcbiAgICByZXR1cm4gdGhpcy5vcGVyYXRpbmdNb2RlO1xuICB9XG5cbiAgcHVibGljIHNldE1vZGUob3BlcmF0aW5nTW9kZTogT3BlcmF0aW5nTW9kZSk6IHZvaWQge1xuICAgIHRoaXMub3BlcmF0aW5nTW9kZSA9IG9wZXJhdGluZ01vZGU7XG5cbiAgICBpZiAodGhpcy5vcGVyYXRpbmdNb2RlID09IE9wZXJhdGluZ01vZGUuQ29tbWFuZCkge1xuICAgICAgdGhpcy5jbGkuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsaS5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldENsaSgpOiBDTEkge1xuICAgIHJldHVybiB0aGlzLmNsaTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGF0cygpOiBSZW5kZXJTdGF0cyB7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyU3RhdHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2NlbmUoKTogU2NlbmUge1xuICAgIHJldHVybiB0aGlzLnNjZW5lO1xuICB9XG5cbiAgcHVibGljIGdldFJlbmRlcmVyKCk6IFJlbmRlcmVyIHtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMb2coKTogTG9nIHtcbiAgICByZXR1cm4gdGhpcy5sb2c7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29tbWFuZE1hbmFnZXIoKTogQ29tbWFuZE1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLmNvbW1hbmRNYW5hZ2VyO1xuICB9XG5cbiAgcHVibGljIGdldFdpbmRvd01hbmFnZXIoKTogV2luZG93TWFuYWdlciB7XG4gICAgcmV0dXJuIHRoaXMud2luZG93TWFuYWdlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZXR0aW5nc01hbmFnZXIoKTogU2V0dGluZ3NNYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5nc01hbmFnZXI7XG4gIH1cblxuICBwdWJsaWMgZ2V0TWF0ZXJpYWxNYW5hZ2VyKCk6IE1hdGVyaWFsTWFuYWdlciB7XG4gICAgcmV0dXJuIHRoaXMubWF0ZXJpYWxNYW5hZ2VyO1xuICB9XG5cbiAgcHVibGljIGdldEV2ZW50TWFuYWdlcigpOiBFdmVudE1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLmV2ZW50TWFuYWdlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTZWxlY3RvcigpOiBTZWxlY3RvciB7XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0b3I7XG4gIH1cblxuICBwdWJsaWMgZ2V0TW92ZXIoKTogTW92ZXIge1xuICAgIHJldHVybiB0aGlzLm1vdmVyO1xuICB9XG5cbiAgcHVibGljIGdldEV2ZW50UXVldWUoKTogRXZlbnRRdWV1ZSB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRRdWV1ZTtcbiAgfVxuXG59XG5cbmV4cG9ydCBjb25zdCBJTlNUQU5DRSA9IG5ldyBDQUQoKTtcblxuXG5cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/cad.ts\n");

/***/ }),

/***/ "./src/commands/cli.ts":
/*!*****************************!*\
  !*** ./src/commands/cli.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CLI: () => (/* binding */ CLI)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nclass CLI {\n    constructor() {\n        this.element = document.getElementById(\"cli\");\n        this.input = \"\";\n        this.render();\n    }\n    show() {\n        this.element.hidden = false;\n    }\n    hide() {\n        this.element.hidden = true;\n    }\n    processKeyDownEvent(event) {\n        if (event.key == \"Enter\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleInput(this.input);\n            this.clearInput();\n        }\n        else if (event.key == \"Escape\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleInput(\"Escape\");\n            this.clearInput();\n        }\n        else if (event.key == \"Backspace\") {\n            this.deleteLast();\n        }\n        else if (event.key.length == 1) {\n            this.addChar(event.key);\n        }\n    }\n    hasInput() {\n        return this.input != \"\";\n    }\n    clearInput() {\n        this.input = \"\";\n        this.render();\n    }\n    render() {\n        this.element.innerText = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().getInstructions() + this.input;\n    }\n    deleteLast() {\n        if (this.input.length) {\n            this.input = this.input.slice(0, -1);\n            this.render();\n        }\n    }\n    addChar(char) {\n        this.input += char;\n        this.render();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY2xpLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtDO0FBRTNCLE1BQU0sR0FBRztJQUtkO1FBQ0UsSUFBSSxDQUFDLE9BQU8sR0FBbUIsUUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5RCxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUVNLElBQUk7UUFDVCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7SUFDOUIsQ0FBQztJQUNNLElBQUk7UUFDVCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDN0IsQ0FBQztJQUVNLG1CQUFtQixDQUFDLEtBQW9CO1FBQzdDLElBQUksS0FBSyxDQUFDLEdBQUcsSUFBSSxPQUFPLEVBQUU7WUFDeEIsMENBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckQsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQ25CO2FBQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxJQUFJLFFBQVEsRUFBRTtZQUNoQywwQ0FBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ25ELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztTQUNuQjthQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsSUFBSSxXQUFXLEVBQUU7WUFDbkMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1NBQ25CO2FBQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDekI7SUFDSCxDQUFDO0lBR00sUUFBUTtRQUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVNLFVBQVU7UUFDZixJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztJQUVNLE1BQU07UUFDWCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRywwQ0FBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsZUFBZSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN2RixDQUFDO0lBRU8sVUFBVTtRQUNoQixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ2Y7SUFDSCxDQUFDO0lBRU8sT0FBTyxDQUFDLElBQVk7UUFDMUIsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7Q0FHRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NsaS50cz9hNWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuXG5leHBvcnQgY2xhc3MgQ0xJIHtcblxuICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIGlucHV0OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gPEhUTUxEaXZFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2xpXCIpO1xuICAgIHRoaXMuaW5wdXQgPSBcIlwiO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwdWJsaWMgc2hvdygpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gIH1cbiAgcHVibGljIGhpZGUoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgcHJvY2Vzc0tleURvd25FdmVudChldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT0gXCJFbnRlclwiKSB7XG4gICAgICBJTlNUQU5DRS5nZXRDb21tYW5kTWFuYWdlcigpLmhhbmRsZUlucHV0KHRoaXMuaW5wdXQpO1xuICAgICAgdGhpcy5jbGVhcklucHV0KCk7XG4gICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT0gXCJFc2NhcGVcIikge1xuICAgICAgSU5TVEFOQ0UuZ2V0Q29tbWFuZE1hbmFnZXIoKS5oYW5kbGVJbnB1dChcIkVzY2FwZVwiKTtcbiAgICAgIHRoaXMuY2xlYXJJbnB1dCgpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09IFwiQmFja3NwYWNlXCIpIHtcbiAgICAgIHRoaXMuZGVsZXRlTGFzdCgpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Lmxlbmd0aCA9PSAxKSB7XG4gICAgICB0aGlzLmFkZENoYXIoZXZlbnQua2V5KTtcbiAgICB9XG4gIH1cblxuXG4gIHB1YmxpYyBoYXNJbnB1dCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dCAhPSBcIlwiO1xuICB9XG5cbiAgcHVibGljIGNsZWFySW5wdXQoKTogdm9pZCB7XG4gICAgdGhpcy5pbnB1dCA9IFwiXCI7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVyVGV4dCA9IElOU1RBTkNFLmdldENvbW1hbmRNYW5hZ2VyKCkuZ2V0SW5zdHJ1Y3Rpb25zKCkgKyB0aGlzLmlucHV0O1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxldGVMYXN0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlucHV0Lmxlbmd0aCkge1xuICAgICAgdGhpcy5pbnB1dCA9IHRoaXMuaW5wdXQuc2xpY2UoMCwgLTEpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZENoYXIoY2hhcjogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5pbnB1dCArPSBjaGFyO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuXG59XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/cli.ts\n");

/***/ }),

/***/ "./src/commands/clicker.ts":
/*!*********************************!*\
  !*** ./src/commands/clicker.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Clicker: () => (/* binding */ Clicker)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../widgets/cursor */ \"./src/widgets/cursor.ts\");\n\n\nclass Clicker {\n    constructor() {\n        this.point = null;\n        this.clicked = false;\n        this.element = document.createElement(\"div\");\n        this.element.id = \"clicker\";\n        this.element.className = \"floating-window\";\n        this.element.style.width = \"auto\";\n        this.element.hidden = true;\n        document.body.appendChild(this.element);\n        this.onMouseMove();\n        _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.show();\n    }\n    onMouseMove(types, ids, sub = false) {\n        if (this.clicked)\n            return; // currently selecting from dropdown\n        const mousePos = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos();\n        const ray = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(mousePos[0], mousePos[1]);\n        var intersections = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getBoundingBoxHeirarchy().firstIntersectionsWithinMargin(ray, 5, sub);\n        if (types) {\n            intersections = intersections.filter((intersection) => {\n                return types.includes(intersection.description);\n            });\n        }\n        if (ids) {\n            intersections = intersections.filter((intersection) => {\n                var _a, _b;\n                return ids.includes((_b = (_a = intersection.geometry) === null || _a === void 0 ? void 0 : _a.getID()) !== null && _b !== void 0 ? _b : 0);\n            });\n        }\n        if (intersections.length !== 0) {\n            this.point = intersections[0].point;\n            _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.setPosition(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPixelAtPoint(this.point));\n            _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.show();\n        }\n        else {\n            _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.hide();\n        }\n    }\n    click(types, ids, sub = false) {\n        if (this.clicked) {\n            this.reset();\n            return;\n        }\n        this.clicked = true;\n        this.element.hidden = false;\n        const mousePos = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos();\n        const ray = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(mousePos[0], mousePos[1]);\n        var intersections = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getBoundingBoxHeirarchy().firstIntersectionsWithinMargin(ray, 2, sub);\n        if (types) {\n            intersections = intersections.filter((intersection) => {\n                return types.includes(intersection.description);\n            });\n        }\n        if (ids) {\n            intersections = intersections.filter((intersection) => {\n                var _a, _b;\n                return ids.includes((_b = (_a = intersection.geometry) === null || _a === void 0 ? void 0 : _a.getID()) !== null && _b !== void 0 ? _b : 0);\n            });\n        }\n        if (intersections.length === 0)\n            this.reset();\n        if (intersections.length === 1) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleClickResult(intersections[0]);\n            return;\n        }\n        const list = document.createElement(\"ul\");\n        this.element.innerHTML = \"\";\n        this.element.appendChild(list);\n        for (let intersection of intersections) {\n            const li = document.createElement(\"li\");\n            li.innerText = intersection.description;\n            li.onclick = function () {\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleClickResult(intersection);\n            };\n            li.onmouseenter = function () {\n                _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.setPosition(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPixelAtPoint(intersection.point));\n            };\n            list.appendChild(li);\n        }\n        this.element.setAttribute(\"style\", `\n      left:${mousePos[0] + 20}px;\n      top:${mousePos[1] - 20}px;\n      width:auto;\n      height:auto;`);\n    }\n    destroy() {\n        _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.hide();\n        document.body.removeChild(this.element);\n    }\n    getPoint() {\n        return this.point;\n    }\n    reset() {\n        this.clicked = false;\n        this.element.hidden = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0lBQzdCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NsaWNrZXIudHM/ZmVkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmF5XCI7XG5pbXBvcnQgeyBjdXJzb3IgfSBmcm9tIFwiLi4vd2lkZ2V0cy9jdXJzb3JcIjtcblxuXG5cbmV4cG9ydCBjbGFzcyBDbGlja2VyIHtcblxuICBwcml2YXRlIHBvaW50OiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSBjbGlja2VkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucG9pbnQgPSBudWxsO1xuICAgIHRoaXMuY2xpY2tlZCA9IGZhbHNlO1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5lbGVtZW50LmlkID0gXCJjbGlja2VyXCI7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IFwiZmxvYXRpbmctd2luZG93XCI7XG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gXCJhdXRvXCI7XG4gICAgdGhpcy5lbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMub25Nb3VzZU1vdmUoKTtcbiAgICBjdXJzb3Iuc2hvdygpO1xuICB9XG5cbiAgcHVibGljIG9uTW91c2VNb3ZlKHR5cGVzPzogc3RyaW5nW10sIGlkcz86IG51bWJlcltdLCBzdWI6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuXG4gICAgaWYgKHRoaXMuY2xpY2tlZCkgcmV0dXJuOyAvLyBjdXJyZW50bHkgc2VsZWN0aW5nIGZyb20gZHJvcGRvd25cblxuICAgIGNvbnN0IG1vdXNlUG9zOiBbbnVtYmVyLCBudW1iZXJdID0gSU5TVEFOQ0UuZ2V0RXZlbnRNYW5hZ2VyKCkuZ2V0TW91c2VIYW5kbGVyKCkuZ2V0TW91c2VQb3MoKTtcbiAgICBjb25zdCByYXk6IFJheSA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0UmF5QXRQaXhlbChtb3VzZVBvc1swXSwgbW91c2VQb3NbMV0pO1xuICAgIHZhciBpbnRlcnNlY3Rpb25zOiBJbnRlcnNlY3Rpb25bXSA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Qm91bmRpbmdCb3hIZWlyYXJjaHkoKS5maXJzdEludGVyc2VjdGlvbnNXaXRoaW5NYXJnaW4ocmF5LCA1LCBzdWIpO1xuXG4gICAgaWYgKHR5cGVzKSB7XG4gICAgICBpbnRlcnNlY3Rpb25zID0gaW50ZXJzZWN0aW9ucy5maWx0ZXIoKGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiB0eXBlcy5pbmNsdWRlcyhpbnRlcnNlY3Rpb24uZGVzY3JpcHRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpZHMpIHtcbiAgICAgIGludGVyc2VjdGlvbnMgPSBpbnRlcnNlY3Rpb25zLmZpbHRlcigoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIGlkcy5pbmNsdWRlcyhpbnRlcnNlY3Rpb24uZ2VvbWV0cnk/LmdldElEKCkgPz8gMCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoaW50ZXJzZWN0aW9ucy5sZW5ndGggIT09IDApIHtcbiAgICAgIHRoaXMucG9pbnQgPSBpbnRlcnNlY3Rpb25zWzBdLnBvaW50O1xuICAgICAgY3Vyc29yLnNldFBvc2l0aW9uKElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0UGl4ZWxBdFBvaW50KHRoaXMucG9pbnQpKTtcbiAgICAgIGN1cnNvci5zaG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnNvci5oaWRlKCk7XG4gICAgfVxuXG4gIH1cblxuICBwdWJsaWMgY2xpY2sodHlwZXM/OiBzdHJpbmdbXSwgaWRzPzogbnVtYmVyW10sIHN1YjogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG5cbiAgICBpZiAodGhpcy5jbGlja2VkKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jbGlja2VkID0gdHJ1ZTtcbiAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gICAgY29uc3QgbW91c2VQb3M6IFtudW1iZXIsIG51bWJlcl0gPSBJTlNUQU5DRS5nZXRFdmVudE1hbmFnZXIoKS5nZXRNb3VzZUhhbmRsZXIoKS5nZXRNb3VzZVBvcygpO1xuICAgIGNvbnN0IHJheTogUmF5ID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5nZXRSYXlBdFBpeGVsKG1vdXNlUG9zWzBdLCBtb3VzZVBvc1sxXSk7XG4gICAgdmFyIGludGVyc2VjdGlvbnM6IEludGVyc2VjdGlvbltdID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRCb3VuZGluZ0JveEhlaXJhcmNoeSgpLmZpcnN0SW50ZXJzZWN0aW9uc1dpdGhpbk1hcmdpbihyYXksIDIsIHN1Yik7XG4gICAgaWYgKHR5cGVzKSB7XG4gICAgICBpbnRlcnNlY3Rpb25zID0gaW50ZXJzZWN0aW9ucy5maWx0ZXIoKGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiB0eXBlcy5pbmNsdWRlcyhpbnRlcnNlY3Rpb24uZGVzY3JpcHRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpZHMpIHtcbiAgICAgIGludGVyc2VjdGlvbnMgPSBpbnRlcnNlY3Rpb25zLmZpbHRlcigoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pID0+IHtcbiAgICAgICAgcmV0dXJuIGlkcy5pbmNsdWRlcyhpbnRlcnNlY3Rpb24uZ2VvbWV0cnk/LmdldElEKCkgPz8gMCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID09PSAwKSB0aGlzLnJlc2V0KCk7XG4gICAgaWYgKGludGVyc2VjdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICBJTlNUQU5DRS5nZXRDb21tYW5kTWFuYWdlcigpLmhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbnNbMF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxpc3Q6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChsaXN0KTtcbiAgICBmb3IgKGxldCBpbnRlcnNlY3Rpb24gb2YgaW50ZXJzZWN0aW9ucykge1xuICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICBsaS5pbm5lclRleHQgPSBpbnRlcnNlY3Rpb24uZGVzY3JpcHRpb247XG4gICAgICBsaS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIElOU1RBTkNFLmdldENvbW1hbmRNYW5hZ2VyKCkuaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uKTtcbiAgICAgIH07XG4gICAgICBsaS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY3Vyc29yLnNldFBvc2l0aW9uKElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0UGl4ZWxBdFBvaW50KGludGVyc2VjdGlvbi5wb2ludCkpO1xuICAgICAgfTtcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBgXG4gICAgICBsZWZ0OiR7bW91c2VQb3NbMF0gKyAyMH1weDtcbiAgICAgIHRvcDoke21vdXNlUG9zWzFdIC0gMjB9cHg7XG4gICAgICB3aWR0aDphdXRvO1xuICAgICAgaGVpZ2h0OmF1dG87YFxuICAgICk7XG5cbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIGN1cnNvci5oaWRlKCk7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIGdldFBvaW50KCk6IFZlYzMgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5wb2ludDtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuY2xpY2tlZCA9IGZhbHNlO1xuICAgIHRoaXMuZWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/clicker.ts\n");

/***/ }),

/***/ "./src/commands/command.ts":
/*!*********************************!*\
  !*** ./src/commands/command.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Command: () => (/* binding */ Command)\n/* harmony export */ });\nclass Command {\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBSU8sTUFBZSxPQUFPO0NBUzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZC50cz80ZDA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcblxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tbWFuZCB7XG5cbiAgYWJzdHJhY3QgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQ7XG4gIGFic3RyYWN0IGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZDtcbiAgYWJzdHJhY3QgaGFuZGxlQ2xpY2soKTogdm9pZDtcbiAgYWJzdHJhY3QgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQ7XG4gIGFic3RyYWN0IGdldEluc3RydWN0aW9ucygpOiBzdHJpbmc7XG4gIGFic3RyYWN0IGlzRmluaXNoZWQoKTogYm9vbGVhbjtcblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/command.ts\n");

/***/ }),

/***/ "./src/commands/commandManager.ts":
/*!****************************************!*\
  !*** ./src/commands/commandManager.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommandManager: () => (/* binding */ CommandManager)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _commands_arcCommand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./commands/arcCommand */ \"./src/commands/commands/arcCommand.ts\");\n/* harmony import */ var _commands_arrayCommand__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./commands/arrayCommand */ \"./src/commands/commands/arrayCommand.ts\");\n/* harmony import */ var _commands_blendCurvesCommand__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./commands/blendCurvesCommand */ \"./src/commands/commands/blendCurvesCommand.ts\");\n/* harmony import */ var _commands_cameraCommand__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./commands/cameraCommand */ \"./src/commands/commands/cameraCommand.ts\");\n/* harmony import */ var _commands_circleCommand__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./commands/circleCommand */ \"./src/commands/commands/circleCommand.ts\");\n/* harmony import */ var _commands_constructionPlaneCommand__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./commands/constructionPlaneCommand */ \"./src/commands/commands/constructionPlaneCommand.ts\");\n/* harmony import */ var _commands_copyCommand__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./commands/copyCommand */ \"./src/commands/commands/copyCommand.ts\");\n/* harmony import */ var _commands_curveCommand__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./commands/curveCommand */ \"./src/commands/commands/curveCommand.ts\");\n/* harmony import */ var _commands_extrudeCurveCommand__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./commands/extrudeCurveCommand */ \"./src/commands/commands/extrudeCurveCommand.ts\");\n/* harmony import */ var _commands_loftCommand__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./commands/loftCommand */ \"./src/commands/commands/loftCommand.ts\");\n/* harmony import */ var _commands_mirrorCommand__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./commands/mirrorCommand */ \"./src/commands/commands/mirrorCommand.ts\");\n/* harmony import */ var _commands_moveCommand__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./commands/moveCommand */ \"./src/commands/commands/moveCommand.ts\");\n/* harmony import */ var _commands_polarArrayCommand__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./commands/polarArrayCommand */ \"./src/commands/commands/polarArrayCommand.ts\");\n/* harmony import */ var _commands_revolveCommand__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./commands/revolveCommand */ \"./src/commands/commands/revolveCommand.ts\");\n/* harmony import */ var _commands_rotateCommand__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./commands/rotateCommand */ \"./src/commands/commands/rotateCommand.ts\");\n/* harmony import */ var _commands_scale1Command__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./commands/scale1Command */ \"./src/commands/commands/scale1Command.ts\");\n/* harmony import */ var _commands_scale2Command__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./commands/scale2Command */ \"./src/commands/commands/scale2Command.ts\");\n/* harmony import */ var _commands_scaleCommand__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./commands/scaleCommand */ \"./src/commands/commands/scaleCommand.ts\");\n/* harmony import */ var _commands_setMaterialCommand__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./commands/setMaterialCommand */ \"./src/commands/commands/setMaterialCommand.ts\");\n/* harmony import */ var _commands_shearCommand__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./commands/shearCommand */ \"./src/commands/commands/shearCommand.ts\");\n/* harmony import */ var _commands_snapsCommand__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./commands/snapsCommand */ \"./src/commands/commands/snapsCommand.ts\");\n/* harmony import */ var _commands_sphereCommand__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./commands/sphereCommand */ \"./src/commands/commands/sphereCommand.ts\");\n/* harmony import */ var _commands_splitCurveCommand__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./commands/splitCurveCommand */ \"./src/commands/commands/splitCurveCommand.ts\");\n/* harmony import */ var _commands_sweep2Command__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./commands/sweep2Command */ \"./src/commands/commands/sweep2Command.ts\");\n/* harmony import */ var _commands_windowCommand__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./commands/windowCommand */ \"./src/commands/commands/windowCommand.ts\");\n/* harmony import */ var _oneTimeCommands_hideCommands__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./oneTimeCommands/hideCommands */ \"./src/commands/oneTimeCommands/hideCommands.ts\");\n/* harmony import */ var _oneTimeCommands_reverseCurveCommand__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./oneTimeCommands/reverseCurveCommand */ \"./src/commands/oneTimeCommands/reverseCurveCommand.ts\");\n/* harmony import */ var _oneTimeCommands_toggleControlCageCommand__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./oneTimeCommands/toggleControlCageCommand */ \"./src/commands/oneTimeCommands/toggleControlCageCommand.ts\");\n/* harmony import */ var _oneTimeCommands_toggleDarkModeCommand__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./oneTimeCommands/toggleDarkModeCommand */ \"./src/commands/oneTimeCommands/toggleDarkModeCommand.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass CommandManager {\n    constructor() {\n        this.currentCommand = null;\n        this.previousInput = \"null\";\n    }\n    handleInput(input) {\n        var _a;\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getLog().log(input);\n        input = input.toLowerCase();\n        if (this.currentCommand)\n            this.currentCommand.handleInputString(input);\n        else {\n            switch (input) {\n                case \"\":\n                    this.handleInput(this.previousInput);\n                    return;\n                case \"darkmode\":\n                case \"dm\":\n                    (0,_oneTimeCommands_toggleDarkModeCommand__WEBPACK_IMPORTED_MODULE_29__.toggleDarkMode)();\n                    break;\n                case \"constructionplane\":\n                case \"cpl\":\n                    this.currentCommand = new _commands_constructionPlaneCommand__WEBPACK_IMPORTED_MODULE_6__.ConstructionPlaneCommand();\n                    break;\n                case \"camera\":\n                case \"cam\":\n                    this.currentCommand = new _commands_cameraCommand__WEBPACK_IMPORTED_MODULE_4__.CameraCommand();\n                    break;\n                case \"curve\":\n                case \"c\":\n                    this.currentCommand = new _commands_curveCommand__WEBPACK_IMPORTED_MODULE_8__.CurveCommand();\n                    break;\n                case \"window\":\n                case \"w\":\n                    this.currentCommand = new _commands_windowCommand__WEBPACK_IMPORTED_MODULE_25__.WindowCommand();\n                    break;\n                case \"snaps\":\n                case \"sn\":\n                    this.currentCommand = new _commands_snapsCommand__WEBPACK_IMPORTED_MODULE_21__.SnapsCommand();\n                    break;\n                case \"circle\":\n                case \"ci\":\n                    this.currentCommand = new _commands_circleCommand__WEBPACK_IMPORTED_MODULE_5__.CircleCommand();\n                    break;\n                case \"arc\":\n                case \"a\":\n                    this.currentCommand = new _commands_arcCommand__WEBPACK_IMPORTED_MODULE_1__.ArcCommand();\n                    break;\n                case \"loft\":\n                case \"l\":\n                    this.currentCommand = new _commands_loftCommand__WEBPACK_IMPORTED_MODULE_10__.LoftCommand();\n                    break;\n                case \"revolve\":\n                case \"re\":\n                    this.currentCommand = new _commands_revolveCommand__WEBPACK_IMPORTED_MODULE_14__.RevolveCommand();\n                    break;\n                case \"copy\":\n                case \"cp\":\n                    this.currentCommand = new _commands_copyCommand__WEBPACK_IMPORTED_MODULE_7__.CopyCommand();\n                    break;\n                case \"move\":\n                case \"m\":\n                    this.currentCommand = new _commands_moveCommand__WEBPACK_IMPORTED_MODULE_12__.MoveCommand();\n                    break;\n                case \"scale1\":\n                case \"s1\":\n                    this.currentCommand = new _commands_scale1Command__WEBPACK_IMPORTED_MODULE_16__.Scale1Command();\n                    break;\n                case \"scale2\":\n                case \"s2\":\n                    this.currentCommand = new _commands_scale2Command__WEBPACK_IMPORTED_MODULE_17__.Scale2Command();\n                    break;\n                case \"scale\":\n                case \"s\":\n                    this.currentCommand = new _commands_scaleCommand__WEBPACK_IMPORTED_MODULE_18__.ScaleCommand();\n                    break;\n                case \"shear\":\n                case \"sh\":\n                    this.currentCommand = new _commands_shearCommand__WEBPACK_IMPORTED_MODULE_20__.ShearCommand();\n                    break;\n                case \"polar array\":\n                case \"pa\":\n                    this.currentCommand = new _commands_polarArrayCommand__WEBPACK_IMPORTED_MODULE_13__.PollarArrayCommand();\n                    break;\n                case \"linear array\":\n                case \"la\":\n                    this.currentCommand = new _commands_arrayCommand__WEBPACK_IMPORTED_MODULE_2__.LinearArrayCommand();\n                    break;\n                case \"mirror\":\n                case \"mi\":\n                    this.currentCommand = new _commands_mirrorCommand__WEBPACK_IMPORTED_MODULE_11__.MirrorCommand();\n                    break;\n                case \"rotate\":\n                case \"r\":\n                    this.currentCommand = new _commands_rotateCommand__WEBPACK_IMPORTED_MODULE_15__.RotateCommand();\n                    break;\n                case \"show controls\":\n                case \"sc\":\n                    (0,_oneTimeCommands_toggleControlCageCommand__WEBPACK_IMPORTED_MODULE_28__.ControlCageOnCommand)();\n                    break;\n                case \"hidw controls\":\n                case \"hc\":\n                    (0,_oneTimeCommands_toggleControlCageCommand__WEBPACK_IMPORTED_MODULE_28__.ControlCageOffCommand)();\n                    break;\n                case \"sphere\":\n                case \"sp\":\n                    this.currentCommand = new _commands_sphereCommand__WEBPACK_IMPORTED_MODULE_22__.SphereCommand();\n                    break;\n                case \"set material\":\n                case \"sm\":\n                    this.currentCommand = new _commands_setMaterialCommand__WEBPACK_IMPORTED_MODULE_19__.SetMaterialCommand();\n                    break;\n                case \"show\":\n                case \"sh\":\n                    (0,_oneTimeCommands_hideCommands__WEBPACK_IMPORTED_MODULE_26__.show)();\n                    break;\n                case \"hide\":\n                case \"h\":\n                    (0,_oneTimeCommands_hideCommands__WEBPACK_IMPORTED_MODULE_26__.hide)();\n                    break;\n                case \"hide swap\":\n                case \"hs\":\n                    (0,_oneTimeCommands_hideCommands__WEBPACK_IMPORTED_MODULE_26__.hideSwap)();\n                    break;\n                case \"blend curves\":\n                case \"bc\":\n                    this.currentCommand = new _commands_blendCurvesCommand__WEBPACK_IMPORTED_MODULE_3__.BlendCurvesCommand();\n                    break;\n                case \"extrude curve\":\n                case \"e\":\n                    this.currentCommand = new _commands_extrudeCurveCommand__WEBPACK_IMPORTED_MODULE_9__.ExtruedCurveCommand();\n                    break;\n                case \"sweep2\":\n                case \"sw2\":\n                    this.currentCommand = new _commands_sweep2Command__WEBPACK_IMPORTED_MODULE_24__.Sweep2Command();\n                    break;\n                case \"reverse curve\":\n                case \"rc\":\n                    (0,_oneTimeCommands_reverseCurveCommand__WEBPACK_IMPORTED_MODULE_27__.reverseCurveCommand)();\n                    break;\n                case \"split curve\":\n                case \"spc\":\n                    this.currentCommand = new _commands_splitCurveCommand__WEBPACK_IMPORTED_MODULE_23__.SplitCurveCommand();\n                    break;\n                default: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getLog().log(\"Invalid Command\");\n            }\n            this.previousInput = input;\n        }\n        if ((_a = this.currentCommand) === null || _a === void 0 ? void 0 : _a.isFinished()) {\n            this.currentCommand = null;\n        }\n    }\n    hasActiveCommand() {\n        return this.currentCommand != null;\n    }\n    handleClickInput() {\n        var _a, _b;\n        (_a = this.currentCommand) === null || _a === void 0 ? void 0 : _a.handleClick();\n        if ((_b = this.currentCommand) === null || _b === void 0 ? void 0 : _b.isFinished()) {\n            this.currentCommand = null;\n        }\n    }\n    handleClickResult(intersection) {\n        var _a, _b;\n        (_a = this.currentCommand) === null || _a === void 0 ? void 0 : _a.handleClickResult(intersection);\n        if ((_b = this.currentCommand) === null || _b === void 0 ? void 0 : _b.isFinished()) {\n            this.currentCommand = null;\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCli().render();\n    }\n    handleMouseMove() {\n        var _a;\n        (_a = this.currentCommand) === null || _a === void 0 ? void 0 : _a.handleMouseMove();\n    }\n    getInstructions() {\n        if (this.currentCommand)\n            return this.currentCommand.getInstructions();\n        return \"$\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWdlci50cz80ZTA3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRcIjtcbmltcG9ydCB7IEFyY0NvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9hcmNDb21tYW5kXCI7XG5pbXBvcnQgeyBMaW5lYXJBcnJheUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9hcnJheUNvbW1hbmRcIjtcbmltcG9ydCB7IEJsZW5kQ3VydmVzQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL2JsZW5kQ3VydmVzQ29tbWFuZFwiO1xuaW1wb3J0IHsgQ2FtZXJhQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL2NhbWVyYUNvbW1hbmRcIjtcbmltcG9ydCB7IENpcmNsZUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9jaXJjbGVDb21tYW5kXCI7XG5pbXBvcnQgeyBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9jb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRcIjtcbmltcG9ydCB7IENvcHlDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvY29weUNvbW1hbmRcIjtcbmltcG9ydCB7IEN1cnZlQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL2N1cnZlQ29tbWFuZFwiO1xuaW1wb3J0IHsgRXh0cnVlZEN1cnZlQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL2V4dHJ1ZGVDdXJ2ZUNvbW1hbmRcIjtcbmltcG9ydCB7IExvZnRDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvbG9mdENvbW1hbmRcIjtcbmltcG9ydCB7IE1pcnJvckNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9taXJyb3JDb21tYW5kXCI7XG5pbXBvcnQgeyBNb3ZlQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL21vdmVDb21tYW5kXCI7XG5pbXBvcnQgeyBQb2xsYXJBcnJheUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9wb2xhckFycmF5Q29tbWFuZFwiO1xuaW1wb3J0IHsgUmV2b2x2ZUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9yZXZvbHZlQ29tbWFuZFwiO1xuaW1wb3J0IHsgUm90YXRlQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL3JvdGF0ZUNvbW1hbmRcIjtcbmltcG9ydCB7IFNjYWxlMUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9zY2FsZTFDb21tYW5kXCI7XG5pbXBvcnQgeyBTY2FsZTJDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvc2NhbGUyQ29tbWFuZFwiO1xuaW1wb3J0IHsgU2NhbGVDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvc2NhbGVDb21tYW5kXCI7XG5pbXBvcnQgeyBTZXRNYXRlcmlhbENvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9zZXRNYXRlcmlhbENvbW1hbmRcIjtcbmltcG9ydCB7IFNoZWFyQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL3NoZWFyQ29tbWFuZFwiO1xuaW1wb3J0IHsgU25hcHNDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvc25hcHNDb21tYW5kXCI7XG5pbXBvcnQgeyBTcGhlcmVDb21tYW5kIH0gZnJvbSBcIi4vY29tbWFuZHMvc3BoZXJlQ29tbWFuZFwiO1xuaW1wb3J0IHsgU3BsaXRDdXJ2ZUNvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy9zcGxpdEN1cnZlQ29tbWFuZFwiO1xuaW1wb3J0IHsgU3dlZXAyQ29tbWFuZCB9IGZyb20gXCIuL2NvbW1hbmRzL3N3ZWVwMkNvbW1hbmRcIjtcbmltcG9ydCB7IFdpbmRvd0NvbW1hbmQgfSBmcm9tIFwiLi9jb21tYW5kcy93aW5kb3dDb21tYW5kXCI7XG5pbXBvcnQgeyBoaWRlLCBoaWRlU3dhcCwgc2hvdyB9IGZyb20gXCIuL29uZVRpbWVDb21tYW5kcy9oaWRlQ29tbWFuZHNcIjtcbmltcG9ydCB7IHJldmVyc2VDdXJ2ZUNvbW1hbmQgfSBmcm9tIFwiLi9vbmVUaW1lQ29tbWFuZHMvcmV2ZXJzZUN1cnZlQ29tbWFuZFwiO1xuaW1wb3J0IHsgQ29udHJvbENhZ2VPZmZDb21tYW5kLCBDb250cm9sQ2FnZU9uQ29tbWFuZCB9IGZyb20gXCIuL29uZVRpbWVDb21tYW5kcy90b2dnbGVDb250cm9sQ2FnZUNvbW1hbmRcIjtcbmltcG9ydCB7IHRvZ2dsZURhcmtNb2RlIH0gZnJvbSBcIi4vb25lVGltZUNvbW1hbmRzL3RvZ2dsZURhcmtNb2RlQ29tbWFuZFwiO1xuXG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kTWFuYWdlciB7XG5cbiAgcHJpdmF0ZSBjdXJyZW50Q29tbWFuZDogQ29tbWFuZCB8IG51bGw7XG4gIHByaXZhdGUgcHJldmlvdXNJbnB1dDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBudWxsO1xuICAgIHRoaXMucHJldmlvdXNJbnB1dCA9IFwibnVsbFwiO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUlucHV0KGlucHV0OiBzdHJpbmcpIHtcblxuICAgIElOU1RBTkNFLmdldExvZygpLmxvZyhpbnB1dCk7XG5cbiAgICBpbnB1dCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Q29tbWFuZCkgdGhpcy5jdXJyZW50Q29tbWFuZC5oYW5kbGVJbnB1dFN0cmluZyhpbnB1dCk7XG4gICAgZWxzZSB7XG4gICAgICBzd2l0Y2ggKGlucHV0KSB7XG4gICAgICAgIGNhc2UgXCJcIjpcbiAgICAgICAgICB0aGlzLmhhbmRsZUlucHV0KHRoaXMucHJldmlvdXNJbnB1dCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlIFwiZGFya21vZGVcIjogY2FzZSBcImRtXCI6XG4gICAgICAgICAgdG9nZ2xlRGFya01vZGUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNvbnN0cnVjdGlvbnBsYW5lXCI6IGNhc2UgXCJjcGxcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY2FtZXJhXCI6IGNhc2UgXCJjYW1cIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IENhbWVyYUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImN1cnZlXCI6IGNhc2UgXCJjXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBDdXJ2ZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIndpbmRvd1wiOiBjYXNlIFwid1wiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgV2luZG93Q29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic25hcHNcIjogY2FzZSBcInNuXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBTbmFwc0NvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNpcmNsZVwiOiBjYXNlIFwiY2lcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IENpcmNsZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImFyY1wiOiBjYXNlIFwiYVwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgQXJjQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibG9mdFwiOiBjYXNlIFwibFwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgTG9mdENvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJldm9sdmVcIjogY2FzZSBcInJlXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBSZXZvbHZlQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY29weVwiOiBjYXNlIFwiY3BcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IENvcHlDb21tYW5kKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJtb3ZlXCI6IGNhc2UgXCJtXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBNb3ZlQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2NhbGUxXCI6IGNhc2UgXCJzMVwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgU2NhbGUxQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2NhbGUyXCI6IGNhc2UgXCJzMlwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgU2NhbGUyQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2NhbGVcIjogY2FzZSBcInNcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IFNjYWxlQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2hlYXJcIjogY2FzZSBcInNoXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBTaGVhckNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBvbGFyIGFycmF5XCI6IGNhc2UgXCJwYVwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgUG9sbGFyQXJyYXlDb21tYW5kKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJsaW5lYXIgYXJyYXlcIjogY2FzZSBcImxhXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBMaW5lYXJBcnJheUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm1pcnJvclwiOiBjYXNlIFwibWlcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IE1pcnJvckNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJvdGF0ZVwiOiBjYXNlIFwiclwiOlxuICAgICAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBuZXcgUm90YXRlQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2hvdyBjb250cm9sc1wiOiBjYXNlIFwic2NcIjpcbiAgICAgICAgICBDb250cm9sQ2FnZU9uQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaGlkdyBjb250cm9sc1wiOiBjYXNlIFwiaGNcIjpcbiAgICAgICAgICBDb250cm9sQ2FnZU9mZkNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNwaGVyZVwiOiBjYXNlIFwic3BcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IFNwaGVyZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNldCBtYXRlcmlhbFwiOiBjYXNlIFwic21cIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IFNldE1hdGVyaWFsQ29tbWFuZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic2hvd1wiOiBjYXNlIFwic2hcIjpcbiAgICAgICAgICBzaG93KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJoaWRlXCI6IGNhc2UgXCJoXCI6XG4gICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaGlkZSBzd2FwXCI6IGNhc2UgXCJoc1wiOlxuICAgICAgICAgIGhpZGVTd2FwKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJibGVuZCBjdXJ2ZXNcIjogY2FzZSBcImJjXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBCbGVuZEN1cnZlc0NvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImV4dHJ1ZGUgY3VydmVcIjogY2FzZSBcImVcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IEV4dHJ1ZWRDdXJ2ZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInN3ZWVwMlwiOiBjYXNlIFwic3cyXCI6XG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29tbWFuZCA9IG5ldyBTd2VlcDJDb21tYW5kKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJyZXZlcnNlIGN1cnZlXCI6IGNhc2UgXCJyY1wiOlxuICAgICAgICAgIHJldmVyc2VDdXJ2ZUNvbW1hbmQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNwbGl0IGN1cnZlXCI6IGNhc2UgXCJzcGNcIjpcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbmV3IFNwbGl0Q3VydmVDb21tYW5kKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IElOU1RBTkNFLmdldExvZygpLmxvZyhcIkludmFsaWQgQ29tbWFuZFwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucHJldmlvdXNJbnB1dCA9IGlucHV0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbnRDb21tYW5kPy5pc0ZpbmlzaGVkKCkpIHtcbiAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBudWxsO1xuICAgIH1cblxuICB9XG5cbiAgaGFzQWN0aXZlQ29tbWFuZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50Q29tbWFuZCAhPSBudWxsO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUNsaWNrSW5wdXQoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50Q29tbWFuZD8uaGFuZGxlQ2xpY2soKTtcbiAgICBpZiAodGhpcy5jdXJyZW50Q29tbWFuZD8uaXNGaW5pc2hlZCgpKSB7XG4gICAgICB0aGlzLmN1cnJlbnRDb21tYW5kID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRDb21tYW5kPy5oYW5kbGVDbGlja1Jlc3VsdChpbnRlcnNlY3Rpb24pO1xuICAgIGlmICh0aGlzLmN1cnJlbnRDb21tYW5kPy5pc0ZpbmlzaGVkKCkpIHtcbiAgICAgIHRoaXMuY3VycmVudENvbW1hbmQgPSBudWxsO1xuICAgIH0gSU5TVEFOQ0UuZ2V0Q2xpKCkucmVuZGVyKCk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudENvbW1hbmQ/LmhhbmRsZU1vdXNlTW92ZSgpO1xuICB9XG5cbiAgcHVibGljIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmN1cnJlbnRDb21tYW5kKSByZXR1cm4gdGhpcy5jdXJyZW50Q29tbWFuZCEuZ2V0SW5zdHJ1Y3Rpb25zKCk7XG4gICAgcmV0dXJuIFwiJFwiO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commandManager.ts\n");

/***/ }),

/***/ "./src/commands/commands/arcCommand.ts":
/*!*********************************************!*\
  !*** ./src/commands/commands/arcCommand.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ArcCommand: () => (/* binding */ ArcCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_arc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/arc */ \"./src/geometry/nurbs/arc.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\n\n\nvar ArcCommandMode;\n(function (ArcCommandMode) {\n    ArcCommandMode[ArcCommandMode[\"Menu\"] = 0] = \"Menu\";\n    ArcCommandMode[ArcCommandMode[\"FromStartEndMiddle\"] = 1] = \"FromStartEndMiddle\";\n    ArcCommandMode[ArcCommandMode[\"FromCenterStartEnd\"] = 2] = \"FromCenterStartEnd\";\n})(ArcCommandMode || (ArcCommandMode = {}));\nclass ArcCommand extends _command__WEBPACK_IMPORTED_MODULE_6__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.flipped = false;\n        this.mode = ArcCommandMode.Menu;\n        this.p1 = null;\n        this.p2 = null;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_5__.Clicker();\n        this.curve = null;\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            this.finished = true;\n            return;\n        }\n        if (this.mode == ArcCommandMode.Menu) {\n            switch (input) {\n                case \"1\":\n                    this.mode = ArcCommandMode.FromStartEndMiddle;\n                    break;\n                case \"2\":\n                    this.mode = ArcCommandMode.FromCenterStartEnd;\n                    break;\n            }\n        }\n        if (this.mode == ArcCommandMode.FromCenterStartEnd) {\n            if (this.p1 && this.p2 && input == \"1\") {\n                this.flipped = !this.flipped;\n                this.handleMouseMove();\n            }\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case ArcCommandMode.Menu:\n                break;\n            case ArcCommandMode.FromStartEndMiddle:\n                this.handleClickStartEndMiddle(intersection);\n                break;\n            case ArcCommandMode.FromCenterStartEnd:\n                this.handleClickCenterStartEnd(intersection);\n                break;\n            default:\n                throw new Error(\"case not handled\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        switch (this.mode) {\n            case ArcCommandMode.FromCenterStartEnd:\n                this.handleMouseMoveCenterStartEnd(null);\n                break;\n            case ArcCommandMode.FromStartEndMiddle:\n                this.handleMouseMoveStartEndMiddle(null);\n                break;\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case ArcCommandMode.Menu:\n                return \"0:Exit  1:StartEndMiddle  2:CenterStartEnd  $\";\n            case ArcCommandMode.FromStartEndMiddle:\n                return this.getInstructionsStartEndMiddle();\n            case ArcCommandMode.FromCenterStartEnd:\n                return this.getInstructionsCenterStartEnd();\n            default:\n                throw new Error(\"case not handled\");\n        }\n    }\n    getInstructionsStartEndMiddle() {\n        if (this.p1 === null) {\n            return \"0:Exit  Click start point.  $\";\n        }\n        if (this.p2 === null) {\n            return \"0:Exit  Click end point.  $\";\n        }\n        return \"0:Exit  click middle point.  $\";\n    }\n    getInstructionsCenterStartEnd() {\n        if (this.p1 === null) {\n            return \"0: Exit  click center point.  $\";\n        }\n        if (this.p2 === null) {\n            return \"0: Exit  click start point.  $\";\n        }\n        return \"0: Exit  1:Flip  click end point.  $\";\n    }\n    handleClickStartEndMiddle(intersection) {\n        if (this.p1 === null) {\n            this.p1 = intersection.point;\n        }\n        else if (this.p2 === null && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.equals(this.p1, intersection.point)) {\n            this.p2 = intersection.point;\n        }\n        else {\n            this.handleMouseMoveStartEndMiddle(intersection.point);\n            this.done();\n        }\n    }\n    handleClickCenterStartEnd(intersection) {\n        if (this.p1 === null) {\n            this.p1 = intersection.point;\n        }\n        else if (this.p2 === null && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.equals(this.p1, intersection.point)) {\n            this.p2 = intersection.point;\n        }\n        else {\n            this.handleMouseMoveCenterStartEnd(intersection.point);\n            this.done();\n        }\n    }\n    handleMouseMoveStartEndMiddle(point) {\n        var _a;\n        if (this.p1 && this.p2) {\n            if (!point)\n                point = this.clicker.getPoint();\n            if (point) {\n                const ab = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(this.p1, point);\n                const ac = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(this.p2, point);\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(ab, ac));\n                const ro = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.add(point, this.p1), 0.5);\n                const rd = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(ab, normal));\n                const r = new _geometry_ray__WEBPACK_IMPORTED_MODULE_3__.Ray(ro, rd);\n                const po = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.add(point, this.p2), 0.5);\n                const pn = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(ac);\n                const p = new _geometry_plane__WEBPACK_IMPORTED_MODULE_2__.Plane(po, pn);\n                const t = r.intersectPlane(p, true);\n                const center = r.at(t);\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.distance(point, center);\n                const xAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(this.p2, center));\n                const yAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(normal, xAxis);\n                var theta = (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.angleBetween)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(this.p1, center), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(this.p2, center));\n                if ((0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.angleBetween)(ab, ac) < Math.PI / 2) {\n                    theta = 2 * Math.PI - theta;\n                }\n                if (isNaN(theta) || theta === 0)\n                    return;\n                (_a = this.curve) === null || _a === void 0 ? void 0 : _a.delete();\n                this.curve = (0,_geometry_nurbs_arc__WEBPACK_IMPORTED_MODULE_1__.createArc)(center, xAxis, yAxis, radius, 0, theta);\n            }\n        }\n    }\n    handleMouseMoveCenterStartEnd(point) {\n        var _a;\n        if (this.p1 && this.p2) {\n            if (!point)\n                point = this.clicker.getPoint();\n            if (point) {\n                const xAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(this.p2, this.p1));\n                const toEnd = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(point, this.p1);\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(xAxis, toEnd));\n                const yAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(normal, xAxis);\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.length(toEnd);\n                var theta = (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.angleBetween)(xAxis, toEnd);\n                if (this.flipped) {\n                    theta = Math.PI * 2 - theta;\n                    wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(yAxis, -1, yAxis);\n                }\n                if (isNaN(theta) || theta === 0)\n                    return;\n                (_a = this.curve) === null || _a === void 0 ? void 0 : _a.delete();\n                this.curve = (0,_geometry_nurbs_arc__WEBPACK_IMPORTED_MODULE_1__.createArc)(this.p1, xAxis, yAxis, radius, 0, theta);\n            }\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        if (this.curve) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.curve);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsS0FBSyxDQUFDLENBQUM7U0FDN0M7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9hcmNDb21tYW5kLnRzPzAzNjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBjcmVhdGVBcmMgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvYXJjXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9jdXJ2ZVwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGxhbmVcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yYXlcIjtcbmltcG9ydCB7IGFuZ2xlQmV0d2VlbiB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIEFyY0NvbW1hbmRNb2RlIHtcbiAgTWVudSxcbiAgRnJvbVN0YXJ0RW5kTWlkZGxlLFxuICBGcm9tQ2VudGVyU3RhcnRFbmQsXG59XG5cbmV4cG9ydCBjbGFzcyBBcmNDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBmbGlwcGVkOiBib29sZWFuO1xuICBwcml2YXRlIG1vZGU6IEFyY0NvbW1hbmRNb2RlO1xuICBwcml2YXRlIGN1cnZlOiBDdXJ2ZSB8IG51bGw7XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBwMTogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgcDI6IFZlYzMgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuZmxpcHBlZCA9IGZhbHNlO1xuICAgIHRoaXMubW9kZSA9IEFyY0NvbW1hbmRNb2RlLk1lbnU7XG4gICAgdGhpcy5wMSA9IG51bGw7XG4gICAgdGhpcy5wMiA9IG51bGw7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgICB0aGlzLmN1cnZlID0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGlucHV0ID09IFwiMFwiKSB7XG4gICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kZSA9PSBBcmNDb21tYW5kTW9kZS5NZW51KSB7XG4gICAgICBzd2l0Y2ggKGlucHV0KSB7XG4gICAgICAgIGNhc2UgXCIxXCI6XG4gICAgICAgICAgdGhpcy5tb2RlID0gQXJjQ29tbWFuZE1vZGUuRnJvbVN0YXJ0RW5kTWlkZGxlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiMlwiOlxuICAgICAgICAgIHRoaXMubW9kZSA9IEFyY0NvbW1hbmRNb2RlLkZyb21DZW50ZXJTdGFydEVuZDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMubW9kZSA9PSBBcmNDb21tYW5kTW9kZS5Gcm9tQ2VudGVyU3RhcnRFbmQpIHtcbiAgICAgIGlmICh0aGlzLnAxICYmIHRoaXMucDIgJiYgaW5wdXQgPT0gXCIxXCIpIHtcbiAgICAgICAgdGhpcy5mbGlwcGVkID0gIXRoaXMuZmxpcHBlZDtcbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBBcmNDb21tYW5kTW9kZS5NZW51OlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQXJjQ29tbWFuZE1vZGUuRnJvbVN0YXJ0RW5kTWlkZGxlOlxuICAgICAgICB0aGlzLmhhbmRsZUNsaWNrU3RhcnRFbmRNaWRkbGUoaW50ZXJzZWN0aW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFyY0NvbW1hbmRNb2RlLkZyb21DZW50ZXJTdGFydEVuZDpcbiAgICAgICAgdGhpcy5oYW5kbGVDbGlja0NlbnRlclN0YXJ0RW5kKGludGVyc2VjdGlvbik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaGFuZGxlZFwiKTtcbiAgICB9XG4gICAgdGhpcy5jbGlja2VyLnJlc2V0KCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLmNsaWNrKCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5vbk1vdXNlTW92ZSgpO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIEFyY0NvbW1hbmRNb2RlLkZyb21DZW50ZXJTdGFydEVuZDpcbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU1vdmVDZW50ZXJTdGFydEVuZChudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEFyY0NvbW1hbmRNb2RlLkZyb21TdGFydEVuZE1pZGRsZTpcbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU1vdmVTdGFydEVuZE1pZGRsZShudWxsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBvdmVycmlkZSBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBBcmNDb21tYW5kTW9kZS5NZW51OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIDE6U3RhcnRFbmRNaWRkbGUgIDI6Q2VudGVyU3RhcnRFbmQgICRcIjtcbiAgICAgIGNhc2UgQXJjQ29tbWFuZE1vZGUuRnJvbVN0YXJ0RW5kTWlkZGxlOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnN0cnVjdGlvbnNTdGFydEVuZE1pZGRsZSgpO1xuICAgICAgY2FzZSBBcmNDb21tYW5kTW9kZS5Gcm9tQ2VudGVyU3RhcnRFbmQ6XG4gICAgICAgIHJldHVybiB0aGlzLmdldEluc3RydWN0aW9uc0NlbnRlclN0YXJ0RW5kKCk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBoYW5kbGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnN0cnVjdGlvbnNTdGFydEVuZE1pZGRsZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnAxID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHN0YXJ0IHBvaW50LiAgJFwiO1xuICAgIH1cbiAgICBpZiAodGhpcy5wMiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBlbmQgcG9pbnQuICAkXCI7XG4gICAgfVxuICAgIHJldHVybiBcIjA6RXhpdCAgY2xpY2sgbWlkZGxlIHBvaW50LiAgJFwiXG4gIH1cblxuICBwdWJsaWMgZ2V0SW5zdHJ1Y3Rpb25zQ2VudGVyU3RhcnRFbmQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5wMSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFwiMDogRXhpdCAgY2xpY2sgY2VudGVyIHBvaW50LiAgJFwiO1xuICAgIH1cbiAgICBpZiAodGhpcy5wMiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFwiMDogRXhpdCAgY2xpY2sgc3RhcnQgcG9pbnQuICAkXCI7XG4gICAgfVxuICAgIHJldHVybiBcIjA6IEV4aXQgIDE6RmxpcCAgY2xpY2sgZW5kIHBvaW50LiAgJFwiO1xuICB9XG5cblxuICBwdWJsaWMgaGFuZGxlQ2xpY2tTdGFydEVuZE1pZGRsZShpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbik6IHZvaWQge1xuICAgIGlmICh0aGlzLnAxID09PSBudWxsKSB7XG4gICAgICB0aGlzLnAxID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgIH0gZWxzZSBpZiAodGhpcy5wMiA9PT0gbnVsbCAmJiAhdmVjMy5lcXVhbHModGhpcy5wMSwgaW50ZXJzZWN0aW9uLnBvaW50KSkge1xuICAgICAgdGhpcy5wMiA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVNb3VzZU1vdmVTdGFydEVuZE1pZGRsZShpbnRlcnNlY3Rpb24ucG9pbnQpO1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBoYW5kbGVDbGlja0NlbnRlclN0YXJ0RW5kKGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucDEgPT09IG51bGwpIHtcbiAgICAgIHRoaXMucDEgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLnAyID09PSBudWxsICYmICF2ZWMzLmVxdWFscyh0aGlzLnAxLCBpbnRlcnNlY3Rpb24ucG9pbnQpKSB7XG4gICAgICB0aGlzLnAyID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU1vdXNlTW92ZUNlbnRlclN0YXJ0RW5kKGludGVyc2VjdGlvbi5wb2ludCk7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlTW91c2VNb3ZlU3RhcnRFbmRNaWRkbGUocG9pbnQ6IFZlYzMgfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucDEgJiYgdGhpcy5wMikge1xuICAgICAgaWYgKCFwb2ludCkgcG9pbnQgPSB0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKTtcbiAgICAgIGlmIChwb2ludCkge1xuICAgICAgICBjb25zdCBhYjogVmVjMyA9IHZlYzMuc3ViKHRoaXMucDEsIHBvaW50KTtcbiAgICAgICAgY29uc3QgYWM6IFZlYzMgPSB2ZWMzLnN1Yih0aGlzLnAyLCBwb2ludCk7XG4gICAgICAgIGNvbnN0IG5vcm1hbDogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuY3Jvc3MoYWIsIGFjKSk7XG5cbiAgICAgICAgY29uc3Qgcm86IFZlYzMgPSB2ZWMzLnNjYWxlKHZlYzMuYWRkKHBvaW50LCB0aGlzLnAxKSwgMC41KTtcbiAgICAgICAgY29uc3QgcmQ6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKGFiLCBub3JtYWwpKTtcbiAgICAgICAgY29uc3QgcjogUmF5ID0gbmV3IFJheShybywgcmQpO1xuXG4gICAgICAgIGNvbnN0IHBvOiBWZWMzID0gdmVjMy5zY2FsZSh2ZWMzLmFkZChwb2ludCwgdGhpcy5wMiksIDAuNSk7XG4gICAgICAgIGNvbnN0IHBuOiBWZWMzID0gdmVjMy5ub3JtYWxpemUoYWMpO1xuICAgICAgICBjb25zdCBwOiBQbGFuZSA9IG5ldyBQbGFuZShwbywgcG4pO1xuXG4gICAgICAgIGNvbnN0IHQ6IG51bWJlciA9IHIuaW50ZXJzZWN0UGxhbmUocCwgdHJ1ZSkhO1xuICAgICAgICBjb25zdCBjZW50ZXI6IFZlYzMgPSByLmF0KHQpO1xuICAgICAgICBjb25zdCByYWRpdXM6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UocG9pbnQsIGNlbnRlcik7XG5cbiAgICAgICAgY29uc3QgeEF4aXM6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1Yih0aGlzLnAyLCBjZW50ZXIpKTtcbiAgICAgICAgY29uc3QgeUF4aXM6IFZlYzMgPSB2ZWMzLmNyb3NzKG5vcm1hbCwgeEF4aXMpO1xuXG4gICAgICAgIHZhciB0aGV0YTogbnVtYmVyID0gYW5nbGVCZXR3ZWVuKHZlYzMuc3ViKHRoaXMucDEsIGNlbnRlciksIHZlYzMuc3ViKHRoaXMucDIsIGNlbnRlcikpO1xuXG4gICAgICAgIGlmIChhbmdsZUJldHdlZW4oYWIsIGFjKSA8IE1hdGguUEkgLyAyKSB7XG4gICAgICAgICAgdGhldGEgPSAyICogTWF0aC5QSSAtIHRoZXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTmFOKHRoZXRhKSB8fCB0aGV0YSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuY3VydmU/LmRlbGV0ZSgpO1xuICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQXJjKGNlbnRlciwgeEF4aXMsIHlBeGlzLCByYWRpdXMsIDAsIHRoZXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlTW91c2VNb3ZlQ2VudGVyU3RhcnRFbmQocG9pbnQ6IFZlYzMgfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucDEgJiYgdGhpcy5wMikge1xuICAgICAgaWYgKCFwb2ludCkgcG9pbnQgPSB0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKTtcbiAgICAgIGlmIChwb2ludCkge1xuICAgICAgICBjb25zdCB4QXhpczogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuc3ViKHRoaXMucDIsIHRoaXMucDEpKTtcbiAgICAgICAgY29uc3QgdG9FbmQ6IFZlYzMgPSB2ZWMzLnN1Yihwb2ludCwgdGhpcy5wMSk7XG4gICAgICAgIGNvbnN0IG5vcm1hbDogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuY3Jvc3MoeEF4aXMsIHRvRW5kKSk7XG4gICAgICAgIGNvbnN0IHlBeGlzOiBWZWMzID0gdmVjMy5jcm9zcyhub3JtYWwsIHhBeGlzKTtcbiAgICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSB2ZWMzLmxlbmd0aCh0b0VuZCk7XG4gICAgICAgIHZhciB0aGV0YTogbnVtYmVyID0gYW5nbGVCZXR3ZWVuKHhBeGlzLCB0b0VuZCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZmxpcHBlZCkge1xuICAgICAgICAgIHRoZXRhID0gTWF0aC5QSSAqIDIgLSB0aGV0YTtcbiAgICAgICAgICB2ZWMzLnNjYWxlKHlBeGlzLCAtMSwgeUF4aXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzTmFOKHRoZXRhKSB8fCB0aGV0YSA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuY3VydmU/LmRlbGV0ZSgpO1xuICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQXJjKHRoaXMucDEsIHhBeGlzLCB5QXhpcywgcmFkaXVzLCAwLCB0aGV0YSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgIGlmICh0aGlzLmN1cnZlKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KHRoaXMuY3VydmUpO1xuICAgIH1cbiAgfVxuXG59XG5cblxuXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/arcCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/arrayCommand.ts":
/*!***********************************************!*\
  !*** ./src/commands/commands/arrayCommand.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LinearArrayCommand: () => (/* binding */ LinearArrayCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\nvar LinearArrayCommandMode;\n(function (LinearArrayCommandMode) {\n    LinearArrayCommandMode[LinearArrayCommandMode[\"EnterCount\"] = 0] = \"EnterCount\";\n    LinearArrayCommandMode[LinearArrayCommandMode[\"BasePoint\"] = 1] = \"BasePoint\";\n    LinearArrayCommandMode[LinearArrayCommandMode[\"DirectionPoint\"] = 2] = \"DirectionPoint\";\n})(LinearArrayCommandMode || (LinearArrayCommandMode = {}));\nclass LinearArrayCommand extends _command__WEBPACK_IMPORTED_MODULE_2__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_1__.Clicker();\n        this.mode = LinearArrayCommandMode.EnterCount;\n        this.geometry = [];\n        this.arrayedGeometry = [];\n        this.basePoint = null;\n        this.directionPoint = null;\n        this.count = null;\n        const selected = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selected.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geo of selected) {\n            this.geometry.push(geo);\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            this.done();\n            return;\n        }\n        switch (this.mode) {\n            case LinearArrayCommandMode.EnterCount:\n                const count = parseInt(input);\n                if (!isNaN(count) && count > 1) {\n                    this.count = count;\n                    this.mode = LinearArrayCommandMode.BasePoint;\n                }\n                break;\n            case LinearArrayCommandMode.BasePoint:\n                break;\n            case LinearArrayCommandMode.DirectionPoint:\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case LinearArrayCommandMode.EnterCount:\n                break;\n            case LinearArrayCommandMode.BasePoint:\n                this.basePoint = intersection.point;\n                this.mode = LinearArrayCommandMode.DirectionPoint;\n                for (var i = 1; i < this.count; i++) {\n                    const translated = [];\n                    for (const geo of this.geometry) {\n                        translated.push(geo.clone());\n                    }\n                    this.arrayedGeometry.push(translated);\n                }\n                break;\n            case LinearArrayCommandMode.DirectionPoint:\n                this.directionPoint = intersection.point;\n                this.setTranslation();\n                for (const v of this.arrayedGeometry) {\n                    for (const geo of v) {\n                        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n                        this.geometry.push(geo);\n                    }\n                }\n                this.arrayedGeometry = [];\n                this.mode = LinearArrayCommandMode.EnterCount;\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode == LinearArrayCommandMode.DirectionPoint) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                this.directionPoint = point;\n                this.setTranslation();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case LinearArrayCommandMode.EnterCount:\n                return \"0:Exit  Enter array count.  $\";\n            case LinearArrayCommandMode.BasePoint:\n                return \"0:Exit  Click base point.  $\";\n            case LinearArrayCommandMode.DirectionPoint:\n                return \"0:Exit  Click direction point.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        for (const v of this.arrayedGeometry) {\n            for (const geo of v) {\n                geo.delete();\n            }\n        }\n    }\n    setTranslation() {\n        const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(this.directionPoint, this.basePoint);\n        for (let i = 1; i < this.count; i++) {\n            const scaledTranslation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(translation, i);\n            const transform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.translation(scaledTranslation);\n            for (let j = 0; j < this.geometry.length; j++) {\n                this.arrayedGeometry[i - 1][j].setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.mul(transform, this.geometry[j].getModel()));\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUM3QyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsNkNBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQzNGO1NBQ0Y7SUFFSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9hcnJheUNvbW1hbmQudHM/ZDVmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRcIjtcblxuZW51bSBMaW5lYXJBcnJheUNvbW1hbmRNb2RlIHtcbiAgRW50ZXJDb3VudCxcbiAgQmFzZVBvaW50LFxuICBEaXJlY3Rpb25Qb2ludCxcbn1cblxuZXhwb3J0IGNsYXNzIExpbmVhckFycmF5Q29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBtb2RlOiBMaW5lYXJBcnJheUNvbW1hbmRNb2RlO1xuICBwcml2YXRlIGdlb21ldHJ5OiBHZW9tZXRyeVtdO1xuICBwcml2YXRlIGFycmF5ZWRHZW9tZXRyeTogR2VvbWV0cnlbXVtdO1xuICBwcml2YXRlIGJhc2VQb2ludDogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgZGlyZWN0aW9uUG9pbnQ6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIGNvdW50OiBudW1iZXIgfCBudWxsO1xuXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgICB0aGlzLm1vZGUgPSBMaW5lYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyQ291bnQ7XG4gICAgdGhpcy5nZW9tZXRyeSA9IFtdO1xuICAgIHRoaXMuYXJyYXllZEdlb21ldHJ5ID0gW107XG4gICAgdGhpcy5iYXNlUG9pbnQgPSBudWxsO1xuICAgIHRoaXMuZGlyZWN0aW9uUG9pbnQgPSBudWxsO1xuICAgIHRoaXMuY291bnQgPSBudWxsO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWQ6IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3RlZC5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGdlbyBvZiBzZWxlY3RlZCkge1xuICAgICAgdGhpcy5nZW9tZXRyeS5wdXNoKGdlbyk7XG4gICAgfVxuXG4gIH1cblxuICBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG5cbiAgICBpZiAoaW5wdXQgPT0gXCIwXCIpIHtcbiAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIExpbmVhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDb3VudDpcbiAgICAgICAgY29uc3QgY291bnQ6IG51bWJlciA9IHBhcnNlSW50KGlucHV0KTtcbiAgICAgICAgaWYgKCFpc05hTihjb3VudCkgJiYgY291bnQgPiAxKSB7XG4gICAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuICAgICAgICAgIHRoaXMubW9kZSA9IExpbmVhckFycmF5Q29tbWFuZE1vZGUuQmFzZVBvaW50O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBMaW5lYXJBcnJheUNvbW1hbmRNb2RlLkJhc2VQb2ludDpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExpbmVhckFycmF5Q29tbWFuZE1vZGUuRGlyZWN0aW9uUG9pbnQ6XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuXG4gIH1cblxuICBoYW5kbGVDbGlja1Jlc3VsdChpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbik6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIExpbmVhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDb3VudDpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExpbmVhckFycmF5Q29tbWFuZE1vZGUuQmFzZVBvaW50OlxuICAgICAgICB0aGlzLmJhc2VQb2ludCA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgdGhpcy5tb2RlID0gTGluZWFyQXJyYXlDb21tYW5kTW9kZS5EaXJlY3Rpb25Qb2ludDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLmNvdW50ITsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgdHJhbnNsYXRlZDogR2VvbWV0cnlbXSA9IFtdO1xuICAgICAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgIHRyYW5zbGF0ZWQucHVzaChnZW8uY2xvbmUoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYXJyYXllZEdlb21ldHJ5LnB1c2godHJhbnNsYXRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExpbmVhckFycmF5Q29tbWFuZE1vZGUuRGlyZWN0aW9uUG9pbnQ6XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMuc2V0VHJhbnNsYXRpb24oKTtcbiAgICAgICAgZm9yIChjb25zdCB2IG9mIHRoaXMuYXJyYXllZEdlb21ldHJ5KSB7XG4gICAgICAgICAgZm9yIChjb25zdCBnZW8gb2Ygdikge1xuICAgICAgICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeShnZW8pO1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeS5wdXNoKGdlbyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXJyYXllZEdlb21ldHJ5ID0gW107XG4gICAgICAgIHRoaXMubW9kZSA9IExpbmVhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDb3VudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gICAgdGhpcy5jbGlja2VyLnJlc2V0KCk7XG4gIH1cbiAgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLmNsaWNrKCk7XG4gIH1cbiAgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5vbk1vdXNlTW92ZSgpO1xuICAgIGlmICh0aGlzLm1vZGUgPT0gTGluZWFyQXJyYXlDb21tYW5kTW9kZS5EaXJlY3Rpb25Qb2ludCkge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25Qb2ludCA9IHBvaW50O1xuICAgICAgICB0aGlzLnNldFRyYW5zbGF0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIExpbmVhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDb3VudDpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBFbnRlciBhcnJheSBjb3VudC4gICRcIjtcbiAgICAgIGNhc2UgTGluZWFyQXJyYXlDb21tYW5kTW9kZS5CYXNlUG9pbnQ6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgYmFzZSBwb2ludC4gICRcIjtcbiAgICAgIGNhc2UgTGluZWFyQXJyYXlDb21tYW5kTW9kZS5EaXJlY3Rpb25Qb2ludDpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBkaXJlY3Rpb24gcG9pbnQuICAkXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBkb25lKCk6IHZvaWQge1xuICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgIHRoaXMuY2xpY2tlci5kZXN0cm95KCk7XG4gICAgZm9yIChjb25zdCB2IG9mIHRoaXMuYXJyYXllZEdlb21ldHJ5KSB7XG4gICAgICBmb3IgKGNvbnN0IGdlbyBvZiB2KSB7XG4gICAgICAgIGdlby5kZWxldGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldFRyYW5zbGF0aW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBWZWMzID0gdmVjMy5zdWIodGhpcy5kaXJlY3Rpb25Qb2ludCEsIHRoaXMuYmFzZVBvaW50ISk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmNvdW50ITsgaSsrKSB7XG4gICAgICBjb25zdCBzY2FsZWRUcmFuc2xhdGlvbjogVmVjMyA9IHZlYzMuc2NhbGUodHJhbnNsYXRpb24sIGkpO1xuICAgICAgY29uc3QgdHJhbnNmb3JtOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbihzY2FsZWRUcmFuc2xhdGlvbik7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZ2VvbWV0cnkubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdGhpcy5hcnJheWVkR2VvbWV0cnlbaSAtIDFdW2pdLnNldE1vZGVsKG1hdDQubXVsKHRyYW5zZm9ybSwgdGhpcy5nZW9tZXRyeVtqXS5nZXRNb2RlbCgpKSk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/arrayCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/blendCurvesCommand.ts":
/*!*****************************************************!*\
  !*** ./src/commands/commands/blendCurvesCommand.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlendCurvesCommand: () => (/* binding */ BlendCurvesCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/curve */ \"./src/geometry/nurbs/curve.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\nvar BlendCurvesCommandMode;\n(function (BlendCurvesCommandMode) {\n    BlendCurvesCommandMode[BlendCurvesCommandMode[\"SelectCurve1\"] = 0] = \"SelectCurve1\";\n    BlendCurvesCommandMode[BlendCurvesCommandMode[\"SelectCurve2\"] = 1] = \"SelectCurve2\";\n    BlendCurvesCommandMode[BlendCurvesCommandMode[\"Menu\"] = 2] = \"Menu\";\n    BlendCurvesCommandMode[BlendCurvesCommandMode[\"AdjustEnd1\"] = 3] = \"AdjustEnd1\";\n    BlendCurvesCommandMode[BlendCurvesCommandMode[\"AdjustEnd2\"] = 4] = \"AdjustEnd2\";\n})(BlendCurvesCommandMode || (BlendCurvesCommandMode = {}));\nclass BlendCurvesCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.mode = BlendCurvesCommandMode.SelectCurve1;\n        this.curve = null;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_2__.Clicker();\n        this.useStartOfCurve1 = true;\n        this.useStartOfCurve2 = true;\n        this.ray1 = null;\n        this.ray2 = null;\n        this.curve1 = null;\n        this.curve2 = null;\n        this.p1 = null;\n        this.p2 = null;\n    }\n    handleInputString(input) {\n        var _a;\n        if (input == \"0\") {\n            (_a = this.curve) === null || _a === void 0 ? void 0 : _a.delete();\n            this.curve = null;\n            this.done();\n        }\n        else {\n            if (this.mode === BlendCurvesCommandMode.Menu) {\n                switch (input) {\n                    case \"\":\n                        this.done();\n                        break;\n                    case \"1\": { // flip 1\n                        const dist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.ray1.getOrigin(), this.p1);\n                        if (this.useStartOfCurve1) {\n                            this.ray1 = this.curve1.getEndRay();\n                        }\n                        else {\n                            this.ray1 = this.curve1.getStartRay();\n                        }\n                        this.useStartOfCurve1 = !this.useStartOfCurve1;\n                        this.p1 = this.ray1.at(dist);\n                        this.generateCurve();\n                        break;\n                    }\n                    case \"2\": { // flip 2\n                        const dist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.ray2.getOrigin(), this.p2);\n                        if (this.useStartOfCurve2) {\n                            this.ray2 = this.curve2.getEndRay();\n                        }\n                        else {\n                            this.ray2 = this.curve2.getStartRay();\n                        }\n                        this.useStartOfCurve2 = !this.useStartOfCurve2;\n                        this.p2 = this.ray2.at(dist);\n                        this.generateCurve();\n                        break;\n                    }\n                    case \"3\": // adjust 1\n                        this.mode = BlendCurvesCommandMode.AdjustEnd1;\n                        break;\n                    case \"4\": // adjust 2\n                        this.mode = BlendCurvesCommandMode.AdjustEnd2;\n                        break;\n                }\n            }\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case BlendCurvesCommandMode.SelectCurve1:\n                this.curve1 = intersection.geometry;\n                this.mode = BlendCurvesCommandMode.SelectCurve2;\n                break;\n            case BlendCurvesCommandMode.SelectCurve2:\n                this.curve2 = intersection.geometry;\n                this.mode = BlendCurvesCommandMode.Menu;\n                this.ray1 = this.curve1.getStartRay();\n                this.ray2 = this.curve2.getStartRay();\n                const distance = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.ray1.getOrigin(), this.ray2.getOrigin());\n                this.p1 = this.ray1.at(distance / 3);\n                this.p2 = this.ray2.at(distance / 3);\n                this.generateCurve();\n                break;\n            case BlendCurvesCommandMode.Menu:\n                break;\n            case BlendCurvesCommandMode.AdjustEnd1:\n                this.p1 = this.ray1.closestPointToPoint(intersection.point);\n                this.generateCurve();\n                this.mode = BlendCurvesCommandMode.Menu;\n                break;\n            case BlendCurvesCommandMode.AdjustEnd2:\n                this.p2 = this.ray2.closestPointToPoint(intersection.point);\n                this.generateCurve();\n                this.mode = BlendCurvesCommandMode.Menu;\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    generateCurve() {\n        var _a;\n        (_a = this.curve) === null || _a === void 0 ? void 0 : _a.delete();\n        const controls = [\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...this.ray1.getOrigin(), 1),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...this.p1, 1),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...this.p2, 1),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...this.ray2.getOrigin(), 1),\n        ];\n        this.curve = new _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__.Curve(null, controls, 2);\n        this.curve.showControls(true);\n    }\n    handleClick() {\n        if (this.mode === BlendCurvesCommandMode.SelectCurve1 ||\n            this.mode === BlendCurvesCommandMode.SelectCurve2) {\n            this.clicker.click([\"curve\"]);\n        }\n        else {\n            this.clicker.click();\n        }\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        const point = this.clicker.getPoint();\n        if (point) {\n            if (this.mode === BlendCurvesCommandMode.AdjustEnd1) {\n                this.p1 = this.ray1.closestPointToPoint(point);\n                this.generateCurve();\n            }\n            else if (this.mode === BlendCurvesCommandMode.AdjustEnd2) {\n                this.p2 = this.ray2.closestPointToPoint(point);\n                this.generateCurve();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case BlendCurvesCommandMode.SelectCurve1:\n                return \"0:Exit  Select first curve to blend.  $\";\n            case BlendCurvesCommandMode.SelectCurve2:\n                return \"0:Exit  Select second curve to blend.  $\";\n            case BlendCurvesCommandMode.Menu:\n                return \"0:Exit  1:FlipCurve1  2:FlipCurve2  3:AdjustEnd1  4:AdjustEnd2  $\";\n            case BlendCurvesCommandMode.AdjustEnd1:\n                return \"0:Exit  Click to place control point.  $\";\n            case BlendCurvesCommandMode.AdjustEnd2:\n                return \"0:Exit  Click to place control point.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        if (this.curve) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.curve);\n            this.curve.showControls(false);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvYmxlbmRDdXJ2ZXNDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxRDtBQUNoQjtBQUVjO0FBRWQ7QUFDQTtBQUVyQyxJQUFLLHNCQU1KO0FBTkQsV0FBSyxzQkFBc0I7SUFDekIsbUZBQVk7SUFDWixtRkFBWTtJQUNaLG1FQUFJO0lBQ0osK0VBQVU7SUFDViwrRUFBVTtBQUNaLENBQUMsRUFOSSxzQkFBc0IsS0FBdEIsc0JBQXNCLFFBTTFCO0FBRU0sTUFBTSxrQkFBbUIsU0FBUSw2Q0FBTztJQWU3QztRQUNFLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxDQUFDLElBQUksR0FBRyxzQkFBc0IsQ0FBQyxZQUFZLENBQUM7UUFDaEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLDZDQUFPLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFDN0IsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDZixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQztJQUNqQixDQUFDO0lBRUQsaUJBQWlCLENBQUMsS0FBYTs7UUFDN0IsSUFBSSxLQUFLLElBQUksR0FBRyxFQUFFO1lBQ2hCLFVBQUksQ0FBQyxLQUFLLDBDQUFFLE1BQU0sRUFBRSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFD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LENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ2hDO0lBQ0gsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvYmxlbmRDdXJ2ZXNDb21tYW5kLnRzP2RhY2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgVmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9jdXJ2ZVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3JheVwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRcIjtcblxuZW51bSBCbGVuZEN1cnZlc0NvbW1hbmRNb2RlIHtcbiAgU2VsZWN0Q3VydmUxLFxuICBTZWxlY3RDdXJ2ZTIsXG4gIE1lbnUsXG4gIEFkanVzdEVuZDEsXG4gIEFkanVzdEVuZDIsXG59XG5cbmV4cG9ydCBjbGFzcyBCbGVuZEN1cnZlc0NvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIG1vZGU6IEJsZW5kQ3VydmVzQ29tbWFuZE1vZGU7XG4gIHByaXZhdGUgY3VydmU6IEN1cnZlIHwgbnVsbDtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuICBwcml2YXRlIHVzZVN0YXJ0T2ZDdXJ2ZTE6IGJvb2xlYW47XG4gIHByaXZhdGUgdXNlU3RhcnRPZkN1cnZlMjogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjdXJ2ZTE6IEN1cnZlIHwgbnVsbDtcbiAgcHJpdmF0ZSBjdXJ2ZTI6IEN1cnZlIHwgbnVsbDtcbiAgcHJpdmF0ZSByYXkxOiBSYXkgfCBudWxsO1xuICBwcml2YXRlIHJheTI6IFJheSB8IG51bGw7XG4gIHByaXZhdGUgcDE6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIHAyOiBWZWMzIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLm1vZGUgPSBCbGVuZEN1cnZlc0NvbW1hbmRNb2RlLlNlbGVjdEN1cnZlMTtcbiAgICB0aGlzLmN1cnZlID0gbnVsbDtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMudXNlU3RhcnRPZkN1cnZlMSA9IHRydWU7XG4gICAgdGhpcy51c2VTdGFydE9mQ3VydmUyID0gdHJ1ZTtcbiAgICB0aGlzLnJheTEgPSBudWxsO1xuICAgIHRoaXMucmF5MiA9IG51bGw7XG4gICAgdGhpcy5jdXJ2ZTEgPSBudWxsO1xuICAgIHRoaXMuY3VydmUyID0gbnVsbDtcbiAgICB0aGlzLnAxID0gbnVsbDtcbiAgICB0aGlzLnAyID0gbnVsbDtcbiAgfVxuXG4gIGhhbmRsZUlucHV0U3RyaW5nKGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaW5wdXQgPT0gXCIwXCIpIHtcbiAgICAgIHRoaXMuY3VydmU/LmRlbGV0ZSgpO1xuICAgICAgdGhpcy5jdXJ2ZSA9IG51bGw7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gQmxlbmRDdXJ2ZXNDb21tYW5kTW9kZS5NZW51KSB7XG4gICAgICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgICAgICBjYXNlIFwiXCI6XG4gICAgICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCIxXCI6IHsvLyBmbGlwIDFcbiAgICAgICAgICAgIGNvbnN0IGRpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UodGhpcy5yYXkxIS5nZXRPcmlnaW4oKSwgdGhpcy5wMSEpO1xuICAgICAgICAgICAgaWYgKHRoaXMudXNlU3RhcnRPZkN1cnZlMSkge1xuICAgICAgICAgICAgICB0aGlzLnJheTEgPSB0aGlzLmN1cnZlMSEuZ2V0RW5kUmF5KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnJheTEgPSB0aGlzLmN1cnZlMSEuZ2V0U3RhcnRSYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXNlU3RhcnRPZkN1cnZlMSA9ICF0aGlzLnVzZVN0YXJ0T2ZDdXJ2ZTE7XG4gICAgICAgICAgICB0aGlzLnAxID0gdGhpcy5yYXkxLmF0KGRpc3QpO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUN1cnZlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcIjJcIjogey8vIGZsaXAgMlxuICAgICAgICAgICAgY29uc3QgZGlzdDogbnVtYmVyID0gdmVjMy5kaXN0YW5jZSh0aGlzLnJheTIhLmdldE9yaWdpbigpLCB0aGlzLnAyISk7XG4gICAgICAgICAgICBpZiAodGhpcy51c2VTdGFydE9mQ3VydmUyKSB7XG4gICAgICAgICAgICAgIHRoaXMucmF5MiA9IHRoaXMuY3VydmUyIS5nZXRFbmRSYXkoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMucmF5MiA9IHRoaXMuY3VydmUyIS5nZXRTdGFydFJheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51c2VTdGFydE9mQ3VydmUyID0gIXRoaXMudXNlU3RhcnRPZkN1cnZlMjtcbiAgICAgICAgICAgIHRoaXMucDIgPSB0aGlzLnJheTIuYXQoZGlzdCk7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlQ3VydmUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiM1wiOiAvLyBhZGp1c3QgMVxuICAgICAgICAgICAgdGhpcy5tb2RlID0gQmxlbmRDdXJ2ZXNDb21tYW5kTW9kZS5BZGp1c3RFbmQxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIjRcIjogLy8gYWRqdXN0IDJcbiAgICAgICAgICAgIHRoaXMubW9kZSA9IEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuQWRqdXN0RW5kMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBCbGVuZEN1cnZlc0NvbW1hbmRNb2RlLlNlbGVjdEN1cnZlMTpcbiAgICAgICAgdGhpcy5jdXJ2ZTEgPSA8Q3VydmU+aW50ZXJzZWN0aW9uLmdlb21ldHJ5O1xuICAgICAgICB0aGlzLm1vZGUgPSBCbGVuZEN1cnZlc0NvbW1hbmRNb2RlLlNlbGVjdEN1cnZlMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmUyOlxuICAgICAgICB0aGlzLmN1cnZlMiA9IDxDdXJ2ZT5pbnRlcnNlY3Rpb24uZ2VvbWV0cnk7XG4gICAgICAgIHRoaXMubW9kZSA9IEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuTWVudTtcbiAgICAgICAgdGhpcy5yYXkxID0gdGhpcy5jdXJ2ZTEhLmdldFN0YXJ0UmF5KCk7XG4gICAgICAgIHRoaXMucmF5MiA9IHRoaXMuY3VydmUyIS5nZXRTdGFydFJheSgpO1xuICAgICAgICBjb25zdCBkaXN0YW5jZTogbnVtYmVyID0gdmVjMy5kaXN0YW5jZSh0aGlzLnJheTEuZ2V0T3JpZ2luKCksIHRoaXMucmF5Mi5nZXRPcmlnaW4oKSk7XG4gICAgICAgIHRoaXMucDEgPSB0aGlzLnJheTEuYXQoZGlzdGFuY2UgLyAzKTtcbiAgICAgICAgdGhpcy5wMiA9IHRoaXMucmF5Mi5hdChkaXN0YW5jZSAvIDMpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlQ3VydmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuTWVudTpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuQWRqdXN0RW5kMTpcbiAgICAgICAgdGhpcy5wMSA9IHRoaXMucmF5MSEuY2xvc2VzdFBvaW50VG9Qb2ludChpbnRlcnNlY3Rpb24ucG9pbnQpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlQ3VydmUoKTtcbiAgICAgICAgdGhpcy5tb2RlID0gQmxlbmRDdXJ2ZXNDb21tYW5kTW9kZS5NZW51O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQmxlbmRDdXJ2ZXNDb21tYW5kTW9kZS5BZGp1c3RFbmQyOlxuICAgICAgICB0aGlzLnAyID0gdGhpcy5yYXkyIS5jbG9zZXN0UG9pbnRUb1BvaW50KGludGVyc2VjdGlvbi5wb2ludCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDdXJ2ZSgpO1xuICAgICAgICB0aGlzLm1vZGUgPSBCbGVuZEN1cnZlc0NvbW1hbmRNb2RlLk1lbnU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUN1cnZlKCkge1xuXG4gICAgdGhpcy5jdXJ2ZT8uZGVsZXRlKCk7XG5cbiAgICBjb25zdCBjb250cm9sczogVmVjNFtdID0gW1xuICAgICAgdmVjNC5jcmVhdGUoLi4udGhpcy5yYXkxIS5nZXRPcmlnaW4oKSwgMSksXG4gICAgICB2ZWM0LmNyZWF0ZSguLi50aGlzLnAxISwgMSksXG4gICAgICB2ZWM0LmNyZWF0ZSguLi50aGlzLnAyISwgMSksXG4gICAgICB2ZWM0LmNyZWF0ZSguLi50aGlzLnJheTIhLmdldE9yaWdpbigpLCAxKSxcbiAgICBdO1xuXG4gICAgdGhpcy5jdXJ2ZSA9IG5ldyBDdXJ2ZShudWxsLCBjb250cm9scywgMik7XG4gICAgdGhpcy5jdXJ2ZS5zaG93Q29udHJvbHModHJ1ZSk7XG5cbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1vZGUgPT09IEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmUxIHx8XG4gICAgICB0aGlzLm1vZGUgPT09IEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmUyKSB7XG4gICAgICB0aGlzLmNsaWNrZXIuY2xpY2soW1wiY3VydmVcIl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsaWNrZXIuY2xpY2soKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgaWYgKHBvaW50KSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSBCbGVuZEN1cnZlc0NvbW1hbmRNb2RlLkFkanVzdEVuZDEpIHtcbiAgICAgICAgdGhpcy5wMSA9IHRoaXMucmF5MSEuY2xvc2VzdFBvaW50VG9Qb2ludChwb2ludCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDdXJ2ZSgpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09IEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuQWRqdXN0RW5kMikge1xuICAgICAgICB0aGlzLnAyID0gdGhpcy5yYXkyIS5jbG9zZXN0UG9pbnRUb1BvaW50KHBvaW50KTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUN1cnZlKCk7XG5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBCbGVuZEN1cnZlc0NvbW1hbmRNb2RlLlNlbGVjdEN1cnZlMTpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3QgZmlyc3QgY3VydmUgdG8gYmxlbmQuICAkXCI7XG4gICAgICBjYXNlIEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmUyOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCBzZWNvbmQgY3VydmUgdG8gYmxlbmQuICAkXCI7XG4gICAgICBjYXNlIEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuTWVudTpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICAxOkZsaXBDdXJ2ZTEgIDI6RmxpcEN1cnZlMiAgMzpBZGp1c3RFbmQxICA0OkFkanVzdEVuZDIgICRcIjtcbiAgICAgIGNhc2UgQmxlbmRDdXJ2ZXNDb21tYW5kTW9kZS5BZGp1c3RFbmQxOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHRvIHBsYWNlIGNvbnRyb2wgcG9pbnQuICAkXCI7XG4gICAgICBjYXNlIEJsZW5kQ3VydmVzQ29tbWFuZE1vZGUuQWRqdXN0RW5kMjpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayB0byBwbGFjZSBjb250cm9sIHBvaW50LiAgJFwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgIGlmICh0aGlzLmN1cnZlKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KHRoaXMuY3VydmUpO1xuICAgICAgdGhpcy5jdXJ2ZS5zaG93Q29udHJvbHMoZmFsc2UpO1xuICAgIH1cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/blendCurvesCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/cameraCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/cameraCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CameraCommand: () => (/* binding */ CameraCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nvar CameraCommandMode;\n(function (CameraCommandMode) {\n    CameraCommandMode[CameraCommandMode[\"Menu\"] = 0] = \"Menu\";\n    CameraCommandMode[CameraCommandMode[\"Fovy\"] = 1] = \"Fovy\";\n})(CameraCommandMode || (CameraCommandMode = {}));\nclass CameraCommand extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.mode = CameraCommandMode.Menu;\n        this.finished = false;\n    }\n    handleInputString(input) {\n        switch (this.mode) {\n            case CameraCommandMode.Menu:\n                this.handleMenuInput(input);\n                break;\n            case CameraCommandMode.Fovy:\n                this.handleFovyInput(input);\n                break;\n        }\n    }\n    handleClick() {\n    }\n    handleMouseMove() {\n    }\n    handleClickResult(input) {\n    }\n    getInstructions() {\n        const fovy = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getFovy();\n        const fovyDegrees = (180.0 * fovy / Math.PI).toFixed(1);\n        switch (this.mode) {\n            case CameraCommandMode.Menu:\n                return `0:Exit  1:FOVY(${fovyDegrees})  $`;\n            case CameraCommandMode.Fovy:\n                return `0:Exit  Enter New FOVY(${fovyDegrees})  $`;\n            default:\n                console.error(\"Unimplemented CameraCommandMode\");\n                return \"\";\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    handleFovyInput(input) {\n        const inputNum = parseFloat(input);\n        if (!isNaN(inputNum)) {\n            if (inputNum === 0) {\n                this.mode = CameraCommandMode.Menu;\n            }\n            if (inputNum) {\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().setFovy(Math.PI * inputNum / 180.0);\n                this.mode = CameraCommandMode.Menu;\n            }\n        }\n    }\n    handleMenuInput(input) {\n        switch (input) {\n            case \"0\":\n            case \"exit\":\n                this.finished = true;\n                break;\n            case \"1\":\n            case \"fovy\":\n                this.mode = CameraCommandMode.Fovy;\n                break;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvY2FtZXJhQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDcUM7QUFFQTtBQUVyQyxJQUFLLGlCQUdKO0FBSEQsV0FBSyxpQkFBaUI7SUFDcEIseURBQUk7SUFDSix5REFBSTtBQUNOLENBQUMsRUFISSxpQkFBaUIsS0FBakIsaUJBQWlCLFFBR3JCO0FBRU0sTUFBTSxhQUFjLFNBQVEsNkNBQU87SUFLeEM7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDO1FBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFZSxpQkFBaUIsQ0FBQyxLQUFhO1FBQzdDLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNqQixLQUFLLGlCQUFpQixDQUFDLElBQUk7Z0JBQ3pCLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzVCLE1BQU07WUFDUixLQUFLLGlCQUFpQixDQUFDLElBQUk7Z0JBQ3pCLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzVCLE1BQU07U0FDVDtJQUNILENBQUM7SUFFZSxXQUFXO0lBRTNCLENBQUM7SUFFZSxlQUFlO0lBRS9CLENBQUM7SUFFZSxpQkFBaUIsQ0FBQyxLQUFtQjtJQUNyRCxDQUFDO0lBRWUsZUFBZTtRQUM3QixNQUFNLElBQUksR0FBVywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQy9ELE1BQU0sV0FBVyxHQUFXLENBQUMsS0FBSyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hFLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNqQixLQUFLLGlCQUFpQixDQUFDLElBQUk7Z0JBQ3pCLE9BQU8sa0JBQWtCLFdBQVcsTUFBTSxDQUFDO1lBQzdDLEtBQUssaUJBQWlCLENBQUMsSUFBSTtnQkFDekIsT0FBTywwQkFBMEIsV0FBVyxNQUFNLENBQUM7WUFDckQ7Z0JBQ0UsT0FBTyxDQUFDLEtBQUssQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO2dCQUNqRCxPQUFPLEVBQUUsQ0FBQztTQUNiO0lBQ0gsQ0FBQztJQUVlLFVBQVU7UUFDeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFTyxlQUFlLENBQUMsS0FBYTtRQUNuQyxNQUFNLFFBQVEsR0FBVyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUNwQixJQUFJLFFBQVEsS0FBSyxDQUFDLEVBQUU7Z0JBQ2xCLElBQUksQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDO2FBQ3BDO1lBQ0QsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUM7Z0JBQ3BFLElBQUksQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDO2FBQ3BDO1NBQ0Y7SUFDSCxDQUFDO0lBRU8sZUFBZSxDQUFDLEtBQWE7UUFDbkMsUUFBUSxLQUFLLEVBQUU7WUFDYixLQUFLLEdBQUcsQ0FBQztZQUFDLEtBQUssTUFBTTtnQkFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7Z0JBQ3JCLE1BQU07WUFDUixLQUFLLEdBQUcsQ0FBQztZQUFDLEtBQUssTUFBTTtnQkFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7Z0JBQ25DLE1BQU07U0FDVDtJQUNILENBQUM7Q0FJRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL2NhbWVyYUNvbW1hbmQudHM/NWUyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIENhbWVyYUNvbW1hbmRNb2RlIHtcbiAgTWVudSxcbiAgRm92eSxcbn1cblxuZXhwb3J0IGNsYXNzIENhbWVyYUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIG1vZGU6IENhbWVyYUNvbW1hbmRNb2RlO1xuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5tb2RlID0gQ2FtZXJhQ29tbWFuZE1vZGUuTWVudTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIENhbWVyYUNvbW1hbmRNb2RlLk1lbnU6XG4gICAgICAgIHRoaXMuaGFuZGxlTWVudUlucHV0KGlucHV0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENhbWVyYUNvbW1hbmRNb2RlLkZvdnk6XG4gICAgICAgIHRoaXMuaGFuZGxlRm92eUlucHV0KGlucHV0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlQ2xpY2tSZXN1bHQoaW5wdXQ6IEludGVyc2VjdGlvbik6IHZvaWQge1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGZvdnk6IG51bWJlciA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0Rm92eSgpO1xuICAgIGNvbnN0IGZvdnlEZWdyZWVzOiBzdHJpbmcgPSAoMTgwLjAgKiBmb3Z5IC8gTWF0aC5QSSkudG9GaXhlZCgxKTtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBDYW1lcmFDb21tYW5kTW9kZS5NZW51OlxuICAgICAgICByZXR1cm4gYDA6RXhpdCAgMTpGT1ZZKCR7Zm92eURlZ3JlZXN9KSAgJGA7XG4gICAgICBjYXNlIENhbWVyYUNvbW1hbmRNb2RlLkZvdnk6XG4gICAgICAgIHJldHVybiBgMDpFeGl0ICBFbnRlciBOZXcgRk9WWSgke2ZvdnlEZWdyZWVzfSkgICRgO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuaW1wbGVtZW50ZWQgQ2FtZXJhQ29tbWFuZE1vZGVcIik7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVGb3Z5SW5wdXQoaW5wdXQ6IHN0cmluZykge1xuICAgIGNvbnN0IGlucHV0TnVtOiBudW1iZXIgPSBwYXJzZUZsb2F0KGlucHV0KTtcbiAgICBpZiAoIWlzTmFOKGlucHV0TnVtKSkge1xuICAgICAgaWYgKGlucHV0TnVtID09PSAwKSB7XG4gICAgICAgIHRoaXMubW9kZSA9IENhbWVyYUNvbW1hbmRNb2RlLk1lbnU7XG4gICAgICB9XG4gICAgICBpZiAoaW5wdXROdW0pIHtcbiAgICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5zZXRGb3Z5KE1hdGguUEkgKiBpbnB1dE51bSAvIDE4MC4wKTtcbiAgICAgICAgdGhpcy5tb2RlID0gQ2FtZXJhQ29tbWFuZE1vZGUuTWVudTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZU1lbnVJbnB1dChpbnB1dDogc3RyaW5nKSB7XG4gICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgY2FzZSBcIjBcIjogY2FzZSBcImV4aXRcIjpcbiAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjFcIjogY2FzZSBcImZvdnlcIjpcbiAgICAgICAgdGhpcy5tb2RlID0gQ2FtZXJhQ29tbWFuZE1vZGUuRm92eTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cblxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/cameraCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/circleCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/circleCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CircleCommand: () => (/* binding */ CircleCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/circle */ \"./src/geometry/nurbs/circle.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\nvar CircleCommandMode;\n(function (CircleCommandMode) {\n    CircleCommandMode[CircleCommandMode[\"Menu\"] = 0] = \"Menu\";\n    CircleCommandMode[CircleCommandMode[\"ThreePoints\"] = 1] = \"ThreePoints\";\n    CircleCommandMode[CircleCommandMode[\"CenterNormalRadius\"] = 2] = \"CenterNormalRadius\";\n    CircleCommandMode[CircleCommandMode[\"CenterPointPoint\"] = 3] = \"CenterPointPoint\";\n})(CircleCommandMode || (CircleCommandMode = {}));\nclass CircleCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_2__.Clicker();\n        this.mode = CircleCommandMode.Menu;\n        this.v1 = null;\n        this.v2 = null;\n        this.v3 = null;\n        this.curve = null;\n    }\n    handleInputString(input) {\n        if (input === \"0\") {\n            this.done();\n            return;\n        }\n        switch (this.mode) {\n            case CircleCommandMode.Menu:\n                if (input === \"1\")\n                    this.mode = CircleCommandMode.ThreePoints;\n                if (input === \"2\")\n                    this.mode = CircleCommandMode.CenterNormalRadius;\n                if (input === \"3\")\n                    this.mode = CircleCommandMode.CenterPointPoint;\n                break;\n            case CircleCommandMode.CenterNormalRadius:\n                if (this.v3) {\n                    const radius = parseFloat(input);\n                    if (!isNaN(radius)) {\n                        const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v2, this.v3));\n                        if (this.curve)\n                            this.curve.delete();\n                        this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n                        this.done();\n                    }\n                }\n                break;\n        }\n    }\n    handleClickResult(intersection) {\n        if (this.clicker.getPoint()) {\n            switch (this.mode) {\n                case CircleCommandMode.CenterPointPoint:\n                    this.handleClickCenterPointPoint(intersection.point);\n                    break;\n                case CircleCommandMode.ThreePoints:\n                    this.handleClickThreePoints(intersection.point);\n                    break;\n                case CircleCommandMode.CenterNormalRadius:\n                    this.handleClickCenterNormalRadius(intersection.point);\n                    break;\n            }\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.clicker.getPoint()) {\n            switch (this.mode) {\n                case CircleCommandMode.CenterPointPoint:\n                    this.handleMouseMoveCenterPointPoint(this.clicker.getPoint());\n                    break;\n                case CircleCommandMode.ThreePoints:\n                    this.handleMouseMoveThreePoints(this.clicker.getPoint());\n                    break;\n                case CircleCommandMode.CenterNormalRadius:\n                    this.handleMouseMoveCenterNormalRadius(this.clicker.getPoint());\n                    break;\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case CircleCommandMode.Menu:\n                return \"0:Exit  1:FromThreePoints  2:FromNormalCenterRadius 3:CenterPointPoint $\";\n            case CircleCommandMode.ThreePoints:\n                return this.getInstructionsThreePoints();\n            case CircleCommandMode.CenterPointPoint:\n                return this.getInstructionsCenterPointPoint();\n            case CircleCommandMode.CenterNormalRadius:\n                return this.getInstructionsCenterNormalRadius();\n            default:\n                throw new Error(\"unhandled switch enum\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    handleClickCenterPointPoint(point) {\n        if (!this.v1) {\n            this.v1 = point;\n        }\n        else if (!this.v2) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point))\n                this.v2 = point;\n        }\n        else if (!this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, this.v2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, point)));\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, this.v2);\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n                this.done();\n            }\n        }\n    }\n    handleMouseMoveCenterPointPoint(point) {\n        if (this.v2) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, this.v2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v1, point)));\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, this.v2);\n                if (this.curve)\n                    this.curve.delete();\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n            }\n        }\n    }\n    getInstructionsCenterPointPoint() {\n        if (!this.v1) {\n            return \"0:Exit  Click center point.\";\n        }\n        else if (!this.v2) {\n            return \"0:Exit  Click point on circle perimeter.\";\n        }\n        else {\n            return \"0:Exit  Click point to establish plane.\";\n        }\n    }\n    handleClickThreePoints(point) {\n        if (!this.v1) {\n            this.v1 = point;\n        }\n        else if (!this.v2) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point))\n                this.v2 = point;\n        }\n        else if (!this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                if (this.curve)\n                    this.curve.delete();\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleThreePoints)(this.v1, this.v2, point);\n                this.done();\n            }\n        }\n    }\n    handleMouseMoveThreePoints(point) {\n        if (this.v2 && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point) && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point)) {\n            if (this.curve)\n                this.curve.delete();\n            this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleThreePoints)(this.v1, this.v2, point);\n        }\n    }\n    getInstructionsThreePoints() {\n        if (this.v1 == null)\n            return \"0:Exit Click first point\";\n        else if (this.v2 == null)\n            return \"0:Exit Click second point\";\n        return \"0:Exit Click third point\";\n    }\n    handleClickCenterNormalRadius(point) {\n        if (!this.v1) {\n            this.v1 = point;\n        }\n        else if (!this.v2) {\n            this.v2 = point;\n        }\n        else if (!this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v2, point)) {\n                this.v3 = point;\n            }\n        }\n        else {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point)) {\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, point);\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v2, this.v3));\n                if (this.curve)\n                    this.curve.delete();\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n                this.done();\n            }\n        }\n    }\n    handleMouseMoveCenterNormalRadius(point) {\n        if (this.v3) {\n            if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(this.v1, point)) {\n                const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.v1, point);\n                const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(this.v2, this.v3));\n                if (this.curve)\n                    this.curve.delete();\n                this.curve = (0,_geometry_nurbs_circle__WEBPACK_IMPORTED_MODULE_1__.createCircleCenterNormalRadius)(this.v1, normal, radius);\n            }\n        }\n    }\n    getInstructionsCenterNormalRadius() {\n        if (!this.v1) {\n            return \"0:Exit  Click center point.\";\n        }\n        else if (!this.v2) {\n            return \"0:Exit  Click start of normal vector.\";\n        }\n        else if (!this.v3) {\n            return \"0:Exit  Click end of normal vector.\";\n        }\n        else {\n            return \"0:Exit  Enter radius or click to determine radius.  $\";\n        }\n    }\n    done() {\n        if (this.curve) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.curve);\n        }\n        this.finished = true;\n        this.clicker.destroy();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSTtRQUNWLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNkLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUM3QztRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDekIsQ0FBQztDQUdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvY2lyY2xlQ29tbWFuZC50cz80YjQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHdhcm4gfSBmcm9tIFwiY29uc29sZVwiO1xuaW1wb3J0IHsgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBjcmVhdGVDaXJjbGVDZW50ZXJOb3JtYWxSYWRpdXMsIGNyZWF0ZUNpcmNsZVRocmVlUG9pbnRzIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL2NpcmNsZVwiO1xuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvY3VydmVcIjtcbmltcG9ydCB7IENsaWNrZXIgfSBmcm9tIFwiLi4vY2xpY2tlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cbmVudW0gQ2lyY2xlQ29tbWFuZE1vZGUge1xuICBNZW51LFxuICBUaHJlZVBvaW50cyxcbiAgQ2VudGVyTm9ybWFsUmFkaXVzLFxuICBDZW50ZXJQb2ludFBvaW50XG59XG5cbmV4cG9ydCBjbGFzcyBDaXJjbGVDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuICBwcml2YXRlIG1vZGU6IENpcmNsZUNvbW1hbmRNb2RlO1xuXG4gIHByaXZhdGUgdjE6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIHYyOiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSB2MzogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgY3VydmU6IEN1cnZlIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMubW9kZSA9IENpcmNsZUNvbW1hbmRNb2RlLk1lbnU7XG4gICAgdGhpcy52MSA9IG51bGw7XG4gICAgdGhpcy52MiA9IG51bGw7XG4gICAgdGhpcy52MyA9IG51bGw7XG4gICAgdGhpcy5jdXJ2ZSA9IG51bGw7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChpbnB1dCA9PT0gXCIwXCIpIHtcbiAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5NZW51OlxuICAgICAgICBpZiAoaW5wdXQgPT09IFwiMVwiKSB0aGlzLm1vZGUgPSBDaXJjbGVDb21tYW5kTW9kZS5UaHJlZVBvaW50cztcbiAgICAgICAgaWYgKGlucHV0ID09PSBcIjJcIikgdGhpcy5tb2RlID0gQ2lyY2xlQ29tbWFuZE1vZGUuQ2VudGVyTm9ybWFsUmFkaXVzO1xuICAgICAgICBpZiAoaW5wdXQgPT09IFwiM1wiKSB0aGlzLm1vZGUgPSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJQb2ludFBvaW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ2lyY2xlQ29tbWFuZE1vZGUuQ2VudGVyTm9ybWFsUmFkaXVzOlxuICAgICAgICBpZiAodGhpcy52Mykge1xuICAgICAgICAgIGNvbnN0IHJhZGl1czogbnVtYmVyID0gcGFyc2VGbG9hdChpbnB1dCk7XG4gICAgICAgICAgaWYgKCFpc05hTihyYWRpdXMpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWw6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1Yih0aGlzLnYyISwgdGhpcy52MykpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VydmUpIHRoaXMuY3VydmUuZGVsZXRlKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQ2lyY2xlQ2VudGVyTm9ybWFsUmFkaXVzKHRoaXMudjEhLCBub3JtYWwsIHJhZGl1cyk7XG4gICAgICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2xpY2tlci5nZXRQb2ludCgpKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgICBjYXNlIENpcmNsZUNvbW1hbmRNb2RlLkNlbnRlclBvaW50UG9pbnQ6XG4gICAgICAgICAgdGhpcy5oYW5kbGVDbGlja0NlbnRlclBvaW50UG9pbnQoaW50ZXJzZWN0aW9uLnBvaW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5UaHJlZVBvaW50czpcbiAgICAgICAgICB0aGlzLmhhbmRsZUNsaWNrVGhyZWVQb2ludHMoaW50ZXJzZWN0aW9uLnBvaW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJOb3JtYWxSYWRpdXM6XG4gICAgICAgICAgdGhpcy5oYW5kbGVDbGlja0NlbnRlck5vcm1hbFJhZGl1cyhpbnRlcnNlY3Rpb24ucG9pbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNsaWNrZXIucmVzZXQoKTtcbiAgfVxuXG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5jbGljaygpO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIub25Nb3VzZU1vdmUoKTtcbiAgICBpZiAodGhpcy5jbGlja2VyLmdldFBvaW50KCkpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICAgIGNhc2UgQ2lyY2xlQ29tbWFuZE1vZGUuQ2VudGVyUG9pbnRQb2ludDpcbiAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlTW92ZUNlbnRlclBvaW50UG9pbnQodGhpcy5jbGlja2VyLmdldFBvaW50KCkhKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5UaHJlZVBvaW50czpcbiAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlTW92ZVRocmVlUG9pbnRzKHRoaXMuY2xpY2tlci5nZXRQb2ludCgpISk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQ2lyY2xlQ29tbWFuZE1vZGUuQ2VudGVyTm9ybWFsUmFkaXVzOlxuICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VNb3ZlQ2VudGVyTm9ybWFsUmFkaXVzKHRoaXMuY2xpY2tlci5nZXRQb2ludCgpISk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIENpcmNsZUNvbW1hbmRNb2RlLk1lbnU6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgMTpGcm9tVGhyZWVQb2ludHMgIDI6RnJvbU5vcm1hbENlbnRlclJhZGl1cyAzOkNlbnRlclBvaW50UG9pbnQgJFwiO1xuICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5UaHJlZVBvaW50czpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5zdHJ1Y3Rpb25zVGhyZWVQb2ludHMoKTtcbiAgICAgIGNhc2UgQ2lyY2xlQ29tbWFuZE1vZGUuQ2VudGVyUG9pbnRQb2ludDpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW5zdHJ1Y3Rpb25zQ2VudGVyUG9pbnRQb2ludCgpO1xuICAgICAgY2FzZSBDaXJjbGVDb21tYW5kTW9kZS5DZW50ZXJOb3JtYWxSYWRpdXM6XG4gICAgICAgIHJldHVybiB0aGlzLmdldEluc3RydWN0aW9uc0NlbnRlck5vcm1hbFJhZGl1cygpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5oYW5kbGVkIHN3aXRjaCBlbnVtXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVDbGlja0NlbnRlclBvaW50UG9pbnQocG9pbnQ6IFZlYzMpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudjEpIHtcbiAgICAgIHRoaXMudjEgPSBwb2ludDtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnYyKSB7XG4gICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMudjEsIHBvaW50KSkgdGhpcy52MiA9IHBvaW50O1xuICAgIH0gZWxzZSBpZiAoIXRoaXMudjMpIHtcbiAgICAgIGlmICghdmVjMy5lcXVhbHModGhpcy52MSwgcG9pbnQpICYmICF2ZWMzLmVxdWFscyh0aGlzLnYyLCBwb2ludCkpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsOiBWZWMzID0gdmVjMy5ub3JtYWxpemUoXG4gICAgICAgICAgdmVjMy5jcm9zcyhcbiAgICAgICAgICAgIHZlYzMuc3ViKHRoaXMudjEsIHRoaXMudjIpLFxuICAgICAgICAgICAgdmVjMy5zdWIodGhpcy52MSwgcG9pbnQpXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zdCByYWRpdXM6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UodGhpcy52MSwgdGhpcy52Mik7XG4gICAgICAgIHRoaXMuY3VydmUgPSBjcmVhdGVDaXJjbGVDZW50ZXJOb3JtYWxSYWRpdXModGhpcy52MSwgbm9ybWFsLCByYWRpdXMpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZU1vdXNlTW92ZUNlbnRlclBvaW50UG9pbnQocG9pbnQ6IFZlYzMpOiB2b2lkIHtcbiAgICBpZiAodGhpcy52Mikge1xuICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLnYxISwgcG9pbnQpICYmICF2ZWMzLmVxdWFscyh0aGlzLnYyLCBwb2ludCkpIHtcbiAgICAgICAgY29uc3Qgbm9ybWFsOiBWZWMzID0gdmVjMy5ub3JtYWxpemUoXG4gICAgICAgICAgdmVjMy5jcm9zcyhcbiAgICAgICAgICAgIHZlYzMuc3ViKHRoaXMudjEhLCB0aGlzLnYyKSxcbiAgICAgICAgICAgIHZlYzMuc3ViKHRoaXMudjEhLCBwb2ludClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJhZGl1czogbnVtYmVyID0gdmVjMy5kaXN0YW5jZSh0aGlzLnYxISwgdGhpcy52Mik7XG4gICAgICAgIGlmICh0aGlzLmN1cnZlKSB0aGlzLmN1cnZlLmRlbGV0ZSgpO1xuICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQ2lyY2xlQ2VudGVyTm9ybWFsUmFkaXVzKHRoaXMudjEhLCBub3JtYWwsIHJhZGl1cyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRJbnN0cnVjdGlvbnNDZW50ZXJQb2ludFBvaW50KCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnYxKSB7XG4gICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGNlbnRlciBwb2ludC5cIjtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnYyKSB7XG4gICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHBvaW50IG9uIGNpcmNsZSBwZXJpbWV0ZXIuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgcG9pbnQgdG8gZXN0YWJsaXNoIHBsYW5lLlwiO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ2xpY2tUaHJlZVBvaW50cyhwb2ludDogVmVjMyk6IHZvaWQge1xuICAgIGlmICghdGhpcy52MSkge1xuICAgICAgdGhpcy52MSA9IHBvaW50O1xuICAgIH0gZWxzZSBpZiAoIXRoaXMudjIpIHtcbiAgICAgIGlmICghdmVjMy5lcXVhbHModGhpcy52MSwgcG9pbnQpKSB0aGlzLnYyID0gcG9pbnQ7XG4gICAgfSBlbHNlIGlmICghdGhpcy52Mykge1xuICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLnYxLCBwb2ludCkgJiYgIXZlYzMuZXF1YWxzKHRoaXMudjIsIHBvaW50KSkge1xuICAgICAgICBpZiAodGhpcy5jdXJ2ZSkgdGhpcy5jdXJ2ZS5kZWxldGUoKTtcbiAgICAgICAgdGhpcy5jdXJ2ZSA9IGNyZWF0ZUNpcmNsZVRocmVlUG9pbnRzKHRoaXMudjEsIHRoaXMudjIsIHBvaW50KTtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHByaXZhdGUgaGFuZGxlTW91c2VNb3ZlVGhyZWVQb2ludHMocG9pbnQ6IFZlYzMpOiB2b2lkIHtcbiAgICBpZiAodGhpcy52MiAmJiAhdmVjMy5lcXVhbHModGhpcy52MiwgcG9pbnQpICYmICF2ZWMzLmVxdWFscyh0aGlzLnYxISwgcG9pbnQpKSB7XG4gICAgICBpZiAodGhpcy5jdXJ2ZSkgdGhpcy5jdXJ2ZS5kZWxldGUoKTtcbiAgICAgIHRoaXMuY3VydmUgPSBjcmVhdGVDaXJjbGVUaHJlZVBvaW50cyh0aGlzLnYxISwgdGhpcy52MiwgcG9pbnQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0SW5zdHJ1Y3Rpb25zVGhyZWVQb2ludHMoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy52MSA9PSBudWxsKSByZXR1cm4gXCIwOkV4aXQgQ2xpY2sgZmlyc3QgcG9pbnRcIjtcbiAgICBlbHNlIGlmICh0aGlzLnYyID09IG51bGwpIHJldHVybiBcIjA6RXhpdCBDbGljayBzZWNvbmQgcG9pbnRcIjtcbiAgICByZXR1cm4gXCIwOkV4aXQgQ2xpY2sgdGhpcmQgcG9pbnRcIjtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQ2xpY2tDZW50ZXJOb3JtYWxSYWRpdXMocG9pbnQ6IFZlYzMpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMudjEpIHtcbiAgICAgIHRoaXMudjEgPSBwb2ludDtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnYyKSB7XG4gICAgICB0aGlzLnYyID0gcG9pbnQ7XG4gICAgfSBlbHNlIGlmICghdGhpcy52Mykge1xuICAgICAgaWYgKCF2ZWMzLmVxdWFscyh0aGlzLnYyLCBwb2ludCkpIHtcbiAgICAgICAgdGhpcy52MyA9IHBvaW50O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXZlYzMuZXF1YWxzKHRoaXMudjEsIHBvaW50KSkge1xuICAgICAgICBjb25zdCByYWRpdXM6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UodGhpcy52MSwgcG9pbnQpO1xuICAgICAgICBjb25zdCBub3JtYWw6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1Yih0aGlzLnYyLCB0aGlzLnYzKSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnZlKSB0aGlzLmN1cnZlLmRlbGV0ZSgpO1xuICAgICAgICB0aGlzLmN1cnZlID0gY3JlYXRlQ2lyY2xlQ2VudGVyTm9ybWFsUmFkaXVzKHRoaXMudjEsIG5vcm1hbCwgcmFkaXVzKTtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHByaXZhdGUgaGFuZGxlTW91c2VNb3ZlQ2VudGVyTm9ybWFsUmFkaXVzKHBvaW50OiBWZWMzKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudjMpIHtcbiAgICAgIGlmICghdmVjMy5lcXVhbHModGhpcy52MSEsIHBvaW50KSkge1xuICAgICAgICBjb25zdCByYWRpdXM6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UodGhpcy52MSEsIHBvaW50KTtcbiAgICAgICAgY29uc3Qgbm9ybWFsOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5zdWIodGhpcy52MiEsIHRoaXMudjMpKTtcbiAgICAgICAgaWYgKHRoaXMuY3VydmUpIHRoaXMuY3VydmUuZGVsZXRlKCk7XG4gICAgICAgIHRoaXMuY3VydmUgPSBjcmVhdGVDaXJjbGVDZW50ZXJOb3JtYWxSYWRpdXModGhpcy52MSEsIG5vcm1hbCwgcmFkaXVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEluc3RydWN0aW9uc0NlbnRlck5vcm1hbFJhZGl1cygpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy52MSkge1xuICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBjZW50ZXIgcG9pbnQuXCI7XG4gICAgfSBlbHNlIGlmICghdGhpcy52Mikge1xuICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBzdGFydCBvZiBub3JtYWwgdmVjdG9yLlwiO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMudjMpIHtcbiAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgZW5kIG9mIG5vcm1hbCB2ZWN0b3IuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIjA6RXhpdCAgRW50ZXIgcmFkaXVzIG9yIGNsaWNrIHRvIGRldGVybWluZSByYWRpdXMuICAkXCI7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkb25lKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnZlKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KHRoaXMuY3VydmUpO1xuICAgIH1cbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICB9XG5cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/circleCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/constructionPlaneCommand.ts":
/*!***********************************************************!*\
  !*** ./src/commands/commands/constructionPlaneCommand.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConstructionPlaneCommand: () => (/* binding */ ConstructionPlaneCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nvar ConstructionPlaneCommandMode;\n(function (ConstructionPlaneCommandMode) {\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"Menu\"] = 0] = \"Menu\";\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"ChangeMajorCount\"] = 1] = \"ChangeMajorCount\";\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"ChangeMinorCount\"] = 2] = \"ChangeMinorCount\";\n    ConstructionPlaneCommandMode[ConstructionPlaneCommandMode[\"ChangeSpacing\"] = 3] = \"ChangeSpacing\";\n})(ConstructionPlaneCommandMode || (ConstructionPlaneCommandMode = {}));\nclass ConstructionPlaneCommand extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.mode = ConstructionPlaneCommandMode.Menu;\n        this.finished = false;\n    }\n    handleClickResult(input) {\n    }\n    handleInputString(input) {\n        switch (this.mode) {\n            case ConstructionPlaneCommandMode.Menu:\n                this.handleMenuInput(input);\n                break;\n            case ConstructionPlaneCommandMode.ChangeMajorCount:\n                this.changeMajorCount(input);\n                break;\n            case ConstructionPlaneCommandMode.ChangeMinorCount:\n                this.changeMinorCount(input);\n                break;\n            case ConstructionPlaneCommandMode.ChangeSpacing:\n                this.changeCellSize(input);\n                break;\n            default: console.error(\"Unhandled Mode\");\n        }\n    }\n    handleClick() {\n    }\n    getInstructions() {\n        const constructionPlane = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane();\n        const minorCount = constructionPlane.getMinorCount().toString();\n        const majorCount = constructionPlane.getMajorCount().toString();\n        const cellSize = constructionPlane.getCellSize().toFixed(2);\n        switch (this.mode) {\n            case ConstructionPlaneCommandMode.Menu:\n                return `0:Exit,  1:MajorCount(${majorCount}),  2:MinorCount(${minorCount}),  3:CellSize(${cellSize})  $`;\n            case ConstructionPlaneCommandMode.ChangeMajorCount:\n                return `0:Exit,  Enter New Major Count(${majorCount})  $`;\n            case ConstructionPlaneCommandMode.ChangeMinorCount:\n                return `0:Exit,  Enter New Minor Count(${minorCount})  $`;\n            case ConstructionPlaneCommandMode.ChangeSpacing:\n                return `0:Exit,  Enter New Cell Size(${cellSize})  $`;\n            default: console.error(\"Unhandled Mode\");\n        }\n        return \"\";\n    }\n    isFinished() {\n        return this.finished;\n    }\n    handleMouseMove() {\n    }\n    handleMenuInput(input) {\n        switch (input) {\n            case \"0\":\n            case \"exit\":\n                this.finished = true;\n                return;\n            case \"1\":\n            case \"majorcount\":\n                this.mode = ConstructionPlaneCommandMode.ChangeMajorCount;\n                return;\n            case \"2\":\n            case \"minorcount\":\n                this.mode = ConstructionPlaneCommandMode.ChangeMinorCount;\n                return;\n            case \"3\":\n            case \"cellspacing\":\n                this.mode = ConstructionPlaneCommandMode.ChangeSpacing;\n                return;\n        }\n    }\n    changeMajorCount(input) {\n        if (input === '0' || input === \"exit\") {\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n        const count = parseInt(input);\n        if (count) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMajorCount(count);\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n    }\n    changeMinorCount(input) {\n        if (input === '0' || input === \"exit\") {\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n        const count = parseInt(input);\n        if (count) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMinorCount(count);\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n    }\n    changeCellSize(input) {\n        if (input === '0' || input === \"exit\") {\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n        const size = parseFloat(input);\n        if (size) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setCellSize(size);\n            this.mode = ConstructionPlaneCommandMode.Menu;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvY29uc3RydWN0aW9uUGxhbmVDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNxQztBQUVEO0FBR3BDLElBQUssNEJBS0o7QUFMRCxXQUFLLDRCQUE0QjtJQUMvQiwrRUFBSTtJQUNKLHVHQUFnQjtJQUNoQix1R0FBZ0I7SUFDaEIsaUdBQWE7QUFDZixDQUFDLEVBTEksNEJBQTRCLEtBQTVCLDRCQUE0QixRQUtoQztBQUVNLE1BQU0sd0JBQXlCLFNBQVEsNkNBQU87SUFLbkQ7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUMsSUFBSSxDQUFDO1FBQzlDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxLQUFtQjtJQUNyQyxDQUFDO0lBRWUsaUJBQWlCLENBQUMsS0FBYTtRQUM3QyxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDakIsS0FBSyw0QkFBNEIsQ0FBQyxJQUFJO2dCQUNwQyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixNQUFNO1lBQ1IsS0FBSyw0QkFBNEIsQ0FBQyxnQkFBZ0I7Z0JBQ2hELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDN0IsTUFBTTtZQUNSLEtBQUssNEJBQTRCLENBQUMsZ0JBQWdCO2dCQUNoRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzdCLE1BQUs7WUFDUCxLQUFLLDRCQUE0QixDQUFDLGFBQWE7Z0JBQzdDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzNCLE1BQUs7WUFDUCxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FDMUM7SUFDSCxDQUFDO0lBRWUsV0FBVztJQUUzQixDQUFDO0lBRWUsZUFBZTtRQUM3QixNQUFNLGlCQUFpQixHQUFHLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztRQUNyRSxNQUFNLFVBQVUsR0FBVyxpQkFBaUIsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN4RSxNQUFNLFVBQVUsR0FBVyxpQkFBaUIsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN4RSxNQUFNLFFBQVEsR0FBVyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEUsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssNEJBQTRCLENBQUMsSUFBSTtnQkFDcEMsT0FBTyx5QkFBeUIsVUFBVSxvQkFBb0IsVUFBVSxrQkFBa0IsUUFBUSxNQUFNLENBQUM7WUFDM0csS0FBSyw0QkFBNEIsQ0FBQyxnQkFBZ0I7Z0JBQ2hELE9BQU8sa0NBQWtDLFVBQVUsTUFBTSxDQUFDO1lBQzVELEtBQUssNEJBQTRCLENBQUMsZ0JBQWdCO2dCQUNoRCxPQUFPLGtDQUFrQyxVQUFVLE1BQU0sQ0FBQztZQUM1RCxLQUFLLDRCQUE0QixDQUFDLGFBQWE7Z0JBQzdDLE9BQU8sZ0NBQWdDLFFBQVEsTUFBTSxDQUFDO1lBQ3hELE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUMxQztRQUNELE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUVlLFVBQVU7UUFDeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFZSxlQUFlO0lBRS9CLENBQUM7SUFHTyxlQUFlLENBQUMsS0FBYTtRQUNuQyxRQUFRLEtBQUssRUFBRTtZQUNiLEtBQUssR0FBRyxDQUFDO1lBQUMsS0FBSyxNQUFNO2dCQUNuQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDckIsT0FBTztZQUNULEtBQUssR0FBRyxDQUFDO1lBQUMsS0FBSyxZQUFZO2dCQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLDRCQUE0QixDQUFDLGdCQUFnQixDQUFDO2dCQUMxRCxPQUFPO1lBQ1QsS0FBSyxHQUFHLENBQUM7WUFBQyxLQUFLLFlBQVk7Z0JBQ3pCLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUMsZ0JBQWdCLENBQUM7Z0JBQzFELE9BQU87WUFDVCxLQUFLLEdBQUcsQ0FBQztZQUFDLEtBQUssYUFBYTtnQkFDMUIsSUFBSSxDQUFDLElBQUksR0FBRyw0QkFBNEIsQ0FBQyxhQUFhLENBQUM7Z0JBQ3ZELE9BQU87U0FDVjtJQUNILENBQUM7SUFFTyxnQkFBZ0IsQ0FBQyxLQUFhO1FBQ3BDLElBQUksS0FBSyxLQUFLLEdBQUcsSUFBSSxLQUFLLEtBQUssTUFBTSxFQUFFO1lBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUMsSUFBSSxDQUFDO1NBQy9DO1FBQ0QsTUFBTSxLQUFLLEdBQXVCLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsRCxJQUFJLEtBQUssRUFBRTtZQUNULDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDaEUsSUFBSSxDQUFDLElBQUksR0FBRyw0QkFBNEIsQ0FBQyxJQUFJLENBQUM7U0FDL0M7SUFDSCxDQUFDO0lBRU8sZ0JBQWdCLENBQUMsS0FBYTtRQUNwQyxJQUFJLEtBQUssS0FBSyxHQUFHLElBQUksS0FBSyxLQUFLLE1BQU0sRUFBRTtZQUNyQyxJQUFJLENBQUMsSUFBSSxHQUFHLDRCQUE0QixDQUFDLElBQUksQ0FBQztTQUMvQztRQUNELE1BQU0sS0FBSyxHQUF1QixRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEQsSUFBSSxLQUFLLEVBQUU7WUFDVCwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLG9CQUFvQixFQUFFLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2hFLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUMsSUFBSSxDQUFDO1NBQy9DO0lBQ0gsQ0FBQztJQUVPLGNBQWMsQ0FBQyxLQUFhO1FBQ2xDLElBQUksS0FBSyxLQUFLLEdBQUcsSUFBSSxLQUFLLEtBQUssTUFBTSxFQUFFO1lBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUMsSUFBSSxDQUFDO1NBQy9DO1FBQ0QsTUFBTSxJQUFJLEdBQXVCLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxJQUFJLElBQUksRUFBRTtZQUNSLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0QsSUFBSSxDQUFDLElBQUksR0FBRyw0QkFBNEIsQ0FBQyxJQUFJLENBQUM7U0FDL0M7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9jb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmQudHM/YTYwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiXG5cblxuZW51bSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlIHtcbiAgTWVudSxcbiAgQ2hhbmdlTWFqb3JDb3VudCxcbiAgQ2hhbmdlTWlub3JDb3VudCxcbiAgQ2hhbmdlU3BhY2luZyxcbn1cblxuZXhwb3J0IGNsYXNzIENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgbW9kZTogQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZTtcbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gIH1cblxuICBoYW5kbGVDbGlja1Jlc3VsdChpbnB1dDogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTpcbiAgICAgICAgdGhpcy5oYW5kbGVNZW51SW5wdXQoaW5wdXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VNYWpvckNvdW50OlxuICAgICAgICB0aGlzLmNoYW5nZU1ham9yQ291bnQoaW5wdXQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VNaW5vckNvdW50OlxuICAgICAgICB0aGlzLmNoYW5nZU1pbm9yQ291bnQoaW5wdXQpO1xuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlLkNoYW5nZVNwYWNpbmc6XG4gICAgICAgIHRoaXMuY2hhbmdlQ2VsbFNpemUoaW5wdXQpO1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDogY29uc29sZS5lcnJvcihcIlVuaGFuZGxlZCBNb2RlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcblxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbnN0cnVjdGlvblBsYW5lID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpO1xuICAgIGNvbnN0IG1pbm9yQ291bnQ6IHN0cmluZyA9IGNvbnN0cnVjdGlvblBsYW5lLmdldE1pbm9yQ291bnQoKS50b1N0cmluZygpO1xuICAgIGNvbnN0IG1ham9yQ291bnQ6IHN0cmluZyA9IGNvbnN0cnVjdGlvblBsYW5lLmdldE1ham9yQ291bnQoKS50b1N0cmluZygpO1xuICAgIGNvbnN0IGNlbGxTaXplOiBzdHJpbmcgPSBjb25zdHJ1Y3Rpb25QbGFuZS5nZXRDZWxsU2l6ZSgpLnRvRml4ZWQoMik7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5NZW51OlxuICAgICAgICByZXR1cm4gYDA6RXhpdCwgIDE6TWFqb3JDb3VudCgke21ham9yQ291bnR9KSwgIDI6TWlub3JDb3VudCgke21pbm9yQ291bnR9KSwgIDM6Q2VsbFNpemUoJHtjZWxsU2l6ZX0pICAkYDtcbiAgICAgIGNhc2UgQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VNYWpvckNvdW50OlxuICAgICAgICByZXR1cm4gYDA6RXhpdCwgIEVudGVyIE5ldyBNYWpvciBDb3VudCgke21ham9yQ291bnR9KSAgJGA7XG4gICAgICBjYXNlIENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuQ2hhbmdlTWlub3JDb3VudDpcbiAgICAgICAgcmV0dXJuIGAwOkV4aXQsICBFbnRlciBOZXcgTWlub3IgQ291bnQoJHttaW5vckNvdW50fSkgICRgO1xuICAgICAgY2FzZSBDb25zdHJ1Y3Rpb25QbGFuZUNvbW1hbmRNb2RlLkNoYW5nZVNwYWNpbmc6XG4gICAgICAgIHJldHVybiBgMDpFeGl0LCAgRW50ZXIgTmV3IENlbGwgU2l6ZSgke2NlbGxTaXplfSkgICRgO1xuICAgICAgZGVmYXVsdDogY29uc29sZS5lcnJvcihcIlVuaGFuZGxlZCBNb2RlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcblxuICB9XG5cblxuICBwcml2YXRlIGhhbmRsZU1lbnVJbnB1dChpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgc3dpdGNoIChpbnB1dCkge1xuICAgICAgY2FzZSBcIjBcIjogY2FzZSBcImV4aXRcIjpcbiAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCIxXCI6IGNhc2UgXCJtYWpvcmNvdW50XCI6XG4gICAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuQ2hhbmdlTWFqb3JDb3VudDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY2FzZSBcIjJcIjogY2FzZSBcIm1pbm9yY291bnRcIjpcbiAgICAgICAgdGhpcy5tb2RlID0gQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VNaW5vckNvdW50O1xuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIFwiM1wiOiBjYXNlIFwiY2VsbHNwYWNpbmdcIjpcbiAgICAgICAgdGhpcy5tb2RlID0gQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5DaGFuZ2VTcGFjaW5nO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGFuZ2VNYWpvckNvdW50KGlucHV0OiBzdHJpbmcpIHtcbiAgICBpZiAoaW5wdXQgPT09ICcwJyB8fCBpbnB1dCA9PT0gXCJleGl0XCIpIHtcbiAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB9XG4gICAgY29uc3QgY291bnQ6IG51bWJlciB8IHVuZGVmaW5lZCA9IHBhcnNlSW50KGlucHV0KTtcbiAgICBpZiAoY291bnQpIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q29uc3RydWN0aW9uUGxhbmUoKS5zZXRNYWpvckNvdW50KGNvdW50KTtcbiAgICAgIHRoaXMubW9kZSA9IENvbnN0cnVjdGlvblBsYW5lQ29tbWFuZE1vZGUuTWVudTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZU1pbm9yQ291bnQoaW5wdXQ6IHN0cmluZykge1xuICAgIGlmIChpbnB1dCA9PT0gJzAnIHx8IGlucHV0ID09PSBcImV4aXRcIikge1xuICAgICAgdGhpcy5tb2RlID0gQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5NZW51O1xuICAgIH1cbiAgICBjb25zdCBjb3VudDogbnVtYmVyIHwgdW5kZWZpbmVkID0gcGFyc2VJbnQoaW5wdXQpO1xuICAgIGlmIChjb3VudCkge1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpLnNldE1pbm9yQ291bnQoY291bnQpO1xuICAgICAgdGhpcy5tb2RlID0gQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5NZW51O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hhbmdlQ2VsbFNpemUoaW5wdXQ6IHN0cmluZykge1xuICAgIGlmIChpbnB1dCA9PT0gJzAnIHx8IGlucHV0ID09PSBcImV4aXRcIikge1xuICAgICAgdGhpcy5tb2RlID0gQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5NZW51O1xuICAgIH1cbiAgICBjb25zdCBzaXplOiBudW1iZXIgfCB1bmRlZmluZWQgPSBwYXJzZUZsb2F0KGlucHV0KTtcbiAgICBpZiAoc2l6ZSkge1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpLnNldENlbGxTaXplKHNpemUpO1xuICAgICAgdGhpcy5tb2RlID0gQ29uc3RydWN0aW9uUGxhbmVDb21tYW5kTW9kZS5NZW51O1xuICAgIH1cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/constructionPlaneCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/copyCommand.ts":
/*!**********************************************!*\
  !*** ./src/commands/commands/copyCommand.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CopyCommand: () => (/* binding */ CopyCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\nvar CopyCommandMode;\n(function (CopyCommandMode) {\n    CopyCommandMode[CopyCommandMode[\"SelectPointToCopyFrom\"] = 0] = \"SelectPointToCopyFrom\";\n    CopyCommandMode[CopyCommandMode[\"SelectPointToCopyTo\"] = 1] = \"SelectPointToCopyTo\";\n})(CopyCommandMode || (CopyCommandMode = {}));\nclass CopyCommand extends _command__WEBPACK_IMPORTED_MODULE_2__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.mode = CopyCommandMode.SelectPointToCopyFrom;\n        this.pointToCopyFrom = null;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_1__.Clicker();\n        this.geometry = new Map;\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geometry of selection) {\n            this.geometry.set(geometry.clone(), geometry.getModel());\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            for (let geo of this.geometry.keys()) {\n                geo.delete();\n            }\n            this.geometry.clear();\n            this.done();\n        }\n        switch (this.mode) {\n            case CopyCommandMode.SelectPointToCopyFrom:\n                break;\n            case CopyCommandMode.SelectPointToCopyTo:\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case CopyCommandMode.SelectPointToCopyFrom:\n                this.pointToCopyFrom = intersection.point;\n                this.mode = CopyCommandMode.SelectPointToCopyTo;\n                this.clicker.reset();\n                break;\n            case CopyCommandMode.SelectPointToCopyTo:\n                const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(intersection.point, this.pointToCopyFrom));\n                for (const [copy, model] of this.geometry) {\n                    copy.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.mul(translation, model));\n                }\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode == CopyCommandMode.SelectPointToCopyTo) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, this.pointToCopyFrom));\n                for (const [copy, model] of this.geometry) {\n                    copy.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.mul(translation, model));\n                }\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case CopyCommandMode.SelectPointToCopyFrom:\n                return \"0:Exit  Select point to copy from.  $\";\n            case CopyCommandMode.SelectPointToCopyTo:\n                return \"0:Exit  Select point to copy to.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.clicker.destroy();\n        for (const copy of this.geometry.keys()) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(copy);\n        }\n        this.finished = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdkM7UUFDRCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztJQUN2QixDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9jb3B5Q29tbWFuZC50cz8wMjUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdDQsIG1hdDQsIHZlYzMsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IENsaWNrZXIgfSBmcm9tIFwiLi4vY2xpY2tlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cbmVudW0gQ29weUNvbW1hbmRNb2RlIHtcbiAgU2VsZWN0UG9pbnRUb0NvcHlGcm9tLFxuICBTZWxlY3RQb2ludFRvQ29weVRvLFxufVxuXG5leHBvcnQgY2xhc3MgQ29weUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIG1vZGU6IENvcHlDb21tYW5kTW9kZTtcbiAgcHJpdmF0ZSBwb2ludFRvQ29weUZyb206IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIGNsaWNrZXI6IENsaWNrZXI7XG4gIHByaXZhdGUgZ2VvbWV0cnk6IE1hcDxHZW9tZXRyeSwgTWF0ND47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5tb2RlID0gQ29weUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Db3B5RnJvbTtcbiAgICB0aGlzLnBvaW50VG9Db3B5RnJvbSA9IG51bGw7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IE1hcDxHZW9tZXRyeSwgTWF0ND47XG5cbiAgICBjb25zdCBzZWxlY3Rpb246IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3Rpb24uc2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgZ2VvbWV0cnkgb2Ygc2VsZWN0aW9uKSB7XG4gICAgICB0aGlzLmdlb21ldHJ5LnNldChnZW9tZXRyeS5jbG9uZSgpLCBnZW9tZXRyeS5nZXRNb2RlbCgpKTtcbiAgICB9XG5cbiAgfVxuXG4gIGhhbmRsZUlucHV0U3RyaW5nKGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaW5wdXQgPT0gXCIwXCIpIHtcbiAgICAgIGZvciAobGV0IGdlbyBvZiB0aGlzLmdlb21ldHJ5LmtleXMoKSkge1xuICAgICAgICBnZW8uZGVsZXRlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmdlb21ldHJ5LmNsZWFyKCk7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBDb3B5Q29tbWFuZE1vZGUuU2VsZWN0UG9pbnRUb0NvcHlGcm9tOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29weUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Db3B5VG86XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBDb3B5Q29tbWFuZE1vZGUuU2VsZWN0UG9pbnRUb0NvcHlGcm9tOlxuICAgICAgICB0aGlzLnBvaW50VG9Db3B5RnJvbSA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgdGhpcy5tb2RlID0gQ29weUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Db3B5VG87XG4gICAgICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ29weUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Db3B5VG86XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbih2ZWMzLnN1YihpbnRlcnNlY3Rpb24ucG9pbnQsIHRoaXMucG9pbnRUb0NvcHlGcm9tISkpO1xuICAgICAgICBmb3IgKGNvbnN0IFtjb3B5LCBtb2RlbF0gb2YgdGhpcy5nZW9tZXRyeSkge1xuICAgICAgICAgIGNvcHkuc2V0TW9kZWwobWF0NC5tdWwodHJhbnNsYXRpb24sIG1vZGVsKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLmNsaWNrKCk7XG4gIH1cblxuICBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gICAgaWYgKHRoaXMubW9kZSA9PSBDb3B5Q29tbWFuZE1vZGUuU2VsZWN0UG9pbnRUb0NvcHlUbykge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb246IE1hdDQgPSBtYXQ0LnRyYW5zbGF0aW9uKHZlYzMuc3ViKHBvaW50LCB0aGlzLnBvaW50VG9Db3B5RnJvbSEpKTtcbiAgICAgICAgZm9yIChjb25zdCBbY29weSwgbW9kZWxdIG9mIHRoaXMuZ2VvbWV0cnkpIHtcbiAgICAgICAgICBjb3B5LnNldE1vZGVsKG1hdDQubXVsKHRyYW5zbGF0aW9uLCBtb2RlbCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgQ29weUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Db3B5RnJvbTpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3QgcG9pbnQgdG8gY29weSBmcm9tLiAgJFwiO1xuICAgICAgY2FzZSBDb3B5Q29tbWFuZE1vZGUuU2VsZWN0UG9pbnRUb0NvcHlUbzpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3QgcG9pbnQgdG8gY29weSB0by4gICRcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxuICBkb25lKCkge1xuICAgIHRoaXMuY2xpY2tlci5kZXN0cm95KCk7XG4gICAgZm9yIChjb25zdCBjb3B5IG9mIHRoaXMuZ2VvbWV0cnkua2V5cygpKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KGNvcHkpO1xuICAgIH1cbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/copyCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/curveCommand.ts":
/*!***********************************************!*\
  !*** ./src/commands/commands/curveCommand.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CurveCommand: () => (/* binding */ CurveCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/curve */ \"./src/geometry/nurbs/curve.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n\n\n\n\n\nvar CurveCommandMode;\n(function (CurveCommandMode) {\n    CurveCommandMode[CurveCommandMode[\"AddPoints\"] = 0] = \"AddPoints\";\n    CurveCommandMode[CurveCommandMode[\"ChangeDegree\"] = 1] = \"ChangeDegree\";\n})(CurveCommandMode || (CurveCommandMode = {}));\nclass CurveCommand extends _command__WEBPACK_IMPORTED_MODULE_2__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.curve = null;\n        this.degree = 2;\n        this.mode = CurveCommandMode.AddPoints;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n    }\n    // TODO: debug\n    handleInputString(input) {\n        var _a, _b, _c;\n        if (this.mode === CurveCommandMode.AddPoints) {\n            switch (input) {\n                case \"0\":\n                    (_a = this.curve) === null || _a === void 0 ? void 0 : _a.delete();\n                    this.finished = true;\n                    this.clicker.destroy();\n                    break;\n                case \"1\":\n                    this.mode = CurveCommandMode.ChangeDegree;\n                    break;\n                case \"\":\n                    if (this.curve != null) {\n                        if (this.curve.getControlPointCount() < 3)\n                            this.curve.delete();\n                        else {\n                            this.curve.removeLastControlPoint();\n                            this.curve.showControls(false);\n                            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.curve);\n                        }\n                    }\n                    this.finished = true;\n                    this.clicker.destroy();\n                    break;\n            }\n        }\n        else if (this.mode === CurveCommandMode.ChangeDegree) {\n            switch (input) {\n                case \"0\":\n                case \"\":\n                    break;\n                default:\n                    const degree = parseInt(input);\n                    if (degree) {\n                        this.degree = degree;\n                        (_b = this.curve) === null || _b === void 0 ? void 0 : _b.changeDegree(Math.min(this.curve.getControlPointCount() - 1, this.degree));\n                        (_c = this.curve) === null || _c === void 0 ? void 0 : _c.showControls(true);\n                    }\n                    break;\n            }\n            this.mode = CurveCommandMode.AddPoints;\n        }\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.curve && this.clicker.getPoint()) {\n            this.curve.updateLastControlPoint(this.clicker.getPoint(), 1);\n            this.curve.showControls(true);\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case CurveCommandMode.AddPoints:\n                if (this.curve == null)\n                    return `0:Exit  1:Degree(${this.degree})  Click start point.  $`;\n                return `0:Exit  1:Degree(${this.degree})  Click next point.  $`;\n            case CurveCommandMode.ChangeDegree:\n                return `0:Exit  Enter New Degree(${this.degree})  $`;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    handleClickResult(intersection) {\n        const point = intersection.point;\n        if (this.curve) {\n            this.curve.updateLastControlPoint(point, 1);\n            this.curve.addControlPoint(point, 1);\n            if (this.curve.getDegree() < this.degree)\n                this.curve.changeDegree(this.curve.getDegree() + 1);\n        }\n        else {\n            this.curve = new _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__.Curve(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...point, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec4.create(...point, 1)], 1);\n        }\n        this.clicker.reset();\n        this.curve.showControls(true);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU07Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUMvRjthQUFNO1lBQ0wsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLHdEQUFLLENBQ3BCLElBQUksRUFDSixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ3BELENBQUMsQ0FDRixDQUFDO1NBQ0g7UUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7Q0FHRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL2N1cnZlQ29tbWFuZC50cz8wMGI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYzMsIHZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvY3VydmVcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5cblxuZW51bSBDdXJ2ZUNvbW1hbmRNb2RlIHtcbiAgQWRkUG9pbnRzLFxuICBDaGFuZ2VEZWdyZWUsXG59XG5cbmV4cG9ydCBjbGFzcyBDdXJ2ZUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIGRlZ3JlZTogbnVtYmVyO1xuICBwcml2YXRlIGN1cnZlOiBDdXJ2ZSB8IG51bGw7XG4gIHByaXZhdGUgbW9kZTogQ3VydmVDb21tYW5kTW9kZTtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuY3VydmUgPSBudWxsO1xuICAgIHRoaXMuZGVncmVlID0gMjtcbiAgICB0aGlzLm1vZGUgPSBDdXJ2ZUNvbW1hbmRNb2RlLkFkZFBvaW50cztcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICB9XG5cblxuICAvLyBUT0RPOiBkZWJ1Z1xuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gQ3VydmVDb21tYW5kTW9kZS5BZGRQb2ludHMpIHtcbiAgICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgICAgY2FzZSBcIjBcIjpcbiAgICAgICAgICB0aGlzLmN1cnZlPy5kZWxldGUoKTtcbiAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiMVwiOlxuICAgICAgICAgIHRoaXMubW9kZSA9IEN1cnZlQ29tbWFuZE1vZGUuQ2hhbmdlRGVncmVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiXCI6XG4gICAgICAgICAgaWYgKHRoaXMuY3VydmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VydmUuZ2V0Q29udHJvbFBvaW50Q291bnQoKSA8IDMpIHRoaXMuY3VydmUuZGVsZXRlKCk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5jdXJ2ZS5yZW1vdmVMYXN0Q29udHJvbFBvaW50KCk7XG4gICAgICAgICAgICAgIHRoaXMuY3VydmUuc2hvd0NvbnRyb2xzKGZhbHNlKTtcbiAgICAgICAgICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeSh0aGlzLmN1cnZlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gQ3VydmVDb21tYW5kTW9kZS5DaGFuZ2VEZWdyZWUpIHtcbiAgICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgICAgY2FzZSBcIjBcIjogY2FzZSBcIlwiOlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnN0IGRlZ3JlZTogbnVtYmVyIHwgdW5kZWZpbmVkID0gcGFyc2VJbnQoaW5wdXQpO1xuICAgICAgICAgIGlmIChkZWdyZWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVncmVlID0gZGVncmVlO1xuICAgICAgICAgICAgdGhpcy5jdXJ2ZT8uY2hhbmdlRGVncmVlKE1hdGgubWluKHRoaXMuY3VydmUuZ2V0Q29udHJvbFBvaW50Q291bnQoKSAtIDEsIHRoaXMuZGVncmVlKSk7XG4gICAgICAgICAgICB0aGlzLmN1cnZlPy5zaG93Q29udHJvbHModHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGhpcy5tb2RlID0gQ3VydmVDb21tYW5kTW9kZS5BZGRQb2ludHM7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5jbGljaygpO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIub25Nb3VzZU1vdmUoKTtcbiAgICBpZiAodGhpcy5jdXJ2ZSAmJiB0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKSkge1xuICAgICAgdGhpcy5jdXJ2ZS51cGRhdGVMYXN0Q29udHJvbFBvaW50KHRoaXMuY2xpY2tlci5nZXRQb2ludCgpISwgMSk7XG4gICAgICB0aGlzLmN1cnZlLnNob3dDb250cm9scyh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgQ3VydmVDb21tYW5kTW9kZS5BZGRQb2ludHM6XG4gICAgICAgIGlmICh0aGlzLmN1cnZlID09IG51bGwpXG4gICAgICAgICAgcmV0dXJuIGAwOkV4aXQgIDE6RGVncmVlKCR7dGhpcy5kZWdyZWV9KSAgQ2xpY2sgc3RhcnQgcG9pbnQuICAkYDtcbiAgICAgICAgcmV0dXJuIGAwOkV4aXQgIDE6RGVncmVlKCR7dGhpcy5kZWdyZWV9KSAgQ2xpY2sgbmV4dCBwb2ludC4gICRgO1xuICAgICAgY2FzZSBDdXJ2ZUNvbW1hbmRNb2RlLkNoYW5nZURlZ3JlZTpcbiAgICAgICAgcmV0dXJuIGAwOkV4aXQgIEVudGVyIE5ldyBEZWdyZWUoJHt0aGlzLmRlZ3JlZX0pICAkYDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgY29uc3QgcG9pbnQ6IFZlYzMgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgaWYgKHRoaXMuY3VydmUpIHtcbiAgICAgIHRoaXMuY3VydmUudXBkYXRlTGFzdENvbnRyb2xQb2ludChwb2ludCwgMSk7XG4gICAgICB0aGlzLmN1cnZlLmFkZENvbnRyb2xQb2ludChwb2ludCwgMSk7XG4gICAgICBpZiAodGhpcy5jdXJ2ZS5nZXREZWdyZWUoKSA8IHRoaXMuZGVncmVlKSB0aGlzLmN1cnZlLmNoYW5nZURlZ3JlZSh0aGlzLmN1cnZlLmdldERlZ3JlZSgpICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VydmUgPSBuZXcgQ3VydmUoXG4gICAgICAgIG51bGwsXG4gICAgICAgIFt2ZWM0LmNyZWF0ZSguLi5wb2ludCwgMSksIHZlYzQuY3JlYXRlKC4uLnBvaW50LCAxKV0sXG4gICAgICAgIDFcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICAgIHRoaXMuY3VydmUuc2hvd0NvbnRyb2xzKHRydWUpO1xuICB9XG5cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/curveCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/extrudeCurveCommand.ts":
/*!******************************************************!*\
  !*** ./src/commands/commands/extrudeCurveCommand.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExtruedCurveCommand: () => (/* binding */ ExtruedCurveCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/loft */ \"./src/geometry/nurbs/loft.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\nvar ExtrudeCurveCommandMode;\n(function (ExtrudeCurveCommandMode) {\n    ExtrudeCurveCommandMode[ExtrudeCurveCommandMode[\"SelectCurves\"] = 0] = \"SelectCurves\";\n    ExtrudeCurveCommandMode[ExtrudeCurveCommandMode[\"Base\"] = 1] = \"Base\";\n    ExtrudeCurveCommandMode[ExtrudeCurveCommandMode[\"Direction\"] = 2] = \"Direction\";\n    ExtrudeCurveCommandMode[ExtrudeCurveCommandMode[\"Distance\"] = 3] = \"Distance\";\n})(ExtrudeCurveCommandMode || (ExtrudeCurveCommandMode = {}));\nclass ExtruedCurveCommand extends _command__WEBPACK_IMPORTED_MODULE_4__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n        this.mode = ExtrudeCurveCommandMode.SelectCurves;\n        this.base = null;\n        this.dir = null;\n        this.dist = null;\n        this.surfaces = [];\n        this.curves = [];\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().reset();\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            for (const surface of this.surfaces)\n                surface.delete();\n            this.surfaces = [];\n            this.done();\n        }\n        else if (this.mode === ExtrudeCurveCommandMode.SelectCurves) {\n            if (this.curves.length === 0) {\n                this.done();\n            }\n            else {\n                this.mode = ExtrudeCurveCommandMode.Base;\n            }\n        }\n        else if (this.mode === ExtrudeCurveCommandMode.Distance) {\n            const val = parseInt(input);\n            if (!isNaN(val)) {\n                this.dist = val;\n                this.updateSurfaces();\n                this.done();\n            }\n        }\n    }\n    updateSurfaces() {\n        for (const surface of this.surfaces)\n            surface.delete();\n        this.surfaces = [];\n        for (let i = 0; i < this.curves.length; i++) {\n            const clone = this.curves[i].clone();\n            const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.scale(this.dir, this.dist));\n            clone.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.mul(translation, clone.getModel()));\n            this.surfaces.push((0,_geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_1__.loft)([this.curves[i], clone], 1));\n            clone.delete();\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case ExtrudeCurveCommandMode.SelectCurves:\n                const curve = intersection.geometry;\n                curve.select();\n                this.curves.push(curve);\n                break;\n            case ExtrudeCurveCommandMode.Base:\n                this.base = intersection.point;\n                this.mode = ExtrudeCurveCommandMode.Direction;\n                break;\n            case ExtrudeCurveCommandMode.Direction:\n                if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.equals(intersection.point, this.base)) {\n                    this.dir = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(intersection.point, this.base));\n                    this.dist = 1;\n                    this.updateSurfaces();\n                    this.mode = ExtrudeCurveCommandMode.Distance;\n                }\n                break;\n            case ExtrudeCurveCommandMode.Distance:\n                const ray = new _geometry_ray__WEBPACK_IMPORTED_MODULE_2__.Ray(this.base, this.dir);\n                const dirPoint = ray.closestPointToPoint(intersection.point);\n                this.dist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.dot(this.dir, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(dirPoint, this.base));\n                this.updateSurfaces();\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        if (this.mode === ExtrudeCurveCommandMode.SelectCurves) {\n            this.clicker.click([\"curve\"]);\n        }\n        else {\n            this.clicker.click();\n        }\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode === ExtrudeCurveCommandMode.Distance) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                const ray = new _geometry_ray__WEBPACK_IMPORTED_MODULE_2__.Ray(this.base, this.dir);\n                const dirPoint = ray.closestPointToPoint(point);\n                this.dist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.dot(this.dir, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(dirPoint, this.base));\n                this.updateSurfaces();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case ExtrudeCurveCommandMode.SelectCurves:\n                return \"0:Exit  Select curves.  $\";\n            case ExtrudeCurveCommandMode.Base:\n                return \"0:Exit  Select base point.  $\";\n            case ExtrudeCurveCommandMode.Direction:\n                return \"0:Exit  Select direction point.  $\";\n            case ExtrudeCurveCommandMode.Distance:\n                return \"0:Exit  Select distance point or enter number.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        for (const surface of this.surfaces) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(surface);\n        }\n        for (const curve of this.curves) {\n            curve.unSelect();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvZXh0cnVkZUN1cnZlQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBQ2hCO0FBR1k7QUFHUjtBQUVKO0FBQ0E7QUFFckMsSUFBSyx1QkFLSjtBQUxELFdBQUssdUJBQXVCO0lBQzFCLHFGQUFZO0lBQ1oscUVBQUk7SUFDSiwrRUFBUztJQUNULDZFQUFRO0FBQ1YsQ0FBQyxFQUxJLHVCQUF1QixLQUF2Qix1QkFBdUIsUUFLM0I7QUFFTSxNQUFNLG1CQUFvQixTQUFRLDZDQUFPO0lBVzlDO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksNkNBQU8sRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcsdUJBQXVCLENBQUMsWUFBWSxDQUFDO1FBQ2pELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVELGlCQUFpQixDQUFDLEtBQWE7UUFDN0IsSUFBSSxLQUFLLElBQUksR0FBRyxFQUFFO1lBQ2hCLEtBQUssTUFBTSxPQUFPLElBQUksSUFBSSxDQUFDLFFBQVE7Z0JBQUUsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3RELElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1lBQ25CLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNiO2FBQ0ksSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLHVCQUF1QixD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QyxRQUFRLEVBQUUsQ0FBQztTQUNsQjtJQUNILENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL2V4dHJ1ZGVDdXJ2ZUNvbW1hbmQudHM/OGE4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL2N1cnZlXCI7XG5pbXBvcnQgeyBsb2Z0IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL2xvZnRcIjtcbmltcG9ydCB7IFN1cmZhY2UgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvc3VyZmFjZVwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGxhbmVcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yYXlcIjtcbmltcG9ydCB7IGdldFNjYWxlMVRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIEV4dHJ1ZGVDdXJ2ZUNvbW1hbmRNb2RlIHtcbiAgU2VsZWN0Q3VydmVzLFxuICBCYXNlLFxuICBEaXJlY3Rpb24sXG4gIERpc3RhbmNlXG59XG5cbmV4cG9ydCBjbGFzcyBFeHRydWVkQ3VydmVDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuICBwcml2YXRlIG1vZGU6IEV4dHJ1ZGVDdXJ2ZUNvbW1hbmRNb2RlO1xuICBwcml2YXRlIGJhc2U6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIGRpcjogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgZGlzdDogbnVtYmVyIHwgbnVsbDtcbiAgcHJpdmF0ZSBzdXJmYWNlczogU3VyZmFjZVtdO1xuICBwcml2YXRlIGN1cnZlczogQ3VydmVbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMubW9kZSA9IEV4dHJ1ZGVDdXJ2ZUNvbW1hbmRNb2RlLlNlbGVjdEN1cnZlcztcbiAgICB0aGlzLmJhc2UgPSBudWxsO1xuICAgIHRoaXMuZGlyID0gbnVsbDtcbiAgICB0aGlzLmRpc3QgPSBudWxsO1xuICAgIHRoaXMuc3VyZmFjZXMgPSBbXTtcbiAgICB0aGlzLmN1cnZlcyA9IFtdO1xuICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkucmVzZXQoKTtcbiAgfVxuXG4gIGhhbmRsZUlucHV0U3RyaW5nKGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaW5wdXQgPT0gXCIwXCIpIHtcbiAgICAgIGZvciAoY29uc3Qgc3VyZmFjZSBvZiB0aGlzLnN1cmZhY2VzKSBzdXJmYWNlLmRlbGV0ZSgpO1xuICAgICAgdGhpcy5zdXJmYWNlcyA9IFtdO1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gRXh0cnVkZUN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmVzKSB7XG4gICAgICBpZiAodGhpcy5jdXJ2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tb2RlID0gRXh0cnVkZUN1cnZlQ29tbWFuZE1vZGUuQmFzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5tb2RlID09PSBFeHRydWRlQ3VydmVDb21tYW5kTW9kZS5EaXN0YW5jZSkge1xuICAgICAgY29uc3QgdmFsOiBudW1iZXIgPSBwYXJzZUludChpbnB1dCk7XG4gICAgICBpZiAoIWlzTmFOKHZhbCkpIHtcbiAgICAgICAgdGhpcy5kaXN0ID0gdmFsO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1cmZhY2VzKCk7XG4gICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VyZmFjZXMoKSB7XG5cbiAgICBmb3IgKGNvbnN0IHN1cmZhY2Ugb2YgdGhpcy5zdXJmYWNlcykgc3VyZmFjZS5kZWxldGUoKTtcbiAgICB0aGlzLnN1cmZhY2VzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VydmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjbG9uZTogQ3VydmUgPSA8Q3VydmU+dGhpcy5jdXJ2ZXNbaV0uY2xvbmUoKTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbih2ZWMzLnNjYWxlKHRoaXMuZGlyISwgdGhpcy5kaXN0ISkpO1xuICAgICAgY2xvbmUuc2V0TW9kZWwobWF0NC5tdWwodHJhbnNsYXRpb24sIGNsb25lLmdldE1vZGVsKCkpKTtcbiAgICAgIHRoaXMuc3VyZmFjZXMucHVzaChsb2Z0KFt0aGlzLmN1cnZlc1tpXSwgY2xvbmVdLCAxKSk7XG4gICAgICBjbG9uZS5kZWxldGUoKTtcbiAgICB9XG5cbiAgfVxuXG4gIGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgRXh0cnVkZUN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmVzOlxuICAgICAgICBjb25zdCBjdXJ2ZTogQ3VydmUgPSA8Q3VydmU+aW50ZXJzZWN0aW9uLmdlb21ldHJ5O1xuICAgICAgICBjdXJ2ZS5zZWxlY3QoKTtcbiAgICAgICAgdGhpcy5jdXJ2ZXMucHVzaChjdXJ2ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFeHRydWRlQ3VydmVDb21tYW5kTW9kZS5CYXNlOlxuICAgICAgICB0aGlzLmJhc2UgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMubW9kZSA9IEV4dHJ1ZGVDdXJ2ZUNvbW1hbmRNb2RlLkRpcmVjdGlvbjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEV4dHJ1ZGVDdXJ2ZUNvbW1hbmRNb2RlLkRpcmVjdGlvbjpcbiAgICAgICAgaWYgKCF2ZWMzLmVxdWFscyhpbnRlcnNlY3Rpb24ucG9pbnQsIHRoaXMuYmFzZSEpKSB7XG4gICAgICAgICAgdGhpcy5kaXIgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1YihcbiAgICAgICAgICAgIGludGVyc2VjdGlvbi5wb2ludCxcbiAgICAgICAgICAgIHRoaXMuYmFzZSFcbiAgICAgICAgICApKTtcbiAgICAgICAgICB0aGlzLmRpc3QgPSAxO1xuICAgICAgICAgIHRoaXMudXBkYXRlU3VyZmFjZXMoKTtcbiAgICAgICAgICB0aGlzLm1vZGUgPSBFeHRydWRlQ3VydmVDb21tYW5kTW9kZS5EaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRXh0cnVkZUN1cnZlQ29tbWFuZE1vZGUuRGlzdGFuY2U6XG4gICAgICAgIGNvbnN0IHJheTogUmF5ID0gbmV3IFJheSh0aGlzLmJhc2UhLCB0aGlzLmRpciEpO1xuICAgICAgICBjb25zdCBkaXJQb2ludDogVmVjMyA9IHJheS5jbG9zZXN0UG9pbnRUb1BvaW50KGludGVyc2VjdGlvbi5wb2ludCk7XG4gICAgICAgIHRoaXMuZGlzdCA9IHZlYzMuZG90KHRoaXMuZGlyISwgdmVjMy5zdWIoZGlyUG9pbnQsIHRoaXMuYmFzZSEpKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdXJmYWNlcygpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gICAgdGhpcy5jbGlja2VyLnJlc2V0KCk7XG4gIH1cblxuICBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5tb2RlID09PSBFeHRydWRlQ3VydmVDb21tYW5kTW9kZS5TZWxlY3RDdXJ2ZXMpIHtcbiAgICAgIHRoaXMuY2xpY2tlci5jbGljayhbXCJjdXJ2ZVwiXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xpY2tlci5jbGljaygpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIub25Nb3VzZU1vdmUoKTtcbiAgICBpZiAodGhpcy5tb2RlID09PSBFeHRydWRlQ3VydmVDb21tYW5kTW9kZS5EaXN0YW5jZSkge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgY29uc3QgcmF5OiBSYXkgPSBuZXcgUmF5KHRoaXMuYmFzZSEsIHRoaXMuZGlyISk7XG4gICAgICAgIGNvbnN0IGRpclBvaW50OiBWZWMzID0gcmF5LmNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQpO1xuICAgICAgICB0aGlzLmRpc3QgPSB2ZWMzLmRvdCh0aGlzLmRpciEsIHZlYzMuc3ViKGRpclBvaW50LCB0aGlzLmJhc2UhKSk7XG4gICAgICAgIHRoaXMudXBkYXRlU3VyZmFjZXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBFeHRydWRlQ3VydmVDb21tYW5kTW9kZS5TZWxlY3RDdXJ2ZXM6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgU2VsZWN0IGN1cnZlcy4gICRcIjtcbiAgICAgIGNhc2UgRXh0cnVkZUN1cnZlQ29tbWFuZE1vZGUuQmFzZTpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3QgYmFzZSBwb2ludC4gICRcIjtcbiAgICAgIGNhc2UgRXh0cnVkZUN1cnZlQ29tbWFuZE1vZGUuRGlyZWN0aW9uOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCBkaXJlY3Rpb24gcG9pbnQuICAkXCI7XG4gICAgICBjYXNlIEV4dHJ1ZGVDdXJ2ZUNvbW1hbmRNb2RlLkRpc3RhbmNlOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCBkaXN0YW5jZSBwb2ludCBvciBlbnRlciBudW1iZXIuICAkXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBkb25lKCk6IHZvaWQge1xuICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgIHRoaXMuY2xpY2tlci5kZXN0cm95KCk7XG4gICAgZm9yIChjb25zdCBzdXJmYWNlIG9mIHRoaXMuc3VyZmFjZXMpIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoc3VyZmFjZSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgY3VydmUgb2YgdGhpcy5jdXJ2ZXMpIHtcbiAgICAgIGN1cnZlLnVuU2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/extrudeCurveCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/loftCommand.ts":
/*!**********************************************!*\
  !*** ./src/commands/commands/loftCommand.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LoftCommand: () => (/* binding */ LoftCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/loft */ \"./src/geometry/nurbs/loft.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\nvar LoftCommandMode;\n(function (LoftCommandMode) {\n    LoftCommandMode[LoftCommandMode[\"SelectCurves\"] = 0] = \"SelectCurves\";\n    LoftCommandMode[LoftCommandMode[\"ChangeDegree\"] = 1] = \"ChangeDegree\";\n})(LoftCommandMode || (LoftCommandMode = {}));\nclass LoftCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.degree = 1;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_2__.Clicker();\n        this.mode = LoftCommandMode.SelectCurves;\n        this.curves = [];\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().reset();\n    }\n    handleInputString(input) {\n        if (input === \"0\")\n            this.done();\n        switch (this.mode) {\n            case LoftCommandMode.SelectCurves:\n                if (input == \"1\") {\n                    this.mode = LoftCommandMode.ChangeDegree;\n                }\n                if (input == \"\") {\n                    const curves = [];\n                    for (let curve of this.curves) {\n                        while (curve.getTypeName() != \"Curve\" && curve.getParent()) {\n                            curve = curve.getParent();\n                        }\n                        if (curve.getTypeName() == \"Curve\") {\n                            curves.push(curve);\n                        }\n                    }\n                    if (curves.length < 2)\n                        this.done();\n                    this.degree = Math.min(this.degree, curves.length - 1);\n                    const surface = (0,_geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_1__.loft)(curves, this.degree);\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(surface);\n                    this.done();\n                }\n                break;\n            case LoftCommandMode.ChangeDegree:\n                const inputNum = parseInt(input);\n                if (inputNum) {\n                    this.degree = inputNum;\n                    this.mode = LoftCommandMode.SelectCurves;\n                }\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClickResult(intersection) {\n        this.curves.push(intersection.geometry);\n        intersection.geometry.select();\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click([\"curve\"]);\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case LoftCommandMode.ChangeDegree:\n                return `0:Exit  Enter new degree(${this.degree})  $`;\n            case LoftCommandMode.SelectCurves:\n                return `0:Exit  1:ChangeDegree(${this.degree})  Select curves.  $`;\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.clicker.destroy();\n        for (const curve of this.curves) {\n            curve.unSelect();\n        }\n        this.finished = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVELGVBQWU7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRCxlQUFlO1FBQ2IsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssZUFBZSxDQUFDLFlBQVk7Z0JBQy9CLE9BQU8sNEJBQTRCLElBQUksQ0FBQyxNQUFNLE1BQU0sQ0FBQztZQUN2RCxLQUFLLGVBQWUsQ0FBQyxZQUFZO2dCQUMvQixPQUFPLDBCQUEwQixJQUFJLENBQUMsTUFBTSxzQkFBc0IsQ0FBQztTQUN0RTtJQUNILENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFTyxJQUFJO1FBQ1YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN2QixLQUFLLE1BQU0sS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDL0IsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ2xCO1FBQ0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7SUFDdkIsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvbG9mdENvbW1hbmQudHM/MmYyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9jdXJ2ZVwiO1xuaW1wb3J0IHsgbG9mdCB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9sb2Z0XCI7XG5pbXBvcnQgeyBTdXJmYWNlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL3N1cmZhY2VcIjtcbmltcG9ydCB7IENsaWNrZXIgfSBmcm9tIFwiLi4vY2xpY2tlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cbmVudW0gTG9mdENvbW1hbmRNb2RlIHtcbiAgU2VsZWN0Q3VydmVzLFxuICBDaGFuZ2VEZWdyZWUsXG59XG5cbmV4cG9ydCBjbGFzcyBMb2Z0Q29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgZGVncmVlOiBudW1iZXI7XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBtb2RlOiBMb2Z0Q29tbWFuZE1vZGU7XG4gIHByaXZhdGUgY3VydmVzOiBHZW9tZXRyeVtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGVncmVlID0gMTtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMubW9kZSA9IExvZnRDb21tYW5kTW9kZS5TZWxlY3RDdXJ2ZXM7XG4gICAgdGhpcy5jdXJ2ZXMgPSBbXTtcbiAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLnJlc2V0KCk7XG4gIH1cblxuICBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG5cbiAgICBpZiAoaW5wdXQgPT09IFwiMFwiKSB0aGlzLmRvbmUoKTtcblxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIExvZnRDb21tYW5kTW9kZS5TZWxlY3RDdXJ2ZXM6XG4gICAgICAgIGlmIChpbnB1dCA9PSBcIjFcIikge1xuICAgICAgICAgIHRoaXMubW9kZSA9IExvZnRDb21tYW5kTW9kZS5DaGFuZ2VEZWdyZWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0ID09IFwiXCIpIHtcbiAgICAgICAgICBjb25zdCBjdXJ2ZXM6IEN1cnZlW10gPSBbXTtcbiAgICAgICAgICBmb3IgKGxldCBjdXJ2ZSBvZiB0aGlzLmN1cnZlcykge1xuICAgICAgICAgICAgd2hpbGUgKGN1cnZlLmdldFR5cGVOYW1lKCkgIT0gXCJDdXJ2ZVwiICYmIGN1cnZlLmdldFBhcmVudCgpKSB7XG4gICAgICAgICAgICAgIGN1cnZlID0gY3VydmUuZ2V0UGFyZW50KCkhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnZlLmdldFR5cGVOYW1lKCkgPT0gXCJDdXJ2ZVwiKSB7XG4gICAgICAgICAgICAgIGN1cnZlcy5wdXNoKDxDdXJ2ZT5jdXJ2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjdXJ2ZXMubGVuZ3RoIDwgMikgdGhpcy5kb25lKCk7XG4gICAgICAgICAgdGhpcy5kZWdyZWUgPSBNYXRoLm1pbih0aGlzLmRlZ3JlZSwgY3VydmVzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgIGNvbnN0IHN1cmZhY2U6IFN1cmZhY2UgPSBsb2Z0KGN1cnZlcywgdGhpcy5kZWdyZWUpO1xuICAgICAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoc3VyZmFjZSk7XG4gICAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExvZnRDb21tYW5kTW9kZS5DaGFuZ2VEZWdyZWU6XG4gICAgICAgIGNvbnN0IGlucHV0TnVtOiBudW1iZXIgfCB1bmRlZmluZWQgPSBwYXJzZUludChpbnB1dCk7XG4gICAgICAgIGlmIChpbnB1dE51bSkge1xuICAgICAgICAgIHRoaXMuZGVncmVlID0gaW5wdXROdW07XG4gICAgICAgICAgdGhpcy5tb2RlID0gTG9mdENvbW1hbmRNb2RlLlNlbGVjdEN1cnZlcztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5jdXJ2ZXMucHVzaChpbnRlcnNlY3Rpb24uZ2VvbWV0cnkhKTtcbiAgICBpbnRlcnNlY3Rpb24uZ2VvbWV0cnkhLnNlbGVjdCgpO1xuICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLmNsaWNrKFtcImN1cnZlXCJdKTtcbiAgfVxuXG4gIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIub25Nb3VzZU1vdmUoKTtcbiAgfVxuXG4gIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIExvZnRDb21tYW5kTW9kZS5DaGFuZ2VEZWdyZWU6XG4gICAgICAgIHJldHVybiBgMDpFeGl0ICBFbnRlciBuZXcgZGVncmVlKCR7dGhpcy5kZWdyZWV9KSAgJGA7XG4gICAgICBjYXNlIExvZnRDb21tYW5kTW9kZS5TZWxlY3RDdXJ2ZXM6XG4gICAgICAgIHJldHVybiBgMDpFeGl0ICAxOkNoYW5nZURlZ3JlZSgke3RoaXMuZGVncmVlfSkgIFNlbGVjdCBjdXJ2ZXMuICAkYDtcbiAgICB9XG4gIH1cblxuICBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBkb25lKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5kZXN0cm95KCk7XG4gICAgZm9yIChjb25zdCBjdXJ2ZSBvZiB0aGlzLmN1cnZlcykge1xuICAgICAgY3VydmUudW5TZWxlY3QoKTtcbiAgICB9XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/loftCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/mirrorCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/mirrorCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MirrorCommand: () => (/* binding */ MirrorCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\nvar MirrorCommandMode;\n(function (MirrorCommandMode) {\n    MirrorCommandMode[MirrorCommandMode[\"SelectFirstPoint\"] = 0] = \"SelectFirstPoint\";\n    MirrorCommandMode[MirrorCommandMode[\"SelectSecondPoint\"] = 1] = \"SelectSecondPoint\";\n    MirrorCommandMode[MirrorCommandMode[\"SelectThirdPoint\"] = 2] = \"SelectThirdPoint\";\n})(MirrorCommandMode || (MirrorCommandMode = {}));\nclass MirrorCommand extends _command__WEBPACK_IMPORTED_MODULE_4__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n        this.oldToNew = new Map();\n        this.mode = MirrorCommandMode.SelectFirstPoint;\n        this.pointA = null;\n        this.pointB = null;\n        this.pointC = null;\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.done();\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\")\n            this.done();\n        switch (this.mode) {\n            case MirrorCommandMode.SelectFirstPoint:\n                break;\n            case MirrorCommandMode.SelectSecondPoint:\n                break;\n            case MirrorCommandMode.SelectThirdPoint:\n                if (input == \"\") {\n                    this.pointC = null;\n                    this.applyMirror();\n                    this.done();\n                }\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case MirrorCommandMode.SelectFirstPoint:\n                this.pointA = intersection.point;\n                const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n                for (const geometry of selection) {\n                    this.oldToNew.set(geometry, geometry.clone());\n                }\n                this.mode = MirrorCommandMode.SelectSecondPoint;\n                this.clicker.reset();\n                break;\n            case MirrorCommandMode.SelectSecondPoint:\n                this.pointB = intersection.point;\n                this.applyMirror();\n                this.mode = MirrorCommandMode.SelectThirdPoint;\n                this.clicker.reset();\n                break;\n            case MirrorCommandMode.SelectThirdPoint:\n                this.applyMirror();\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        const point = this.clicker.getPoint();\n        if (point) {\n            if (this.mode === MirrorCommandMode.SelectSecondPoint)\n                this.pointB = point;\n            else if (this.mode === MirrorCommandMode.SelectThirdPoint)\n                this.pointC = point;\n            this.applyMirror();\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case MirrorCommandMode.SelectFirstPoint:\n                return \"0:Exit  Click first point on mirror plane.  $\";\n            case MirrorCommandMode.SelectSecondPoint:\n                return \"0:Exit  Click second point on mirror plane.  $\";\n            case MirrorCommandMode.SelectThirdPoint:\n                return \"0:Exit  Click optional third point on mirror plane.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        for (let geo of this.oldToNew.values()) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n        }\n    }\n    applyMirror() {\n        if (this.pointC) {\n            const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.pointA, this.pointB);\n            const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.pointA, this.pointC);\n            const mirrorPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.pointA, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.cross(v1, v2));\n            const mirrorTransform = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getMirrorTransform)(mirrorPlane);\n            for (const [oldGeo, newGeo] of this.oldToNew) {\n                newGeo.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.mul(mirrorTransform, oldGeo.getModel()));\n            }\n        }\n        else if (this.pointB) {\n            const dir = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.pointA, this.pointB);\n            if (dir[0] === 0 && dir[1] === 0)\n                return;\n            dir[2] = 0;\n            const mirrorPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.pointA, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(0, 0, 1), dir));\n            const mirrorTransform = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getMirrorTransform)(mirrorPlane);\n            for (const [oldGeo, newGeo] of this.oldToNew) {\n                newGeo.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.mul(mirrorTransform, oldGeo.getModel()));\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvbWlycm9yQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBQ2hCO0FBR1E7QUFDUztBQUNqQjtBQUNBO0FBRXJDLElBQUssaUJBSUo7QUFKRCxXQUFLLGlCQUFpQjtJQUNwQixpRkFBZ0I7SUFDaEIsbUZBQWlCO0lBQ2pCLGlGQUFnQjtBQUNsQixDQUFDLEVBSkksaUJBQWlCLEtBQWpCLGlCQUFpQixRQUlyQjtBQUVNLE1BQU0sYUFBYyxTQUFRLDZDQUFPO0lBVXhDO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksNkNBQU8sRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLEVBQXNCLENBQUM7UUFDOUMsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQztRQUMvQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUNuQixNQUFNLFNBQVMsR0FBa0IsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN2RSxJQUFJLFNBQVMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUFFO1lBQ3hCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNiO0lBQ0gsQ0FBQztJQUVNLGlCQUFpQixDQUFDLEtBQWE7UUFDcEMsSUFBSSxLQUFLLElBQUksR0FBRztZQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUM5QixRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDakIsS0FBSyxpQkFBaUIsQ0FBQyxnQkFBZ0I7Z0JBQ3JDLE1BQU07WUFDUixLQUFLLGlCQUFpQixDQUFDLGlCQUFpQjtnQkFDdEMsTUFBTTtZQUNSLEtBQUssaUJBQWlCLENBQUMsZ0JBQWdCO2dCQUNyQyxJQUFJLEtBQUssSUFBSSxFQUFFLEVBQUU7b0JBQ2YsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7b0JBQ25CLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztvQkFDbkIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO2lCQUNiO2dCQUNELE1BQU07WUFDUjtnQkFDRSxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FDM0M7SUFFSCxDQUFDO0lBRU0saUJBQWlCLENBQUMsWUFBMEI7UUFDakQsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssaUJBQWlCLENBQUMsZ0JBQWdCO2dCQUNyQyxJQUFJLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUM7Z0JBQ2pDLE1BQU0sU0FBUyxHQUFrQiwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUN2RSxLQUFLLE1BQU0sUUFBUSxJQUFJLFNBQVMsRUFBRTtvQkFDaEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO2lCQUMvQztnQkFDRCxJQUFJLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDLGlCQUFpQixDQUFDO2dCQUNoRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNyQixNQUFNO1lBQ1IsS0FBSyxpQkFBaUIsQ0FBQyxpQkFBaUI7Z0JBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQztnQkFDakMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDO2dCQUMvQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNyQixNQUFNO1lBQ1IsS0FBSyxpQkFBaUIsQ0FBQyxnQkFBZ0I7Z0JBQ3JDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDbkIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNaLE1BQU07WUFDUjtnQkFDRSxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FDM0M7SUFDSCxDQUFDO0lBRU0sV0FBVztRQUNoQixJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxlQUFlO1FBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDM0IsTUFBTSxLQUFLLEdBQWdCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDbkQsSUFBSSxLQUFLLEVBQUU7WUFDVCxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssaUJBQWlCLENBQUMsaUJBQWlCO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO2lCQUN0RSxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssaUJBQWlCLENBQUMsZ0JBQWdCO2dCQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1lBQy9FLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztTQUNwQjtJQUNILENBQUM7SUFFTSxlQUFlO1FBQ3BCLFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNqQixLQUFLLGlCQUFpQixDQUFDLGdCQUFnQjtnQkFDckMsT0FBTywrQ0FBK0MsQ0FBQztZQUN6RCxLQUFLLGlCQUFpQixDQUFDLGlCQUFpQjtnQkFDdEMsT0FBTyxnREFBZ0QsQ0FBQztZQUMxRCxLQUFLLGlCQUFpQixDQUFDLGdCQUFnQjtnQkFDckMsT0FBTyx3REFBd0QsQ0FBQztZQUNsRTtnQkFDRSxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FDM0M7SUFDSCxDQUFDO0lBRU0sVUFBVTtRQUNmLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBRU8sSUFBSTtRQUNWLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdkIsS0FBSyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3RDLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQztJQUVPLFdBQVc7UUFDakIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsTUFBTSxFQUFFLEdBQVMsNkNBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU8sRUFBRSxJQUFJLENBQUMsTUFBTyxDQUFDLENBQUM7WUFDdEQsTUFBTSxFQUFFLEdBQVMsNkNBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU8sRUFBRSxJQUFJLENBQUMsTUFBTyxDQUFDLENBQUM7WUFDdEQsTUFBTSxXQUFXLEdBQVUsSUFBSSxrREFBSyxDQUFDLElBQUksQ0FBQyxNQUFPLEVBQUUsNkNBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdkUsTUFBTSxlQUFlLEdBQVMsK0RBQWtCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDOUQsS0FBSyxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQzVDLE1BQU0sQ0FBQyxRQUFRLENBQUMsNkNBQUksQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDL0Q7U0FDRjthQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUN0QixNQUFNLEdBQUcsR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTyxFQUFFLElBQUksQ0FBQyxNQUFPLENBQUMsQ0FBQztZQUN2RCxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7Z0JBQUUsT0FBTztZQUN6QyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ1gsTUFBTSxXQUFXLEdBQVUsSUFBSSxrREFBSyxDQUFDLElBQUksQ0FBQyxNQUFPLEVBQUUsNkNBQUksQ0FBQyxLQUFLLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzFGLE1BQU0sZUFBZSxHQUFTLCtEQUFrQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzlELEtBQUssTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUM1QyxNQUFNLENBQUMsUUFBUSxDQUFDLDZDQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQy9EO1NBQ0Y7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9taXJyb3JDb21tYW5kLnRzP2I1OTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgbWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGxhbmVcIjtcbmltcG9ydCB7IGdldE1pcnJvclRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIE1pcnJvckNvbW1hbmRNb2RlIHtcbiAgU2VsZWN0Rmlyc3RQb2ludCxcbiAgU2VsZWN0U2Vjb25kUG9pbnQsXG4gIFNlbGVjdFRoaXJkUG9pbnQsXG59XG5cbmV4cG9ydCBjbGFzcyBNaXJyb3JDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuICBwcml2YXRlIG9sZFRvTmV3OiBNYXA8R2VvbWV0cnksIEdlb21ldHJ5PjtcbiAgcHJpdmF0ZSBtb2RlOiBNaXJyb3JDb21tYW5kTW9kZTtcbiAgcHJpdmF0ZSBwb2ludEE6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIHBvaW50QjogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgcG9pbnRDOiBWZWMzIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMub2xkVG9OZXcgPSBuZXcgTWFwPEdlb21ldHJ5LCBHZW9tZXRyeT4oKTtcbiAgICB0aGlzLm1vZGUgPSBNaXJyb3JDb21tYW5kTW9kZS5TZWxlY3RGaXJzdFBvaW50O1xuICAgIHRoaXMucG9pbnRBID0gbnVsbDtcbiAgICB0aGlzLnBvaW50QiA9IG51bGw7XG4gICAgdGhpcy5wb2ludEMgPSBudWxsO1xuICAgIGNvbnN0IHNlbGVjdGlvbjogU2V0PEdlb21ldHJ5PiA9IElOU1RBTkNFLmdldFNlbGVjdG9yKCkuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKHNlbGVjdGlvbi5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChpbnB1dCA9PSBcIjBcIikgdGhpcy5kb25lKCk7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgTWlycm9yQ29tbWFuZE1vZGUuU2VsZWN0Rmlyc3RQb2ludDpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE1pcnJvckNvbW1hbmRNb2RlLlNlbGVjdFNlY29uZFBvaW50OlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTWlycm9yQ29tbWFuZE1vZGUuU2VsZWN0VGhpcmRQb2ludDpcbiAgICAgICAgaWYgKGlucHV0ID09IFwiXCIpIHtcbiAgICAgICAgICB0aGlzLnBvaW50QyA9IG51bGw7XG4gICAgICAgICAgdGhpcy5hcHBseU1pcnJvcigpO1xuICAgICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuXG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBNaXJyb3JDb21tYW5kTW9kZS5TZWxlY3RGaXJzdFBvaW50OlxuICAgICAgICB0aGlzLnBvaW50QSA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgZm9yIChjb25zdCBnZW9tZXRyeSBvZiBzZWxlY3Rpb24pIHtcbiAgICAgICAgICB0aGlzLm9sZFRvTmV3LnNldChnZW9tZXRyeSwgZ2VvbWV0cnkuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb2RlID0gTWlycm9yQ29tbWFuZE1vZGUuU2VsZWN0U2Vjb25kUG9pbnQ7XG4gICAgICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTWlycm9yQ29tbWFuZE1vZGUuU2VsZWN0U2Vjb25kUG9pbnQ6XG4gICAgICAgIHRoaXMucG9pbnRCID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgICAgICB0aGlzLmFwcGx5TWlycm9yKCk7XG4gICAgICAgIHRoaXMubW9kZSA9IE1pcnJvckNvbW1hbmRNb2RlLlNlbGVjdFRoaXJkUG9pbnQ7XG4gICAgICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTWlycm9yQ29tbWFuZE1vZGUuU2VsZWN0VGhpcmRQb2ludDpcbiAgICAgICAgdGhpcy5hcHBseU1pcnJvcigpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLmNsaWNrKCk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5vbk1vdXNlTW92ZSgpO1xuICAgIGNvbnN0IHBvaW50OiBWZWMzIHwgbnVsbCA9IHRoaXMuY2xpY2tlci5nZXRQb2ludCgpO1xuICAgIGlmIChwb2ludCkge1xuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gTWlycm9yQ29tbWFuZE1vZGUuU2VsZWN0U2Vjb25kUG9pbnQpIHRoaXMucG9pbnRCID0gcG9pbnQ7XG4gICAgICBlbHNlIGlmICh0aGlzLm1vZGUgPT09IE1pcnJvckNvbW1hbmRNb2RlLlNlbGVjdFRoaXJkUG9pbnQpIHRoaXMucG9pbnRDID0gcG9pbnQ7XG4gICAgICB0aGlzLmFwcGx5TWlycm9yKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIE1pcnJvckNvbW1hbmRNb2RlLlNlbGVjdEZpcnN0UG9pbnQ6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgZmlyc3QgcG9pbnQgb24gbWlycm9yIHBsYW5lLiAgJFwiO1xuICAgICAgY2FzZSBNaXJyb3JDb21tYW5kTW9kZS5TZWxlY3RTZWNvbmRQb2ludDpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBzZWNvbmQgcG9pbnQgb24gbWlycm9yIHBsYW5lLiAgJFwiO1xuICAgICAgY2FzZSBNaXJyb3JDb21tYW5kTW9kZS5TZWxlY3RUaGlyZFBvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIG9wdGlvbmFsIHRoaXJkIHBvaW50IG9uIG1pcnJvciBwbGFuZS4gICRcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBkb25lKCk6IHZvaWQge1xuICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgIHRoaXMuY2xpY2tlci5kZXN0cm95KCk7XG4gICAgZm9yIChsZXQgZ2VvIG9mIHRoaXMub2xkVG9OZXcudmFsdWVzKCkpIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoZ2VvKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFwcGx5TWlycm9yKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBvaW50Qykge1xuICAgICAgY29uc3QgdjE6IFZlYzMgPSB2ZWMzLnN1Yih0aGlzLnBvaW50QSEsIHRoaXMucG9pbnRCISk7XG4gICAgICBjb25zdCB2MjogVmVjMyA9IHZlYzMuc3ViKHRoaXMucG9pbnRBISwgdGhpcy5wb2ludEMhKTtcbiAgICAgIGNvbnN0IG1pcnJvclBsYW5lOiBQbGFuZSA9IG5ldyBQbGFuZSh0aGlzLnBvaW50QSEsIHZlYzMuY3Jvc3ModjEsIHYyKSk7XG4gICAgICBjb25zdCBtaXJyb3JUcmFuc2Zvcm06IE1hdDQgPSBnZXRNaXJyb3JUcmFuc2Zvcm0obWlycm9yUGxhbmUpO1xuICAgICAgZm9yIChjb25zdCBbb2xkR2VvLCBuZXdHZW9dIG9mIHRoaXMub2xkVG9OZXcpIHtcbiAgICAgICAgbmV3R2VvLnNldE1vZGVsKG1hdDQubXVsKG1pcnJvclRyYW5zZm9ybSwgb2xkR2VvLmdldE1vZGVsKCkpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucG9pbnRCKSB7XG4gICAgICBjb25zdCBkaXI6IFZlYzMgPSB2ZWMzLnN1Yih0aGlzLnBvaW50QSEsIHRoaXMucG9pbnRCISk7XG4gICAgICBpZiAoZGlyWzBdID09PSAwICYmIGRpclsxXSA9PT0gMCkgcmV0dXJuO1xuICAgICAgZGlyWzJdID0gMDtcbiAgICAgIGNvbnN0IG1pcnJvclBsYW5lOiBQbGFuZSA9IG5ldyBQbGFuZSh0aGlzLnBvaW50QSEsIHZlYzMuY3Jvc3ModmVjMy5jcmVhdGUoMCwgMCwgMSksIGRpcikpO1xuICAgICAgY29uc3QgbWlycm9yVHJhbnNmb3JtOiBNYXQ0ID0gZ2V0TWlycm9yVHJhbnNmb3JtKG1pcnJvclBsYW5lKTtcbiAgICAgIGZvciAoY29uc3QgW29sZEdlbywgbmV3R2VvXSBvZiB0aGlzLm9sZFRvTmV3KSB7XG4gICAgICAgIG5ld0dlby5zZXRNb2RlbChtYXQ0Lm11bChtaXJyb3JUcmFuc2Zvcm0sIG9sZEdlby5nZXRNb2RlbCgpKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/mirrorCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/moveCommand.ts":
/*!**********************************************!*\
  !*** ./src/commands/commands/moveCommand.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MoveCommand: () => (/* binding */ MoveCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\nvar MoveCommandMode;\n(function (MoveCommandMode) {\n    MoveCommandMode[MoveCommandMode[\"SelectPointToMoveFrom\"] = 0] = \"SelectPointToMoveFrom\";\n    MoveCommandMode[MoveCommandMode[\"SelectPointToMoveTo\"] = 1] = \"SelectPointToMoveTo\";\n})(MoveCommandMode || (MoveCommandMode = {}));\nclass MoveCommand extends _command__WEBPACK_IMPORTED_MODULE_2__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.mode = MoveCommandMode.SelectPointToMoveFrom;\n        this.pointToMoveFrom = null;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_1__.Clicker();\n        this.clones = [];\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geo of selection) {\n            this.clones.push(geo.clone());\n            const clone = geo.clone();\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(clone);\n            this.clones.push(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(geo);\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.identity());\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n            this.done();\n            return;\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case MoveCommandMode.SelectPointToMoveFrom:\n                this.pointToMoveFrom = intersection.point;\n                this.mode = MoveCommandMode.SelectPointToMoveTo;\n                this.clicker.reset();\n                break;\n            case MoveCommandMode.SelectPointToMoveTo:\n                const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(intersection.point, this.pointToMoveFrom);\n                const translationTransform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.translation(translation);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(translationTransform);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode == MoveCommandMode.SelectPointToMoveTo) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, this.pointToMoveFrom);\n                const translationTransform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.translation(translation);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(translationTransform);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case MoveCommandMode.SelectPointToMoveFrom:\n                return \"0:Exit  Click point to move from.  $\";\n            case MoveCommandMode.SelectPointToMoveTo:\n                return \"0:Exit  Click point to move to.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        for (const geo of selection) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n        }\n        for (const clone of this.clones) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(clone);\n            clone.delete();\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().transformSelected();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztRQUN2RSxLQUFLLE1BQU0sR0FBRyxJQUFJLFNBQVMsRUFBRTtZQUMzQiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN0QztRQUVELEtBQUssTUFBTSxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUMvQiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMxQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDaEI7UUFFRCwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDM0MsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBRXpDLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL21vdmVDb21tYW5kLnRzPzBhMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRcIjtcblxuZW51bSBNb3ZlQ29tbWFuZE1vZGUge1xuICBTZWxlY3RQb2ludFRvTW92ZUZyb20sXG4gIFNlbGVjdFBvaW50VG9Nb3ZlVG8sXG59XG5cbmV4cG9ydCBjbGFzcyBNb3ZlQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgbW9kZTogTW92ZUNvbW1hbmRNb2RlO1xuICBwcml2YXRlIHBvaW50VG9Nb3ZlRnJvbTogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBjbG9uZXM6IEdlb21ldHJ5W107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5tb2RlID0gTW92ZUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Nb3ZlRnJvbTtcbiAgICB0aGlzLnBvaW50VG9Nb3ZlRnJvbSA9IG51bGw7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgICB0aGlzLmNsb25lcyA9IFtdO1xuXG5cbiAgICBjb25zdCBzZWxlY3Rpb246IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3Rpb24uc2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgZ2VvIG9mIHNlbGVjdGlvbikge1xuICAgICAgdGhpcy5jbG9uZXMucHVzaChnZW8uY2xvbmUoKSk7XG4gICAgICBjb25zdCBjbG9uZTogR2VvbWV0cnkgPSBnZW8uY2xvbmUoKTtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoY2xvbmUpO1xuICAgICAgdGhpcy5jbG9uZXMucHVzaChjbG9uZSk7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUdlb21ldHJ5KGdlbyk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChpbnB1dCA9PSBcIjBcIikge1xuICAgICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5zZXRUcmFuc2Zvcm0obWF0NC5pZGVudGl0eSgpKTtcbiAgICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBNb3ZlQ29tbWFuZE1vZGUuU2VsZWN0UG9pbnRUb01vdmVGcm9tOlxuICAgICAgICB0aGlzLnBvaW50VG9Nb3ZlRnJvbSA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgdGhpcy5tb2RlID0gTW92ZUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Nb3ZlVG87XG4gICAgICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTW92ZUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Nb3ZlVG86XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBWZWMzID0gdmVjMy5zdWIoaW50ZXJzZWN0aW9uLnBvaW50LCB0aGlzLnBvaW50VG9Nb3ZlRnJvbSEpO1xuICAgICAgICBjb25zdCB0cmFuc2xhdGlvblRyYW5zZm9ybTogTWF0NCA9IG1hdDQudHJhbnNsYXRpb24odHJhbnNsYXRpb24pO1xuICAgICAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLnNldFRyYW5zZm9ybSh0cmFuc2xhdGlvblRyYW5zZm9ybSk7XG4gICAgICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIuY2xpY2soKTtcbiAgfVxuXG4gIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcblxuICAgIHRoaXMuY2xpY2tlci5vbk1vdXNlTW92ZSgpO1xuICAgIGlmICh0aGlzLm1vZGUgPT0gTW92ZUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Nb3ZlVG8pIHtcbiAgICAgIGNvbnN0IHBvaW50OiBWZWMzIHwgbnVsbCA9IHRoaXMuY2xpY2tlci5nZXRQb2ludCgpO1xuICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBWZWMzID0gdmVjMy5zdWIocG9pbnQsIHRoaXMucG9pbnRUb01vdmVGcm9tISk7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uVHJhbnNmb3JtOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbih0cmFuc2xhdGlvbik7XG4gICAgICAgIElOU1RBTkNFLmdldE1vdmVyKCkuc2V0VHJhbnNmb3JtKHRyYW5zbGF0aW9uVHJhbnNmb3JtKTtcbiAgICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5vblNlbGVjdGlvbk1vdmVkKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgTW92ZUNvbW1hbmRNb2RlLlNlbGVjdFBvaW50VG9Nb3ZlRnJvbTpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBwb2ludCB0byBtb3ZlIGZyb20uICAkXCI7XG4gICAgICBjYXNlIE1vdmVDb21tYW5kTW9kZS5TZWxlY3RQb2ludFRvTW92ZVRvOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHBvaW50IHRvIG1vdmUgdG8uICAkXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuXG4gICAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgICBmb3IgKGNvbnN0IGdlbyBvZiBzZWxlY3Rpb24pIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoZ2VvKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGNsb25lIG9mIHRoaXMuY2xvbmVzKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUdlb21ldHJ5KGNsb25lKTtcbiAgICAgIGNsb25lLmRlbGV0ZSgpO1xuICAgIH1cblxuICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkudHJhbnNmb3JtU2VsZWN0ZWQoKTtcbiAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLnVwZGF0ZWRTZWxlY3Rpb24oKTtcblxuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/moveCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/polarArrayCommand.ts":
/*!****************************************************!*\
  !*** ./src/commands/commands/polarArrayCommand.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PollarArrayCommand: () => (/* binding */ PollarArrayCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\nvar PollarArrayCommandMode;\n(function (PollarArrayCommandMode) {\n    PollarArrayCommandMode[PollarArrayCommandMode[\"EnterCount\"] = 0] = \"EnterCount\";\n    PollarArrayCommandMode[PollarArrayCommandMode[\"EnterCenter\"] = 1] = \"EnterCenter\";\n    PollarArrayCommandMode[PollarArrayCommandMode[\"EnterAxis\"] = 2] = \"EnterAxis\";\n    PollarArrayCommandMode[PollarArrayCommandMode[\"Options\"] = 3] = \"Options\";\n    PollarArrayCommandMode[PollarArrayCommandMode[\"EnterFirstPointOrAngle\"] = 4] = \"EnterFirstPointOrAngle\";\n    PollarArrayCommandMode[PollarArrayCommandMode[\"EnterFinalPointOrFlip\"] = 5] = \"EnterFinalPointOrFlip\";\n})(PollarArrayCommandMode || (PollarArrayCommandMode = {}));\nclass PollarArrayCommand extends _command__WEBPACK_IMPORTED_MODULE_4__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.flipped = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n        this.count = null;\n        this.basePoint = null;\n        this.centerPoint = null;\n        this.axis = null;\n        this.useAngleBetween = null;\n        this.angle = null;\n        this.geometry = [];\n        this.arrayedGeometry = [];\n        this.mode = PollarArrayCommandMode.EnterCount;\n        const selected = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selected.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geo of selected) {\n            this.geometry.push(geo);\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            for (const v of this.arrayedGeometry) {\n                for (const geo of v) {\n                    geo.delete();\n                }\n            }\n            this.done();\n            return;\n        }\n        switch (this.mode) {\n            case PollarArrayCommandMode.EnterCount:\n                const count = parseInt(input);\n                if (!isNaN(count) && count > 1) {\n                    this.count = count;\n                    this.mode = PollarArrayCommandMode.EnterCenter;\n                }\n                break;\n            case PollarArrayCommandMode.EnterCenter:\n                break;\n            case PollarArrayCommandMode.EnterAxis:\n                if (input == \"1\") {\n                    this.axis = new _geometry_ray__WEBPACK_IMPORTED_MODULE_1__.Ray(this.centerPoint, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(0, 0, 1));\n                    this.mode = PollarArrayCommandMode.Options;\n                }\n                break;\n            case PollarArrayCommandMode.Options:\n                if (input == \"1\") { // full circle\n                    this.angle = 360 * (this.count - 1) / this.count;\n                    this.useAngleBetween = false;\n                    this.createClones();\n                    this.setTransforms();\n                    this.done();\n                }\n                else if (input == \"2\") { // angle between\n                    this.useAngleBetween = true;\n                    this.mode = PollarArrayCommandMode.EnterFirstPointOrAngle;\n                }\n                else if (input == \"3\") { // total angle\n                    this.useAngleBetween = false;\n                    this.mode = PollarArrayCommandMode.EnterFirstPointOrAngle;\n                }\n                break;\n            case PollarArrayCommandMode.EnterFirstPointOrAngle:\n                const angle = parseFloat(input);\n                if (!isNaN(angle)) {\n                    this.angle = angle;\n                    this.setTransforms();\n                    this.done();\n                }\n                break;\n            case PollarArrayCommandMode.EnterFinalPointOrFlip:\n                if (input == \"1\") {\n                    this.flipped = !this.flipped;\n                    this.angle -= 360;\n                    this.setTransforms();\n                }\n                break;\n            default:\n                throw new Error(\"Case not implemented\");\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case PollarArrayCommandMode.EnterCount:\n                break;\n            case PollarArrayCommandMode.EnterCenter:\n                this.centerPoint = intersection.point;\n                this.mode = PollarArrayCommandMode.EnterAxis;\n                break;\n            case PollarArrayCommandMode.EnterAxis:\n                if (!wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.equals(intersection.point, this.centerPoint)) {\n                    this.axis = new _geometry_ray__WEBPACK_IMPORTED_MODULE_1__.Ray(this.centerPoint, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(intersection.point, this.centerPoint));\n                    this.mode = PollarArrayCommandMode.Options;\n                }\n                break;\n            case PollarArrayCommandMode.Options:\n                break;\n            case PollarArrayCommandMode.EnterFirstPointOrAngle:\n                this.basePoint = intersection.point;\n                this.mode = PollarArrayCommandMode.EnterFinalPointOrFlip;\n                this.createClones();\n                break;\n            case PollarArrayCommandMode.EnterFinalPointOrFlip:\n                const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.basePoint, this.centerPoint);\n                const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(intersection.point, this.centerPoint);\n                var theta = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.angleBetween)(v1, v2) / Math.PI * 180;\n                if (isNaN(theta)) {\n                    break;\n                }\n                if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.dot(v2, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.cross(v1, this.axis.getDirection())) > 0) {\n                    theta = 360 - theta;\n                }\n                if (this.flipped)\n                    theta -= 360;\n                this.angle = theta;\n                this.setTransforms();\n                this.done();\n                break;\n            default:\n                throw new Error(\"Case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode == PollarArrayCommandMode.EnterFinalPointOrFlip) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.basePoint, this.centerPoint);\n                const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(point, this.centerPoint);\n                var theta = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.angleBetween)(v1, v2) / Math.PI * 180;\n                if (isNaN(theta)) {\n                    return;\n                }\n                if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.dot(v2, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.cross(v1, this.axis.getDirection())) > 0) {\n                    theta = 360 - theta;\n                }\n                if (this.flipped)\n                    theta -= 360;\n                this.angle = theta;\n                this.setTransforms();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case PollarArrayCommandMode.EnterCount:\n                return \"0:Exit  Enter count.  $\";\n            case PollarArrayCommandMode.EnterCenter:\n                return \"0:Exit  Click center point.  $\";\n            case PollarArrayCommandMode.EnterAxis:\n                return \"0:Exit  1:Use Z-Axis  Click axis point.  $\";\n            case PollarArrayCommandMode.Options:\n                return \"0:Exit  1:Full Circle  2:Angle Between  3:Total Angle.  Select an option.  $\";\n            case PollarArrayCommandMode.EnterFirstPointOrAngle:\n                return \"0:Exit  Click first point or enter angle.  $\";\n            case PollarArrayCommandMode.EnterFinalPointOrFlip:\n                return \"0:Exit  1:Flip  Click second angle point.  $\";\n            default:\n                throw new Error(\"Case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        for (const v of this.arrayedGeometry) {\n            for (const geo of v) {\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n            }\n        }\n    }\n    createClones() {\n        for (let i = 1; i < this.count; i++) {\n            const clones = [];\n            for (const geo of this.geometry) {\n                clones.push(geo.clone());\n            }\n            this.arrayedGeometry.push(clones);\n        }\n    }\n    setTransforms() {\n        const rads = this.angle * Math.PI / 180;\n        var theta;\n        if (this.useAngleBetween) {\n            theta = rads;\n        }\n        else {\n            theta = rads / (this.count - 1);\n        }\n        for (let i = 1; i < this.count; i++) {\n            const angle = theta * i;\n            const transform = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getRotationTransform)(this.axis, angle);\n            for (let j = 0; j < this.geometry.length; j++) {\n                this.arrayedGeometry[i - 1][j].setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.mul(transform, this.geometry[j].getModel()));\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvcG9sYXJBcnJheUNvbW1hbmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxRDtBQUNoQjtBQUdJO0FBQzZCO0FBQ2pDO0FBQ0E7QUFHckMsSUFBSyxzQkFPSjtBQVBELFdBQUssc0JBQXNCO0lBQ3pCLCtFQUFVO0lBQ1YsaUZBQVc7SUFDWCw2RUFBUztJQUNULHlFQUFPO0lBQ1AsdUdBQXNCO0lBQ3RCLHFHQUFxQjtBQUN2QixDQUFDLEVBUEksc0JBQXNCLEtBQXRCLHNCQUFzQixRQU8xQjtBQUVNLE1BQU0sa0JBQW1CLFNBQVEsNkNBQU87SUFlN0M7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSw2Q0FBTyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDdEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDeEIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7UUFDNUIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLElBQUksR0FBRyxzQkFBc0IsQ0FBQyxVQUFVLENBQUM7UUFFOUMsTUFBTSxRQUFRLEdBQWtCLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdEUsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUN2QixJQUFJLENBQUMsSUFB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QUM7U0FDbkM7SUFDSCxDQUFDO0lBRU8sYUFBYTtRQUNuQixNQUFNLElBQUksR0FBVyxJQUFJLENBQUMsS0FBTSxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO1FBQ2pELElBQUksS0FBYSxDQUFDO1FBQ2xCLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN4QixLQUFLLEdBQUcsSUFBSSxDQUFDO1NBQ2Q7YUFBTTtZQUNMLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ2xDO1FBRUQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDcEMsTUFBTSxLQUFLLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUN4QixNQUFNLFNBQVMsR0FBUyxpRUFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ2hFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDN0MsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLDZDQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUMzRjtTQUNGO0lBQ0gsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvcG9sYXJBcnJheUNvbW1hbmQudHM/NjJlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcmF5XCI7XG5pbXBvcnQgeyBhbmdsZUJldHdlZW4sIGdldFJvdGF0aW9uVHJhbnNmb3JtIH0gZnJvbSBcIi4uLy4uL3V0aWxzL21hdGhcIjtcbmltcG9ydCB7IENsaWNrZXIgfSBmcm9tIFwiLi4vY2xpY2tlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cblxuZW51bSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlIHtcbiAgRW50ZXJDb3VudCxcbiAgRW50ZXJDZW50ZXIsXG4gIEVudGVyQXhpcyxcbiAgT3B0aW9ucyxcbiAgRW50ZXJGaXJzdFBvaW50T3JBbmdsZSxcbiAgRW50ZXJGaW5hbFBvaW50T3JGbGlwLFxufVxuXG5leHBvcnQgY2xhc3MgUG9sbGFyQXJyYXlDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuICBwcml2YXRlIGNvdW50OiBudW1iZXIgfCBudWxsO1xuICBwcml2YXRlIGNlbnRlclBvaW50OiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSBheGlzOiBSYXkgfCBudWxsO1xuICBwcml2YXRlIGJhc2VQb2ludDogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgZmxpcHBlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBhbmdsZTogbnVtYmVyIHwgbnVsbDtcbiAgcHJpdmF0ZSBnZW9tZXRyeTogR2VvbWV0cnlbXTtcbiAgcHJpdmF0ZSBhcnJheWVkR2VvbWV0cnk6IEdlb21ldHJ5W11bXTtcbiAgcHJpdmF0ZSBtb2RlOiBQb2xsYXJBcnJheUNvbW1hbmRNb2RlO1xuICBwcml2YXRlIHVzZUFuZ2xlQmV0d2VlbjogYm9vbGVhbiB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5mbGlwcGVkID0gZmFsc2U7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgICB0aGlzLmNvdW50ID0gbnVsbDtcbiAgICB0aGlzLmJhc2VQb2ludCA9IG51bGw7XG4gICAgdGhpcy5jZW50ZXJQb2ludCA9IG51bGw7XG4gICAgdGhpcy5heGlzID0gbnVsbDtcbiAgICB0aGlzLnVzZUFuZ2xlQmV0d2VlbiA9IG51bGw7XG4gICAgdGhpcy5hbmdsZSA9IG51bGw7XG4gICAgdGhpcy5nZW9tZXRyeSA9IFtdO1xuICAgIHRoaXMuYXJyYXllZEdlb21ldHJ5ID0gW107XG4gICAgdGhpcy5tb2RlID0gUG9sbGFyQXJyYXlDb21tYW5kTW9kZS5FbnRlckNvdW50O1xuXG4gICAgY29uc3Qgc2VsZWN0ZWQ6IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3RlZC5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGdlbyBvZiBzZWxlY3RlZCkge1xuICAgICAgdGhpcy5nZW9tZXRyeS5wdXNoKGdlbyk7XG4gICAgfVxuXG4gIH1cblxuICBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGlucHV0ID09IFwiMFwiKSB7XG4gICAgICBmb3IgKGNvbnN0IHYgb2YgdGhpcy5hcnJheWVkR2VvbWV0cnkpIHtcbiAgICAgICAgZm9yIChjb25zdCBnZW8gb2Ygdikge1xuICAgICAgICAgIGdlby5kZWxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5kb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDb3VudDpcbiAgICAgICAgY29uc3QgY291bnQ6IG51bWJlciA9IHBhcnNlSW50KGlucHV0KTtcbiAgICAgICAgaWYgKCFpc05hTihjb3VudCkgJiYgY291bnQgPiAxKSB7XG4gICAgICAgICAgdGhpcy5jb3VudCA9IGNvdW50O1xuICAgICAgICAgIHRoaXMubW9kZSA9IFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDZW50ZXI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyQXhpczpcbiAgICAgICAgaWYgKGlucHV0ID09IFwiMVwiKSB7XG4gICAgICAgICAgdGhpcy5heGlzID0gbmV3IFJheSh0aGlzLmNlbnRlclBvaW50ISwgdmVjMy5jcmVhdGUoMCwgMCwgMSkpO1xuICAgICAgICAgIHRoaXMubW9kZSA9IFBvbGxhckFycmF5Q29tbWFuZE1vZGUuT3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUG9sbGFyQXJyYXlDb21tYW5kTW9kZS5PcHRpb25zOlxuICAgICAgICBpZiAoaW5wdXQgPT0gXCIxXCIpIHsgLy8gZnVsbCBjaXJjbGVcbiAgICAgICAgICB0aGlzLmFuZ2xlID0gMzYwICogKHRoaXMuY291bnQhIC0gMSkgLyB0aGlzLmNvdW50ITtcbiAgICAgICAgICB0aGlzLnVzZUFuZ2xlQmV0d2VlbiA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuY3JlYXRlQ2xvbmVzKCk7XG4gICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm1zKCk7XG4gICAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPT0gXCIyXCIpIHsgLy8gYW5nbGUgYmV0d2VlblxuICAgICAgICAgIHRoaXMudXNlQW5nbGVCZXR3ZWVuID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLm1vZGUgPSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyRmlyc3RQb2ludE9yQW5nbGU7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPT0gXCIzXCIpIHsgLy8gdG90YWwgYW5nbGVcbiAgICAgICAgICB0aGlzLnVzZUFuZ2xlQmV0d2VlbiA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMubW9kZSA9IFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJGaXJzdFBvaW50T3JBbmdsZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUG9sbGFyQXJyYXlDb21tYW5kTW9kZS5FbnRlckZpcnN0UG9pbnRPckFuZ2xlOlxuICAgICAgICBjb25zdCBhbmdsZTogbnVtYmVyID0gcGFyc2VGbG9hdChpbnB1dCk7XG4gICAgICAgIGlmICghaXNOYU4oYW5nbGUpKSB7XG4gICAgICAgICAgdGhpcy5hbmdsZSA9IGFuZ2xlO1xuICAgICAgICAgIHRoaXMuc2V0VHJhbnNmb3JtcygpO1xuICAgICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyRmluYWxQb2ludE9yRmxpcDpcbiAgICAgICAgaWYgKGlucHV0ID09IFwiMVwiKSB7XG4gICAgICAgICAgdGhpcy5mbGlwcGVkID0gIXRoaXMuZmxpcHBlZDtcbiAgICAgICAgICB0aGlzLmFuZ2xlISAtPSAzNjA7XG4gICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm1zKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVDbGlja1Jlc3VsdChpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbik6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDb3VudDpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJDZW50ZXI6XG4gICAgICAgIHRoaXMuY2VudGVyUG9pbnQgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMubW9kZSA9IFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJBeGlzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUG9sbGFyQXJyYXlDb21tYW5kTW9kZS5FbnRlckF4aXM6XG4gICAgICAgIGlmICghdmVjMy5lcXVhbHMoaW50ZXJzZWN0aW9uLnBvaW50LCB0aGlzLmNlbnRlclBvaW50ISkpIHtcbiAgICAgICAgICB0aGlzLmF4aXMgPSBuZXcgUmF5KHRoaXMuY2VudGVyUG9pbnQhLCB2ZWMzLnN1YihpbnRlcnNlY3Rpb24ucG9pbnQsIHRoaXMuY2VudGVyUG9pbnQhKSk7XG4gICAgICAgICAgdGhpcy5tb2RlID0gUG9sbGFyQXJyYXlDb21tYW5kTW9kZS5PcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLk9wdGlvbnM6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyRmlyc3RQb2ludE9yQW5nbGU6XG4gICAgICAgIHRoaXMuYmFzZVBvaW50ID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgICAgICB0aGlzLm1vZGUgPSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyRmluYWxQb2ludE9yRmxpcDtcbiAgICAgICAgdGhpcy5jcmVhdGVDbG9uZXMoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJGaW5hbFBvaW50T3JGbGlwOlxuICAgICAgICBjb25zdCB2MTogVmVjMyA9IHZlYzMuc3ViKHRoaXMuYmFzZVBvaW50ISwgdGhpcy5jZW50ZXJQb2ludCEpO1xuICAgICAgICBjb25zdCB2MjogVmVjMyA9IHZlYzMuc3ViKGludGVyc2VjdGlvbi5wb2ludCEsIHRoaXMuY2VudGVyUG9pbnQhKTtcbiAgICAgICAgdmFyIHRoZXRhOiBudW1iZXIgPSBhbmdsZUJldHdlZW4odjEsIHYyKSAvIE1hdGguUEkgKiAxODA7XG4gICAgICAgIGlmIChpc05hTih0aGV0YSkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodmVjMy5kb3QodjIsIHZlYzMuY3Jvc3ModjEsIHRoaXMuYXhpcyEuZ2V0RGlyZWN0aW9uKCkpKSA+IDApIHtcbiAgICAgICAgICB0aGV0YSA9IDM2MCAtIHRoZXRhO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZsaXBwZWQpIHRoZXRhIC09IDM2MDtcbiAgICAgICAgdGhpcy5hbmdsZSA9IHRoZXRhO1xuICAgICAgICB0aGlzLnNldFRyYW5zZm9ybXMoKTtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLmNsaWNrKCk7XG4gIH1cblxuICBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gICAgaWYgKHRoaXMubW9kZSA9PSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyRmluYWxQb2ludE9yRmxpcCkge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgY29uc3QgdjE6IFZlYzMgPSB2ZWMzLnN1Yih0aGlzLmJhc2VQb2ludCEsIHRoaXMuY2VudGVyUG9pbnQhKTtcbiAgICAgICAgY29uc3QgdjI6IFZlYzMgPSB2ZWMzLnN1Yihwb2ludCEsIHRoaXMuY2VudGVyUG9pbnQhKTtcbiAgICAgICAgdmFyIHRoZXRhOiBudW1iZXIgPSBhbmdsZUJldHdlZW4odjEsIHYyKSAvIE1hdGguUEkgKiAxODA7XG4gICAgICAgIGlmIChpc05hTih0aGV0YSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZlYzMuZG90KHYyLCB2ZWMzLmNyb3NzKHYxLCB0aGlzLmF4aXMhLmdldERpcmVjdGlvbigpKSkgPiAwKSB7XG4gICAgICAgICAgdGhldGEgPSAzNjAgLSB0aGV0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mbGlwcGVkKSB0aGV0YSAtPSAzNjA7XG4gICAgICAgIHRoaXMuYW5nbGUgPSB0aGV0YTtcbiAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm1zKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgUG9sbGFyQXJyYXlDb21tYW5kTW9kZS5FbnRlckNvdW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIEVudGVyIGNvdW50LiAgJFwiO1xuICAgICAgY2FzZSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyQ2VudGVyOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGNlbnRlciBwb2ludC4gICRcIjtcbiAgICAgIGNhc2UgUG9sbGFyQXJyYXlDb21tYW5kTW9kZS5FbnRlckF4aXM6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgMTpVc2UgWi1BeGlzICBDbGljayBheGlzIHBvaW50LiAgJFwiXG4gICAgICBjYXNlIFBvbGxhckFycmF5Q29tbWFuZE1vZGUuT3B0aW9uczpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICAxOkZ1bGwgQ2lyY2xlICAyOkFuZ2xlIEJldHdlZW4gIDM6VG90YWwgQW5nbGUuICBTZWxlY3QgYW4gb3B0aW9uLiAgJFwiO1xuICAgICAgY2FzZSBQb2xsYXJBcnJheUNvbW1hbmRNb2RlLkVudGVyRmlyc3RQb2ludE9yQW5nbGU6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgZmlyc3QgcG9pbnQgb3IgZW50ZXIgYW5nbGUuICAkXCI7XG4gICAgICBjYXNlIFBvbGxhckFycmF5Q29tbWFuZE1vZGUuRW50ZXJGaW5hbFBvaW50T3JGbGlwOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIDE6RmxpcCAgQ2xpY2sgc2Vjb25kIGFuZ2xlIHBvaW50LiAgJFwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgIGZvciAoY29uc3QgdiBvZiB0aGlzLmFycmF5ZWRHZW9tZXRyeSkge1xuICAgICAgZm9yIChjb25zdCBnZW8gb2Ygdikge1xuICAgICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KGdlbyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDbG9uZXMoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmNvdW50ITsgaSsrKSB7XG4gICAgICBjb25zdCBjbG9uZXM6IEdlb21ldHJ5W10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuZ2VvbWV0cnkpIHtcbiAgICAgICAgY2xvbmVzLnB1c2goZ2VvLmNsb25lKCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5hcnJheWVkR2VvbWV0cnkucHVzaChjbG9uZXMpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0VHJhbnNmb3JtcygpOiB2b2lkIHtcbiAgICBjb25zdCByYWRzOiBudW1iZXIgPSB0aGlzLmFuZ2xlISAqIE1hdGguUEkgLyAxODA7XG4gICAgdmFyIHRoZXRhOiBudW1iZXI7XG4gICAgaWYgKHRoaXMudXNlQW5nbGVCZXR3ZWVuKSB7XG4gICAgICB0aGV0YSA9IHJhZHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoZXRhID0gcmFkcyAvICh0aGlzLmNvdW50ISAtIDEpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5jb3VudCE7IGkrKykge1xuICAgICAgY29uc3QgYW5nbGUgPSB0aGV0YSAqIGk7XG4gICAgICBjb25zdCB0cmFuc2Zvcm06IE1hdDQgPSBnZXRSb3RhdGlvblRyYW5zZm9ybSh0aGlzLmF4aXMhLCBhbmdsZSk7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZ2VvbWV0cnkubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdGhpcy5hcnJheWVkR2VvbWV0cnlbaSAtIDFdW2pdLnNldE1vZGVsKG1hdDQubXVsKHRyYW5zZm9ybSwgdGhpcy5nZW9tZXRyeVtqXS5nZXRNb2RlbCgpKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/polarArrayCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/revolveCommand.ts":
/*!*************************************************!*\
  !*** ./src/commands/commands/revolveCommand.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RevolveCommand: () => (/* binding */ RevolveCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_revolve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/revolve */ \"./src/geometry/nurbs/revolve.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\n\nvar RevolveCommandMode;\n(function (RevolveCommandMode) {\n    RevolveCommandMode[RevolveCommandMode[\"SelectCurves\"] = 0] = \"SelectCurves\";\n    RevolveCommandMode[RevolveCommandMode[\"FirstAxisPoint\"] = 1] = \"FirstAxisPoint\";\n    RevolveCommandMode[RevolveCommandMode[\"SecondAxisPoint\"] = 2] = \"SecondAxisPoint\";\n    RevolveCommandMode[RevolveCommandMode[\"FirstAnglePoint\"] = 3] = \"FirstAnglePoint\";\n    RevolveCommandMode[RevolveCommandMode[\"SecondAnglePoint\"] = 4] = \"SecondAnglePoint\";\n})(RevolveCommandMode || (RevolveCommandMode = {}));\nclass RevolveCommand extends _command__WEBPACK_IMPORTED_MODULE_5__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.flipped = false;\n        this.mode = RevolveCommandMode.SelectCurves;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_4__.Clicker();\n        this.curves = [];\n        this.temp = null;\n        this.axis = null;\n        this.surfaces = [];\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().reset();\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            this.done();\n        }\n        switch (this.mode) {\n            case RevolveCommandMode.SelectCurves:\n                if (input == \"\") {\n                    if (this.curves.length == 0)\n                        this.done();\n                    else\n                        this.mode = RevolveCommandMode.FirstAxisPoint;\n                }\n                break;\n            case RevolveCommandMode.FirstAxisPoint:\n                break;\n            case RevolveCommandMode.SecondAxisPoint:\n                break;\n            case RevolveCommandMode.FirstAnglePoint:\n                if (input == \"1\") {\n                    this.fullRevolution();\n                }\n                break;\n            case RevolveCommandMode.SecondAnglePoint:\n                if (input == \"1\") {\n                    this.fullRevolution();\n                }\n                if (input == \"2\") {\n                    this.flip();\n                }\n                break;\n            default:\n                throw new Error(\"case not handled\");\n        }\n    }\n    handleClickResult(intersection) {\n        console.log(intersection);\n        switch (this.mode) {\n            case RevolveCommandMode.SelectCurves:\n                let geometry = intersection.geometry;\n                while (geometry.getTypeName() != \"Curve\" && geometry.getParent()) {\n                    geometry = geometry.getParent();\n                }\n                if (geometry.getTypeName() == \"Curve\") {\n                    this.curves.push(geometry);\n                    geometry.select();\n                }\n                break;\n            case RevolveCommandMode.FirstAxisPoint:\n                console.log(\"here\");\n                this.temp = intersection.point;\n                this.mode = RevolveCommandMode.SecondAxisPoint;\n                break;\n            case RevolveCommandMode.SecondAxisPoint:\n                if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.equals(this.temp, intersection.point))\n                    break;\n                this.axis = new _geometry_ray__WEBPACK_IMPORTED_MODULE_2__.Ray(this.temp, wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(this.temp, intersection.point));\n                this.mode = RevolveCommandMode.FirstAnglePoint;\n                break;\n            case RevolveCommandMode.FirstAnglePoint:\n                this.temp = intersection.point;\n                this.mode = RevolveCommandMode.SecondAnglePoint;\n                break;\n            case RevolveCommandMode.SecondAnglePoint:\n                if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.equals(this.temp, intersection.point))\n                    break;\n                for (const surface of this.surfaces)\n                    surface.delete();\n                const origin1 = this.axis.closestPointToPoint(this.temp);\n                const origin2 = this.axis.closestPointToPoint(intersection.point);\n                const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(this.temp, origin1);\n                const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(intersection.point, origin2);\n                var theta = (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.angleBetween)(v1, v2);\n                if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.dot(v2, wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.cross(v1, this.axis.getDirection())) > 0) {\n                    theta = 2 * Math.PI - theta;\n                }\n                if (this.flipped)\n                    theta = Math.PI * 2 - theta;\n                if (theta === 0 || isNaN(theta))\n                    return;\n                for (const curve of this.curves) {\n                    const revolution = (0,_geometry_nurbs_revolve__WEBPACK_IMPORTED_MODULE_1__.revolve)(this.axis, curve, theta);\n                    if (this.flipped) {\n                        const rotation = (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.getRotationTransform)(this.axis, Math.PI * 2 - theta);\n                        revolution.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.mul(rotation, revolution.getModel()));\n                    }\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(revolution);\n                }\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not handled\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        switch (this.mode) {\n            case RevolveCommandMode.SelectCurves:\n                this.clicker.click([\"curve\"]);\n                break;\n            default:\n                this.clicker.click();\n        }\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        const point = this.clicker.getPoint();\n        if (point) {\n            if (this.mode == RevolveCommandMode.SecondAnglePoint) {\n                if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.equals(this.temp, point))\n                    return;\n                for (const surface of this.surfaces)\n                    surface.delete();\n                this.surfaces = [];\n                const origin1 = this.axis.closestPointToPoint(this.temp);\n                const origin2 = this.axis.closestPointToPoint(point);\n                const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(this.temp, origin1);\n                const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(point, origin2);\n                var theta = (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.angleBetween)(v1, v2);\n                if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.dot(v2, wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.cross(v1, this.axis.getDirection())) > 0) {\n                    theta = 2 * Math.PI - theta;\n                }\n                if (this.flipped)\n                    theta = Math.PI * 2 - theta;\n                if (isNaN(theta) || theta === 0)\n                    return;\n                for (const curve of this.curves) {\n                    const revolution = (0,_geometry_nurbs_revolve__WEBPACK_IMPORTED_MODULE_1__.revolve)(this.axis, curve, theta);\n                    if (this.flipped) {\n                        const rotation = (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.getRotationTransform)(this.axis, Math.PI * 2 - theta);\n                        revolution.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.mul(rotation, revolution.getModel()));\n                    }\n                    this.surfaces.push(revolution);\n                }\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case RevolveCommandMode.SelectCurves:\n                return \"0:Exit  Select curves.  $\";\n            case RevolveCommandMode.FirstAxisPoint:\n                return \"0:Exit  Click or type first axis point.  $\";\n            case RevolveCommandMode.SecondAxisPoint:\n                return \"0:Exit  Click or type second axis point.  $\";\n            case RevolveCommandMode.FirstAnglePoint:\n                return \"0:Exit  1:Full  Click or type first angle point.  $\";\n            case RevolveCommandMode.SecondAnglePoint:\n                return \"0:Exit  1:Full  2:Flip  Click or type second angle point.  $\";\n            default:\n                throw new Error(\"case not handled\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.clicker.destroy();\n        for (const curve of this.curves) {\n            curve.unSelect();\n        }\n        this.finished = true;\n    }\n    fullRevolution() {\n        for (const surface of this.surfaces) {\n            surface.delete();\n        }\n        for (const curve of this.curves) {\n            const revolution = (0,_geometry_nurbs_revolve__WEBPACK_IMPORTED_MODULE_1__.revolve)(this.axis, curve, Math.PI * 2);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(revolution);\n        }\n        this.done();\n    }\n    flip() {\n        this.flipped = !this.flipped;\n        this.handleMouseMove();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvcmV2b2x2ZUNvbW1hbmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDaEI7QUFHa0I7QUFFZDtBQUM2QjtBQUNqQztBQUNBO0FBRXJDLElBQUssa0JBTUo7QUFORCxXQUFLLGtCQUFrQjtJQUNyQiwyRUFBWTtJQUNaLCtFQUFjO0lBQ2QsaUZBQWU7SUFDZixpRkFBZTtJQUNmLG1GQUFnQjtBQUNsQixDQUFDLEVBTkksa0JBQWtCLEtBQWxCLGtCQUFrQixRQU10QjtBQUVNLE1BQU0sY0FBZSxTQUFRLDZDQUFPO0lBV3pDO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLGtCQUFrQixDQUFDLFlBQVksQ0FBQztRQUM1QyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksNkNBQU8sRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ25CLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVlLGlCQUFpQixDQUFDLEtBQWE7UUFDN0MsSUFBSSxLQUFLLElBQUksR0FBRyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNiO1FBQ0QsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssa0JBQWtCLENBQUMsWUFBWTtnQkFDbEMsSUFBSSxLQUFLLElBQUksRUFBRSxFQUFFO29CQUNmLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUks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QUU7WUFDbkMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ2xCO1FBQ0QsS0FBSyxNQUFNLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQy9CLE1BQU0sVUFBVSxHQUFZLGdFQUFPLENBQUMsSUFBSSxDQUFDLElBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNwRSwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUM3QztRQUNELElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFFTyxJQUFJO1FBQ1YsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDN0IsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3pCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL3Jldm9sdmVDb21tYW5kLnRzP2I2NTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgbWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9jdXJ2ZVwiO1xuaW1wb3J0IHsgcmV2b2x2ZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9yZXZvbHZlXCI7XG5pbXBvcnQgeyBTdXJmYWNlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL3N1cmZhY2VcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yYXlcIjtcbmltcG9ydCB7IGFuZ2xlQmV0d2VlbiwgZ2V0Um90YXRpb25UcmFuc2Zvcm0gfSBmcm9tIFwiLi4vLi4vdXRpbHMvbWF0aFwiO1xuaW1wb3J0IHsgQ2xpY2tlciB9IGZyb20gXCIuLi9jbGlja2VyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRcIjtcblxuZW51bSBSZXZvbHZlQ29tbWFuZE1vZGUge1xuICBTZWxlY3RDdXJ2ZXMsXG4gIEZpcnN0QXhpc1BvaW50LFxuICBTZWNvbmRBeGlzUG9pbnQsXG4gIEZpcnN0QW5nbGVQb2ludCxcbiAgU2Vjb25kQW5nbGVQb2ludCxcbn1cblxuZXhwb3J0IGNsYXNzIFJldm9sdmVDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBtb2RlOiBSZXZvbHZlQ29tbWFuZE1vZGU7XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBjdXJ2ZXM6IEN1cnZlW107XG4gIHByaXZhdGUgdGVtcDogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgYXhpczogUmF5IHwgbnVsbDtcbiAgcHJpdmF0ZSBmbGlwcGVkOiBib29sZWFuO1xuICBwcml2YXRlIHN1cmZhY2VzOiBTdXJmYWNlW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5mbGlwcGVkID0gZmFsc2U7XG4gICAgdGhpcy5tb2RlID0gUmV2b2x2ZUNvbW1hbmRNb2RlLlNlbGVjdEN1cnZlcztcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMuY3VydmVzID0gW107XG4gICAgdGhpcy50ZW1wID0gbnVsbDtcbiAgICB0aGlzLmF4aXMgPSBudWxsO1xuICAgIHRoaXMuc3VyZmFjZXMgPSBbXTtcbiAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLnJlc2V0KCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChpbnB1dCA9PSBcIjBcIikge1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFJldm9sdmVDb21tYW5kTW9kZS5TZWxlY3RDdXJ2ZXM6XG4gICAgICAgIGlmIChpbnB1dCA9PSBcIlwiKSB7XG4gICAgICAgICAgaWYgKHRoaXMuY3VydmVzLmxlbmd0aCA9PSAwKSB0aGlzLmRvbmUoKTtcbiAgICAgICAgICBlbHNlIHRoaXMubW9kZSA9IFJldm9sdmVDb21tYW5kTW9kZS5GaXJzdEF4aXNQb2ludDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUmV2b2x2ZUNvbW1hbmRNb2RlLkZpcnN0QXhpc1BvaW50OlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUmV2b2x2ZUNvbW1hbmRNb2RlLlNlY29uZEF4aXNQb2ludDpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJldm9sdmVDb21tYW5kTW9kZS5GaXJzdEFuZ2xlUG9pbnQ6XG4gICAgICAgIGlmIChpbnB1dCA9PSBcIjFcIikge1xuICAgICAgICAgIHRoaXMuZnVsbFJldm9sdXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUmV2b2x2ZUNvbW1hbmRNb2RlLlNlY29uZEFuZ2xlUG9pbnQ6XG4gICAgICAgIGlmIChpbnB1dCA9PSBcIjFcIikge1xuICAgICAgICAgIHRoaXMuZnVsbFJldm9sdXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgPT0gXCIyXCIpIHtcbiAgICAgICAgICB0aGlzLmZsaXAoKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGhhbmRsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coaW50ZXJzZWN0aW9uKTtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBSZXZvbHZlQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmVzOlxuICAgICAgICBsZXQgZ2VvbWV0cnkgPSBpbnRlcnNlY3Rpb24uZ2VvbWV0cnkhO1xuICAgICAgICB3aGlsZSAoZ2VvbWV0cnkuZ2V0VHlwZU5hbWUoKSAhPSBcIkN1cnZlXCIgJiYgZ2VvbWV0cnkuZ2V0UGFyZW50KCkpIHtcbiAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmdldFBhcmVudCgpITtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2VvbWV0cnkuZ2V0VHlwZU5hbWUoKSA9PSBcIkN1cnZlXCIpIHtcbiAgICAgICAgICB0aGlzLmN1cnZlcy5wdXNoKDxDdXJ2ZT5nZW9tZXRyeSk7XG4gICAgICAgICAgZ2VvbWV0cnkuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJldm9sdmVDb21tYW5kTW9kZS5GaXJzdEF4aXNQb2ludDpcbiAgICAgICAgY29uc29sZS5sb2coXCJoZXJlXCIpO1xuICAgICAgICB0aGlzLnRlbXAgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMubW9kZSA9IFJldm9sdmVDb21tYW5kTW9kZS5TZWNvbmRBeGlzUG9pbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSZXZvbHZlQ29tbWFuZE1vZGUuU2Vjb25kQXhpc1BvaW50OlxuICAgICAgICBpZiAodmVjMy5lcXVhbHModGhpcy50ZW1wISwgaW50ZXJzZWN0aW9uLnBvaW50KSkgYnJlYWs7XG4gICAgICAgIHRoaXMuYXhpcyA9IG5ldyBSYXkodGhpcy50ZW1wISwgdmVjMy5zdWIodGhpcy50ZW1wISwgaW50ZXJzZWN0aW9uLnBvaW50KSk7XG4gICAgICAgIHRoaXMubW9kZSA9IFJldm9sdmVDb21tYW5kTW9kZS5GaXJzdEFuZ2xlUG9pbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSZXZvbHZlQ29tbWFuZE1vZGUuRmlyc3RBbmdsZVBvaW50OlxuICAgICAgICB0aGlzLnRlbXAgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMubW9kZSA9IFJldm9sdmVDb21tYW5kTW9kZS5TZWNvbmRBbmdsZVBvaW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUmV2b2x2ZUNvbW1hbmRNb2RlLlNlY29uZEFuZ2xlUG9pbnQ6XG4gICAgICAgIGlmICh2ZWMzLmVxdWFscyh0aGlzLnRlbXAhLCBpbnRlcnNlY3Rpb24ucG9pbnQpKSBicmVhaztcbiAgICAgICAgZm9yIChjb25zdCBzdXJmYWNlIG9mIHRoaXMuc3VyZmFjZXMpIHN1cmZhY2UuZGVsZXRlKCk7XG5cbiAgICAgICAgY29uc3Qgb3JpZ2luMTogVmVjMyA9IHRoaXMuYXhpcyEuY2xvc2VzdFBvaW50VG9Qb2ludCh0aGlzLnRlbXAhKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luMjogVmVjMyA9IHRoaXMuYXhpcyEuY2xvc2VzdFBvaW50VG9Qb2ludChpbnRlcnNlY3Rpb24ucG9pbnQpO1xuICAgICAgICBjb25zdCB2MSA9IHZlYzMuc3ViKHRoaXMudGVtcCEsIG9yaWdpbjEpO1xuICAgICAgICBjb25zdCB2MiA9IHZlYzMuc3ViKGludGVyc2VjdGlvbi5wb2ludCwgb3JpZ2luMik7XG4gICAgICAgIHZhciB0aGV0YTogbnVtYmVyID0gYW5nbGVCZXR3ZWVuKHYxLCB2Mik7XG5cbiAgICAgICAgaWYgKHZlYzMuZG90KHYyLCB2ZWMzLmNyb3NzKHYxLCB0aGlzLmF4aXMhLmdldERpcmVjdGlvbigpKSkgPiAwKSB7XG4gICAgICAgICAgdGhldGEgPSAyICogTWF0aC5QSSAtIHRoZXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZmxpcHBlZCkgdGhldGEgPSBNYXRoLlBJICogMiAtIHRoZXRhO1xuXG4gICAgICAgIGlmICh0aGV0YSA9PT0gMCB8fCBpc05hTih0aGV0YSkpIHJldHVybjtcblxuICAgICAgICBmb3IgKGNvbnN0IGN1cnZlIG9mIHRoaXMuY3VydmVzKSB7XG4gICAgICAgICAgY29uc3QgcmV2b2x1dGlvbjogU3VyZmFjZSA9IHJldm9sdmUodGhpcy5heGlzISwgY3VydmUsIHRoZXRhKTtcbiAgICAgICAgICBpZiAodGhpcy5mbGlwcGVkKSB7XG4gICAgICAgICAgICBjb25zdCByb3RhdGlvbjogTWF0NCA9IGdldFJvdGF0aW9uVHJhbnNmb3JtKHRoaXMuYXhpcyEsIE1hdGguUEkgKiAyIC0gdGhldGEpO1xuICAgICAgICAgICAgcmV2b2x1dGlvbi5zZXRNb2RlbChtYXQ0Lm11bChyb3RhdGlvbiwgcmV2b2x1dGlvbi5nZXRNb2RlbCgpKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkocmV2b2x1dGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBoYW5kbGVkXCIpO1xuICAgIH1cbiAgICB0aGlzLmNsaWNrZXIucmVzZXQoKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBSZXZvbHZlQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmVzOlxuICAgICAgICB0aGlzLmNsaWNrZXIuY2xpY2soW1wiY3VydmVcIl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuY2xpY2tlci5jbGljaygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgaWYgKHBvaW50KSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09IFJldm9sdmVDb21tYW5kTW9kZS5TZWNvbmRBbmdsZVBvaW50KSB7XG5cbiAgICAgICAgaWYgKHZlYzMuZXF1YWxzKHRoaXMudGVtcCEsIHBvaW50KSkgcmV0dXJuO1xuXG4gICAgICAgIGZvciAoY29uc3Qgc3VyZmFjZSBvZiB0aGlzLnN1cmZhY2VzKSBzdXJmYWNlLmRlbGV0ZSgpO1xuICAgICAgICB0aGlzLnN1cmZhY2VzID0gW107XG5cbiAgICAgICAgY29uc3Qgb3JpZ2luMTogVmVjMyA9IHRoaXMuYXhpcyEuY2xvc2VzdFBvaW50VG9Qb2ludCh0aGlzLnRlbXAhKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luMjogVmVjMyA9IHRoaXMuYXhpcyEuY2xvc2VzdFBvaW50VG9Qb2ludChwb2ludCk7XG4gICAgICAgIGNvbnN0IHYxID0gdmVjMy5zdWIodGhpcy50ZW1wISwgb3JpZ2luMSk7XG4gICAgICAgIGNvbnN0IHYyID0gdmVjMy5zdWIocG9pbnQsIG9yaWdpbjIpO1xuICAgICAgICB2YXIgdGhldGE6IG51bWJlciA9IGFuZ2xlQmV0d2Vlbih2MSwgdjIpO1xuXG4gICAgICAgIGlmICh2ZWMzLmRvdCh2MiwgdmVjMy5jcm9zcyh2MSwgdGhpcy5heGlzIS5nZXREaXJlY3Rpb24oKSkpID4gMCkge1xuICAgICAgICAgIHRoZXRhID0gMiAqIE1hdGguUEkgLSB0aGV0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmZsaXBwZWQpIHRoZXRhID0gTWF0aC5QSSAqIDIgLSB0aGV0YTtcblxuICAgICAgICBpZiAoaXNOYU4odGhldGEpIHx8IHRoZXRhID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgZm9yIChjb25zdCBjdXJ2ZSBvZiB0aGlzLmN1cnZlcykge1xuICAgICAgICAgIGNvbnN0IHJldm9sdXRpb246IFN1cmZhY2UgPSByZXZvbHZlKHRoaXMuYXhpcyEsIGN1cnZlLCB0aGV0YSk7XG4gICAgICAgICAgaWYgKHRoaXMuZmxpcHBlZCkge1xuICAgICAgICAgICAgY29uc3Qgcm90YXRpb246IE1hdDQgPSBnZXRSb3RhdGlvblRyYW5zZm9ybSh0aGlzLmF4aXMhLCBNYXRoLlBJICogMiAtIHRoZXRhKTtcbiAgICAgICAgICAgIHJldm9sdXRpb24uc2V0TW9kZWwobWF0NC5tdWwocm90YXRpb24sIHJldm9sdXRpb24uZ2V0TW9kZWwoKSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnN1cmZhY2VzLnB1c2gocmV2b2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgUmV2b2x2ZUNvbW1hbmRNb2RlLlNlbGVjdEN1cnZlczpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3QgY3VydmVzLiAgJFwiO1xuICAgICAgY2FzZSBSZXZvbHZlQ29tbWFuZE1vZGUuRmlyc3RBeGlzUG9pbnQ6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgb3IgdHlwZSBmaXJzdCBheGlzIHBvaW50LiAgJFwiO1xuICAgICAgY2FzZSBSZXZvbHZlQ29tbWFuZE1vZGUuU2Vjb25kQXhpc1BvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIG9yIHR5cGUgc2Vjb25kIGF4aXMgcG9pbnQuICAkXCI7XG4gICAgICBjYXNlIFJldm9sdmVDb21tYW5kTW9kZS5GaXJzdEFuZ2xlUG9pbnQ6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgMTpGdWxsICBDbGljayBvciB0eXBlIGZpcnN0IGFuZ2xlIHBvaW50LiAgJFwiO1xuICAgICAgY2FzZSBSZXZvbHZlQ29tbWFuZE1vZGUuU2Vjb25kQW5nbGVQb2ludDpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICAxOkZ1bGwgIDI6RmxpcCAgQ2xpY2sgb3IgdHlwZSBzZWNvbmQgYW5nbGUgcG9pbnQuICAkXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBoYW5kbGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBkb25lKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5kZXN0cm95KCk7XG4gICAgZm9yIChjb25zdCBjdXJ2ZSBvZiB0aGlzLmN1cnZlcykge1xuICAgICAgY3VydmUudW5TZWxlY3QoKTtcbiAgICB9XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIGZ1bGxSZXZvbHV0aW9uKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3Qgc3VyZmFjZSBvZiB0aGlzLnN1cmZhY2VzKSB7XG4gICAgICBzdXJmYWNlLmRlbGV0ZSgpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGN1cnZlIG9mIHRoaXMuY3VydmVzKSB7XG4gICAgICBjb25zdCByZXZvbHV0aW9uOiBTdXJmYWNlID0gcmV2b2x2ZSh0aGlzLmF4aXMhLCBjdXJ2ZSwgTWF0aC5QSSAqIDIpO1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeShyZXZvbHV0aW9uKTtcbiAgICB9XG4gICAgdGhpcy5kb25lKCk7XG4gIH1cblxuICBwcml2YXRlIGZsaXAoKTogdm9pZCB7XG4gICAgdGhpcy5mbGlwcGVkID0gIXRoaXMuZmxpcHBlZDtcbiAgICB0aGlzLmhhbmRsZU1vdXNlTW92ZSgpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/revolveCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/rotateCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/rotateCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RotateCommand: () => (/* binding */ RotateCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\nvar RotateCommandMode;\n(function (RotateCommandMode) {\n    RotateCommandMode[RotateCommandMode[\"SelectCenterPoint\"] = 0] = \"SelectCenterPoint\";\n    RotateCommandMode[RotateCommandMode[\"SelectAxisPoint\"] = 1] = \"SelectAxisPoint\";\n    RotateCommandMode[RotateCommandMode[\"SelectFromPointOrAngle\"] = 2] = \"SelectFromPointOrAngle\";\n    RotateCommandMode[RotateCommandMode[\"SelectToPoint\"] = 3] = \"SelectToPoint\";\n})(RotateCommandMode || (RotateCommandMode = {}));\nclass RotateCommand extends _command__WEBPACK_IMPORTED_MODULE_4__.Command {\n    constructor() {\n        super();\n        this.mode = RotateCommandMode.SelectCenterPoint;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n        this.center = null;\n        this.axis = null;\n        this.fromPoint = null;\n        this.finished = false;\n        this.clones = [];\n        const selected = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selected.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geo of selected) {\n            const clone = geo.clone();\n            clone.delete(); // an invisible clone just for intersecting with.\n            this.clones.push(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(geo);\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.identity());\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n            this.done();\n            return;\n        }\n        if (this.mode === RotateCommandMode.SelectFromPointOrAngle) {\n            const val = parseFloat(input);\n            if (!isNaN(val)) {\n                const rotationMatrix = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getRotationTransform)(this.axis, val / 180 * Math.PI);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(rotationMatrix);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n                this.done();\n            }\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case RotateCommandMode.SelectCenterPoint:\n                this.center = intersection.point;\n                this.mode = RotateCommandMode.SelectAxisPoint;\n                break;\n            case RotateCommandMode.SelectAxisPoint:\n                this.axis = new _geometry_ray__WEBPACK_IMPORTED_MODULE_1__.Ray(this.center, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(intersection.point, this.center));\n                this.mode = RotateCommandMode.SelectFromPointOrAngle;\n                break;\n            case RotateCommandMode.SelectFromPointOrAngle:\n                if (this.axis.closestDistanceToPoint(intersection.point) > 0.0001) {\n                    this.fromPoint = intersection.point;\n                    this.mode = RotateCommandMode.SelectToPoint;\n                }\n                break;\n            case RotateCommandMode.SelectToPoint:\n                if (this.axis.closestDistanceToPoint(intersection.point) > 0.0001) {\n                    if (this.updateRotation(intersection.point)) {\n                        this.done();\n                    }\n                }\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    updateRotation(toPoint) {\n        const origin1 = this.axis.closestPointToPoint(this.center);\n        const origin2 = this.axis.closestPointToPoint(toPoint);\n        const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.fromPoint, origin1);\n        const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(toPoint, origin2);\n        var theta = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.angleBetween)(v1, v2);\n        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.dot(v2, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.cross(v1, this.axis.getDirection())) > 0) {\n            theta = 2 * Math.PI - theta;\n        }\n        if (isNaN(theta) || theta === 0)\n            return false;\n        const rotation = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getRotationTransform)(this.axis, theta);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(rotation);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n        return true;\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode === RotateCommandMode.SelectToPoint) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                this.updateRotation(point);\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case RotateCommandMode.SelectCenterPoint:\n                return \"0:Exit  Click center point.  $\";\n            case RotateCommandMode.SelectAxisPoint:\n                return \"0:Exit  Click axis point.  $\";\n            case RotateCommandMode.SelectFromPointOrAngle:\n                return \"0:Exit  Select start point of rotation or enter angle.  $\";\n            case RotateCommandMode.SelectToPoint:\n                return \"0:Exit  Select point to rotate to.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        for (const geo of selection) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n        }\n        for (const clone of this.clones) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(clone);\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().transformSelected();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvcm90YXRlQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBQ2hCO0FBSUk7QUFDNkI7QUFDakM7QUFDQTtBQUdyQyxJQUFLLGlCQUtKO0FBTEQsV0FBSyxpQkFBaUI7SUFDcEIsbUZBQWlCO0lBQ2pCLCtFQUFlO0lBQ2YsNkZBQXNCO0lBQ3RCLDJFQUFhO0FBQ2YsQ0FBQyxFQUxJLGlCQUFpQixLQUFqQixpQkFBaUIsUUFLckI7QUFFTSxNQUFNLGFBQWMsU0FBUSw2Q0FBTztJQVV4QztRQUNFLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQztRQUNoRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksNkNBQU8sRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ25CLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBR2pCLE1BQU0sUUFBUSxHQUFrQiwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RFLElBQUksUUFBUSxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUU7WUFDdkIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ1osT0FBTztTQUNSO1FBRUQsS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUU7WUFDMUIsTUFBTSxLQUFLLEdBQWEsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3BDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLGlEQUFpRDtZQUNqRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN4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QUFpQixFQUFFLENBQUM7UUFDM0MsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ3pDLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL3JvdGF0ZUNvbW1hbmQudHM/Mjk0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wbGFuZVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3JheVwiO1xuaW1wb3J0IHsgYW5nbGVCZXR3ZWVuLCBnZXRSb3RhdGlvblRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5cbmVudW0gUm90YXRlQ29tbWFuZE1vZGUge1xuICBTZWxlY3RDZW50ZXJQb2ludCxcbiAgU2VsZWN0QXhpc1BvaW50LFxuICBTZWxlY3RGcm9tUG9pbnRPckFuZ2xlLFxuICBTZWxlY3RUb1BvaW50LFxufVxuXG5leHBvcnQgY2xhc3MgUm90YXRlQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgbW9kZTogUm90YXRlQ29tbWFuZE1vZGU7XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBjZW50ZXI6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIGF4aXM6IFJheSB8IG51bGw7XG4gIHByaXZhdGUgZnJvbVBvaW50OiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjbG9uZXM6IEdlb21ldHJ5W107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm1vZGUgPSBSb3RhdGVDb21tYW5kTW9kZS5TZWxlY3RDZW50ZXJQb2ludDtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMuY2VudGVyID0gbnVsbDtcbiAgICB0aGlzLmF4aXMgPSBudWxsO1xuICAgIHRoaXMuZnJvbVBvaW50ID0gbnVsbDtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5jbG9uZXMgPSBbXTtcblxuXG4gICAgY29uc3Qgc2VsZWN0ZWQ6IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3RlZC5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGdlbyBvZiBzZWxlY3RlZCkge1xuICAgICAgY29uc3QgY2xvbmU6IEdlb21ldHJ5ID0gZ2VvLmNsb25lKCk7XG4gICAgICBjbG9uZS5kZWxldGUoKTsgLy8gYW4gaW52aXNpYmxlIGNsb25lIGp1c3QgZm9yIGludGVyc2VjdGluZyB3aXRoLlxuICAgICAgdGhpcy5jbG9uZXMucHVzaChjbG9uZSk7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KGNsb25lKTtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlR2VvbWV0cnkoZ2VvKTtcbiAgICB9XG5cbiAgfVxuXG4gIGhhbmRsZUlucHV0U3RyaW5nKGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaW5wdXQgPT0gXCIwXCIpIHtcbiAgICAgIElOU1RBTkNFLmdldE1vdmVyKCkuc2V0VHJhbnNmb3JtKG1hdDQuaWRlbnRpdHkoKSk7XG4gICAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLm9uU2VsZWN0aW9uTW92ZWQoKTtcbiAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RlID09PSBSb3RhdGVDb21tYW5kTW9kZS5TZWxlY3RGcm9tUG9pbnRPckFuZ2xlKSB7XG4gICAgICBjb25zdCB2YWw6IG51bWJlciA9IHBhcnNlRmxvYXQoaW5wdXQpO1xuICAgICAgaWYgKCFpc05hTih2YWwpKSB7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4OiBNYXQ0ID0gZ2V0Um90YXRpb25UcmFuc2Zvcm0odGhpcy5heGlzISwgdmFsIC8gMTgwICogTWF0aC5QSSk7XG4gICAgICAgIElOU1RBTkNFLmdldE1vdmVyKCkuc2V0VHJhbnNmb3JtKHJvdGF0aW9uTWF0cml4KTtcbiAgICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5vblNlbGVjdGlvbk1vdmVkKCk7XG4gICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgUm90YXRlQ29tbWFuZE1vZGUuU2VsZWN0Q2VudGVyUG9pbnQ6XG4gICAgICAgIHRoaXMuY2VudGVyID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgICAgICB0aGlzLm1vZGUgPSBSb3RhdGVDb21tYW5kTW9kZS5TZWxlY3RBeGlzUG9pbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBSb3RhdGVDb21tYW5kTW9kZS5TZWxlY3RBeGlzUG9pbnQ6XG4gICAgICAgIHRoaXMuYXhpcyA9IG5ldyBSYXkodGhpcy5jZW50ZXIhLCB2ZWMzLnN1YihpbnRlcnNlY3Rpb24ucG9pbnQsIHRoaXMuY2VudGVyISkpO1xuICAgICAgICB0aGlzLm1vZGUgPSBSb3RhdGVDb21tYW5kTW9kZS5TZWxlY3RGcm9tUG9pbnRPckFuZ2xlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUm90YXRlQ29tbWFuZE1vZGUuU2VsZWN0RnJvbVBvaW50T3JBbmdsZTpcbiAgICAgICAgaWYgKHRoaXMuYXhpcyEuY2xvc2VzdERpc3RhbmNlVG9Qb2ludChpbnRlcnNlY3Rpb24ucG9pbnQpID4gMC4wMDAxKSB7XG4gICAgICAgICAgdGhpcy5mcm9tUG9pbnQgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgICAgdGhpcy5tb2RlID0gUm90YXRlQ29tbWFuZE1vZGUuU2VsZWN0VG9Qb2ludDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUm90YXRlQ29tbWFuZE1vZGUuU2VsZWN0VG9Qb2ludDpcbiAgICAgICAgaWYgKHRoaXMuYXhpcyEuY2xvc2VzdERpc3RhbmNlVG9Qb2ludChpbnRlcnNlY3Rpb24ucG9pbnQpID4gMC4wMDAxKSB7XG4gICAgICAgICAgaWYgKHRoaXMudXBkYXRlUm90YXRpb24oaW50ZXJzZWN0aW9uLnBvaW50KSkge1xuICAgICAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVSb3RhdGlvbih0b1BvaW50OiBWZWMzKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgb3JpZ2luMTogVmVjMyA9IHRoaXMuYXhpcyEuY2xvc2VzdFBvaW50VG9Qb2ludCh0aGlzLmNlbnRlciEpO1xuICAgIGNvbnN0IG9yaWdpbjI6IFZlYzMgPSB0aGlzLmF4aXMhLmNsb3Nlc3RQb2ludFRvUG9pbnQodG9Qb2ludCk7XG4gICAgY29uc3QgdjEgPSB2ZWMzLnN1Yih0aGlzLmZyb21Qb2ludCEsIG9yaWdpbjEpO1xuICAgIGNvbnN0IHYyID0gdmVjMy5zdWIodG9Qb2ludCwgb3JpZ2luMik7XG4gICAgdmFyIHRoZXRhOiBudW1iZXIgPSBhbmdsZUJldHdlZW4odjEsIHYyKTtcbiAgICBpZiAodmVjMy5kb3QodjIsIHZlYzMuY3Jvc3ModjEsIHRoaXMuYXhpcyEuZ2V0RGlyZWN0aW9uKCkpKSA+IDApIHtcbiAgICAgIHRoZXRhID0gMiAqIE1hdGguUEkgLSB0aGV0YTtcbiAgICB9XG4gICAgaWYgKGlzTmFOKHRoZXRhKSB8fCB0aGV0YSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHJvdGF0aW9uOiBNYXQ0ID0gZ2V0Um90YXRpb25UcmFuc2Zvcm0odGhpcy5heGlzISwgdGhldGEpO1xuICAgIElOU1RBTkNFLmdldE1vdmVyKCkuc2V0VHJhbnNmb3JtKHJvdGF0aW9uKTtcbiAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLm9uU2VsZWN0aW9uTW92ZWQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5jbGljaygpO1xuICB9XG5cbiAgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5vbk1vdXNlTW92ZSgpO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IFJvdGF0ZUNvbW1hbmRNb2RlLlNlbGVjdFRvUG9pbnQpIHtcbiAgICAgIGNvbnN0IHBvaW50OiBWZWMzIHwgbnVsbCA9IHRoaXMuY2xpY2tlci5nZXRQb2ludCgpO1xuICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlUm90YXRpb24ocG9pbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFJvdGF0ZUNvbW1hbmRNb2RlLlNlbGVjdENlbnRlclBvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGNlbnRlciBwb2ludC4gICRcIjtcbiAgICAgIGNhc2UgUm90YXRlQ29tbWFuZE1vZGUuU2VsZWN0QXhpc1BvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGF4aXMgcG9pbnQuICAkXCI7XG4gICAgICBjYXNlIFJvdGF0ZUNvbW1hbmRNb2RlLlNlbGVjdEZyb21Qb2ludE9yQW5nbGU6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgU2VsZWN0IHN0YXJ0IHBvaW50IG9mIHJvdGF0aW9uIG9yIGVudGVyIGFuZ2xlLiAgJFwiO1xuICAgICAgY2FzZSBSb3RhdGVDb21tYW5kTW9kZS5TZWxlY3RUb1BvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCBwb2ludCB0byByb3RhdGUgdG8uICAkXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuXG4gICAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgICBmb3IgKGNvbnN0IGdlbyBvZiBzZWxlY3Rpb24pIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoZ2VvKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGNsb25lIG9mIHRoaXMuY2xvbmVzKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUdlb21ldHJ5KGNsb25lKTtcbiAgICB9XG5cbiAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLnRyYW5zZm9ybVNlbGVjdGVkKCk7XG4gICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS51cGRhdGVkU2VsZWN0aW9uKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/rotateCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/scale1Command.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/scale1Command.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Scale1Command: () => (/* binding */ Scale1Command)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\nvar Scale1CommandMode;\n(function (Scale1CommandMode) {\n    Scale1CommandMode[Scale1CommandMode[\"ClickBasePoint\"] = 0] = \"ClickBasePoint\";\n    Scale1CommandMode[Scale1CommandMode[\"ClickFromPoint\"] = 1] = \"ClickFromPoint\";\n    Scale1CommandMode[Scale1CommandMode[\"ClickToPointOrFactor\"] = 2] = \"ClickToPointOrFactor\";\n})(Scale1CommandMode || (Scale1CommandMode = {}));\nclass Scale1Command extends _command__WEBPACK_IMPORTED_MODULE_4__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.mode = Scale1CommandMode.ClickBasePoint;\n        this.basePoint = null;\n        this.fromPoint = null;\n        this.toPoint = null;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_3__.Clicker();\n        this.clones = [];\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geo of selection) {\n            const clone = geo.clone();\n            clone.delete(); // invisible clone for intersecting\n            this.clones.push(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(geo);\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.mat4.identity());\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n            this.done();\n            return;\n        }\n        if (this.mode === Scale1CommandMode.ClickToPointOrFactor) {\n            const factor = parseFloat(input);\n            if (!isNaN(factor)) {\n                const vFrom = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.fromPoint, this.basePoint);\n                const transform = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getScale1Transform)(new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.basePoint, vFrom), factor);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(transform);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n                this.done();\n            }\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case Scale1CommandMode.ClickBasePoint:\n                this.basePoint = intersection.point;\n                this.mode = Scale1CommandMode.ClickFromPoint;\n                this.clicker.reset();\n                break;\n            case Scale1CommandMode.ClickFromPoint:\n                this.fromPoint = intersection.point;\n                this.mode = Scale1CommandMode.ClickToPointOrFactor;\n                this.clicker.reset();\n                break;\n            case Scale1CommandMode.ClickToPointOrFactor:\n                this.toPoint = intersection.point;\n                this.setScale();\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode == Scale1CommandMode.ClickToPointOrFactor) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                this.toPoint = point;\n                this.setScale();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case Scale1CommandMode.ClickBasePoint:\n                return \"0:Exit  Click base point.  $\";\n            case Scale1CommandMode.ClickFromPoint:\n                return \"0:Exit  Click from point.  $\";\n            case Scale1CommandMode.ClickToPointOrFactor:\n                return \"0:Exit  Click to point or enter factor.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    setScale() {\n        const vFrom = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.fromPoint, this.basePoint);\n        const vTo = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.sub(this.toPoint, this.basePoint);\n        const lFrom = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.length(vFrom);\n        const lTo = wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.dot(vTo, wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.normalize(vFrom));\n        const factor = lTo / lFrom;\n        const transform = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getScale1Transform)(new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.basePoint, vFrom), factor);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(transform);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        for (const geo of selection) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n        }\n        for (const clone of this.clones) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(clone);\n            clone.delete();\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().transformSelected();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc2NhbGUxQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBQ2hCO0FBR1E7QUFDUztBQUNqQjtBQUNBO0FBRXJDLElBQUssaUJBSUo7QUFKRCxXQUFLLGlCQUFpQjtJQUNwQiw2RUFBYztJQUNkLDZFQUFjO0lBQ2QseUZBQW9CO0FBQ3RCLENBQUMsRUFKSSxpQkFBaUIsS0FBakIsaUJBQWlCLFFBSXJCO0FBRU0sTUFBTSxhQUFjLFNBQVEsNkNBQU87SUFVeEM7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsY0FBYyxDQUFDO1FBQzdDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSw2Q0FBTyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFFakIsTUFBTSxTQUFTLEdBQWtCLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdkUsSUFBSSxTQUFTLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUN4QixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDWixPQUFPO1NBQ1I7UUFDRCxLQUFLLE1BQU0sR0FBRyxJQUFJLFNBQVMsRUFBRTtZQUMzQixNQUFNLEtBQUssR0FBYSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDcEMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsbUNBQW1DO1lBQ25ELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3hCLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3ZDLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3pDO0lBRUgsQ0FBQztJQUVELGlCQUFpQixDQUFDLEtBQWE7UUFDN0IsSUFBSSxLQUFLLElBQUksR0FBRyxFQUFFO1lBQ2hCLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLDZDQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUNsRCwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDMUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ1osT0FBTztTQUNSO1FBQ0QsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLGlCQUFpQixDQUFDLG9CQUFvQixFQUFFO1lBQ3hELE1BQU0sTUFBTSxHQUFXLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUNsQixNQUFNLEtBQUssR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBVSxFQUFFLElBQUksQ0FBQyxTQUFVLENBQUMsQ0FBQztnQkFDL0QsTUFBTSxTQUFTLEdBQVMsK0RBQWtCLENBQUMsSUFBSSxrREFBSyxDQUFDLElBQUksQ0FBQyxTQUFVLEVBQUUsS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQ3RGLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUM1QywwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLGdCQUFnQixFQUFFLENBQUM7Z0JBQzFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUNiO1NBQ0Y7SUFDSCxDQUFDO0lBRUQsaUJBQWlCLENBQUMsWUFBMEI7UUFDMUMsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssaUJBQWlCLENBQUMsY0FBYztnQkFDbkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDLGNBQWMsQ0FBQztnQkFDN0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDckIsTUFBTTtZQUNSLEtBQUssaUJBQWlCLENBQUMsY0FBYztnQkFDbkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDLG9CQUFvQixDQUFDO2dCQUNuRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNyQixNQUFNO1lBQ1IsS0FBSyxpQkFBaUIsQ0FBQyxvQkFBb0I7Z0JBQ3pDLElBQUksQ0FBQyxPQUFPLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQztnQkFDbEMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUNoQixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ1osTUFBTTtZQUNSO2dCQUNFLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztTQUMzQztJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRUQsZUFBZTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDM0IsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLGlCQUFpQixDQUFDLG9CQUFvQixFQUFFO1lBQ3ZELE1BQU0sS0FBSyxHQUFnQixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ25ELElBQUksS0FBSyxFQUFFO2dCQUNULElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO2dCQUNyQixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7YUFDakI7U0FDRjtJQUNILENBQUM7SUFFRCxlQUFlO1FBQ2IsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssaUJBQWlCLENBQUMsY0FBYztnQkFDbkMsT0FBTyw4QkFBOEIsQ0FBQztZQUN4QyxLQUFLLGlCQUFpQixDQUFDLGNBQWM7Z0JBQ25DLE9BQU8sOEJBQThCLENBQUM7WUFDeEMsS0FBSyxpQkFBaUIsQ0FBQyxvQkFBb0I7Z0JBQ3pDLE9BQU8sNENBQTRDLENBQUM7WUFDdEQ7Z0JBQ0UsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1NBQzNDO0lBQ0gsQ0FBQztJQUVELFVBQVU7UUFDUixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUVPLFFBQVE7UUFDZCxNQUFNLEtBQUssR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBVSxFQUFFLElBQUksQ0FBQyxTQUFVLENBQUMsQ0FBQztRQUMvRCxNQUFNLEdBQUcsR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBUSxFQUFFLElBQUksQ0FBQyxTQUFVLENBQUMsQ0FBQztRQUMzRCxNQUFNLEtBQUssR0FBVyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QyxNQUFNLEdBQUcsR0FBVyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsNkNBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN6RCxNQUFNLE1BQU0sR0FBVyxHQUFHLEdBQUcsS0FBSyxDQUFDO1FBQ25DLE1BQU0sU0FBUyxHQUFTLCtEQUFrQixDQUFDLElBQUksa0RBQUssQ0FBQyxJQUFJLENBQUMsU0FBVSxFQUFFLEtBQUssQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3RGLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzVDLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUM1QyxDQUFDO0lBRU8sSUFBSTtRQUNWLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFdkIsTUFBTSxTQUFTLEdBQWtCLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdkUsS0FBSyxNQUFNLEdBQUcsSUFBSSxTQUFTLEVBQUU7WUFDM0IsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDdEM7UUFFRCxLQUFLLE1BQU0sS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDL0IsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ2hCO1FBRUQsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzNDLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9zY2FsZTFDb21tYW5kLnRzP2FhMzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvcGxhbmVcIjtcbmltcG9ydCB7IGdldFNjYWxlMVRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIFNjYWxlMUNvbW1hbmRNb2RlIHtcbiAgQ2xpY2tCYXNlUG9pbnQsXG4gIENsaWNrRnJvbVBvaW50LFxuICBDbGlja1RvUG9pbnRPckZhY3Rvcixcbn1cblxuZXhwb3J0IGNsYXNzIFNjYWxlMUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIG1vZGU6IFNjYWxlMUNvbW1hbmRNb2RlO1xuICBwcml2YXRlIGJhc2VQb2ludDogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgZnJvbVBvaW50OiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSB0b1BvaW50OiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyO1xuICBwcml2YXRlIGNsb25lczogR2VvbWV0cnlbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLm1vZGUgPSBTY2FsZTFDb21tYW5kTW9kZS5DbGlja0Jhc2VQb2ludDtcbiAgICB0aGlzLmJhc2VQb2ludCA9IG51bGw7XG4gICAgdGhpcy5mcm9tUG9pbnQgPSBudWxsO1xuICAgIHRoaXMudG9Qb2ludCA9IG51bGw7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgICB0aGlzLmNsb25lcyA9IFtdO1xuXG4gICAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoc2VsZWN0aW9uLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGdlbyBvZiBzZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IGNsb25lOiBHZW9tZXRyeSA9IGdlby5jbG9uZSgpO1xuICAgICAgY2xvbmUuZGVsZXRlKCk7IC8vIGludmlzaWJsZSBjbG9uZSBmb3IgaW50ZXJzZWN0aW5nXG4gICAgICB0aGlzLmNsb25lcy5wdXNoKGNsb25lKTtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoY2xvbmUpO1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5yZW1vdmVHZW9tZXRyeShnZW8pO1xuICAgIH1cblxuICB9XG5cbiAgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChpbnB1dCA9PSBcIjBcIikge1xuICAgICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5zZXRUcmFuc2Zvcm0obWF0NC5pZGVudGl0eSgpKTtcbiAgICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09IFNjYWxlMUNvbW1hbmRNb2RlLkNsaWNrVG9Qb2ludE9yRmFjdG9yKSB7XG4gICAgICBjb25zdCBmYWN0b3I6IG51bWJlciA9IHBhcnNlRmxvYXQoaW5wdXQpO1xuICAgICAgaWYgKCFpc05hTihmYWN0b3IpKSB7XG4gICAgICAgIGNvbnN0IHZGcm9tOiBWZWMzID0gdmVjMy5zdWIodGhpcy5mcm9tUG9pbnQhLCB0aGlzLmJhc2VQb2ludCEpO1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm06IE1hdDQgPSBnZXRTY2FsZTFUcmFuc2Zvcm0obmV3IFBsYW5lKHRoaXMuYmFzZVBvaW50ISwgdkZyb20pLCBmYWN0b3IpO1xuICAgICAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLnNldFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xuICAgICAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLm9uU2VsZWN0aW9uTW92ZWQoKTtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBTY2FsZTFDb21tYW5kTW9kZS5DbGlja0Jhc2VQb2ludDpcbiAgICAgICAgdGhpcy5iYXNlUG9pbnQgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMubW9kZSA9IFNjYWxlMUNvbW1hbmRNb2RlLkNsaWNrRnJvbVBvaW50O1xuICAgICAgICB0aGlzLmNsaWNrZXIucmVzZXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNjYWxlMUNvbW1hbmRNb2RlLkNsaWNrRnJvbVBvaW50OlxuICAgICAgICB0aGlzLmZyb21Qb2ludCA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgdGhpcy5tb2RlID0gU2NhbGUxQ29tbWFuZE1vZGUuQ2xpY2tUb1BvaW50T3JGYWN0b3I7XG4gICAgICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU2NhbGUxQ29tbWFuZE1vZGUuQ2xpY2tUb1BvaW50T3JGYWN0b3I6XG4gICAgICAgIHRoaXMudG9Qb2ludCA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgdGhpcy5zZXRTY2FsZSgpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIuY2xpY2soKTtcbiAgfVxuXG4gIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIub25Nb3VzZU1vdmUoKTtcbiAgICBpZiAodGhpcy5tb2RlID09IFNjYWxlMUNvbW1hbmRNb2RlLkNsaWNrVG9Qb2ludE9yRmFjdG9yKSB7XG4gICAgICBjb25zdCBwb2ludDogVmVjMyB8IG51bGwgPSB0aGlzLmNsaWNrZXIuZ2V0UG9pbnQoKTtcbiAgICAgIGlmIChwb2ludCkge1xuICAgICAgICB0aGlzLnRvUG9pbnQgPSBwb2ludDtcbiAgICAgICAgdGhpcy5zZXRTY2FsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFNjYWxlMUNvbW1hbmRNb2RlLkNsaWNrQmFzZVBvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGJhc2UgcG9pbnQuICAkXCI7XG4gICAgICBjYXNlIFNjYWxlMUNvbW1hbmRNb2RlLkNsaWNrRnJvbVBvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGZyb20gcG9pbnQuICAkXCI7XG4gICAgICBjYXNlIFNjYWxlMUNvbW1hbmRNb2RlLkNsaWNrVG9Qb2ludE9yRmFjdG9yOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHRvIHBvaW50IG9yIGVudGVyIGZhY3Rvci4gICRcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxuICBwcml2YXRlIHNldFNjYWxlKCk6IHZvaWQge1xuICAgIGNvbnN0IHZGcm9tOiBWZWMzID0gdmVjMy5zdWIodGhpcy5mcm9tUG9pbnQhLCB0aGlzLmJhc2VQb2ludCEpO1xuICAgIGNvbnN0IHZUbzogVmVjMyA9IHZlYzMuc3ViKHRoaXMudG9Qb2ludCEsIHRoaXMuYmFzZVBvaW50ISk7XG4gICAgY29uc3QgbEZyb206IG51bWJlciA9IHZlYzMubGVuZ3RoKHZGcm9tKTtcbiAgICBjb25zdCBsVG86IG51bWJlciA9IHZlYzMuZG90KHZUbywgdmVjMy5ub3JtYWxpemUodkZyb20pKTtcbiAgICBjb25zdCBmYWN0b3I6IG51bWJlciA9IGxUbyAvIGxGcm9tO1xuICAgIGNvbnN0IHRyYW5zZm9ybTogTWF0NCA9IGdldFNjYWxlMVRyYW5zZm9ybShuZXcgUGxhbmUodGhpcy5iYXNlUG9pbnQhLCB2RnJvbSksIGZhY3Rvcik7XG4gICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5zZXRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcbiAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLm9uU2VsZWN0aW9uTW92ZWQoKTtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuXG4gICAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgICBmb3IgKGNvbnN0IGdlbyBvZiBzZWxlY3Rpb24pIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoZ2VvKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGNsb25lIG9mIHRoaXMuY2xvbmVzKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUdlb21ldHJ5KGNsb25lKTtcbiAgICAgIGNsb25lLmRlbGV0ZSgpO1xuICAgIH1cblxuICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkudHJhbnNmb3JtU2VsZWN0ZWQoKTtcbiAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLnVwZGF0ZWRTZWxlY3Rpb24oKTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/scale1Command.ts\n");

/***/ }),

/***/ "./src/commands/commands/scale2Command.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/scale2Command.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Scale2Command: () => (/* binding */ Scale2Command)\n/* harmony export */ });\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nclass Scale2Command extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_0__.Clicker();\n    }\n    handleInputString(input) {\n        alert(\"todo scale2\");\n        this.finished = true;\n    }\n    handleClickResult(input) {\n        alert(\"todo scale2\");\n    }\n    handleClick() {\n        alert(\"todo scale2\");\n    }\n    handleMouseMove() {\n        alert(\"todo scale2\");\n    }\n    getInstructions() {\n        alert(\"todo scale2\");\n        return \"\";\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc2NhbGUyQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDcUM7QUFDQTtBQUU5QixNQUFNLGFBQWMsU0FBUSw2Q0FBTztJQUt4QztRQUNFLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLDZDQUFPLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQsaUJBQWlCLENBQUMsS0FBYTtRQUM3QixLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7SUFDdkIsQ0FBQztJQUNELGlCQUFpQixDQUFDLEtBQW1CO1FBQ25DLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBQ0QsV0FBVztRQUNULEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBQ0QsZUFBZTtRQUNiLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBQ0QsZUFBZTtRQUNiLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNyQixPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFDRCxVQUFVO1FBQ1IsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL3NjYWxlMkNvbW1hbmQudHM/MTNjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5leHBvcnQgY2xhc3MgU2NhbGUyQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICB9XG5cbiAgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGFsZXJ0KFwidG9kbyBzY2FsZTJcIik7XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gIH1cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW5wdXQ6IEludGVyc2VjdGlvbik6IHZvaWQge1xuICAgIGFsZXJ0KFwidG9kbyBzY2FsZTJcIik7XG4gIH1cbiAgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgYWxlcnQoXCJ0b2RvIHNjYWxlMlwiKTtcbiAgfVxuICBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgYWxlcnQoXCJ0b2RvIHNjYWxlMlwiKTtcbiAgfVxuICBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBhbGVydChcInRvZG8gc2NhbGUyXCIpO1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/scale2Command.ts\n");

/***/ }),

/***/ "./src/commands/commands/scaleCommand.ts":
/*!***********************************************!*\
  !*** ./src/commands/commands/scaleCommand.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ScaleCommand: () => (/* binding */ ScaleCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\nvar ScaleCommandMode;\n(function (ScaleCommandMode) {\n    ScaleCommandMode[ScaleCommandMode[\"SelectCenterPoint\"] = 0] = \"SelectCenterPoint\";\n    ScaleCommandMode[ScaleCommandMode[\"SelectFromPoint\"] = 1] = \"SelectFromPoint\";\n    ScaleCommandMode[ScaleCommandMode[\"SelectToPointOrFactor\"] = 2] = \"SelectToPointOrFactor\";\n})(ScaleCommandMode || (ScaleCommandMode = {}));\nclass ScaleCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.mode = ScaleCommandMode.SelectCenterPoint;\n        this.centerPoint = null;\n        this.fromPoint = null;\n        this.toPoint = null;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_2__.Clicker();\n        this.clones = [];\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geo of selection) {\n            const clone = geo.clone();\n            clone.delete(); // invisible clones for intersection\n            this.clones.push(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(geo);\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.identity());\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n            this.done();\n            return;\n        }\n        if (this.mode === ScaleCommandMode.SelectToPointOrFactor) {\n            const factor = parseFloat(input);\n            if (!isNaN(factor)) {\n                const scaleTransform = (0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.getScaleTransform)(this.centerPoint, factor);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(scaleTransform);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n                this.done();\n            }\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case ScaleCommandMode.SelectCenterPoint:\n                this.centerPoint = intersection.point;\n                this.clicker.reset();\n                this.mode = ScaleCommandMode.SelectFromPoint;\n                break;\n            case ScaleCommandMode.SelectFromPoint:\n                this.fromPoint = intersection.point;\n                this.clicker.reset();\n                this.mode = ScaleCommandMode.SelectToPointOrFactor;\n                break;\n            case ScaleCommandMode.SelectToPointOrFactor:\n                this.toPoint = intersection.point;\n                this.setScale();\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode == ScaleCommandMode.SelectToPointOrFactor) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                this.toPoint = point;\n                this.setScale();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case ScaleCommandMode.SelectCenterPoint:\n                return \"0:Exit  Click center point.  $\";\n            case ScaleCommandMode.SelectFromPoint:\n                return \"0:Exit  Click from point.  $\";\n            case ScaleCommandMode.SelectToPointOrFactor:\n                return \"0:Exit  Click to point or enter factor.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    setScale() {\n        const factor = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.centerPoint, this.toPoint) /\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.centerPoint, this.fromPoint);\n        const toOrigin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(this.centerPoint, -1));\n        const toPos = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.translation(this.centerPoint);\n        const scale = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.uniformScaling(factor);\n        const transform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.mul(toPos, scale), toOrigin);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(transform);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        for (const geo of selection) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n        }\n        for (const clone of this.clones) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(clone);\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().transformSelected();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxFQUFFO1lBQzNCLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3RDO1FBRUQsS0FBSyxNQUFNLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQy9CLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzNDO1FBRUQsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzNDLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0lBRUQsVUFBVTtRQUNSLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9zY2FsZUNvbW1hbmQudHM/ODk0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBnZXRTY2FsZVRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIFNjYWxlQ29tbWFuZE1vZGUge1xuICBTZWxlY3RDZW50ZXJQb2ludCxcbiAgU2VsZWN0RnJvbVBvaW50LFxuICBTZWxlY3RUb1BvaW50T3JGYWN0b3IsXG59XG5cbmV4cG9ydCBjbGFzcyBTY2FsZUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIG1vZGU6IFNjYWxlQ29tbWFuZE1vZGU7XG4gIHByaXZhdGUgY2VudGVyUG9pbnQ6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIGZyb21Qb2ludDogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgdG9Qb2ludDogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBjbG9uZXM6IEdlb21ldHJ5W107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5tb2RlID0gU2NhbGVDb21tYW5kTW9kZS5TZWxlY3RDZW50ZXJQb2ludDtcbiAgICB0aGlzLmNlbnRlclBvaW50ID0gbnVsbDtcbiAgICB0aGlzLmZyb21Qb2ludCA9IG51bGw7XG4gICAgdGhpcy50b1BvaW50ID0gbnVsbDtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMuY2xvbmVzID0gW107XG5cbiAgICBjb25zdCBzZWxlY3Rpb246IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3Rpb24uc2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBnZW8gb2Ygc2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBjbG9uZTogR2VvbWV0cnkgPSBnZW8uY2xvbmUoKTtcbiAgICAgIGNsb25lLmRlbGV0ZSgpOyAvLyBpbnZpc2libGUgY2xvbmVzIGZvciBpbnRlcnNlY3Rpb25cbiAgICAgIHRoaXMuY2xvbmVzLnB1c2goY2xvbmUpO1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeShjbG9uZSk7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUdlb21ldHJ5KGdlbyk7XG4gICAgfVxuXG4gIH1cblxuICBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGlucHV0ID09IFwiMFwiKSB7XG4gICAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLnNldFRyYW5zZm9ybShtYXQ0LmlkZW50aXR5KCkpO1xuICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5vblNlbGVjdGlvbk1vdmVkKCk7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gU2NhbGVDb21tYW5kTW9kZS5TZWxlY3RUb1BvaW50T3JGYWN0b3IpIHtcbiAgICAgIGNvbnN0IGZhY3RvcjogbnVtYmVyID0gcGFyc2VGbG9hdChpbnB1dCk7XG4gICAgICBpZiAoIWlzTmFOKGZhY3RvcikpIHtcbiAgICAgICAgY29uc3Qgc2NhbGVUcmFuc2Zvcm0gPSBnZXRTY2FsZVRyYW5zZm9ybSh0aGlzLmNlbnRlclBvaW50ISwgZmFjdG9yKTtcbiAgICAgICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5zZXRUcmFuc2Zvcm0oc2NhbGVUcmFuc2Zvcm0pO1xuICAgICAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLm9uU2VsZWN0aW9uTW92ZWQoKTtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBTY2FsZUNvbW1hbmRNb2RlLlNlbGVjdENlbnRlclBvaW50OlxuICAgICAgICB0aGlzLmNlbnRlclBvaW50ID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgICAgICB0aGlzLmNsaWNrZXIucmVzZXQoKTtcbiAgICAgICAgdGhpcy5tb2RlID0gU2NhbGVDb21tYW5kTW9kZS5TZWxlY3RGcm9tUG9pbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTY2FsZUNvbW1hbmRNb2RlLlNlbGVjdEZyb21Qb2ludDpcbiAgICAgICAgdGhpcy5mcm9tUG9pbnQgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICAgICAgICB0aGlzLm1vZGUgPSBTY2FsZUNvbW1hbmRNb2RlLlNlbGVjdFRvUG9pbnRPckZhY3RvcjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNjYWxlQ29tbWFuZE1vZGUuU2VsZWN0VG9Qb2ludE9yRmFjdG9yOlxuICAgICAgICB0aGlzLnRvUG9pbnQgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMuc2V0U2NhbGUoKTtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLmNsaWNrKCk7XG4gIH1cblxuICBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gICAgaWYgKHRoaXMubW9kZSA9PSBTY2FsZUNvbW1hbmRNb2RlLlNlbGVjdFRvUG9pbnRPckZhY3Rvcikge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgdGhpcy50b1BvaW50ID0gcG9pbnQ7XG4gICAgICAgIHRoaXMuc2V0U2NhbGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBTY2FsZUNvbW1hbmRNb2RlLlNlbGVjdENlbnRlclBvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIGNlbnRlciBwb2ludC4gICRcIlxuICAgICAgY2FzZSBTY2FsZUNvbW1hbmRNb2RlLlNlbGVjdEZyb21Qb2ludDpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBmcm9tIHBvaW50LiAgJFwiXG4gICAgICBjYXNlIFNjYWxlQ29tbWFuZE1vZGUuU2VsZWN0VG9Qb2ludE9yRmFjdG9yOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHRvIHBvaW50IG9yIGVudGVyIGZhY3Rvci4gICRcIlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRTY2FsZSgpOiB2b2lkIHtcbiAgICBjb25zdCBmYWN0b3I6IG51bWJlciA9XG4gICAgICB2ZWMzLmRpc3RhbmNlKHRoaXMuY2VudGVyUG9pbnQhLCB0aGlzLnRvUG9pbnQhKSAvXG4gICAgICB2ZWMzLmRpc3RhbmNlKHRoaXMuY2VudGVyUG9pbnQhLCB0aGlzLmZyb21Qb2ludCEpO1xuICAgIGNvbnN0IHRvT3JpZ2luOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbih2ZWMzLnNjYWxlKHRoaXMuY2VudGVyUG9pbnQhLCAtMSkpO1xuICAgIGNvbnN0IHRvUG9zOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbih0aGlzLmNlbnRlclBvaW50ISk7XG4gICAgY29uc3Qgc2NhbGU6IE1hdDQgPSBtYXQ0LnVuaWZvcm1TY2FsaW5nKGZhY3Rvcik7XG4gICAgY29uc3QgdHJhbnNmb3JtOiBNYXQ0ID0gbWF0NC5tdWwobWF0NC5tdWwodG9Qb3MsIHNjYWxlKSwgdG9PcmlnaW4pO1xuICAgIElOU1RBTkNFLmdldE1vdmVyKCkuc2V0VHJhbnNmb3JtKHRyYW5zZm9ybSk7XG4gICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5vblNlbGVjdGlvbk1vdmVkKCk7XG4gIH1cblxuICBwcml2YXRlIGRvbmUoKTogdm9pZCB7XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcblxuICAgIGNvbnN0IHNlbGVjdGlvbjogU2V0PEdlb21ldHJ5PiA9IElOU1RBTkNFLmdldFNlbGVjdG9yKCkuZ2V0U2VsZWN0aW9uKCk7XG4gICAgZm9yIChjb25zdCBnZW8gb2Ygc2VsZWN0aW9uKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KGdlbyk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBjbG9uZSBvZiB0aGlzLmNsb25lcykge1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5yZW1vdmVHZW9tZXRyeShjbG9uZSk7XG4gICAgfVxuXG4gICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS50cmFuc2Zvcm1TZWxlY3RlZCgpO1xuICAgIElOU1RBTkNFLmdldE1vdmVyKCkudXBkYXRlZFNlbGVjdGlvbigpO1xuICB9XG5cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/scaleCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/setMaterialCommand.ts":
/*!*****************************************************!*\
  !*** ./src/commands/commands/setMaterialCommand.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SetMaterialCommand: () => (/* binding */ SetMaterialCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nclass SetMaterialCommand extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.done();\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\")\n            this.done();\n        else {\n            const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n            for (const geo of selection)\n                geo.setMaterial(input);\n            this.done();\n        }\n    }\n    handleClickResult(intersection) {\n    }\n    handleClick() {\n    }\n    handleMouseMove() {\n    }\n    getInstructions() {\n        return \"0:Exit  Enter material name.  $\";\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc2V0TWF0ZXJpYWxDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUdBO0FBRTlCLE1BQU0sa0JBQW1CLFNBQVEsNkNBQU87SUFJN0M7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLE1BQU0sU0FBUyxHQUFrQiwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3ZFLElBQUksU0FBUyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUU7WUFDeEIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2I7SUFDSCxDQUFDO0lBRUQsaUJBQWlCLENBQUMsS0FBYTtRQUM3QixJQUFJLEtBQUssSUFBSSxHQUFHO1lBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO2FBQ3pCO1lBQ0gsTUFBTSxTQUFTLEdBQWtCLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDdkUsS0FBSyxNQUFNLEdBQUcsSUFBSSxTQUFTO2dCQUFFLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDcEQsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2I7SUFDSCxDQUFDO0lBRUQsaUJBQWlCLENBQUMsWUFBMEI7SUFDNUMsQ0FBQztJQUVELFdBQVc7SUFDWCxDQUFDO0lBRUQsZUFBZTtJQUNmLENBQUM7SUFFRCxlQUFlO1FBQ2IsT0FBTyxpQ0FBaUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQsVUFBVTtRQUNSLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBRU8sSUFBSTtRQUNWLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO0lBQ3ZCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL3NldE1hdGVyaWFsQ29tbWFuZC50cz85ZTAxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5leHBvcnQgY2xhc3MgU2V0TWF0ZXJpYWxDb21tYW5kIGV4dGVuZHMgQ29tbWFuZCB7XG5cbiAgcHJpdmF0ZSBmaW5pc2hlZDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICBjb25zdCBzZWxlY3Rpb246IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3Rpb24uc2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChpbnB1dCA9PSBcIjBcIikgdGhpcy5kb25lKCk7XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb246IFNldDxHZW9tZXRyeT4gPSBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLmdldFNlbGVjdGlvbigpO1xuICAgICAgZm9yIChjb25zdCBnZW8gb2Ygc2VsZWN0aW9uKSBnZW8uc2V0TWF0ZXJpYWwoaW5wdXQpO1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICB9XG5cbiAgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICB9XG5cbiAgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiMDpFeGl0ICBFbnRlciBtYXRlcmlhbCBuYW1lLiAgJFwiO1xuICB9XG5cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/setMaterialCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/shearCommand.ts":
/*!***********************************************!*\
  !*** ./src/commands/commands/shearCommand.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShearCommand: () => (/* binding */ ShearCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _utils_print__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/print */ \"./src/utils/print.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\n\nvar ShearCommandMode;\n(function (ShearCommandMode) {\n    ShearCommandMode[ShearCommandMode[\"SelectFirstPoint\"] = 0] = \"SelectFirstPoint\";\n    ShearCommandMode[ShearCommandMode[\"SelectSecondPoint\"] = 1] = \"SelectSecondPoint\";\n    ShearCommandMode[ShearCommandMode[\"SelectThirdPoint\"] = 2] = \"SelectThirdPoint\";\n    ShearCommandMode[ShearCommandMode[\"SelectBasePoint\"] = 3] = \"SelectBasePoint\";\n    ShearCommandMode[ShearCommandMode[\"SelectToPoint\"] = 4] = \"SelectToPoint\";\n})(ShearCommandMode || (ShearCommandMode = {}));\nclass ShearCommand extends _command__WEBPACK_IMPORTED_MODULE_5__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.mode = ShearCommandMode.SelectFirstPoint;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_4__.Clicker();\n        this.plane = null;\n        this.p1 = null;\n        this.p2 = null;\n        this.basePoint = null;\n        this.clones = [];\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.done();\n            return;\n        }\n        for (const geo of selection) {\n            this.clones.push(geo.clone());\n            const clone = geo.clone();\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(clone);\n            this.clones.push(clone);\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(geo);\n        }\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.identity());\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n            this.done();\n            return;\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case ShearCommandMode.SelectFirstPoint:\n                this.p1 = intersection.point;\n                this.mode = ShearCommandMode.SelectSecondPoint;\n                break;\n            case ShearCommandMode.SelectSecondPoint:\n                this.p2 = intersection.point;\n                this.mode = ShearCommandMode.SelectThirdPoint;\n                break;\n            case ShearCommandMode.SelectThirdPoint:\n                this.plane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(intersection.point, wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(this.p1, intersection.point), wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(this.p2, intersection.point)));\n                this.mode = ShearCommandMode.SelectBasePoint;\n                break;\n            case ShearCommandMode.SelectBasePoint:\n                this.basePoint = intersection.point;\n                this.mode = ShearCommandMode.SelectToPoint;\n                break;\n            case ShearCommandMode.SelectToPoint:\n                const from = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(this.basePoint, this.plane.getOrigin());\n                const to = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(intersection.point, this.plane.getOrigin());\n                const t = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getShearTransform)(this.plane, from, to);\n                (0,_utils_print__WEBPACK_IMPORTED_MODULE_3__.printMat4)(t);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(t);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n                this.done();\n                break;\n            default: throw new Error(\"case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode == ShearCommandMode.SelectToPoint) {\n            const point = this.clicker.getPoint();\n            if (point) {\n                const from = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(this.basePoint, this.plane.getOrigin());\n                const to = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.sub(point, this.plane.getOrigin());\n                const t = (0,_utils_math__WEBPACK_IMPORTED_MODULE_2__.getShearTransform)(this.plane, from, to);\n                console.log(t);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().setTransform(t);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n            }\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case ShearCommandMode.SelectFirstPoint:\n                return \"0:Exit  Select first point on shear plane.  $\";\n            case ShearCommandMode.SelectSecondPoint:\n                return \"0:Exit  Select second point on shear plane.  $\";\n            case ShearCommandMode.SelectThirdPoint:\n                return \"0:Exit  Select third point on shear plane.  $\";\n            case ShearCommandMode.SelectBasePoint:\n                return \"0:Exit  Select base point.  $\";\n            case ShearCommandMode.SelectToPoint:\n                return \"0:Exit  Select to point.  $\";\n            default: throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        for (const geo of selection) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(geo);\n        }\n        for (const clone of this.clones) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(clone);\n            clone.delete();\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().transformSelected();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc2hlYXJDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ2hCO0FBR1E7QUFDUTtBQUNQO0FBQ1Q7QUFDQTtBQUVyQyxJQUFLLGdCQU1KO0FBTkQsV0FBSyxnQkFBZ0I7SUFDbkIsK0VBQWdCO0lBQ2hCLGlGQUFpQjtJQUNqQiwrRUFBZ0I7SUFDaEIsNkVBQWU7SUFDZix5RUFBYTtBQUNmLENBQUMsRUFOSSxnQkFBZ0IsS0FBaEIsZ0JBQWdCLFFBTXBCO0FBRU0sTUFBTSxZQUFhLFNBQVEsNkNBQU87SUFZdkM7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxJQUFJLEdBQUcsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUM7UUFDOUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLDZDQUFPLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQztRQUNmLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFFakIsTUFBTSxTQUFTLEdBQWtCLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdkUsSUFBSSxTQUFTLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUN4QixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDWixPQUFPO1NBQ1I7UUFDRCxLQUFLLE1BQU0sR0FBRyxJQUFJLFNBQVMsRUFBRTtZQUMzQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztZQUM5QixNQUFNLEtBQUssR0FBYSxHQUFHLENB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TywrQ0FBK0MsQ0FBQztZQUN6RCxLQUFLLGdCQUFnQixDQUFDLGVBQWU7Z0JBQ25DLE9BQU8sK0JBQStCLENBQUM7WUFDekMsS0FBSyxnQkFBZ0IsQ0FBQyxhQUFhO2dCQUNqQyxPQUFPLDZCQUE2QixDQUFDO1lBQ3ZDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztTQUNsRDtJQUNILENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFTyxJQUFJO1FBQ1YsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDckIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUV2QixNQUFNLFNBQVMsR0FBa0IsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN2RSxLQUFLLE1BQU0sR0FBRyxJQUFJLFNBQVMsRUFBRTtZQUMzQiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN0QztRQUVELEtBQUssTUFBTSxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUMvQiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMxQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDaEI7UUFFRCwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDM0MsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ3pDLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL2NvbW1hbmRzL3NoZWFyQ29tbWFuZC50cz9mNjA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdDQsIE1hdDQsIHZlYzMsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3BsYW5lXCI7XG5pbXBvcnQgeyBnZXRTaGVhclRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBwcmludE1hdDQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvcHJpbnRcIjtcbmltcG9ydCB7IENsaWNrZXIgfSBmcm9tIFwiLi4vY2xpY2tlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cbmVudW0gU2hlYXJDb21tYW5kTW9kZSB7XG4gIFNlbGVjdEZpcnN0UG9pbnQsXG4gIFNlbGVjdFNlY29uZFBvaW50LFxuICBTZWxlY3RUaGlyZFBvaW50LFxuICBTZWxlY3RCYXNlUG9pbnQsXG4gIFNlbGVjdFRvUG9pbnQsXG59XG5cbmV4cG9ydCBjbGFzcyBTaGVhckNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIG1vZGU6IFNoZWFyQ29tbWFuZE1vZGU7XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBjbG9uZXM6IEdlb21ldHJ5W107XG4gIHByaXZhdGUgcDE6IFZlYzMgfCBudWxsO1xuICBwcml2YXRlIHAyOiBWZWMzIHwgbnVsbDtcbiAgcHJpdmF0ZSBwbGFuZTogUGxhbmUgfCBudWxsO1xuICBwcml2YXRlIGJhc2VQb2ludDogVmVjMyB8IG51bGw7XG5cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLm1vZGUgPSBTaGVhckNvbW1hbmRNb2RlLlNlbGVjdEZpcnN0UG9pbnQ7XG4gICAgdGhpcy5jbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgICB0aGlzLnBsYW5lID0gbnVsbDtcbiAgICB0aGlzLnAxID0gbnVsbDtcbiAgICB0aGlzLnAyID0gbnVsbDtcbiAgICB0aGlzLmJhc2VQb2ludCA9IG51bGw7XG4gICAgdGhpcy5jbG9uZXMgPSBbXTtcblxuICAgIGNvbnN0IHNlbGVjdGlvbjogU2V0PEdlb21ldHJ5PiA9IElOU1RBTkNFLmdldFNlbGVjdG9yKCkuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKHNlbGVjdGlvbi5zaXplID09PSAwKSB7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBnZW8gb2Ygc2VsZWN0aW9uKSB7XG4gICAgICB0aGlzLmNsb25lcy5wdXNoKGdlby5jbG9uZSgpKTtcbiAgICAgIGNvbnN0IGNsb25lOiBHZW9tZXRyeSA9IGdlby5jbG9uZSgpO1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeShjbG9uZSk7XG4gICAgICB0aGlzLmNsb25lcy5wdXNoKGNsb25lKTtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlR2VvbWV0cnkoZ2VvKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGlucHV0ID09IFwiMFwiKSB7XG4gICAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLnNldFRyYW5zZm9ybShtYXQ0LmlkZW50aXR5KCkpO1xuICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5vblNlbGVjdGlvbk1vdmVkKCk7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVDbGlja1Jlc3VsdChpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbik6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFNoZWFyQ29tbWFuZE1vZGUuU2VsZWN0Rmlyc3RQb2ludDpcbiAgICAgICAgdGhpcy5wMSA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgdGhpcy5tb2RlID0gU2hlYXJDb21tYW5kTW9kZS5TZWxlY3RTZWNvbmRQb2ludDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNoZWFyQ29tbWFuZE1vZGUuU2VsZWN0U2Vjb25kUG9pbnQ6XG4gICAgICAgIHRoaXMucDIgPSBpbnRlcnNlY3Rpb24ucG9pbnQ7XG4gICAgICAgIHRoaXMubW9kZSA9IFNoZWFyQ29tbWFuZE1vZGUuU2VsZWN0VGhpcmRQb2ludDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNoZWFyQ29tbWFuZE1vZGUuU2VsZWN0VGhpcmRQb2ludDpcbiAgICAgICAgdGhpcy5wbGFuZSA9IG5ldyBQbGFuZShcbiAgICAgICAgICBpbnRlcnNlY3Rpb24ucG9pbnQsXG4gICAgICAgICAgdmVjMy5jcm9zcyhcbiAgICAgICAgICAgIHZlYzMuc3ViKHRoaXMucDEhLCBpbnRlcnNlY3Rpb24ucG9pbnQpLFxuICAgICAgICAgICAgdmVjMy5zdWIodGhpcy5wMiEsIGludGVyc2VjdGlvbi5wb2ludClcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubW9kZSA9IFNoZWFyQ29tbWFuZE1vZGUuU2VsZWN0QmFzZVBvaW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU2hlYXJDb21tYW5kTW9kZS5TZWxlY3RCYXNlUG9pbnQ6XG4gICAgICAgIHRoaXMuYmFzZVBvaW50ID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgICAgICB0aGlzLm1vZGUgPSBTaGVhckNvbW1hbmRNb2RlLlNlbGVjdFRvUG9pbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTaGVhckNvbW1hbmRNb2RlLlNlbGVjdFRvUG9pbnQ6XG4gICAgICAgIGNvbnN0IGZyb206IFZlYzMgPSB2ZWMzLnN1Yih0aGlzLmJhc2VQb2ludCEsIHRoaXMucGxhbmUhLmdldE9yaWdpbigpKTtcbiAgICAgICAgY29uc3QgdG86IFZlYzMgPSB2ZWMzLnN1YihpbnRlcnNlY3Rpb24ucG9pbnQsIHRoaXMucGxhbmUhLmdldE9yaWdpbigpKTtcbiAgICAgICAgY29uc3QgdDogTWF0NCA9IGdldFNoZWFyVHJhbnNmb3JtKHRoaXMucGxhbmUhLCBmcm9tLCB0byk7XG4gICAgICAgIHByaW50TWF0NCh0KTtcbiAgICAgICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5zZXRUcmFuc2Zvcm0odCk7XG4gICAgICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gICAgdGhpcy5jbGlja2VyLnJlc2V0KCk7XG4gIH1cblxuICBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIuY2xpY2soKTtcbiAgfVxuXG4gIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIub25Nb3VzZU1vdmUoKTtcbiAgICBpZiAodGhpcy5tb2RlID09IFNoZWFyQ29tbWFuZE1vZGUuU2VsZWN0VG9Qb2ludCkge1xuICAgICAgY29uc3QgcG9pbnQ6IFZlYzMgfCBudWxsID0gdGhpcy5jbGlja2VyLmdldFBvaW50KCk7XG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgY29uc3QgZnJvbTogVmVjMyA9IHZlYzMuc3ViKHRoaXMuYmFzZVBvaW50ISwgdGhpcy5wbGFuZSEuZ2V0T3JpZ2luKCkpO1xuICAgICAgICBjb25zdCB0bzogVmVjMyA9IHZlYzMuc3ViKHBvaW50LCB0aGlzLnBsYW5lIS5nZXRPcmlnaW4oKSk7XG4gICAgICAgIGNvbnN0IHQ6IE1hdDQgPSBnZXRTaGVhclRyYW5zZm9ybSh0aGlzLnBsYW5lISwgZnJvbSwgdG8pO1xuICAgICAgICBjb25zb2xlLmxvZyh0KTtcbiAgICAgICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5zZXRUcmFuc2Zvcm0odCk7XG4gICAgICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgZ2V0SW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgU2hlYXJDb21tYW5kTW9kZS5TZWxlY3RGaXJzdFBvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCBmaXJzdCBwb2ludCBvbiBzaGVhciBwbGFuZS4gICRcIjtcbiAgICAgIGNhc2UgU2hlYXJDb21tYW5kTW9kZS5TZWxlY3RTZWNvbmRQb2ludDpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3Qgc2Vjb25kIHBvaW50IG9uIHNoZWFyIHBsYW5lLiAgJFwiO1xuICAgICAgY2FzZSBTaGVhckNvbW1hbmRNb2RlLlNlbGVjdFRoaXJkUG9pbnQ6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgU2VsZWN0IHRoaXJkIHBvaW50IG9uIHNoZWFyIHBsYW5lLiAgJFwiO1xuICAgICAgY2FzZSBTaGVhckNvbW1hbmRNb2RlLlNlbGVjdEJhc2VQb2ludDpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3QgYmFzZSBwb2ludC4gICRcIjtcbiAgICAgIGNhc2UgU2hlYXJDb21tYW5kTW9kZS5TZWxlY3RUb1BvaW50OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCB0byBwb2ludC4gICRcIjtcbiAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxuICBwcml2YXRlIGRvbmUoKTogdm9pZCB7XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcblxuICAgIGNvbnN0IHNlbGVjdGlvbjogU2V0PEdlb21ldHJ5PiA9IElOU1RBTkNFLmdldFNlbGVjdG9yKCkuZ2V0U2VsZWN0aW9uKCk7XG4gICAgZm9yIChjb25zdCBnZW8gb2Ygc2VsZWN0aW9uKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KGdlbyk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBjbG9uZSBvZiB0aGlzLmNsb25lcykge1xuICAgICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5yZW1vdmVHZW9tZXRyeShjbG9uZSk7XG4gICAgICBjbG9uZS5kZWxldGUoKTtcbiAgICB9XG5cbiAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLnRyYW5zZm9ybVNlbGVjdGVkKCk7XG4gICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS51cGRhdGVkU2VsZWN0aW9uKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/commands/commands/shearCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/snapsCommand.ts":
/*!***********************************************!*\
  !*** ./src/commands/commands/snapsCommand.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapsCommand: () => (/* binding */ SnapsCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\nclass SnapsCommand extends _command__WEBPACK_IMPORTED_MODULE_1__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n    }\n    handleInputString(input) {\n        switch (input) {\n            case \"0\":\n                this.finished = true;\n                break;\n            default:\n                this.toggleSnap(input);\n        }\n    }\n    handleClickResult(input) {\n        throw new Error(\"\");\n    }\n    toggleSnap(input) {\n        const snapSettings = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getSnapSettings();\n        switch (input) {\n            case \"1\":\n                snapSettings.snapGrid = !snapSettings.snapGrid;\n                break;\n            case \"2\":\n                snapSettings.snapLine = !snapSettings.snapLine;\n                break;\n            case \"3\":\n                snapSettings.snapPoint = !snapSettings.snapPoint;\n                break;\n        }\n    }\n    handleClick() {\n    }\n    handleMouseMove() {\n    }\n    getInstructions() {\n        const snapSettings = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getSnapSettings();\n        const grid = snapSettings.snapGrid ? \"on\" : \"off\";\n        const point = snapSettings.snapPoint ? \"on\" : \"off\";\n        const line = snapSettings.snapLine ? \"on\" : \"off\";\n        return `0:Exit  1:Grid(${grid})  2:Line(${line})  3:Point(${point})  $`;\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc25hcHNDb21tYW5kLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNxQztBQUdBO0FBRTlCLE1BQU0sWUFBYSxTQUFRLDZDQUFPO0lBSXZDO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztJQUN4QixDQUFDO0lBRWUsaUJBQWlCLENBQUMsS0FBYTtRQUM3QyxRQUFRLEtBQUssRUFBRTtZQUNiLEtBQUssR0FBRztnQkFDTixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDckIsTUFBTTtZQUNSO2dCQUNFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDMUI7SUFDSCxDQUFDO0lBRWUsaUJBQWlCLENBQUMsS0FBbUI7UUFDbkQsTUFBTSxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRU8sVUFBVSxDQUFDLEtBQWE7UUFDOUIsTUFBTSxZQUFZLEdBQWlCLDBDQUFRLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQzVHLFFBQVEsS0FBSyxFQUFFO1lBQ2IsS0FBSyxHQUFHO2dCQUNOLFlBQVksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDO2dCQUMvQyxNQUFNO1lBQ1IsS0FBSyxHQUFHO2dCQUNOLFlBQVksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDO2dCQUMvQyxNQUFNO1lBQ1IsS0FBSyxHQUFHO2dCQUNOLFlBQVksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDO2dCQUNqRCxNQUFNO1NBQ1Q7SUFDSCxDQUFDO0lBRWUsV0FBVztJQUUzQixDQUFDO0lBRWUsZUFBZTtJQUUvQixDQUFDO0lBRWUsZUFBZTtRQUM3QixNQUFNLFlBQVksR0FBaUIsMENBQVEsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLHNCQUFzQixFQUFFLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDNUcsTUFBTSxJQUFJLEdBQVcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDMUQsTUFBTSxLQUFLLEdBQVcsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDNUQsTUFBTSxJQUFJLEdBQVcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7UUFDMUQsT0FBTyxrQkFBa0IsSUFBSSxhQUFhLElBQUksY0FBYyxLQUFLLE1BQU0sQ0FBQztJQUMxRSxDQUFDO0lBRWUsVUFBVTtRQUN4QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc25hcHNDb21tYW5kLnRzPzhiZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBTbmFwU2V0dGluZ3MgfSBmcm9tIFwiLi4vLi4vc2V0dGluZ3Mvc25hcHNNYW5hZ2VyXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmRcIjtcblxuZXhwb3J0IGNsYXNzIFNuYXBzQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgIGNhc2UgXCIwXCI6XG4gICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMudG9nZ2xlU25hcChpbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUNsaWNrUmVzdWx0KGlucHV0OiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJcIik7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZVNuYXAoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHNuYXBTZXR0aW5nczogU25hcFNldHRpbmdzID0gSU5TVEFOQ0UuZ2V0U2V0dGluZ3NNYW5hZ2VyKCkuZ2V0U25hcFNldHRpbmdzTWFuYWdlcigpLmdldFNuYXBTZXR0aW5ncygpO1xuICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgIGNhc2UgXCIxXCI6XG4gICAgICAgIHNuYXBTZXR0aW5ncy5zbmFwR3JpZCA9ICFzbmFwU2V0dGluZ3Muc25hcEdyaWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjJcIjpcbiAgICAgICAgc25hcFNldHRpbmdzLnNuYXBMaW5lID0gIXNuYXBTZXR0aW5ncy5zbmFwTGluZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiM1wiOlxuICAgICAgICBzbmFwU2V0dGluZ3Muc25hcFBvaW50ID0gIXNuYXBTZXR0aW5ncy5zbmFwUG9pbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBoYW5kbGVDbGljaygpOiB2b2lkIHtcblxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcblxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNuYXBTZXR0aW5nczogU25hcFNldHRpbmdzID0gSU5TVEFOQ0UuZ2V0U2V0dGluZ3NNYW5hZ2VyKCkuZ2V0U25hcFNldHRpbmdzTWFuYWdlcigpLmdldFNuYXBTZXR0aW5ncygpO1xuICAgIGNvbnN0IGdyaWQ6IHN0cmluZyA9IHNuYXBTZXR0aW5ncy5zbmFwR3JpZCA/IFwib25cIiA6IFwib2ZmXCI7XG4gICAgY29uc3QgcG9pbnQ6IHN0cmluZyA9IHNuYXBTZXR0aW5ncy5zbmFwUG9pbnQgPyBcIm9uXCIgOiBcIm9mZlwiO1xuICAgIGNvbnN0IGxpbmU6IHN0cmluZyA9IHNuYXBTZXR0aW5ncy5zbmFwTGluZSA/IFwib25cIiA6IFwib2ZmXCI7XG4gICAgcmV0dXJuIGAwOkV4aXQgIDE6R3JpZCgke2dyaWR9KSAgMjpMaW5lKCR7bGluZX0pICAzOlBvaW50KCR7cG9pbnR9KSAgJGA7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/snapsCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/sphereCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/sphereCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SphereCommand: () => (/* binding */ SphereCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_sphere__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/sphere */ \"./src/geometry/nurbs/sphere.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\nvar SphereCommandMode;\n(function (SphereCommandMode) {\n    SphereCommandMode[SphereCommandMode[\"Menu\"] = 0] = \"Menu\";\n    SphereCommandMode[SphereCommandMode[\"PointA\"] = 1] = \"PointA\";\n    SphereCommandMode[SphereCommandMode[\"PointB\"] = 2] = \"PointB\";\n    SphereCommandMode[SphereCommandMode[\"SelectCenter\"] = 3] = \"SelectCenter\";\n    SphereCommandMode[SphereCommandMode[\"SelectRadius\"] = 4] = \"SelectRadius\";\n})(SphereCommandMode || (SphereCommandMode = {}));\nclass SphereCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_2__.Clicker();\n        this.temp = null;\n        this.mode = SphereCommandMode.Menu;\n        this.sphere = null;\n    }\n    handleInputString(input) {\n        var _a;\n        if (input == \"0\") {\n            (_a = this.sphere) === null || _a === void 0 ? void 0 : _a.delete();\n            this.sphere = null;\n            this.done();\n        }\n        switch (this.mode) {\n            case SphereCommandMode.Menu:\n                if (input == \"1\")\n                    this.mode = SphereCommandMode.SelectCenter;\n                else if (input == \"2\")\n                    this.mode = SphereCommandMode.PointA;\n                break;\n            case SphereCommandMode.PointA:\n                break;\n            case SphereCommandMode.PointB:\n                break;\n            case SphereCommandMode.SelectCenter:\n                break;\n            case SphereCommandMode.SelectRadius:\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case SphereCommandMode.Menu:\n                break;\n            case SphereCommandMode.PointA:\n                this.temp = intersection.point;\n                this.mode = SphereCommandMode.PointB;\n                break;\n            case SphereCommandMode.PointB:\n                this.updateSphere(intersection.point);\n                this.done();\n                break;\n            case SphereCommandMode.SelectCenter:\n                this.temp = intersection.point;\n                this.mode = SphereCommandMode.SelectRadius;\n                break;\n            case SphereCommandMode.SelectRadius:\n                this.updateSphere(intersection.point);\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click();\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n        if (this.mode === SphereCommandMode.SelectRadius || this.mode === SphereCommandMode.PointB) {\n            const point = this.clicker.getPoint();\n            if (point && !wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.equals(point, this.temp)) {\n                this.updateSphere(point);\n            }\n        }\n    }\n    updateSphere(pos) {\n        if (this.mode === SphereCommandMode.SelectRadius) {\n            const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.temp, pos);\n            if (this.sphere === null)\n                this.sphere = (0,_geometry_nurbs_sphere__WEBPACK_IMPORTED_MODULE_1__.createSphere)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, 0, 0), 1);\n            const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.translation(this.temp);\n            const scale = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.uniformScaling(radius);\n            this.sphere.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.mul(translation, scale));\n            this.sphere.getControlCage().updatePoints();\n        }\n        else if (this.mode === SphereCommandMode.PointB) {\n            const center = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(this.temp, pos), 0.5);\n            const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.distance(this.temp, center);\n            if (this.sphere === null)\n                this.sphere = (0,_geometry_nurbs_sphere__WEBPACK_IMPORTED_MODULE_1__.createSphere)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0, 0, 0), 1);\n            const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.translation(center);\n            const scale = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.uniformScaling(radius);\n            this.sphere.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.mul(translation, scale));\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case SphereCommandMode.Menu:\n                return \"0:Exit  1:FromCenterAndRadius  2:Between2Points  $\";\n            case SphereCommandMode.PointA:\n                return \"0:Exit  Click Point A.  $\";\n            case SphereCommandMode.PointB:\n                return \"0:Exit  Click Point B.  $\";\n            case SphereCommandMode.SelectCenter:\n                return \"0:Exit  Click Center Point.  $\";\n            case SphereCommandMode.SelectRadius:\n                return \"0:Exit  Click radial point or enter radius.  $\";\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    done() {\n        this.finished = true;\n        this.clicker.destroy();\n        if (this.sphere) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.sphere);\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc3BoZXJlQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUQ7QUFDaEI7QUFFc0I7QUFFdEI7QUFDQTtBQUVyQyxJQUFLLGlCQU1KO0FBTkQsV0FBSyxpQkFBaUI7SUFDcEIseURBQUk7SUFDSiw2REFBTTtJQUNOLDZEQUFNO0lBQ04seUVBQVk7SUFDWix5RUFBWTtBQUNkLENBQUMsRUFOSSxpQkFBaUIsS0FBakIsaUJBQWlCLFFBTXJCO0FBRU0sTUFBTSxhQUFjLFNBQVEsNkNBQU87SUFReEM7UUFDRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSw2Q0FBTyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7UUFDbkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUVELGlCQUFpQixDQUFDLEtBQWE7O1FBQzdCLElBQUksS0FBSyxJQUFJLEdBQUcsRUFBRTtZQUNoQixVQUFJLENBQUMsTUFBTSwwQ0FBRSxNQUFNLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDYjtRQUNELFFBQVEsSUFBSSxDQUFDLElBQUksRUFBRTtZQUNqQixLQUFLLGlCQUFpQixDQUFDLElBQUk7Z0JBQ3pCLElBQUksS0FBSyxJQUFJLEdBQUc7b0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUM7cUJBQ3hELElBQUksS0FBSyxJQUFJLEdBQUc7b0JBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7Z0JBQzVELE1BQU07WUFD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QUFDO1lBQ3JDLEtBQUssaUJBQWlCLENBQUMsWUFBWTtnQkFDakMsT0FBTyxnQ0FBZ0MsQ0FBQztZQUMxQyxLQUFLLGlCQUFpQixDQUFDLFlBQVk7Z0JBQ2pDLE9BQU8sZ0RBQWdELENBQUM7WUFDMUQ7Z0JBQ0UsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1NBQzNDO0lBQ0gsQ0FBQztJQUVPLElBQUk7UUFDVixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ3ZCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNmLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUM5QztJQUNILENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxJQUFJLENBQUMsUUFBUTtJQUN0QixDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9zcGhlcmVDb21tYW5kLnRzPzVlMmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgbWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBjcmVhdGVTcGhlcmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvc3BoZXJlXCI7XG5pbXBvcnQgeyBTdXJmYWNlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL3N1cmZhY2VcIjtcbmltcG9ydCB7IENsaWNrZXIgfSBmcm9tIFwiLi4vY2xpY2tlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cbmVudW0gU3BoZXJlQ29tbWFuZE1vZGUge1xuICBNZW51LFxuICBQb2ludEEsXG4gIFBvaW50QixcbiAgU2VsZWN0Q2VudGVyLFxuICBTZWxlY3RSYWRpdXNcbn1cblxuZXhwb3J0IGNsYXNzIFNwaGVyZUNvbW1hbmQgZXh0ZW5kcyBDb21tYW5kIHtcblxuICBwcml2YXRlIGZpbmlzaGVkOiBib29sZWFuO1xuICBwcml2YXRlIGNsaWNrZXI6IENsaWNrZXI7XG4gIHByaXZhdGUgdGVtcDogVmVjMyB8IG51bGw7XG4gIHByaXZhdGUgbW9kZTogU3BoZXJlQ29tbWFuZE1vZGU7XG4gIHByaXZhdGUgc3BoZXJlOiBTdXJmYWNlIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsaWNrZXIgPSBuZXcgQ2xpY2tlcigpO1xuICAgIHRoaXMudGVtcCA9IG51bGw7XG4gICAgdGhpcy5tb2RlID0gU3BoZXJlQ29tbWFuZE1vZGUuTWVudTtcbiAgICB0aGlzLnNwaGVyZSA9IG51bGw7XG4gIH1cblxuICBoYW5kbGVJbnB1dFN0cmluZyhpbnB1dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGlucHV0ID09IFwiMFwiKSB7XG4gICAgICB0aGlzLnNwaGVyZT8uZGVsZXRlKCk7XG4gICAgICB0aGlzLnNwaGVyZSA9IG51bGw7XG4gICAgICB0aGlzLmRvbmUoKTtcbiAgICB9XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgU3BoZXJlQ29tbWFuZE1vZGUuTWVudTpcbiAgICAgICAgaWYgKGlucHV0ID09IFwiMVwiKSB0aGlzLm1vZGUgPSBTcGhlcmVDb21tYW5kTW9kZS5TZWxlY3RDZW50ZXI7XG4gICAgICAgIGVsc2UgaWYgKGlucHV0ID09IFwiMlwiKSB0aGlzLm1vZGUgPSBTcGhlcmVDb21tYW5kTW9kZS5Qb2ludEE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTcGhlcmVDb21tYW5kTW9kZS5Qb2ludEE6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTcGhlcmVDb21tYW5kTW9kZS5Qb2ludEI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTcGhlcmVDb21tYW5kTW9kZS5TZWxlY3RDZW50ZXI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTcGhlcmVDb21tYW5kTW9kZS5TZWxlY3RSYWRpdXM6XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuXG4gIH1cblxuICBoYW5kbGVDbGlja1Jlc3VsdChpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbik6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFNwaGVyZUNvbW1hbmRNb2RlLk1lbnU6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTcGhlcmVDb21tYW5kTW9kZS5Qb2ludEE6XG4gICAgICAgIHRoaXMudGVtcCA9IGludGVyc2VjdGlvbi5wb2ludDtcbiAgICAgICAgdGhpcy5tb2RlID0gU3BoZXJlQ29tbWFuZE1vZGUuUG9pbnRCO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3BoZXJlQ29tbWFuZE1vZGUuUG9pbnRCOlxuICAgICAgICB0aGlzLnVwZGF0ZVNwaGVyZShpbnRlcnNlY3Rpb24ucG9pbnQpO1xuICAgICAgICB0aGlzLmRvbmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNwaGVyZUNvbW1hbmRNb2RlLlNlbGVjdENlbnRlcjpcbiAgICAgICAgdGhpcy50ZW1wID0gaW50ZXJzZWN0aW9uLnBvaW50O1xuICAgICAgICB0aGlzLm1vZGUgPSBTcGhlcmVDb21tYW5kTW9kZS5TZWxlY3RSYWRpdXM7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTcGhlcmVDb21tYW5kTW9kZS5TZWxlY3RSYWRpdXM6XG4gICAgICAgIHRoaXMudXBkYXRlU3BoZXJlKGludGVyc2VjdGlvbi5wb2ludCk7XG4gICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgICB0aGlzLmNsaWNrZXIucmVzZXQoKTtcbiAgfVxuICBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIuY2xpY2soKTtcbiAgfVxuXG4gIGhhbmRsZU1vdXNlTW92ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsaWNrZXIub25Nb3VzZU1vdmUoKTtcbiAgICBpZiAodGhpcy5tb2RlID09PSBTcGhlcmVDb21tYW5kTW9kZS5TZWxlY3RSYWRpdXMgfHwgdGhpcy5tb2RlID09PSBTcGhlcmVDb21tYW5kTW9kZS5Qb2ludEIpIHtcbiAgICAgIGNvbnN0IHBvaW50OiBWZWMzIHwgbnVsbCA9IHRoaXMuY2xpY2tlci5nZXRQb2ludCgpO1xuICAgICAgaWYgKHBvaW50ICYmICF2ZWMzLmVxdWFscyhwb2ludCwgdGhpcy50ZW1wISkpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTcGhlcmUocG9pbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3BoZXJlKHBvczogVmVjMyk6IHZvaWQge1xuICAgIGlmICh0aGlzLm1vZGUgPT09IFNwaGVyZUNvbW1hbmRNb2RlLlNlbGVjdFJhZGl1cykge1xuICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHRoaXMudGVtcCEsIHBvcyk7XG4gICAgICBpZiAodGhpcy5zcGhlcmUgPT09IG51bGwpIHRoaXMuc3BoZXJlID0gY3JlYXRlU3BoZXJlKHZlYzMuY3JlYXRlKDAsIDAsIDApLCAxKTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbih0aGlzLnRlbXAhKTtcbiAgICAgIGNvbnN0IHNjYWxlOiBNYXQ0ID0gbWF0NC51bmlmb3JtU2NhbGluZyhyYWRpdXMpO1xuICAgICAgdGhpcy5zcGhlcmUuc2V0TW9kZWwobWF0NC5tdWwodHJhbnNsYXRpb24sIHNjYWxlKSk7XG4gICAgICB0aGlzLnNwaGVyZS5nZXRDb250cm9sQ2FnZSgpLnVwZGF0ZVBvaW50cygpO1xuXG4gICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09IFNwaGVyZUNvbW1hbmRNb2RlLlBvaW50Qikge1xuICAgICAgY29uc3QgY2VudGVyOiBWZWMzID0gdmVjMy5zY2FsZSh2ZWMzLmFkZCh0aGlzLnRlbXAhLCBwb3MpLCAwLjUpO1xuICAgICAgY29uc3QgcmFkaXVzOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHRoaXMudGVtcCEsIGNlbnRlcik7XG4gICAgICBpZiAodGhpcy5zcGhlcmUgPT09IG51bGwpIHRoaXMuc3BoZXJlID0gY3JlYXRlU3BoZXJlKHZlYzMuY3JlYXRlKDAsIDAsIDApLCAxKTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbihjZW50ZXIpO1xuICAgICAgY29uc3Qgc2NhbGU6IE1hdDQgPSBtYXQ0LnVuaWZvcm1TY2FsaW5nKHJhZGl1cyk7XG4gICAgICB0aGlzLnNwaGVyZS5zZXRNb2RlbChtYXQ0Lm11bCh0cmFuc2xhdGlvbiwgc2NhbGUpKTtcbiAgICB9XG4gIH1cblxuXG4gIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFNwaGVyZUNvbW1hbmRNb2RlLk1lbnU6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgMTpGcm9tQ2VudGVyQW5kUmFkaXVzICAyOkJldHdlZW4yUG9pbnRzICAkXCI7XG4gICAgICBjYXNlIFNwaGVyZUNvbW1hbmRNb2RlLlBvaW50QTpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBDbGljayBQb2ludCBBLiAgJFwiO1xuICAgICAgY2FzZSBTcGhlcmVDb21tYW5kTW9kZS5Qb2ludEI6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgUG9pbnQgQi4gICRcIjtcbiAgICAgIGNhc2UgU3BoZXJlQ29tbWFuZE1vZGUuU2VsZWN0Q2VudGVyOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIENlbnRlciBQb2ludC4gICRcIjtcbiAgICAgIGNhc2UgU3BoZXJlQ29tbWFuZE1vZGUuU2VsZWN0UmFkaXVzOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIENsaWNrIHJhZGlhbCBwb2ludCBvciBlbnRlciByYWRpdXMuICAkXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRvbmUoKTogdm9pZCB7XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcbiAgICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkodGhpcy5zcGhlcmUpO1xuICAgIH1cbiAgfVxuXG4gIGlzRmluaXNoZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWRcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/sphereCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/splitCurveCommand.ts":
/*!****************************************************!*\
  !*** ./src/commands/commands/splitCurveCommand.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SplitCurveCommand: () => (/* binding */ SplitCurveCommand)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_splitCurve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/splitCurve */ \"./src/geometry/nurbs/splitCurve.ts\");\n/* harmony import */ var _geometry_points__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/points */ \"./src/geometry/points.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\n\nvar SplitCurveCommandMode;\n(function (SplitCurveCommandMode) {\n    SplitCurveCommandMode[SplitCurveCommandMode[\"SelectCurve\"] = 0] = \"SelectCurve\";\n    SplitCurveCommandMode[SplitCurveCommandMode[\"SelectSplitPoint\"] = 1] = \"SelectSplitPoint\";\n})(SplitCurveCommandMode || (SplitCurveCommandMode = {}));\nclass SplitCurveCommand extends _command__WEBPACK_IMPORTED_MODULE_5__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_4__.Clicker();\n        this.mode = SplitCurveCommandMode.SelectCurve;\n        this.showSuggestions = true;\n        this.suggestedPoints = null;\n        this.curve = null;\n        this.filteredKnots = [];\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().reset();\n    }\n    handleInputString(input) {\n        if (input == \"0\") {\n            this.done();\n        }\n        if (this.mode === SplitCurveCommandMode.SelectSplitPoint) {\n            if (input == \"1\") {\n                this.showSuggestions = !this.showSuggestions;\n                if (this.showSuggestions) {\n                    this.generateSuggestionPoints();\n                }\n                else {\n                    if (this.suggestedPoints) {\n                        this.suggestedPoints.delete();\n                        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(this.suggestedPoints);\n                        this.suggestedPoints = null;\n                    }\n                }\n            }\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case SplitCurveCommandMode.SelectCurve:\n                this.curve = intersection.geometry;\n                this.curve.select();\n                this.generateSuggestionPoints();\n                this.mode = SplitCurveCommandMode.SelectSplitPoint;\n                break;\n            case SplitCurveCommandMode.SelectSplitPoint:\n                if (this.suggestedPoints && intersection.geometry === this.suggestedPoints) {\n                    var u = this.filteredKnots[intersection.objectSubID];\n                }\n                else {\n                    intersection.transform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.inverse(this.curve.getModelRecursive()), new _geometry_ray__WEBPACK_IMPORTED_MODULE_3__.Ray([0, 0, 0], [0, 0, 1]));\n                    var u = this.curve.getU(intersection);\n                }\n                const res = (0,_geometry_nurbs_splitCurve__WEBPACK_IMPORTED_MODULE_1__.splitCurve)(this.curve, u);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(res[0]);\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(res[1]);\n                this.done();\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n        this.clicker.reset();\n    }\n    generateSuggestionPoints() {\n        const knots = this.curve.getKnots();\n        const min = knots[0];\n        const max = knots.at(-1);\n        this.filteredKnots = [];\n        var prevKnot = NaN;\n        for (const knot of knots) {\n            if (knot === min)\n                continue;\n            if (knot === max)\n                continue;\n            if (knot === prevKnot)\n                continue;\n            this.filteredKnots.push(knot);\n            prevKnot = knot;\n        }\n        if (this.filteredKnots.length === 0)\n            return;\n        const pointsAtKnots = [];\n        const model = this.curve.getModelRecursive();\n        for (const knot of this.filteredKnots) {\n            pointsAtKnots.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.transformMat4(this.curve.sample(knot), model));\n        }\n        this.suggestedPoints = new _geometry_points__WEBPACK_IMPORTED_MODULE_2__.Points(null, pointsAtKnots);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.suggestedPoints);\n    }\n    handleClick() {\n        switch (this.mode) {\n            case SplitCurveCommandMode.SelectCurve:\n                this.clicker.click([\"curve\"]);\n                break;\n            case SplitCurveCommandMode.SelectSplitPoint:\n                const ids = [this.curve.getID()];\n                if (this.suggestedPoints)\n                    ids.push(this.suggestedPoints.getID());\n                this.clicker.click(undefined, ids);\n                break;\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove();\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case SplitCurveCommandMode.SelectCurve:\n                return \"0:Exit  Select curve to split.  $\";\n            case SplitCurveCommandMode.SelectSplitPoint:\n                if (this.showSuggestions) {\n                    return \"0:Exit  1:HideSuggestions  Select split point.  $\";\n                }\n                else {\n                    return \"0:Exit  1:ShowSuggestions  Select split point.  $\";\n                }\n            default:\n                throw new Error(\"case not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    done() {\n        var _a;\n        this.finished = true;\n        this.clicker.destroy();\n        (_a = this.curve) === null || _a === void 0 ? void 0 : _a.unSelect();\n        if (this.suggestedPoints) {\n            this.suggestedPoints.delete();\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeGeometry(this.suggestedPoints);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc3BsaXRDdXJ2ZUNvbW1hbmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDaEI7QUFHd0I7QUFDZDtBQUNOO0FBQ0o7QUFDQTtBQUVyQyxJQUFLLHFCQUdKO0FBSEQsV0FBSyxxQkFBcUI7SUFDeEIsK0VBQVc7SUFDWCx5RkFBZ0I7QUFDbEIsQ0FBQyxFQUhJLHFCQUFxQixLQUFyQixxQkFBcUIsUUFHekI7QUFFTSxNQUFNLGlCQUFrQixTQUFRLDZDQUFPO0lBVTVDO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksNkNBQU8sRUFBRSxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcscUJBQXFCLENBQUMsV0FBVyxDQUFDO1FBQzlDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBQzVCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBQzVCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLDBDQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakMsQ0FBQztJQUVELGlCQUFpQixDQUFDLEtBQWE7UUFDN0IsSUFBSSxLQUFLLElBQUksR0FBRyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNiO1FBQ0QsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLHFCQUFxQixDQUFDLGdCQUFnQixFQUFFO1lBQ3hELElBQUksS0FBSyxJQUFJLEdBQUcsRUFBRTtnQkFDaEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUM7Z0JBQzdDLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtvQkFDeEIsSUFBSSxDQUFDLHdCQUF3QixFQUFF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Q0FBQztJQUVELGVBQWU7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFFRCxlQUFlO1FBQ2IsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUsscUJBQXFCLENBQUMsV0FBVztnQkFDcEMsT0FBTyxtQ0FBbUMsQ0FBQztZQUM3QyxLQUFLLHFCQUFxQixDQUFDLGdCQUFnQjtnQkFDekMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO29CQUN4QixPQUFPLG1EQUFtRCxDQUFDO2lCQUM1RDtxQkFBTTtvQkFDTCxPQUFPLG1EQUFtRCxDQUFDO2lCQUM1RDtZQUNIO2dCQUNFLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQztTQUMzQztJQUNILENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7SUFFTyxJQUFJOztRQUNWLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDdkIsVUFBSSxDQUFDLEtBQUssMENBQUUsUUFBUSxFQUFFLENBQUM7UUFDdkIsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDOUIsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQzFEO0lBQ0gsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvc3BsaXRDdXJ2ZUNvbW1hbmQudHM/YzM3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL2N1cnZlXCI7XG5pbXBvcnQgeyBzcGxpdEN1cnZlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL3NwbGl0Q3VydmVcIjtcbmltcG9ydCB7IFBvaW50cyB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9wb2ludHNcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yYXlcIjtcbmltcG9ydCB7IENsaWNrZXIgfSBmcm9tIFwiLi4vY2xpY2tlclwiO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kXCI7XG5cbmVudW0gU3BsaXRDdXJ2ZUNvbW1hbmRNb2RlIHtcbiAgU2VsZWN0Q3VydmUsXG4gIFNlbGVjdFNwbGl0UG9pbnQsXG59XG5cbmV4cG9ydCBjbGFzcyBTcGxpdEN1cnZlQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgY2xpY2tlcjogQ2xpY2tlcjtcbiAgcHJpdmF0ZSBtb2RlOiBTcGxpdEN1cnZlQ29tbWFuZE1vZGU7XG4gIHByaXZhdGUgc2hvd1N1Z2dlc3Rpb25zOiBib29sZWFuO1xuICBwcml2YXRlIHN1Z2dlc3RlZFBvaW50czogUG9pbnRzIHwgbnVsbDtcbiAgcHJpdmF0ZSBjdXJ2ZTogQ3VydmUgfCBudWxsO1xuICBwcml2YXRlIGZpbHRlcmVkS25vdHM6IG51bWJlcltdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2xpY2tlciA9IG5ldyBDbGlja2VyKCk7XG4gICAgdGhpcy5tb2RlID0gU3BsaXRDdXJ2ZUNvbW1hbmRNb2RlLlNlbGVjdEN1cnZlO1xuICAgIHRoaXMuc2hvd1N1Z2dlc3Rpb25zID0gdHJ1ZTtcbiAgICB0aGlzLnN1Z2dlc3RlZFBvaW50cyA9IG51bGw7XG4gICAgdGhpcy5jdXJ2ZSA9IG51bGw7XG4gICAgdGhpcy5maWx0ZXJlZEtub3RzID0gW107XG4gICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5yZXNldCgpO1xuICB9XG5cbiAgaGFuZGxlSW5wdXRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChpbnB1dCA9PSBcIjBcIikge1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09IFNwbGl0Q3VydmVDb21tYW5kTW9kZS5TZWxlY3RTcGxpdFBvaW50KSB7XG4gICAgICBpZiAoaW5wdXQgPT0gXCIxXCIpIHtcbiAgICAgICAgdGhpcy5zaG93U3VnZ2VzdGlvbnMgPSAhdGhpcy5zaG93U3VnZ2VzdGlvbnM7XG4gICAgICAgIGlmICh0aGlzLnNob3dTdWdnZXN0aW9ucykge1xuICAgICAgICAgIHRoaXMuZ2VuZXJhdGVTdWdnZXN0aW9uUG9pbnRzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3VnZ2VzdGVkUG9pbnRzKSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFBvaW50cyEuZGVsZXRlKCk7XG4gICAgICAgICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUdlb21ldHJ5KHRoaXMuc3VnZ2VzdGVkUG9pbnRzISk7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3RlZFBvaW50cyA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tSZXN1bHQoaW50ZXJzZWN0aW9uOiBJbnRlcnNlY3Rpb24pOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBTcGxpdEN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmU6XG4gICAgICAgIHRoaXMuY3VydmUgPSA8Q3VydmU+aW50ZXJzZWN0aW9uLmdlb21ldHJ5O1xuICAgICAgICB0aGlzLmN1cnZlLnNlbGVjdCgpO1xuICAgICAgICB0aGlzLmdlbmVyYXRlU3VnZ2VzdGlvblBvaW50cygpO1xuICAgICAgICB0aGlzLm1vZGUgPSBTcGxpdEN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0U3BsaXRQb2ludDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNwbGl0Q3VydmVDb21tYW5kTW9kZS5TZWxlY3RTcGxpdFBvaW50OlxuICAgICAgICBpZiAodGhpcy5zdWdnZXN0ZWRQb2ludHMgJiYgaW50ZXJzZWN0aW9uLmdlb21ldHJ5ID09PSB0aGlzLnN1Z2dlc3RlZFBvaW50cykge1xuICAgICAgICAgIHZhciB1OiBudW1iZXIgPSB0aGlzLmZpbHRlcmVkS25vdHNbaW50ZXJzZWN0aW9uLm9iamVjdFN1YklEXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnRlcnNlY3Rpb24udHJhbnNmb3JtKG1hdDQuaW52ZXJzZSh0aGlzLmN1cnZlIS5nZXRNb2RlbFJlY3Vyc2l2ZSgpKSwgbmV3IFJheShbMCwgMCwgMF0sIFswLCAwLCAxXSkpO1xuICAgICAgICAgIHZhciB1OiBudW1iZXIgPSB0aGlzLmN1cnZlIS5nZXRVKGludGVyc2VjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzOiBbQ3VydmUsIEN1cnZlXSA9IHNwbGl0Q3VydmUodGhpcy5jdXJ2ZSEsIHUpO1xuICAgICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KHJlc1swXSk7XG4gICAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkocmVzWzFdKTtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICAgIHRoaXMuY2xpY2tlci5yZXNldCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVN1Z2dlc3Rpb25Qb2ludHMoKSB7XG4gICAgY29uc3Qga25vdHM6IG51bWJlcltdID0gdGhpcy5jdXJ2ZSEuZ2V0S25vdHMoKTtcbiAgICBjb25zdCBtaW46IG51bWJlciA9IGtub3RzWzBdO1xuICAgIGNvbnN0IG1heDogbnVtYmVyID0ga25vdHMuYXQoLTEpITtcbiAgICB0aGlzLmZpbHRlcmVkS25vdHMgPSBbXTtcbiAgICB2YXIgcHJldktub3Q6IG51bWJlciA9IE5hTjtcblxuICAgIGZvciAoY29uc3Qga25vdCBvZiBrbm90cykge1xuICAgICAgaWYgKGtub3QgPT09IG1pbikgY29udGludWU7XG4gICAgICBpZiAoa25vdCA9PT0gbWF4KSBjb250aW51ZTtcbiAgICAgIGlmIChrbm90ID09PSBwcmV2S25vdCkgY29udGludWU7XG4gICAgICB0aGlzLmZpbHRlcmVkS25vdHMucHVzaChrbm90KTtcbiAgICAgIHByZXZLbm90ID0ga25vdDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5maWx0ZXJlZEtub3RzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIGNvbnN0IHBvaW50c0F0S25vdHM6IFZlYzNbXSA9IFtdO1xuICAgIGNvbnN0IG1vZGVsOiBNYXQ0ID0gdGhpcy5jdXJ2ZSEuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBmb3IgKGNvbnN0IGtub3Qgb2YgdGhpcy5maWx0ZXJlZEtub3RzKSB7XG4gICAgICBwb2ludHNBdEtub3RzLnB1c2godmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMuY3VydmUhLnNhbXBsZShrbm90KSwgbW9kZWwpKTtcbiAgICB9XG5cbiAgICB0aGlzLnN1Z2dlc3RlZFBvaW50cyA9IG5ldyBQb2ludHMobnVsbCwgcG9pbnRzQXRLbm90cyk7XG4gICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeSh0aGlzLnN1Z2dlc3RlZFBvaW50cyk7XG4gIH1cblxuICBoYW5kbGVDbGljaygpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBTcGxpdEN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmU6XG4gICAgICAgIHRoaXMuY2xpY2tlci5jbGljayhbXCJjdXJ2ZVwiXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBTcGxpdEN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0U3BsaXRQb2ludDpcbiAgICAgICAgY29uc3QgaWRzOiBudW1iZXJbXSA9IFt0aGlzLmN1cnZlIS5nZXRJRCgpXTtcbiAgICAgICAgaWYgKHRoaXMuc3VnZ2VzdGVkUG9pbnRzKSBpZHMucHVzaCh0aGlzLnN1Z2dlc3RlZFBvaW50cy5nZXRJRCgpKTtcbiAgICAgICAgdGhpcy5jbGlja2VyLmNsaWNrKHVuZGVmaW5lZCwgaWRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKCk7XG4gIH1cblxuICBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBTcGxpdEN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0Q3VydmU6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgU2VsZWN0IGN1cnZlIHRvIHNwbGl0LiAgJFwiO1xuICAgICAgY2FzZSBTcGxpdEN1cnZlQ29tbWFuZE1vZGUuU2VsZWN0U3BsaXRQb2ludDpcbiAgICAgICAgaWYgKHRoaXMuc2hvd1N1Z2dlc3Rpb25zKSB7XG4gICAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICAxOkhpZGVTdWdnZXN0aW9ucyAgU2VsZWN0IHNwbGl0IHBvaW50LiAgJFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBcIjA6RXhpdCAgMTpTaG93U3VnZ2VzdGlvbnMgIFNlbGVjdCBzcGxpdCBwb2ludC4gICRcIjtcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICB9XG5cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZG9uZSgpOiB2b2lkIHtcbiAgICB0aGlzLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICB0aGlzLmNsaWNrZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuY3VydmU/LnVuU2VsZWN0KCk7XG4gICAgaWYgKHRoaXMuc3VnZ2VzdGVkUG9pbnRzKSB7XG4gICAgICB0aGlzLnN1Z2dlc3RlZFBvaW50cy5kZWxldGUoKTtcbiAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlR2VvbWV0cnkodGhpcy5zdWdnZXN0ZWRQb2ludHMpO1xuICAgIH1cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/commands/splitCurveCommand.ts\n");

/***/ }),

/***/ "./src/commands/commands/sweep2Command.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/sweep2Command.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Sweep2Command: () => (/* binding */ Sweep2Command)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/nurbs/curve */ \"./src/geometry/nurbs/curve.ts\");\n/* harmony import */ var _geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/nurbs/loft */ \"./src/geometry/nurbs/loft.ts\");\n/* harmony import */ var _geometry_nurbs_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../geometry/nurbs/utils */ \"./src/geometry/nurbs/utils.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _clicker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../clicker */ \"./src/commands/clicker.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\n\n\n\n\nvar Sweep2CommandMode;\n(function (Sweep2CommandMode) {\n    Sweep2CommandMode[Sweep2CommandMode[\"SelectPipe1\"] = 0] = \"SelectPipe1\";\n    Sweep2CommandMode[Sweep2CommandMode[\"SelectPipe2\"] = 1] = \"SelectPipe2\";\n    Sweep2CommandMode[Sweep2CommandMode[\"SelectCrossSection1\"] = 2] = \"SelectCrossSection1\";\n    Sweep2CommandMode[Sweep2CommandMode[\"SelectCrossSection2\"] = 3] = \"SelectCrossSection2\";\n    Sweep2CommandMode[Sweep2CommandMode[\"Preview\"] = 4] = \"Preview\";\n})(Sweep2CommandMode || (Sweep2CommandMode = {}));\nclass Sweep2Command extends _command__WEBPACK_IMPORTED_MODULE_6__.Command {\n    constructor() {\n        super();\n        this.finished = false;\n        this.clicker = new _clicker__WEBPACK_IMPORTED_MODULE_5__.Clicker();\n        this.mode = Sweep2CommandMode.SelectPipe1;\n        this.surface = null;\n        this.pipe1 = null;\n        this.pipe2 = null;\n        this.crossSection1 = null;\n        this.crossSection2 = null;\n        this.preserveHeight = false;\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().reset();\n    }\n    handleInputString(input) {\n        var _a;\n        if (input == \"0\") {\n            (_a = this.surface) === null || _a === void 0 ? void 0 : _a.delete();\n            this.surface = null;\n            this.done();\n        }\n        if (this.mode === Sweep2CommandMode.Preview) {\n            switch (input) {\n                case \"\":\n                    this.done();\n                    break;\n                case \"1\":\n                    this.preserveHeight = !this.preserveHeight;\n                    this.generateSurface();\n                    break;\n            }\n        }\n    }\n    handleClickResult(intersection) {\n        switch (this.mode) {\n            case Sweep2CommandMode.SelectPipe1:\n                this.pipe1 = intersection.geometry;\n                this.pipe1.select();\n                this.mode = Sweep2CommandMode.SelectPipe2;\n                break;\n            case Sweep2CommandMode.SelectPipe2:\n                this.pipe2 = intersection.geometry;\n                this.pipe2.select();\n                this.mode = Sweep2CommandMode.SelectCrossSection1;\n                break;\n            case Sweep2CommandMode.SelectCrossSection1:\n                this.crossSection1 = intersection.geometry;\n                this.crossSection1.select();\n                this.mode = Sweep2CommandMode.SelectCrossSection2;\n                break;\n            case Sweep2CommandMode.SelectCrossSection2:\n                this.crossSection2 = intersection.geometry;\n                this.crossSection2.select();\n                this.generateSurface();\n                this.mode = Sweep2CommandMode.Preview;\n                break;\n            default:\n                throw new Error(\"case not handled\");\n        }\n        this.clicker.reset();\n    }\n    handleClick() {\n        this.clicker.click([\"curve\"]);\n    }\n    handleMouseMove() {\n        this.clicker.onMouseMove([\"curve\"]);\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case Sweep2CommandMode.SelectPipe1:\n                return \"0:Exit  Select pipe 1.  $\";\n            case Sweep2CommandMode.SelectPipe2:\n                return \"0:Exit  Select pipe 2.  $\";\n            case Sweep2CommandMode.SelectCrossSection1:\n                return \"0:Exit  Select cross section 1.  $\";\n            case Sweep2CommandMode.SelectCrossSection2:\n                return \"0:Exit  Select cross section 2.  $\";\n            case Sweep2CommandMode.Preview:\n                return `0:Exit  1:PreserveHeight(${this.preserveHeight ? \"True\" : \"False\"})  $`;\n            default:\n                throw new Error(\"case not handled\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n    generateSurface() {\n        var _a;\n        (_a = this.surface) === null || _a === void 0 ? void 0 : _a.delete();\n        // create clones\n        const p1 = this.pipe1.clone();\n        const p2 = this.pipe2.clone();\n        const c1 = this.crossSection1.clone();\n        const c2 = this.crossSection2.clone();\n        // Match degrees\n        (0,_geometry_nurbs_utils__WEBPACK_IMPORTED_MODULE_3__.matchDegrees)([p1, p2]);\n        (0,_geometry_nurbs_utils__WEBPACK_IMPORTED_MODULE_3__.matchDegrees)([c1, c2]);\n        // Match knots\n        (0,_geometry_nurbs_utils__WEBPACK_IMPORTED_MODULE_3__.matchKnots)([p1, p2]);\n        (0,_geometry_nurbs_utils__WEBPACK_IMPORTED_MODULE_3__.matchKnots)([c1, c2]);\n        // Align directions\n        const face = (a, b, c) => {\n            // make a face b not c\n            const aEnd = a.getEndPoint();\n            const bStart = b.getStartPoint();\n            const bEnd = b.getEndPoint();\n            const cStart = c.getStartPoint();\n            const cEnd = c.getEndPoint();\n            const distB = Math.min(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.dist(aEnd, bEnd), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.dist(aEnd, bStart));\n            const distC = Math.min(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.dist(aEnd, cEnd), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.dist(aEnd, cStart));\n            if (distC < distB)\n                a.reverse();\n        };\n        face(c1, p2, p1);\n        face(c2, p2, p1);\n        face(p1, c2, c1);\n        face(p2, c2, c1);\n        // create new controls \n        const p1Controls = p1.getControlPoints();\n        const p2Controls = p2.getControlPoints();\n        const controls = [];\n        const c1Controls = c1.getWeightedControlPoints();\n        const c2Controls = c2.getWeightedControlPoints();\n        const fromO1Start = p1.getStartPoint();\n        const fromO2Start = p2.getStartPoint();\n        const fromY1Start = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(fromO2Start, fromO1Start);\n        const fromY2Start = fromY1Start;\n        const fromX1Start = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(p1.getStartRay().getDirection(), -1);\n        const fromX2Start = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(p2.getStartRay().getDirection(), -1);\n        const fromZ1Start = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(fromX1Start, fromY1Start);\n        const fromZ2Start = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(fromX2Start, fromY2Start);\n        const fromO1End = p1.getEndPoint();\n        const fromO2End = p2.getEndPoint();\n        const fromY1End = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(fromO2End, fromO1End);\n        const fromY2End = fromY1End;\n        const fromX1End = p1.getEndRay().getDirection();\n        const fromX2End = p2.getEndRay().getDirection();\n        const fromZ1End = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(fromX1End, fromY1End);\n        const fromZ2End = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(fromX2End, fromY2End);\n        const c1Ratios = [];\n        const c2Ratios = [];\n        for (let i = 0; i < c1.getControlPointCount(); i++) {\n            const c1StartDist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.distance(c1Controls[i], c1Controls[0]);\n            const c1EndDist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.distance(c1Controls[i], c1Controls.at(-1));\n            c1Ratios.push(c1StartDist / (c1StartDist + c1EndDist));\n            const c2StartDist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.distance(c2Controls[i], c2Controls[0]);\n            const c2EndDist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.distance(c2Controls[i], c2Controls.at(-1));\n            c2Ratios.push(c2StartDist / (c2StartDist + c2EndDist));\n        }\n        controls.push(c1);\n        for (let i = 1; i < p1.getControlPointCount() - 1; i++) {\n            const toO1 = p1Controls[i];\n            const toO2 = p2Controls[i];\n            const toY1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(toO2, toO1);\n            const toY2 = toY1;\n            const x1Prev = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(p1Controls[i], p1Controls[i - 1]));\n            const x2Prev = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(p2Controls[i], p2Controls[i - 1]));\n            const x1Next = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(p1Controls[i + 1], p1Controls[i]));\n            const x2Next = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(p2Controls[i + 1], p2Controls[i]));\n            const toX1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.add(x1Prev, x1Next));\n            const toX2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.add(x2Prev, x2Next));\n            var toZ1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(toX1, toY1);\n            var toZ2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(toX2, toY2);\n            if (this.preserveHeight) {\n                toZ1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(toZ1);\n                toZ1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(toZ1, (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.lerp)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.length(fromZ1Start), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.length(fromZ1End), i / (p1.getControlPointCount() - 1)));\n                toZ2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(toZ2);\n                toZ2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(toZ2, (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.lerp)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.length(fromZ2Start), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.length(fromZ2End), i / (p1.getControlPointCount() - 1)));\n            }\n            const cob1Start = (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.changeOfBasis)(fromX1Start, fromY1Start, fromZ1Start, fromO1Start, toX1, toY1, toZ1, toO1);\n            const cob2Start = (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.changeOfBasis)(fromX2Start, fromY2Start, fromZ2Start, fromO2Start, toX2, toY2, toZ2, toO2);\n            const cob1End = (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.changeOfBasis)(fromX1End, fromY1End, fromZ1End, fromO1End, toX1, toY1, toZ1, toO1);\n            const cob2End = (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.changeOfBasis)(fromX2End, fromY2End, fromZ2End, fromO2End, toX2, toY2, toZ2, toO2);\n            const controlRow = [];\n            for (let j = 0; j < c1.getControlPointCount(); j++) {\n                const c1p1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(c1Controls[j], cob1Start);\n                const c1p2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(c1Controls[j], cob2Start);\n                const c1Combined = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.lerp(c1p1, c1p2, c1Ratios[j]);\n                const c2p1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(c2Controls[j], cob1End);\n                const c2p2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(c2Controls[j], cob2End);\n                const c2Combined = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.lerp(c2p1, c2p2, c2Ratios[j]);\n                const combined = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.lerp(c1Combined, c2Combined, i / (p1.getControlPointCount() - 1));\n                const combinedWeight = (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.lerp)(c1.getWeightedControlPoints()[j][3], c2.getWeightedControlPoints()[j][3], i / (p1.getControlPointCount() - 1));\n                controlRow.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec4.create(combined[0] * combinedWeight, combined[1] * combinedWeight, combined[2] * combinedWeight, combinedWeight));\n            }\n            controls.push(new _geometry_nurbs_curve__WEBPACK_IMPORTED_MODULE_1__.Curve(null, controlRow, c1.getDegree(), c1.getKnots()));\n        }\n        controls.push(c2);\n        // loft\n        this.surface = (0,_geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_2__.loft)(controls, p1.getDegree());\n        this.surface.showControls(true);\n        // clean up\n        p1.delete();\n        p2.delete();\n        for (const curve of controls) {\n            curve.delete();\n        }\n    }\n    done() {\n        var _a, _b, _c, _d;\n        this.finished = true;\n        this.clicker.destroy();\n        (_a = this.pipe1) === null || _a === void 0 ? void 0 : _a.unSelect();\n        (_b = this.pipe2) === null || _b === void 0 ? void 0 : _b.unSelect();\n        (_c = this.crossSection1) === null || _c === void 0 ? void 0 : _c.unSelect();\n        (_d = this.crossSection2) === null || _d === void 0 ? void 0 : _d.unSelect();\n        if (this.surface) {\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(this.surface);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLFFBQVEsRUFBRSxDQUFDO1FBQ3ZCLFVBQUksQ0FBQyxhQUFhLDBDQUFFLFFBQVEsRUFBRSxDQUFDO1FBQy9CLFVBQUksQ0FBQyxhQUFhLDBDQUFFLFFBQVEsRUFBRSxDQUFDO1FBQy9CLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNoQiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDL0M7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9jb21tYW5kcy9zd2VlcDJDb21tYW5kLnRzPzkxMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgVmVjMywgdmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9jdXJ2ZVwiO1xuaW1wb3J0IHsgbG9mdCB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy9sb2Z0XCI7XG5pbXBvcnQgeyBTdXJmYWNlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L251cmJzL3N1cmZhY2VcIjtcbmltcG9ydCB7IG1hdGNoRGVncmVlcywgbWF0Y2hLbm90cyB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9udXJicy91dGlsc1wiO1xuaW1wb3J0IHsgY2hhbmdlT2ZCYXNpcywgbGVycCB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDbGlja2VyIH0gZnJvbSBcIi4uL2NsaWNrZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIFN3ZWVwMkNvbW1hbmRNb2RlIHtcbiAgU2VsZWN0UGlwZTEsXG4gIFNlbGVjdFBpcGUyLFxuICBTZWxlY3RDcm9zc1NlY3Rpb24xLFxuICBTZWxlY3RDcm9zc1NlY3Rpb24yLFxuICBQcmV2aWV3LFxufVxuXG5leHBvcnQgY2xhc3MgU3dlZXAyQ29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBjbGlja2VyOiBDbGlja2VyID0gbmV3IENsaWNrZXIoKTtcbiAgcHJpdmF0ZSBtb2RlOiBTd2VlcDJDb21tYW5kTW9kZSA9IFN3ZWVwMkNvbW1hbmRNb2RlLlNlbGVjdFBpcGUxO1xuICBwcml2YXRlIHN1cmZhY2U6IFN1cmZhY2UgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwaXBlMTogQ3VydmUgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwaXBlMjogQ3VydmUgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjcm9zc1NlY3Rpb24xOiBDdXJ2ZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNyb3NzU2VjdGlvbjI6IEN1cnZlIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcHJlc2VydmVIZWlnaHQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkucmVzZXQoKTtcbiAgfVxuXG4gIGhhbmRsZUlucHV0U3RyaW5nKGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaW5wdXQgPT0gXCIwXCIpIHtcbiAgICAgIHRoaXMuc3VyZmFjZT8uZGVsZXRlKCk7XG4gICAgICB0aGlzLnN1cmZhY2UgPSBudWxsO1xuICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09IFN3ZWVwMkNvbW1hbmRNb2RlLlByZXZpZXcpIHtcbiAgICAgIHN3aXRjaCAoaW5wdXQpIHtcbiAgICAgICAgY2FzZSBcIlwiOlxuICAgICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiMVwiOlxuICAgICAgICAgIHRoaXMucHJlc2VydmVIZWlnaHQgPSAhdGhpcy5wcmVzZXJ2ZUhlaWdodDtcbiAgICAgICAgICB0aGlzLmdlbmVyYXRlU3VyZmFjZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUNsaWNrUmVzdWx0KGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogdm9pZCB7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgIGNhc2UgU3dlZXAyQ29tbWFuZE1vZGUuU2VsZWN0UGlwZTE6XG4gICAgICAgIHRoaXMucGlwZTEgPSA8Q3VydmU+aW50ZXJzZWN0aW9uLmdlb21ldHJ5O1xuICAgICAgICB0aGlzLnBpcGUxLnNlbGVjdCgpO1xuICAgICAgICB0aGlzLm1vZGUgPSBTd2VlcDJDb21tYW5kTW9kZS5TZWxlY3RQaXBlMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN3ZWVwMkNvbW1hbmRNb2RlLlNlbGVjdFBpcGUyOlxuICAgICAgICB0aGlzLnBpcGUyID0gPEN1cnZlPmludGVyc2VjdGlvbi5nZW9tZXRyeTtcbiAgICAgICAgdGhpcy5waXBlMi5zZWxlY3QoKTtcbiAgICAgICAgdGhpcy5tb2RlID0gU3dlZXAyQ29tbWFuZE1vZGUuU2VsZWN0Q3Jvc3NTZWN0aW9uMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN3ZWVwMkNvbW1hbmRNb2RlLlNlbGVjdENyb3NzU2VjdGlvbjE6XG4gICAgICAgIHRoaXMuY3Jvc3NTZWN0aW9uMSA9IDxDdXJ2ZT5pbnRlcnNlY3Rpb24uZ2VvbWV0cnk7XG4gICAgICAgIHRoaXMuY3Jvc3NTZWN0aW9uMS5zZWxlY3QoKTtcbiAgICAgICAgdGhpcy5tb2RlID0gU3dlZXAyQ29tbWFuZE1vZGUuU2VsZWN0Q3Jvc3NTZWN0aW9uMjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFN3ZWVwMkNvbW1hbmRNb2RlLlNlbGVjdENyb3NzU2VjdGlvbjI6XG4gICAgICAgIHRoaXMuY3Jvc3NTZWN0aW9uMiA9IDxDdXJ2ZT5pbnRlcnNlY3Rpb24uZ2VvbWV0cnk7XG4gICAgICAgIHRoaXMuY3Jvc3NTZWN0aW9uMi5zZWxlY3QoKTtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZVN1cmZhY2UoKTtcbiAgICAgICAgdGhpcy5tb2RlID0gU3dlZXAyQ29tbWFuZE1vZGUuUHJldmlldztcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYXNlIG5vdCBoYW5kbGVkXCIpO1xuICAgIH1cbiAgICB0aGlzLmNsaWNrZXIucmVzZXQoKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuY2xpY2tlci5jbGljayhbXCJjdXJ2ZVwiXSk7XG4gIH1cblxuICBoYW5kbGVNb3VzZU1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5jbGlja2VyLm9uTW91c2VNb3ZlKFtcImN1cnZlXCJdKTtcbiAgfVxuXG4gIGdldEluc3RydWN0aW9ucygpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFN3ZWVwMkNvbW1hbmRNb2RlLlNlbGVjdFBpcGUxOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCBwaXBlIDEuICAkXCI7XG4gICAgICBjYXNlIFN3ZWVwMkNvbW1hbmRNb2RlLlNlbGVjdFBpcGUyOlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIFNlbGVjdCBwaXBlIDIuICAkXCI7XG4gICAgICBjYXNlIFN3ZWVwMkNvbW1hbmRNb2RlLlNlbGVjdENyb3NzU2VjdGlvbjE6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgU2VsZWN0IGNyb3NzIHNlY3Rpb24gMS4gICRcIjtcbiAgICAgIGNhc2UgU3dlZXAyQ29tbWFuZE1vZGUuU2VsZWN0Q3Jvc3NTZWN0aW9uMjpcbiAgICAgICAgcmV0dXJuIFwiMDpFeGl0ICBTZWxlY3QgY3Jvc3Mgc2VjdGlvbiAyLiAgJFwiO1xuICAgICAgY2FzZSBTd2VlcDJDb21tYW5kTW9kZS5QcmV2aWV3OlxuICAgICAgICByZXR1cm4gYDA6RXhpdCAgMTpQcmVzZXJ2ZUhlaWdodCgke3RoaXMucHJlc2VydmVIZWlnaHQgPyBcIlRydWVcIiA6IFwiRmFsc2VcIn0pICAkYDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImNhc2Ugbm90IGhhbmRsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgaXNGaW5pc2hlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5maW5pc2hlZDtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVTdXJmYWNlKCk6IHZvaWQge1xuICAgIHRoaXMuc3VyZmFjZT8uZGVsZXRlKCk7XG5cbiAgICAvLyBjcmVhdGUgY2xvbmVzXG4gICAgY29uc3QgcDE6IEN1cnZlID0gPEN1cnZlPnRoaXMucGlwZTEhLmNsb25lKCk7XG4gICAgY29uc3QgcDI6IEN1cnZlID0gPEN1cnZlPnRoaXMucGlwZTIhLmNsb25lKCk7XG4gICAgY29uc3QgYzE6IEN1cnZlID0gPEN1cnZlPnRoaXMuY3Jvc3NTZWN0aW9uMSEuY2xvbmUoKTtcbiAgICBjb25zdCBjMjogQ3VydmUgPSA8Q3VydmU+dGhpcy5jcm9zc1NlY3Rpb24yIS5jbG9uZSgpO1xuXG4gICAgLy8gTWF0Y2ggZGVncmVlc1xuICAgIG1hdGNoRGVncmVlcyhbcDEsIHAyXSk7XG4gICAgbWF0Y2hEZWdyZWVzKFtjMSwgYzJdKTtcblxuICAgIC8vIE1hdGNoIGtub3RzXG4gICAgbWF0Y2hLbm90cyhbcDEsIHAyXSk7XG4gICAgbWF0Y2hLbm90cyhbYzEsIGMyXSk7XG5cbiAgICAvLyBBbGlnbiBkaXJlY3Rpb25zXG4gICAgY29uc3QgZmFjZSA9IChhOiBDdXJ2ZSwgYjogQ3VydmUsIGM6IEN1cnZlKSA9PiB7XG4gICAgICAvLyBtYWtlIGEgZmFjZSBiIG5vdCBjXG4gICAgICBjb25zdCBhRW5kOiBWZWMzID0gYS5nZXRFbmRQb2ludCgpO1xuICAgICAgY29uc3QgYlN0YXJ0OiBWZWMzID0gYi5nZXRTdGFydFBvaW50KCk7XG4gICAgICBjb25zdCBiRW5kOiBWZWMzID0gYi5nZXRFbmRQb2ludCgpO1xuICAgICAgY29uc3QgY1N0YXJ0OiBWZWMzID0gYy5nZXRTdGFydFBvaW50KCk7XG4gICAgICBjb25zdCBjRW5kOiBWZWMzID0gYy5nZXRFbmRQb2ludCgpO1xuICAgICAgY29uc3QgZGlzdEI6IG51bWJlciA9IE1hdGgubWluKHZlYzMuZGlzdChhRW5kLCBiRW5kKSwgdmVjMy5kaXN0KGFFbmQsIGJTdGFydCkpO1xuICAgICAgY29uc3QgZGlzdEM6IG51bWJlciA9IE1hdGgubWluKHZlYzMuZGlzdChhRW5kLCBjRW5kKSwgdmVjMy5kaXN0KGFFbmQsIGNTdGFydCkpO1xuICAgICAgaWYgKGRpc3RDIDwgZGlzdEIpIGEucmV2ZXJzZSgpO1xuICAgIH07XG4gICAgZmFjZShjMSwgcDIsIHAxKTtcbiAgICBmYWNlKGMyLCBwMiwgcDEpO1xuICAgIGZhY2UocDEsIGMyLCBjMSk7XG4gICAgZmFjZShwMiwgYzIsIGMxKTtcblxuICAgIC8vIGNyZWF0ZSBuZXcgY29udHJvbHMgXG5cbiAgICBjb25zdCBwMUNvbnRyb2xzOiBWZWMzW10gPSBwMS5nZXRDb250cm9sUG9pbnRzKCk7XG4gICAgY29uc3QgcDJDb250cm9sczogVmVjM1tdID0gcDIuZ2V0Q29udHJvbFBvaW50cygpO1xuXG4gICAgY29uc3QgY29udHJvbHM6IEN1cnZlW10gPSBbXTtcblxuICAgIGNvbnN0IGMxQ29udHJvbHM6IFZlYzRbXSA9IGMxLmdldFdlaWdodGVkQ29udHJvbFBvaW50cygpO1xuICAgIGNvbnN0IGMyQ29udHJvbHM6IFZlYzRbXSA9IGMyLmdldFdlaWdodGVkQ29udHJvbFBvaW50cygpO1xuXG4gICAgY29uc3QgZnJvbU8xU3RhcnQ6IFZlYzMgPSBwMS5nZXRTdGFydFBvaW50KCk7XG4gICAgY29uc3QgZnJvbU8yU3RhcnQ6IFZlYzMgPSBwMi5nZXRTdGFydFBvaW50KCk7XG4gICAgY29uc3QgZnJvbVkxU3RhcnQ6IFZlYzMgPSB2ZWMzLnN1Yihmcm9tTzJTdGFydCwgZnJvbU8xU3RhcnQpO1xuICAgIGNvbnN0IGZyb21ZMlN0YXJ0OiBWZWMzID0gZnJvbVkxU3RhcnQ7XG4gICAgY29uc3QgZnJvbVgxU3RhcnQ6IFZlYzMgPSB2ZWMzLnNjYWxlKHAxLmdldFN0YXJ0UmF5KCkuZ2V0RGlyZWN0aW9uKCksIC0xKTtcbiAgICBjb25zdCBmcm9tWDJTdGFydDogVmVjMyA9IHZlYzMuc2NhbGUocDIuZ2V0U3RhcnRSYXkoKS5nZXREaXJlY3Rpb24oKSwgLTEpO1xuICAgIGNvbnN0IGZyb21aMVN0YXJ0OiBWZWMzID0gdmVjMy5jcm9zcyhmcm9tWDFTdGFydCwgZnJvbVkxU3RhcnQpO1xuICAgIGNvbnN0IGZyb21aMlN0YXJ0OiBWZWMzID0gdmVjMy5jcm9zcyhmcm9tWDJTdGFydCwgZnJvbVkyU3RhcnQpO1xuXG4gICAgY29uc3QgZnJvbU8xRW5kOiBWZWMzID0gcDEuZ2V0RW5kUG9pbnQoKTtcbiAgICBjb25zdCBmcm9tTzJFbmQ6IFZlYzMgPSBwMi5nZXRFbmRQb2ludCgpO1xuICAgIGNvbnN0IGZyb21ZMUVuZDogVmVjMyA9IHZlYzMuc3ViKGZyb21PMkVuZCwgZnJvbU8xRW5kKTtcbiAgICBjb25zdCBmcm9tWTJFbmQ6IFZlYzMgPSBmcm9tWTFFbmQ7XG4gICAgY29uc3QgZnJvbVgxRW5kOiBWZWMzID0gcDEuZ2V0RW5kUmF5KCkuZ2V0RGlyZWN0aW9uKCk7XG4gICAgY29uc3QgZnJvbVgyRW5kOiBWZWMzID0gcDIuZ2V0RW5kUmF5KCkuZ2V0RGlyZWN0aW9uKCk7XG4gICAgY29uc3QgZnJvbVoxRW5kOiBWZWMzID0gdmVjMy5jcm9zcyhmcm9tWDFFbmQsIGZyb21ZMUVuZCk7XG4gICAgY29uc3QgZnJvbVoyRW5kOiBWZWMzID0gdmVjMy5jcm9zcyhmcm9tWDJFbmQsIGZyb21ZMkVuZCk7XG5cbiAgICBjb25zdCBjMVJhdGlvczogbnVtYmVyW10gPSBbXTtcbiAgICBjb25zdCBjMlJhdGlvczogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGMxLmdldENvbnRyb2xQb2ludENvdW50KCk7IGkrKykge1xuICAgICAgY29uc3QgYzFTdGFydERpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UoYzFDb250cm9sc1tpXSwgYzFDb250cm9sc1swXSk7XG4gICAgICBjb25zdCBjMUVuZERpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UoYzFDb250cm9sc1tpXSwgYzFDb250cm9scy5hdCgtMSkhKTtcbiAgICAgIGMxUmF0aW9zLnB1c2goYzFTdGFydERpc3QgLyAoYzFTdGFydERpc3QgKyBjMUVuZERpc3QpKTtcblxuICAgICAgY29uc3QgYzJTdGFydERpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UoYzJDb250cm9sc1tpXSwgYzJDb250cm9sc1swXSk7XG4gICAgICBjb25zdCBjMkVuZERpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UoYzJDb250cm9sc1tpXSwgYzJDb250cm9scy5hdCgtMSkhKTtcbiAgICAgIGMyUmF0aW9zLnB1c2goYzJTdGFydERpc3QgLyAoYzJTdGFydERpc3QgKyBjMkVuZERpc3QpKTtcbiAgICB9XG5cbiAgICBjb250cm9scy5wdXNoKGMxKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHAxLmdldENvbnRyb2xQb2ludENvdW50KCkgLSAxOyBpKyspIHtcbiAgICAgIGNvbnN0IHRvTzE6IFZlYzMgPSBwMUNvbnRyb2xzW2ldO1xuICAgICAgY29uc3QgdG9PMjogVmVjMyA9IHAyQ29udHJvbHNbaV07XG5cbiAgICAgIGNvbnN0IHRvWTE6IFZlYzMgPSB2ZWMzLnN1Yih0b08yLCB0b08xKTtcbiAgICAgIGNvbnN0IHRvWTI6IFZlYzMgPSB0b1kxO1xuXG4gICAgICBjb25zdCB4MVByZXY6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1YihwMUNvbnRyb2xzW2ldLCBwMUNvbnRyb2xzW2kgLSAxXSkpO1xuICAgICAgY29uc3QgeDJQcmV2OiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5zdWIocDJDb250cm9sc1tpXSwgcDJDb250cm9sc1tpIC0gMV0pKTtcbiAgICAgIGNvbnN0IHgxTmV4dDogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuc3ViKHAxQ29udHJvbHNbaSArIDFdLCBwMUNvbnRyb2xzW2ldKSk7XG4gICAgICBjb25zdCB4Mk5leHQ6IFZlYzMgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLnN1YihwMkNvbnRyb2xzW2kgKyAxXSwgcDJDb250cm9sc1tpXSkpO1xuICAgICAgY29uc3QgdG9YMTogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuYWRkKHgxUHJldiwgeDFOZXh0KSk7XG4gICAgICBjb25zdCB0b1gyOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5hZGQoeDJQcmV2LCB4Mk5leHQpKTtcblxuICAgICAgdmFyIHRvWjE6IFZlYzMgPSB2ZWMzLmNyb3NzKHRvWDEsIHRvWTEpO1xuICAgICAgdmFyIHRvWjI6IFZlYzMgPSB2ZWMzLmNyb3NzKHRvWDIsIHRvWTIpO1xuXG4gICAgICBpZiAodGhpcy5wcmVzZXJ2ZUhlaWdodCkge1xuICAgICAgICB0b1oxID0gdmVjMy5ub3JtYWxpemUodG9aMSk7XG4gICAgICAgIHRvWjEgPSB2ZWMzLnNjYWxlKHRvWjEsIGxlcnAoXG4gICAgICAgICAgdmVjMy5sZW5ndGgoZnJvbVoxU3RhcnQpLFxuICAgICAgICAgIHZlYzMubGVuZ3RoKGZyb21aMUVuZCksXG4gICAgICAgICAgaSAvIChwMS5nZXRDb250cm9sUG9pbnRDb3VudCgpIC0gMSkpXG4gICAgICAgICk7XG5cbiAgICAgICAgdG9aMiA9IHZlYzMubm9ybWFsaXplKHRvWjIpO1xuICAgICAgICB0b1oyID0gdmVjMy5zY2FsZSh0b1oyLCBsZXJwKFxuICAgICAgICAgIHZlYzMubGVuZ3RoKGZyb21aMlN0YXJ0KSxcbiAgICAgICAgICB2ZWMzLmxlbmd0aChmcm9tWjJFbmQpLFxuICAgICAgICAgIGkgLyAocDEuZ2V0Q29udHJvbFBvaW50Q291bnQoKSAtIDEpXG4gICAgICAgICkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb2IxU3RhcnQ6IE1hdDQgPSBjaGFuZ2VPZkJhc2lzKGZyb21YMVN0YXJ0LCBmcm9tWTFTdGFydCwgZnJvbVoxU3RhcnQsIGZyb21PMVN0YXJ0LCB0b1gxLCB0b1kxLCB0b1oxLCB0b08xKTtcbiAgICAgIGNvbnN0IGNvYjJTdGFydDogTWF0NCA9IGNoYW5nZU9mQmFzaXMoZnJvbVgyU3RhcnQsIGZyb21ZMlN0YXJ0LCBmcm9tWjJTdGFydCwgZnJvbU8yU3RhcnQsIHRvWDIsIHRvWTIsIHRvWjIsIHRvTzIpO1xuXG4gICAgICBjb25zdCBjb2IxRW5kOiBNYXQ0ID0gY2hhbmdlT2ZCYXNpcyhmcm9tWDFFbmQsIGZyb21ZMUVuZCwgZnJvbVoxRW5kLCBmcm9tTzFFbmQsIHRvWDEsIHRvWTEsIHRvWjEsIHRvTzEpO1xuICAgICAgY29uc3QgY29iMkVuZDogTWF0NCA9IGNoYW5nZU9mQmFzaXMoZnJvbVgyRW5kLCBmcm9tWTJFbmQsIGZyb21aMkVuZCwgZnJvbU8yRW5kLCB0b1gyLCB0b1kyLCB0b1oyLCB0b08yKTtcblxuICAgICAgY29uc3QgY29udHJvbFJvdzogVmVjNFtdID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGMxLmdldENvbnRyb2xQb2ludENvdW50KCk7IGorKykge1xuICAgICAgICBjb25zdCBjMXAxOiBWZWMzID0gdmVjMy50cmFuc2Zvcm1NYXQ0KGMxQ29udHJvbHNbal0sIGNvYjFTdGFydCk7XG4gICAgICAgIGNvbnN0IGMxcDI6IFZlYzMgPSB2ZWMzLnRyYW5zZm9ybU1hdDQoYzFDb250cm9sc1tqXSwgY29iMlN0YXJ0KTtcbiAgICAgICAgY29uc3QgYzFDb21iaW5lZDogVmVjMyA9IHZlYzMubGVycChjMXAxLCBjMXAyLCBjMVJhdGlvc1tqXSk7XG5cbiAgICAgICAgY29uc3QgYzJwMTogVmVjMyA9IHZlYzMudHJhbnNmb3JtTWF0NChjMkNvbnRyb2xzW2pdLCBjb2IxRW5kKTtcbiAgICAgICAgY29uc3QgYzJwMjogVmVjMyA9IHZlYzMudHJhbnNmb3JtTWF0NChjMkNvbnRyb2xzW2pdLCBjb2IyRW5kKTtcbiAgICAgICAgY29uc3QgYzJDb21iaW5lZDogVmVjMyA9IHZlYzMubGVycChjMnAxLCBjMnAyLCBjMlJhdGlvc1tqXSk7XG5cblxuICAgICAgICBjb25zdCBjb21iaW5lZDogVmVjMyA9IHZlYzMubGVycChjMUNvbWJpbmVkLCBjMkNvbWJpbmVkLFxuICAgICAgICAgIGkgLyAocDEuZ2V0Q29udHJvbFBvaW50Q291bnQoKSAtIDEpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkV2VpZ2h0OiBudW1iZXIgPSBsZXJwKFxuICAgICAgICAgIGMxLmdldFdlaWdodGVkQ29udHJvbFBvaW50cygpW2pdWzNdLFxuICAgICAgICAgIGMyLmdldFdlaWdodGVkQ29udHJvbFBvaW50cygpW2pdWzNdLFxuICAgICAgICAgIGkgLyAocDEuZ2V0Q29udHJvbFBvaW50Q291bnQoKSAtIDEpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnRyb2xSb3cucHVzaCh2ZWM0LmNyZWF0ZShcbiAgICAgICAgICBjb21iaW5lZFswXSAqIGNvbWJpbmVkV2VpZ2h0LFxuICAgICAgICAgIGNvbWJpbmVkWzFdICogY29tYmluZWRXZWlnaHQsXG4gICAgICAgICAgY29tYmluZWRbMl0gKiBjb21iaW5lZFdlaWdodCxcbiAgICAgICAgICBjb21iaW5lZFdlaWdodFxuICAgICAgICApKTtcblxuICAgICAgfVxuICAgICAgY29udHJvbHMucHVzaChuZXcgQ3VydmUobnVsbCwgY29udHJvbFJvdywgYzEuZ2V0RGVncmVlKCksIGMxLmdldEtub3RzKCkpKTtcbiAgICB9XG4gICAgY29udHJvbHMucHVzaChjMik7XG5cbiAgICAvLyBsb2Z0XG4gICAgdGhpcy5zdXJmYWNlID0gbG9mdChjb250cm9scywgcDEuZ2V0RGVncmVlKCkpO1xuICAgIHRoaXMuc3VyZmFjZS5zaG93Q29udHJvbHModHJ1ZSk7XG5cblxuICAgIC8vIGNsZWFuIHVwXG4gICAgcDEuZGVsZXRlKCk7XG4gICAgcDIuZGVsZXRlKCk7XG4gICAgZm9yIChjb25zdCBjdXJ2ZSBvZiBjb250cm9scykge1xuICAgICAgY3VydmUuZGVsZXRlKCk7XG4gICAgfVxuXG4gIH1cblxuICBwcml2YXRlIGRvbmUoKTogdm9pZCB7XG4gICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgdGhpcy5jbGlja2VyLmRlc3Ryb3koKTtcbiAgICB0aGlzLnBpcGUxPy51blNlbGVjdCgpO1xuICAgIHRoaXMucGlwZTI/LnVuU2VsZWN0KCk7XG4gICAgdGhpcy5jcm9zc1NlY3Rpb24xPy51blNlbGVjdCgpO1xuICAgIHRoaXMuY3Jvc3NTZWN0aW9uMj8udW5TZWxlY3QoKTtcbiAgICBpZiAodGhpcy5zdXJmYWNlKSB7XG4gICAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZEdlb21ldHJ5KHRoaXMuc3VyZmFjZSk7XG4gICAgfVxuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/sweep2Command.ts\n");

/***/ }),

/***/ "./src/commands/commands/windowCommand.ts":
/*!************************************************!*\
  !*** ./src/commands/commands/windowCommand.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WindowCommand: () => (/* binding */ WindowCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../widgets/cursor */ \"./src/widgets/cursor.ts\");\n/* harmony import */ var _window_windowManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../window/windowManager */ \"./src/window/windowManager.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../command */ \"./src/commands/command.ts\");\n\n\n\n\nvar WindowCommandMode;\n(function (WindowCommandMode) {\n    WindowCommandMode[WindowCommandMode[\"SelectWindow\"] = 0] = \"SelectWindow\";\n    WindowCommandMode[WindowCommandMode[\"PlaceWindowStartOrRemoveWindow\"] = 1] = \"PlaceWindowStartOrRemoveWindow\";\n    WindowCommandMode[WindowCommandMode[\"PlaceWindowEnd\"] = 2] = \"PlaceWindowEnd\";\n})(WindowCommandMode || (WindowCommandMode = {}));\nclass WindowCommand extends _command__WEBPACK_IMPORTED_MODULE_3__.Command {\n    constructor() {\n        super();\n        this.windowName = \"none\";\n        this.finished = false;\n        this.mode = WindowCommandMode.SelectWindow;\n        _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.show();\n    }\n    handleClickResult(input) {\n    }\n    handleInputString(input) {\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                if (input == \"0\") {\n                    _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.hide();\n                    this.finished = true;\n                    break;\n                }\n                if (_window_windowManager__WEBPACK_IMPORTED_MODULE_2__.WINDOW_NAMES.has(parseInt(input))) {\n                    this.windowName = _window_windowManager__WEBPACK_IMPORTED_MODULE_2__.WINDOW_NAMES.get(parseInt(input));\n                    this.mode = WindowCommandMode.PlaceWindowStartOrRemoveWindow;\n                    // remove existing window to add it back\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().removeWindow(this.windowName);\n                }\n                break;\n            case WindowCommandMode.PlaceWindowStartOrRemoveWindow:\n                if (input == \"1\") {\n                    this.mode = WindowCommandMode.SelectWindow;\n                }\n                break;\n            case WindowCommandMode.PlaceWindowEnd:\n                break;\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    // rounds n to nearest multiple of m\n    nearestMultiple(n, m) {\n        const delta = n % m;\n        if (delta < m / 2)\n            n -= delta;\n        else\n            n += m - delta;\n        return n;\n    }\n    roundScreenPoint(p) {\n        return [this.nearestMultiple(p[0], 10), this.nearestMultiple(p[1], 10)];\n    }\n    handleClick() {\n        const [x, y] = this.roundScreenPoint(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos());\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                break;\n            case WindowCommandMode.PlaceWindowStartOrRemoveWindow:\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().addWindow(this.windowName, [x, y]);\n                this.mode = WindowCommandMode.PlaceWindowEnd;\n                break;\n            case WindowCommandMode.PlaceWindowEnd:\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(this.windowName).updateEnd([x, y]);\n                this.windowName = \"none\";\n                this.mode = WindowCommandMode.SelectWindow;\n                break;\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    handleMouseMove() {\n        const [x, y] = this.roundScreenPoint(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos());\n        _widgets_cursor__WEBPACK_IMPORTED_MODULE_1__.cursor.setPosition([x, y]);\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                break;\n            case WindowCommandMode.PlaceWindowStartOrRemoveWindow:\n                break;\n            case WindowCommandMode.PlaceWindowEnd:\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(this.windowName).updateEnd([x, y]);\n                break;\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    getInstructions() {\n        switch (this.mode) {\n            case WindowCommandMode.SelectWindow:\n                var res = \"Exit:0  \";\n                for (let [key, value] of _window_windowManager__WEBPACK_IMPORTED_MODULE_2__.WINDOW_NAMES) {\n                    res += value + \"(\" + key.toString() + \")  \";\n                }\n                return res + \"$\";\n            case WindowCommandMode.PlaceWindowStartOrRemoveWindow:\n                return \"0:Exit  1:Remove  Click first corner for window.\";\n            case WindowCommandMode.PlaceWindowEnd:\n                return \"0:Exit  Click second corner for window.\";\n            default:\n                throw new Error(\"Not implemented\");\n        }\n    }\n    isFinished() {\n        return this.finished;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNqRixNQUFNO1lBQ1I7Z0JBQ0UsTUFBTSxJQUFJLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1NBQ3RDO0lBQ0gsQ0FBQztJQUVlLGVBQWU7UUFDN0IsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2pCLEtBQUssaUJBQWlCLENBQUMsWUFBWTtnQkFDakMsSUFBSSxHQUFHLEdBQVcsVUFBVSxDQUFDO2dCQUM3QixLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksK0RBQVksRUFBRTtvQkFDckMsR0FBRyxJQUFJLEtBQUssR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxHQUFHLEtBQUssQ0FBQztpQkFDN0M7Z0JBQ0QsT0FBTyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQ25CLEtBQUssaUJBQWlCLENBQUMsOEJBQThCO2dCQUNuRCxPQUFPLGtEQUFrRCxDQUFDO1lBQzVELEtBQUssaUJBQWlCLENBQUMsY0FBYztnQkFDbkMsT0FBTyx5Q0FBeUMsQ0FBQztZQUNuRDtnQkFDRSxNQUFNLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDdEM7SUFDSCxDQUFDO0lBRWUsVUFBVTtRQUN4QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvY29tbWFuZHMvd2luZG93Q29tbWFuZC50cz80ZDc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgY3Vyc29yIH0gZnJvbSBcIi4uLy4uL3dpZGdldHMvY3Vyc29yXCI7XG5pbXBvcnQgeyBXSU5ET1dfTkFNRVMgfSBmcm9tIFwiLi4vLi4vd2luZG93L3dpbmRvd01hbmFnZXJcIjtcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZFwiO1xuXG5lbnVtIFdpbmRvd0NvbW1hbmRNb2RlIHtcbiAgU2VsZWN0V2luZG93LFxuICBQbGFjZVdpbmRvd1N0YXJ0T3JSZW1vdmVXaW5kb3csXG4gIFBsYWNlV2luZG93RW5kLFxufVxuXG5leHBvcnQgY2xhc3MgV2luZG93Q29tbWFuZCBleHRlbmRzIENvbW1hbmQge1xuXG4gIHByaXZhdGUgZmluaXNoZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgbW9kZTogV2luZG93Q29tbWFuZE1vZGU7XG4gIHByaXZhdGUgd2luZG93TmFtZTogc3RyaW5nID0gXCJub25lXCI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5tb2RlID0gV2luZG93Q29tbWFuZE1vZGUuU2VsZWN0V2luZG93O1xuICAgIGN1cnNvci5zaG93KCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlQ2xpY2tSZXN1bHQoaW5wdXQ6IEludGVyc2VjdGlvbik6IHZvaWQge1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGhhbmRsZUlucHV0U3RyaW5nKGlucHV0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5TZWxlY3RXaW5kb3c6XG4gICAgICAgIGlmIChpbnB1dCA9PSBcIjBcIikge1xuICAgICAgICAgIGN1cnNvci5oaWRlKCk7XG4gICAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFdJTkRPV19OQU1FUy5oYXMocGFyc2VJbnQoaW5wdXQpKSkge1xuICAgICAgICAgIHRoaXMud2luZG93TmFtZSA9IFdJTkRPV19OQU1FUy5nZXQocGFyc2VJbnQoaW5wdXQpKSE7XG4gICAgICAgICAgdGhpcy5tb2RlID0gV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dTdGFydE9yUmVtb3ZlV2luZG93O1xuXG4gICAgICAgICAgLy8gcmVtb3ZlIGV4aXN0aW5nIHdpbmRvdyB0byBhZGQgaXQgYmFja1xuICAgICAgICAgIElOU1RBTkNFLmdldFdpbmRvd01hbmFnZXIoKS5yZW1vdmVXaW5kb3codGhpcy53aW5kb3dOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dTdGFydE9yUmVtb3ZlV2luZG93OlxuICAgICAgICBpZiAoaW5wdXQgPT0gXCIxXCIpIHtcbiAgICAgICAgICB0aGlzLm1vZGUgPSBXaW5kb3dDb21tYW5kTW9kZS5TZWxlY3RXaW5kb3c7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFdpbmRvd0NvbW1hbmRNb2RlLlBsYWNlV2luZG93RW5kOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICAvLyByb3VuZHMgbiB0byBuZWFyZXN0IG11bHRpcGxlIG9mIG1cbiAgcHJpdmF0ZSBuZWFyZXN0TXVsdGlwbGUobjogbnVtYmVyLCBtOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGRlbHRhID0gbiAlIG07XG4gICAgaWYgKGRlbHRhIDwgbSAvIDIpIG4gLT0gZGVsdGE7XG4gICAgZWxzZSBuICs9IG0gLSBkZWx0YTtcbiAgICByZXR1cm4gbjtcbiAgfVxuXG4gIHByaXZhdGUgcm91bmRTY3JlZW5Qb2ludChwOiBbbnVtYmVyLCBudW1iZXJdKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgcmV0dXJuIFt0aGlzLm5lYXJlc3RNdWx0aXBsZShwWzBdLCAxMCksIHRoaXMubmVhcmVzdE11bHRpcGxlKHBbMV0sIDEwKV07XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlQ2xpY2soKTogdm9pZCB7XG4gICAgY29uc3QgW3gsIHldID0gdGhpcy5yb3VuZFNjcmVlblBvaW50KElOU1RBTkNFLmdldEV2ZW50TWFuYWdlcigpLmdldE1vdXNlSGFuZGxlcigpLmdldE1vdXNlUG9zKCkpO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFdpbmRvd0NvbW1hbmRNb2RlLlNlbGVjdFdpbmRvdzpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFdpbmRvd0NvbW1hbmRNb2RlLlBsYWNlV2luZG93U3RhcnRPclJlbW92ZVdpbmRvdzpcbiAgICAgICAgSU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmFkZFdpbmRvdyh0aGlzLndpbmRvd05hbWUsIFt4LCB5XSk7XG4gICAgICAgIHRoaXMubW9kZSA9IFdpbmRvd0NvbW1hbmRNb2RlLlBsYWNlV2luZG93RW5kO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dFbmQ6XG4gICAgICAgIElOU1RBTkNFLmdldFdpbmRvd01hbmFnZXIoKS5nZXRXaW5kb3dzKCkuZ2V0KHRoaXMud2luZG93TmFtZSkhLnVwZGF0ZUVuZChbeCwgeV0pO1xuICAgICAgICB0aGlzLndpbmRvd05hbWUgPSBcIm5vbmVcIjtcbiAgICAgICAgdGhpcy5tb2RlID0gV2luZG93Q29tbWFuZE1vZGUuU2VsZWN0V2luZG93O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaGFuZGxlTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIGNvbnN0IFt4LCB5XSA9IHRoaXMucm91bmRTY3JlZW5Qb2ludChJTlNUQU5DRS5nZXRFdmVudE1hbmFnZXIoKS5nZXRNb3VzZUhhbmRsZXIoKS5nZXRNb3VzZVBvcygpKTtcbiAgICBjdXJzb3Iuc2V0UG9zaXRpb24oW3gsIHldKTtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5TZWxlY3RXaW5kb3c6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5QbGFjZVdpbmRvd1N0YXJ0T3JSZW1vdmVXaW5kb3c6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5QbGFjZVdpbmRvd0VuZDpcbiAgICAgICAgSU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmdldFdpbmRvd3MoKS5nZXQodGhpcy53aW5kb3dOYW1lKSEudXBkYXRlRW5kKFt4LCB5XSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRJbnN0cnVjdGlvbnMoKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgICAgY2FzZSBXaW5kb3dDb21tYW5kTW9kZS5TZWxlY3RXaW5kb3c6XG4gICAgICAgIHZhciByZXM6IHN0cmluZyA9IFwiRXhpdDowICBcIjtcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIFdJTkRPV19OQU1FUykge1xuICAgICAgICAgIHJlcyArPSB2YWx1ZSArIFwiKFwiICsga2V5LnRvU3RyaW5nKCkgKyBcIikgIFwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMgKyBcIiRcIjtcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dTdGFydE9yUmVtb3ZlV2luZG93OlxuICAgICAgICByZXR1cm4gXCIwOkV4aXQgIDE6UmVtb3ZlICBDbGljayBmaXJzdCBjb3JuZXIgZm9yIHdpbmRvdy5cIjtcbiAgICAgIGNhc2UgV2luZG93Q29tbWFuZE1vZGUuUGxhY2VXaW5kb3dFbmQ6XG4gICAgICAgIHJldHVybiBcIjA6RXhpdCAgQ2xpY2sgc2Vjb25kIGNvcm5lciBmb3Igd2luZG93LlwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpc0ZpbmlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/commands/windowCommand.ts\n");

/***/ }),

/***/ "./src/commands/oneTimeCommands/hideCommands.ts":
/*!******************************************************!*\
  !*** ./src/commands/oneTimeCommands/hideCommands.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hide: () => (/* binding */ hide),\n/* harmony export */   hideSwap: () => (/* binding */ hideSwap),\n/* harmony export */   show: () => (/* binding */ show)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n\nconst hide = function () {\n    const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n    for (const geo of selection)\n        geo.hide();\n};\nconst show = function () {\n    const geometry = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getRootGeometry();\n    for (const geo of geometry)\n        geo.show();\n};\nconst hideSwap = function () {\n    const geometry = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getRootGeometry();\n    for (const geo of geometry) {\n        if (geo.isHidden()) {\n            geo.show();\n        }\n        else {\n            geo.hide();\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL2hpZGVDb21tYW5kcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9DO0FBRzdCLE1BQU0sSUFBSSxHQUFHO0lBQ2xCLE1BQU0sU0FBUyxHQUFrQiwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3ZFLEtBQUssTUFBTSxHQUFHLElBQUksU0FBUztRQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMxQyxDQUFDO0FBRU0sTUFBTSxJQUFJLEdBQUc7SUFDbEIsTUFBTSxRQUFRLEdBQUcsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN2RCxLQUFLLE1BQU0sR0FBRyxJQUFJLFFBQVE7UUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDekMsQ0FBQztBQUVNLE1BQU0sUUFBUSxHQUFHO0lBQ3RCLE1BQU0sUUFBUSxHQUFHLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDdkQsS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUU7UUFDMUIsSUFBSSxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDbEIsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ1o7YUFBTTtZQUNMLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNaO0tBQ0Y7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL2hpZGVDb21tYW5kcy50cz84NWE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiXG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9nZW9tZXRyeVwiXG5cbmV4cG9ydCBjb25zdCBoaWRlID0gZnVuY3Rpb24oKTogdm9pZCB7XG4gIGNvbnN0IHNlbGVjdGlvbjogU2V0PEdlb21ldHJ5PiA9IElOU1RBTkNFLmdldFNlbGVjdG9yKCkuZ2V0U2VsZWN0aW9uKCk7XG4gIGZvciAoY29uc3QgZ2VvIG9mIHNlbGVjdGlvbikgZ2VvLmhpZGUoKTtcbn1cblxuZXhwb3J0IGNvbnN0IHNob3cgPSBmdW5jdGlvbigpOiB2b2lkIHtcbiAgY29uc3QgZ2VvbWV0cnkgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldFJvb3RHZW9tZXRyeSgpO1xuICBmb3IgKGNvbnN0IGdlbyBvZiBnZW9tZXRyeSkgZ2VvLnNob3coKTtcbn1cblxuZXhwb3J0IGNvbnN0IGhpZGVTd2FwID0gZnVuY3Rpb24oKTogdm9pZCB7XG4gIGNvbnN0IGdlb21ldHJ5ID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRSb290R2VvbWV0cnkoKTtcbiAgZm9yIChjb25zdCBnZW8gb2YgZ2VvbWV0cnkpIHtcbiAgICBpZiAoZ2VvLmlzSGlkZGVuKCkpIHtcbiAgICAgIGdlby5zaG93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlby5oaWRlKCk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/oneTimeCommands/hideCommands.ts\n");

/***/ }),

/***/ "./src/commands/oneTimeCommands/reverseCurveCommand.ts":
/*!*************************************************************!*\
  !*** ./src/commands/oneTimeCommands/reverseCurveCommand.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reverseCurveCommand: () => (/* binding */ reverseCurveCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n\nconst reverseCurveCommand = function () {\n    const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n    for (const geo of selection) {\n        if (geo.getTypeName() == \"Curve\") {\n            geo.reverse();\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL3JldmVyc2VDdXJ2ZUNvbW1hbmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0M7QUFJN0IsTUFBTSxtQkFBbUIsR0FBRztJQUNqQyxNQUFNLFNBQVMsR0FBa0IsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN2RSxLQUFLLE1BQU0sR0FBRyxJQUFJLFNBQVMsRUFBRTtRQUMzQixJQUFJLEdBQUcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxPQUFPLEVBQUU7WUFDeEIsR0FBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQ3hCO0tBQ0Y7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL3JldmVyc2VDdXJ2ZUNvbW1hbmQudHM/NTk5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIlxuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIlxuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvbnVyYnMvY3VydmVcIjtcblxuZXhwb3J0IGNvbnN0IHJldmVyc2VDdXJ2ZUNvbW1hbmQgPSBmdW5jdGlvbigpIHtcbiAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgZm9yIChjb25zdCBnZW8gb2Ygc2VsZWN0aW9uKSB7XG4gICAgaWYgKGdlby5nZXRUeXBlTmFtZSgpID09IFwiQ3VydmVcIikge1xuICAgICAgKDxDdXJ2ZT5nZW8pLnJldmVyc2UoKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/oneTimeCommands/reverseCurveCommand.ts\n");

/***/ }),

/***/ "./src/commands/oneTimeCommands/toggleControlCageCommand.ts":
/*!******************************************************************!*\
  !*** ./src/commands/oneTimeCommands/toggleControlCageCommand.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ControlCageOffCommand: () => (/* binding */ ControlCageOffCommand),\n/* harmony export */   ControlCageOnCommand: () => (/* binding */ ControlCageOnCommand)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n\nconst ControlCageOnCommand = function () {\n    const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n    for (const geo of selection)\n        geo.showControls(true);\n};\nconst ControlCageOffCommand = function () {\n    const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n    for (const geo of selection)\n        geo.showControls(false);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL3RvZ2dsZUNvbnRyb2xDYWdlQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0M7QUFJN0IsTUFBTSxvQkFBb0IsR0FBRztJQUNsQyxNQUFNLFNBQVMsR0FBa0IsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN2RSxLQUFLLE1BQU0sR0FBRyxJQUFJLFNBQVM7UUFBRSxHQUFHLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3RELENBQUM7QUFFTSxNQUFNLHFCQUFxQixHQUFHO0lBQ25DLE1BQU0sU0FBUyxHQUFrQiwwQ0FBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3ZFLEtBQUssTUFBTSxHQUFHLElBQUksU0FBUztRQUFFLEdBQUcsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkQsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2NvbW1hbmRzL29uZVRpbWVDb21tYW5kcy90b2dnbGVDb250cm9sQ2FnZUNvbW1hbmQudHM/MTMwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIlxuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcblxuXG5leHBvcnQgY29uc3QgQ29udHJvbENhZ2VPbkNvbW1hbmQgPSBmdW5jdGlvbigpOiB2b2lkIHtcbiAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgZm9yIChjb25zdCBnZW8gb2Ygc2VsZWN0aW9uKSBnZW8uc2hvd0NvbnRyb2xzKHRydWUpO1xufVxuXG5leHBvcnQgY29uc3QgQ29udHJvbENhZ2VPZmZDb21tYW5kID0gZnVuY3Rpb24oKTogdm9pZCB7XG4gIGNvbnN0IHNlbGVjdGlvbjogU2V0PEdlb21ldHJ5PiA9IElOU1RBTkNFLmdldFNlbGVjdG9yKCkuZ2V0U2VsZWN0aW9uKCk7XG4gIGZvciAoY29uc3QgZ2VvIG9mIHNlbGVjdGlvbikgZ2VvLnNob3dDb250cm9scyhmYWxzZSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/oneTimeCommands/toggleControlCageCommand.ts\n");

/***/ }),

/***/ "./src/commands/oneTimeCommands/toggleDarkModeCommand.ts":
/*!***************************************************************!*\
  !*** ./src/commands/oneTimeCommands/toggleDarkModeCommand.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toggleDarkMode: () => (/* binding */ toggleDarkMode)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n\nvar isDarkMode = true;\nconst rootStyle = document.querySelector(':root');\nfunction toggleDarkMode() {\n    if (isDarkMode)\n        setLightMode();\n    else\n        setDarkMode();\n}\nfunction setLightMode() {\n    isDarkMode = false;\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().setClearColor([0.8, 0.8, 0.8, 1.0]);\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMajorMaterial(\"darker grey\");\n    rootStyle.style.setProperty(\"--floating-window-background-color\", \"var(--transparent-white)\");\n    rootStyle.style.setProperty(\"--floating-window-text-color\", \"var(--dark-red)\");\n    rootStyle.style.setProperty(\"--floating-window-border-color\", \"var(--dark-red)\");\n}\nfunction setDarkMode() {\n    isDarkMode = true;\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().setClearColor([0.1, 0.1, 0.1, 1.0]);\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().setMajorMaterial(\"lighter grey\");\n    rootStyle.style.setProperty(\"--floating-window-background-color\", \"var(--transparent-black)\");\n    rootStyle.style.setProperty(\"--floating-window-text-color\", \"var(--light-red)\");\n    rootStyle.style.setProperty(\"--floating-window-border-color\", \"var(--light-red)\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL3RvZ2dsZURhcmtNb2RlQ29tbWFuZC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxQztBQUVyQyxJQUFJLFVBQVUsR0FBWSxJQUFJLENBQUM7QUFFL0IsTUFBTSxTQUFTLEdBQXVDLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7QUFFL0UsU0FBUyxjQUFjO0lBQzVCLElBQUksVUFBVTtRQUFFLFlBQVksRUFBRSxDQUFDOztRQUMxQixXQUFXLEVBQUUsQ0FBQztBQUNyQixDQUFDO0FBRUQsU0FBUyxZQUFZO0lBQ25CLFVBQVUsR0FBRyxLQUFLLENBQUM7SUFDbkIsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzNELDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUMzRSxTQUFTLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxvQ0FBb0MsRUFBRSwwQkFBMEIsQ0FBQyxDQUFDO0lBQzlGLFNBQVMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLDhCQUE4QixFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFDL0UsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsZ0NBQWdDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztBQUVuRixDQUFDO0FBRUQsU0FBUyxXQUFXO0lBQ2xCLFVBQVUsR0FBRyxJQUFJLENBQUM7SUFDbEIsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzNELDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUM1RSxTQUFTLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxvQ0FBb0MsRUFBRSwwQkFBMEIsQ0FBQyxDQUFDO0lBQzlGLFNBQVMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLDhCQUE4QixFQUFFLGtCQUFrQixDQUFDLENBQUM7SUFDaEYsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsZ0NBQWdDLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztBQUNwRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvY29tbWFuZHMvb25lVGltZUNvbW1hbmRzL3RvZ2dsZURhcmtNb2RlQ29tbWFuZC50cz81YWYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuXG52YXIgaXNEYXJrTW9kZTogYm9vbGVhbiA9IHRydWU7XG5cbmNvbnN0IHJvb3RTdHlsZTogSFRNTFN0eWxlRWxlbWVudCA9IDxIVE1MU3R5bGVFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJzpyb290Jyk7XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVEYXJrTW9kZSgpIHtcbiAgaWYgKGlzRGFya01vZGUpIHNldExpZ2h0TW9kZSgpO1xuICBlbHNlIHNldERhcmtNb2RlKCk7XG59XG5cbmZ1bmN0aW9uIHNldExpZ2h0TW9kZSgpIHtcbiAgaXNEYXJrTW9kZSA9IGZhbHNlO1xuICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLnNldENsZWFyQ29sb3IoWzAuOCwgMC44LCAwLjgsIDEuMF0pO1xuICBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENvbnN0cnVjdGlvblBsYW5lKCkuc2V0TWFqb3JNYXRlcmlhbChcImRhcmtlciBncmV5XCIpO1xuICByb290U3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZsb2F0aW5nLXdpbmRvdy1iYWNrZ3JvdW5kLWNvbG9yXCIsIFwidmFyKC0tdHJhbnNwYXJlbnQtd2hpdGUpXCIpO1xuICByb290U3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZsb2F0aW5nLXdpbmRvdy10ZXh0LWNvbG9yXCIsIFwidmFyKC0tZGFyay1yZWQpXCIpO1xuICByb290U3R5bGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWZsb2F0aW5nLXdpbmRvdy1ib3JkZXItY29sb3JcIiwgXCJ2YXIoLS1kYXJrLXJlZClcIik7XG5cbn1cblxuZnVuY3Rpb24gc2V0RGFya01vZGUoKSB7XG4gIGlzRGFya01vZGUgPSB0cnVlO1xuICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLnNldENsZWFyQ29sb3IoWzAuMSwgMC4xLCAwLjEsIDEuMF0pO1xuICBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENvbnN0cnVjdGlvblBsYW5lKCkuc2V0TWFqb3JNYXRlcmlhbChcImxpZ2h0ZXIgZ3JleVwiKTtcbiAgcm9vdFN0eWxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1mbG9hdGluZy13aW5kb3ctYmFja2dyb3VuZC1jb2xvclwiLCBcInZhcigtLXRyYW5zcGFyZW50LWJsYWNrKVwiKTtcbiAgcm9vdFN0eWxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1mbG9hdGluZy13aW5kb3ctdGV4dC1jb2xvclwiLCBcInZhcigtLWxpZ2h0LXJlZClcIik7XG4gIHJvb3RTdHlsZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tZmxvYXRpbmctd2luZG93LWJvcmRlci1jb2xvclwiLCBcInZhcigtLWxpZ2h0LXJlZClcIik7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/commands/oneTimeCommands/toggleDarkModeCommand.ts\n");

/***/ }),

/***/ "./src/commands/selector.ts":
/*!**********************************!*\
  !*** ./src/commands/selector.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Selector: () => (/* binding */ Selector)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_frustum__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/frustum */ \"./src/geometry/frustum.ts\");\n\n\nclass Selector {\n    constructor() {\n        this.selection = new Set;\n        this.selecting = false;\n        this.element = document.createElement(\"div\");\n        this.element.id = \"clicker\";\n        this.element.className = \"floating-window\";\n        this.element.style.width = \"auto\";\n        this.element.hidden = true;\n        document.body.appendChild(this.element);\n    }\n    reset() {\n        for (let geo of this.selection) {\n            geo.unSelect();\n        }\n        this.selection.clear();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n    addToSubSelection(geos, subIDss) {\n        for (let i = 0; i < geos.length; i++) {\n            let geo = geos[i];\n            const subIDs = subIDss[i];\n            if (subIDs.length > 0 && subIDs[0] === -1) {\n                this.addToSelection(geo);\n                continue;\n            }\n            while (!_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().containsGeometry(geo) && geo.getParent())\n                geo = geo.getParent();\n            this.selection.add(geo);\n            geo.addToSubSelection(...subIDs);\n        }\n    }\n    removeFromSubSelection(geos, subIDss) {\n        for (let i = 0; i < geos.length; i++) {\n            let geo = geos[i];\n            const subIDs = subIDss[i];\n            if (subIDs.length > 0 && subIDs[0] === -1) {\n                this.removeFromSelection(geo);\n                continue;\n            }\n            while (!_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().containsGeometry(geo) && geo.getParent())\n                geo = geo.getParent();\n            geo.removeFromSubSelection(...subIDs);\n            if (!geo.hasSubSelection()) {\n                this.selection.delete(geo);\n            }\n        }\n    }\n    addToSelection(...geometry) {\n        for (let geo of geometry) {\n            while (!_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().containsGeometry(geo) && geo.getParent())\n                geo = geo.getParent();\n            this.selection.add(geo);\n            geo.select();\n        }\n    }\n    removeFromSelection(...geometry) {\n        for (let geo of geometry) {\n            while (!_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().containsGeometry(geo) && geo.getParent())\n                geo = geo.getParent();\n            this.selection.delete(geo);\n            geo.unSelect();\n        }\n    }\n    onSelectionMoved() {\n        for (const geo of this.selection) {\n            geo.onSelectionMoved();\n        }\n    }\n    toggleSelectionAtPixel(x, y, sub) {\n        if (this.selecting) {\n            this.doneTogglingSelectionAtPixel(null);\n            return;\n        }\n        this.selecting = true;\n        const ray = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(x, y);\n        const intersections = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getBoundingBoxHeirarchy().firstIntersectionsWithinMargin(ray, 2, sub);\n        const list = document.createElement(\"ul\");\n        this.element.innerHTML = \"\";\n        this.element.appendChild(list);\n        const geometryAtPixel = [];\n        for (let intersection of intersections) {\n            if (intersection.geometry === null)\n                continue; // construction plane intersection\n            if (intersection.description != \"control cage\") {\n                intersection.objectSubID = -1;\n            }\n            let geo = intersection.geometry; // TODO: chase parent\n            geometryAtPixel.push([geo, intersection.objectSubID]);\n            const li = document.createElement(\"li\");\n            li.innerText = intersection.description;\n            li.onclick = function () {\n                if (sub) {\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().doneTogglingSelectionAtPixel(geo, intersection.objectSubID);\n                }\n                else {\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().doneTogglingSelectionAtPixel(geo);\n                }\n            };\n            li.onmouseover = function () { geo.hover(); };\n            li.onmouseleave = function () { geo.unHover(); };\n            list.appendChild(li);\n        }\n        if (geometryAtPixel.length === 0) {\n            this.doneTogglingSelectionAtPixel(null);\n            return;\n        }\n        if (geometryAtPixel.length === 1) {\n            if (sub) {\n                this.doneTogglingSelectionAtPixel(geometryAtPixel[0][0], geometryAtPixel[0][1]);\n            }\n            else {\n                this.doneTogglingSelectionAtPixel(geometryAtPixel[0][0]);\n            }\n            return;\n        }\n        this.element.setAttribute(\"style\", `\n      left:${x}px;\n      top:${y}px;\n      width:auto;\n      height:auto;`);\n        this.element.hidden = false;\n    }\n    doneTogglingSelectionAtPixel(geo, subID) {\n        if (geo !== null) {\n            geo.unHover();\n            if (subID !== undefined && subID !== -1) {\n                if (geo.isSubSelected(subID)) {\n                    this.removeFromSubSelection([geo], [[subID]]);\n                }\n                else {\n                    this.addToSubSelection([geo], [[subID]]);\n                }\n            }\n            else {\n                if (geo.isSelected()) {\n                    this.removeFromSelection(geo);\n                }\n                else {\n                    this.addToSelection(geo);\n                }\n            }\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n        this.selecting = false;\n        this.element.hidden = true;\n    }\n    selectInRectangle(left, right, top, bottom, inclusive, sub) {\n        const frustum = new _geometry_frustum__WEBPACK_IMPORTED_MODULE_1__.Frustum(left, right, top, bottom);\n        if (sub) {\n            const within = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getBoundingBoxHeirarchy().getWithinFrustumSub(frustum, inclusive);\n            this.addToSubSelection(...within);\n        }\n        else {\n            const within = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getBoundingBoxHeirarchy().getWithinFrustum(frustum, inclusive);\n            for (const geo of within) {\n                this.addToSelection(geo);\n            }\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n    unSelectInRectangle(left, right, top, bottom, inclusive, sub) {\n        const frustum = new _geometry_frustum__WEBPACK_IMPORTED_MODULE_1__.Frustum(left, right, top, bottom);\n        if (sub) {\n            const within = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getBoundingBoxHeirarchy().getWithinFrustumSub(frustum, inclusive);\n            this.removeFromSubSelection(...within);\n        }\n        else {\n            const within = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getBoundingBoxHeirarchy().getWithinFrustum(frustum, inclusive);\n            for (const geo of within) {\n                this.removeFromSelection(geo);\n            }\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().updatedSelection();\n    }\n    getSelection() {\n        return this.selection;\n    }\n    transformSelected() {\n        const scene = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene();\n        for (const geo of this.selection) {\n            scene.getBoundingBoxHeirarchy().remove(geo);\n            geo.bakeSelectionTransform();\n            scene.getBoundingBoxHeirarchy().add(geo);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ3pDLENBQUM7SUFFTSxZQUFZO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBRU0saUJBQWlCO1FBQ3RCLE1BQU0sS0FBSyxHQUFVLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekMsS0FBSyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2hDLEtBQUssQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM1QyxHQUFHLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztZQUM3QixLQUFLLENBQUMsdUJBQXVCLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDMUM7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9jb21tYW5kcy9zZWxlY3Rvci50cz85NGU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgRnJ1c3R1bSB9IGZyb20gXCIuLi9nZW9tZXRyeS9mcnVzdHVtXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9nZW9tZXRyeS9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JheVwiO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi4vc2NlbmUvc2NlbmVcIjtcblxuXG5leHBvcnQgY2xhc3MgU2VsZWN0b3Ige1xuXG4gIHByaXZhdGUgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gbmV3IFNldDxHZW9tZXRyeT47XG4gIHByaXZhdGUgZWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgc2VsZWN0aW5nOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc2VsZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLmVsZW1lbnQuaWQgPSBcImNsaWNrZXJcIjtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJmbG9hdGluZy13aW5kb3dcIjtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSBcImF1dG9cIjtcbiAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgZ2VvIG9mIHRoaXMuc2VsZWN0aW9uKSB7XG4gICAgICBnZW8udW5TZWxlY3QoKTtcbiAgICB9XG4gICAgdGhpcy5zZWxlY3Rpb24uY2xlYXIoKTtcbiAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLnVwZGF0ZWRTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRUb1N1YlNlbGVjdGlvbihnZW9zOiBHZW9tZXRyeVtdLCBzdWJJRHNzOiBudW1iZXJbXVtdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZ2VvOiBHZW9tZXRyeSA9IGdlb3NbaV07XG4gICAgICBjb25zdCBzdWJJRHM6IG51bWJlcltdID0gc3ViSURzc1tpXTtcbiAgICAgIGlmIChzdWJJRHMubGVuZ3RoID4gMCAmJiBzdWJJRHNbMF0gPT09IC0xKSB7XG4gICAgICAgIHRoaXMuYWRkVG9TZWxlY3Rpb24oZ2VvKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB3aGlsZSAoIUlOU1RBTkNFLmdldFNjZW5lKCkuY29udGFpbnNHZW9tZXRyeShnZW8pICYmIGdlby5nZXRQYXJlbnQoKSkgZ2VvID0gZ2VvLmdldFBhcmVudCgpITtcbiAgICAgIHRoaXMuc2VsZWN0aW9uLmFkZChnZW8pO1xuICAgICAgZ2VvLmFkZFRvU3ViU2VsZWN0aW9uKC4uLnN1YklEcyk7XG4gICAgfVxuICB9XG5cblxuICBwdWJsaWMgcmVtb3ZlRnJvbVN1YlNlbGVjdGlvbihnZW9zOiBHZW9tZXRyeVtdLCBzdWJJRHNzOiBudW1iZXJbXVtdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZ2VvOiBHZW9tZXRyeSA9IGdlb3NbaV07XG4gICAgICBjb25zdCBzdWJJRHM6IG51bWJlcltdID0gc3ViSURzc1tpXTtcbiAgICAgIGlmIChzdWJJRHMubGVuZ3RoID4gMCAmJiBzdWJJRHNbMF0gPT09IC0xKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRnJvbVNlbGVjdGlvbihnZW8pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICghSU5TVEFOQ0UuZ2V0U2NlbmUoKS5jb250YWluc0dlb21ldHJ5KGdlbykgJiYgZ2VvLmdldFBhcmVudCgpKSBnZW8gPSBnZW8uZ2V0UGFyZW50KCkhO1xuICAgICAgZ2VvLnJlbW92ZUZyb21TdWJTZWxlY3Rpb24oLi4uc3ViSURzKTtcbiAgICAgIGlmICghZ2VvLmhhc1N1YlNlbGVjdGlvbigpKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLmRlbGV0ZShnZW8pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRUb1NlbGVjdGlvbiguLi5nZW9tZXRyeTogR2VvbWV0cnlbXSk6IHZvaWQge1xuICAgIGZvciAobGV0IGdlbyBvZiBnZW9tZXRyeSkge1xuICAgICAgd2hpbGUgKCFJTlNUQU5DRS5nZXRTY2VuZSgpLmNvbnRhaW5zR2VvbWV0cnkoZ2VvKSAmJiBnZW8uZ2V0UGFyZW50KCkpIGdlbyA9IGdlby5nZXRQYXJlbnQoKSE7XG4gICAgICB0aGlzLnNlbGVjdGlvbi5hZGQoZ2VvKTtcbiAgICAgIGdlby5zZWxlY3QoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlRnJvbVNlbGVjdGlvbiguLi5nZW9tZXRyeTogR2VvbWV0cnlbXSk6IHZvaWQge1xuICAgIGZvciAobGV0IGdlbyBvZiBnZW9tZXRyeSkge1xuICAgICAgd2hpbGUgKCFJTlNUQU5DRS5nZXRTY2VuZSgpLmNvbnRhaW5zR2VvbWV0cnkoZ2VvKSAmJiBnZW8uZ2V0UGFyZW50KCkpIGdlbyA9IGdlby5nZXRQYXJlbnQoKSE7XG4gICAgICB0aGlzLnNlbGVjdGlvbi5kZWxldGUoZ2VvKTtcbiAgICAgIGdlby51blNlbGVjdCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvblNlbGVjdGlvbk1vdmVkKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuc2VsZWN0aW9uKSB7XG4gICAgICBnZW8ub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGVTZWxlY3Rpb25BdFBpeGVsKHg6IG51bWJlciwgeTogbnVtYmVyLCBzdWI6IGJvb2xlYW4pOiB2b2lkIHtcblxuICAgIGlmICh0aGlzLnNlbGVjdGluZykge1xuICAgICAgdGhpcy5kb25lVG9nZ2xpbmdTZWxlY3Rpb25BdFBpeGVsKG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNlbGVjdGluZyA9IHRydWU7XG5cbiAgICBjb25zdCByYXk6IFJheSA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0UmF5QXRQaXhlbCh4LCB5KTtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25zOiBJbnRlcnNlY3Rpb25bXSA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Qm91bmRpbmdCb3hIZWlyYXJjaHkoKS5maXJzdEludGVyc2VjdGlvbnNXaXRoaW5NYXJnaW4ocmF5LCAyLCBzdWIpO1xuICAgIGNvbnN0IGxpc3Q6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChsaXN0KTtcbiAgICBjb25zdCBnZW9tZXRyeUF0UGl4ZWw6IFtHZW9tZXRyeSwgbnVtYmVyXVtdID0gW107XG4gICAgZm9yIChsZXQgaW50ZXJzZWN0aW9uIG9mIGludGVyc2VjdGlvbnMpIHtcblxuICAgICAgaWYgKGludGVyc2VjdGlvbi5nZW9tZXRyeSA9PT0gbnVsbCkgY29udGludWU7IC8vIGNvbnN0cnVjdGlvbiBwbGFuZSBpbnRlcnNlY3Rpb25cblxuICAgICAgaWYgKGludGVyc2VjdGlvbi5kZXNjcmlwdGlvbiAhPSBcImNvbnRyb2wgY2FnZVwiKSB7XG4gICAgICAgIGludGVyc2VjdGlvbi5vYmplY3RTdWJJRCA9IC0xO1xuICAgICAgfVxuXG4gICAgICBsZXQgZ2VvOiBHZW9tZXRyeSA9IGludGVyc2VjdGlvbi5nZW9tZXRyeTsvLyBUT0RPOiBjaGFzZSBwYXJlbnRcbiAgICAgIGdlb21ldHJ5QXRQaXhlbC5wdXNoKFtnZW8sIGludGVyc2VjdGlvbi5vYmplY3RTdWJJRF0pO1xuXG4gICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgIGxpLmlubmVyVGV4dCA9IGludGVyc2VjdGlvbi5kZXNjcmlwdGlvbjtcbiAgICAgIGxpLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHN1Yikge1xuICAgICAgICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkuZG9uZVRvZ2dsaW5nU2VsZWN0aW9uQXRQaXhlbChnZW8sIGludGVyc2VjdGlvbi5vYmplY3RTdWJJRCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5kb25lVG9nZ2xpbmdTZWxlY3Rpb25BdFBpeGVsKGdlbyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBsaS5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKCkgeyBnZW8uaG92ZXIoKTsgfTtcbiAgICAgIGxpLm9ubW91c2VsZWF2ZSA9IGZ1bmN0aW9uKCkgeyBnZW8udW5Ib3ZlcigpOyB9XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgICB9XG5cbiAgICBpZiAoZ2VvbWV0cnlBdFBpeGVsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5kb25lVG9nZ2xpbmdTZWxlY3Rpb25BdFBpeGVsKG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZ2VvbWV0cnlBdFBpeGVsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKHN1Yikge1xuICAgICAgICB0aGlzLmRvbmVUb2dnbGluZ1NlbGVjdGlvbkF0UGl4ZWwoZ2VvbWV0cnlBdFBpeGVsWzBdWzBdLCBnZW9tZXRyeUF0UGl4ZWxbMF1bMV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kb25lVG9nZ2xpbmdTZWxlY3Rpb25BdFBpeGVsKGdlb21ldHJ5QXRQaXhlbFswXVswXSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIGBcbiAgICAgIGxlZnQ6JHt4fXB4O1xuICAgICAgdG9wOiR7eX1weDtcbiAgICAgIHdpZHRoOmF1dG87XG4gICAgICBoZWlnaHQ6YXV0bztgXG4gICAgKTtcbiAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGRvbmVUb2dnbGluZ1NlbGVjdGlvbkF0UGl4ZWwoZ2VvOiBHZW9tZXRyeSB8IG51bGwsIHN1YklEPzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGdlbyAhPT0gbnVsbCkge1xuICAgICAgZ2VvLnVuSG92ZXIoKTtcbiAgICAgIGlmIChzdWJJRCAhPT0gdW5kZWZpbmVkICYmIHN1YklEICE9PSAtMSkge1xuICAgICAgICBpZiAoZ2VvLmlzU3ViU2VsZWN0ZWQoc3ViSUQpKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVGcm9tU3ViU2VsZWN0aW9uKFtnZW9dLCBbW3N1YklEXV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYWRkVG9TdWJTZWxlY3Rpb24oW2dlb10sIFtbc3ViSURdXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChnZW8uaXNTZWxlY3RlZCgpKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVGcm9tU2VsZWN0aW9uKGdlbyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5hZGRUb1NlbGVjdGlvbihnZW8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIElOU1RBTkNFLmdldE1vdmVyKCkudXBkYXRlZFNlbGVjdGlvbigpO1xuICAgIHRoaXMuc2VsZWN0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5lbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0SW5SZWN0YW5nbGUobGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyLCB0b3A6IG51bWJlciwgYm90dG9tOiBudW1iZXIsIGluY2x1c2l2ZTogYm9vbGVhbiwgc3ViOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgZnJ1c3R1bTogRnJ1c3R1bSA9IG5ldyBGcnVzdHVtKGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSk7XG4gICAgaWYgKHN1Yikge1xuICAgICAgY29uc3Qgd2l0aGluOiBbR2VvbWV0cnlbXSwgbnVtYmVyW11bXV0gPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldEJvdW5kaW5nQm94SGVpcmFyY2h5KCkuZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgICAgdGhpcy5hZGRUb1N1YlNlbGVjdGlvbiguLi53aXRoaW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB3aXRoaW46IEdlb21ldHJ5W10gPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldEJvdW5kaW5nQm94SGVpcmFyY2h5KCkuZ2V0V2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgICAgZm9yIChjb25zdCBnZW8gb2Ygd2l0aGluKSB7XG4gICAgICAgIHRoaXMuYWRkVG9TZWxlY3Rpb24oZ2VvKTtcbiAgICAgIH1cbiAgICB9XG4gICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS51cGRhdGVkU2VsZWN0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgdW5TZWxlY3RJblJlY3RhbmdsZShsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIsIHRvcDogbnVtYmVyLCBib3R0b206IG51bWJlciwgaW5jbHVzaXZlOiBib29sZWFuLCBzdWI6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBmcnVzdHVtOiBGcnVzdHVtID0gbmV3IEZydXN0dW0obGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tKTtcbiAgICBpZiAoc3ViKSB7XG4gICAgICBjb25zdCB3aXRoaW46IFtHZW9tZXRyeVtdLCBudW1iZXJbXVtdXSA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Qm91bmRpbmdCb3hIZWlyYXJjaHkoKS5nZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW0sIGluY2x1c2l2ZSk7XG4gICAgICB0aGlzLnJlbW92ZUZyb21TdWJTZWxlY3Rpb24oLi4ud2l0aGluKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgd2l0aGluOiBHZW9tZXRyeVtdID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRCb3VuZGluZ0JveEhlaXJhcmNoeSgpLmdldFdpdGhpbkZydXN0dW0oZnJ1c3R1bSwgaW5jbHVzaXZlKTtcbiAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHdpdGhpbikge1xuICAgICAgICB0aGlzLnJlbW92ZUZyb21TZWxlY3Rpb24oZ2VvKTtcbiAgICAgIH1cbiAgICB9XG4gICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS51cGRhdGVkU2VsZWN0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2VsZWN0aW9uKCk6IFNldDxHZW9tZXRyeT4ge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyB0cmFuc2Zvcm1TZWxlY3RlZCgpIHtcbiAgICBjb25zdCBzY2VuZTogU2NlbmUgPSBJTlNUQU5DRS5nZXRTY2VuZSgpO1xuICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuc2VsZWN0aW9uKSB7XG4gICAgICBzY2VuZS5nZXRCb3VuZGluZ0JveEhlaXJhcmNoeSgpLnJlbW92ZShnZW8pO1xuICAgICAgZ2VvLmJha2VTZWxlY3Rpb25UcmFuc2Zvcm0oKTtcbiAgICAgIHNjZW5lLmdldEJvdW5kaW5nQm94SGVpcmFyY2h5KCkuYWRkKGdlbyk7XG4gICAgfVxuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/commands/selector.ts\n");

/***/ }),

/***/ "./src/events/eventManager.ts":
/*!************************************!*\
  !*** ./src/events/eventManager.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventManager: () => (/* binding */ EventManager)\n/* harmony export */ });\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../mode */ \"./src/mode.ts\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _mouseHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mouseHandler */ \"./src/events/mouseHandler.ts\");\n\n\n\nclass EventManager {\n    constructor() {\n        this.mouseHandler = new _mouseHandler__WEBPACK_IMPORTED_MODULE_2__.MouseHandler();\n        onmousemove = (event) => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getEventQueue().pushEvent(() => {\n                this.mouseHandler.onMouseMove(event);\n            });\n        };\n        onresize = () => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getEventQueue().pushEvent(() => {\n                _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getRenderer().updateScreenSize();\n            });\n        };\n        onkeydown = (event) => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getEventQueue().pushEvent(() => {\n                if (event.code == \"Tab\") {\n                    if (_cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getMode() == _mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Navigation) {\n                        _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.setMode(_mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Command);\n                    }\n                    else {\n                        _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getCli().clearInput();\n                        _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.setMode(_mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Navigation);\n                    }\n                    // prevent tab from chaging focus\n                    event.preventDefault();\n                    event.stopPropagation();\n                }\n                else {\n                    if (_cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getMode() == _mode__WEBPACK_IMPORTED_MODULE_0__.OperatingMode.Command)\n                        _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getCli().processKeyDownEvent(event);\n                    else if (event.code == \"Delete\" || event.code == \"Backspace\") {\n                        _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getScene().deleteSelected();\n                    }\n                    _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getMover().onkeydown(event);\n                }\n            });\n        };\n        onfocus = () => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getEventQueue().pushEvent(() => {\n                _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getStats().reset();\n            });\n        };\n        onmousedown = (event) => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getEventQueue().pushEvent(() => {\n                this.mouseHandler.onMouseDown(event);\n            });\n        };\n        onmouseup = (event) => {\n            _cad__WEBPACK_IMPORTED_MODULE_1__.INSTANCE.getEventQueue().pushEvent(() => {\n                this.mouseHandler.onMouseUp(event);\n            });\n        };\n    }\n    getMouseHandler() {\n        return this.mouseHandler;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEIsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO0lBQzNCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2V2ZW50cy9ldmVudE1hbmFnZXIudHM/YWQzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVyYXRpbmdNb2RlIH0gZnJvbSBcIi4uL21vZGVcIlxuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IE1vdXNlSGFuZGxlciB9IGZyb20gXCIuL21vdXNlSGFuZGxlclwiO1xuXG5cbmV4cG9ydCBjbGFzcyBFdmVudE1hbmFnZXIge1xuXG4gIHByaXZhdGUgbW91c2VIYW5kbGVyOiBNb3VzZUhhbmRsZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB0aGlzLm1vdXNlSGFuZGxlciA9IG5ldyBNb3VzZUhhbmRsZXIoKTtcblxuICAgIG9ubW91c2Vtb3ZlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cbiAgICAgIElOU1RBTkNFLmdldEV2ZW50UXVldWUoKS5wdXNoRXZlbnQoKCkgPT4ge1xuICAgICAgICB0aGlzLm1vdXNlSGFuZGxlci5vbk1vdXNlTW92ZShldmVudCk7XG4gICAgICB9KTtcblxuICAgIH07XG5cbiAgICBvbnJlc2l6ZSA9ICgpID0+IHtcbiAgICAgIElOU1RBTkNFLmdldEV2ZW50UXVldWUoKS5wdXNoRXZlbnQoKCkgPT4ge1xuICAgICAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLnVwZGF0ZVNjcmVlblNpemUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG9ua2V5ZG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgSU5TVEFOQ0UuZ2V0RXZlbnRRdWV1ZSgpLnB1c2hFdmVudCgoKSA9PiB7XG4gICAgICAgIGlmIChldmVudC5jb2RlID09IFwiVGFiXCIpIHtcbiAgICAgICAgICBpZiAoSU5TVEFOQ0UuZ2V0TW9kZSgpID09IE9wZXJhdGluZ01vZGUuTmF2aWdhdGlvbikge1xuICAgICAgICAgICAgSU5TVEFOQ0Uuc2V0TW9kZShPcGVyYXRpbmdNb2RlLkNvbW1hbmQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBJTlNUQU5DRS5nZXRDbGkoKS5jbGVhcklucHV0KCk7XG4gICAgICAgICAgICBJTlNUQU5DRS5zZXRNb2RlKE9wZXJhdGluZ01vZGUuTmF2aWdhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHByZXZlbnQgdGFiIGZyb20gY2hhZ2luZyBmb2N1c1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKElOU1RBTkNFLmdldE1vZGUoKSA9PSBPcGVyYXRpbmdNb2RlLkNvbW1hbmQpIElOU1RBTkNFLmdldENsaSgpLnByb2Nlc3NLZXlEb3duRXZlbnQoZXZlbnQpO1xuICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmNvZGUgPT0gXCJEZWxldGVcIiB8fCBldmVudC5jb2RlID09IFwiQmFja3NwYWNlXCIpIHtcbiAgICAgICAgICAgIElOU1RBTkNFLmdldFNjZW5lKCkuZGVsZXRlU2VsZWN0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5vbmtleWRvd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgb25mb2N1cyA9ICgpID0+IHtcbiAgICAgIElOU1RBTkNFLmdldEV2ZW50UXVldWUoKS5wdXNoRXZlbnQoKCkgPT4ge1xuICAgICAgICBJTlNUQU5DRS5nZXRTdGF0cygpLnJlc2V0KCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBvbm1vdXNlZG93biA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgSU5TVEFOQ0UuZ2V0RXZlbnRRdWV1ZSgpLnB1c2hFdmVudCgoKSA9PiB7XG4gICAgICAgIHRoaXMubW91c2VIYW5kbGVyLm9uTW91c2VEb3duKGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG9ubW91c2V1cCA9IChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgSU5TVEFOQ0UuZ2V0RXZlbnRRdWV1ZSgpLnB1c2hFdmVudCgoKSA9PiB7XG4gICAgICAgIHRoaXMubW91c2VIYW5kbGVyLm9uTW91c2VVcChldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0TW91c2VIYW5kbGVyKCk6IE1vdXNlSGFuZGxlciB7XG4gICAgcmV0dXJuIHRoaXMubW91c2VIYW5kbGVyO1xuICB9XG5cbn1cblxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/events/eventManager.ts\n");

/***/ }),

/***/ "./src/events/eventQueue.ts":
/*!**********************************!*\
  !*** ./src/events/eventQueue.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventQueue: () => (/* binding */ EventQueue)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nclass EventNode {\n    constructor(handle) {\n        this.handle = handle;\n        this.next = null;\n    }\n    addNext(eventNode) {\n        this.next = eventNode;\n    }\n    getNext() {\n        return this.next;\n    }\n    execute() {\n        this.handle();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventQueue().eventComplete();\n    }\n}\nclass EventQueue {\n    constructor() {\n        this.first = null;\n        this.last = null;\n    }\n    pushEvent(handle) {\n        if (this.first === null) {\n            this.first = new EventNode(handle);\n            this.last = this.first;\n            this.first.execute();\n        }\n        else {\n            this.last.addNext(new EventNode(handle));\n            this.last = this.last.getNext();\n        }\n    }\n    eventComplete() {\n        this.first = this.first.getNext();\n        if (this.first === null) {\n            this.last = null;\n        }\n        else {\n            this.first.execute();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXZlbnRzL2V2ZW50UXVldWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFHbEMsTUFBTSxTQUFTO0lBSWIsWUFDVSxNQUFnQjtRQUFoQixXQUFNLEdBQU4sTUFBTSxDQUFVO1FBSGxCLFNBQUksR0FBcUIsSUFBSSxDQUFDO0lBSWxDLENBQUM7SUFFRSxPQUFPLENBQUMsU0FBb0I7UUFDakMsSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUM7SUFDeEIsQ0FBQztJQUVNLE9BQU87UUFDWixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztJQUVNLE9BQU87UUFDWixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCwwQ0FBUSxDQUFDLGFBQWEsRUFBRSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQzNDLENBQUM7Q0FDRjtBQUdNLE1BQU0sVUFBVTtJQUtyQjtRQUNFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ25CLENBQUM7SUFFTSxTQUFTLENBQUMsTUFBZ0I7UUFDL0IsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLElBQUksRUFBRTtZQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUN2QixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQ3RCO2FBQU07WUFDTCxJQUFJLENBQUMsSUFBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNsQztJQUNILENBQUM7SUFFTSxhQUFhO1FBQ2xCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuQyxJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssSUFBSSxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQ2xCO2FBQU07WUFDTCxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQ3RCO0lBQ0gsQ0FBQztDQUdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZXZlbnRzL2V2ZW50UXVldWUudHM/MjE5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcblxuXG5jbGFzcyBFdmVudE5vZGUge1xuXG4gIHByaXZhdGUgbmV4dDogRXZlbnROb2RlIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBoYW5kbGU6IEZ1bmN0aW9uXG4gICkgeyB9XG5cbiAgcHVibGljIGFkZE5leHQoZXZlbnROb2RlOiBFdmVudE5vZGUpOiB2b2lkIHtcbiAgICB0aGlzLm5leHQgPSBldmVudE5vZGU7XG4gIH1cblxuICBwdWJsaWMgZ2V0TmV4dCgpOiBFdmVudE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5uZXh0O1xuICB9XG5cbiAgcHVibGljIGV4ZWN1dGUoKTogdm9pZCB7XG4gICAgdGhpcy5oYW5kbGUoKTtcbiAgICBJTlNUQU5DRS5nZXRFdmVudFF1ZXVlKCkuZXZlbnRDb21wbGV0ZSgpO1xuICB9XG59XG5cblxuZXhwb3J0IGNsYXNzIEV2ZW50UXVldWUge1xuXG4gIHByaXZhdGUgZmlyc3Q6IEV2ZW50Tm9kZSB8IG51bGw7XG4gIHByaXZhdGUgbGFzdDogRXZlbnROb2RlIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmZpcnN0ID0gbnVsbDtcbiAgICB0aGlzLmxhc3QgPSBudWxsO1xuICB9XG5cbiAgcHVibGljIHB1c2hFdmVudChoYW5kbGU6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZmlyc3QgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuZmlyc3QgPSBuZXcgRXZlbnROb2RlKGhhbmRsZSk7XG4gICAgICB0aGlzLmxhc3QgPSB0aGlzLmZpcnN0O1xuICAgICAgdGhpcy5maXJzdC5leGVjdXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFzdCEuYWRkTmV4dChuZXcgRXZlbnROb2RlKGhhbmRsZSkpO1xuICAgICAgdGhpcy5sYXN0ID0gdGhpcy5sYXN0IS5nZXROZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGV2ZW50Q29tcGxldGUoKTogdm9pZCB7XG4gICAgdGhpcy5maXJzdCA9IHRoaXMuZmlyc3QhLmdldE5leHQoKTtcbiAgICBpZiAodGhpcy5maXJzdCA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5sYXN0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maXJzdC5leGVjdXRlKCk7XG4gICAgfVxuICB9XG5cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/events/eventQueue.ts\n");

/***/ }),

/***/ "./src/events/mouseHandler.ts":
/*!************************************!*\
  !*** ./src/events/mouseHandler.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MouseHandler: () => (/* binding */ MouseHandler)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\nclass MouseHandler {\n    constructor() {\n        this.mousePos = [-1, -1];\n        this.mouseDown = false;\n        this.shiftDown = false;\n        this.controlDown = false;\n        this.metaDown = false;\n        this.drag = null;\n    }\n    onMouseMove(event) {\n        var _a;\n        this.mousePos = [event.clientX, event.clientY];\n        (_a = this.drag) === null || _a === void 0 ? void 0 : _a.update(event.clientX, event.clientY);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleMouseMove();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().onMouseMove();\n    }\n    onMouseDown(event) {\n        if (event.button == 0) { // left click\n            if (!_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().hasActiveCommand()) {\n                // forward clicked id to mover incase mover was clicked\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getIdAtPixel(event.clientX, event.clientY).then((id) => {\n                    if (id === 0) {\n                        this.drag = new Drag(event.clientX, event.clientY);\n                        this.mouseDown = true;\n                        this.shiftDown = event.shiftKey;\n                        this.controlDown = event.ctrlKey;\n                        this.metaDown = event.metaKey;\n                    }\n                    else {\n                        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().idClicked(id);\n                    }\n                });\n            }\n            else {\n                this.drag = new Drag(event.clientX, event.clientY);\n                this.mouseDown = true;\n                this.shiftDown = event.shiftKey;\n                this.controlDown = event.ctrlKey;\n                this.metaDown = event.metaKey;\n            }\n        }\n    }\n    onMouseUp(event) {\n        var _a;\n        if (event.button === 0) { // left button\n            if (this.drag && !this.drag.isDrag()) { // click\n                if (_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().hasActiveCommand()) { // forward click to active command\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().handleClickInput();\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCli().render();\n                }\n                else {\n                    if (!_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().isActive()) {\n                        if (!this.shiftDown)\n                            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().reset();\n                        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().toggleSelectionAtPixel(event.clientX, event.clientY, this.metaDown);\n                    }\n                }\n            }\n            else { // drag\n                if (!_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().isActive() && !_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getCommandManager().hasActiveCommand()) {\n                    if (this.drag) { // should be set unless i inspected element\n                        if (!this.shiftDown)\n                            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().reset();\n                        const inclusive = this.drag.isLeftward();\n                        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().selectInRectangle(...this.drag.getBounds(), inclusive, this.metaDown);\n                    }\n                }\n            }\n            (_a = this.drag) === null || _a === void 0 ? void 0 : _a.destroy();\n            this.drag = null;\n            this.mouseDown = false;\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().onMouseUp();\n    }\n    getMousePos() {\n        return this.mousePos;\n    }\n}\nclass Drag {\n    constructor(x1, y1) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.element = document.getElementById(\"selection-rectangle\");\n        this.update(this.x1, this.y1);\n        this.element.hidden = false;\n    }\n    update(x, y) {\n        this.x2 = x;\n        this.y2 = y;\n        const top = Math.min(this.y1, this.y2);\n        const bottom = Math.max(this.y1, this.y2);\n        const left = Math.min(this.x1, this.x2);\n        const right = Math.max(this.x1, this.x2);\n        this.element.style.left = `${left}px`;\n        this.element.style.top = `${top}px`;\n        this.element.style.width = `${right - left}px`;\n        this.element.style.height = `${bottom - top}px`;\n    }\n    isDrag() {\n        return this.x1 != this.x2 || this.y1 != this.y2;\n    }\n    isLeftward() {\n        return this.x2 < this.x1;\n    }\n    getBounds() {\n        return [\n            Math.min(this.x1, this.x2),\n            Math.max(this.x1, this.x2),\n            Math.min(this.y1, this.y2),\n            Math.max(this.y1, this.y2),\n        ];\n    }\n    destroy() {\n        this.element.hidden = true;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cz8yZmE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuXG5cblxuZXhwb3J0IGNsYXNzIE1vdXNlSGFuZGxlciB7XG5cbiAgcHJpdmF0ZSBtb3VzZVBvczogW251bWJlciwgbnVtYmVyXTtcbiAgcHJpdmF0ZSBtb3VzZURvd246IGJvb2xlYW47XG4gIHByaXZhdGUgc2hpZnREb3duOiBib29sZWFuO1xuICBwcml2YXRlIGNvbnRyb2xEb3duOiBib29sZWFuO1xuICBwcml2YXRlIG1ldGFEb3duOiBib29sZWFuO1xuICBwcml2YXRlIGRyYWc6IERyYWcgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubW91c2VQb3MgPSBbLTEsIC0xXTtcbiAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuICAgIHRoaXMuc2hpZnREb3duID0gZmFsc2U7XG4gICAgdGhpcy5jb250cm9sRG93biA9IGZhbHNlO1xuICAgIHRoaXMubWV0YURvd24gPSBmYWxzZTtcbiAgICB0aGlzLmRyYWcgPSBudWxsO1xuICB9XG5cbiAgcHVibGljIG9uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5tb3VzZVBvcyA9IFtldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZXTtcbiAgICB0aGlzLmRyYWc/LnVwZGF0ZShldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICBJTlNUQU5DRS5nZXRDb21tYW5kTWFuYWdlcigpLmhhbmRsZU1vdXNlTW92ZSgpO1xuICAgIElOU1RBTkNFLmdldE1vdmVyKCkub25Nb3VzZU1vdmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbk1vdXNlRG93bihldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmIChldmVudC5idXR0b24gPT0gMCkgeyAvLyBsZWZ0IGNsaWNrXG5cbiAgICAgIGlmICghSU5TVEFOQ0UuZ2V0Q29tbWFuZE1hbmFnZXIoKS5oYXNBY3RpdmVDb21tYW5kKCkpIHtcbiAgICAgICAgLy8gZm9yd2FyZCBjbGlja2VkIGlkIHRvIG1vdmVyIGluY2FzZSBtb3ZlciB3YXMgY2xpY2tlZFxuICAgICAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldElkQXRQaXhlbChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKS50aGVuKChpZDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgaWYgKGlkID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWcgPSBuZXcgRHJhZyhldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2hpZnREb3duID0gZXZlbnQuc2hpZnRLZXk7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xEb3duID0gZXZlbnQuY3RybEtleTtcbiAgICAgICAgICAgIHRoaXMubWV0YURvd24gPSBldmVudC5tZXRhS2V5O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBJTlNUQU5DRS5nZXRNb3ZlcigpLmlkQ2xpY2tlZChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZHJhZyA9IG5ldyBEcmFnKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIHRoaXMuc2hpZnREb3duID0gZXZlbnQuc2hpZnRLZXk7XG4gICAgICAgIHRoaXMuY29udHJvbERvd24gPSBldmVudC5jdHJsS2V5O1xuICAgICAgICB0aGlzLm1ldGFEb3duID0gZXZlbnQubWV0YUtleTtcbiAgICAgIH1cblxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk1vdXNlVXAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7IC8vIGxlZnQgYnV0dG9uXG4gICAgICBpZiAodGhpcy5kcmFnICYmICF0aGlzLmRyYWcuaXNEcmFnKCkpIHsgLy8gY2xpY2tcbiAgICAgICAgaWYgKElOU1RBTkNFLmdldENvbW1hbmRNYW5hZ2VyKCkuaGFzQWN0aXZlQ29tbWFuZCgpKSB7IC8vIGZvcndhcmQgY2xpY2sgdG8gYWN0aXZlIGNvbW1hbmRcbiAgICAgICAgICBJTlNUQU5DRS5nZXRDb21tYW5kTWFuYWdlcigpLmhhbmRsZUNsaWNrSW5wdXQoKTtcbiAgICAgICAgICBJTlNUQU5DRS5nZXRDbGkoKS5yZW5kZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIUlOU1RBTkNFLmdldE1vdmVyKCkuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNoaWZ0RG93bikgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5yZXNldCgpO1xuICAgICAgICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS50b2dnbGVTZWxlY3Rpb25BdFBpeGVsKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFksIHRoaXMubWV0YURvd24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gZHJhZ1xuICAgICAgICBpZiAoIUlOU1RBTkNFLmdldE1vdmVyKCkuaXNBY3RpdmUoKSAmJiAhSU5TVEFOQ0UuZ2V0Q29tbWFuZE1hbmFnZXIoKS5oYXNBY3RpdmVDb21tYW5kKCkpIHtcbiAgICAgICAgICBpZiAodGhpcy5kcmFnKSB7IC8vIHNob3VsZCBiZSBzZXQgdW5sZXNzIGkgaW5zcGVjdGVkIGVsZW1lbnRcbiAgICAgICAgICAgIGlmICghdGhpcy5zaGlmdERvd24pIElOU1RBTkNFLmdldFNlbGVjdG9yKCkucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGluY2x1c2l2ZTogYm9vbGVhbiA9IHRoaXMuZHJhZyEuaXNMZWZ0d2FyZCgpO1xuICAgICAgICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5zZWxlY3RJblJlY3RhbmdsZSguLi50aGlzLmRyYWchLmdldEJvdW5kcygpLCBpbmNsdXNpdmUsIHRoaXMubWV0YURvd24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5kcmFnPy5kZXN0cm95KCk7XG4gICAgICB0aGlzLmRyYWcgPSBudWxsO1xuICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICB9XG4gICAgSU5TVEFOQ0UuZ2V0TW92ZXIoKS5vbk1vdXNlVXAoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNb3VzZVBvcygpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICByZXR1cm4gdGhpcy5tb3VzZVBvcztcbiAgfVxufVxuXG5jbGFzcyBEcmFnIHtcblxuICBwcml2YXRlIHgyITogbnVtYmVyO1xuICBwcml2YXRlIHkyITogbnVtYmVyO1xuICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgeDE6IG51bWJlcixcbiAgICBwcml2YXRlIHkxOiBudW1iZXIsXG4gICkge1xuICAgIHRoaXMuZWxlbWVudCA9IDxIVE1MRGl2RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbGVjdGlvbi1yZWN0YW5nbGVcIik7XG4gICAgdGhpcy51cGRhdGUodGhpcy54MSwgdGhpcy55MSk7XG4gICAgdGhpcy5lbGVtZW50LmhpZGRlbiA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMueDIgPSB4O1xuICAgIHRoaXMueTIgPSB5O1xuXG4gICAgY29uc3QgdG9wID0gTWF0aC5taW4odGhpcy55MSwgdGhpcy55Mik7XG4gICAgY29uc3QgYm90dG9tID0gTWF0aC5tYXgodGhpcy55MSwgdGhpcy55Mik7XG4gICAgY29uc3QgbGVmdCA9IE1hdGgubWluKHRoaXMueDEsIHRoaXMueDIpO1xuICAgIGNvbnN0IHJpZ2h0ID0gTWF0aC5tYXgodGhpcy54MSwgdGhpcy54Mik7XG5cbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2xlZnR9cHhgO1xuICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xuICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3JpZ2h0IC0gbGVmdH1weGA7XG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke2JvdHRvbSAtIHRvcH1weGA7XG4gIH1cblxuICBwdWJsaWMgaXNEcmFnKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLngxICE9IHRoaXMueDIgfHwgdGhpcy55MSAhPSB0aGlzLnkyO1xuICB9XG5cbiAgcHVibGljIGlzTGVmdHdhcmQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMueDIgPCB0aGlzLngxO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kcygpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIE1hdGgubWluKHRoaXMueDEsIHRoaXMueDIpLFxuICAgICAgTWF0aC5tYXgodGhpcy54MSwgdGhpcy54MiksXG4gICAgICBNYXRoLm1pbih0aGlzLnkxLCB0aGlzLnkyKSxcbiAgICAgIE1hdGgubWF4KHRoaXMueTEsIHRoaXMueTIpLFxuICAgIF1cbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICB9XG5cblxuXG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/events/mouseHandler.ts\n");

/***/ }),

/***/ "./src/geometry/boundingBox.ts":
/*!*************************************!*\
  !*** ./src/geometry/boundingBox.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BoundingBox: () => (/* binding */ BoundingBox)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n\nclass BoundingBox {\n    constructor(xMin = Infinity, xMax = -Infinity, yMin = Infinity, yMax = -Infinity, zMin = Infinity, zMax = -Infinity) {\n        this.xMin = xMin;\n        this.xMax = xMax;\n        this.yMin = yMin;\n        this.yMax = yMax;\n        this.zMin = zMin;\n        this.zMax = zMax;\n    }\n    getXMin() { return this.xMin; }\n    getYMin() { return this.yMin; }\n    getZMin() { return this.zMin; }\n    getXMax() { return this.xMax; }\n    getYMax() { return this.yMax; }\n    getZMax() { return this.zMax; }\n    print() {\n        console.log(`BB: x: [${this.xMin}, ${this.xMax}], y: [${this.yMin}, ${this.yMax}], z: [${this.zMin}, ${this.zMax}];`);\n    }\n    addVec3(v) {\n        this.xMin = Math.min(this.xMin, v[0]);\n        this.yMin = Math.min(this.yMin, v[1]);\n        this.zMin = Math.min(this.zMin, v[2]);\n        this.xMax = Math.max(this.xMax, v[0]);\n        this.yMax = Math.max(this.yMax, v[1]);\n        this.zMax = Math.max(this.zMax, v[2]);\n    }\n    addBoundingBox(bb) {\n        this.xMin = Math.min(this.xMin, bb.xMin);\n        this.yMin = Math.min(this.yMin, bb.yMin);\n        this.zMin = Math.min(this.zMin, bb.zMin);\n        this.xMax = Math.max(this.xMax, bb.xMax);\n        this.yMax = Math.max(this.yMax, bb.yMax);\n        this.zMax = Math.max(this.zMax, bb.zMax);\n    }\n    hasNoVolume() {\n        return this.xMin === this.xMax &&\n            this.yMin === this.yMax &&\n            this.zMin === this.zMax;\n    }\n    getCenter() {\n        const res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create((this.xMin + this.xMax) / 2, (this.yMin + this.yMax) / 2, (this.zMin + this.zMax) / 2);\n        if (isNaN(res[0]))\n            res[0] = 0;\n        if (isNaN(res[1]))\n            res[1] = 0;\n        if (isNaN(res[2]))\n            res[2] = 0;\n        return res;\n    }\n    contains(bb) {\n        return this.xMin <= bb.xMin &&\n            this.yMin <= bb.yMin &&\n            this.zMin <= bb.zMin &&\n            this.xMax >= bb.xMax &&\n            this.yMax >= bb.yMax &&\n            this.zMax >= bb.zMax;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvYm91bmRpbmdCb3gudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUM7QUFFbEMsTUFBTSxXQUFXO0lBRXRCLFlBQ1UsT0FBZSxRQUFRLEVBQ3ZCLE9BQWUsQ0FBQyxRQUFRLEVBQ3hCLE9BQWUsUUFBUSxFQUN2QixPQUFlLENBQUMsUUFBUSxFQUN4QixPQUFlLFFBQVEsRUFDdkIsT0FBZSxDQUFDLFFBQVE7UUFMeEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBb0I7UUFDeEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBb0I7UUFDeEIsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFDdkIsU0FBSSxHQUFKLElBQUksQ0FBb0I7SUFHbEMsQ0FBQztJQUVNLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3ZDLE9BQU8sS0FBYSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRXZDLEtBQUs7UUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxVQUFVLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksVUFBVSxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDO0lBQ3hILENBQUM7SUFFTSxPQUFPLENBQUMsQ0FBTztRQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBRU0sY0FBYyxDQUFDLEVBQWU7UUFDbkMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVNLFdBQVc7UUFDaEIsT0FBTyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJO1lBQzVCLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUk7WUFDdkIsSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzVCLENBQUM7SUFFTSxTQUFTO1FBQ2QsTUFBTSxHQUFHLEdBQVMsNkNBQUksQ0FBQyxNQUFNLENBQzNCLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUMzQixDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFDM0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQzVCLENBQUM7UUFDRixJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzlCLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUIsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5QixPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7SUFFTSxRQUFRLENBQUMsRUFBZTtRQUM3QixPQUFPLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUk7WUFDekIsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSTtZQUNwQixJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJO1lBQ3BCLElBQUksQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLElBQUk7WUFDcEIsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsSUFBSTtZQUNwQixJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUM7SUFDekIsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvYm91bmRpbmdCb3gudHM/ODcxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5cbmV4cG9ydCBjbGFzcyBCb3VuZGluZ0JveCB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB4TWluOiBudW1iZXIgPSBJbmZpbml0eSxcbiAgICBwcml2YXRlIHhNYXg6IG51bWJlciA9IC1JbmZpbml0eSxcbiAgICBwcml2YXRlIHlNaW46IG51bWJlciA9IEluZmluaXR5LFxuICAgIHByaXZhdGUgeU1heDogbnVtYmVyID0gLUluZmluaXR5LFxuICAgIHByaXZhdGUgek1pbjogbnVtYmVyID0gSW5maW5pdHksXG4gICAgcHJpdmF0ZSB6TWF4OiBudW1iZXIgPSAtSW5maW5pdHlcbiAgKSB7XG5cbiAgfVxuXG4gIHB1YmxpYyBnZXRYTWluKCk6IG51bWJlciB7IHJldHVybiB0aGlzLnhNaW47IH1cbiAgcHVibGljIGdldFlNaW4oKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueU1pbjsgfVxuICBwdWJsaWMgZ2V0Wk1pbigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy56TWluOyB9XG4gIHB1YmxpYyBnZXRYTWF4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLnhNYXg7IH1cbiAgcHVibGljIGdldFlNYXgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMueU1heDsgfVxuICBwdWJsaWMgZ2V0Wk1heCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy56TWF4OyB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKGBCQjogeDogWyR7dGhpcy54TWlufSwgJHt0aGlzLnhNYXh9XSwgeTogWyR7dGhpcy55TWlufSwgJHt0aGlzLnlNYXh9XSwgejogWyR7dGhpcy56TWlufSwgJHt0aGlzLnpNYXh9XTtgKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRWZWMzKHY6IFZlYzMpOiB2b2lkIHtcbiAgICB0aGlzLnhNaW4gPSBNYXRoLm1pbih0aGlzLnhNaW4sIHZbMF0pO1xuICAgIHRoaXMueU1pbiA9IE1hdGgubWluKHRoaXMueU1pbiwgdlsxXSk7XG4gICAgdGhpcy56TWluID0gTWF0aC5taW4odGhpcy56TWluLCB2WzJdKTtcbiAgICB0aGlzLnhNYXggPSBNYXRoLm1heCh0aGlzLnhNYXgsIHZbMF0pO1xuICAgIHRoaXMueU1heCA9IE1hdGgubWF4KHRoaXMueU1heCwgdlsxXSk7XG4gICAgdGhpcy56TWF4ID0gTWF0aC5tYXgodGhpcy56TWF4LCB2WzJdKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRCb3VuZGluZ0JveChiYjogQm91bmRpbmdCb3gpOiB2b2lkIHtcbiAgICB0aGlzLnhNaW4gPSBNYXRoLm1pbih0aGlzLnhNaW4sIGJiLnhNaW4pO1xuICAgIHRoaXMueU1pbiA9IE1hdGgubWluKHRoaXMueU1pbiwgYmIueU1pbik7XG4gICAgdGhpcy56TWluID0gTWF0aC5taW4odGhpcy56TWluLCBiYi56TWluKTtcbiAgICB0aGlzLnhNYXggPSBNYXRoLm1heCh0aGlzLnhNYXgsIGJiLnhNYXgpO1xuICAgIHRoaXMueU1heCA9IE1hdGgubWF4KHRoaXMueU1heCwgYmIueU1heCk7XG4gICAgdGhpcy56TWF4ID0gTWF0aC5tYXgodGhpcy56TWF4LCBiYi56TWF4KTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNOb1ZvbHVtZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy54TWluID09PSB0aGlzLnhNYXggJiZcbiAgICAgIHRoaXMueU1pbiA9PT0gdGhpcy55TWF4ICYmXG4gICAgICB0aGlzLnpNaW4gPT09IHRoaXMuek1heDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDZW50ZXIoKTogVmVjMyB7XG4gICAgY29uc3QgcmVzOiBWZWMzID0gdmVjMy5jcmVhdGUoXG4gICAgICAodGhpcy54TWluICsgdGhpcy54TWF4KSAvIDIsXG4gICAgICAodGhpcy55TWluICsgdGhpcy55TWF4KSAvIDIsXG4gICAgICAodGhpcy56TWluICsgdGhpcy56TWF4KSAvIDIsXG4gICAgKTtcbiAgICBpZiAoaXNOYU4ocmVzWzBdKSkgcmVzWzBdID0gMDtcbiAgICBpZiAoaXNOYU4ocmVzWzFdKSkgcmVzWzFdID0gMDtcbiAgICBpZiAoaXNOYU4ocmVzWzJdKSkgcmVzWzJdID0gMDtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHVibGljIGNvbnRhaW5zKGJiOiBCb3VuZGluZ0JveCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnhNaW4gPD0gYmIueE1pbiAmJlxuICAgICAgdGhpcy55TWluIDw9IGJiLnlNaW4gJiZcbiAgICAgIHRoaXMuek1pbiA8PSBiYi56TWluICYmXG4gICAgICB0aGlzLnhNYXggPj0gYmIueE1heCAmJlxuICAgICAgdGhpcy55TWF4ID49IGJiLnlNYXggJiZcbiAgICAgIHRoaXMuek1heCA+PSBiYi56TWF4O1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/boundingBox.ts\n");

/***/ }),

/***/ "./src/geometry/controlCage1D.ts":
/*!***************************************!*\
  !*** ./src/geometry/controlCage1D.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ControlCage1D: () => (/* binding */ ControlCage1D)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render/renterMeshInstanced */ \"./src/render/renterMeshInstanced.ts\");\n/* harmony import */ var _utils_clone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/clone */ \"./src/utils/clone.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lineBoundingBoxHeirarchy */ \"./src/geometry/lineBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./pointBoundingBoxHeirarchy */ \"./src/geometry/pointBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _points__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./points */ \"./src/geometry/points.ts\");\n\n\n\n\n\n\n\n\n\n\n\nclass ControlCage1D extends _geometry__WEBPACK_IMPORTED_MODULE_6__.Geometry {\n    constructor(parent, verts, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.identity(), materialName = null) {\n        super(parent, model, materialName);\n        this.verts = verts;\n        this.vertexSubSelection = [];\n        this.segmentSubSelection = [];\n        this.accumulatedSubSelection = [];\n        this.subSelectedVertCount = 0;\n        this.subSelectedSegmentCount = 0;\n        for (let i = 0; i < this.verts.length; i++) {\n            this.vertexSubSelection.push(false);\n            this.accumulatedSubSelection.push(false);\n            this.segmentSubSelection.push(false);\n        }\n        this.segmentSubSelection.pop();\n        const modelR = this.getModelRecursive();\n        const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.getTranslation(modelR);\n        const modelNoTranslation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.vec3.scale(translation, -1)), modelR);\n        const transforms = this.verts.map((pos) => {\n            return (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.translation(pos), wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.inverse(modelNoTranslation), _points__WEBPACK_IMPORTED_MODULE_9__.POINT_MODEL)));\n        });\n        this.points = new _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_2__.RenderMeshInstanced(this, _points__WEBPACK_IMPORTED_MODULE_9__.POINT_VERTS, _points__WEBPACK_IMPORTED_MODULE_9__.POINT_VERTS, _points__WEBPACK_IMPORTED_MODULE_9__.POINT_INDICES, transforms, this.accumulatedSubSelection, true);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderMeshInstanced(this.points);\n        this.indices = [];\n        for (let i = 0; i < this.verts.length - 1; i++) {\n            this.indices.push(i, i + 1);\n        }\n        this.renderLines = new _render_renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines(this, this.verts, this.indices, this.accumulatedSubSelection);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(this.renderLines);\n        this.pointBBH = new _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_8__.PointBoundingBoxHeirarchy(this, this.verts);\n        this.lineBBH = new _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_7__.LineBoundingBoxHeirarchy(this, this.verts, this.indices);\n        this.hide();\n    }\n    showControls(on) {\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        if (this.isHidden())\n            return [];\n        const res = this.lineBBH.getWithinFrustumSub(frustum, inclusive).map((n) => {\n            return n + this.verts.length;\n        });\n        const model = this.getModelRecursive();\n        for (let i = 0; i < this.verts.length; i++) {\n            if (frustum.containsPoint(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.vec3.transformMat4(this.verts[i], model))) {\n                res.push(i);\n            }\n        }\n        return res;\n    }\n    getBoundingBox() {\n        const res = new _boundingBox__WEBPACK_IMPORTED_MODULE_5__.BoundingBox();\n        const model = this.getModelRecursive();\n        for (const v of this.verts) {\n            res.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.vec3.transformMat4(v, model));\n        }\n        return res;\n    }\n    getTypeName() {\n        return \"control cage 1d\";\n    }\n    intersect(ray, sub) {\n        if (this.isHidden())\n            return null;\n        let intersection = this.pointBBH.almostIntersect(ray, 10);\n        if (intersection === null) {\n            intersection = this.lineBBH.almostIntersect(ray, 10);\n            if (intersection !== null) {\n                intersection.objectSubID += this.verts.length;\n            }\n        }\n        return intersection;\n    }\n    isWithinFrustum(frustum, inclusive) {\n        return this.lineBBH.isWithinFrustum(frustum, inclusive);\n    }\n    addToSubSelection(...subIDs) {\n        for (let subID of subIDs) {\n            if (subID >= this.verts.length) {\n                subID -= this.verts.length;\n                // Line Sub ID\n                if (!this.segmentSubSelection[subID]) {\n                    this.segmentSubSelection[subID] = true;\n                    this.subSelectedSegmentCount++;\n                    this.accumulatedSubSelection[subID] = true;\n                    this.accumulatedSubSelection[subID + 1] = true;\n                }\n            }\n            else {\n                // Point Sub ID\n                console.log(\"sub selecting vert\", subID);\n                if (!this.vertexSubSelection[subID]) {\n                    this.vertexSubSelection[subID] = true;\n                    this.subSelectedVertCount++;\n                    this.accumulatedSubSelection[subID] = true;\n                }\n            }\n        }\n        this.points.updateSubSelection(this.vertexSubSelection);\n        this.renderLines.updateSubSelection(this.accumulatedSubSelection);\n    }\n    removeFromSubSelection(...subIDs) {\n        for (let subID of subIDs) {\n            if (subID >= this.verts.length) {\n                subID -= this.verts.length;\n                // Line Sub ID\n                if (this.segmentSubSelection[subID]) {\n                    this.segmentSubSelection[subID] = false;\n                    this.subSelectedSegmentCount--;\n                    if (!this.vertexSubSelection[subID] &&\n                        (subID === 0 || !this.segmentSubSelection[subID - 1])) {\n                        this.accumulatedSubSelection[subID] = false;\n                    }\n                    if (!this.vertexSubSelection[subID + 1] &&\n                        (subID === this.verts.length - 1 || !this.segmentSubSelection[subID + 1])) {\n                        this.accumulatedSubSelection[subID + 1] = false;\n                    }\n                }\n            }\n            else {\n                // Point Sub ID\n                if (this.vertexSubSelection[subID]) {\n                    this.vertexSubSelection[subID] = false;\n                    this.subSelectedVertCount--;\n                    if ((subID == this.verts.length - 1 || !this.segmentSubSelection[subID]) &&\n                        (subID === 0 || !this.segmentSubSelection[subID - 1])) {\n                        this.accumulatedSubSelection[subID] = false;\n                    }\n                }\n            }\n        }\n        this.points.updateSubSelection(this.vertexSubSelection);\n        this.renderLines.updateSubSelection(this.accumulatedSubSelection);\n    }\n    getVertsSubSelectionTransformed() {\n        if (!this.hasSubSelection()) {\n            return (0,_utils_clone__WEBPACK_IMPORTED_MODULE_3__.cloneVec3List)(this.verts);\n        }\n        const res = [];\n        var t = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform();\n        const model = this.getModelRecursive();\n        t = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.inverse(model), t), model);\n        for (let i = 0; i < this.verts.length; i++) {\n            if (this.accumulatedSubSelection[i]) {\n                res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.vec3.transformMat4(this.verts[i], t));\n            }\n            else {\n                res.push(this.verts[i]);\n            }\n        }\n        this.updatePoints(res);\n        this.renderLines.updateVerts(res);\n        return (0,_utils_clone__WEBPACK_IMPORTED_MODULE_3__.cloneVec3List)(res);\n    }\n    bakeSelectionTransform() {\n        if (this.isSelected()) {\n            this.updatePoints(this.verts);\n        }\n        else if (this.hasSubSelection()) {\n            let t = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform();\n            const model = this.getModelRecursive();\n            t = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.inverse(model), t), model);\n            for (let i = 0; i < this.verts.length; i++) {\n                if (this.accumulatedSubSelection[i]) {\n                    this.verts[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.vec3.transformMat4(this.verts[i], t);\n                }\n            }\n            this.renderLines.updateVerts(this.verts);\n            this.lineBBH = new _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_7__.LineBoundingBoxHeirarchy(this, this.verts, this.indices);\n            this.pointBBH = new _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_8__.PointBoundingBoxHeirarchy(this, this.verts);\n            this.updatePoints(this.verts);\n        }\n    }\n    updatePoints(points) {\n        const model = this.getModelRecursive();\n        const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.getTranslation(model);\n        const modelNoTranslation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.vec3.scale(translation, -1)), model);\n        this.points.updateTransforms(points.map((pos) => {\n            return (0,_utils_math__WEBPACK_IMPORTED_MODULE_4__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.translation(pos), wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.inverse(modelNoTranslation), _points__WEBPACK_IMPORTED_MODULE_9__.POINT_MODEL)));\n        }));\n    }\n    isSubSelected(subID) {\n        if (subID >= this.verts.length) {\n            subID -= this.verts.length;\n            // Line Sub ID\n            return this.segmentSubSelection[subID];\n        }\n        else {\n            // Point Sub ID\n            return this.vertexSubSelection[subID];\n        }\n    }\n    hasSubSelection() {\n        return this.subSelectedSegmentCount > 0 ||\n            this.subSelectedVertCount > 0;\n    }\n    getSubSelectionBoundingBox() {\n        const res = new _boundingBox__WEBPACK_IMPORTED_MODULE_5__.BoundingBox();\n        const model = this.getModelRecursive();\n        if (!this.hasSubSelection())\n            return res;\n        for (let i = 0; i < this.verts.length; i++) {\n            if (this.accumulatedSubSelection[i]) {\n                res.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.vec3.transformMat4(this.verts[i], model));\n            }\n        }\n        return res;\n    }\n    clearSubSelection() {\n        if (this.hasSubSelection()) {\n            this.accumulatedSubSelection = this.accumulatedSubSelection.map(() => { return false; });\n            this.vertexSubSelection = this.vertexSubSelection.map(() => { return false; });\n            this.segmentSubSelection = this.segmentSubSelection.map(() => { return false; });\n            this.points.updateSubSelection(this.vertexSubSelection);\n            this.renderLines.updateSubSelection(this.accumulatedSubSelection);\n        }\n    }\n    onSelectionMoved() {\n        this.parent.onSelectionMoved();\n    }\n    delete() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeMeshInstanced(this.points);\n    }\n    clone() {\n        return new ControlCage1D(this.parent, [...this.verts], wgpu_matrix__WEBPACK_IMPORTED_MODULE_10__.mat4.clone(this.model), this.materialName);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6RixJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUN4RCxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQ25FO0lBQ0gsQ0FBQztJQUVNLGdCQUFnQjtRQUNyQixJQUFJLENBQUMsTUFBTyxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVNLE1BQU07UUFDWCwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDbEQsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVNLEtBQUs7UUFDVixPQUFPLElBQUksYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSw4Q0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3BHLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L2NvbnRyb2xDYWdlMUQudHM/NWFjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXQ0LCBtYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJlbmRlckxpbmVzIH0gZnJvbSBcIi4uL3JlbmRlci9yZW5kZXJMaW5lc1wiO1xuaW1wb3J0IHsgUmVuZGVyTWVzaEluc3RhbmNlZCB9IGZyb20gXCIuLi9yZW5kZXIvcmVudGVyTWVzaEluc3RhbmNlZFwiO1xuaW1wb3J0IHsgY2xvbmVWZWMzTGlzdCB9IGZyb20gXCIuLi91dGlscy9jbG9uZVwiO1xuaW1wb3J0IHsgc3dpenpsZVlaIH0gZnJvbSBcIi4uL3V0aWxzL21hdGhcIjtcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSBcIi4vYm91bmRpbmdCb3hcIjtcbmltcG9ydCB7IEZydXN0dW0gfSBmcm9tIFwiLi9mcnVzdHVtXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSB9IGZyb20gXCIuL2xpbmVCb3VuZGluZ0JveEhlaXJhcmNoeVwiO1xuaW1wb3J0IHsgUG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeSB9IGZyb20gXCIuL3BvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHlcIjtcbmltcG9ydCB7IFBPSU5UX0lORElDRVMsIFBPSU5UX01PREVMLCBQT0lOVF9WRVJUUyB9IGZyb20gXCIuL3BvaW50c1wiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cblxuXG5leHBvcnQgY2xhc3MgQ29udHJvbENhZ2UxRCBleHRlbmRzIEdlb21ldHJ5IHtcblxuICBwcml2YXRlIHBvaW50czogUmVuZGVyTWVzaEluc3RhbmNlZDtcbiAgcHJpdmF0ZSBwb2ludEJCSDogUG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeTtcblxuICBwcml2YXRlIHJlbmRlckxpbmVzOiBSZW5kZXJMaW5lcztcbiAgcHJpdmF0ZSBsaW5lQkJIOiBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHk7XG5cbiAgcHJpdmF0ZSB2ZXJ0ZXhTdWJTZWxlY3Rpb246IGJvb2xlYW5bXTtcbiAgcHJpdmF0ZSBzZWdtZW50U3ViU2VsZWN0aW9uOiBib29sZWFuW107XG4gIHByaXZhdGUgYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb246IGJvb2xlYW5bXTtcblxuICBwcml2YXRlIHN1YlNlbGVjdGVkVmVydENvdW50OiBudW1iZXI7XG4gIHByaXZhdGUgc3ViU2VsZWN0ZWRTZWdtZW50Q291bnQ6IG51bWJlcjtcblxuICBwcml2YXRlIGluZGljZXM6IG51bWJlcltdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsLFxuICAgIHByaXZhdGUgdmVydHM6IFZlYzNbXSxcbiAgICBtb2RlbDogTWF0NCA9IG1hdDQuaWRlbnRpdHkoKSxcbiAgICBtYXRlcmlhbE5hbWU6IE1hdGVyaWFsTmFtZSB8IG51bGwgPSBudWxsXG4gICkge1xuICAgIHN1cGVyKHBhcmVudCwgbW9kZWwsIG1hdGVyaWFsTmFtZSk7XG5cbiAgICB0aGlzLnZlcnRleFN1YlNlbGVjdGlvbiA9IFtdO1xuICAgIHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbiA9IFtdO1xuICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24gPSBbXTtcbiAgICB0aGlzLnN1YlNlbGVjdGVkVmVydENvdW50ID0gMDtcbiAgICB0aGlzLnN1YlNlbGVjdGVkU2VnbWVudENvdW50ID0gMDtcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZlcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnZlcnRleFN1YlNlbGVjdGlvbi5wdXNoKGZhbHNlKTtcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24ucHVzaChmYWxzZSk7XG4gICAgICB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb24ucHVzaChmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbi5wb3AoKTtcblxuICAgIGNvbnN0IG1vZGVsUjogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBjb25zdCB0cmFuc2xhdGlvbjogVmVjMyA9IG1hdDQuZ2V0VHJhbnNsYXRpb24obW9kZWxSKTtcbiAgICBjb25zdCBtb2RlbE5vVHJhbnNsYXRpb246IE1hdDQgPSBtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHZlYzMuc2NhbGUodHJhbnNsYXRpb24sIC0xKSksIG1vZGVsUik7XG4gICAgY29uc3QgdHJhbnNmb3JtczogTWF0NFtdID0gdGhpcy52ZXJ0cy5tYXAoKHBvczogVmVjMykgPT4ge1xuICAgICAgcmV0dXJuIHN3aXp6bGVZWihtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHBvcyksIG1hdDQubXVsKG1hdDQuaW52ZXJzZShtb2RlbE5vVHJhbnNsYXRpb24pLCBQT0lOVF9NT0RFTCkpKTtcbiAgICB9KTtcbiAgICB0aGlzLnBvaW50cyA9IG5ldyBSZW5kZXJNZXNoSW5zdGFuY2VkKHRoaXMsXG4gICAgICBQT0lOVF9WRVJUUywgUE9JTlRfVkVSVFMsIFBPSU5UX0lORElDRVMsIHRyYW5zZm9ybXMsIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24sIHRydWUpO1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkUmVuZGVyTWVzaEluc3RhbmNlZCh0aGlzLnBvaW50cyk7XG5cblxuICAgIHRoaXMuaW5kaWNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0cy5sZW5ndGggLSAxOyBpKyspIHsgdGhpcy5pbmRpY2VzLnB1c2goaSwgaSArIDEpOyB9XG4gICAgdGhpcy5yZW5kZXJMaW5lcyA9IG5ldyBSZW5kZXJMaW5lcyh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMsIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24pO1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkUmVuZGVyTGluZXModGhpcy5yZW5kZXJMaW5lcyk7XG5cbiAgICB0aGlzLnBvaW50QkJIID0gbmV3IFBvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHkodGhpcywgdGhpcy52ZXJ0cyk7XG4gICAgdGhpcy5saW5lQkJIID0gbmV3IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMpO1xuXG4gICAgdGhpcy5oaWRlKCk7XG5cbiAgfVxuXG4gIHB1YmxpYyBzaG93Q29udHJvbHMob246IGJvb2xlYW4pOiB2b2lkIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICBpZiAodGhpcy5pc0hpZGRlbigpKSByZXR1cm4gW107XG4gICAgY29uc3QgcmVzOiBudW1iZXJbXSA9IHRoaXMubGluZUJCSC5nZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW0sIGluY2x1c2l2ZSkubWFwKChuOiBudW1iZXIpID0+IHtcbiAgICAgIHJldHVybiBuICsgdGhpcy52ZXJ0cy5sZW5ndGg7XG4gICAgfSk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZlcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZnJ1c3R1bS5jb250YWluc1BvaW50KHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLnZlcnRzW2ldLCBtb2RlbCkpKSB7XG4gICAgICAgIHJlcy5wdXNoKGkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cblxuICBwdWJsaWMgZ2V0Qm91bmRpbmdCb3goKTogQm91bmRpbmdCb3gge1xuICAgIGNvbnN0IHJlczogQm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBmb3IgKGNvbnN0IHYgb2YgdGhpcy52ZXJ0cykge1xuICAgICAgcmVzLmFkZFZlYzModmVjMy50cmFuc2Zvcm1NYXQ0KHYsIG1vZGVsKSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJjb250cm9sIGNhZ2UgMWRcIjtcbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3QocmF5OiBSYXksIHN1YjogYm9vbGVhbik6IEludGVyc2VjdGlvbiB8IG51bGwge1xuICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHJldHVybiBudWxsO1xuICAgIGxldCBpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbiB8IG51bGwgPSB0aGlzLnBvaW50QkJILmFsbW9zdEludGVyc2VjdChyYXksIDEwKTtcbiAgICBpZiAoaW50ZXJzZWN0aW9uID09PSBudWxsKSB7XG4gICAgICBpbnRlcnNlY3Rpb24gPSB0aGlzLmxpbmVCQkguYWxtb3N0SW50ZXJzZWN0KHJheSwgMTApO1xuICAgICAgaWYgKGludGVyc2VjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICBpbnRlcnNlY3Rpb24ub2JqZWN0U3ViSUQgKz0gdGhpcy52ZXJ0cy5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gIH1cblxuICBwdWJsaWMgaXNXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmxpbmVCQkguaXNXaXRoaW5GcnVzdHVtKGZydXN0dW0sIGluY2x1c2l2ZSk7XG4gIH1cblxuICBwdWJsaWMgYWRkVG9TdWJTZWxlY3Rpb24oLi4uc3ViSURzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGZvciAobGV0IHN1YklEIG9mIHN1YklEcykge1xuICAgICAgaWYgKHN1YklEID49IHRoaXMudmVydHMubGVuZ3RoKSB7XG4gICAgICAgIHN1YklEIC09IHRoaXMudmVydHMubGVuZ3RoO1xuICAgICAgICAvLyBMaW5lIFN1YiBJRFxuICAgICAgICBpZiAoIXRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbltzdWJJRF0pIHtcbiAgICAgICAgICB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb25bc3ViSURdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnN1YlNlbGVjdGVkU2VnbWVudENvdW50Kys7XG4gICAgICAgICAgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbltzdWJJRF0gPSB0cnVlO1xuICAgICAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25bc3ViSUQgKyAxXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFBvaW50IFN1YiBJRFxuICAgICAgICBjb25zb2xlLmxvZyhcInN1YiBzZWxlY3RpbmcgdmVydFwiLCBzdWJJRCk7XG4gICAgICAgIGlmICghdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSURdKSB7XG4gICAgICAgICAgdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSURdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnN1YlNlbGVjdGVkVmVydENvdW50Kys7XG4gICAgICAgICAgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbltzdWJJRF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucG9pbnRzLnVwZGF0ZVN1YlNlbGVjdGlvbih0aGlzLnZlcnRleFN1YlNlbGVjdGlvbik7XG4gICAgdGhpcy5yZW5kZXJMaW5lcy51cGRhdGVTdWJTZWxlY3Rpb24odGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbik7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlRnJvbVN1YlNlbGVjdGlvbiguLi5zdWJJRHM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgc3ViSUQgb2Ygc3ViSURzKSB7XG4gICAgICBpZiAoc3ViSUQgPj0gdGhpcy52ZXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgc3ViSUQgLT0gdGhpcy52ZXJ0cy5sZW5ndGg7XG4gICAgICAgIC8vIExpbmUgU3ViIElEXG4gICAgICAgIGlmICh0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb25bc3ViSURdKSB7XG4gICAgICAgICAgdGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uW3N1YklEXSA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuc3ViU2VsZWN0ZWRTZWdtZW50Q291bnQtLTtcbiAgICAgICAgICBpZiAoIXRoaXMudmVydGV4U3ViU2VsZWN0aW9uW3N1YklEXSAmJlxuICAgICAgICAgICAgKHN1YklEID09PSAwIHx8ICF0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb25bc3ViSUQgLSAxXSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25bc3ViSURdID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSUQgKyAxXSAmJlxuICAgICAgICAgICAgKHN1YklEID09PSB0aGlzLnZlcnRzLmxlbmd0aCAtIDEgfHwgIXRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbltzdWJJRCArIDFdKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbltzdWJJRCArIDFdID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBQb2ludCBTdWIgSURcbiAgICAgICAgaWYgKHRoaXMudmVydGV4U3ViU2VsZWN0aW9uW3N1YklEXSkge1xuICAgICAgICAgIHRoaXMudmVydGV4U3ViU2VsZWN0aW9uW3N1YklEXSA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuc3ViU2VsZWN0ZWRWZXJ0Q291bnQtLTtcbiAgICAgICAgICBpZiAoKHN1YklEID09IHRoaXMudmVydHMubGVuZ3RoIC0gMSB8fCAhdGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uW3N1YklEXSkgJiZcbiAgICAgICAgICAgIChzdWJJRCA9PT0gMCB8fCAhdGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uW3N1YklEIC0gMV0pXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW3N1YklEXSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnBvaW50cy51cGRhdGVTdWJTZWxlY3Rpb24odGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb24pO1xuICAgIHRoaXMucmVuZGVyTGluZXMudXBkYXRlU3ViU2VsZWN0aW9uKHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24pO1xuICB9XG5cbiAgcHVibGljIGdldFZlcnRzU3ViU2VsZWN0aW9uVHJhbnNmb3JtZWQoKTogVmVjM1tdIHtcbiAgICBpZiAoIXRoaXMuaGFzU3ViU2VsZWN0aW9uKCkpIHtcbiAgICAgIHJldHVybiBjbG9uZVZlYzNMaXN0KHRoaXMudmVydHMpO1xuICAgIH1cbiAgICBjb25zdCByZXM6IFZlYzNbXSA9IFtdO1xuICAgIHZhciB0OiBNYXQ0ID0gSU5TVEFOQ0UuZ2V0TW92ZXIoKS5nZXRUcmFuc2Zvcm0oKTtcbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICB0ID0gbWF0NC5tdWwobWF0NC5tdWwobWF0NC5pbnZlcnNlKG1vZGVsKSwgdCksIG1vZGVsKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW2ldKSB7XG4gICAgICAgIHJlcy5wdXNoKHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLnZlcnRzW2ldLCB0KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXMucHVzaCh0aGlzLnZlcnRzW2ldKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVBvaW50cyhyZXMpO1xuICAgIHRoaXMucmVuZGVyTGluZXMudXBkYXRlVmVydHMocmVzKTtcbiAgICByZXR1cm4gY2xvbmVWZWMzTGlzdChyZXMpO1xuICB9XG5cbiAgcHVibGljIGJha2VTZWxlY3Rpb25UcmFuc2Zvcm0oKTogdm9pZCB7XG5cbiAgICBpZiAodGhpcy5pc1NlbGVjdGVkKCkpIHtcbiAgICAgIHRoaXMudXBkYXRlUG9pbnRzKHRoaXMudmVydHMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5oYXNTdWJTZWxlY3Rpb24oKSkge1xuXG4gICAgICBsZXQgdDogTWF0NCA9IElOU1RBTkNFLmdldE1vdmVyKCkuZ2V0VHJhbnNmb3JtKCk7XG4gICAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICAgIHQgPSBtYXQ0Lm11bChtYXQ0Lm11bChtYXQ0LmludmVyc2UobW9kZWwpLCB0KSwgbW9kZWwpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25baV0pIHtcbiAgICAgICAgICB0aGlzLnZlcnRzW2ldID0gdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudmVydHNbaV0sIHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnJlbmRlckxpbmVzLnVwZGF0ZVZlcnRzKHRoaXMudmVydHMpO1xuICAgICAgdGhpcy5saW5lQkJIID0gbmV3IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMpO1xuICAgICAgdGhpcy5wb2ludEJCSCA9IG5ldyBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5KHRoaXMsIHRoaXMudmVydHMpO1xuICAgICAgdGhpcy51cGRhdGVQb2ludHModGhpcy52ZXJ0cyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVQb2ludHMocG9pbnRzOiBWZWMzW10pOiB2b2lkIHtcbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBjb25zdCB0cmFuc2xhdGlvbjogVmVjMyA9IG1hdDQuZ2V0VHJhbnNsYXRpb24obW9kZWwpO1xuICAgIGNvbnN0IG1vZGVsTm9UcmFuc2xhdGlvbjogTWF0NCA9IG1hdDQubXVsKG1hdDQudHJhbnNsYXRpb24odmVjMy5zY2FsZSh0cmFuc2xhdGlvbiwgLTEpKSwgbW9kZWwpO1xuICAgIHRoaXMucG9pbnRzLnVwZGF0ZVRyYW5zZm9ybXMocG9pbnRzLm1hcCgocG9zOiBWZWMzKSA9PiB7XG4gICAgICByZXR1cm4gc3dpenpsZVlaKG1hdDQubXVsKG1hdDQudHJhbnNsYXRpb24ocG9zKSwgbWF0NC5tdWwobWF0NC5pbnZlcnNlKG1vZGVsTm9UcmFuc2xhdGlvbiksIFBPSU5UX01PREVMKSkpO1xuICAgIH0pKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1N1YlNlbGVjdGVkKHN1YklEOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoc3ViSUQgPj0gdGhpcy52ZXJ0cy5sZW5ndGgpIHtcbiAgICAgIHN1YklEIC09IHRoaXMudmVydHMubGVuZ3RoO1xuICAgICAgLy8gTGluZSBTdWIgSURcbiAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb25bc3ViSURdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBQb2ludCBTdWIgSURcbiAgICAgIHJldHVybiB0aGlzLnZlcnRleFN1YlNlbGVjdGlvbltzdWJJRF07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhc1N1YlNlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdWJTZWxlY3RlZFNlZ21lbnRDb3VudCA+IDAgfHxcbiAgICAgIHRoaXMuc3ViU2VsZWN0ZWRWZXJ0Q291bnQgPiAwO1xuICB9XG5cbiAgcHVibGljIGdldFN1YlNlbGVjdGlvbkJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICBjb25zdCByZXM6IEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgaWYgKCF0aGlzLmhhc1N1YlNlbGVjdGlvbigpKSByZXR1cm4gcmVzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25baV0pIHtcbiAgICAgICAgcmVzLmFkZFZlYzModmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudmVydHNbaV0sIG1vZGVsKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJTdWJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFzU3ViU2VsZWN0aW9uKCkpIHtcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24gPSB0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uLm1hcCgoKSA9PiB7IHJldHVybiBmYWxzZTsgfSk7XG4gICAgICB0aGlzLnZlcnRleFN1YlNlbGVjdGlvbiA9IHRoaXMudmVydGV4U3ViU2VsZWN0aW9uLm1hcCgoKSA9PiB7IHJldHVybiBmYWxzZTsgfSk7XG4gICAgICB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb24gPSB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb24ubWFwKCgpID0+IHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICAgIHRoaXMucG9pbnRzLnVwZGF0ZVN1YlNlbGVjdGlvbih0aGlzLnZlcnRleFN1YlNlbGVjdGlvbik7XG4gICAgICB0aGlzLnJlbmRlckxpbmVzLnVwZGF0ZVN1YlNlbGVjdGlvbih0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25TZWxlY3Rpb25Nb3ZlZCgpOiB2b2lkIHtcbiAgICB0aGlzLnBhcmVudCEub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZSgpOiB2b2lkIHtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUxpbmVzKHRoaXMucmVuZGVyTGluZXMpO1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTWVzaEluc3RhbmNlZCh0aGlzLnBvaW50cyk7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogR2VvbWV0cnkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENhZ2UxRCh0aGlzLnBhcmVudCwgWy4uLnRoaXMudmVydHNdLCBtYXQ0LmNsb25lKHRoaXMubW9kZWwpLCB0aGlzLm1hdGVyaWFsTmFtZSk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/controlCage1D.ts\n");

/***/ }),

/***/ "./src/geometry/controlCage2D.ts":
/*!***************************************!*\
  !*** ./src/geometry/controlCage2D.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ControlCage2D: () => (/* binding */ ControlCage2D)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../render/renterMeshInstanced */ \"./src/render/renterMeshInstanced.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lineBoundingBoxHeirarchy */ \"./src/geometry/lineBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./pointBoundingBoxHeirarchy */ \"./src/geometry/pointBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _points__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./points */ \"./src/geometry/points.ts\");\n\n\n\n\n\n\n\n\n\n\nclass ControlCage2D extends _geometry__WEBPACK_IMPORTED_MODULE_5__.Geometry {\n    constructor(parent, points, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.identity(), materialName = null) {\n        super(parent, model, materialName);\n        this.vertexSubSelection = [];\n        this.segmentSubSelection = [];\n        this.accumulatedSubSelection = [];\n        this.subSelectedVertCount = 0;\n        this.subSelectedSegmentCount = 0;\n        this.u = points.length;\n        this.v = points[0].length;\n        for (let i = 0; i < this.u * this.v; i++) {\n            this.vertexSubSelection.push(false);\n            this.accumulatedSubSelection.push(false);\n        }\n        for (let i = 0; i < (this.u - 1) * this.v + this.u * (this.v - 1); i++) {\n            this.segmentSubSelection.push(false);\n        }\n        this.verts = [];\n        for (const list of points)\n            for (const point of list)\n                this.verts.push(point);\n        const modelR = this.getModelRecursive();\n        const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.getTranslation(modelR);\n        const modelNoTranslation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.scale(translation, -1)), modelR);\n        const transforms = this.verts.map((pos) => {\n            return (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.translation(pos), wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.inverse(modelNoTranslation), _points__WEBPACK_IMPORTED_MODULE_8__.POINT_MODEL)));\n        });\n        this.points = new _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_2__.RenderMeshInstanced(this, _points__WEBPACK_IMPORTED_MODULE_8__.POINT_VERTS, _points__WEBPACK_IMPORTED_MODULE_8__.POINT_VERTS, _points__WEBPACK_IMPORTED_MODULE_8__.POINT_INDICES, transforms, this.accumulatedSubSelection, true);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderMeshInstanced(this.points);\n        this.indices = [];\n        for (let i = 0; i < this.u; i++) {\n            for (let j = 0; j < this.v - 1; j++) {\n                this.indices.push(i * this.v + j, i * this.v + j + 1);\n            }\n        }\n        for (let i = 0; i < this.u - 1; i++) {\n            for (let j = 0; j < this.v; j++) {\n                this.indices.push(i * this.v + j, (i + 1) * this.v + j);\n            }\n        }\n        this.renderLines = new _render_renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines(this, this.verts, this.indices, this.accumulatedSubSelection);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(this.renderLines);\n        this.pointBBH = new _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_7__.PointBoundingBoxHeirarchy(this, this.verts);\n        this.lineBBH = new _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_6__.LineBoundingBoxHeirarchy(this, this.verts, this.indices);\n        this.hide();\n    }\n    showControls(on) {\n    }\n    getBoundingBox() {\n        const res = new _boundingBox__WEBPACK_IMPORTED_MODULE_4__.BoundingBox();\n        const model = this.getModelRecursive();\n        for (const v of this.verts) {\n            res.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.transformMat4(v, model));\n        }\n        return res;\n    }\n    getTypeName() {\n        return \"Control cage 2d\";\n    }\n    intersect(ray, sub) {\n        if (this.isHidden())\n            return null;\n        let intersection = this.pointBBH.almostIntersect(ray, 10);\n        if (intersection === null) {\n            intersection = this.lineBBH.almostIntersect(ray, 10);\n            if (intersection !== null) {\n                intersection.objectSubID += this.u * this.v;\n            }\n        }\n        return intersection;\n    }\n    isWithinFrustum(frustum, inclusive) {\n        return this.lineBBH.isWithinFrustum(frustum, inclusive);\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        if (this.isHidden())\n            return [];\n        const res = this.lineBBH.getWithinFrustumSub(frustum, inclusive).map((n) => {\n            return n + this.u * this.v;\n        });\n        const model = this.getModelRecursive();\n        for (let i = 0; i < this.verts.length; i++) {\n            if (frustum.containsPoint(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.transformMat4(this.verts[i], model))) {\n                res.push(i);\n            }\n        }\n        return res;\n    }\n    addToSubSelection(...subIDs) {\n        for (let subID of subIDs) {\n            if (subID >= this.u * this.v) {\n                subID -= this.u * this.v;\n                // Line Sub ID\n                if (!this.segmentSubSelection[subID]) {\n                    this.segmentSubSelection[subID] = true;\n                    this.subSelectedSegmentCount++;\n                    this.segmentSelectionChanged(subID);\n                }\n            }\n            else {\n                // Point Sub ID\n                if (!this.vertexSubSelection[subID]) {\n                    console.log(\"subSelect vert\", subID);\n                    this.vertexSubSelection[subID] = true;\n                    this.subSelectedVertCount++;\n                    this.vertSelectionChanged(subID);\n                }\n            }\n        }\n        this.onSubSelectionUpdated();\n    }\n    removeFromSubSelection(...subIDs) {\n        for (let subID of subIDs) {\n            if (subID >= this.u * this.v) {\n                subID -= this.u * this.v;\n                // Line Sub ID\n                if (this.segmentSubSelection[subID]) {\n                    this.segmentSubSelection[subID] = false;\n                    this.subSelectedSegmentCount--;\n                    this.segmentSelectionChanged(subID);\n                }\n            }\n            else {\n                // Point Sub ID\n                if (this.vertexSubSelection[subID]) {\n                    this.vertexSubSelection[subID] = false;\n                    this.subSelectedVertCount--;\n                    this.vertSelectionChanged(subID);\n                }\n            }\n        }\n        this.onSubSelectionUpdated();\n    }\n    vertSelectionChanged(id) {\n        // modify accumulated accordingly\n        const selected = this.vertexSubSelection[id];\n        if (selected) {\n            this.accumulatedSubSelection[id] = true;\n        }\n        else {\n            const vertRow = Math.floor(id / this.v);\n            const vertCol = id % this.v;\n            // left\n            if (vertCol !== 0 && this.segmentSubSelection[id - vertRow - 1]) {\n                this.accumulatedSubSelection[id] = true;\n            }\n            // right\n            else if (vertCol !== this.v - 1 && this.segmentSubSelection[id - vertRow]) {\n                this.accumulatedSubSelection[id] = true;\n            }\n            // up\n            else if (vertRow !== 0 && this.segmentSubSelection[id - this.v + this.u * (this.v - 1)]) {\n                this.accumulatedSubSelection[id] = true;\n            }\n            // down\n            else if (vertCol !== this.u - 1 && this.segmentSubSelection[id + this.u * (this.v - 1)]) {\n                this.accumulatedSubSelection[id] = true;\n            }\n            else {\n                this.accumulatedSubSelection[id] = false;\n            }\n        }\n    }\n    segmentSelectionChanged(id) {\n        const selected = this.segmentSubSelection[id];\n        let vert1Index;\n        let vert2Index;\n        if (id >= this.u * (this.v - 1)) {\n            // vertical\n            id -= this.u * (this.v - 1);\n            vert1Index = id;\n            vert2Index = id + this.v;\n        }\n        else {\n            // horizontal\n            const vertRow = Math.floor(id / (this.v - 1));\n            vert1Index = id + vertRow + 1;\n            vert2Index = id + vertRow;\n        }\n        if (selected || this.vertexSubSelection[vert1Index] || this.vertexSubSelection[vert2Index]) {\n            this.accumulatedSubSelection[vert1Index] = true;\n            this.accumulatedSubSelection[vert2Index] = true;\n        }\n        else {\n            this.accumulatedSubSelection[vert1Index] = false;\n            this.accumulatedSubSelection[vert2Index] = false;\n        }\n    }\n    onSubSelectionUpdated() {\n        this.points.updateSubSelection(this.vertexSubSelection);\n        this.renderLines.updateSubSelection(this.accumulatedSubSelection);\n    }\n    isSubSelected(subID) {\n        if (subID >= this.u * this.v) {\n            subID -= this.u * this.v;\n            // Line Sub ID\n            return this.segmentSubSelection[subID];\n        }\n        else {\n            // Point Sub ID\n            return this.vertexSubSelection[subID];\n        }\n    }\n    clearSubSelection() {\n        if (this.hasSubSelection()) {\n            this.accumulatedSubSelection = this.accumulatedSubSelection.map(() => { return false; });\n            this.vertexSubSelection = this.vertexSubSelection.map(() => { return false; });\n            this.segmentSubSelection = this.segmentSubSelection.map(() => { return false; });\n            this.onSubSelectionUpdated();\n        }\n    }\n    onSelectionMoved() {\n        this.parent.onSelectionMoved();\n    }\n    getSubSelectionBoundingBox() {\n        const res = new _boundingBox__WEBPACK_IMPORTED_MODULE_4__.BoundingBox();\n        const model = this.getModelRecursive();\n        if (!this.hasSubSelection()) {\n            console.log(\"early return\");\n            return res;\n        }\n        for (let i = 0; i < this.u * this.v; i++) {\n            if (this.accumulatedSubSelection[i]) {\n                res.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.transformMat4(this.verts[i], model));\n            }\n        }\n        return res;\n    }\n    delete() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.renderLines);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeMeshInstanced(this.points);\n    }\n    getVertsSubSelectionTransformed() {\n        var t = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform();\n        const model = this.getModelRecursive();\n        t = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.inverse(model), t), model);\n        const transformed = [];\n        for (let i = 0; i < this.u; i++) {\n            const temp = [];\n            for (let j = 0; j < this.v; j++) {\n                const idx = i * this.v + j;\n                if (this.accumulatedSubSelection[idx]) {\n                    temp.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.transformMat4(this.verts[idx], t));\n                }\n                else {\n                    temp.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.clone(this.verts[idx]));\n                }\n            }\n            transformed.push(temp);\n        }\n        const flattened = [];\n        for (const l of transformed)\n            for (const v of l)\n                flattened.push(v);\n        this.updatePoints(flattened);\n        this.renderLines.updateVerts(flattened);\n        return transformed;\n    }\n    updatePoints(points) {\n        if (points === undefined)\n            points = this.verts;\n        const model = this.getModelRecursive();\n        const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.getTranslation(model);\n        const modelNoTranslation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.scale(translation, -1)), model);\n        this.points.updateTransforms(points.map((pos) => {\n            return (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.translation(pos), wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.inverse(modelNoTranslation), _points__WEBPACK_IMPORTED_MODULE_8__.POINT_MODEL)));\n        }));\n    }\n    bakeSelectionTransform() {\n        if (this.isSelected()) {\n            this.updatePoints(this.verts);\n        }\n        else if (this.hasSubSelection()) {\n            var t = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform();\n            const model = this.getModelRecursive();\n            t = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.mat4.inverse(model), t), model);\n            for (let i = 0; i < this.u * this.v; i++) {\n                if (this.accumulatedSubSelection[i]) {\n                    this.verts[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_9__.vec3.transformMat4(this.verts[i], t);\n                }\n            }\n            this.renderLines.updateVerts(this.verts);\n            this.lineBBH = new _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_6__.LineBoundingBoxHeirarchy(this, this.verts, this.indices);\n            this.pointBBH = new _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_7__.PointBoundingBoxHeirarchy(this, this.verts);\n            this.updatePoints(this.verts);\n        }\n    }\n    hasSubSelection() {\n        return this.subSelectedSegmentCount > 0 ||\n            this.subSelectedVertCount > 0;\n    }\n    clone() {\n        const controlPoints = [];\n        for (let i = 0; i < this.u; i++) {\n            const temp = [];\n            for (let j = 0; j < this.v; j++) {\n                temp.push(this.verts[i * this.v + j]);\n            }\n            controlPoints.push(temp);\n        }\n        return new ControlCage2D(this.parent, controlPoints, this.model, this.materialName);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsWUFBWSxDQUFDLENBQUM7SUFDdEYsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvY29udHJvbENhZ2UyRC50cz84ZGE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdDQsIG1hdDQsIHZlYzMsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWxOYW1lIH0gZnJvbSBcIi4uL21hdGVyaWFscy9tYXRlcmlhbFwiO1xuaW1wb3J0IHsgUmVuZGVyTGluZXMgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlckxpbmVzXCI7XG5pbXBvcnQgeyBSZW5kZXJNZXNoSW5zdGFuY2VkIH0gZnJvbSBcIi4uL3JlbmRlci9yZW50ZXJNZXNoSW5zdGFuY2VkXCI7XG5pbXBvcnQgeyBzd2l6emxlWVogfSBmcm9tIFwiLi4vdXRpbHMvbWF0aFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgRnJ1c3R1bSB9IGZyb20gXCIuL2ZydXN0dW1cIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuL2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgTGluZUJvdW5kaW5nQm94SGVpcmFyY2h5IH0gZnJvbSBcIi4vbGluZUJvdW5kaW5nQm94SGVpcmFyY2h5XCI7XG5pbXBvcnQgeyBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5IH0gZnJvbSBcIi4vcG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeVwiO1xuaW1wb3J0IHsgUE9JTlRfSU5ESUNFUywgUE9JTlRfTU9ERUwsIFBPSU5UX1ZFUlRTIH0gZnJvbSBcIi4vcG9pbnRzXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcblxuXG5cbmV4cG9ydCBjbGFzcyBDb250cm9sQ2FnZTJEIGV4dGVuZHMgR2VvbWV0cnkge1xuXG4gIHByaXZhdGUgcG9pbnRzOiBSZW5kZXJNZXNoSW5zdGFuY2VkO1xuICBwcml2YXRlIHBvaW50QkJIOiBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5O1xuXG4gIHByaXZhdGUgdTogbnVtYmVyO1xuICBwcml2YXRlIHY6IG51bWJlcjtcblxuICBwcml2YXRlIHJlbmRlckxpbmVzOiBSZW5kZXJMaW5lcztcbiAgcHJpdmF0ZSBsaW5lQkJIOiBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHk7XG5cbiAgcHJpdmF0ZSB2ZXJ0ZXhTdWJTZWxlY3Rpb246IGJvb2xlYW5bXTtcbiAgcHJpdmF0ZSBzZWdtZW50U3ViU2VsZWN0aW9uOiBib29sZWFuW107XG4gIHByaXZhdGUgYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb246IGJvb2xlYW5bXTtcblxuICBwcml2YXRlIHN1YlNlbGVjdGVkVmVydENvdW50OiBudW1iZXI7XG4gIHByaXZhdGUgc3ViU2VsZWN0ZWRTZWdtZW50Q291bnQ6IG51bWJlcjtcblxuICBwcml2YXRlIHZlcnRzOiBWZWMzW107XG4gIHByaXZhdGUgaW5kaWNlczogbnVtYmVyW107XG5cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwYXJlbnQ6IEdlb21ldHJ5IHwgbnVsbCxcbiAgICBwb2ludHM6IFZlYzNbXVtdLFxuICAgIG1vZGVsOiBNYXQ0ID0gbWF0NC5pZGVudGl0eSgpLFxuICAgIG1hdGVyaWFsTmFtZTogTWF0ZXJpYWxOYW1lIHwgbnVsbCA9IG51bGxcbiAgKSB7XG4gICAgc3VwZXIocGFyZW50LCBtb2RlbCwgbWF0ZXJpYWxOYW1lKTtcblxuICAgIHRoaXMudmVydGV4U3ViU2VsZWN0aW9uID0gW107XG4gICAgdGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uID0gW107XG4gICAgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbiA9IFtdO1xuICAgIHRoaXMuc3ViU2VsZWN0ZWRWZXJ0Q291bnQgPSAwO1xuICAgIHRoaXMuc3ViU2VsZWN0ZWRTZWdtZW50Q291bnQgPSAwO1xuXG4gICAgdGhpcy51ID0gcG9pbnRzLmxlbmd0aDtcbiAgICB0aGlzLnYgPSBwb2ludHNbMF0ubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnUgKiB0aGlzLnY7IGkrKykge1xuICAgICAgdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb24ucHVzaChmYWxzZSk7XG4gICAgICB0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uLnB1c2goZmFsc2UpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8ICh0aGlzLnUgLSAxKSAqIHRoaXMudiArIHRoaXMudSAqICh0aGlzLnYgLSAxKTsgaSsrKSB7XG4gICAgICB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb24ucHVzaChmYWxzZSk7XG4gICAgfVxuXG4gICAgdGhpcy52ZXJ0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgbGlzdCBvZiBwb2ludHMpIGZvciAoY29uc3QgcG9pbnQgb2YgbGlzdCkgdGhpcy52ZXJ0cy5wdXNoKHBvaW50KTtcblxuICAgIGNvbnN0IG1vZGVsUjogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBjb25zdCB0cmFuc2xhdGlvbjogVmVjMyA9IG1hdDQuZ2V0VHJhbnNsYXRpb24obW9kZWxSKTtcbiAgICBjb25zdCBtb2RlbE5vVHJhbnNsYXRpb246IE1hdDQgPSBtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHZlYzMuc2NhbGUodHJhbnNsYXRpb24sIC0xKSksIG1vZGVsUik7XG4gICAgY29uc3QgdHJhbnNmb3JtczogTWF0NFtdID0gdGhpcy52ZXJ0cy5tYXAoKHBvczogVmVjMykgPT4ge1xuICAgICAgcmV0dXJuIHN3aXp6bGVZWihtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHBvcyksIG1hdDQubXVsKG1hdDQuaW52ZXJzZShtb2RlbE5vVHJhbnNsYXRpb24pLCBQT0lOVF9NT0RFTCkpKTtcbiAgICB9KTtcblxuICAgIHRoaXMucG9pbnRzID0gbmV3IFJlbmRlck1lc2hJbnN0YW5jZWQodGhpcyxcbiAgICAgIFBPSU5UX1ZFUlRTLCBQT0lOVF9WRVJUUywgUE9JTlRfSU5ESUNFUywgdHJhbnNmb3JtcywgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbiwgdHJ1ZSk7XG4gICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRSZW5kZXJNZXNoSW5zdGFuY2VkKHRoaXMucG9pbnRzKTtcblxuXG4gICAgdGhpcy5pbmRpY2VzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnU7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnYgLSAxOyBqKyspIHtcbiAgICAgICAgdGhpcy5pbmRpY2VzLnB1c2goaSAqIHRoaXMudiArIGosIGkgKiB0aGlzLnYgKyBqICsgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy51IC0gMTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMudjsgaisrKSB7XG4gICAgICAgIHRoaXMuaW5kaWNlcy5wdXNoKGkgKiB0aGlzLnYgKyBqLCAoaSArIDEpICogdGhpcy52ICsgaik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXJMaW5lcyA9IG5ldyBSZW5kZXJMaW5lcyh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMsIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24pO1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkUmVuZGVyTGluZXModGhpcy5yZW5kZXJMaW5lcyk7XG5cbiAgICB0aGlzLnBvaW50QkJIID0gbmV3IFBvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHkodGhpcywgdGhpcy52ZXJ0cyk7XG4gICAgdGhpcy5saW5lQkJIID0gbmV3IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMpO1xuXG4gICAgdGhpcy5oaWRlKCk7XG5cbiAgfVxuXG4gIHB1YmxpYyBzaG93Q29udHJvbHMob246IGJvb2xlYW4pOiB2b2lkIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgY29uc3QgcmVzOiBCb3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgIGNvbnN0IG1vZGVsOiBNYXQ0ID0gdGhpcy5nZXRNb2RlbFJlY3Vyc2l2ZSgpO1xuICAgIGZvciAoY29uc3QgdiBvZiB0aGlzLnZlcnRzKSB7XG4gICAgICByZXMuYWRkVmVjMyh2ZWMzLnRyYW5zZm9ybU1hdDQodiwgbW9kZWwpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBnZXRUeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkNvbnRyb2wgY2FnZSAyZFwiO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdChyYXk6IFJheSwgc3ViOiBib29sZWFuKTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG4gICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkgcmV0dXJuIG51bGw7XG4gICAgbGV0IGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IHRoaXMucG9pbnRCQkguYWxtb3N0SW50ZXJzZWN0KHJheSwgMTApO1xuICAgIGlmIChpbnRlcnNlY3Rpb24gPT09IG51bGwpIHtcbiAgICAgIGludGVyc2VjdGlvbiA9IHRoaXMubGluZUJCSC5hbG1vc3RJbnRlcnNlY3QocmF5LCAxMCk7XG4gICAgICBpZiAoaW50ZXJzZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIGludGVyc2VjdGlvbi5vYmplY3RTdWJJRCArPSB0aGlzLnUgKiB0aGlzLnY7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gIH1cblxuICBwdWJsaWMgaXNXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmxpbmVCQkguaXNXaXRoaW5GcnVzdHVtKGZydXN0dW0sIGluY2x1c2l2ZSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtOiBGcnVzdHVtLCBpbmNsdXNpdmU6IGJvb2xlYW4pOiBudW1iZXJbXSB7XG4gICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHJlczogbnVtYmVyW10gPSB0aGlzLmxpbmVCQkguZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpLm1hcCgobjogbnVtYmVyKSA9PiB7XG4gICAgICByZXR1cm4gbiArIHRoaXMudSAqIHRoaXMudjtcbiAgICB9KTtcbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChmcnVzdHVtLmNvbnRhaW5zUG9pbnQodmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudmVydHNbaV0sIG1vZGVsKSkpIHtcbiAgICAgICAgcmVzLnB1c2goaSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwdWJsaWMgYWRkVG9TdWJTZWxlY3Rpb24oLi4uc3ViSURzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGZvciAobGV0IHN1YklEIG9mIHN1YklEcykge1xuICAgICAgaWYgKHN1YklEID49IHRoaXMudSAqIHRoaXMudikge1xuICAgICAgICBzdWJJRCAtPSB0aGlzLnUgKiB0aGlzLnY7XG4gICAgICAgIC8vIExpbmUgU3ViIElEXG4gICAgICAgIGlmICghdGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uW3N1YklEXSkge1xuICAgICAgICAgIHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbltzdWJJRF0gPSB0cnVlO1xuICAgICAgICAgIHRoaXMuc3ViU2VsZWN0ZWRTZWdtZW50Q291bnQrKztcbiAgICAgICAgICB0aGlzLnNlZ21lbnRTZWxlY3Rpb25DaGFuZ2VkKHN1YklEKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUG9pbnQgU3ViIElEXG4gICAgICAgIGlmICghdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSURdKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJzdWJTZWxlY3QgdmVydFwiLCBzdWJJRCk7XG4gICAgICAgICAgdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSURdID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnN1YlNlbGVjdGVkVmVydENvdW50Kys7XG4gICAgICAgICAgdGhpcy52ZXJ0U2VsZWN0aW9uQ2hhbmdlZChzdWJJRCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5vblN1YlNlbGVjdGlvblVwZGF0ZWQoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVGcm9tU3ViU2VsZWN0aW9uKC4uLnN1YklEczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBmb3IgKGxldCBzdWJJRCBvZiBzdWJJRHMpIHtcbiAgICAgIGlmIChzdWJJRCA+PSB0aGlzLnUgKiB0aGlzLnYpIHtcbiAgICAgICAgc3ViSUQgLT0gdGhpcy51ICogdGhpcy52O1xuICAgICAgICAvLyBMaW5lIFN1YiBJRFxuICAgICAgICBpZiAodGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uW3N1YklEXSkge1xuICAgICAgICAgIHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbltzdWJJRF0gPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnN1YlNlbGVjdGVkU2VnbWVudENvdW50LS07XG4gICAgICAgICAgdGhpcy5zZWdtZW50U2VsZWN0aW9uQ2hhbmdlZChzdWJJRCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFBvaW50IFN1YiBJRFxuICAgICAgICBpZiAodGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSURdKSB7XG4gICAgICAgICAgdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSURdID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zdWJTZWxlY3RlZFZlcnRDb3VudC0tO1xuICAgICAgICAgIHRoaXMudmVydFNlbGVjdGlvbkNoYW5nZWQoc3ViSUQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMub25TdWJTZWxlY3Rpb25VcGRhdGVkKCk7XG4gIH1cblxuXG4gIHByaXZhdGUgdmVydFNlbGVjdGlvbkNoYW5nZWQoaWQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIG1vZGlmeSBhY2N1bXVsYXRlZCBhY2NvcmRpbmdseVxuICAgIGNvbnN0IHNlbGVjdGVkOiBib29sZWFuID0gdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25baWRdO1xuICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbltpZF0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB2ZXJ0Um93OiBudW1iZXIgPSBNYXRoLmZsb29yKGlkIC8gdGhpcy52KTtcbiAgICAgIGNvbnN0IHZlcnRDb2w6IG51bWJlciA9IGlkICUgdGhpcy52O1xuICAgICAgLy8gbGVmdFxuICAgICAgaWYgKHZlcnRDb2wgIT09IDAgJiYgdGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uW2lkIC0gdmVydFJvdyAtIDFdKSB7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25baWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIHJpZ2h0XG4gICAgICBlbHNlIGlmICh2ZXJ0Q29sICE9PSB0aGlzLnYgLSAxICYmIHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbltpZCAtIHZlcnRSb3ddKSB7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25baWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIHVwXG4gICAgICBlbHNlIGlmICh2ZXJ0Um93ICE9PSAwICYmIHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbltpZCAtIHRoaXMudiArIHRoaXMudSAqICh0aGlzLnYgLSAxKV0pIHtcbiAgICAgICAgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbltpZF0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgLy8gZG93blxuICAgICAgZWxzZSBpZiAodmVydENvbCAhPT0gdGhpcy51IC0gMSAmJiB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb25baWQgKyB0aGlzLnUgKiAodGhpcy52IC0gMSldKSB7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25baWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW2lkXSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2VnbWVudFNlbGVjdGlvbkNoYW5nZWQoaWQ6IG51bWJlcik6IHZvaWQge1xuXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlZ21lbnRTdWJTZWxlY3Rpb25baWRdO1xuXG4gICAgbGV0IHZlcnQxSW5kZXg6IG51bWJlcjtcbiAgICBsZXQgdmVydDJJbmRleDogbnVtYmVyO1xuICAgIGlmIChpZCA+PSB0aGlzLnUgKiAodGhpcy52IC0gMSkpIHtcbiAgICAgIC8vIHZlcnRpY2FsXG4gICAgICBpZCAtPSB0aGlzLnUgKiAodGhpcy52IC0gMSk7XG4gICAgICB2ZXJ0MUluZGV4ID0gaWQ7XG4gICAgICB2ZXJ0MkluZGV4ID0gaWQgKyB0aGlzLnY7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGhvcml6b250YWxcbiAgICAgIGNvbnN0IHZlcnRSb3c6IG51bWJlciA9IE1hdGguZmxvb3IoaWQgLyAodGhpcy52IC0gMSkpXG4gICAgICB2ZXJ0MUluZGV4ID0gaWQgKyB2ZXJ0Um93ICsgMTtcbiAgICAgIHZlcnQySW5kZXggPSBpZCArIHZlcnRSb3c7XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGVkIHx8IHRoaXMudmVydGV4U3ViU2VsZWN0aW9uW3ZlcnQxSW5kZXhdIHx8IHRoaXMudmVydGV4U3ViU2VsZWN0aW9uW3ZlcnQySW5kZXhdKSB7XG4gICAgICB0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW3ZlcnQxSW5kZXhdID0gdHJ1ZTtcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25bdmVydDJJbmRleF0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW3ZlcnQxSW5kZXhdID0gZmFsc2U7XG4gICAgICB0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW3ZlcnQySW5kZXhdID0gZmFsc2U7XG4gICAgfVxuXG4gIH1cblxuICBwcml2YXRlIG9uU3ViU2VsZWN0aW9uVXBkYXRlZCgpOiB2b2lkIHtcbiAgICB0aGlzLnBvaW50cy51cGRhdGVTdWJTZWxlY3Rpb24odGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb24pO1xuICAgIHRoaXMucmVuZGVyTGluZXMudXBkYXRlU3ViU2VsZWN0aW9uKHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24pO1xuICB9XG5cbiAgcHVibGljIGlzU3ViU2VsZWN0ZWQoc3ViSUQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmIChzdWJJRCA+PSB0aGlzLnUgKiB0aGlzLnYpIHtcbiAgICAgIHN1YklEIC09IHRoaXMudSAqIHRoaXMudjtcbiAgICAgIC8vIExpbmUgU3ViIElEXG4gICAgICByZXR1cm4gdGhpcy5zZWdtZW50U3ViU2VsZWN0aW9uW3N1YklEXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUG9pbnQgU3ViIElEXG4gICAgICByZXR1cm4gdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb25bc3ViSURdO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbGVhclN1YlNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5oYXNTdWJTZWxlY3Rpb24oKSkge1xuICAgICAgdGhpcy5hY2N1bXVsYXRlZFN1YlNlbGVjdGlvbiA9IHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb24ubWFwKCgpID0+IHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICAgIHRoaXMudmVydGV4U3ViU2VsZWN0aW9uID0gdGhpcy52ZXJ0ZXhTdWJTZWxlY3Rpb24ubWFwKCgpID0+IHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICAgIHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbiA9IHRoaXMuc2VnbWVudFN1YlNlbGVjdGlvbi5tYXAoKCkgPT4geyByZXR1cm4gZmFsc2U7IH0pO1xuICAgICAgdGhpcy5vblN1YlNlbGVjdGlvblVwZGF0ZWQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25TZWxlY3Rpb25Nb3ZlZCgpOiB2b2lkIHtcbiAgICB0aGlzLnBhcmVudCEub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICB9XG5cbiAgcHVibGljIGdldFN1YlNlbGVjdGlvbkJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICBjb25zdCByZXM6IEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgaWYgKCF0aGlzLmhhc1N1YlNlbGVjdGlvbigpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImVhcmx5IHJldHVyblwiKTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy51ICogdGhpcy52OyBpKyspIHtcbiAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW2ldKSB7XG4gICAgICAgIHJlcy5hZGRWZWMzKHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLnZlcnRzW2ldLCBtb2RlbCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHVibGljIGRlbGV0ZSgpOiB2b2lkIHtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUxpbmVzKHRoaXMucmVuZGVyTGluZXMpO1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTWVzaEluc3RhbmNlZCh0aGlzLnBvaW50cyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmVydHNTdWJTZWxlY3Rpb25UcmFuc2Zvcm1lZCgpOiBWZWMzW11bXSB7XG5cbiAgICB2YXIgdDogTWF0NCA9IElOU1RBTkNFLmdldE1vdmVyKCkuZ2V0VHJhbnNmb3JtKCk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgdCA9IG1hdDQubXVsKG1hdDQubXVsKG1hdDQuaW52ZXJzZShtb2RlbCksIHQpLCBtb2RlbCk7XG5cbiAgICBjb25zdCB0cmFuc2Zvcm1lZDogVmVjM1tdW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudTsgaSsrKSB7XG4gICAgICBjb25zdCB0ZW1wOiBWZWMzW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy52OyBqKyspIHtcbiAgICAgICAgY29uc3QgaWR4OiBudW1iZXIgPSBpICogdGhpcy52ICsgajtcbiAgICAgICAgaWYgKHRoaXMuYWNjdW11bGF0ZWRTdWJTZWxlY3Rpb25baWR4XSkge1xuICAgICAgICAgIHRlbXAucHVzaCh2ZWMzLnRyYW5zZm9ybU1hdDQodGhpcy52ZXJ0c1tpZHhdLCB0KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcC5wdXNoKHZlYzMuY2xvbmUodGhpcy52ZXJ0c1tpZHhdKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRyYW5zZm9ybWVkLnB1c2godGVtcCk7XG4gICAgfVxuXG4gICAgY29uc3QgZmxhdHRlbmVkOiBWZWMzW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGwgb2YgdHJhbnNmb3JtZWQpIGZvciAoY29uc3QgdiBvZiBsKSBmbGF0dGVuZWQucHVzaCh2KTtcblxuICAgIHRoaXMudXBkYXRlUG9pbnRzKGZsYXR0ZW5lZCk7XG4gICAgdGhpcy5yZW5kZXJMaW5lcy51cGRhdGVWZXJ0cyhmbGF0dGVuZWQpO1xuICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcblxuICB9XG5cbiAgcHVibGljIHVwZGF0ZVBvaW50cyhwb2ludHM/OiBWZWMzW10pIHtcbiAgICBpZiAocG9pbnRzID09PSB1bmRlZmluZWQpIHBvaW50cyA9IHRoaXMudmVydHM7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgY29uc3QgdHJhbnNsYXRpb246IFZlYzMgPSBtYXQ0LmdldFRyYW5zbGF0aW9uKG1vZGVsKTtcbiAgICBjb25zdCBtb2RlbE5vVHJhbnNsYXRpb246IE1hdDQgPSBtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHZlYzMuc2NhbGUodHJhbnNsYXRpb24sIC0xKSksIG1vZGVsKTtcbiAgICB0aGlzLnBvaW50cy51cGRhdGVUcmFuc2Zvcm1zKHBvaW50cy5tYXAoKHBvczogVmVjMykgPT4ge1xuICAgICAgcmV0dXJuIHN3aXp6bGVZWihtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHBvcyksIG1hdDQubXVsKG1hdDQuaW52ZXJzZShtb2RlbE5vVHJhbnNsYXRpb24pLCBQT0lOVF9NT0RFTCkpKTtcbiAgICB9KSk7XG4gIH1cblxuICBwdWJsaWMgYmFrZVNlbGVjdGlvblRyYW5zZm9ybSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1NlbGVjdGVkKCkpIHtcbiAgICAgIHRoaXMudXBkYXRlUG9pbnRzKHRoaXMudmVydHMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5oYXNTdWJTZWxlY3Rpb24oKSkge1xuXG4gICAgICB2YXIgdDogTWF0NCA9IElOU1RBTkNFLmdldE1vdmVyKCkuZ2V0VHJhbnNmb3JtKCk7XG4gICAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICAgIHQgPSBtYXQ0Lm11bChtYXQ0Lm11bChtYXQ0LmludmVyc2UobW9kZWwpLCB0KSwgbW9kZWwpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudSAqIHRoaXMudjsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLmFjY3VtdWxhdGVkU3ViU2VsZWN0aW9uW2ldKSB7XG4gICAgICAgICAgdGhpcy52ZXJ0c1tpXSA9IHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLnZlcnRzW2ldLCB0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLnJlbmRlckxpbmVzLnVwZGF0ZVZlcnRzKHRoaXMudmVydHMpO1xuICAgICAgdGhpcy5saW5lQkJIID0gbmV3IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMpO1xuICAgICAgdGhpcy5wb2ludEJCSCA9IG5ldyBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5KHRoaXMsIHRoaXMudmVydHMpO1xuICAgICAgdGhpcy51cGRhdGVQb2ludHModGhpcy52ZXJ0cyk7XG5cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFzU3ViU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN1YlNlbGVjdGVkU2VnbWVudENvdW50ID4gMCB8fFxuICAgICAgdGhpcy5zdWJTZWxlY3RlZFZlcnRDb3VudCA+IDA7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogR2VvbWV0cnkge1xuICAgIGNvbnN0IGNvbnRyb2xQb2ludHM6IFZlYzNbXVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnU7IGkrKykge1xuICAgICAgY29uc3QgdGVtcDogVmVjM1tdID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMudjsgaisrKSB7XG4gICAgICAgIHRlbXAucHVzaCh0aGlzLnZlcnRzW2kgKiB0aGlzLnYgKyBqXSk7XG4gICAgICB9XG4gICAgICBjb250cm9sUG9pbnRzLnB1c2godGVtcCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQ29udHJvbENhZ2UyRCh0aGlzLnBhcmVudCwgY29udHJvbFBvaW50cywgdGhpcy5tb2RlbCwgdGhpcy5tYXRlcmlhbE5hbWUpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/controlCage2D.ts\n");

/***/ }),

/***/ "./src/geometry/frustum.ts":
/*!*********************************!*\
  !*** ./src/geometry/frustum.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Frustum: () => (/* binding */ Frustum)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n\n\n\n\nclass Frustum {\n    constructor(left, right, top, bottom) {\n        this.origin = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPosition();\n        this.topLeft = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(left, top);\n        this.topRight = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(right, top);\n        this.bottomLeft = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(left, bottom);\n        this.bottomRight = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(right, bottom);\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.topLeft.getDirection(), this.topRight.getDirection()));\n        this.right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.topRight.getDirection(), this.bottomRight.getDirection()));\n        this.down = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.bottomRight.getDirection(), this.bottomLeft.getDirection()));\n        this.left = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.bottomLeft.getDirection(), this.topLeft.getDirection()));\n    }\n    containsPoint(point) {\n        const v = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, this.origin);\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.up, v) > 0 &&\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.right, v) > 0 &&\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.down, v) > 0 &&\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.left, v) > 0;\n    }\n    transform(transform) {\n        this.origin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.transformMat4(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(...this.origin, 1), transform);\n        this.topLeft = _ray__WEBPACK_IMPORTED_MODULE_2__.Ray.transform(this.topLeft, transform);\n        this.topRight = _ray__WEBPACK_IMPORTED_MODULE_2__.Ray.transform(this.topRight, transform);\n        this.bottomLeft = _ray__WEBPACK_IMPORTED_MODULE_2__.Ray.transform(this.bottomLeft, transform);\n        this.bottomRight = _ray__WEBPACK_IMPORTED_MODULE_2__.Ray.transform(this.bottomRight, transform);\n        const forward = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.topLeft.getDirection(), this.topRight.getDirection()), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.bottomLeft.getDirection(), this.bottomRight.getDirection()));\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.topLeft.getDirection(), this.topRight.getDirection()));\n        this.right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.topRight.getDirection(), this.bottomRight.getDirection()));\n        this.down = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.bottomRight.getDirection(), this.bottomLeft.getDirection()));\n        this.left = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(this.bottomLeft.getDirection(), this.topLeft.getDirection()));\n        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.up, forward) < 0) {\n            this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(this.up, -1);\n            this.down = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(this.down, -1);\n        }\n        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.left, forward) < 0) {\n            this.left = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(this.left, -1);\n            this.right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(this.right, -1);\n        }\n    }\n    containsLineFully(a, b) {\n        return this.containsPoint(a) && this.containsPoint(b);\n    }\n    containsLinePartially(a, b) {\n        var _a, _b, _c, _d;\n        var dir = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(b, a);\n        const size = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.length(dir);\n        dir = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(dir, 1 / size);\n        const r = new _ray__WEBPACK_IMPORTED_MODULE_2__.Ray(a, dir);\n        const tUp = (_a = r.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.origin, this.up), true)) !== null && _a !== void 0 ? _a : 0;\n        const tRight = (_b = r.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.origin, this.right), true)) !== null && _b !== void 0 ? _b : 0;\n        const tDown = (_c = r.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.origin, this.down), true)) !== null && _c !== void 0 ? _c : 0;\n        const tLeft = (_d = r.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_1__.Plane(this.origin, this.left), true)) !== null && _d !== void 0 ? _d : 0;\n        var near = 0;\n        var far = size;\n        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.up, dir) < 0)\n            far = Math.min(far, tUp);\n        else\n            near = Math.max(near, tUp);\n        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.right, dir) < 0)\n            far = Math.min(far, tRight);\n        else\n            near = Math.max(near, tRight);\n        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.down, dir) < 0)\n            far = Math.min(far, tDown);\n        else\n            near = Math.max(near, tDown);\n        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.left, dir) < 0)\n            far = Math.min(far, tLeft);\n        else\n            near = Math.max(near, tLeft);\n        return near <= far;\n    }\n    containsTriangle(p1, p2, p3, inclusive) {\n        if (inclusive) {\n            if (this.topRight.intersectTriangle(p1, p2, p3) !== null)\n                return true;\n            if (this.bottomRight.intersectTriangle(p1, p2, p3) !== null)\n                return true;\n            if (this.bottomLeft.intersectTriangle(p1, p2, p3) !== null)\n                return true;\n            if (this.topLeft.intersectTriangle(p1, p2, p3) !== null)\n                return true;\n            if (this.containsLinePartially(p1, p2))\n                return true;\n            if (this.containsLinePartially(p2, p3))\n                return true;\n            if (this.containsLinePartially(p3, p1))\n                return true;\n            return false;\n        }\n        else {\n            return this.containsPoint(p1) && this.containsPoint(p2) && this.containsPoint(p3);\n        }\n    }\n    intersectsBoundingBox(bb) {\n        if (this.topRight.intersectBoundingBox(bb) !== null)\n            return true;\n        if (this.bottomRight.intersectBoundingBox(bb) !== null)\n            return true;\n        if (this.bottomLeft.intersectBoundingBox(bb) !== null)\n            return true;\n        if (this.topLeft.intersectBoundingBox(bb) !== null)\n            return true;\n        const p000 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMin(), bb.getZMin());\n        const p001 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMin(), bb.getZMax());\n        const p010 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMax(), bb.getZMin());\n        const p011 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMax(), bb.getZMax());\n        const p100 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMin(), bb.getZMin());\n        const p101 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMin(), bb.getZMax());\n        const p110 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMax(), bb.getZMin());\n        const p111 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMax(), bb.getZMax());\n        return this.containsLinePartially(p000, p100) ||\n            this.containsLinePartially(p000, p010) ||\n            this.containsLinePartially(p000, p001) ||\n            this.containsLinePartially(p110, p010) ||\n            this.containsLinePartially(p110, p100) ||\n            this.containsLinePartially(p110, p111) ||\n            this.containsLinePartially(p011, p111) ||\n            this.containsLinePartially(p011, p001) ||\n            this.containsLinePartially(p011, p010) ||\n            this.containsLinePartially(p101, p001) ||\n            this.containsLinePartially(p101, p111) ||\n            this.containsLinePartially(p101, p100);\n    }\n    containsBoundingBoxFully(bb) {\n        const p000 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMin(), bb.getZMin());\n        const p001 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMin(), bb.getZMax());\n        const p010 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMax(), bb.getZMin());\n        const p011 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMax(), bb.getZMax());\n        const p100 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMin(), bb.getZMin());\n        const p101 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMin(), bb.getZMax());\n        const p110 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMax(), bb.getZMin());\n        const p111 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMax(), bb.getZMax());\n        return this.containsPoint(p000) &&\n            this.containsPoint(p001) &&\n            this.containsPoint(p010) &&\n            this.containsPoint(p011) &&\n            this.containsPoint(p100) &&\n            this.containsPoint(p101) &&\n            this.containsPoint(p110) &&\n            this.containsPoint(p111);\n    }\n    print() {\n        console.log(\"Frustum:\");\n        console.log(\"\\torigin: \", this.origin);\n        console.log(\"\\ttop: \", this.up);\n        console.log(\"\\tright: \", this.right);\n        console.log(\"\\tbottom: \", this.down);\n        console.log(\"\\tleft: \", this.left);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTLDZDQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDekUsTUFBTSxJQUFJLEdBQVMsNkNBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUN6RSxNQUFNLElBQUksR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3pFLE1BQU0sSUFBSSxHQUFTLDZDQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDekUsTUFBTSxJQUFJLEdBQVMsNkNBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUN6RSxNQUFNLElBQUksR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3pFLE1BQU0sSUFBSSxHQUFTLDZDQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDekUsTUFBTSxJQUFJLEdBQVMsNkNBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUN6RSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQzdCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUdNLEtBQUs7UUFDVixPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2QyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckMsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvZnJ1c3R1bS50cz84MTdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdDQsIE1hdDQsIHZlYzMsIFZlYzMsIFZlYzQsIHZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgcHJpbnRNYXQ0IH0gZnJvbSBcIi4uL3V0aWxzL3ByaW50XCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuL3BsYW5lXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcblxuZXhwb3J0IGNsYXNzIEZydXN0dW0ge1xuXG4gIHByaXZhdGUgb3JpZ2luOiBWZWMzO1xuICBwcml2YXRlIHVwOiBWZWMzO1xuICBwcml2YXRlIHJpZ2h0OiBWZWMzO1xuICBwcml2YXRlIGRvd246IFZlYzM7XG4gIHByaXZhdGUgbGVmdDogVmVjMztcbiAgcHJpdmF0ZSB0b3BMZWZ0OiBSYXk7XG4gIHByaXZhdGUgdG9wUmlnaHQ6IFJheTtcbiAgcHJpdmF0ZSBib3R0b21MZWZ0OiBSYXk7XG4gIHByaXZhdGUgYm90dG9tUmlnaHQ6IFJheTtcblxuXG4gIGNvbnN0cnVjdG9yKGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlciwgdG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyKSB7XG4gICAgdGhpcy5vcmlnaW4gPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLmdldFBvc2l0aW9uKCk7XG4gICAgdGhpcy50b3BMZWZ0ID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5nZXRSYXlBdFBpeGVsKGxlZnQsIHRvcCk7XG4gICAgdGhpcy50b3BSaWdodCA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkuZ2V0UmF5QXRQaXhlbChyaWdodCwgdG9wKTtcbiAgICB0aGlzLmJvdHRvbUxlZnQgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLmdldFJheUF0UGl4ZWwobGVmdCwgYm90dG9tKTtcbiAgICB0aGlzLmJvdHRvbVJpZ2h0ID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5nZXRSYXlBdFBpeGVsKHJpZ2h0LCBib3R0b20pO1xuICAgIHRoaXMudXAgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKHRoaXMudG9wTGVmdC5nZXREaXJlY3Rpb24oKSwgdGhpcy50b3BSaWdodC5nZXREaXJlY3Rpb24oKSkpO1xuICAgIHRoaXMucmlnaHQgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKHRoaXMudG9wUmlnaHQuZ2V0RGlyZWN0aW9uKCksIHRoaXMuYm90dG9tUmlnaHQuZ2V0RGlyZWN0aW9uKCkpKTtcbiAgICB0aGlzLmRvd24gPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKHRoaXMuYm90dG9tUmlnaHQuZ2V0RGlyZWN0aW9uKCksIHRoaXMuYm90dG9tTGVmdC5nZXREaXJlY3Rpb24oKSkpO1xuICAgIHRoaXMubGVmdCA9IHZlYzMubm9ybWFsaXplKHZlYzMuY3Jvc3ModGhpcy5ib3R0b21MZWZ0LmdldERpcmVjdGlvbigpLCB0aGlzLnRvcExlZnQuZ2V0RGlyZWN0aW9uKCkpKTtcbiAgfVxuXG4gIHB1YmxpYyBjb250YWluc1BvaW50KHBvaW50OiBWZWMzKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdjogVmVjMyA9IHZlYzMuc3ViKHBvaW50LCB0aGlzLm9yaWdpbik7XG4gICAgcmV0dXJuIHZlYzMuZG90KHRoaXMudXAsIHYpID4gMCAmJlxuICAgICAgdmVjMy5kb3QodGhpcy5yaWdodCwgdikgPiAwICYmXG4gICAgICB2ZWMzLmRvdCh0aGlzLmRvd24sIHYpID4gMCAmJlxuICAgICAgdmVjMy5kb3QodGhpcy5sZWZ0LCB2KSA+IDA7XG4gIH1cblxuICBwdWJsaWMgdHJhbnNmb3JtKHRyYW5zZm9ybTogTWF0NCk6IHZvaWQge1xuXG4gICAgdGhpcy5vcmlnaW4gPSB2ZWM0LnRyYW5zZm9ybU1hdDQodmVjNC5jcmVhdGUoLi4udGhpcy5vcmlnaW4sIDEpLCB0cmFuc2Zvcm0pO1xuICAgIHRoaXMudG9wTGVmdCA9IFJheS50cmFuc2Zvcm0odGhpcy50b3BMZWZ0LCB0cmFuc2Zvcm0pO1xuICAgIHRoaXMudG9wUmlnaHQgPSBSYXkudHJhbnNmb3JtKHRoaXMudG9wUmlnaHQsIHRyYW5zZm9ybSk7XG4gICAgdGhpcy5ib3R0b21MZWZ0ID0gUmF5LnRyYW5zZm9ybSh0aGlzLmJvdHRvbUxlZnQsIHRyYW5zZm9ybSk7XG4gICAgdGhpcy5ib3R0b21SaWdodCA9IFJheS50cmFuc2Zvcm0odGhpcy5ib3R0b21SaWdodCwgdHJhbnNmb3JtKTtcblxuICAgIGNvbnN0IGZvcndhcmQ6IFZlYzMgPSB2ZWMzLmFkZChcbiAgICAgIHZlYzMuYWRkKHRoaXMudG9wTGVmdC5nZXREaXJlY3Rpb24oKSwgdGhpcy50b3BSaWdodC5nZXREaXJlY3Rpb24oKSksXG4gICAgICB2ZWMzLmFkZCh0aGlzLmJvdHRvbUxlZnQuZ2V0RGlyZWN0aW9uKCksIHRoaXMuYm90dG9tUmlnaHQuZ2V0RGlyZWN0aW9uKCkpXG4gICAgKTtcblxuICAgIHRoaXMudXAgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKHRoaXMudG9wTGVmdC5nZXREaXJlY3Rpb24oKSwgdGhpcy50b3BSaWdodC5nZXREaXJlY3Rpb24oKSkpO1xuICAgIHRoaXMucmlnaHQgPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKHRoaXMudG9wUmlnaHQuZ2V0RGlyZWN0aW9uKCksIHRoaXMuYm90dG9tUmlnaHQuZ2V0RGlyZWN0aW9uKCkpKTtcbiAgICB0aGlzLmRvd24gPSB2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKHRoaXMuYm90dG9tUmlnaHQuZ2V0RGlyZWN0aW9uKCksIHRoaXMuYm90dG9tTGVmdC5nZXREaXJlY3Rpb24oKSkpO1xuICAgIHRoaXMubGVmdCA9IHZlYzMubm9ybWFsaXplKHZlYzMuY3Jvc3ModGhpcy5ib3R0b21MZWZ0LmdldERpcmVjdGlvbigpLCB0aGlzLnRvcExlZnQuZ2V0RGlyZWN0aW9uKCkpKTtcblxuICAgIGlmICh2ZWMzLmRvdCh0aGlzLnVwLCBmb3J3YXJkKSA8IDApIHtcbiAgICAgIHRoaXMudXAgPSB2ZWMzLnNjYWxlKHRoaXMudXAsIC0xKTtcbiAgICAgIHRoaXMuZG93biA9IHZlYzMuc2NhbGUodGhpcy5kb3duLCAtMSk7XG4gICAgfVxuICAgIGlmICh2ZWMzLmRvdCh0aGlzLmxlZnQsIGZvcndhcmQpIDwgMCkge1xuICAgICAgdGhpcy5sZWZ0ID0gdmVjMy5zY2FsZSh0aGlzLmxlZnQsIC0xKTtcbiAgICAgIHRoaXMucmlnaHQgPSB2ZWMzLnNjYWxlKHRoaXMucmlnaHQsIC0xKTtcbiAgICB9XG5cbiAgfVxuXG4gIHB1YmxpYyBjb250YWluc0xpbmVGdWxseShhOiBWZWMzLCBiOiBWZWMzKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnNQb2ludChhKSAmJiB0aGlzLmNvbnRhaW5zUG9pbnQoYik7XG4gIH1cblxuICBwdWJsaWMgY29udGFpbnNMaW5lUGFydGlhbGx5KGE6IFZlYzMsIGI6IFZlYzMpOiBib29sZWFuIHtcblxuICAgIHZhciBkaXI6IFZlYzMgPSB2ZWMzLnN1YihiLCBhKTtcblxuICAgIGNvbnN0IHNpemU6IG51bWJlciA9IHZlYzMubGVuZ3RoKGRpcik7XG4gICAgZGlyID0gdmVjMy5zY2FsZShkaXIsIDEgLyBzaXplKTtcblxuICAgIGNvbnN0IHI6IFJheSA9IG5ldyBSYXkoYSwgZGlyKTtcblxuICAgIGNvbnN0IHRVcDogbnVtYmVyID0gci5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUodGhpcy5vcmlnaW4sIHRoaXMudXApLCB0cnVlKSA/PyAwO1xuICAgIGNvbnN0IHRSaWdodDogbnVtYmVyID0gci5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUodGhpcy5vcmlnaW4sIHRoaXMucmlnaHQpLCB0cnVlKSA/PyAwO1xuICAgIGNvbnN0IHREb3duOiBudW1iZXIgPSByLmludGVyc2VjdFBsYW5lKG5ldyBQbGFuZSh0aGlzLm9yaWdpbiwgdGhpcy5kb3duKSwgdHJ1ZSkgPz8gMDtcbiAgICBjb25zdCB0TGVmdDogbnVtYmVyID0gci5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUodGhpcy5vcmlnaW4sIHRoaXMubGVmdCksIHRydWUpID8/IDA7XG5cbiAgICB2YXIgbmVhcjogbnVtYmVyID0gMDtcbiAgICB2YXIgZmFyOiBudW1iZXIgPSBzaXplO1xuXG4gICAgaWYgKHZlYzMuZG90KHRoaXMudXAsIGRpcikgPCAwKSBmYXIgPSBNYXRoLm1pbihmYXIsIHRVcCk7IGVsc2UgbmVhciA9IE1hdGgubWF4KG5lYXIsIHRVcCk7XG4gICAgaWYgKHZlYzMuZG90KHRoaXMucmlnaHQsIGRpcikgPCAwKSBmYXIgPSBNYXRoLm1pbihmYXIsIHRSaWdodCk7IGVsc2UgbmVhciA9IE1hdGgubWF4KG5lYXIsIHRSaWdodCk7XG4gICAgaWYgKHZlYzMuZG90KHRoaXMuZG93biwgZGlyKSA8IDApIGZhciA9IE1hdGgubWluKGZhciwgdERvd24pOyBlbHNlIG5lYXIgPSBNYXRoLm1heChuZWFyLCB0RG93bik7XG4gICAgaWYgKHZlYzMuZG90KHRoaXMubGVmdCwgZGlyKSA8IDApIGZhciA9IE1hdGgubWluKGZhciwgdExlZnQpOyBlbHNlIG5lYXIgPSBNYXRoLm1heChuZWFyLCB0TGVmdCk7XG5cbiAgICByZXR1cm4gbmVhciA8PSBmYXI7XG5cbiAgfVxuXG4gIHB1YmxpYyBjb250YWluc1RyaWFuZ2xlKHAxOiBWZWMzLCBwMjogVmVjMywgcDM6IFZlYzMsIGluY2x1c2l2ZTogYm9vbGVhbikge1xuICAgIGlmIChpbmNsdXNpdmUpIHtcbiAgICAgIGlmICh0aGlzLnRvcFJpZ2h0LmludGVyc2VjdFRyaWFuZ2xlKHAxLCBwMiwgcDMpICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmJvdHRvbVJpZ2h0LmludGVyc2VjdFRyaWFuZ2xlKHAxLCBwMiwgcDMpICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh0aGlzLmJvdHRvbUxlZnQuaW50ZXJzZWN0VHJpYW5nbGUocDEsIHAyLCBwMykgIT09IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgaWYgKHRoaXMudG9wTGVmdC5pbnRlcnNlY3RUcmlhbmdsZShwMSwgcDIsIHAzKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAodGhpcy5jb250YWluc0xpbmVQYXJ0aWFsbHkocDEsIHAyKSkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAodGhpcy5jb250YWluc0xpbmVQYXJ0aWFsbHkocDIsIHAzKSkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAodGhpcy5jb250YWluc0xpbmVQYXJ0aWFsbHkocDMsIHAxKSkgcmV0dXJuIHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zUG9pbnQocDEpICYmIHRoaXMuY29udGFpbnNQb2ludChwMikgJiYgdGhpcy5jb250YWluc1BvaW50KHAzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0c0JvdW5kaW5nQm94KGJiOiBCb3VuZGluZ0JveCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLnRvcFJpZ2h0LmludGVyc2VjdEJvdW5kaW5nQm94KGJiKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKHRoaXMuYm90dG9tUmlnaHQuaW50ZXJzZWN0Qm91bmRpbmdCb3goYmIpICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAodGhpcy5ib3R0b21MZWZ0LmludGVyc2VjdEJvdW5kaW5nQm94KGJiKSAhPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKHRoaXMudG9wTGVmdC5pbnRlcnNlY3RCb3VuZGluZ0JveChiYikgIT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgcDAwMDogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNaW4oKSwgYmIuZ2V0WU1pbigpLCBiYi5nZXRaTWluKCkpO1xuICAgIGNvbnN0IHAwMDE6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWluKCksIGJiLmdldFlNaW4oKSwgYmIuZ2V0Wk1heCgpKTtcbiAgICBjb25zdCBwMDEwOiBWZWMzID0gdmVjMy5jcmVhdGUoYmIuZ2V0WE1pbigpLCBiYi5nZXRZTWF4KCksIGJiLmdldFpNaW4oKSk7XG4gICAgY29uc3QgcDAxMTogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNaW4oKSwgYmIuZ2V0WU1heCgpLCBiYi5nZXRaTWF4KCkpO1xuICAgIGNvbnN0IHAxMDA6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWF4KCksIGJiLmdldFlNaW4oKSwgYmIuZ2V0Wk1pbigpKTtcbiAgICBjb25zdCBwMTAxOiBWZWMzID0gdmVjMy5jcmVhdGUoYmIuZ2V0WE1heCgpLCBiYi5nZXRZTWluKCksIGJiLmdldFpNYXgoKSk7XG4gICAgY29uc3QgcDExMDogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNYXgoKSwgYmIuZ2V0WU1heCgpLCBiYi5nZXRaTWluKCkpO1xuICAgIGNvbnN0IHAxMTE6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWF4KCksIGJiLmdldFlNYXgoKSwgYmIuZ2V0Wk1heCgpKTtcblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zTGluZVBhcnRpYWxseShwMDAwLCBwMTAwKSB8fFxuICAgICAgdGhpcy5jb250YWluc0xpbmVQYXJ0aWFsbHkocDAwMCwgcDAxMCkgfHxcbiAgICAgIHRoaXMuY29udGFpbnNMaW5lUGFydGlhbGx5KHAwMDAsIHAwMDEpIHx8XG5cbiAgICAgIHRoaXMuY29udGFpbnNMaW5lUGFydGlhbGx5KHAxMTAsIHAwMTApIHx8XG4gICAgICB0aGlzLmNvbnRhaW5zTGluZVBhcnRpYWxseShwMTEwLCBwMTAwKSB8fFxuICAgICAgdGhpcy5jb250YWluc0xpbmVQYXJ0aWFsbHkocDExMCwgcDExMSkgfHxcblxuICAgICAgdGhpcy5jb250YWluc0xpbmVQYXJ0aWFsbHkocDAxMSwgcDExMSkgfHxcbiAgICAgIHRoaXMuY29udGFpbnNMaW5lUGFydGlhbGx5KHAwMTEsIHAwMDEpIHx8XG4gICAgICB0aGlzLmNvbnRhaW5zTGluZVBhcnRpYWxseShwMDExLCBwMDEwKSB8fFxuXG4gICAgICB0aGlzLmNvbnRhaW5zTGluZVBhcnRpYWxseShwMTAxLCBwMDAxKSB8fFxuICAgICAgdGhpcy5jb250YWluc0xpbmVQYXJ0aWFsbHkocDEwMSwgcDExMSkgfHxcbiAgICAgIHRoaXMuY29udGFpbnNMaW5lUGFydGlhbGx5KHAxMDEsIHAxMDApO1xuXG4gIH1cblxuICBwdWJsaWMgY29udGFpbnNCb3VuZGluZ0JveEZ1bGx5KGJiOiBCb3VuZGluZ0JveCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHAwMDA6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWluKCksIGJiLmdldFlNaW4oKSwgYmIuZ2V0Wk1pbigpKTtcbiAgICBjb25zdCBwMDAxOiBWZWMzID0gdmVjMy5jcmVhdGUoYmIuZ2V0WE1pbigpLCBiYi5nZXRZTWluKCksIGJiLmdldFpNYXgoKSk7XG4gICAgY29uc3QgcDAxMDogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNaW4oKSwgYmIuZ2V0WU1heCgpLCBiYi5nZXRaTWluKCkpO1xuICAgIGNvbnN0IHAwMTE6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWluKCksIGJiLmdldFlNYXgoKSwgYmIuZ2V0Wk1heCgpKTtcbiAgICBjb25zdCBwMTAwOiBWZWMzID0gdmVjMy5jcmVhdGUoYmIuZ2V0WE1heCgpLCBiYi5nZXRZTWluKCksIGJiLmdldFpNaW4oKSk7XG4gICAgY29uc3QgcDEwMTogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNYXgoKSwgYmIuZ2V0WU1pbigpLCBiYi5nZXRaTWF4KCkpO1xuICAgIGNvbnN0IHAxMTA6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWF4KCksIGJiLmdldFlNYXgoKSwgYmIuZ2V0Wk1pbigpKTtcbiAgICBjb25zdCBwMTExOiBWZWMzID0gdmVjMy5jcmVhdGUoYmIuZ2V0WE1heCgpLCBiYi5nZXRZTWF4KCksIGJiLmdldFpNYXgoKSk7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnNQb2ludChwMDAwKSAmJlxuICAgICAgdGhpcy5jb250YWluc1BvaW50KHAwMDEpICYmXG4gICAgICB0aGlzLmNvbnRhaW5zUG9pbnQocDAxMCkgJiZcbiAgICAgIHRoaXMuY29udGFpbnNQb2ludChwMDExKSAmJlxuICAgICAgdGhpcy5jb250YWluc1BvaW50KHAxMDApICYmXG4gICAgICB0aGlzLmNvbnRhaW5zUG9pbnQocDEwMSkgJiZcbiAgICAgIHRoaXMuY29udGFpbnNQb2ludChwMTEwKSAmJlxuICAgICAgdGhpcy5jb250YWluc1BvaW50KHAxMTEpO1xuICB9XG5cblxuICBwdWJsaWMgcHJpbnQoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJGcnVzdHVtOlwiKTtcbiAgICBjb25zb2xlLmxvZyhcIlxcdG9yaWdpbjogXCIsIHRoaXMub3JpZ2luKTtcbiAgICBjb25zb2xlLmxvZyhcIlxcdHRvcDogXCIsIHRoaXMudXApO1xuICAgIGNvbnNvbGUubG9nKFwiXFx0cmlnaHQ6IFwiLCB0aGlzLnJpZ2h0KTtcbiAgICBjb25zb2xlLmxvZyhcIlxcdGJvdHRvbTogXCIsIHRoaXMuZG93bik7XG4gICAgY29uc29sZS5sb2coXCJcXHRsZWZ0OiBcIiwgdGhpcy5sZWZ0KTtcbiAgfVxuXG59XG5cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/frustum.ts\n");

/***/ }),

/***/ "./src/geometry/geometry.ts":
/*!**********************************!*\
  !*** ./src/geometry/geometry.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Geometry: () => (/* binding */ Geometry)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\n\nclass Geometry {\n    static getNewID() { return this.idGenerator++; }\n    constructor(parent = null, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.identity(), materialName) {\n        this.parent = parent;\n        this.model = model;\n        this.materialName = materialName;\n        this.selected = false;\n        this.hovered = false;\n        this.showing = true;\n        this.overlay = false;\n        this.id = Geometry.idGenerator++;\n    }\n    getID() {\n        return this.id;\n    }\n    getMaterial() {\n        return this.materialName;\n    }\n    isOverlay() {\n        return this.overlay || (this.parent && this.parent.isOverlay()) || false;\n    }\n    setOverlay(option) {\n        this.overlay = option;\n    }\n    setModel(model) {\n        this.model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.clone(model);\n    }\n    getModel() {\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.clone(this.model);\n    }\n    setParent(parent) {\n        this.parent = parent;\n    }\n    getModelRecursive() {\n        if (this.parent) {\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.mul(this.parent.getModelRecursive(), this.model);\n        }\n        else {\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.clone(this.model);\n        }\n    }\n    getParent() {\n        return this.parent;\n    }\n    isSelected() {\n        if (this.selected)\n            return true;\n        if (this.parent && this.parent.isSelected())\n            return true;\n        return false;\n    }\n    select() {\n        this.selected = true;\n        this.clearSubSelection();\n    }\n    unSelect() {\n        this.selected = false;\n        this.clearSubSelection();\n    }\n    isHovered() {\n        if (this.hovered)\n            return true;\n        if (this.parent && this.parent.isHovered())\n            return true;\n        return false;\n    }\n    hover() {\n        this.hovered = true;\n    }\n    unHover() {\n        this.hovered = false;\n    }\n    hide() {\n        this.showing = false;\n    }\n    show() {\n        this.showing = true;\n    }\n    isHidden() {\n        return !this.showing || (this.parent && this.parent.isHidden()) || false;\n    }\n    setMaterial(name) {\n        this.materialName = name;\n    }\n    getColorBuffer() {\n        if (this.materialName) {\n            const mat = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getMaterial(this.materialName);\n            if (mat && mat.getColor()) {\n                return mat.getColorBuffer();\n            }\n        }\n        if (this.parent) {\n            return this.parent.getColorBuffer();\n        }\n        return _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getDefaultMaterial().getColorBuffer();\n    }\n    getColor() {\n        if (this.materialName) {\n            const mat = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getMaterial(this.materialName);\n            if (mat && mat.getColor()) {\n                return mat.getColor();\n            }\n        }\n        if (this.parent) {\n            return this.parent.getColor();\n        }\n        return _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getDefaultMaterial().getColor();\n    }\n    transform(transform) {\n        this.model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.mat4.mul(transform, this.model);\n    }\n}\nGeometry.idGenerator = 1;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsWUFBWSxDQUFDLENBQUM7WUFDL0YsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFO2dCQUN6QixPQUFPLEdBQUcsQ0FBQyxRQUFRLEVBQUcsQ0FBQzthQUN4QjtTQUNGO1FBQ0QsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQy9CO1FBQ0QsT0FBTywwQ0FBUSxDQUFDLGtCQUFrQixFQUFFLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxRQUFRLEVBQUcsQ0FBQztJQUN4RSxDQUFDO0lBRU0sU0FBUyxDQUFDLFNBQWU7UUFDOUIsSUFBSSxDQUFDLEtBQUssR0FBRyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9DLENBQUM7O0FBMUpjLG9CQUFXLEdBQVcsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvZ2VvbWV0cnkudHM/Njk2NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsLCBNYXRlcmlhbE5hbWUgfSBmcm9tIFwiLi4vbWF0ZXJpYWxzL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBGcnVzdHVtIH0gZnJvbSBcIi4vZnJ1c3R1bVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4vaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcblxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgR2VvbWV0cnkge1xuXG4gIHByaXZhdGUgc3RhdGljIGlkR2VuZXJhdG9yOiBudW1iZXIgPSAxO1xuICBwdWJsaWMgc3RhdGljIGdldE5ld0lEKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmlkR2VuZXJhdG9yKys7IH1cblxuICBwcml2YXRlIHNlbGVjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgaG92ZXJlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHNob3dpbmc6IGJvb2xlYW4gPSB0cnVlO1xuICBwcml2YXRlIG92ZXJsYXk6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpZDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBwYXJlbnQ6IEdlb21ldHJ5IHwgbnVsbCA9IG51bGwsXG4gICAgcHJvdGVjdGVkIG1vZGVsOiBNYXQ0ID0gbWF0NC5pZGVudGl0eSgpLFxuICAgIHByb3RlY3RlZCBtYXRlcmlhbE5hbWU6IE1hdGVyaWFsTmFtZSB8IG51bGwsXG4gICkge1xuICAgIHRoaXMuaWQgPSBHZW9tZXRyeS5pZEdlbmVyYXRvcisrO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94O1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0VHlwZU5hbWUoKTogc3RyaW5nO1xuICBwdWJsaWMgYWJzdHJhY3QgaW50ZXJzZWN0KHJheTogUmF5LCBzdWI6IGJvb2xlYW4pOiBJbnRlcnNlY3Rpb24gfCBudWxsO1xuICBwdWJsaWMgYWJzdHJhY3QgaXNXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IGJvb2xlYW47XG5cbiAgcHVibGljIGFic3RyYWN0IGFkZFRvU3ViU2VsZWN0aW9uKC4uLnN1YklEczogbnVtYmVyW10pOiB2b2lkO1xuICBwdWJsaWMgYWJzdHJhY3QgcmVtb3ZlRnJvbVN1YlNlbGVjdGlvbiguLi5zdWJJRHM6IG51bWJlcltdKTogdm9pZDtcbiAgcHVibGljIGFic3RyYWN0IGNsZWFyU3ViU2VsZWN0aW9uKCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCBpc1N1YlNlbGVjdGVkKHN1YklEOiBudW1iZXIpOiBib29sZWFuO1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0U3ViU2VsZWN0aW9uQm91bmRpbmdCb3goKTogQm91bmRpbmdCb3g7XG4gIHB1YmxpYyBhYnN0cmFjdCBnZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IG51bWJlcltdO1xuXG4gIHB1YmxpYyBhYnN0cmFjdCBzaG93Q29udHJvbHMob246IGJvb2xlYW4pOiB2b2lkO1xuXG4gIHB1YmxpYyBhYnN0cmFjdCBvblNlbGVjdGlvbk1vdmVkKCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCBiYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCBoYXNTdWJTZWxlY3Rpb24oKTogYm9vbGVhbjtcblxuICBwdWJsaWMgYWJzdHJhY3QgZGVsZXRlKCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCBjbG9uZSgpOiBHZW9tZXRyeTtcblxuICBwdWJsaWMgZ2V0SUQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pZDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNYXRlcmlhbCgpOiBNYXRlcmlhbE5hbWUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5tYXRlcmlhbE5hbWU7XG4gIH1cblxuICBwdWJsaWMgaXNPdmVybGF5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXkgfHwgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LmlzT3ZlcmxheSgpKSB8fCBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRPdmVybGF5KG9wdGlvbjogYm9vbGVhbikge1xuICAgIHRoaXMub3ZlcmxheSA9IG9wdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBzZXRNb2RlbChtb2RlbDogTWF0NCk6IHZvaWQge1xuICAgIHRoaXMubW9kZWwgPSBtYXQ0LmNsb25lKG1vZGVsKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNb2RlbCgpOiBNYXQ0IHtcbiAgICByZXR1cm4gbWF0NC5jbG9uZSh0aGlzLm1vZGVsKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRQYXJlbnQocGFyZW50OiBHZW9tZXRyeSk6IHZvaWQge1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICB9XG5cbiAgcHVibGljIGdldE1vZGVsUmVjdXJzaXZlKCk6IE1hdDQge1xuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuIG1hdDQubXVsKHRoaXMucGFyZW50LmdldE1vZGVsUmVjdXJzaXZlKCksIHRoaXMubW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWF0NC5jbG9uZSh0aGlzLm1vZGVsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0UGFyZW50KCk6IEdlb21ldHJ5IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50O1xuICB9XG5cbiAgcHVibGljIGlzU2VsZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWQpIHJldHVybiB0cnVlO1xuICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5pc1NlbGVjdGVkKCkpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3QoKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZCA9IHRydWU7XG4gICAgdGhpcy5jbGVhclN1YlNlbGVjdGlvbigpO1xuICB9XG5cbiAgcHVibGljIHVuU2VsZWN0KCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsZWFyU3ViU2VsZWN0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgaXNIb3ZlcmVkKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmhvdmVyZWQpIHJldHVybiB0cnVlO1xuICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5pc0hvdmVyZWQoKSkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGhvdmVyKCk6IHZvaWQge1xuICAgIHRoaXMuaG92ZXJlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgdW5Ib3ZlcigpOiB2b2lkIHtcbiAgICB0aGlzLmhvdmVyZWQgPSBmYWxzZTtcbiAgfVxuXG5cbiAgcHVibGljIGhpZGUoKTogdm9pZCB7XG4gICAgdGhpcy5zaG93aW5nID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgc2hvdygpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dpbmcgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIGlzSGlkZGVuKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5zaG93aW5nIHx8ICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5pc0hpZGRlbigpKSB8fCBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRNYXRlcmlhbChuYW1lOiBNYXRlcmlhbE5hbWUpIHtcbiAgICB0aGlzLm1hdGVyaWFsTmFtZSA9IG5hbWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29sb3JCdWZmZXIoKTogR1BVQnVmZmVyIHtcblxuICAgIGlmICh0aGlzLm1hdGVyaWFsTmFtZSkge1xuICAgICAgY29uc3QgbWF0OiBNYXRlcmlhbCB8IHVuZGVmaW5lZCA9IElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLmdldE1hdGVyaWFsKHRoaXMubWF0ZXJpYWxOYW1lKTtcbiAgICAgIGlmIChtYXQgJiYgbWF0LmdldENvbG9yKCkpIHtcbiAgICAgICAgcmV0dXJuIG1hdC5nZXRDb2xvckJ1ZmZlcigpITtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sb3JCdWZmZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLmdldERlZmF1bHRNYXRlcmlhbCgpLmdldENvbG9yQnVmZmVyKCkhO1xuICB9XG5cbiAgcHVibGljIGdldENvbG9yKCk6IFZlYzQge1xuICAgIGlmICh0aGlzLm1hdGVyaWFsTmFtZSkge1xuICAgICAgY29uc3QgbWF0OiBNYXRlcmlhbCB8IHVuZGVmaW5lZCA9IElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLmdldE1hdGVyaWFsKHRoaXMubWF0ZXJpYWxOYW1lKTtcbiAgICAgIGlmIChtYXQgJiYgbWF0LmdldENvbG9yKCkpIHtcbiAgICAgICAgcmV0dXJuIG1hdC5nZXRDb2xvcigpITtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0Q29sb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLmdldERlZmF1bHRNYXRlcmlhbCgpLmdldENvbG9yKCkhO1xuICB9XG5cbiAgcHVibGljIHRyYW5zZm9ybSh0cmFuc2Zvcm06IE1hdDQpOiB2b2lkIHtcbiAgICB0aGlzLm1vZGVsID0gbWF0NC5tdWwodHJhbnNmb3JtLCB0aGlzLm1vZGVsKTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/geometry.ts\n");

/***/ }),

/***/ "./src/geometry/group.ts":
/*!*******************************!*\
  !*** ./src/geometry/group.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Group: () => (/* binding */ Group)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n\n\n\nclass Group extends _geometry__WEBPACK_IMPORTED_MODULE_1__.Geometry {\n    constructor(children, parent = null, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.identity(), material = null) {\n        super(parent, model, material);\n        this.children = children;\n        for (const child of children) {\n            child.setParent(this);\n        }\n    }\n    addToSubSelection(...subIDs) {\n        alert(\"todo group\");\n    }\n    removeFromSubSelection(...subIDs) {\n        alert(\"todo group\");\n    }\n    isSubSelected(subID) {\n        alert(\"todo group\");\n        return false;\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        alert(\"todo group\");\n        return [];\n    }\n    hasSubSelection() {\n        alert(\"todo group\");\n        return false;\n    }\n    clearSubSelection() {\n        for (const geo of this.children)\n            geo.clearSubSelection();\n    }\n    getSubSelectionBoundingBox() {\n        const res = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        for (const geo of this.children)\n            res.addBoundingBox(geo.getSubSelectionBoundingBox());\n        return res;\n    }\n    onSelectionMoved() {\n        for (const geo of this.children)\n            geo.onSelectionMoved();\n    }\n    bakeSelectionTransform() {\n        for (const geo of this.children)\n            geo.bakeSelectionTransform();\n    }\n    showControls(on) {\n        for (const geo of this.children)\n            geo.showControls(on);\n    }\n    getBoundingBox() {\n        const boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        for (let child of this.children) {\n            boundingBox.addBoundingBox(child.getBoundingBox());\n        }\n        return boundingBox;\n    }\n    getTypeName() {\n        return \"Group\";\n    }\n    delete() {\n        for (const child of this.children) {\n            child.delete();\n        }\n    }\n    clone() {\n        return new Group(this.children.map((geo) => { return geo.clone(); }), this.parent, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.clone(this.model), this.materialName);\n    }\n    isWithinFrustum(frustum, inclusive) {\n        if (this.isHidden())\n            return false;\n        if (inclusive) {\n            for (const geo of this.children) {\n                if (geo.isWithinFrustum(frustum, inclusive))\n                    return true;\n            }\n            return false;\n        }\n        else {\n            for (const geo of this.children) {\n                if (!geo.isWithinFrustum(frustum, inclusive))\n                    return false;\n            }\n            return true;\n        }\n    }\n    intersect(ray, sub) {\n        if (this.isHidden())\n            return null;\n        var res = null;\n        for (const child of this.children) {\n            const intersection = child.intersect(ray, sub);\n            if (intersection) {\n                if (!res)\n                    res = intersection;\n                else if (intersection.time < res.time)\n                    res = intersection;\n            }\n        }\n        return res;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7YUFDM0Q7U0FDRjtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvZ3JvdXAudHM/MzY0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXQ0LCBtYXQ0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBNYXRlcmlhbE5hbWUgfSBmcm9tIFwiLi4vbWF0ZXJpYWxzL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBGcnVzdHVtIH0gZnJvbSBcIi4vZnJ1c3R1bVwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4vaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcblxuZXhwb3J0IGNsYXNzIEdyb3VwIGV4dGVuZHMgR2VvbWV0cnkge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY2hpbGRyZW46IEdlb21ldHJ5W10sXG4gICAgcGFyZW50OiBHZW9tZXRyeSB8IG51bGwgPSBudWxsLFxuICAgIG1vZGVsOiBNYXQ0ID0gbWF0NC5pZGVudGl0eSgpLFxuICAgIG1hdGVyaWFsOiBNYXRlcmlhbE5hbWUgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikge1xuICAgICAgY2hpbGQuc2V0UGFyZW50KHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRUb1N1YlNlbGVjdGlvbiguLi5zdWJJRHM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgYWxlcnQoXCJ0b2RvIGdyb3VwXCIpO1xuICB9XG4gIHB1YmxpYyByZW1vdmVGcm9tU3ViU2VsZWN0aW9uKC4uLnN1YklEczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBhbGVydChcInRvZG8gZ3JvdXBcIik7XG4gIH1cbiAgcHVibGljIGlzU3ViU2VsZWN0ZWQoc3ViSUQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGFsZXJ0KFwidG9kbyBncm91cFwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcHVibGljIGdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogbnVtYmVyW10ge1xuICAgIGFsZXJ0KFwidG9kbyBncm91cFwiKTtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcHVibGljIGhhc1N1YlNlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICBhbGVydChcInRvZG8gZ3JvdXBcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGNsZWFyU3ViU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuY2hpbGRyZW4pIGdlby5jbGVhclN1YlNlbGVjdGlvbigpO1xuICB9XG4gIHB1YmxpYyBnZXRTdWJTZWxlY3Rpb25Cb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgY29uc3QgcmVzOiBCb3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuY2hpbGRyZW4pIHJlcy5hZGRCb3VuZGluZ0JveChnZW8uZ2V0U3ViU2VsZWN0aW9uQm91bmRpbmdCb3goKSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICBwdWJsaWMgb25TZWxlY3Rpb25Nb3ZlZCgpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGdlbyBvZiB0aGlzLmNoaWxkcmVuKSBnZW8ub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICB9XG4gIHB1YmxpYyBiYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuY2hpbGRyZW4pIGdlby5iYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk7XG4gIH1cbiAgcHVibGljIHNob3dDb250cm9scyhvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuY2hpbGRyZW4pIGdlby5zaG93Q29udHJvbHMob24pO1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICBjb25zdCBib3VuZGluZ0JveDogQm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICBib3VuZGluZ0JveC5hZGRCb3VuZGluZ0JveChjaGlsZC5nZXRCb3VuZGluZ0JveCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJvdW5kaW5nQm94O1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldFR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiR3JvdXBcIjtcbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUoKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICBjaGlsZC5kZWxldGUoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogR2VvbWV0cnkge1xuICAgIHJldHVybiBuZXcgR3JvdXAodGhpcy5jaGlsZHJlbi5tYXAoKGdlbzogR2VvbWV0cnkpID0+IHsgcmV0dXJuIGdlby5jbG9uZSgpOyB9KSwgdGhpcy5wYXJlbnQsIG1hdDQuY2xvbmUodGhpcy5tb2RlbCksIHRoaXMubWF0ZXJpYWxOYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1dpdGhpbkZydXN0dW0oZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChpbmNsdXNpdmUpIHtcbiAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKGdlby5pc1dpdGhpbkZydXN0dW0oZnJ1c3R1bSwgaW5jbHVzaXZlKSkgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCFnZW8uaXNXaXRoaW5GcnVzdHVtKGZydXN0dW0sIGluY2x1c2l2ZSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBpbnRlcnNlY3QocmF5OiBSYXksIHN1YjogYm9vbGVhbik6IEludGVyc2VjdGlvbiB8IG51bGwge1xuXG4gICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgcmVzOiBJbnRlcnNlY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IGNoaWxkLmludGVyc2VjdChyYXksIHN1Yik7XG4gICAgICBpZiAoaW50ZXJzZWN0aW9uKSB7XG4gICAgICAgIGlmICghcmVzKSByZXMgPSBpbnRlcnNlY3Rpb247XG4gICAgICAgIGVsc2UgaWYgKGludGVyc2VjdGlvbi50aW1lIDwgcmVzLnRpbWUpIHJlcyA9IGludGVyc2VjdGlvbjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/group.ts\n");

/***/ }),

/***/ "./src/geometry/intersection.ts":
/*!**************************************!*\
  !*** ./src/geometry/intersection.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Intersection: () => (/* binding */ Intersection)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n\nclass Intersection {\n    constructor(time, description, geometry, objectSubID, point, dist, screenSpaceDist) {\n        this.time = time;\n        this.description = description;\n        this.geometry = geometry;\n        this.objectSubID = objectSubID;\n        this.point = point;\n        this.dist = dist;\n        this.screenSpaceDist = screenSpaceDist;\n    }\n    transform(transform, ray) {\n        const newDirection = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec4.transformMat4(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec4.create(...ray.getDirection(), 0), transform);\n        const scale = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec4.length(newDirection);\n        this.time *= scale;\n        this.dist *= scale;\n        this.screenSpaceDist /= scale; // Maybe?\n        this.point = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.transformMat4(this.point, transform);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvaW50ZXJzZWN0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlFO0FBSTFELE1BQU0sWUFBWTtJQUd2QixZQUNTLElBQVksRUFDWixXQUFtQixFQUNuQixRQUF5QixFQUN6QixXQUFtQixFQUNuQixLQUFXLEVBQ1gsSUFBWSxFQUNaLGVBQXVCO1FBTnZCLFNBQUksR0FBSixJQUFJLENBQVE7UUFDWixnQkFBVyxHQUFYLFdBQVcsQ0FBUTtRQUNuQixhQUFRLEdBQVIsUUFBUSxDQUFpQjtRQUN6QixnQkFBVyxHQUFYLFdBQVcsQ0FBUTtRQUNuQixVQUFLLEdBQUwsS0FBSyxDQUFNO1FBQ1gsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUNaLG9CQUFlLEdBQWYsZUFBZSxDQUFRO0lBQzVCLENBQUM7SUFFRSxTQUFTLENBQUMsU0FBZSxFQUFFLEdBQVE7UUFFeEMsTUFBTSxZQUFZLEdBQVMsNkNBQUksQ0FBQyxhQUFhLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDaEcsTUFBTSxLQUFLLEdBQVcsNkNBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7UUFHaEQsSUFBSSxDQUFDLElBQUksSUFBSSxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLElBQUksSUFBSSxLQUFLLENBQUM7UUFFbkIsSUFBSSxDQUFDLGVBQWUsSUFBSSxLQUFLLENBQUMsQ0FBQyxTQUFTO1FBRXhDLElBQUksQ0FBQyxLQUFLLEdBQUcsNkNBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN6RCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9pbnRlcnNlY3Rpb24udHM/YWU5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzLCBWZWM0LCB2ZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcblxuZXhwb3J0IGNsYXNzIEludGVyc2VjdGlvbiB7XG5cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgdGltZTogbnVtYmVyLFxuICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIHB1YmxpYyBnZW9tZXRyeTogR2VvbWV0cnkgfCBudWxsLFxuICAgIHB1YmxpYyBvYmplY3RTdWJJRDogbnVtYmVyLFxuICAgIHB1YmxpYyBwb2ludDogVmVjMyxcbiAgICBwdWJsaWMgZGlzdDogbnVtYmVyLFxuICAgIHB1YmxpYyBzY3JlZW5TcGFjZURpc3Q6IG51bWJlclxuICApIHsgfVxuXG4gIHB1YmxpYyB0cmFuc2Zvcm0odHJhbnNmb3JtOiBNYXQ0LCByYXk6IFJheSk6IHZvaWQge1xuXG4gICAgY29uc3QgbmV3RGlyZWN0aW9uOiBWZWM0ID0gdmVjNC50cmFuc2Zvcm1NYXQ0KHZlYzQuY3JlYXRlKC4uLnJheS5nZXREaXJlY3Rpb24oKSwgMCksIHRyYW5zZm9ybSk7XG4gICAgY29uc3Qgc2NhbGU6IG51bWJlciA9IHZlYzQubGVuZ3RoKG5ld0RpcmVjdGlvbik7XG5cblxuICAgIHRoaXMudGltZSAqPSBzY2FsZTtcbiAgICB0aGlzLmRpc3QgKj0gc2NhbGU7XG5cbiAgICB0aGlzLnNjcmVlblNwYWNlRGlzdCAvPSBzY2FsZTsgLy8gTWF5YmU/XG5cbiAgICB0aGlzLnBvaW50ID0gdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMucG9pbnQsIHRyYW5zZm9ybSk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/intersection.ts\n");

/***/ }),

/***/ "./src/geometry/lineBoundingBoxHeirarchy.ts":
/*!**************************************************!*\
  !*** ./src/geometry/lineBoundingBoxHeirarchy.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LineBoundingBoxHeirarchy: () => (/* binding */ LineBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n\n\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\nclass LineBoundingBoxHeirarchyNode {\n    constructor(geometry, verts, indices, lines, depth = 0) {\n        this.geometry = geometry;\n        this.verts = verts;\n        this.indices = indices;\n        this.depth = depth;\n        this.setup(lines);\n    }\n    setup(lines) {\n        this.axis = this.depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        for (const line of lines) {\n            this.boundingBox.addVec3(this.verts[this.indices[line * 2]]);\n            this.boundingBox.addVec3(this.verts[this.indices[line * 2 + 1]]);\n        }\n        if (lines.length <= LineBoundingBoxHeirarchy.MAX_LINES_PER_LEAF) {\n            // leaf\n            this.lines = lines;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            // non leaf\n            this.lines = null;\n            let child1Lines = [];\n            let child2Lines = [];\n            for (const line of lines) {\n                const center = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(this.verts[this.indices[2 * line]], this.verts[this.indices[2 * line + 1]]), 0.5);\n                if (center[this.axis] < this.boundingBox.getCenter()[this.axis]) {\n                    child1Lines.push(line);\n                }\n                else {\n                    child2Lines.push(line);\n                }\n            }\n            if (child1Lines.length === 0 || child2Lines.length === 0) {\n                child1Lines = lines.slice(0, lines.length / 2);\n                child2Lines = lines.slice(lines.length / 2, -1);\n            }\n            this.child1 = new LineBoundingBoxHeirarchyNode(this.geometry, this.verts, this.indices, child1Lines, this.depth + 1);\n            this.child2 = new LineBoundingBoxHeirarchyNode(this.geometry, this.verts, this.indices, child2Lines, this.depth + 1);\n        }\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        if (frustum.containsBoundingBoxFully(this.boundingBox))\n            return this.getAllLines();\n        if (!frustum.intersectsBoundingBox(this.boundingBox))\n            return [];\n        if (this.isLeaf()) {\n            const res = [];\n            if (inclusive) {\n                for (const line of this.lines) {\n                    if (frustum.containsLinePartially(this.verts[this.indices[line * 2]], this.verts[this.indices[line * 2 + 1]])) {\n                        res.push(line);\n                    }\n                }\n            }\n            else {\n                for (const line of this.lines) {\n                    if (frustum.containsLineFully(this.verts[this.indices[line * 2]], this.verts[this.indices[line * 2 + 1]])) {\n                        res.push(line);\n                    }\n                }\n            }\n            return res;\n        }\n        else {\n            const res = this.child1.getWithinFrustumSub(frustum, inclusive);\n            res.push(...this.child2.getWithinFrustumSub(frustum, inclusive));\n            return res;\n        }\n    }\n    getAllLines() {\n        if (this.isLeaf()) {\n            return [...this.lines];\n        }\n        else {\n            const res = this.child1.getAllLines();\n            res.push(...this.child2.getAllLines());\n            return res;\n        }\n    }\n    isWithinFrustum(frustum, inclusive) {\n        if (frustum.containsBoundingBoxFully(this.boundingBox))\n            return true;\n        if (!frustum.intersectsBoundingBox(this.boundingBox))\n            return false;\n        if (this.isLeaf()) {\n            if (inclusive) {\n                for (const line of this.lines) {\n                    if (frustum.containsLinePartially(this.verts[this.indices[line * 2]], this.verts[this.indices[line * 2 + 1]])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n            else {\n                for (const line of this.lines) {\n                    if (!frustum.containsLineFully(this.verts[this.indices[line * 2]], this.verts[this.indices[line * 2 + 1]])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        }\n        else {\n            if (inclusive) {\n                return this.child1.isWithinFrustum(frustum, inclusive) || this.child2.isWithinFrustum(frustum, inclusive);\n            }\n            else {\n                return this.child1.isWithinFrustum(frustum, inclusive) && this.child2.isWithinFrustum(frustum, inclusive);\n            }\n        }\n    }\n    almostIntersect(ray, pixels) {\n        if (ray.almostIntersectBoundingBox(this.boundingBox, pixels) === null)\n            return null;\n        if (this.isLeaf()) {\n            // time, dist\n            let closestIntersection = null;\n            for (const line of this.lines) {\n                let intersection = ray.almostIntersectLine(this.geometry, line, this.verts[this.indices[line * 2]], this.verts[this.indices[line * 2 + 1]], pixels);\n                if (intersection !== null) {\n                    if (closestIntersection === null || intersection.screenSpaceDist < closestIntersection.screenSpaceDist) {\n                        closestIntersection = intersection;\n                    }\n                }\n            }\n            return closestIntersection;\n        }\n        else {\n            const t1 = this.child1.almostIntersect(ray, pixels);\n            const t2 = this.child2.almostIntersect(ray, pixels);\n            if (t1 === null)\n                return t2;\n            if (t2 === null)\n                return t1;\n            return (t1.time < t2.time) ? t1 : t2;\n        }\n    }\n    isLeaf() {\n        return this.lines !== null;\n    }\n    print() {\n        var _a, _b;\n        let str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.indices)\n            str += `${this.indices.length / 2}lines`;\n        else\n            str += \"node\";\n        console.log(str);\n        (_a = this.child1) === null || _a === void 0 ? void 0 : _a.print();\n        (_b = this.child2) === null || _b === void 0 ? void 0 : _b.print();\n    }\n}\nclass LineBoundingBoxHeirarchy {\n    constructor(geometry, verts, indices) {\n        this.geometry = geometry;\n        const lines = [];\n        for (let i = 0; i < indices.length / 2; i++) {\n            lines.push(i);\n        }\n        this.root = new LineBoundingBoxHeirarchyNode(this.geometry, verts, indices, lines);\n    }\n    print() {\n        console.log(\"========Line-BBH========\");\n        this.root.print();\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        frustum.transform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.inverse(this.geometry.getModelRecursive()));\n        const res = this.root.getWithinFrustumSub(frustum, inclusive);\n        frustum.transform(this.geometry.getModelRecursive());\n        return res;\n    }\n    almostIntersect(ray, pixels) {\n        const model = this.geometry.getModelRecursive();\n        const objectSpaceRay = _ray__WEBPACK_IMPORTED_MODULE_1__.Ray.transform(ray, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.inverse(model));\n        const res = this.root.almostIntersect(objectSpaceRay, pixels);\n        res === null || res === void 0 ? void 0 : res.transform(model, objectSpaceRay);\n        return res;\n    }\n    isWithinFrustum(frustum, inclusive) {\n        // BUG: some transforms cannot be inverted\n        frustum.transform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.inverse(this.geometry.getModelRecursive()));\n        const res = this.root.isWithinFrustum(frustum, inclusive);\n        frustum.transform(this.geometry.getModelRecursive());\n        return res;\n    }\n}\nLineBoundingBoxHeirarchy.MAX_LINES_PER_LEAF = 5;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbGluZUJvdW5kaW5nQm94SGVpcmFyY2h5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBcUQ7QUFDVDtBQUloQjtBQUU1QixJQUFLLElBSUo7QUFKRCxXQUFLLElBQUk7SUFDUCx5QkFBSztJQUNMLHlCQUFLO0lBQ0wseUJBQUs7QUFDUCxDQUFDLEVBSkksSUFBSSxLQUFKLElBQUksUUFJUjtBQUVELE1BQU0sNEJBQTRCO0lBUWhDLFlBQ1UsUUFBa0IsRUFDbEIsS0FBYSxFQUNiLE9BQWlCLEVBQ3pCLEtBQWUsRUFDUCxRQUFnQixDQUFDO1FBSmpCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsVUFBSyxHQUFMLEtBQUssQ0FBUTtRQUNiLFlBQU8sR0FBUCxPQUFPLENBQVU7UUFFakIsVUFBSyxHQUFMLEtBQUssQ0FBWTtRQUV6QixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3BCLENBQUM7SUFFTyxLQUFLLENBQUMsS0FBZTtRQUMzQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxxREFBVyxFQUFFLENBQUM7UUFDckMsS0FBSyxNQUFNLElBQUksSUFBSSxLQUFLLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2xFO1FBRUQsSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLHdCQUF3QixDQUFDLGtCQUFrQixFQUFFO1lBQy9ELE9BQU87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QWUsQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDbkYsR0FBRyxhQUFILEdBQUcsdUJBQUgsR0FBRyxDQUFFLFNBQVMsQ0FBQyxLQUFLLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDdEMsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDO0lBRU0sZUFBZSxDQUFDLE9BQWdCLEVBQUUsU0FBa0I7UUFDekQsMENBQTBDO1FBQzFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsNkNBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNuRSxNQUFNLEdBQUcsR0FBWSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDbkUsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQztRQUNyRCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O0FBeENzQiwyQ0FBa0IsR0FBRyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9saW5lQm91bmRpbmdCb3hIZWlyYXJjaHkudHM/MDQ5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuL2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBGcnVzdHVtIH0gZnJvbSBcIi4vZnJ1c3R1bVwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4vaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi9yYXlcIjtcblxuZW51bSBBeGlzIHtcbiAgWCA9IDAsXG4gIFkgPSAxLFxuICBaID0gMlxufVxuXG5jbGFzcyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlIHtcblxuICBwcml2YXRlIGxpbmVzITogbnVtYmVyW10gfCBudWxsO1xuICBwcml2YXRlIGNoaWxkMSE6IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUgfCBudWxsO1xuICBwcml2YXRlIGNoaWxkMiE6IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUgfCBudWxsO1xuICBwcml2YXRlIGJvdW5kaW5nQm94ITogQm91bmRpbmdCb3g7XG4gIHByaXZhdGUgYXhpcyE6IEF4aXM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBnZW9tZXRyeTogR2VvbWV0cnksXG4gICAgcHJpdmF0ZSB2ZXJ0czogVmVjM1tdLFxuICAgIHByaXZhdGUgaW5kaWNlczogbnVtYmVyW10sXG4gICAgbGluZXM6IG51bWJlcltdLFxuICAgIHByaXZhdGUgZGVwdGg6IG51bWJlciA9IDBcbiAgKSB7XG4gICAgdGhpcy5zZXR1cChsaW5lcyk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwKGxpbmVzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHRoaXMuYXhpcyA9IHRoaXMuZGVwdGggJSAzO1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIHRoaXMuYm91bmRpbmdCb3guYWRkVmVjMyh0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1tsaW5lICogMl1dKTtcbiAgICAgIHRoaXMuYm91bmRpbmdCb3guYWRkVmVjMyh0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1tsaW5lICogMiArIDFdXSk7XG4gICAgfVxuXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA8PSBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHkuTUFYX0xJTkVTX1BFUl9MRUFGKSB7XG4gICAgICAvLyBsZWFmXG4gICAgICB0aGlzLmxpbmVzID0gbGluZXM7XG4gICAgICB0aGlzLmNoaWxkMSA9IG51bGw7XG4gICAgICB0aGlzLmNoaWxkMiA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbiBsZWFmXG4gICAgICB0aGlzLmxpbmVzID0gbnVsbDtcblxuICAgICAgbGV0IGNoaWxkMUxpbmVzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgbGV0IGNoaWxkMkxpbmVzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICAgIGNvbnN0IGNlbnRlcjogVmVjMyA9IHZlYzMuc2NhbGUoXG4gICAgICAgICAgdmVjMy5hZGQoXG4gICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1syICogbGluZV1dLFxuICAgICAgICAgICAgdGhpcy52ZXJ0c1t0aGlzLmluZGljZXNbMiAqIGxpbmUgKyAxXV0pLFxuICAgICAgICAgIDAuNVxuICAgICAgICApO1xuICAgICAgICBpZiAoY2VudGVyW3RoaXMuYXhpc10gPCB0aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcigpW3RoaXMuYXhpc10pIHtcbiAgICAgICAgICBjaGlsZDFMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkMkxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGlsZDFMaW5lcy5sZW5ndGggPT09IDAgfHwgY2hpbGQyTGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNoaWxkMUxpbmVzID0gbGluZXMuc2xpY2UoMCwgbGluZXMubGVuZ3RoIC8gMik7XG4gICAgICAgIGNoaWxkMkxpbmVzID0gbGluZXMuc2xpY2UobGluZXMubGVuZ3RoIC8gMiwgLTEpO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGlsZDEgPSBuZXcgTGluZUJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh0aGlzLmdlb21ldHJ5LCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMsIGNoaWxkMUxpbmVzLCB0aGlzLmRlcHRoICsgMSk7XG4gICAgICB0aGlzLmNoaWxkMiA9IG5ldyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHRoaXMuZ2VvbWV0cnksIHRoaXMudmVydHMsIHRoaXMuaW5kaWNlcywgY2hpbGQyTGluZXMsIHRoaXMuZGVwdGggKyAxKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtOiBGcnVzdHVtLCBpbmNsdXNpdmU6IGJvb2xlYW4pOiBudW1iZXJbXSB7XG4gICAgaWYgKGZydXN0dW0uY29udGFpbnNCb3VuZGluZ0JveEZ1bGx5KHRoaXMuYm91bmRpbmdCb3gpKSByZXR1cm4gdGhpcy5nZXRBbGxMaW5lcygpO1xuICAgIGlmICghZnJ1c3R1bS5pbnRlcnNlY3RzQm91bmRpbmdCb3godGhpcy5ib3VuZGluZ0JveCkpIHJldHVybiBbXTtcblxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICBjb25zdCByZXM6IG51bWJlcltdID0gW107XG4gICAgICBpZiAoaW5jbHVzaXZlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiB0aGlzLmxpbmVzISkge1xuICAgICAgICAgIGlmIChmcnVzdHVtLmNvbnRhaW5zTGluZVBhcnRpYWxseShcbiAgICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzW2xpbmUgKiAyXV0sXG4gICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1tsaW5lICogMiArIDFdXVxuICAgICAgICAgICkpIHtcbiAgICAgICAgICAgIHJlcy5wdXNoKGxpbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHRoaXMubGluZXMhKSB7XG4gICAgICAgICAgaWYgKGZydXN0dW0uY29udGFpbnNMaW5lRnVsbHkoXG4gICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1tsaW5lICogMl1dLFxuICAgICAgICAgICAgdGhpcy52ZXJ0c1t0aGlzLmluZGljZXNbbGluZSAqIDIgKyAxXV1cbiAgICAgICAgICApKSB7XG4gICAgICAgICAgICByZXMucHVzaChsaW5lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlczogbnVtYmVyW10gPSB0aGlzLmNoaWxkMSEuZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgICAgcmVzLnB1c2goLi4udGhpcy5jaGlsZDIhLmdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bSwgaW5jbHVzaXZlKSk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgfVxuXG4gIGdldEFsbExpbmVzKCk6IG51bWJlcltdIHtcbiAgICBpZiAodGhpcy5pc0xlYWYoKSkge1xuICAgICAgcmV0dXJuIFsuLi50aGlzLmxpbmVzIV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlcyA9IHRoaXMuY2hpbGQxIS5nZXRBbGxMaW5lcygpO1xuICAgICAgcmVzLnB1c2goLi4udGhpcy5jaGlsZDIhLmdldEFsbExpbmVzKCkpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaXNXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmIChmcnVzdHVtLmNvbnRhaW5zQm91bmRpbmdCb3hGdWxseSh0aGlzLmJvdW5kaW5nQm94KSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKCFmcnVzdHVtLmludGVyc2VjdHNCb3VuZGluZ0JveCh0aGlzLmJvdW5kaW5nQm94KSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICBpZiAoaW5jbHVzaXZlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiB0aGlzLmxpbmVzISkge1xuICAgICAgICAgIGlmIChmcnVzdHVtLmNvbnRhaW5zTGluZVBhcnRpYWxseShcbiAgICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzW2xpbmUgKiAyXV0sXG4gICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1tsaW5lICogMiArIDFdXVxuICAgICAgICAgICkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGhpcy5saW5lcyEpIHtcbiAgICAgICAgICBpZiAoIWZydXN0dW0uY29udGFpbnNMaW5lRnVsbHkoXG4gICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1tsaW5lICogMl1dLFxuICAgICAgICAgICAgdGhpcy52ZXJ0c1t0aGlzLmluZGljZXNbbGluZSAqIDIgKyAxXV1cbiAgICAgICAgICApKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW5jbHVzaXZlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkMSEuaXNXaXRoaW5GcnVzdHVtKGZydXN0dW0sIGluY2x1c2l2ZSkgfHwgdGhpcy5jaGlsZDIhLmlzV2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGQxIS5pc1dpdGhpbkZydXN0dW0oZnJ1c3R1bSwgaW5jbHVzaXZlKSAmJiB0aGlzLmNoaWxkMiEuaXNXaXRoaW5GcnVzdHVtKGZydXN0dW0sIGluY2x1c2l2ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFsbW9zdEludGVyc2VjdChyYXk6IFJheSwgcGl4ZWxzOiBudW1iZXIpOiBJbnRlcnNlY3Rpb24gfCBudWxsIHtcblxuICAgIGlmIChyYXkuYWxtb3N0SW50ZXJzZWN0Qm91bmRpbmdCb3godGhpcy5ib3VuZGluZ0JveCwgcGl4ZWxzKSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAodGhpcy5pc0xlYWYoKSkge1xuICAgICAgLy8gdGltZSwgZGlzdFxuICAgICAgbGV0IGNsb3Nlc3RJbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbiB8IG51bGwgPSBudWxsO1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHRoaXMubGluZXMhKSB7XG4gICAgICAgIGxldCBpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbiB8IG51bGwgPSByYXkuYWxtb3N0SW50ZXJzZWN0TGluZSh0aGlzLmdlb21ldHJ5LCBsaW5lLFxuICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzW2xpbmUgKiAyXV0sXG4gICAgICAgICAgdGhpcy52ZXJ0c1t0aGlzLmluZGljZXNbbGluZSAqIDIgKyAxXV0sXG4gICAgICAgICAgcGl4ZWxzKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmIChjbG9zZXN0SW50ZXJzZWN0aW9uID09PSBudWxsIHx8IGludGVyc2VjdGlvbi5zY3JlZW5TcGFjZURpc3QgPCBjbG9zZXN0SW50ZXJzZWN0aW9uLnNjcmVlblNwYWNlRGlzdCkge1xuICAgICAgICAgICAgY2xvc2VzdEludGVyc2VjdGlvbiA9IGludGVyc2VjdGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjbG9zZXN0SW50ZXJzZWN0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0MSA9IHRoaXMuY2hpbGQxIS5hbG1vc3RJbnRlcnNlY3QocmF5LCBwaXhlbHMpO1xuICAgICAgY29uc3QgdDIgPSB0aGlzLmNoaWxkMiEuYWxtb3N0SW50ZXJzZWN0KHJheSwgcGl4ZWxzKTtcbiAgICAgIGlmICh0MSA9PT0gbnVsbCkgcmV0dXJuIHQyO1xuICAgICAgaWYgKHQyID09PSBudWxsKSByZXR1cm4gdDE7XG4gICAgICByZXR1cm4gKHQxLnRpbWUgPCB0Mi50aW1lKSA/IHQxIDogdDI7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzTGVhZigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5saW5lcyAhPT0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBwcmludCgpOiB2b2lkIHtcbiAgICBsZXQgc3RyOiBzdHJpbmcgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kZXB0aDsgaSsrKSBzdHIgKz0gXCItPlwiO1xuICAgIGlmICh0aGlzLmluZGljZXMpIHN0ciArPSBgJHt0aGlzLmluZGljZXMubGVuZ3RoIC8gMn1saW5lc2A7XG4gICAgZWxzZSBzdHIgKz0gXCJub2RlXCI7XG4gICAgY29uc29sZS5sb2coc3RyKTtcbiAgICB0aGlzLmNoaWxkMT8ucHJpbnQoKTtcbiAgICB0aGlzLmNoaWxkMj8ucHJpbnQoKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBjbGFzcyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHkge1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTUFYX0xJTkVTX1BFUl9MRUFGID0gNTtcblxuICBwcml2YXRlIHJvb3Q6IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBnZW9tZXRyeTogR2VvbWV0cnksXG4gICAgdmVydHM6IFZlYzNbXSxcbiAgICBpbmRpY2VzOiBudW1iZXJbXSkge1xuICAgIGNvbnN0IGxpbmVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGggLyAyOyBpKyspIHsgbGluZXMucHVzaChpKTsgfVxuICAgIHRoaXMucm9vdCA9IG5ldyBMaW5lQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHRoaXMuZ2VvbWV0cnksIHZlcnRzLCBpbmRpY2VzLCBsaW5lcyk7XG4gIH1cblxuICBwdWJsaWMgcHJpbnQoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCI9PT09PT09PUxpbmUtQkJIPT09PT09PT1cIik7XG4gICAgdGhpcy5yb290LnByaW50KCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtOiBGcnVzdHVtLCBpbmNsdXNpdmU6IGJvb2xlYW4pOiBudW1iZXJbXSB7XG4gICAgZnJ1c3R1bS50cmFuc2Zvcm0obWF0NC5pbnZlcnNlKHRoaXMuZ2VvbWV0cnkuZ2V0TW9kZWxSZWN1cnNpdmUoKSkpO1xuICAgIGNvbnN0IHJlczogbnVtYmVyW10gPSB0aGlzLnJvb3QuZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgIGZydXN0dW0udHJhbnNmb3JtKHRoaXMuZ2VvbWV0cnkuZ2V0TW9kZWxSZWN1cnNpdmUoKSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG5cbiAgcHVibGljIGFsbW9zdEludGVyc2VjdChyYXk6IFJheSwgcGl4ZWxzOiBudW1iZXIpOiBJbnRlcnNlY3Rpb24gfCBudWxsIHtcbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2VvbWV0cnkuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBjb25zdCBvYmplY3RTcGFjZVJheTogUmF5ID0gUmF5LnRyYW5zZm9ybShyYXksIG1hdDQuaW52ZXJzZShtb2RlbCkpO1xuICAgIGNvbnN0IHJlczogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IHRoaXMucm9vdC5hbG1vc3RJbnRlcnNlY3Qob2JqZWN0U3BhY2VSYXksIHBpeGVscyk7XG4gICAgcmVzPy50cmFuc2Zvcm0obW9kZWwsIG9iamVjdFNwYWNlUmF5KTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHVibGljIGlzV2l0aGluRnJ1c3R1bShmcnVzdHVtOiBGcnVzdHVtLCBpbmNsdXNpdmU6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICAvLyBCVUc6IHNvbWUgdHJhbnNmb3JtcyBjYW5ub3QgYmUgaW52ZXJ0ZWRcbiAgICBmcnVzdHVtLnRyYW5zZm9ybShtYXQ0LmludmVyc2UodGhpcy5nZW9tZXRyeS5nZXRNb2RlbFJlY3Vyc2l2ZSgpKSk7XG4gICAgY29uc3QgcmVzOiBib29sZWFuID0gdGhpcy5yb290LmlzV2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgIGZydXN0dW0udHJhbnNmb3JtKHRoaXMuZ2VvbWV0cnkuZ2V0TW9kZWxSZWN1cnNpdmUoKSk7XG4gICAgcmV0dXJuIHJlcztcbiAgfVxufVxuXG5cblxuXG5cblxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/lineBoundingBoxHeirarchy.ts\n");

/***/ }),

/***/ "./src/geometry/mesh.ts":
/*!******************************!*\
  !*** ./src/geometry/mesh.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mesh: () => (/* binding */ Mesh)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderMesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renderMesh */ \"./src/render/renderMesh.ts\");\n/* harmony import */ var _utils_clone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/clone */ \"./src/utils/clone.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _meshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./meshBoundingBoxHeirarchy */ \"./src/geometry/meshBoundingBoxHeirarchy.ts\");\n\n\n\n\n\n\n\nclass Mesh extends _geometry__WEBPACK_IMPORTED_MODULE_4__.Geometry {\n    constructor(parent, verts, normals, indices, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.identity(), material = null, constantScreenSpaceSize = false) {\n        super(parent, model, material);\n        this.verts = verts;\n        this.normals = normals;\n        this.indices = indices;\n        this.subSelection = [];\n        this.subSelectionCount = 0;\n        for (let i = 0; i < this.indices.length / 3; i++) {\n            this.subSelection.push(false);\n        }\n        this.renderMesh = new _render_renderMesh__WEBPACK_IMPORTED_MODULE_1__.RenderMesh(this, this.verts, this.normals, this.indices, this.subSelection, constantScreenSpaceSize);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderMesh(this.renderMesh);\n        this.boundingBoxHeirarchy = new _meshBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_5__.MeshBoundingBoxHeirarchy(this, this.verts, this.indices);\n    }\n    addToSubSelection(...subIDs) {\n        for (const subID of subIDs) {\n            if (!this.subSelection[subID]) {\n                this.subSelection[subID] = true;\n                this.subSelectionCount++;\n            }\n        }\n        this.renderMesh.updateSubSelection(this.subSelection);\n    }\n    removeFromSubSelection(...subIDs) {\n        for (const subID of subIDs) {\n            if (this.subSelection[subID]) {\n                this.subSelection[subID] = false;\n                this.subSelectionCount--;\n            }\n        }\n        this.renderMesh.updateSubSelection(this.subSelection);\n    }\n    isSubSelected(subID) {\n        return this.subSelection[subID];\n    }\n    hasSubSelection() {\n        return this.subSelectionCount > 0;\n    }\n    clearSubSelection() {\n        this.subSelection.map(() => { return false; });\n        this.renderMesh.updateSubSelection(this.subSelection);\n    }\n    getSubSelectionBoundingBox() {\n        return new _boundingBox__WEBPACK_IMPORTED_MODULE_3__.BoundingBox();\n        // TODO: \n    }\n    onSelectionMoved() {\n        // TODO:\n    }\n    bakeSelectionTransform() {\n        // TODO:\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        alert(\"todo mesh\");\n        return [];\n    }\n    showControls(on) {\n        alert(\"todo mesh\");\n    }\n    setConstantScreenSpaceSize(on) {\n        this.renderMesh.setConstantScreenSpaceSize(on);\n    }\n    clone() {\n        return new Mesh(this.parent, (0,_utils_clone__WEBPACK_IMPORTED_MODULE_2__.cloneVec3List)(this.verts), (0,_utils_clone__WEBPACK_IMPORTED_MODULE_2__.cloneVec3List)(this.normals), [...this.indices], wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.mat4.clone(this.model), this.materialName);\n    }\n    delete() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeMesh(this.renderMesh);\n    }\n    getVerts() {\n        return this.verts;\n    }\n    getIndices() {\n        return this.indices;\n    }\n    intersect(ray, sub) {\n        if (this.isHidden())\n            return null;\n        return this.boundingBoxHeirarchy.firstIntersection(ray);\n    }\n    getTypeName() {\n        return \"Mesh\";\n    }\n    isWithinFrustum(frustum, inclusive) {\n        if (this.isHidden())\n            return false;\n        return this.boundingBoxHeirarchy.isWithinFrustum(frustum, inclusive);\n    }\n    getBoundingBox() {\n        const bb = new _boundingBox__WEBPACK_IMPORTED_MODULE_3__.BoundingBox();\n        const model = this.getModelRecursive();\n        this.verts.forEach((vert) => {\n            bb.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_6__.vec3.transformMat4(vert, model));\n        });\n        return bb;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ2pDLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFZSxXQUFXO1FBQ3pCLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxlQUFlLENBQUMsT0FBZ0IsRUFBRSxTQUFrQjtRQUN6RCxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFBRSxPQUFPLEtBQUssQ0FBQztRQUNsQyxPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFFTSxjQUFjO1FBQ25CLE1BQU0sRUFBRSxHQUFnQixJQUFJLHFEQUFXLEVBQUUsQ0FBQztRQUMxQyxNQUFNLEtBQUssR0FBUyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUM3QyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVUsRUFBRSxFQUFFO1lBQ2hDLEVBQUUsQ0FBQyxPQUFPLENBQUMsNkNBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L21lc2gudHM/YzA0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYmtkZjIgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJlbmRlck1lc2ggfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlck1lc2hcIjtcbmltcG9ydCB7IGNsb25lVmVjM0xpc3QgfSBmcm9tIFwiLi4vdXRpbHMvY2xvbmVcIjtcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSBcIi4vYm91bmRpbmdCb3hcIjtcbmltcG9ydCB7IEZydXN0dW0gfSBmcm9tIFwiLi9mcnVzdHVtXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi9pbnRlcnNlY3Rpb25cIjtcbmltcG9ydCB7IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeSB9IGZyb20gXCIuL21lc2hCb3VuZGluZ0JveEhlaXJhcmNoeVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cblxuXG5leHBvcnQgY2xhc3MgTWVzaCBleHRlbmRzIEdlb21ldHJ5IHtcblxuICBwcml2YXRlIHJlbmRlck1lc2g6IFJlbmRlck1lc2g7XG4gIHByaXZhdGUgYm91bmRpbmdCb3hIZWlyYXJjaHk6IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeTtcbiAgcHJpdmF0ZSBzdWJTZWxlY3Rpb246IGJvb2xlYW5bXTtcbiAgcHJpdmF0ZSBzdWJTZWxlY3Rpb25Db3VudDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsLFxuICAgIHByaXZhdGUgdmVydHM6IFZlYzNbXSxcbiAgICBwcml2YXRlIG5vcm1hbHM6IFZlYzNbXSxcbiAgICBwcml2YXRlIGluZGljZXM6IG51bWJlcltdLFxuICAgIG1vZGVsOiBNYXQ0ID0gbWF0NC5pZGVudGl0eSgpLFxuICAgIG1hdGVyaWFsOiBNYXRlcmlhbE5hbWUgfCBudWxsID0gbnVsbCxcbiAgICBjb25zdGFudFNjcmVlblNwYWNlU2l6ZTogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIHN1cGVyKHBhcmVudCwgbW9kZWwsIG1hdGVyaWFsKTtcblxuICAgIHRoaXMuc3ViU2VsZWN0aW9uID0gW107XG4gICAgdGhpcy5zdWJTZWxlY3Rpb25Db3VudCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7XG4gICAgICB0aGlzLnN1YlNlbGVjdGlvbi5wdXNoKGZhbHNlKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlck1lc2ggPSBuZXcgUmVuZGVyTWVzaCh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLm5vcm1hbHMsIHRoaXMuaW5kaWNlcywgdGhpcy5zdWJTZWxlY3Rpb24sIGNvbnN0YW50U2NyZWVuU3BhY2VTaXplKTtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZFJlbmRlck1lc2godGhpcy5yZW5kZXJNZXNoKTtcbiAgICB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5ID0gbmV3IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLCB0aGlzLnZlcnRzLCB0aGlzLmluZGljZXMpO1xuICB9XG5cbiAgcHVibGljIGFkZFRvU3ViU2VsZWN0aW9uKC4uLnN1YklEczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHN1YklEIG9mIHN1YklEcykge1xuICAgICAgaWYgKCF0aGlzLnN1YlNlbGVjdGlvbltzdWJJRF0pIHtcbiAgICAgICAgdGhpcy5zdWJTZWxlY3Rpb25bc3ViSURdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdWJTZWxlY3Rpb25Db3VudCsrO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlck1lc2gudXBkYXRlU3ViU2VsZWN0aW9uKHRoaXMuc3ViU2VsZWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVGcm9tU3ViU2VsZWN0aW9uKC4uLnN1YklEczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHN1YklEIG9mIHN1YklEcykge1xuICAgICAgaWYgKHRoaXMuc3ViU2VsZWN0aW9uW3N1YklEXSkge1xuICAgICAgICB0aGlzLnN1YlNlbGVjdGlvbltzdWJJRF0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdWJTZWxlY3Rpb25Db3VudC0tO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlck1lc2gudXBkYXRlU3ViU2VsZWN0aW9uKHRoaXMuc3ViU2VsZWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1N1YlNlbGVjdGVkKHN1YklEOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdWJTZWxlY3Rpb25bc3ViSURdO1xuICB9XG5cbiAgcHVibGljIGhhc1N1YlNlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdWJTZWxlY3Rpb25Db3VudCA+IDA7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJTdWJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5zdWJTZWxlY3Rpb24ubWFwKCgpID0+IHsgcmV0dXJuIGZhbHNlOyB9KTtcbiAgICB0aGlzLnJlbmRlck1lc2gudXBkYXRlU3ViU2VsZWN0aW9uKHRoaXMuc3ViU2VsZWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdWJTZWxlY3Rpb25Cb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZGluZ0JveCgpO1xuICAgIC8vIFRPRE86IFxuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uTW92ZWQoKTogdm9pZCB7XG4gICAgLy8gVE9ETzpcbiAgfVxuXG4gIHB1YmxpYyBiYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk6IHZvaWQge1xuICAgIC8vIFRPRE86XG4gIH1cblxuICBwdWJsaWMgZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtOiBGcnVzdHVtLCBpbmNsdXNpdmU6IGJvb2xlYW4pOiBudW1iZXJbXSB7XG4gICAgYWxlcnQoXCJ0b2RvIG1lc2hcIik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcHVibGljIHNob3dDb250cm9scyhvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIGFsZXJ0KFwidG9kbyBtZXNoXCIpO1xuICB9XG5cbiAgcHVibGljIHNldENvbnN0YW50U2NyZWVuU3BhY2VTaXplKG9uOiBib29sZWFuKSB7XG4gICAgdGhpcy5yZW5kZXJNZXNoLnNldENvbnN0YW50U2NyZWVuU3BhY2VTaXplKG9uKTtcbiAgfVxuXG4gIHB1YmxpYyBjbG9uZSgpOiBHZW9tZXRyeSB7XG4gICAgcmV0dXJuIG5ldyBNZXNoKHRoaXMucGFyZW50LCBjbG9uZVZlYzNMaXN0KHRoaXMudmVydHMpLCBjbG9uZVZlYzNMaXN0KHRoaXMubm9ybWFscyksIFsuLi50aGlzLmluZGljZXNdLCBtYXQ0LmNsb25lKHRoaXMubW9kZWwpLCB0aGlzLm1hdGVyaWFsTmFtZSk7XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTWVzaCh0aGlzLnJlbmRlck1lc2gpO1xuICB9XG5cbiAgcHVibGljIGdldFZlcnRzKCk6IFZlYzNbXSB7XG4gICAgcmV0dXJuIHRoaXMudmVydHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5kaWNlcygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuaW5kaWNlcztcbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3QocmF5OiBSYXksIHN1YjogYm9vbGVhbik6IEludGVyc2VjdGlvbiB8IG51bGwge1xuICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5LmZpcnN0SW50ZXJzZWN0aW9uKHJheSk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0VHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJNZXNoXCI7XG4gIH1cblxuICBwdWJsaWMgaXNXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5ib3VuZGluZ0JveEhlaXJhcmNoeS5pc1dpdGhpbkZydXN0dW0oZnJ1c3R1bSwgaW5jbHVzaXZlKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgY29uc3QgYmI6IEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgdGhpcy52ZXJ0cy5mb3JFYWNoKCh2ZXJ0OiBWZWMzKSA9PiB7XG4gICAgICBiYi5hZGRWZWMzKHZlYzMudHJhbnNmb3JtTWF0NCh2ZXJ0LCBtb2RlbCkpO1xuICAgIH0pO1xuICAgIHJldHVybiBiYjtcbiAgfVxuXG59XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/mesh.ts\n");

/***/ }),

/***/ "./src/geometry/meshBoundingBoxHeirarchy.ts":
/*!**************************************************!*\
  !*** ./src/geometry/meshBoundingBoxHeirarchy.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MeshBoundingBoxHeirarchy: () => (/* binding */ MeshBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _intersection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./intersection */ \"./src/geometry/intersection.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n\n\n\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\nclass MeshBoundingBoxHeirarchyNode {\n    constructor(mesh, verts, indices, triangles, depth = 0) {\n        this.mesh = mesh;\n        this.verts = verts;\n        this.indices = indices;\n        this.depth = depth;\n        this.setup(triangles);\n    }\n    setup(triangles) {\n        this.axis = this.depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        for (const tri of triangles) {\n            this.boundingBox.addVec3(this.verts[this.indices[tri * 3]]);\n            this.boundingBox.addVec3(this.verts[this.indices[tri * 3 + 1]]);\n            this.boundingBox.addVec3(this.verts[this.indices[tri * 3 + 2]]);\n        }\n        if (triangles.length <= MeshBoundingBoxHeirarchy.MAX_TRIS_PER_LEAF) {\n            // leaf\n            this.triangles = triangles;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            // non leaf\n            this.triangles = null;\n            var child1Tris = [];\n            var child2Tris = [];\n            for (const tri of triangles) {\n                const center = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.verts[this.indices[tri * 3]], wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.verts[this.indices[tri * 3 + 1]], this.verts[this.indices[tri * 3 + 2]])), 1 / 3);\n                if (center[this.axis] < this.boundingBox.getCenter()[this.axis]) {\n                    child1Tris.push(tri);\n                }\n                else {\n                    child2Tris.push(tri);\n                }\n            }\n            if (child1Tris.length === 0 || child2Tris.length === 0) {\n                child1Tris = triangles.slice(0, triangles.length / 2);\n                child2Tris = triangles.slice(triangles.length / 2, -1);\n            }\n            this.child1 = new MeshBoundingBoxHeirarchyNode(this.mesh, this.verts, this.indices, child1Tris, this.depth + 1);\n            this.child2 = new MeshBoundingBoxHeirarchyNode(this.mesh, this.verts, this.indices, child2Tris, this.depth + 1);\n        }\n    }\n    isWithinFrustum(frustum, inclusive) {\n        if (frustum.containsBoundingBoxFully(this.boundingBox))\n            return true;\n        if (!frustum.intersectsBoundingBox(this.boundingBox))\n            return false;\n        if (this.isLeaf()) {\n            if (inclusive) {\n                for (const tri of this.triangles) {\n                    if (frustum.containsTriangle(this.verts[this.indices[tri * 3]], this.verts[this.indices[tri * 3 + 1]], this.verts[this.indices[tri * 3 + 2]], inclusive)) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n            else {\n                for (let tri of this.triangles) {\n                    if (!frustum.containsTriangle(this.verts[this.indices[tri * 3]], this.verts[this.indices[tri * 3 + 1]], this.verts[this.indices[tri * 3 + 2]], inclusive)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        }\n        else {\n            if (inclusive) {\n                return this.child1.isWithinFrustum(frustum, inclusive) || this.child2.isWithinFrustum(frustum, inclusive);\n            }\n            else {\n                return this.child1.isWithinFrustum(frustum, inclusive) && this.child2.isWithinFrustum(frustum, inclusive);\n            }\n        }\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        if (frustum.containsBoundingBoxFully(this.boundingBox))\n            return this.getAllTris();\n        if (!frustum.intersectsBoundingBox(this.boundingBox))\n            return [];\n        if (this.isLeaf()) {\n            const res = [];\n            for (const tri of this.triangles) {\n                if (frustum.containsTriangle(this.verts[this.indices[tri * 3]], this.verts[this.indices[tri * 3 + 1]], this.verts[this.indices[tri * 3 + 2]], inclusive)) {\n                    res.push(tri);\n                }\n            }\n            return res;\n        }\n        else {\n            const res = this.child1.getWithinFrustumSub(frustum, inclusive);\n            res.push(...this.child2.getWithinFrustumSub(frustum, inclusive));\n            return res;\n        }\n    }\n    getAllTris() {\n        if (this.isLeaf()) {\n            return [...this.triangles];\n        }\n        else {\n            const res = this.child1.getAllTris();\n            res.push(...this.child2.getAllTris());\n            return res;\n        }\n    }\n    intersect(ray) {\n        if (ray.intersectBoundingBox(this.boundingBox) === null)\n            return null;\n        if (this.isLeaf()) {\n            var res = null;\n            var subID = null;\n            for (const tri of this.triangles) {\n                var t = ray.intersectTriangle(this.verts[this.indices[tri * 3]], this.verts[this.indices[tri * 3 + 1]], this.verts[this.indices[tri * 3 + 2]]);\n                if (t !== null) {\n                    if (res === null || t < res) {\n                        res = t;\n                        subID = tri;\n                    }\n                }\n            }\n            if (res == null)\n                return res;\n            return new _intersection__WEBPACK_IMPORTED_MODULE_1__.Intersection(res, \"mesh\", this.mesh, subID, ray.at(res), 0, 0);\n        }\n        else {\n            const i1 = this.child1.intersect(ray);\n            const i2 = this.child2.intersect(ray);\n            if (i1 === null)\n                return i2;\n            if (i2 === null)\n                return i1;\n            return (i1.time < i2.time) ? i1 : i2;\n        }\n    }\n    isLeaf() {\n        return this.triangles !== null;\n    }\n    print() {\n        var _a, _b;\n        let str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.triangles)\n            str += `${this.triangles.length / 3}triangles`;\n        else\n            str += \"node\";\n        console.log(str);\n        (_a = this.child1) === null || _a === void 0 ? void 0 : _a.print();\n        (_b = this.child2) === null || _b === void 0 ? void 0 : _b.print();\n    }\n}\nclass MeshBoundingBoxHeirarchy {\n    constructor(mesh, verts, indices) {\n        this.mesh = mesh;\n        const triangles = [];\n        for (let i = 0; i < indices.length; i += 3) {\n            triangles.push(i / 3);\n        }\n        this.root = new MeshBoundingBoxHeirarchyNode(this.mesh, verts, indices, triangles);\n    }\n    print() {\n        console.log(\"========Mesh-BBH========\");\n        this.root.print();\n    }\n    firstIntersection(ray) {\n        var model = this.mesh.getModelRecursive();\n        const objectSpaceRay = _ray__WEBPACK_IMPORTED_MODULE_2__.Ray.transform(ray, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.inverse(model));\n        const res = this.root.intersect(objectSpaceRay);\n        res === null || res === void 0 ? void 0 : res.transform(model, objectSpaceRay);\n        return res;\n    }\n    isWithinFrustum(frustum, inclusive) {\n        // BUG: some transforms cannot be inverted\n        frustum.transform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.inverse(this.mesh.getModelRecursive()));\n        const res = this.root.isWithinFrustum(frustum, inclusive);\n        frustum.transform(this.mesh.getModelRecursive());\n        return res;\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        // BUG: some transforms cannot be inverted\n        frustum.transform(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.inverse(this.mesh.getModelRecursive()));\n        const res = this.root.getWithinFrustumSub(frustum, inclusive);\n        frustum.transform(this.mesh.getModelRecursive());\n        return res;\n    }\n}\nMeshBoundingBoxHeirarchy.MAX_TRIS_PER_LEAF = 5;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBQ1Q7QUFHRTtBQUNsQjtBQUU1QixJQUFLLElBSUo7QUFKRCxXQUFLLElBQUk7SUFDUCx5QkFBSztJQUNMLHlCQUFLO0lBQ0wseUJBQUs7QUFDUCxDQUFDLEVBSkksSUFBSSxLQUFKLElBQUksUUFJUjtBQUVELE1BQU0sNEJBQTRCO0lBUWhDLFlBQ1UsSUFBYyxFQUNkLEtBQWEsRUFDYixPQUFpQixFQUN6QixTQUFtQixFQUNYLFFBQWdCLENBQUM7UUFKakIsU0FBSSxHQUFKLElBQUksQ0FBVTtRQUNkLFVBQUssR0FBTCxLQUFLLENBQVE7UUFDYixZQUFPLEdBQVAsT0FBTyxDQUFVO1FBRWpCLFVBQUssR0FBTCxLQUFLLENBQVk7UUFFekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN4QixDQUFDO0lBRU8sS0FBSyxDQUFDLFNBQW1CO1FBRy9CLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLHFEQUFXLEVBQUUsQ0FBQztRQUVyQyxLQUFLLE1BQU0sR0FBRyxJQUFJLFNBQVMsRUFBRTtZQUMzQixJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1RCxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMs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dW5kaW5nQm94SGVpcmFyY2h5LnRzPzY4MWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgbWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgRnJ1c3R1bSB9IGZyb20gXCIuL2ZydXN0dW1cIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuL2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cbmVudW0gQXhpcyB7XG4gIFggPSAwLFxuICBZID0gMSxcbiAgWiA9IDIsXG59XG5cbmNsYXNzIE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUge1xuXG4gIHByaXZhdGUgdHJpYW5nbGVzITogbnVtYmVyW10gfCBudWxsO1xuICBwcml2YXRlIGNoaWxkMSE6IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUgfCBudWxsO1xuICBwcml2YXRlIGNoaWxkMiE6IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUgfCBudWxsO1xuICBwcml2YXRlIGJvdW5kaW5nQm94ITogQm91bmRpbmdCb3g7XG4gIHByaXZhdGUgYXhpcyE6IEF4aXM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBtZXNoOiBHZW9tZXRyeSxcbiAgICBwcml2YXRlIHZlcnRzOiBWZWMzW10sXG4gICAgcHJpdmF0ZSBpbmRpY2VzOiBudW1iZXJbXSxcbiAgICB0cmlhbmdsZXM6IG51bWJlcltdLFxuICAgIHByaXZhdGUgZGVwdGg6IG51bWJlciA9IDBcbiAgKSB7XG4gICAgdGhpcy5zZXR1cCh0cmlhbmdsZXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cCh0cmlhbmdsZXM6IG51bWJlcltdKTogdm9pZCB7XG5cblxuICAgIHRoaXMuYXhpcyA9IHRoaXMuZGVwdGggJSAzO1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcblxuICAgIGZvciAoY29uc3QgdHJpIG9mIHRyaWFuZ2xlcykge1xuICAgICAgdGhpcy5ib3VuZGluZ0JveC5hZGRWZWMzKHRoaXMudmVydHNbdGhpcy5pbmRpY2VzW3RyaSAqIDNdXSk7XG4gICAgICB0aGlzLmJvdW5kaW5nQm94LmFkZFZlYzModGhpcy52ZXJ0c1t0aGlzLmluZGljZXNbdHJpICogMyArIDFdXSk7XG4gICAgICB0aGlzLmJvdW5kaW5nQm94LmFkZFZlYzModGhpcy52ZXJ0c1t0aGlzLmluZGljZXNbdHJpICogMyArIDJdXSk7XG4gICAgfVxuXG4gICAgaWYgKHRyaWFuZ2xlcy5sZW5ndGggPD0gTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Lk1BWF9UUklTX1BFUl9MRUFGKSB7XG4gICAgICAvLyBsZWFmXG4gICAgICB0aGlzLnRyaWFuZ2xlcyA9IHRyaWFuZ2xlcztcbiAgICAgIHRoaXMuY2hpbGQxID0gbnVsbDtcbiAgICAgIHRoaXMuY2hpbGQyID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uIGxlYWZcbiAgICAgIHRoaXMudHJpYW5nbGVzID0gbnVsbDtcbiAgICAgIHZhciBjaGlsZDFUcmlzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgdmFyIGNoaWxkMlRyaXM6IG51bWJlcltdID0gW107XG4gICAgICBmb3IgKGNvbnN0IHRyaSBvZiB0cmlhbmdsZXMpIHtcbiAgICAgICAgY29uc3QgY2VudGVyOiBWZWMzID0gdmVjMy5zY2FsZShcbiAgICAgICAgICB2ZWMzLmFkZChcbiAgICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzW3RyaSAqIDNdXSxcbiAgICAgICAgICAgIHZlYzMuYWRkKFxuICAgICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1t0cmkgKiAzICsgMV1dLFxuICAgICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1t0cmkgKiAzICsgMl1dKVxuICAgICAgICAgICksIDEgLyAzKTtcbiAgICAgICAgaWYgKGNlbnRlclt0aGlzLmF4aXNdIDwgdGhpcy5ib3VuZGluZ0JveC5nZXRDZW50ZXIoKVt0aGlzLmF4aXNdKSB7XG4gICAgICAgICAgY2hpbGQxVHJpcy5wdXNoKHRyaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGQyVHJpcy5wdXNoKHRyaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGlsZDFUcmlzLmxlbmd0aCA9PT0gMCB8fCBjaGlsZDJUcmlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjaGlsZDFUcmlzID0gdHJpYW5nbGVzLnNsaWNlKDAsIHRyaWFuZ2xlcy5sZW5ndGggLyAyKTtcbiAgICAgICAgY2hpbGQyVHJpcyA9IHRyaWFuZ2xlcy5zbGljZSh0cmlhbmdsZXMubGVuZ3RoIC8gMiwgLTEpO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGlsZDEgPSBuZXcgTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh0aGlzLm1lc2gsIHRoaXMudmVydHMsIHRoaXMuaW5kaWNlcywgY2hpbGQxVHJpcywgdGhpcy5kZXB0aCArIDEpO1xuICAgICAgdGhpcy5jaGlsZDIgPSBuZXcgTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh0aGlzLm1lc2gsIHRoaXMudmVydHMsIHRoaXMuaW5kaWNlcywgY2hpbGQyVHJpcywgdGhpcy5kZXB0aCArIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc1dpdGhpbkZydXN0dW0oZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogYm9vbGVhbiB7XG5cbiAgICBpZiAoZnJ1c3R1bS5jb250YWluc0JvdW5kaW5nQm94RnVsbHkodGhpcy5ib3VuZGluZ0JveCkpIHJldHVybiB0cnVlO1xuXG4gICAgaWYgKCFmcnVzdHVtLmludGVyc2VjdHNCb3VuZGluZ0JveCh0aGlzLmJvdW5kaW5nQm94KSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuaXNMZWFmKCkpIHtcbiAgICAgIGlmIChpbmNsdXNpdmUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0cmkgb2YgdGhpcy50cmlhbmdsZXMhKSB7XG4gICAgICAgICAgaWYgKGZydXN0dW0uY29udGFpbnNUcmlhbmdsZShcbiAgICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzIVt0cmkgKiAzXV0sXG4gICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlcyFbdHJpICogMyArIDFdXSxcbiAgICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzIVt0cmkgKiAzICsgMl1dLFxuICAgICAgICAgICAgaW5jbHVzaXZlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IHRyaSBvZiB0aGlzLnRyaWFuZ2xlcyEpIHtcbiAgICAgICAgICBpZiAoIWZydXN0dW0uY29udGFpbnNUcmlhbmdsZShcbiAgICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzIVt0cmkgKiAzXV0sXG4gICAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlcyFbdHJpICogMyArIDFdXSxcbiAgICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzIVt0cmkgKiAzICsgMl1dLFxuICAgICAgICAgICAgaW5jbHVzaXZlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluY2x1c2l2ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZDEhLmlzV2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpIHx8IHRoaXMuY2hpbGQyIS5pc1dpdGhpbkZydXN0dW0oZnJ1c3R1bSwgaW5jbHVzaXZlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkMSEuaXNXaXRoaW5GcnVzdHVtKGZydXN0dW0sIGluY2x1c2l2ZSkgJiYgdGhpcy5jaGlsZDIhLmlzV2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgcHVibGljIGdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogbnVtYmVyW10ge1xuICAgIGlmIChmcnVzdHVtLmNvbnRhaW5zQm91bmRpbmdCb3hGdWxseSh0aGlzLmJvdW5kaW5nQm94KSkgcmV0dXJuIHRoaXMuZ2V0QWxsVHJpcygpO1xuICAgIGlmICghZnJ1c3R1bS5pbnRlcnNlY3RzQm91bmRpbmdCb3godGhpcy5ib3VuZGluZ0JveCkpIHJldHVybiBbXTtcblxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICBjb25zdCByZXM6IG51bWJlcltdID0gW107XG4gICAgICBmb3IgKGNvbnN0IHRyaSBvZiB0aGlzLnRyaWFuZ2xlcyEpIHtcbiAgICAgICAgaWYgKGZydXN0dW0uY29udGFpbnNUcmlhbmdsZShcbiAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1t0cmkgKiAzXV0sXG4gICAgICAgICAgdGhpcy52ZXJ0c1t0aGlzLmluZGljZXNbdHJpICogMyArIDFdXSxcbiAgICAgICAgICB0aGlzLnZlcnRzW3RoaXMuaW5kaWNlc1t0cmkgKiAzICsgMl1dLFxuICAgICAgICAgIGluY2x1c2l2ZVxuICAgICAgICApKSB7XG4gICAgICAgICAgcmVzLnB1c2godHJpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVzOiBudW1iZXJbXSA9IHRoaXMuY2hpbGQxIS5nZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW0sIGluY2x1c2l2ZSk7XG4gICAgICByZXMucHVzaCguLi50aGlzLmNoaWxkMiEuZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpKTtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICB9XG5cbiAgZ2V0QWxsVHJpcygpOiBudW1iZXJbXSB7XG4gICAgaWYgKHRoaXMuaXNMZWFmKCkpIHtcbiAgICAgIHJldHVybiBbLi4udGhpcy50cmlhbmdsZXMhXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVzID0gdGhpcy5jaGlsZDEhLmdldEFsbFRyaXMoKTtcbiAgICAgIHJlcy5wdXNoKC4uLnRoaXMuY2hpbGQyIS5nZXRBbGxUcmlzKCkpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5KTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG4gICAgaWYgKHJheS5pbnRlcnNlY3RCb3VuZGluZ0JveCh0aGlzLmJvdW5kaW5nQm94KSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgaWYgKHRoaXMuaXNMZWFmKCkpIHtcbiAgICAgIHZhciByZXM6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgICAgdmFyIHN1YklEOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICAgICAgZm9yIChjb25zdCB0cmkgb2YgdGhpcy50cmlhbmdsZXMhKSB7XG4gICAgICAgIHZhciB0OiBudW1iZXIgfCBudWxsID0gcmF5LmludGVyc2VjdFRyaWFuZ2xlKFxuICAgICAgICAgIHRoaXMudmVydHNbdGhpcy5pbmRpY2VzIVt0cmkgKiAzXV0sXG4gICAgICAgICAgdGhpcy52ZXJ0c1t0aGlzLmluZGljZXMhW3RyaSAqIDMgKyAxXV0sXG4gICAgICAgICAgdGhpcy52ZXJ0c1t0aGlzLmluZGljZXMhW3RyaSAqIDMgKyAyXV0pO1xuICAgICAgICBpZiAodCAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmIChyZXMgPT09IG51bGwgfHwgdCA8IHJlcykge1xuICAgICAgICAgICAgcmVzID0gdDtcbiAgICAgICAgICAgIHN1YklEID0gdHJpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJlcyA9PSBudWxsKSByZXR1cm4gcmVzO1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnNlY3Rpb24ocmVzLCBcIm1lc2hcIiwgdGhpcy5tZXNoLCBzdWJJRCEsIHJheS5hdChyZXMpLCAwLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaTE6IEludGVyc2VjdGlvbiB8IG51bGwgPSB0aGlzLmNoaWxkMSEuaW50ZXJzZWN0KHJheSk7XG4gICAgICBjb25zdCBpMjogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IHRoaXMuY2hpbGQyIS5pbnRlcnNlY3QocmF5KTtcbiAgICAgIGlmIChpMSA9PT0gbnVsbCkgcmV0dXJuIGkyO1xuICAgICAgaWYgKGkyID09PSBudWxsKSByZXR1cm4gaTE7XG4gICAgICByZXR1cm4gKGkxIS50aW1lIDwgaTIhLnRpbWUpID8gaTEhIDogaTIhO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc0xlYWYoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudHJpYW5nbGVzICE9PSBudWxsO1xuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGxldCBzdHI6IHN0cmluZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlcHRoOyBpKyspIHN0ciArPSBcIi0+XCI7XG4gICAgaWYgKHRoaXMudHJpYW5nbGVzKSBzdHIgKz0gYCR7dGhpcy50cmlhbmdsZXMubGVuZ3RoIC8gM310cmlhbmdsZXNgO1xuICAgIGVsc2Ugc3RyICs9IFwibm9kZVwiO1xuICAgIGNvbnNvbGUubG9nKHN0cik7XG4gICAgdGhpcy5jaGlsZDE/LnByaW50KCk7XG4gICAgdGhpcy5jaGlsZDI/LnByaW50KCk7XG4gIH1cblxufVxuXG5leHBvcnQgY2xhc3MgTWVzaEJvdW5kaW5nQm94SGVpcmFyY2h5IHtcblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1BWF9UUklTX1BFUl9MRUFGID0gNTtcblxuICBwcml2YXRlIHJvb3Q6IE1lc2hCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGU7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtZXNoOiBHZW9tZXRyeSwgdmVydHM6IFZlYzNbXSwgaW5kaWNlczogbnVtYmVyW10pIHtcbiAgICBjb25zdCB0cmlhbmdsZXM6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSArPSAzKSB7IHRyaWFuZ2xlcy5wdXNoKGkgLyAzKTsgfVxuICAgIHRoaXMucm9vdCA9IG5ldyBNZXNoQm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlKHRoaXMubWVzaCwgdmVydHMsIGluZGljZXMsIHRyaWFuZ2xlcyk7XG4gIH1cblxuICBwdWJsaWMgcHJpbnQoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCI9PT09PT09PU1lc2gtQkJIPT09PT09PT1cIik7XG4gICAgdGhpcy5yb290LnByaW50KCk7XG4gIH1cbiAgcHVibGljIGZpcnN0SW50ZXJzZWN0aW9uKHJheTogUmF5KTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG4gICAgdmFyIG1vZGVsOiBNYXQ0ID0gdGhpcy5tZXNoLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgY29uc3Qgb2JqZWN0U3BhY2VSYXk6IFJheSA9IFJheS50cmFuc2Zvcm0ocmF5LCBtYXQ0LmludmVyc2UobW9kZWwpKTtcbiAgICBjb25zdCByZXM6IEludGVyc2VjdGlvbiB8IG51bGwgPSB0aGlzLnJvb3QuaW50ZXJzZWN0KG9iamVjdFNwYWNlUmF5KTtcbiAgICByZXM/LnRyYW5zZm9ybShtb2RlbCwgb2JqZWN0U3BhY2VSYXkpO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwdWJsaWMgaXNXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuXG4gICAgLy8gQlVHOiBzb21lIHRyYW5zZm9ybXMgY2Fubm90IGJlIGludmVydGVkXG4gICAgZnJ1c3R1bS50cmFuc2Zvcm0obWF0NC5pbnZlcnNlKHRoaXMubWVzaC5nZXRNb2RlbFJlY3Vyc2l2ZSgpKSk7XG4gICAgY29uc3QgcmVzOiBib29sZWFuID0gdGhpcy5yb290LmlzV2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgIGZydXN0dW0udHJhbnNmb3JtKHRoaXMubWVzaC5nZXRNb2RlbFJlY3Vyc2l2ZSgpKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHVibGljIGdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogbnVtYmVyW10ge1xuXG4gICAgLy8gQlVHOiBzb21lIHRyYW5zZm9ybXMgY2Fubm90IGJlIGludmVydGVkXG4gICAgZnJ1c3R1bS50cmFuc2Zvcm0obWF0NC5pbnZlcnNlKHRoaXMubWVzaC5nZXRNb2RlbFJlY3Vyc2l2ZSgpKSk7XG4gICAgY29uc3QgcmVzOiBudW1iZXJbXSA9IHRoaXMucm9vdC5nZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW0sIGluY2x1c2l2ZSk7XG4gICAgZnJ1c3R1bS50cmFuc2Zvcm0odGhpcy5tZXNoLmdldE1vZGVsUmVjdXJzaXZlKCkpO1xuICAgIHJldHVybiByZXM7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/meshBoundingBoxHeirarchy.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/arc.ts":
/*!***********************************!*\
  !*** ./src/geometry/nurbs/arc.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createArc: () => (/* binding */ createArc)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _curve__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./curve */ \"./src/geometry/nurbs/curve.ts\");\n\n\n\nconst createArc = function (origin, xAxis, yAxis, radius, thetaStart, thetaEnd) {\n    if (thetaEnd < thetaStart)\n        thetaEnd += 360;\n    const theta = thetaEnd - thetaStart;\n    let arcCount;\n    if (theta <= Math.PI / 2)\n        arcCount = 1;\n    else if (theta <= Math.PI)\n        arcCount = 2;\n    else if (theta <= 3 * Math.PI / 2)\n        arcCount = 3;\n    else\n        arcCount = 4;\n    const dTheta = theta / arcCount;\n    const weight = Math.cos(dTheta / 2);\n    var point0 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(origin, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(xAxis, radius * Math.cos(thetaStart)), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(yAxis, radius * Math.sin(thetaStart))));\n    var tangent0 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(xAxis, -Math.sin(thetaStart)), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(yAxis, Math.cos(thetaStart)));\n    const weightedControls = [wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec4.create(...point0, 1)];\n    const knots = [];\n    var angle = thetaStart;\n    for (let i = 1; i <= arcCount; i++) {\n        angle += dTheta;\n        const point2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(origin, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(xAxis, radius * Math.cos(angle)), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(yAxis, radius * Math.sin(angle))));\n        const tangent2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(xAxis, -Math.sin(angle)), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(yAxis, Math.cos(angle)));\n        const ray0 = new _ray__WEBPACK_IMPORTED_MODULE_0__.Ray(point0, tangent0);\n        const ray1 = new _ray__WEBPACK_IMPORTED_MODULE_0__.Ray(point2, tangent2);\n        const point1 = ray0.closestPointToLine(ray1.getOrigin(), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(ray1.getDirection(), ray1.getOrigin()));\n        weightedControls.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec4.create(...wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(point1, weight), weight), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec4.create(...point2, 1));\n        if (i < arcCount) {\n            point0 = point2;\n            tangent0 = tangent2;\n        }\n    }\n    knots.push(0, 0, 0);\n    switch (arcCount) {\n        case 1:\n            break;\n        case 2:\n            knots.push(1 / 2, 1 / 2);\n            break;\n        case 3:\n            knots.push(1 / 3, 1 / 3, 2 / 3, 2 / 3);\n            break;\n        case 4:\n            knots.push(1 / 4, 1 / 4, 2 / 4, 2 / 4, 3 / 4, 3 / 4);\n            break;\n    }\n    knots.push(1, 1, 1);\n    return new _curve__WEBPACK_IMPORTED_MODULE_1__.Curve(null, weightedControls, 2, knots);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDckQsTUFBTTtLQUNUO0lBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRXBCLE9BQU8sSUFBSSx5Q0FBSyxDQUFDLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDckQsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L251cmJzL2FyYy50cz81ZTlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlYzMsIFZlYzMsIHZlYzQsIFZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9yYXlcIjtcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4vY3VydmVcIjtcblxuXG5leHBvcnQgY29uc3QgY3JlYXRlQXJjID0gZnVuY3Rpb24oXG4gIG9yaWdpbjogVmVjMyxcbiAgeEF4aXM6IFZlYzMsXG4gIHlBeGlzOiBWZWMzLFxuICByYWRpdXM6IG51bWJlcixcbiAgdGhldGFTdGFydDogbnVtYmVyLFxuICB0aGV0YUVuZDogbnVtYmVyKTogQ3VydmUge1xuXG4gIGlmICh0aGV0YUVuZCA8IHRoZXRhU3RhcnQpIHRoZXRhRW5kICs9IDM2MDtcblxuICBjb25zdCB0aGV0YTogbnVtYmVyID0gdGhldGFFbmQgLSB0aGV0YVN0YXJ0O1xuXG4gIGxldCBhcmNDb3VudDogbnVtYmVyO1xuICBpZiAodGhldGEgPD0gTWF0aC5QSSAvIDIpIGFyY0NvdW50ID0gMTtcbiAgZWxzZSBpZiAodGhldGEgPD0gTWF0aC5QSSkgYXJjQ291bnQgPSAyO1xuICBlbHNlIGlmICh0aGV0YSA8PSAzICogTWF0aC5QSSAvIDIpIGFyY0NvdW50ID0gMztcbiAgZWxzZSBhcmNDb3VudCA9IDQ7XG5cbiAgY29uc3QgZFRoZXRhOiBudW1iZXIgPSB0aGV0YSAvIGFyY0NvdW50O1xuXG4gIGNvbnN0IHdlaWdodDogbnVtYmVyID0gTWF0aC5jb3MoZFRoZXRhIC8gMik7XG5cbiAgdmFyIHBvaW50MDogVmVjMyA9IHZlYzMuYWRkKG9yaWdpbiwgdmVjMy5hZGQoXG4gICAgdmVjMy5zY2FsZSh4QXhpcywgcmFkaXVzICogTWF0aC5jb3ModGhldGFTdGFydCkpLFxuICAgIHZlYzMuc2NhbGUoeUF4aXMsIHJhZGl1cyAqIE1hdGguc2luKHRoZXRhU3RhcnQpKSxcbiAgKSk7XG5cbiAgdmFyIHRhbmdlbnQwOiBWZWMzID0gdmVjMy5hZGQoXG4gICAgdmVjMy5zY2FsZSh4QXhpcywgLU1hdGguc2luKHRoZXRhU3RhcnQpKSxcbiAgICB2ZWMzLnNjYWxlKHlBeGlzLCBNYXRoLmNvcyh0aGV0YVN0YXJ0KSlcbiAgKTtcblxuICBjb25zdCB3ZWlnaHRlZENvbnRyb2xzOiBWZWM0W10gPSBbdmVjNC5jcmVhdGUoLi4ucG9pbnQwLCAxKV07XG4gIGNvbnN0IGtub3RzOiBudW1iZXJbXSA9IFtdO1xuXG4gIHZhciBhbmdsZTogbnVtYmVyID0gdGhldGFTdGFydDtcblxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBhcmNDb3VudDsgaSsrKSB7XG4gICAgYW5nbGUgKz0gZFRoZXRhO1xuXG4gICAgY29uc3QgcG9pbnQyOiBWZWMzID0gdmVjMy5hZGQob3JpZ2luLCB2ZWMzLmFkZChcbiAgICAgIHZlYzMuc2NhbGUoeEF4aXMsIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSksXG4gICAgICB2ZWMzLnNjYWxlKHlBeGlzLCByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSkpLFxuICAgICkpO1xuXG4gICAgY29uc3QgdGFuZ2VudDI6IFZlYzMgPSB2ZWMzLmFkZChcbiAgICAgIHZlYzMuc2NhbGUoeEF4aXMsIC1NYXRoLnNpbihhbmdsZSkpLFxuICAgICAgdmVjMy5zY2FsZSh5QXhpcywgTWF0aC5jb3MoYW5nbGUpKVxuICAgICk7XG5cbiAgICBjb25zdCByYXkwOiBSYXkgPSBuZXcgUmF5KHBvaW50MCwgdGFuZ2VudDApO1xuICAgIGNvbnN0IHJheTE6IFJheSA9IG5ldyBSYXkocG9pbnQyLCB0YW5nZW50Mik7XG4gICAgY29uc3QgcG9pbnQxOiBWZWMzID0gcmF5MC5jbG9zZXN0UG9pbnRUb0xpbmUocmF5MS5nZXRPcmlnaW4oKSwgdmVjMy5hZGQocmF5MS5nZXREaXJlY3Rpb24oKSwgcmF5MS5nZXRPcmlnaW4oKSkpO1xuXG4gICAgd2VpZ2h0ZWRDb250cm9scy5wdXNoKFxuICAgICAgdmVjNC5jcmVhdGUoLi4udmVjMy5zY2FsZShwb2ludDEsIHdlaWdodCksIHdlaWdodCksXG4gICAgICB2ZWM0LmNyZWF0ZSguLi5wb2ludDIsIDEpXG4gICAgKTtcblxuICAgIGlmIChpIDwgYXJjQ291bnQpIHtcbiAgICAgIHBvaW50MCA9IHBvaW50MjtcbiAgICAgIHRhbmdlbnQwID0gdGFuZ2VudDI7XG4gICAgfVxuXG4gIH1cblxuICBrbm90cy5wdXNoKDAsIDAsIDApO1xuICBzd2l0Y2ggKGFyY0NvdW50KSB7XG4gICAgY2FzZSAxOlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAga25vdHMucHVzaCgxIC8gMiwgMSAvIDIpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAga25vdHMucHVzaCgxIC8gMywgMSAvIDMsIDIgLyAzLCAyIC8gMyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBrbm90cy5wdXNoKDEgLyA0LCAxIC8gNCwgMiAvIDQsIDIgLyA0LCAzIC8gNCwgMyAvIDQpO1xuICAgICAgYnJlYWs7XG4gIH1cbiAga25vdHMucHVzaCgxLCAxLCAxKTtcblxuICByZXR1cm4gbmV3IEN1cnZlKG51bGwsIHdlaWdodGVkQ29udHJvbHMsIDIsIGtub3RzKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/arc.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/circle.ts":
/*!**************************************!*\
  !*** ./src/geometry/nurbs/circle.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCircleCenterNormalRadius: () => (/* binding */ createCircleCenterNormalRadius),\n/* harmony export */   createCircleThreePoints: () => (/* binding */ createCircleThreePoints)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _curve__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./curve */ \"./src/geometry/nurbs/curve.ts\");\n\n\n\n\nconst UNIT_CIRCLE_DEGREE = 2;\nconst UNIT_CIRCLE_KNOTS = [\n    0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 4\n];\nconst w = Math.SQRT2 / 2;\nconst UNIT_CIRCLE_POINTS = [\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(1, 0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(w, w, 0, w), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(0, 1, 0, 1),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(-w, w, 0, w), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(-1, 0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(-w, -w, 0, w),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(0, -1, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(w, -w, 0, w), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(1, 0, 0, 1)\n];\nconst createCircleThreePoints = function (a, b, c) {\n    const ab = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(b, a);\n    const ac = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(c, a);\n    const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(ab, ac));\n    const ro = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(a, b), 0.5);\n    const rd = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(ab, normal));\n    const r = new _ray__WEBPACK_IMPORTED_MODULE_1__.Ray(ro, rd);\n    const po = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(a, c), 0.5);\n    const pn = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(ac);\n    const p = new _plane__WEBPACK_IMPORTED_MODULE_0__.Plane(po, pn);\n    const t = r.intersectPlane(p, true);\n    const center = r.at(t);\n    const radius = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.distance(a, center);\n    return createCircleCenterNormalRadius(center, normal, radius);\n};\nconst createCircleCenterNormalRadius = function (center, normal, radius) {\n    if (normal[2] < 0)\n        normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(normal, -1);\n    const unitZ = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 1);\n    var x;\n    var y;\n    if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.distance(normal, unitZ) < 0.00001) {\n        x = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(radius, 0, 0);\n        y = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, radius, 0);\n    }\n    else {\n        x = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(normal, unitZ)), radius);\n        y = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(normal, x)), radius);\n    }\n    normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(normal, radius);\n    // swizzle y and z in the matrix\n    // why did they choose this rediculous clipspace\n    const model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.create(x[0], x[1], x[2], 0, y[0], y[1], y[2], 0, normal[0], normal[1], normal[2], 0, center[0], center[1], center[2], 1);\n    return new _curve__WEBPACK_IMPORTED_MODULE_2__.Curve(null, UNIT_CIRCLE_POINTS, UNIT_CIRCLE_DEGREE, UNIT_CIRCLE_KNOTS, model);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbnVyYnMvY2lyY2xlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRTtBQUNoQztBQUNKO0FBQ0c7QUFFaEMsTUFBTSxrQkFBa0IsR0FBVyxDQUFDLENBQUM7QUFDckMsTUFBTSxpQkFBaUIsR0FBYTtJQUNsQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7Q0FDbkMsQ0FBQztBQUNGLE1BQU0sQ0FBQyxHQUFXLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2pDLE1BQU0sa0JBQWtCLEdBQVc7SUFDakMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3pFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzdFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDNUUsQ0FBQztBQUVLLE1BQU0sdUJBQXVCLEdBQUcsVUFBUyxDQUFPLEVBQUUsQ0FBTyxFQUFFLENBQU87SUFDdkUsTUFBTSxFQUFFLEdBQVMsNkNBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sRUFBRSxHQUFTLDZDQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNoQyxNQUFNLE1BQU0sR0FBUyw2Q0FBSSxDQUFDLFNBQVMsQ0FBQyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV4RCxNQUFNLEVBQUUsR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDakQsTUFBTSxFQUFFLEdBQVMsNkNBQUksQ0FBQyxTQUFTLENBQUMsNkNBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDeEQsTUFBTSxDQUFDLEdBQVEsSUFBSSxxQ0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUUvQixNQUFNLEVBQUUsR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDakQsTUFBTSxFQUFFLEdBQVMsNkNBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDcEMsTUFBTSxDQUFDLEdBQVUsSUFBSSx5Q0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVuQyxNQUFNLENBQUMsR0FBVyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUUsQ0FBQztJQUM3QyxNQUFNLE1BQU0sR0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdCLE1BQU0sTUFBTSxHQUFXLDZDQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUVoRCxPQUFPLDhCQUE4QixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDaEUsQ0FBQztBQUVNLE1BQU0sOEJBQThCLEdBQUcsVUFBUyxNQUFZLEVBQUUsTUFBWSxFQUFFLE1BQWM7SUFDL0YsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUFFLE1BQU0sR0FBRyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuRCxNQUFNLEtBQUssR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLElBQUksQ0FBTyxDQUFDO0lBQ1osSUFBSSxDQUFPLENBQUM7SUFDWixJQUFJLDZDQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsR0FBRyxPQUFPLEVBQUU7UUFDMUMsQ0FBQyxHQUFHLDZDQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUIsQ0FBQyxHQUFHLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDL0I7U0FBTTtRQUNMLENBQUMsR0FBRyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyw2Q0FBSSxDQUFDLFNBQVMsQ0FBQyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNsRSxDQUFDLEdBQUcsNkNBQUksQ0FBQyxLQUFLLENBQUMsNkNBQUksQ0FBQyxTQUFTLENBQUMsNkNBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDL0Q7SUFDRCxNQUFNLEdBQUcsNkNBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXBDLGdDQUFnQztJQUNoQyxnREFBZ0Q7SUFDaEQsTUFBTSxLQUFLLEdBQVMsNkNBQUksQ0FBQyxNQUFNLENBQzdCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFDbkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUNuQixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQ2xDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FDbkMsQ0FBQztJQUNGLE9BQU8sSUFBSSx5Q0FBSyxDQUFDLElBQUksRUFBRSxrQkFBa0IsRUFBRSxrQkFBa0IsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUUzRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbnVyYnMvY2lyY2xlLnRzPzRlNzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMywgVmVjNCwgdmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vcGxhbmVcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9yYXlcIjtcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4vY3VydmVcIjtcblxuY29uc3QgVU5JVF9DSVJDTEVfREVHUkVFOiBudW1iZXIgPSAyO1xuY29uc3QgVU5JVF9DSVJDTEVfS05PVFM6IG51bWJlcltdID0gW1xuICAwLCAwLCAwLCAxLCAxLCAyLCAyLCAzLCAzLCA0LCA0LCA0XG5dO1xuY29uc3QgdzogbnVtYmVyID0gTWF0aC5TUVJUMiAvIDI7XG5jb25zdCBVTklUX0NJUkNMRV9QT0lOVFM6IFZlYzRbXSA9IFtcbiAgdmVjNC5jcmVhdGUoMSwgMCwgMCwgMSksIHZlYzQuY3JlYXRlKHcsIHcsIDAsIHcpLCB2ZWM0LmNyZWF0ZSgwLCAxLCAwLCAxKSxcbiAgdmVjNC5jcmVhdGUoLXcsIHcsIDAsIHcpLCB2ZWM0LmNyZWF0ZSgtMSwgMCwgMCwgMSksIHZlYzQuY3JlYXRlKC13LCAtdywgMCwgdyksXG4gIHZlYzQuY3JlYXRlKDAsIC0xLCAwLCAxKSwgdmVjNC5jcmVhdGUodywgLXcsIDAsIHcpLCB2ZWM0LmNyZWF0ZSgxLCAwLCAwLCAxKVxuXTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNpcmNsZVRocmVlUG9pbnRzID0gZnVuY3Rpb24oYTogVmVjMywgYjogVmVjMywgYzogVmVjMyk6IEN1cnZlIHtcbiAgY29uc3QgYWI6IFZlYzMgPSB2ZWMzLnN1YihiLCBhKTtcbiAgY29uc3QgYWM6IFZlYzMgPSB2ZWMzLnN1YihjLCBhKTtcbiAgY29uc3Qgbm9ybWFsOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5jcm9zcyhhYiwgYWMpKTtcblxuICBjb25zdCBybzogVmVjMyA9IHZlYzMuc2NhbGUodmVjMy5hZGQoYSwgYiksIDAuNSk7XG4gIGNvbnN0IHJkOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5jcm9zcyhhYiwgbm9ybWFsKSk7XG4gIGNvbnN0IHI6IFJheSA9IG5ldyBSYXkocm8sIHJkKTtcblxuICBjb25zdCBwbzogVmVjMyA9IHZlYzMuc2NhbGUodmVjMy5hZGQoYSwgYyksIDAuNSk7XG4gIGNvbnN0IHBuOiBWZWMzID0gdmVjMy5ub3JtYWxpemUoYWMpO1xuICBjb25zdCBwOiBQbGFuZSA9IG5ldyBQbGFuZShwbywgcG4pO1xuXG4gIGNvbnN0IHQ6IG51bWJlciA9IHIuaW50ZXJzZWN0UGxhbmUocCwgdHJ1ZSkhO1xuICBjb25zdCBjZW50ZXI6IFZlYzMgPSByLmF0KHQpO1xuICBjb25zdCByYWRpdXM6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UoYSwgY2VudGVyKTtcblxuICByZXR1cm4gY3JlYXRlQ2lyY2xlQ2VudGVyTm9ybWFsUmFkaXVzKGNlbnRlciwgbm9ybWFsLCByYWRpdXMpO1xufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlQ2lyY2xlQ2VudGVyTm9ybWFsUmFkaXVzID0gZnVuY3Rpb24oY2VudGVyOiBWZWMzLCBub3JtYWw6IFZlYzMsIHJhZGl1czogbnVtYmVyKTogQ3VydmUge1xuICBpZiAobm9ybWFsWzJdIDwgMCkgbm9ybWFsID0gdmVjMy5zY2FsZShub3JtYWwsIC0xKTtcbiAgY29uc3QgdW5pdFo6IFZlYzMgPSB2ZWMzLmNyZWF0ZSgwLCAwLCAxKTtcbiAgdmFyIHg6IFZlYzM7XG4gIHZhciB5OiBWZWMzO1xuICBpZiAodmVjMy5kaXN0YW5jZShub3JtYWwsIHVuaXRaKSA8IDAuMDAwMDEpIHtcbiAgICB4ID0gdmVjMy5jcmVhdGUocmFkaXVzLCAwLCAwKTtcbiAgICB5ID0gdmVjMy5jcmVhdGUoMCwgcmFkaXVzLCAwKTtcbiAgfSBlbHNlIHtcbiAgICB4ID0gdmVjMy5zY2FsZSh2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKG5vcm1hbCwgdW5pdFopKSwgcmFkaXVzKTtcbiAgICB5ID0gdmVjMy5zY2FsZSh2ZWMzLm5vcm1hbGl6ZSh2ZWMzLmNyb3NzKG5vcm1hbCwgeCkpLCByYWRpdXMpO1xuICB9XG4gIG5vcm1hbCA9IHZlYzMuc2NhbGUobm9ybWFsLCByYWRpdXMpO1xuXG4gIC8vIHN3aXp6bGUgeSBhbmQgeiBpbiB0aGUgbWF0cml4XG4gIC8vIHdoeSBkaWQgdGhleSBjaG9vc2UgdGhpcyByZWRpY3Vsb3VzIGNsaXBzcGFjZVxuICBjb25zdCBtb2RlbDogTWF0NCA9IG1hdDQuY3JlYXRlKFxuICAgIHhbMF0sIHhbMV0sIHhbMl0sIDAsXG4gICAgeVswXSwgeVsxXSwgeVsyXSwgMCxcbiAgICBub3JtYWxbMF0sIG5vcm1hbFsxXSwgbm9ybWFsWzJdLCAwLFxuICAgIGNlbnRlclswXSwgY2VudGVyWzFdLCBjZW50ZXJbMl0sIDFcbiAgKTtcbiAgcmV0dXJuIG5ldyBDdXJ2ZShudWxsLCBVTklUX0NJUkNMRV9QT0lOVFMsIFVOSVRfQ0lSQ0xFX0RFR1JFRSwgVU5JVF9DSVJDTEVfS05PVFMsIG1vZGVsKTtcblxufVxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/circle.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/curve.ts":
/*!*************************************!*\
  !*** ./src/geometry/nurbs/curve.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Curve: () => (/* binding */ Curve)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../render/renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _utils_clone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/clone */ \"./src/utils/clone.ts\");\n/* harmony import */ var _controlCage1D__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../controlCage1D */ \"./src/geometry/controlCage1D.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lineBoundingBoxHeirarchy */ \"./src/geometry/lineBoundingBoxHeirarchy.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils */ \"./src/geometry/nurbs/utils.ts\");\n\n\n\n\n\n\n\n\n\nclass Curve extends _geometry__WEBPACK_IMPORTED_MODULE_4__.Geometry {\n    constructor(parent, weightedControlPoints, degree, knots = [], model, material = null) {\n        super(parent, model, material);\n        this.weightedControlPoints = weightedControlPoints;\n        this.degree = degree;\n        this.knots = knots;\n        if (this.knots.length == 0) {\n            this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        }\n        this.uPerSample = [];\n        this.controlCage = null;\n        this.lines = null;\n        this.linesBBH = null;\n        this.updateSamples();\n    }\n    reverse() {\n        this.weightedControlPoints.reverse();\n        this.knots.reverse();\n        for (let i = this.knots.length - 1; i >= 0; i--) {\n            this.knots[i] -= this.knots[0];\n            this.knots[i] *= -1;\n        }\n    }\n    showControls(on) {\n        if (on)\n            this.controlCage.show();\n        else\n            this.controlCage.hide();\n    }\n    getStartRay() {\n        const p1 = this.weightedControlPoints[0];\n        const p2 = this.weightedControlPoints[1];\n        const startPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(p1[0] / p1[3], p1[1] / p1[3], p1[2] / p1[3]);\n        const nextPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(p2[0] / p2[3], p2[1] / p2[3], p2[2] / p2[3]);\n        const model = this.getModelRecursive();\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.transformMat4(startPoint, model, startPoint);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.transformMat4(nextPoint, model, nextPoint);\n        return new _ray__WEBPACK_IMPORTED_MODULE_6__.Ray(startPoint, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(startPoint, nextPoint));\n    }\n    getEndRay() {\n        const p1 = this.weightedControlPoints[this.getControlPointCount() - 1];\n        const p2 = this.weightedControlPoints[this.getControlPointCount() - 2];\n        const endPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(p1[0] / p1[3], p1[1] / p1[3], p1[2] / p1[3]);\n        const prevPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(p2[0] / p2[3], p2[1] / p2[3], p2[2] / p2[3]);\n        const model = this.getModelRecursive();\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.transformMat4(endPoint, model, endPoint);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.transformMat4(prevPoint, model, prevPoint);\n        return new _ray__WEBPACK_IMPORTED_MODULE_6__.Ray(endPoint, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(endPoint, prevPoint));\n    }\n    getControlPoint(i) {\n        const pw = this.weightedControlPoints.at(i);\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.transformMat4(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(pw[0] / pw[3], pw[1] / pw[3], pw[2] / pw[3]), this.getModelRecursive());\n    }\n    getControlPoints() {\n        const res = [];\n        for (let i = 0; i < this.weightedControlPoints.length; i++) {\n            res.push(this.getControlPoint(i));\n        }\n        return res;\n    }\n    getEndPoint() {\n        return this.getControlPoint(-1);\n    }\n    getStartPoint() {\n        return this.getControlPoint(0);\n    }\n    addToSubSelection(...subIDs) {\n        this.controlCage.addToSubSelection(...subIDs);\n    }\n    removeFromSubSelection(...subIDs) {\n        this.controlCage.removeFromSubSelection(...subIDs);\n    }\n    isSubSelected(subID) {\n        return this.controlCage.isSubSelected(subID);\n    }\n    hasSubSelection() {\n        return this.controlCage.hasSubSelection();\n    }\n    clearSubSelection() {\n        this.controlCage.clearSubSelection();\n    }\n    getSubSelectionBoundingBox() {\n        return this.controlCage.getSubSelectionBoundingBox();\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        return this.controlCage.getWithinFrustumSub(frustum, inclusive);\n    }\n    onSelectionMoved() {\n        if (this.controlCage.hasSubSelection()) {\n            const newVerts = this.controlCage.getVertsSubSelectionTransformed();\n            this.weightedControlPoints = this.weightedControlPoints.map((p, index) => {\n                const newVert = newVerts[index];\n                return wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create(newVert[0] * p[3], newVert[1] * p[3], newVert[2] * p[3], p[3]);\n            });\n            this.updateSamples(false);\n        }\n    }\n    bakeSelectionTransform() {\n        if (this.isSelected()) {\n            this.model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform(), this.model);\n        }\n        this.controlCage.bakeSelectionTransform();\n    }\n    getU(intersection) {\n        const uBefore = this.uPerSample[intersection.objectSubID];\n        const uAfter = this.uPerSample[intersection.objectSubID + 1];\n        const pBefore = this.sample(uBefore);\n        const pAfter = this.sample(uAfter);\n        const dBefore = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.distance(pBefore, intersection.point);\n        const dAfter = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.distance(pAfter, intersection.point);\n        const ratio = dBefore / (dBefore + dAfter);\n        return ratio * uAfter + (1 - ratio) * uBefore;\n    }\n    clone() {\n        const res = new Curve(this.parent, (0,_utils_clone__WEBPACK_IMPORTED_MODULE_2__.cloneVec4List)(this.weightedControlPoints), this.degree, [...this.knots], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.clone(this.model), this.materialName);\n        if (!this.controlCage.isHidden()) {\n            res.showControls(true);\n        }\n        return res;\n    }\n    delete() {\n        this.controlCage.delete();\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.lines);\n    }\n    getKnots() {\n        return this.knots;\n    }\n    getWeightedControlPoints() {\n        return this.weightedControlPoints;\n    }\n    getKnotCount() {\n        return this.knots.length;\n    }\n    intersect(ray, sub) {\n        if (this.isHidden())\n            return null;\n        let intersection = null;\n        intersection = this.controlCage.intersect(ray, sub);\n        if (intersection) {\n            intersection.description = \"control cage\";\n            intersection.geometry = this;\n            return intersection;\n        }\n        intersection = this.linesBBH.almostIntersect(ray, 10);\n        if (intersection) {\n            intersection.description = \"curve\";\n            intersection.geometry = this;\n            return intersection;\n        }\n        return intersection;\n    }\n    getBoundingBox() {\n        return this.controlCage.getBoundingBox();\n    }\n    getDegree() {\n        return this.degree;\n    }\n    addControlPoint(point, weight) {\n        this.weightedControlPoints.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create(...point, weight));\n        this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        this.updateSamples();\n    }\n    updateLastControlPoint(point, weight) {\n        this.weightedControlPoints[this.weightedControlPoints.length - 1] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create(...point, weight);\n        this.updateSamples();\n    }\n    removeLastControlPoint() {\n        this.weightedControlPoints.pop();\n        if (this.degree === this.weightedControlPoints.length)\n            this.degree--;\n        this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        this.updateSamples();\n    }\n    changeDegree(degree) {\n        while (degree >= this.weightedControlPoints.length)\n            degree--;\n        this.degree = degree;\n        this.knots = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.genericKnotVector)(this.weightedControlPoints.length, this.degree);\n        this.updateSamples();\n    }\n    getControlPointCount() {\n        return this.weightedControlPoints.length;\n    }\n    updateSamples(updateCage = true) {\n        var _a, _b, _c;\n        const cagePreviouslyShowing = (_b = !((_a = this.controlCage) === null || _a === void 0 ? void 0 : _a.isHidden())) !== null && _b !== void 0 ? _b : false;\n        if (updateCage)\n            (_c = this.controlCage) === null || _c === void 0 ? void 0 : _c.delete();\n        if (this.lines)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.lines);\n        this.uPerSample = [];\n        const sampleCount = Curve.SAMPLES_PER_EDGE * (this.weightedControlPoints.length - 1);\n        const samples = [];\n        const indices = [];\n        const subSelection = [];\n        for (let i = 0; i <= sampleCount; i++) {\n            const u = (i / sampleCount) * this.knots.at(-1);\n            this.uPerSample.push(u);\n            samples.push(this.sample(u));\n            subSelection.push(false);\n            indices.push(i, i + 1);\n        }\n        indices.pop();\n        indices.pop();\n        const controlPointArray = this.weightedControlPoints.map((point) => {\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(point[0] / point[3], point[1] / point[3], point[2] / point[3]);\n        });\n        this.lines = new _render_renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines(this, samples, indices, subSelection);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(this.lines);\n        this.linesBBH = new _lineBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_5__.LineBoundingBoxHeirarchy(this, samples, indices);\n        if (updateCage)\n            this.controlCage = new _controlCage1D__WEBPACK_IMPORTED_MODULE_3__.ControlCage1D(this, controlPointArray);\n        if (cagePreviouslyShowing)\n            this.controlCage.show();\n    }\n    sample(u) {\n        const knotSpan = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.span)(this.knots, u, this.degree);\n        const funcs = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.basisFuncs)(this.knots, u, this.degree);\n        let res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create(0, 0, 0, 0);\n        for (let i = 0; i <= this.degree; i++) {\n            res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.add(res, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(this.weightedControlPoints[knotSpan - this.degree + i], funcs[i]));\n        }\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(res[0] / res[3], res[1] / res[3], res[2] / res[3]);\n    }\n    normalizeKnots() {\n        const start = this.knots[0];\n        const end = this.knots[this.knots.length - 1];\n        const dist = end - start;\n        for (let i = 0; i < this.knots.length; i++) {\n            this.knots[i] = (this.knots[i] - start) / dist;\n        }\n    }\n    insertKnot(knot) {\n        console.log(\"insserting knot at\", knot);\n        console.log(\"knots before\", ...this.knots);\n        const idx = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.span)(this.knots, knot, this.degree);\n        const newWeightedControlPoints = [];\n        newWeightedControlPoints.push(this.weightedControlPoints[0]);\n        for (let i = 1; i < this.weightedControlPoints.length; i++) {\n            let alpha;\n            if (i <= idx - this.degree)\n                alpha = 1;\n            else if (i >= idx + 1)\n                alpha = 0;\n            else\n                alpha = (knot - this.knots[i]) / (this.knots[i + this.degree] - this.knots[i]);\n            newWeightedControlPoints.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(this.weightedControlPoints[i], alpha), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(this.weightedControlPoints[i - 1], 1 - alpha)));\n        }\n        newWeightedControlPoints.push(this.weightedControlPoints[this.weightedControlPoints.length - 1]);\n        this.weightedControlPoints = newWeightedControlPoints;\n        this.knots.push(knot);\n        this.knots.sort();\n        console.log(\"knots after\", ...this.knots);\n        this.updateSamples();\n    }\n    getTypeName() {\n        return \"Curve\";\n    }\n    isWithinFrustum(frustum, inclusive) {\n        if (this.isHidden())\n            return false;\n        return this.linesBBH.isWithinFrustum(frustum, inclusive) ||\n            (!this.controlCage.isHidden() && this.controlCage.isWithinFrustum(frustum, inclusive));\n    }\n    elevateDegree(n) {\n        // TODO: clean up\n        const newDegree = this.degree + n;\n        const bezierAlphas = (0,_utils__WEBPACK_IMPORTED_MODULE_7__.calcBezierAlphas)(this.degree, newDegree);\n        const bezierControls = [];\n        for (let i = 0; i < this.degree + 1; i++)\n            bezierControls.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create());\n        const elevatedBezierControls = [];\n        for (let i = 0; i < this.degree + n + 1; i++)\n            elevatedBezierControls.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create());\n        const nextBezierControls = [];\n        const alphas = [];\n        for (let i = 0; i < this.degree - 1; i++) {\n            nextBezierControls.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create());\n            alphas.push(0);\n        }\n        let distinctKnots = 1;\n        for (let i = 1; i < this.knots.length; i++) {\n            if (this.knots[i] != this.knots[i - 1])\n                distinctKnots++;\n        }\n        const newControlPoints = [];\n        for (let i = 0; i < this.weightedControlPoints.length + n * (distinctKnots - 1); i++) {\n            newControlPoints.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create());\n        }\n        const newKnots = [];\n        for (let i = 0; i < this.knots.length + n * distinctKnots; i++)\n            newKnots.push(0);\n        // Initialize First Segment\n        let mh = newDegree;\n        let kind = newDegree + 1;\n        let r = -1;\n        let a = this.degree;\n        let b = this.degree + 1;\n        let cind = 1;\n        let ua = this.knots[0];\n        newControlPoints[0] = this.weightedControlPoints[0];\n        for (let i = 0; i <= newDegree; i++)\n            newKnots[i] = ua;\n        for (let i = 0; i <= this.degree; i++)\n            bezierControls[i] = this.weightedControlPoints[i];\n        //main loop\n        while (b < this.knots.length - 1) {\n            const IDK = b;\n            while (b < this.knots.length - 1 && this.knots[b] == this.knots[b + 1])\n                b++;\n            const mul = b - IDK + 1;\n            mh += mul + n;\n            const ub = this.knots[b];\n            const oldr = r;\n            r = this.degree - mul;\n            const lbz = (oldr > 0) ? Math.floor((oldr + 2) / 2) : 1;\n            const rbz = (r > 0) ? newDegree - Math.floor((r + 1) / 2) : newDegree;\n            // insert knots  \n            if (r > 0) {\n                const num = ub - ua;\n                for (let k = this.degree; k > mul; k--)\n                    alphas[k - mul - 1] = num / (this.knots[a + k] - ua);\n                for (let j = 1; j <= r; j++) {\n                    const save = r - j;\n                    const s = mul + j;\n                    for (let k = this.degree; k >= s; k--) {\n                        bezierControls[k] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(bezierControls[k], alphas[k - s]), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(bezierControls[k - 1], 1 - alphas[k - s]));\n                    }\n                    nextBezierControls[save] = bezierControls[this.degree];\n                }\n            }\n            // Elevate Bezier \n            for (let i = lbz; i <= newDegree; i++) {\n                elevatedBezierControls[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.create(0, 0, 0, 0);\n                for (let j = Math.max(0, i - n); j <= Math.min(this.degree, i); j++) {\n                    elevatedBezierControls[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.add(elevatedBezierControls[i], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(bezierControls[j], bezierAlphas[i][j]));\n                }\n            }\n            //  Remove knots\n            if (oldr > 1) {\n                var first = kind - 2;\n                var last = kind;\n                const den = ub - ua;\n                const bet = (ub - newKnots[kind - 1]) / den;\n                for (let tr = 1; tr < oldr; tr++) {\n                    let i = first;\n                    let j = last;\n                    let kj = j - kind + 1;\n                    while (j - i > tr) {\n                        if (i < cind) {\n                            const alf = (ub - newKnots[i]) / (ua - newKnots[i]);\n                            newControlPoints[i] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(newControlPoints[i], alf), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(newControlPoints[i - 1], 1 - alf));\n                        }\n                        if (j >= lbz) {\n                            if (j - tr <= kind - newDegree - oldr) {\n                                const gam = (ub - newKnots[j - tr]) / den;\n                                elevatedBezierControls[kj] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(elevatedBezierControls[kj], gam), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(elevatedBezierControls[kj + 1], 1 - gam));\n                            }\n                            else {\n                                elevatedBezierControls[kj] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(elevatedBezierControls[kj], bet), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec4.scale(elevatedBezierControls[kj + 1], 1 - bet));\n                            }\n                        }\n                        i++;\n                        j--;\n                        kj--;\n                    }\n                    first--;\n                    last++;\n                }\n            }\n            if (a != this.degree) {\n                for (let i = 0; i < newDegree - oldr; i++) {\n                    newKnots[kind++] = ua;\n                }\n            }\n            for (let j = lbz; j <= rbz; j++) {\n                newControlPoints[cind++] = elevatedBezierControls[j];\n            }\n            if (b < this.knots.length - 1) {\n                for (let j = 0; j < r; j++)\n                    bezierControls[j] = nextBezierControls[j];\n                for (let j = r; j <= this.degree; j++) {\n                    bezierControls[j] = this.weightedControlPoints[b - this.degree + j];\n                }\n                a = b++;\n                ua = ub;\n            }\n            else {\n                for (let i = 0; i <= newDegree; i++) {\n                    newKnots[kind + i] = ub;\n                }\n            }\n        }\n        this.weightedControlPoints = newControlPoints;\n        this.knots = newKnots;\n        this.degree = newDegree;\n        this.updateSamples();\n    }\n}\nCurve.SAMPLES_PER_EDGE = 20;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDLHFCQUFxQixHQUFHLGdCQUFnQixDQUFDO1FBQzlDLElBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDO1FBRXhCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUV2QixDQUFDOztBQWhkc0Isc0JBQWdCLEdBQUcsRUFBRSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbnVyYnMvY3VydmUudHM/MDNmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzLCB2ZWM0LCBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi8uLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJlbmRlckxpbmVzIH0gZnJvbSBcIi4uLy4uL3JlbmRlci9yZW5kZXJMaW5lc1wiO1xuaW1wb3J0IHsgY2xvbmVWZWM0TGlzdCB9IGZyb20gXCIuLi8uLi91dGlscy9jbG9uZVwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi4vYm91bmRpbmdCb3hcIjtcbmltcG9ydCB7IENvbnRyb2xDYWdlMUQgfSBmcm9tIFwiLi4vY29udHJvbENhZ2UxRFwiO1xuaW1wb3J0IHsgRnJ1c3R1bSB9IGZyb20gXCIuLi9mcnVzdHVtXCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uL2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgTGluZUJvdW5kaW5nQm94SGVpcmFyY2h5IH0gZnJvbSBcIi4uL2xpbmVCb3VuZGluZ0JveEhlaXJhcmNoeVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL3JheVwiO1xuaW1wb3J0IHsgYmFzaXNGdW5jcywgY2FsY0JlemllckFscGhhcywgZ2VuZXJpY0tub3RWZWN0b3IsIHNwYW4gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgQ3VydmUgZXh0ZW5kcyBHZW9tZXRyeSB7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU0FNUExFU19QRVJfRURHRSA9IDIwO1xuXG4gIHByaXZhdGUgY29udHJvbENhZ2U6IENvbnRyb2xDYWdlMUQgfCBudWxsO1xuICBwcml2YXRlIGxpbmVzOiBSZW5kZXJMaW5lcyB8IG51bGw7XG4gIHByaXZhdGUgbGluZXNCQkg6IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSB8IG51bGw7XG4gIHByaXZhdGUgdVBlclNhbXBsZTogbnVtYmVyW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50OiBHZW9tZXRyeSB8IG51bGwsXG4gICAgcHJpdmF0ZSB3ZWlnaHRlZENvbnRyb2xQb2ludHM6IFZlYzRbXSxcbiAgICBwcml2YXRlIGRlZ3JlZTogbnVtYmVyLFxuICAgIHByaXZhdGUga25vdHM6IG51bWJlcltdID0gW10sXG4gICAgbW9kZWw/OiBNYXQ0LFxuICAgIG1hdGVyaWFsOiBNYXRlcmlhbE5hbWUgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG5cbiAgICBpZiAodGhpcy5rbm90cy5sZW5ndGggPT0gMCkge1xuICAgICAgdGhpcy5rbm90cyA9IGdlbmVyaWNLbm90VmVjdG9yKHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aCwgdGhpcy5kZWdyZWUpO1xuICAgIH1cblxuICAgIHRoaXMudVBlclNhbXBsZSA9IFtdO1xuICAgIHRoaXMuY29udHJvbENhZ2UgPSBudWxsO1xuICAgIHRoaXMubGluZXMgPSBudWxsO1xuICAgIHRoaXMubGluZXNCQkggPSBudWxsO1xuICAgIHRoaXMudXBkYXRlU2FtcGxlcygpO1xuICB9XG5cbiAgcHVibGljIHJldmVyc2UoKTogdm9pZCB7XG4gICAgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMucmV2ZXJzZSgpO1xuICAgIHRoaXMua25vdHMucmV2ZXJzZSgpO1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmtub3RzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLmtub3RzW2ldIC09IHRoaXMua25vdHNbMF07XG4gICAgICB0aGlzLmtub3RzW2ldICo9IC0xO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzaG93Q29udHJvbHMob246IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAob24pIHRoaXMuY29udHJvbENhZ2UhLnNob3coKTtcbiAgICBlbHNlIHRoaXMuY29udHJvbENhZ2UhLmhpZGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGFydFJheSgpOiBSYXkge1xuICAgIGNvbnN0IHAxOiBWZWM0ID0gdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbMF07XG4gICAgY29uc3QgcDI6IFZlYzQgPSB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1sxXTtcbiAgICBjb25zdCBzdGFydFBvaW50OiBWZWMzID0gdmVjMy5jcmVhdGUocDFbMF0gLyBwMVszXSwgcDFbMV0gLyBwMVszXSwgcDFbMl0gLyBwMVszXSk7XG4gICAgY29uc3QgbmV4dFBvaW50OiBWZWMzID0gdmVjMy5jcmVhdGUocDJbMF0gLyBwMlszXSwgcDJbMV0gLyBwMlszXSwgcDJbMl0gLyBwMlszXSk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHN0YXJ0UG9pbnQsIG1vZGVsLCBzdGFydFBvaW50KTtcbiAgICB2ZWMzLnRyYW5zZm9ybU1hdDQobmV4dFBvaW50LCBtb2RlbCwgbmV4dFBvaW50KTtcbiAgICByZXR1cm4gbmV3IFJheShzdGFydFBvaW50LCB2ZWMzLnN1YihzdGFydFBvaW50LCBuZXh0UG9pbnQpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFbmRSYXkoKTogUmF5IHtcbiAgICBjb25zdCBwMTogVmVjNCA9IHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzW3RoaXMuZ2V0Q29udHJvbFBvaW50Q291bnQoKSAtIDFdO1xuICAgIGNvbnN0IHAyOiBWZWM0ID0gdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbdGhpcy5nZXRDb250cm9sUG9pbnRDb3VudCgpIC0gMl07XG4gICAgY29uc3QgZW5kUG9pbnQ6IFZlYzMgPSB2ZWMzLmNyZWF0ZShwMVswXSAvIHAxWzNdLCBwMVsxXSAvIHAxWzNdLCBwMVsyXSAvIHAxWzNdKTtcbiAgICBjb25zdCBwcmV2UG9pbnQ6IFZlYzMgPSB2ZWMzLmNyZWF0ZShwMlswXSAvIHAyWzNdLCBwMlsxXSAvIHAyWzNdLCBwMlsyXSAvIHAyWzNdKTtcbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICB2ZWMzLnRyYW5zZm9ybU1hdDQoZW5kUG9pbnQsIG1vZGVsLCBlbmRQb2ludCk7XG4gICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHByZXZQb2ludCwgbW9kZWwsIHByZXZQb2ludCk7XG4gICAgcmV0dXJuIG5ldyBSYXkoZW5kUG9pbnQsIHZlYzMuc3ViKGVuZFBvaW50LCBwcmV2UG9pbnQpKTtcbiAgfVxuXG4gIGdldENvbnRyb2xQb2ludChpOiBudW1iZXIpIHtcbiAgICBjb25zdCBwdzogVmVjNCA9IHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmF0KGkpITtcbiAgICByZXR1cm4gdmVjMy50cmFuc2Zvcm1NYXQ0KHZlYzMuY3JlYXRlKHB3WzBdIC8gcHdbM10sIHB3WzFdIC8gcHdbM10sIHB3WzJdIC8gcHdbM10pLCB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCkpO1xuICB9XG5cbiAgcHVibGljIGdldENvbnRyb2xQb2ludHMoKTogVmVjM1tdIHtcbiAgICBjb25zdCByZXM6IFZlYzNbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcy5wdXNoKHRoaXMuZ2V0Q29udHJvbFBvaW50KGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBnZXRFbmRQb2ludCgpOiBWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb250cm9sUG9pbnQoLTEpO1xuICB9XG5cbiAgcHVibGljIGdldFN0YXJ0UG9pbnQoKTogVmVjMyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29udHJvbFBvaW50KDApO1xuICB9XG5cbiAgcHVibGljIGFkZFRvU3ViU2VsZWN0aW9uKC4uLnN1YklEczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRyb2xDYWdlIS5hZGRUb1N1YlNlbGVjdGlvbiguLi5zdWJJRHMpO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUZyb21TdWJTZWxlY3Rpb24oLi4uc3ViSURzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHRoaXMuY29udHJvbENhZ2UhLnJlbW92ZUZyb21TdWJTZWxlY3Rpb24oLi4uc3ViSURzKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1N1YlNlbGVjdGVkKHN1YklEOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sQ2FnZSEuaXNTdWJTZWxlY3RlZChzdWJJRCk7XG4gIH1cblxuICBwdWJsaWMgaGFzU3ViU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDYWdlIS5oYXNTdWJTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclN1YlNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLmNvbnRyb2xDYWdlIS5jbGVhclN1YlNlbGVjdGlvbigpO1xuICB9XG5cbiAgcHVibGljIGdldFN1YlNlbGVjdGlvbkJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sQ2FnZSEuZ2V0U3ViU2VsZWN0aW9uQm91bmRpbmdCb3goKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sQ2FnZSEuZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uTW92ZWQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29udHJvbENhZ2UhLmhhc1N1YlNlbGVjdGlvbigpKSB7XG4gICAgICBjb25zdCBuZXdWZXJ0czogVmVjM1tdID0gdGhpcy5jb250cm9sQ2FnZSEuZ2V0VmVydHNTdWJTZWxlY3Rpb25UcmFuc2Zvcm1lZCgpO1xuICAgICAgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMgPSB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5tYXAoKHA6IFZlYzQsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgbmV3VmVydDogVmVjMyA9IG5ld1ZlcnRzW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIHZlYzQuY3JlYXRlKG5ld1ZlcnRbMF0gKiBwWzNdLCBuZXdWZXJ0WzFdICogcFszXSwgbmV3VmVydFsyXSAqIHBbM10sIHBbM10pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnVwZGF0ZVNhbXBsZXMoZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBiYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQoKSkge1xuICAgICAgdGhpcy5tb2RlbCA9IG1hdDQubXVsKElOU1RBTkNFLmdldE1vdmVyKCkuZ2V0VHJhbnNmb3JtKCksIHRoaXMubW9kZWwpO1xuICAgIH1cbiAgICB0aGlzLmNvbnRyb2xDYWdlIS5iYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk7XG4gIH1cblxuICBnZXRVKGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uKTogbnVtYmVyIHtcbiAgICBjb25zdCB1QmVmb3JlOiBudW1iZXIgPSB0aGlzLnVQZXJTYW1wbGVbaW50ZXJzZWN0aW9uLm9iamVjdFN1YklEXTtcbiAgICBjb25zdCB1QWZ0ZXI6IG51bWJlciA9IHRoaXMudVBlclNhbXBsZVtpbnRlcnNlY3Rpb24ub2JqZWN0U3ViSUQgKyAxXTtcbiAgICBjb25zdCBwQmVmb3JlOiBWZWMzID0gdGhpcy5zYW1wbGUodUJlZm9yZSk7XG4gICAgY29uc3QgcEFmdGVyOiBWZWMzID0gdGhpcy5zYW1wbGUodUFmdGVyKTtcbiAgICBjb25zdCBkQmVmb3JlOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHBCZWZvcmUsIGludGVyc2VjdGlvbi5wb2ludCk7XG4gICAgY29uc3QgZEFmdGVyOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHBBZnRlciwgaW50ZXJzZWN0aW9uLnBvaW50KTtcbiAgICBjb25zdCByYXRpbzogbnVtYmVyID0gZEJlZm9yZSAvIChkQmVmb3JlICsgZEFmdGVyKTtcbiAgICByZXR1cm4gcmF0aW8gKiB1QWZ0ZXIgKyAoMSAtIHJhdGlvKSAqIHVCZWZvcmU7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogR2VvbWV0cnkge1xuICAgIGNvbnN0IHJlczogQ3VydmUgPSBuZXcgQ3VydmUodGhpcy5wYXJlbnQsXG4gICAgICBjbG9uZVZlYzRMaXN0KHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzKSxcbiAgICAgIHRoaXMuZGVncmVlLFxuICAgICAgWy4uLnRoaXMua25vdHNdLFxuICAgICAgbWF0NC5jbG9uZSh0aGlzLm1vZGVsKSxcbiAgICAgIHRoaXMubWF0ZXJpYWxOYW1lKTtcbiAgICBpZiAoIXRoaXMuY29udHJvbENhZ2UhLmlzSGlkZGVuKCkpIHtcbiAgICAgIHJlcy5zaG93Q29udHJvbHModHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlKCk6IHZvaWQge1xuICAgIHRoaXMuY29udHJvbENhZ2UhLmRlbGV0ZSgpO1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTGluZXModGhpcy5saW5lcyEpO1xuICB9XG5cbiAgcHVibGljIGdldEtub3RzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5rbm90cztcbiAgfVxuXG4gIHB1YmxpYyBnZXRXZWlnaHRlZENvbnRyb2xQb2ludHMoKTogVmVjNFtdIHtcbiAgICByZXR1cm4gdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0S25vdENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMua25vdHMubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGludGVyc2VjdChyYXk6IFJheSwgc3ViOiBib29sZWFuKTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG5cbiAgICBpZiAodGhpcy5pc0hpZGRlbigpKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCBpbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbiB8IG51bGwgPSBudWxsO1xuXG4gICAgaW50ZXJzZWN0aW9uID0gdGhpcy5jb250cm9sQ2FnZSEuaW50ZXJzZWN0KHJheSwgc3ViKTtcbiAgICBpZiAoaW50ZXJzZWN0aW9uKSB7XG4gICAgICBpbnRlcnNlY3Rpb24uZGVzY3JpcHRpb24gPSBcImNvbnRyb2wgY2FnZVwiO1xuICAgICAgaW50ZXJzZWN0aW9uLmdlb21ldHJ5ID0gdGhpcztcbiAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gICAgfVxuICAgIGludGVyc2VjdGlvbiA9IHRoaXMubGluZXNCQkghLmFsbW9zdEludGVyc2VjdChyYXksIDEwKTtcbiAgICBpZiAoaW50ZXJzZWN0aW9uKSB7XG4gICAgICBpbnRlcnNlY3Rpb24uZGVzY3JpcHRpb24gPSBcImN1cnZlXCI7XG4gICAgICBpbnRlcnNlY3Rpb24uZ2VvbWV0cnkgPSB0aGlzO1xuICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sQ2FnZSEuZ2V0Qm91bmRpbmdCb3goKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXREZWdyZWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5kZWdyZWU7XG4gIH1cblxuICBwdWJsaWMgYWRkQ29udHJvbFBvaW50KHBvaW50OiBWZWMzLCB3ZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLnB1c2godmVjNC5jcmVhdGUoLi4ucG9pbnQsIHdlaWdodCkpO1xuICAgIHRoaXMua25vdHMgPSBnZW5lcmljS25vdFZlY3Rvcih0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGgsIHRoaXMuZGVncmVlKTtcbiAgICB0aGlzLnVwZGF0ZVNhbXBsZXMoKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVMYXN0Q29udHJvbFBvaW50KHBvaW50OiBWZWMzLCB3ZWlnaHQ6IG51bWJlcikge1xuICAgIHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzW3RoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aCAtIDFdID0gdmVjNC5jcmVhdGUoLi4ucG9pbnQsIHdlaWdodCk7XG4gICAgdGhpcy51cGRhdGVTYW1wbGVzKCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTGFzdENvbnRyb2xQb2ludCgpOiB2b2lkIHtcbiAgICB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5wb3AoKTtcbiAgICBpZiAodGhpcy5kZWdyZWUgPT09IHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aCkgdGhpcy5kZWdyZWUtLTtcbiAgICB0aGlzLmtub3RzID0gZ2VuZXJpY0tub3RWZWN0b3IodGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoLCB0aGlzLmRlZ3JlZSk7XG4gICAgdGhpcy51cGRhdGVTYW1wbGVzKCk7XG4gIH1cblxuICBwdWJsaWMgY2hhbmdlRGVncmVlKGRlZ3JlZTogbnVtYmVyKSB7XG4gICAgd2hpbGUgKGRlZ3JlZSA+PSB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGgpIGRlZ3JlZS0tO1xuICAgIHRoaXMuZGVncmVlID0gZGVncmVlO1xuICAgIHRoaXMua25vdHMgPSBnZW5lcmljS25vdFZlY3Rvcih0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGgsIHRoaXMuZGVncmVlKTtcbiAgICB0aGlzLnVwZGF0ZVNhbXBsZXMoKTtcbiAgfVxuXG5cbiAgcHVibGljIGdldENvbnRyb2xQb2ludENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU2FtcGxlcyh1cGRhdGVDYWdlOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuXG4gICAgY29uc3QgY2FnZVByZXZpb3VzbHlTaG93aW5nOiBib29sZWFuID0gIXRoaXMuY29udHJvbENhZ2U/LmlzSGlkZGVuKCkgPz8gZmFsc2U7XG5cbiAgICBpZiAodXBkYXRlQ2FnZSkgdGhpcy5jb250cm9sQ2FnZT8uZGVsZXRlKCk7XG4gICAgaWYgKHRoaXMubGluZXMpIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTGluZXModGhpcy5saW5lcyk7XG5cbiAgICB0aGlzLnVQZXJTYW1wbGUgPSBbXTtcbiAgICBjb25zdCBzYW1wbGVDb3VudDogbnVtYmVyID0gQ3VydmUuU0FNUExFU19QRVJfRURHRSAqICh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGggLSAxKTtcbiAgICBjb25zdCBzYW1wbGVzOiBWZWMzW10gPSBbXTtcbiAgICBjb25zdCBpbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IHN1YlNlbGVjdGlvbjogYm9vbGVhbltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc2FtcGxlQ291bnQ7IGkrKykge1xuICAgICAgY29uc3QgdTogbnVtYmVyID0gKGkgLyBzYW1wbGVDb3VudCkgKiB0aGlzLmtub3RzLmF0KC0xKSE7XG4gICAgICB0aGlzLnVQZXJTYW1wbGUucHVzaCh1KTtcbiAgICAgIHNhbXBsZXMucHVzaCh0aGlzLnNhbXBsZSh1KSk7XG4gICAgICBzdWJTZWxlY3Rpb24ucHVzaChmYWxzZSk7XG4gICAgICBpbmRpY2VzLnB1c2goaSwgaSArIDEpO1xuICAgIH1cbiAgICBpbmRpY2VzLnBvcCgpO1xuICAgIGluZGljZXMucG9wKCk7XG5cbiAgICBjb25zdCBjb250cm9sUG9pbnRBcnJheTogVmVjM1tdID0gdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubWFwKChwb2ludDogVmVjNCkgPT4ge1xuICAgICAgcmV0dXJuIHZlYzMuY3JlYXRlKHBvaW50WzBdIC8gcG9pbnRbM10sIHBvaW50WzFdIC8gcG9pbnRbM10sIHBvaW50WzJdIC8gcG9pbnRbM10pO1xuICAgIH0pO1xuXG5cbiAgICB0aGlzLmxpbmVzID0gbmV3IFJlbmRlckxpbmVzKHRoaXMsIHNhbXBsZXMsIGluZGljZXMsIHN1YlNlbGVjdGlvbik7XG4gICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRSZW5kZXJMaW5lcyh0aGlzLmxpbmVzKTtcbiAgICB0aGlzLmxpbmVzQkJIID0gbmV3IExpbmVCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLCBzYW1wbGVzLCBpbmRpY2VzKTtcbiAgICBpZiAodXBkYXRlQ2FnZSkgdGhpcy5jb250cm9sQ2FnZSA9IG5ldyBDb250cm9sQ2FnZTFEKHRoaXMsIGNvbnRyb2xQb2ludEFycmF5KTtcbiAgICBpZiAoY2FnZVByZXZpb3VzbHlTaG93aW5nKSB0aGlzLmNvbnRyb2xDYWdlIS5zaG93KCk7XG5cbiAgfVxuXG4gIHB1YmxpYyBzYW1wbGUodTogbnVtYmVyKTogVmVjMyB7XG4gICAgY29uc3Qga25vdFNwYW46IG51bWJlciA9IHNwYW4odGhpcy5rbm90cywgdSwgdGhpcy5kZWdyZWUpXG4gICAgY29uc3QgZnVuY3M6IG51bWJlcltdID0gYmFzaXNGdW5jcyh0aGlzLmtub3RzLCB1LCB0aGlzLmRlZ3JlZSk7XG4gICAgbGV0IHJlczogVmVjNCA9IHZlYzQuY3JlYXRlKDAsIDAsIDAsIDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHRoaXMuZGVncmVlOyBpKyspIHtcbiAgICAgIHJlcyA9IHZlYzQuYWRkKHJlcywgdmVjNC5zY2FsZSh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1trbm90U3BhbiAtIHRoaXMuZGVncmVlICsgaV0sIGZ1bmNzW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiB2ZWMzLmNyZWF0ZShyZXNbMF0gLyByZXNbM10sIHJlc1sxXSAvIHJlc1szXSwgcmVzWzJdIC8gcmVzWzNdKTtcbiAgfVxuXG4gIHB1YmxpYyBub3JtYWxpemVLbm90cygpOiB2b2lkIHtcbiAgICBjb25zdCBzdGFydDogbnVtYmVyID0gdGhpcy5rbm90c1swXTtcbiAgICBjb25zdCBlbmQ6IG51bWJlciA9IHRoaXMua25vdHNbdGhpcy5rbm90cy5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBkaXN0ID0gZW5kIC0gc3RhcnQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmtub3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmtub3RzW2ldID0gKHRoaXMua25vdHNbaV0gLSBzdGFydCkgLyBkaXN0O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpbnNlcnRLbm90KGtub3Q6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiaW5zc2VydGluZyBrbm90IGF0XCIsIGtub3QpO1xuICAgIGNvbnNvbGUubG9nKFwia25vdHMgYmVmb3JlXCIsIC4uLnRoaXMua25vdHMpO1xuICAgIGNvbnN0IGlkeDogbnVtYmVyID0gc3Bhbih0aGlzLmtub3RzLCBrbm90LCB0aGlzLmRlZ3JlZSk7XG4gICAgY29uc3QgbmV3V2VpZ2h0ZWRDb250cm9sUG9pbnRzOiBWZWM0W10gPSBbXTtcbiAgICBuZXdXZWlnaHRlZENvbnRyb2xQb2ludHMucHVzaCh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1swXSk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGFscGhhOiBudW1iZXI7XG4gICAgICBpZiAoaSA8PSBpZHggLSB0aGlzLmRlZ3JlZSkgYWxwaGEgPSAxO1xuICAgICAgZWxzZSBpZiAoaSA+PSBpZHggKyAxKSBhbHBoYSA9IDA7XG4gICAgICBlbHNlIGFscGhhID0gKGtub3QgLSB0aGlzLmtub3RzW2ldKSAvICh0aGlzLmtub3RzW2kgKyB0aGlzLmRlZ3JlZV0gLSB0aGlzLmtub3RzW2ldKTtcbiAgICAgIG5ld1dlaWdodGVkQ29udHJvbFBvaW50cy5wdXNoKHZlYzQuYWRkKFxuICAgICAgICB2ZWM0LnNjYWxlKHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzW2ldLCBhbHBoYSksXG4gICAgICAgIHZlYzQuc2NhbGUodGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbaSAtIDFdLCAxIC0gYWxwaGEpXG4gICAgICApKTtcbiAgICB9XG4gICAgbmV3V2VpZ2h0ZWRDb250cm9sUG9pbnRzLnB1c2godGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoIC0gMV0pO1xuICAgIHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzID0gbmV3V2VpZ2h0ZWRDb250cm9sUG9pbnRzO1xuXG4gICAgdGhpcy5rbm90cy5wdXNoKGtub3QpO1xuICAgIHRoaXMua25vdHMuc29ydCgpO1xuICAgIGNvbnNvbGUubG9nKFwia25vdHMgYWZ0ZXJcIiwgLi4udGhpcy5rbm90cyk7XG5cbiAgICB0aGlzLnVwZGF0ZVNhbXBsZXMoKTtcblxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGdldFR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQ3VydmVcIjtcbiAgfVxuXG4gIHB1YmxpYyBpc1dpdGhpbkZydXN0dW0oZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuaXNIaWRkZW4oKSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLmxpbmVzQkJIIS5pc1dpdGhpbkZydXN0dW0oZnJ1c3R1bSwgaW5jbHVzaXZlKSB8fFxuICAgICAgKCF0aGlzLmNvbnRyb2xDYWdlIS5pc0hpZGRlbigpICYmIHRoaXMuY29udHJvbENhZ2UhLmlzV2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpKTtcbiAgfVxuXG5cbiAgcHVibGljIGVsZXZhdGVEZWdyZWUobjogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVE9ETzogY2xlYW4gdXBcbiAgICBjb25zdCBuZXdEZWdyZWU6IG51bWJlciA9IHRoaXMuZGVncmVlICsgbjtcbiAgICBjb25zdCBiZXppZXJBbHBoYXMgPSBjYWxjQmV6aWVyQWxwaGFzKHRoaXMuZGVncmVlLCBuZXdEZWdyZWUpO1xuICAgIGNvbnN0IGJlemllckNvbnRyb2xzOiBWZWM0W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGVncmVlICsgMTsgaSsrKSBiZXppZXJDb250cm9scy5wdXNoKHZlYzQuY3JlYXRlKCkpO1xuICAgIGNvbnN0IGVsZXZhdGVkQmV6aWVyQ29udHJvbHM6IFZlYzRbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kZWdyZWUgKyBuICsgMTsgaSsrKSBlbGV2YXRlZEJlemllckNvbnRyb2xzLnB1c2godmVjNC5jcmVhdGUoKSk7XG4gICAgY29uc3QgbmV4dEJlemllckNvbnRyb2xzOiBWZWM0W10gPSBbXTtcbiAgICBjb25zdCBhbHBoYXM6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlZ3JlZSAtIDE7IGkrKykge1xuICAgICAgbmV4dEJlemllckNvbnRyb2xzLnB1c2godmVjNC5jcmVhdGUoKSk7XG4gICAgICBhbHBoYXMucHVzaCgwKTtcbiAgICB9XG5cbiAgICBsZXQgZGlzdGluY3RLbm90cyA9IDE7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmtub3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5rbm90c1tpXSAhPSB0aGlzLmtub3RzW2kgLSAxXSkgZGlzdGluY3RLbm90cysrO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0NvbnRyb2xQb2ludHM6IFZlYzRbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubGVuZ3RoICsgbiAqIChkaXN0aW5jdEtub3RzIC0gMSk7IGkrKykge1xuICAgICAgbmV3Q29udHJvbFBvaW50cy5wdXNoKHZlYzQuY3JlYXRlKCkpO1xuICAgIH1cbiAgICBjb25zdCBuZXdLbm90czogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMua25vdHMubGVuZ3RoICsgbiAqIGRpc3RpbmN0S25vdHM7IGkrKykgbmV3S25vdHMucHVzaCgwKTtcblxuXG4gICAgLy8gSW5pdGlhbGl6ZSBGaXJzdCBTZWdtZW50XG4gICAgbGV0IG1oOiBudW1iZXIgPSBuZXdEZWdyZWU7XG4gICAgbGV0IGtpbmQ6IG51bWJlciA9IG5ld0RlZ3JlZSArIDE7XG4gICAgbGV0IHI6IG51bWJlciA9IC0xO1xuICAgIGxldCBhOiBudW1iZXIgPSB0aGlzLmRlZ3JlZTtcbiAgICBsZXQgYjogbnVtYmVyID0gdGhpcy5kZWdyZWUgKyAxO1xuICAgIGxldCBjaW5kOiBudW1iZXIgPSAxO1xuICAgIGxldCB1YTogbnVtYmVyID0gdGhpcy5rbm90c1swXTtcbiAgICBuZXdDb250cm9sUG9pbnRzWzBdID0gdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbMF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gbmV3RGVncmVlOyBpKyspIG5ld0tub3RzW2ldID0gdWE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdGhpcy5kZWdyZWU7IGkrKykgYmV6aWVyQ29udHJvbHNbaV0gPSB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1tpXTtcblxuICAgIC8vbWFpbiBsb29wXG4gICAgd2hpbGUgKGIgPCB0aGlzLmtub3RzLmxlbmd0aCAtIDEpIHtcbiAgICAgIGNvbnN0IElESzogbnVtYmVyID0gYjtcbiAgICAgIHdoaWxlIChiIDwgdGhpcy5rbm90cy5sZW5ndGggLSAxICYmIHRoaXMua25vdHNbYl0gPT0gdGhpcy5rbm90c1tiICsgMV0pIGIrKztcbiAgICAgIGNvbnN0IG11bDogbnVtYmVyID0gYiAtIElESyArIDE7XG4gICAgICBtaCArPSBtdWwgKyBuO1xuICAgICAgY29uc3QgdWI6IG51bWJlciA9IHRoaXMua25vdHNbYl07XG4gICAgICBjb25zdCBvbGRyOiBudW1iZXIgPSByO1xuICAgICAgciA9IHRoaXMuZGVncmVlIC0gbXVsO1xuICAgICAgY29uc3QgbGJ6OiBudW1iZXIgPSAob2xkciA+IDApID8gTWF0aC5mbG9vcigob2xkciArIDIpIC8gMikgOiAxO1xuICAgICAgY29uc3QgcmJ6OiBudW1iZXIgPSAociA+IDApID8gbmV3RGVncmVlIC0gTWF0aC5mbG9vcigociArIDEpIC8gMikgOiBuZXdEZWdyZWU7XG4gICAgICAvLyBpbnNlcnQga25vdHMgIFxuICAgICAgaWYgKHIgPiAwKSB7XG4gICAgICAgIGNvbnN0IG51bTogbnVtYmVyID0gdWIgLSB1YTtcbiAgICAgICAgZm9yIChsZXQgayA9IHRoaXMuZGVncmVlOyBrID4gbXVsOyBrLS0pIGFscGhhc1trIC0gbXVsIC0gMV0gPSBudW0gLyAodGhpcy5rbm90c1thICsga10gLSB1YSk7XG4gICAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHI7IGorKykge1xuICAgICAgICAgIGNvbnN0IHNhdmU6IG51bWJlciA9IHIgLSBqO1xuICAgICAgICAgIGNvbnN0IHM6IG51bWJlciA9IG11bCArIGo7XG4gICAgICAgICAgZm9yIChsZXQgayA9IHRoaXMuZGVncmVlOyBrID49IHM7IGstLSkge1xuICAgICAgICAgICAgYmV6aWVyQ29udHJvbHNba10gPSB2ZWM0LmFkZChcbiAgICAgICAgICAgICAgdmVjNC5zY2FsZShiZXppZXJDb250cm9sc1trXSwgYWxwaGFzW2sgLSBzXSksXG4gICAgICAgICAgICAgIHZlYzQuc2NhbGUoYmV6aWVyQ29udHJvbHNbayAtIDFdLCAxIC0gYWxwaGFzW2sgLSBzXSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRCZXppZXJDb250cm9sc1tzYXZlXSA9IGJlemllckNvbnRyb2xzW3RoaXMuZGVncmVlXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gRWxldmF0ZSBCZXppZXIgXG4gICAgICBmb3IgKGxldCBpID0gbGJ6OyBpIDw9IG5ld0RlZ3JlZTsgaSsrKSB7XG4gICAgICAgIGVsZXZhdGVkQmV6aWVyQ29udHJvbHNbaV0gPSB2ZWM0LmNyZWF0ZSgwLCAwLCAwLCAwKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IE1hdGgubWF4KDAsIGkgLSBuKTsgaiA8PSBNYXRoLm1pbih0aGlzLmRlZ3JlZSwgaSk7IGorKykge1xuICAgICAgICAgIGVsZXZhdGVkQmV6aWVyQ29udHJvbHNbaV0gPSB2ZWM0LmFkZChlbGV2YXRlZEJlemllckNvbnRyb2xzW2ldLFxuICAgICAgICAgICAgdmVjNC5zY2FsZShiZXppZXJDb250cm9sc1tqXSwgYmV6aWVyQWxwaGFzW2ldW2pdKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vICBSZW1vdmUga25vdHNcbiAgICAgIGlmIChvbGRyID4gMSkge1xuICAgICAgICB2YXIgZmlyc3Q6IG51bWJlciA9IGtpbmQgLSAyO1xuICAgICAgICB2YXIgbGFzdDogbnVtYmVyID0ga2luZDtcbiAgICAgICAgY29uc3QgZGVuOiBudW1iZXIgPSB1YiAtIHVhO1xuICAgICAgICBjb25zdCBiZXQ6IG51bWJlciA9ICh1YiAtIG5ld0tub3RzW2tpbmQgLSAxXSkgLyBkZW47XG4gICAgICAgIGZvciAobGV0IHRyID0gMTsgdHIgPCBvbGRyOyB0cisrKSB7XG4gICAgICAgICAgbGV0IGk6IG51bWJlciA9IGZpcnN0O1xuICAgICAgICAgIGxldCBqOiBudW1iZXIgPSBsYXN0O1xuICAgICAgICAgIGxldCBrajogbnVtYmVyID0gaiAtIGtpbmQgKyAxO1xuICAgICAgICAgIHdoaWxlIChqIC0gaSA+IHRyKSB7XG4gICAgICAgICAgICBpZiAoaSA8IGNpbmQpIHtcbiAgICAgICAgICAgICAgY29uc3QgYWxmID0gKHViIC0gbmV3S25vdHNbaV0pIC8gKHVhIC0gbmV3S25vdHNbaV0pO1xuICAgICAgICAgICAgICBuZXdDb250cm9sUG9pbnRzW2ldID0gdmVjNC5hZGQoXG4gICAgICAgICAgICAgICAgdmVjNC5zY2FsZShuZXdDb250cm9sUG9pbnRzW2ldLCBhbGYpLFxuICAgICAgICAgICAgICAgIHZlYzQuc2NhbGUobmV3Q29udHJvbFBvaW50c1tpIC0gMV0sIDEgLSBhbGYpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaiA+PSBsYnopIHtcbiAgICAgICAgICAgICAgaWYgKGogLSB0ciA8PSBraW5kIC0gbmV3RGVncmVlIC0gb2xkcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdhbTogbnVtYmVyID0gKHViIC0gbmV3S25vdHNbaiAtIHRyXSkgLyBkZW47XG4gICAgICAgICAgICAgICAgZWxldmF0ZWRCZXppZXJDb250cm9sc1tral0gPSB2ZWM0LmFkZChcbiAgICAgICAgICAgICAgICAgIHZlYzQuc2NhbGUoZWxldmF0ZWRCZXppZXJDb250cm9sc1tral0sIGdhbSksXG4gICAgICAgICAgICAgICAgICB2ZWM0LnNjYWxlKGVsZXZhdGVkQmV6aWVyQ29udHJvbHNba2ogKyAxXSwgMSAtIGdhbSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZXZhdGVkQmV6aWVyQ29udHJvbHNba2pdID0gdmVjNC5hZGQoXG4gICAgICAgICAgICAgICAgICB2ZWM0LnNjYWxlKGVsZXZhdGVkQmV6aWVyQ29udHJvbHNba2pdLCBiZXQpLFxuICAgICAgICAgICAgICAgICAgdmVjNC5zY2FsZShlbGV2YXRlZEJlemllckNvbnRyb2xzW2tqICsgMV0sIDEgLSBiZXQpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrOyBqLS07IGtqLS07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZpcnN0LS07IGxhc3QrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGEgIT0gdGhpcy5kZWdyZWUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdEZWdyZWUgLSBvbGRyOyBpKyspIHtcbiAgICAgICAgICBuZXdLbm90c1traW5kKytdID0gdWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGogPSBsYno7IGogPD0gcmJ6OyBqKyspIHtcbiAgICAgICAgbmV3Q29udHJvbFBvaW50c1tjaW5kKytdID0gZWxldmF0ZWRCZXppZXJDb250cm9sc1tqXTtcbiAgICAgIH1cbiAgICAgIGlmIChiIDwgdGhpcy5rbm90cy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcjsgaisrKSBiZXppZXJDb250cm9sc1tqXSA9IG5leHRCZXppZXJDb250cm9sc1tqXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IHI7IGogPD0gdGhpcy5kZWdyZWU7IGorKykge1xuICAgICAgICAgIGJlemllckNvbnRyb2xzW2pdID0gdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbYiAtIHRoaXMuZGVncmVlICsgal07XG4gICAgICAgIH1cbiAgICAgICAgYSA9IGIrKztcbiAgICAgICAgdWEgPSB1YjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG5ld0RlZ3JlZTsgaSsrKSB7XG4gICAgICAgICAgbmV3S25vdHNba2luZCArIGldID0gdWI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgICB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cyA9IG5ld0NvbnRyb2xQb2ludHM7XG4gICAgdGhpcy5rbm90cyA9IG5ld0tub3RzO1xuICAgIHRoaXMuZGVncmVlID0gbmV3RGVncmVlO1xuXG4gICAgdGhpcy51cGRhdGVTYW1wbGVzKCk7XG5cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/curve.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/loft.ts":
/*!************************************!*\
  !*** ./src/geometry/nurbs/loft.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loft: () => (/* binding */ loft)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _surface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./surface */ \"./src/geometry/nurbs/surface.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/geometry/nurbs/utils.ts\");\n\n\n\nconst loft = function (curves, degree) {\n    const duplicates = [];\n    for (const c of curves)\n        duplicates.push(c.clone());\n    const degreeU = Math.min(degree, duplicates.length - 1);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_1__.matchDegrees)(duplicates);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_1__.matchKnots)(duplicates);\n    let degreeV = duplicates[0].getDegree();\n    const points = [];\n    for (let i = 0; i < duplicates.length; i++) {\n        const curve = duplicates[i];\n        const curveControls = curve.getWeightedControlPoints();\n        points.push([]);\n        for (let j = 0; j < curveControls.length; j++) {\n            const model = curve.getModelRecursive();\n            const weight = curveControls[j][3];\n            var point = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(curveControls[j][0] / weight, curveControls[j][1] / weight, curveControls[j][2] / weight);\n            point = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.transformMat4(point, model);\n            points[i].push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec4.create(point[0] * weight, point[1] * weight, point[2] * weight, weight));\n        }\n    }\n    const knotsU = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.genericKnotVector)(duplicates.length, degreeU);\n    const res = new _surface__WEBPACK_IMPORTED_MODULE_0__.Surface(points, knotsU, duplicates[0].getKnots(), degreeU, degreeV);\n    for (const c of duplicates)\n        c.delete();\n    return res;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbnVyYnMvbG9mdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJEO0FBRXZCO0FBQ2tDO0FBSy9ELE1BQU0sSUFBSSxHQUFHLFVBQVMsTUFBZSxFQUFFLE1BQWM7SUFFMUQsTUFBTSxVQUFVLEdBQVksRUFBRSxDQUFDO0lBQy9CLEtBQUssTUFBTSxDQUFDLElBQUksTUFBTTtRQUFFLFVBQVUsQ0FBQyxJQUFJLENBQVEsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7SUFFMUQsTUFBTSxPQUFPLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNoRSxvREFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pCLGtEQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdkIsSUFBSSxPQUFPLEdBQVcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBRWhELE1BQU0sTUFBTSxHQUFhLEVBQUUsQ0FBQztJQUM1QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMxQyxNQUFNLEtBQUssR0FBVSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxhQUFhLEdBQVcsS0FBSyxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDL0QsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM3QyxNQUFNLEtBQUssR0FBUyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUM5QyxNQUFNLE1BQU0sR0FBVyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0MsSUFBSSxLQUFLLEdBQVMsNkNBQUksQ0FBQyxNQUFNLENBQzNCLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQzVCLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQzVCLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQzdCLENBQUM7WUFDRixLQUFLLEdBQUcsNkNBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQ3hCLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQ2pCLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQ2pCLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQ2pCLE1BQU0sQ0FDUCxDQUFDLENBQUM7U0FDSjtLQUNGO0lBRUQsTUFBTSxNQUFNLEdBQWEseURBQWlCLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUV2RSxNQUFNLEdBQUcsR0FBWSxJQUFJLDZDQUFPLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBRTdGLEtBQUssTUFBTSxDQUFDLElBQUksVUFBVTtRQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUV2QyxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9udXJicy9sb2Z0LnRzP2U1NDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgVmVjMywgdmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi9jdXJ2ZVwiO1xuaW1wb3J0IHsgU3VyZmFjZSB9IGZyb20gXCIuL3N1cmZhY2VcIjtcbmltcG9ydCB7IGdlbmVyaWNLbm90VmVjdG9yLCBtYXRjaERlZ3JlZXMsIG1hdGNoS25vdHMgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5cblxuXG5leHBvcnQgY29uc3QgbG9mdCA9IGZ1bmN0aW9uKGN1cnZlczogQ3VydmVbXSwgZGVncmVlOiBudW1iZXIpOiBTdXJmYWNlIHtcblxuICBjb25zdCBkdXBsaWNhdGVzOiBDdXJ2ZVtdID0gW107XG4gIGZvciAoY29uc3QgYyBvZiBjdXJ2ZXMpIGR1cGxpY2F0ZXMucHVzaCg8Q3VydmU+Yy5jbG9uZSgpKTtcblxuICBjb25zdCBkZWdyZWVVOiBudW1iZXIgPSBNYXRoLm1pbihkZWdyZWUsIGR1cGxpY2F0ZXMubGVuZ3RoIC0gMSk7XG4gIG1hdGNoRGVncmVlcyhkdXBsaWNhdGVzKTtcbiAgbWF0Y2hLbm90cyhkdXBsaWNhdGVzKTtcbiAgbGV0IGRlZ3JlZVY6IG51bWJlciA9IGR1cGxpY2F0ZXNbMF0uZ2V0RGVncmVlKCk7XG5cbiAgY29uc3QgcG9pbnRzOiBWZWM0W11bXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGR1cGxpY2F0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjdXJ2ZTogQ3VydmUgPSBkdXBsaWNhdGVzW2ldO1xuICAgIGNvbnN0IGN1cnZlQ29udHJvbHM6IFZlYzRbXSA9IGN1cnZlLmdldFdlaWdodGVkQ29udHJvbFBvaW50cygpO1xuICAgIHBvaW50cy5wdXNoKFtdKTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGN1cnZlQ29udHJvbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGNvbnN0IG1vZGVsOiBNYXQ0ID0gY3VydmUuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICAgIGNvbnN0IHdlaWdodDogbnVtYmVyID0gY3VydmVDb250cm9sc1tqXVszXTtcbiAgICAgIHZhciBwb2ludDogVmVjMyA9IHZlYzMuY3JlYXRlKFxuICAgICAgICBjdXJ2ZUNvbnRyb2xzW2pdWzBdIC8gd2VpZ2h0LFxuICAgICAgICBjdXJ2ZUNvbnRyb2xzW2pdWzFdIC8gd2VpZ2h0LFxuICAgICAgICBjdXJ2ZUNvbnRyb2xzW2pdWzJdIC8gd2VpZ2h0LFxuICAgICAgKTtcbiAgICAgIHBvaW50ID0gdmVjMy50cmFuc2Zvcm1NYXQ0KHBvaW50LCBtb2RlbCk7XG4gICAgICBwb2ludHNbaV0ucHVzaCh2ZWM0LmNyZWF0ZShcbiAgICAgICAgcG9pbnRbMF0gKiB3ZWlnaHQsXG4gICAgICAgIHBvaW50WzFdICogd2VpZ2h0LFxuICAgICAgICBwb2ludFsyXSAqIHdlaWdodCxcbiAgICAgICAgd2VpZ2h0XG4gICAgICApKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBrbm90c1U6IG51bWJlcltdID0gZ2VuZXJpY0tub3RWZWN0b3IoZHVwbGljYXRlcy5sZW5ndGgsIGRlZ3JlZVUpO1xuXG4gIGNvbnN0IHJlczogU3VyZmFjZSA9IG5ldyBTdXJmYWNlKHBvaW50cywga25vdHNVLCBkdXBsaWNhdGVzWzBdLmdldEtub3RzKCksIGRlZ3JlZVUsIGRlZ3JlZVYpO1xuXG4gIGZvciAoY29uc3QgYyBvZiBkdXBsaWNhdGVzKSBjLmRlbGV0ZSgpO1xuXG4gIHJldHVybiByZXM7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/loft.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/revolve.ts":
/*!***************************************!*\
  !*** ./src/geometry/nurbs/revolve.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   revolve: () => (/* binding */ revolve)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _surface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./surface */ \"./src/geometry/nurbs/surface.ts\");\n\n\n\nconst revolve = function (axis, curve, theta) {\n    if (theta < 0 || theta > Math.PI * 2)\n        throw new Error(\"Invalid params\");\n    const outKnots = [];\n    var narcs;\n    if (theta <= Math.PI / 2) {\n        narcs = 1;\n        outKnots.push(0, 0, 0, 1, 1, 1);\n    }\n    else if (theta <= Math.PI) {\n        narcs = 2;\n        outKnots.push(0, 0, 0, 0.5, 0.5, 1, 1, 1);\n    }\n    else if (theta <= 3 * Math.PI / 2) {\n        narcs = 3;\n        outKnots.push(0, 0, 0, 1 / 3, 1 / 3, 2 / 3, 2 / 3, 1, 1, 1);\n    }\n    else {\n        narcs = 4;\n        outKnots.push(0, 0, 0, 1 / 4, 1 / 4, 2 / 4, 2 / 4, 3 / 4, 3 / 4, 1, 1, 1);\n    }\n    const outControls = [];\n    const outWeights = [];\n    for (let i = 0; i <= 2 * narcs; i++) {\n        outControls.push([]);\n        outWeights.push([]);\n    }\n    const dTheta = theta / narcs;\n    const wm = Math.cos(dTheta / 2);\n    const cosCash = [];\n    const sinCash = [];\n    for (let i = 0, angle = 0; i < narcs; i++) {\n        angle += dTheta;\n        cosCash.push(Math.cos(angle));\n        sinCash.push(Math.sin(angle));\n    }\n    const model = curve.getModelRecursive();\n    const points = [];\n    const weights = [];\n    for (const point of curve.getWeightedControlPoints()) {\n        weights.push(point[3]);\n        const p = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(point[0] / point[3], point[1] / point[3], point[2] / point[3]);\n        points.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.transformMat4(p, model));\n    }\n    for (let j = 0; j < points.length; j++) {\n        var P0 = points[j];\n        const W0 = weights[j];\n        const O = axis.closestPointToPoint(P0);\n        if (isNaN(O[0]))\n            alert(1);\n        var X = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(P0, O);\n        const r = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.length(X);\n        if (X[0] === 0 && X[1] === 0 && X[2] === 0) {\n            X = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(1, 0, 0);\n        }\n        else {\n            X = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(X, 1 / r);\n        }\n        const Y = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.cross(axis.getDirection(), X);\n        if (isNaN(Y[0]))\n            alert(2);\n        outControls[0].push(P0);\n        outWeights[0].push(W0);\n        var T0 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.clone(Y);\n        var index = 0;\n        for (let i = 0; i < narcs; i++) {\n            const P2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(O, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(X, r * cosCash[i]), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(Y, r * sinCash[i])));\n            if (isNaN(P2[0]))\n                alert(3);\n            const T2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.sub(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(Y, cosCash[i]), wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(X, sinCash[i]));\n            if (isNaN(T2[0]))\n                alert(4);\n            const ray = new _ray__WEBPACK_IMPORTED_MODULE_0__.Ray(P0, T0);\n            outControls[index + 1].push(ray.closestPointOnLine(P2, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(P2, T2)));\n            outWeights[index + 1].push(wm * weights[j]);\n            outControls[index + 2].push(P2);\n            outWeights[index + 2].push(weights[j]);\n            index += 2;\n            if (i < narcs - 1) {\n                P0 = P2;\n                T0 = T2;\n            }\n        }\n    }\n    const outWeightedControls = [];\n    for (let i = 0; i < outControls.length; i++) {\n        const temp = [];\n        for (let j = 0; j < outControls[0].length; j++) {\n            temp.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec4.create(...wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(outControls[i][j], outWeights[i][j]), outWeights[i][j]));\n            if (isNaN(outWeights[i][j])) {\n                alert(5);\n            }\n            if (isNaN(outControls[i][j][0])) {\n                alert(6);\n            }\n        }\n        outWeightedControls.push(temp);\n    }\n    return new _surface__WEBPACK_IMPORTED_MODULE_1__.Surface(outWeightedControls, outKnots, [...curve.getKnots()], 2, curve.getDegree());\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbnVyYnMvcmV2b2x2ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJEO0FBQzlCO0FBRU87QUFFN0IsTUFBTSxPQUFPLEdBQUcsVUFBUyxJQUFTLEVBQUUsS0FBWSxFQUFFLEtBQWE7SUFFcEUsSUFBSSxLQUFLLEdBQUcsQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUM7UUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFFeEUsTUFBTSxRQUFRLEdBQWEsRUFBRSxDQUFDO0lBQzlCLElBQUksS0FBYSxDQUFDO0lBQ2xCLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFO1FBQ3hCLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDVixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDakM7U0FBTSxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQzNCLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDVixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUMzQztTQUFNLElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRTtRQUNuQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDN0Q7U0FBTTtRQUNMLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDVixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDM0U7SUFFRCxNQUFNLFdBQVcsR0FBYSxFQUFFLENBQUM7SUFDakMsTUFBTSxVQUFVLEdBQWUsRUFBRSxDQUFDO0lBQ2xDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ25DLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDckIsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUNyQjtJQUVELE1BQU0sTUFBTSxHQUFXLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDckMsTUFBTSxFQUFFLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDeEMsTUFBTSxPQUFPLEdBQWEsRUFBRSxDQUFDO0lBQzdCLE1BQU0sT0FBTyxHQUFhLEVBQUUsQ0FBQztJQUM3QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDekMsS0FBSyxJQUFJLE1BQU0sQ0FBQztRQUNoQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUM5QixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztLQUMvQjtJQUNELE1BQU0sS0FBSyxHQUFTLEtBQUssQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzlDLE1BQU0sTUFBTSxHQUFXLEVBQUUsQ0FBQztJQUMxQixNQUFNLE9BQU8sR0FBYSxFQUFFLENBQUM7SUFDN0IsS0FBSyxNQUFNLEtBQUssSUFBSSxLQUFLLENBQUMsd0JBQXdCLEVBQUUsRUFBRTtRQUNwRCxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZCLE1BQU0sQ0FBQyxHQUFTLDZDQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0YsTUFBTSxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztLQUMzQztJQUVELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBRXRDLElBQUksRUFBRSxHQUFTLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixNQUFNLEVBQUUsR0FBVyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFOUIsTUFBTSxDQUFDLEdBQVMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUIsTUFBTSxDQUFDLEdBQVcsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFakMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUMxQyxDQUFDLEdBQUcsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUMxQjthQUFNO1lBQ0wsQ0FBQyxHQUFHLDZDQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDMUI7UUFFRCxNQUFNLENBQUMsR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbkQsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTFCLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDeEIsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUV2QixJQUFJLEVBQUUsR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QixJQUFJLEtBQUssR0FBVyxDQUFDLENBQUM7UUFFdEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM5QixNQUFNLEVBQUUsR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxHQUFHLENBQUMsNkNBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRyxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNCLE1BQU0sRUFBRSxHQUFTLDZDQUFJLENBQUMsR0FBRyxDQUFDLDZDQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRixJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNCLE1BQU0sR0FBRyxHQUFRLElBQUkscUNBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDakMsV0FBVyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLEVBQUUsRUFBRSw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFFLFVBQVUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QyxXQUFXLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNoQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV2QyxLQUFLLElBQUksQ0FBQyxDQUFDO1lBQ1gsSUFBSSxDQUFDLEdBQUcsS0FBSyxHQUFHLENBQUMsRUFBRTtnQkFDakIsRUFBRSxHQUFHLEVBQUUsQ0FBQztnQkFDUixFQUFFLEdBQUcsRUFBRSxDQUFDO2FBQ1Q7U0FDRjtLQUNGO0lBRUQsTUFBTSxtQkFBbUIsR0FBYSxFQUFFLENBQUM7SUFDekMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDM0MsTUFBTSxJQUFJLEdBQVcsRUFBRSxDQUFDO1FBQ3hCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzlDLElBQUksQ0FBQyxJQUFJLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQ25CLEdBQUcsNkNBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUNsRCxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ2pCLENBQUMsQ0FBQztZQUNILElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUMzQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDVjtZQUNELElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUMvQixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDVjtTQUNGO1FBQ0QsbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2hDO0lBRUQsT0FBTyxJQUFJLDZDQUFPLENBQUMsbUJBQW1CLEVBQUUsUUFBUSxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7QUFFakcsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L251cmJzL3Jldm9sdmUudHM/OWI3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXQ0LCB2ZWMzLCBWZWMzLCB2ZWM0LCBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vcmF5XCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuL2N1cnZlXCI7XG5pbXBvcnQgeyBTdXJmYWNlIH0gZnJvbSBcIi4vc3VyZmFjZVwiO1xuXG5leHBvcnQgY29uc3QgcmV2b2x2ZSA9IGZ1bmN0aW9uKGF4aXM6IFJheSwgY3VydmU6IEN1cnZlLCB0aGV0YTogbnVtYmVyKTogU3VyZmFjZSB7XG5cbiAgaWYgKHRoZXRhIDwgMCB8fCB0aGV0YSA+IE1hdGguUEkgKiAyKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtc1wiKTtcblxuICBjb25zdCBvdXRLbm90czogbnVtYmVyW10gPSBbXTtcbiAgdmFyIG5hcmNzOiBudW1iZXI7XG4gIGlmICh0aGV0YSA8PSBNYXRoLlBJIC8gMikge1xuICAgIG5hcmNzID0gMTtcbiAgICBvdXRLbm90cy5wdXNoKDAsIDAsIDAsIDEsIDEsIDEpO1xuICB9IGVsc2UgaWYgKHRoZXRhIDw9IE1hdGguUEkpIHtcbiAgICBuYXJjcyA9IDI7XG4gICAgb3V0S25vdHMucHVzaCgwLCAwLCAwLCAwLjUsIDAuNSwgMSwgMSwgMSk7XG4gIH0gZWxzZSBpZiAodGhldGEgPD0gMyAqIE1hdGguUEkgLyAyKSB7XG4gICAgbmFyY3MgPSAzO1xuICAgIG91dEtub3RzLnB1c2goMCwgMCwgMCwgMSAvIDMsIDEgLyAzLCAyIC8gMywgMiAvIDMsIDEsIDEsIDEpO1xuICB9IGVsc2Uge1xuICAgIG5hcmNzID0gNDtcbiAgICBvdXRLbm90cy5wdXNoKDAsIDAsIDAsIDEgLyA0LCAxIC8gNCwgMiAvIDQsIDIgLyA0LCAzIC8gNCwgMyAvIDQsIDEsIDEsIDEpO1xuICB9XG5cbiAgY29uc3Qgb3V0Q29udHJvbHM6IFZlYzNbXVtdID0gW107XG4gIGNvbnN0IG91dFdlaWdodHM6IG51bWJlcltdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMiAqIG5hcmNzOyBpKyspIHtcbiAgICBvdXRDb250cm9scy5wdXNoKFtdKTtcbiAgICBvdXRXZWlnaHRzLnB1c2goW10pO1xuICB9XG5cbiAgY29uc3QgZFRoZXRhOiBudW1iZXIgPSB0aGV0YSAvIG5hcmNzO1xuICBjb25zdCB3bTogbnVtYmVyID0gTWF0aC5jb3MoZFRoZXRhIC8gMik7XG4gIGNvbnN0IGNvc0Nhc2g6IG51bWJlcltdID0gW107XG4gIGNvbnN0IHNpbkNhc2g6IG51bWJlcltdID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBhbmdsZSA9IDA7IGkgPCBuYXJjczsgaSsrKSB7XG4gICAgYW5nbGUgKz0gZFRoZXRhO1xuICAgIGNvc0Nhc2gucHVzaChNYXRoLmNvcyhhbmdsZSkpO1xuICAgIHNpbkNhc2gucHVzaChNYXRoLnNpbihhbmdsZSkpO1xuICB9XG4gIGNvbnN0IG1vZGVsOiBNYXQ0ID0gY3VydmUuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgY29uc3QgcG9pbnRzOiBWZWMzW10gPSBbXTtcbiAgY29uc3Qgd2VpZ2h0czogbnVtYmVyW10gPSBbXTtcbiAgZm9yIChjb25zdCBwb2ludCBvZiBjdXJ2ZS5nZXRXZWlnaHRlZENvbnRyb2xQb2ludHMoKSkge1xuICAgIHdlaWdodHMucHVzaChwb2ludFszXSk7XG4gICAgY29uc3QgcDogVmVjMyA9IHZlYzMuY3JlYXRlKHBvaW50WzBdIC8gcG9pbnRbM10sIHBvaW50WzFdIC8gcG9pbnRbM10sIHBvaW50WzJdIC8gcG9pbnRbM10pO1xuICAgIHBvaW50cy5wdXNoKHZlYzMudHJhbnNmb3JtTWF0NChwLCBtb2RlbCkpO1xuICB9XG5cbiAgZm9yIChsZXQgaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqKyspIHtcblxuICAgIHZhciBQMDogVmVjMyA9IHBvaW50c1tqXTtcbiAgICBjb25zdCBXMDogbnVtYmVyID0gd2VpZ2h0c1tqXTtcblxuICAgIGNvbnN0IE86IFZlYzMgPSBheGlzLmNsb3Nlc3RQb2ludFRvUG9pbnQoUDApO1xuICAgIGlmIChpc05hTihPWzBdKSkgYWxlcnQoMSk7XG4gICAgdmFyIFg6IFZlYzMgPSB2ZWMzLnN1YihQMCwgTyk7XG4gICAgY29uc3QgcjogbnVtYmVyID0gdmVjMy5sZW5ndGgoWCk7XG5cbiAgICBpZiAoWFswXSA9PT0gMCAmJiBYWzFdID09PSAwICYmIFhbMl0gPT09IDApIHtcbiAgICAgIFggPSB2ZWMzLmNyZWF0ZSgxLCAwLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgWCA9IHZlYzMuc2NhbGUoWCwgMSAvIHIpO1xuICAgIH1cblxuICAgIGNvbnN0IFk6IFZlYzMgPSB2ZWMzLmNyb3NzKGF4aXMuZ2V0RGlyZWN0aW9uKCksIFgpO1xuICAgIGlmIChpc05hTihZWzBdKSkgYWxlcnQoMik7XG5cbiAgICBvdXRDb250cm9sc1swXS5wdXNoKFAwKTtcbiAgICBvdXRXZWlnaHRzWzBdLnB1c2goVzApO1xuXG4gICAgdmFyIFQwOiBWZWMzID0gdmVjMy5jbG9uZShZKTtcbiAgICB2YXIgaW5kZXg6IG51bWJlciA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hcmNzOyBpKyspIHtcbiAgICAgIGNvbnN0IFAyOiBWZWMzID0gdmVjMy5hZGQoTywgdmVjMy5hZGQodmVjMy5zY2FsZShYLCByICogY29zQ2FzaFtpXSksIHZlYzMuc2NhbGUoWSwgciAqIHNpbkNhc2hbaV0pKSk7XG4gICAgICBpZiAoaXNOYU4oUDJbMF0pKSBhbGVydCgzKTtcbiAgICAgIGNvbnN0IFQyOiBWZWMzID0gdmVjMy5zdWIodmVjMy5zY2FsZShZLCBjb3NDYXNoW2ldKSwgdmVjMy5zY2FsZShYLCBzaW5DYXNoW2ldKSk7XG4gICAgICBpZiAoaXNOYU4oVDJbMF0pKSBhbGVydCg0KTtcbiAgICAgIGNvbnN0IHJheTogUmF5ID0gbmV3IFJheShQMCwgVDApO1xuICAgICAgb3V0Q29udHJvbHNbaW5kZXggKyAxXS5wdXNoKHJheS5jbG9zZXN0UG9pbnRPbkxpbmUoUDIsIHZlYzMuYWRkKFAyLCBUMikpKTtcbiAgICAgIG91dFdlaWdodHNbaW5kZXggKyAxXS5wdXNoKHdtICogd2VpZ2h0c1tqXSk7XG4gICAgICBvdXRDb250cm9sc1tpbmRleCArIDJdLnB1c2goUDIpO1xuICAgICAgb3V0V2VpZ2h0c1tpbmRleCArIDJdLnB1c2god2VpZ2h0c1tqXSk7XG5cbiAgICAgIGluZGV4ICs9IDI7XG4gICAgICBpZiAoaSA8IG5hcmNzIC0gMSkge1xuICAgICAgICBQMCA9IFAyO1xuICAgICAgICBUMCA9IFQyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG91dFdlaWdodGVkQ29udHJvbHM6IFZlYzRbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0Q29udHJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB0ZW1wOiBWZWM0W10gPSBbXTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IG91dENvbnRyb2xzWzBdLmxlbmd0aDsgaisrKSB7XG4gICAgICB0ZW1wLnB1c2godmVjNC5jcmVhdGUoXG4gICAgICAgIC4uLnZlYzMuc2NhbGUob3V0Q29udHJvbHNbaV1bal0sIG91dFdlaWdodHNbaV1bal0pLFxuICAgICAgICBvdXRXZWlnaHRzW2ldW2pdXG4gICAgICApKTtcbiAgICAgIGlmIChpc05hTihvdXRXZWlnaHRzW2ldW2pdKSkge1xuICAgICAgICBhbGVydCg1KTtcbiAgICAgIH1cbiAgICAgIGlmIChpc05hTihvdXRDb250cm9sc1tpXVtqXVswXSkpIHtcbiAgICAgICAgYWxlcnQoNik7XG4gICAgICB9XG4gICAgfVxuICAgIG91dFdlaWdodGVkQ29udHJvbHMucHVzaCh0ZW1wKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU3VyZmFjZShvdXRXZWlnaHRlZENvbnRyb2xzLCBvdXRLbm90cywgWy4uLmN1cnZlLmdldEtub3RzKCldLCAyLCBjdXJ2ZS5nZXREZWdyZWUoKSk7XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/revolve.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/sphere.ts":
/*!**************************************!*\
  !*** ./src/geometry/nurbs/sphere.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSphere: () => (/* binding */ createSphere)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _arc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./arc */ \"./src/geometry/nurbs/arc.ts\");\n/* harmony import */ var _revolve__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./revolve */ \"./src/geometry/nurbs/revolve.ts\");\n\n\n\n\nconst createSphere = function (center, radius) {\n    const arc = (0,_arc__WEBPACK_IMPORTED_MODULE_1__.createArc)(center, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(1, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 1, 0), radius, 0, Math.PI);\n    const res = (0,_revolve__WEBPACK_IMPORTED_MODULE_2__.revolve)(new _ray__WEBPACK_IMPORTED_MODULE_0__.Ray(center, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(1, 0, 0)), arc, Math.PI * 2);\n    arc.delete();\n    return res;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbnVyYnMvc3BoZXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBQ1o7QUFDSztBQUVFO0FBSTdCLE1BQU0sWUFBWSxHQUFHLFVBQVMsTUFBWSxFQUFFLE1BQWM7SUFFL0QsTUFBTSxHQUFHLEdBQVUsK0NBQVMsQ0FBQyxNQUFNLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3JHLE1BQU0sR0FBRyxHQUFZLGlEQUFPLENBQUMsSUFBSSxxQ0FBRyxDQUFDLE1BQU0sRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDdEYsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2IsT0FBTyxHQUFHLENBQUM7QUFFYixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbnVyYnMvc3BoZXJlLnRzPzFmODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL3JheVwiO1xuaW1wb3J0IHsgY3JlYXRlQXJjIH0gZnJvbSBcIi4vYXJjXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuL2N1cnZlXCI7XG5pbXBvcnQgeyByZXZvbHZlIH0gZnJvbSBcIi4vcmV2b2x2ZVwiO1xuaW1wb3J0IHsgU3VyZmFjZSB9IGZyb20gXCIuL3N1cmZhY2VcIjtcblxuXG5leHBvcnQgY29uc3QgY3JlYXRlU3BoZXJlID0gZnVuY3Rpb24oY2VudGVyOiBWZWMzLCByYWRpdXM6IG51bWJlcik6IFN1cmZhY2Uge1xuXG4gIGNvbnN0IGFyYzogQ3VydmUgPSBjcmVhdGVBcmMoY2VudGVyLCB2ZWMzLmNyZWF0ZSgxLCAwLCAwKSwgdmVjMy5jcmVhdGUoMCwgMSwgMCksIHJhZGl1cywgMCwgTWF0aC5QSSk7XG4gIGNvbnN0IHJlczogU3VyZmFjZSA9IHJldm9sdmUobmV3IFJheShjZW50ZXIsIHZlYzMuY3JlYXRlKDEsIDAsIDApKSwgYXJjLCBNYXRoLlBJICogMik7XG4gIGFyYy5kZWxldGUoKTtcbiAgcmV0dXJuIHJlcztcblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/sphere.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/splitCurve.ts":
/*!******************************************!*\
  !*** ./src/geometry/nurbs/splitCurve.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   splitCurve: () => (/* binding */ splitCurve)\n/* harmony export */ });\n/* harmony import */ var _curve__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./curve */ \"./src/geometry/nurbs/curve.ts\");\n\nconst splitCurve = function (curve, u) {\n    const temp = curve.clone();\n    const knots = temp.getKnots();\n    let count = 0;\n    for (let knot of knots) {\n        if (knot === u)\n            count++;\n    }\n    for (let i = 0; i < temp.getDegree() - count; i++) {\n        temp.insertKnot(u);\n    }\n    let first = 0;\n    while (knots[first] != u)\n        first++;\n    const knots1 = knots.slice(0, first + curve.getDegree());\n    knots1.push(u);\n    const knots2 = [u, ...knots.slice(first, knots.length)];\n    for (let i = 1; i < knots2.length; i++) {\n        knots2[i] -= knots2[0];\n    }\n    const points = temp.getWeightedControlPoints();\n    const points1 = points.slice(0, knots1.length - curve.getDegree() - 1);\n    const points2 = points.slice(points1.length - 1, points.length);\n    temp.delete();\n    return [\n        new _curve__WEBPACK_IMPORTED_MODULE_0__.Curve(curve.getParent(), points1, curve.getDegree(), knots1, curve.getModel(), curve.getMaterial()),\n        new _curve__WEBPACK_IMPORTED_MODULE_0__.Curve(curve.getParent(), points2, curve.getDegree(), knots2, curve.getModel(), curve.getMaterial()),\n    ];\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvbnVyYnMvc3BsaXRDdXJ2ZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUNnQztBQUV6QixNQUFNLFVBQVUsR0FBRyxVQUFTLEtBQVksRUFBRSxDQUFTO0lBRXhELE1BQU0sSUFBSSxHQUFpQixLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7SUFFekMsTUFBTSxLQUFLLEdBQWEsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBRXhDLElBQUksS0FBSyxHQUFXLENBQUMsQ0FBQztJQUN0QixLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssRUFBRTtRQUFFLElBQUksSUFBSSxLQUFLLENBQUM7WUFBRSxLQUFLLEVBQUUsQ0FBQztLQUFFO0lBRXBELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2pELElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDcEI7SUFHRCxJQUFJLEtBQUssR0FBVyxDQUFDLENBQUM7SUFDdEIsT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztRQUFFLEtBQUssRUFBRSxDQUFDO0lBR2xDLE1BQU0sTUFBTSxHQUFhLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztJQUNuRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWYsTUFBTSxNQUFNLEdBQWEsQ0FBQyxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNsRSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN0QyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3hCO0lBR0QsTUFBTSxNQUFNLEdBQVcsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7SUFDdkQsTUFBTSxPQUFPLEdBQVcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDL0UsTUFBTSxPQUFPLEdBQVcsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFHeEUsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBRWQsT0FBTztRQUNMLElBQUkseUNBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUN2RyxJQUFJLHlDQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7S0FDeEcsQ0FBQztBQUdKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9nZW9tZXRyeS9udXJicy9zcGxpdEN1cnZlLnRzPzdkZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi9jdXJ2ZVwiO1xuXG5leHBvcnQgY29uc3Qgc3BsaXRDdXJ2ZSA9IGZ1bmN0aW9uKGN1cnZlOiBDdXJ2ZSwgdTogbnVtYmVyKTogW0N1cnZlLCBDdXJ2ZV0ge1xuXG4gIGNvbnN0IHRlbXA6IEN1cnZlID0gPEN1cnZlPmN1cnZlLmNsb25lKCk7XG5cbiAgY29uc3Qga25vdHM6IG51bWJlcltdID0gdGVtcC5nZXRLbm90cygpO1xuXG4gIGxldCBjb3VudDogbnVtYmVyID0gMDtcbiAgZm9yIChsZXQga25vdCBvZiBrbm90cykgeyBpZiAoa25vdCA9PT0gdSkgY291bnQrKzsgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcC5nZXREZWdyZWUoKSAtIGNvdW50OyBpKyspIHtcbiAgICB0ZW1wLmluc2VydEtub3QodSk7XG4gIH1cblxuXG4gIGxldCBmaXJzdDogbnVtYmVyID0gMDtcbiAgd2hpbGUgKGtub3RzW2ZpcnN0XSAhPSB1KSBmaXJzdCsrO1xuXG5cbiAgY29uc3Qga25vdHMxOiBudW1iZXJbXSA9IGtub3RzLnNsaWNlKDAsIGZpcnN0ICsgY3VydmUuZ2V0RGVncmVlKCkpO1xuICBrbm90czEucHVzaCh1KTtcblxuICBjb25zdCBrbm90czI6IG51bWJlcltdID0gW3UsIC4uLmtub3RzLnNsaWNlKGZpcnN0LCBrbm90cy5sZW5ndGgpXTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBrbm90czIubGVuZ3RoOyBpKyspIHtcbiAgICBrbm90czJbaV0gLT0ga25vdHMyWzBdO1xuICB9XG5cblxuICBjb25zdCBwb2ludHM6IFZlYzRbXSA9IHRlbXAuZ2V0V2VpZ2h0ZWRDb250cm9sUG9pbnRzKCk7XG4gIGNvbnN0IHBvaW50czE6IFZlYzRbXSA9IHBvaW50cy5zbGljZSgwLCBrbm90czEubGVuZ3RoIC0gY3VydmUuZ2V0RGVncmVlKCkgLSAxKTtcbiAgY29uc3QgcG9pbnRzMjogVmVjNFtdID0gcG9pbnRzLnNsaWNlKHBvaW50czEubGVuZ3RoIC0gMSwgcG9pbnRzLmxlbmd0aCk7XG5cblxuICB0ZW1wLmRlbGV0ZSgpO1xuXG4gIHJldHVybiBbXG4gICAgbmV3IEN1cnZlKGN1cnZlLmdldFBhcmVudCgpLCBwb2ludHMxLCBjdXJ2ZS5nZXREZWdyZWUoKSwga25vdHMxLCBjdXJ2ZS5nZXRNb2RlbCgpLCBjdXJ2ZS5nZXRNYXRlcmlhbCgpKSxcbiAgICBuZXcgQ3VydmUoY3VydmUuZ2V0UGFyZW50KCksIHBvaW50czIsIGN1cnZlLmdldERlZ3JlZSgpLCBrbm90czIsIGN1cnZlLmdldE1vZGVsKCksIGN1cnZlLmdldE1hdGVyaWFsKCkpLFxuICBdO1xuXG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/splitCurve.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/surface.ts":
/*!***************************************!*\
  !*** ./src/geometry/nurbs/surface.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Surface: () => (/* binding */ Surface)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _utils_clone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/clone */ \"./src/utils/clone.ts\");\n/* harmony import */ var _controlCage2D__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../controlCage2D */ \"./src/geometry/controlCage2D.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../mesh */ \"./src/geometry/mesh.ts\");\n/* harmony import */ var _curve__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./curve */ \"./src/geometry/nurbs/curve.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils */ \"./src/geometry/nurbs/utils.ts\");\n\n\n\n\n\n\n\n\nclass Surface extends _geometry__WEBPACK_IMPORTED_MODULE_3__.Geometry {\n    constructor(weightedControlPoints, uKnots, vKnots, degreeU, degreeV, parent = null, model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.identity(), material = null) {\n        super(parent, model, material);\n        this.weightedControlPoints = weightedControlPoints;\n        this.uKnots = uKnots;\n        this.vKnots = vKnots;\n        this.degreeU = degreeU;\n        this.degreeV = degreeV;\n        this.mesh = null;\n        this.controlCage = null;\n        this.update();\n    }\n    showControls(on) {\n        if (on)\n            this.controlCage.show();\n        else\n            this.controlCage.hide();\n    }\n    addToSubSelection(...subIDs) {\n        this.controlCage.addToSubSelection(...subIDs);\n    }\n    removeFromSubSelection(...subIDs) {\n        this.controlCage.removeFromSubSelection(...subIDs);\n    }\n    isSubSelected(subID) {\n        return this.controlCage.isSubSelected(subID);\n    }\n    hasSubSelection() {\n        return this.controlCage.hasSubSelection();\n    }\n    clearSubSelection() {\n        this.controlCage.clearSubSelection();\n    }\n    getSubSelectionBoundingBox() {\n        return this.controlCage.getSubSelectionBoundingBox();\n    }\n    getControlCage() {\n        return this.controlCage;\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        return this.controlCage.getWithinFrustumSub(frustum, inclusive);\n    }\n    onSelectionMoved() {\n        if (this.controlCage.hasSubSelection()) {\n            const newVerts = this.controlCage.getVertsSubSelectionTransformed();\n            for (let i = 0; i < this.weightedControlPoints.length; i++) {\n                for (let j = 0; j < this.weightedControlPoints[0].length; j++) {\n                    const newVert = newVerts[i][j];\n                    const weight = this.weightedControlPoints[i][j][3];\n                    this.weightedControlPoints[i][j] = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec4.create(newVert[0] * weight, newVert[1] * weight, newVert[2] * weight, weight);\n                }\n            }\n            this.update(false);\n        }\n    }\n    bakeSelectionTransform() {\n        if (this.isSelected()) {\n            this.model = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform(), this.model);\n        }\n        this.controlCage.bakeSelectionTransform();\n    }\n    delete() {\n        var _a, _b;\n        (_a = this.mesh) === null || _a === void 0 ? void 0 : _a.delete();\n        (_b = this.controlCage) === null || _b === void 0 ? void 0 : _b.delete();\n    }\n    clone() {\n        const res = new Surface((0,_utils_clone__WEBPACK_IMPORTED_MODULE_1__.cloneVec4ListList)(this.weightedControlPoints), [...this.uKnots], [...this.vKnots], this.degreeU, this.degreeV, this.parent, wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.clone(this.model), this.materialName);\n        if (!this.controlCage.isHidden()) {\n            res.showControls(true);\n        }\n        return res;\n    }\n    getMesh() {\n        return this.mesh;\n    }\n    getBoundingBox() {\n        return this.controlCage.getBoundingBox();\n    }\n    intersect(ray, sub) {\n        if (this.isHidden())\n            return null;\n        let intersection = null;\n        intersection = this.controlCage.intersect(ray, sub);\n        if (intersection) {\n            intersection.description = \"control cage\";\n            intersection.geometry = this;\n            return intersection;\n        }\n        intersection = this.mesh.intersect(ray, sub);\n        if (intersection) {\n            intersection.description = \"surface\";\n            intersection.geometry = this;\n            return intersection;\n        }\n        return intersection;\n    }\n    getTypeName() {\n        return \"Surface\";\n    }\n    update(updateCage = true) {\n        var _a, _b;\n        if (updateCage)\n            (_a = this.controlCage) === null || _a === void 0 ? void 0 : _a.delete();\n        (_b = this.mesh) === null || _b === void 0 ? void 0 : _b.delete();\n        const sampleCountU = _curve__WEBPACK_IMPORTED_MODULE_5__.Curve.SAMPLES_PER_EDGE * (this.weightedControlPoints.length - 1);\n        const sampleCountV = _curve__WEBPACK_IMPORTED_MODULE_5__.Curve.SAMPLES_PER_EDGE * (this.weightedControlPoints[0].length - 1);\n        const firstKnotU = this.uKnots[0];\n        const firstKnotV = this.vKnots[0];\n        const knotSizeU = this.uKnots[this.uKnots.length - 1] - firstKnotU;\n        const knotSizeV = this.vKnots[this.vKnots.length - 1] - firstKnotV;\n        const stepU = knotSizeU / sampleCountU;\n        const stepV = knotSizeV / sampleCountV;\n        const meshVerts = [];\n        const meshNormals = [];\n        const meshIndices = [];\n        for (let i = 0; i <= sampleCountU; i++) {\n            for (let j = 0; j <= sampleCountV; j++) {\n                meshVerts.push(this.sample(firstKnotU + i * stepU, firstKnotV + j * stepV));\n            }\n        }\n        for (let i = 0; i < sampleCountU; i++) {\n            for (let j = 0; j < sampleCountV; j++) {\n                meshIndices.push(i * (sampleCountV + 1) + j);\n                meshIndices.push(i * (sampleCountV + 1) + j + 1);\n                meshIndices.push((i + 1) * (sampleCountV + 1) + j);\n                meshIndices.push(i * (sampleCountV + 1) + j + 1);\n                meshIndices.push((i + 1) * (sampleCountV + 1) + j + 1);\n                meshIndices.push((i + 1) * (sampleCountV + 1) + j);\n            }\n        }\n        for (let i = 0; i <= sampleCountU; i++) {\n            for (let j = 0; j <= sampleCountV; j++) {\n                const v1 = (i == 0)\n                    ? wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[(i + 1) * (sampleCountV + 1) + j])\n                    : wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[(i - 1) * (sampleCountV + 1) + j]);\n                const v2 = (j == 0)\n                    ? wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[i * (sampleCountV + 1) + j + 1])\n                    : wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.sub(meshVerts[i * (sampleCountV + 1) + j], meshVerts[i * (sampleCountV + 1) + j - 1]);\n                var normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.cross(v1, v2));\n                if (i == 0)\n                    normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(normal, -1);\n                if (j == 0)\n                    normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(normal, -1);\n                meshNormals.push(normal);\n            }\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getStats().onTrianglesCreated(meshIndices.length / 3);\n        this.mesh = new _mesh__WEBPACK_IMPORTED_MODULE_4__.Mesh(this, meshVerts, meshNormals, meshIndices);\n        if (updateCage)\n            this.controlCage = new _controlCage2D__WEBPACK_IMPORTED_MODULE_2__.ControlCage2D(this, this.weightedControlPoints.map((points) => {\n                return points.map((point) => {\n                    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(point[0] / point[3], point[1] / point[3], point[2] / point[3]);\n                });\n            }));\n    }\n    isWithinFrustum(frustum, inclusive) {\n        if (this.isHidden())\n            return false;\n        return this.mesh.isWithinFrustum(frustum, inclusive) ||\n            (!this.controlCage.isHidden() && this.controlCage.isWithinFrustum(frustum, inclusive));\n    }\n    sample(u, v) {\n        const uSpan = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.span)(this.uKnots, u, this.degreeU);\n        const vSpan = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.span)(this.vKnots, v, this.degreeV);\n        const basisFuncsU = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.basisFuncs)(this.uKnots, u, this.degreeU);\n        const basisFuncsV = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.basisFuncs)(this.vKnots, v, this.degreeV);\n        var res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec4.create(0, 0, 0, 0);\n        for (let i = 0; i <= this.degreeU; i++) {\n            for (let j = 0; j <= this.degreeV; j++) {\n                res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec4.add(res, wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec4.scale(this.weightedControlPoints[uSpan - this.degreeU + i][vSpan - this.degreeV + j], basisFuncsV[j] * basisFuncsU[i]));\n            }\n        }\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(res[0] / res[3], res[1] / res[3], res[2] / res[3]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLENBQUMsR0FBRyxLQUFLLEVBQUUsVUFBVSxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO2FBQzdFO1NBQ0Y7UUFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3JDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3JDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUM3QyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pELFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ25ELFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDakQsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZELFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDcEQ7U0FDRjtRQUNELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxZQUFZLEVBQUUsQ0FBQyxF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RUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDdEMsR0FBRyxHQUFHLDZDQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSw2Q0FBSSxDQUFDLEtBQUssQ0FDNUIsSUFBSSxDQUFDLHFCQUFxQixDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxFQUM5RSxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUNoQyxDQUFDLENBQUM7YUFDSjtTQUNGO1FBQ0QsT0FBTyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L251cmJzL3N1cmZhY2UudHM/MWY0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzLCB2ZWM0LCBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi8uLi9jYWRcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi8uLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IGNsb25lVmVjNExpc3RMaXN0IH0gZnJvbSBcIi4uLy4uL3V0aWxzL2Nsb25lXCI7XG5pbXBvcnQgeyBCb3VuZGluZ0JveCB9IGZyb20gXCIuLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgQ29udHJvbENhZ2UyRCB9IGZyb20gXCIuLi9jb250cm9sQ2FnZTJEXCI7XG5pbXBvcnQgeyBGcnVzdHVtIH0gZnJvbSBcIi4uL2ZydXN0dW1cIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBJbnRlcnNlY3Rpb24gfSBmcm9tIFwiLi4vaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBNZXNoIH0gZnJvbSBcIi4uL21lc2hcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9yYXlcIjtcbmltcG9ydCB7IEN1cnZlIH0gZnJvbSBcIi4vY3VydmVcIjtcbmltcG9ydCB7IGJhc2lzRnVuY3MsIHNwYW4gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5cbmV4cG9ydCBjbGFzcyBTdXJmYWNlIGV4dGVuZHMgR2VvbWV0cnkge1xuXG4gIHByaXZhdGUgbWVzaDogTWVzaCB8IG51bGw7XG4gIHByaXZhdGUgY29udHJvbENhZ2U6IENvbnRyb2xDYWdlMkQgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgd2VpZ2h0ZWRDb250cm9sUG9pbnRzOiBWZWM0W11bXSxcbiAgICBwcml2YXRlIHVLbm90czogbnVtYmVyW10sXG4gICAgcHJpdmF0ZSB2S25vdHM6IG51bWJlcltdLFxuICAgIHByaXZhdGUgZGVncmVlVTogbnVtYmVyLFxuICAgIHByaXZhdGUgZGVncmVlVjogbnVtYmVyLFxuICAgIHBhcmVudDogR2VvbWV0cnkgfCBudWxsID0gbnVsbCxcbiAgICBtb2RlbDogTWF0NCA9IG1hdDQuaWRlbnRpdHkoKSxcbiAgICBtYXRlcmlhbDogTWF0ZXJpYWxOYW1lIHwgbnVsbCA9IG51bGwsXG4gICkge1xuICAgIHN1cGVyKHBhcmVudCwgbW9kZWwsIG1hdGVyaWFsKTtcbiAgICB0aGlzLm1lc2ggPSBudWxsO1xuICAgIHRoaXMuY29udHJvbENhZ2UgPSBudWxsO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBwdWJsaWMgc2hvd0NvbnRyb2xzKG9uOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKG9uKSB0aGlzLmNvbnRyb2xDYWdlIS5zaG93KCk7XG4gICAgZWxzZSB0aGlzLmNvbnRyb2xDYWdlIS5oaWRlKCk7XG4gIH1cblxuICBwdWJsaWMgYWRkVG9TdWJTZWxlY3Rpb24oLi4uc3ViSURzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHRoaXMuY29udHJvbENhZ2UhLmFkZFRvU3ViU2VsZWN0aW9uKC4uLnN1YklEcyk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlRnJvbVN1YlNlbGVjdGlvbiguLi5zdWJJRHM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgdGhpcy5jb250cm9sQ2FnZSEucmVtb3ZlRnJvbVN1YlNlbGVjdGlvbiguLi5zdWJJRHMpO1xuICB9XG5cbiAgcHVibGljIGlzU3ViU2VsZWN0ZWQoc3ViSUQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDYWdlIS5pc1N1YlNlbGVjdGVkKHN1YklEKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNTdWJTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbENhZ2UhLmhhc1N1YlNlbGVjdGlvbigpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyU3ViU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuY29udHJvbENhZ2UhLmNsZWFyU3ViU2VsZWN0aW9uKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3ViU2VsZWN0aW9uQm91bmRpbmdCb3goKTogQm91bmRpbmdCb3gge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDYWdlIS5nZXRTdWJTZWxlY3Rpb25Cb3VuZGluZ0JveCgpO1xuICB9XG5cbiAgcHVibGljIGdldENvbnRyb2xDYWdlKCk6IENvbnRyb2xDYWdlMkQge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDYWdlITtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaXRoaW5GcnVzdHVtU3ViKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sQ2FnZSEuZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uTW92ZWQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29udHJvbENhZ2UhLmhhc1N1YlNlbGVjdGlvbigpKSB7XG4gICAgICBjb25zdCBuZXdWZXJ0czogVmVjM1tdW10gPSB0aGlzLmNvbnRyb2xDYWdlIS5nZXRWZXJ0c1N1YlNlbGVjdGlvblRyYW5zZm9ybWVkKCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2VpZ2h0ZWRDb250cm9sUG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbMF0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBjb25zdCBuZXdWZXJ0OiBWZWMzID0gbmV3VmVydHNbaV1bal07XG4gICAgICAgICAgY29uc3Qgd2VpZ2h0OiBudW1iZXIgPSB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1tpXVtqXVszXTtcbiAgICAgICAgICB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50c1tpXVtqXSA9IHZlYzQuY3JlYXRlKFxuICAgICAgICAgICAgbmV3VmVydFswXSAqIHdlaWdodCxcbiAgICAgICAgICAgIG5ld1ZlcnRbMV0gKiB3ZWlnaHQsXG4gICAgICAgICAgICBuZXdWZXJ0WzJdICogd2VpZ2h0LFxuICAgICAgICAgICAgd2VpZ2h0XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGUoZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBiYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQoKSkge1xuICAgICAgdGhpcy5tb2RlbCA9IG1hdDQubXVsKElOU1RBTkNFLmdldE1vdmVyKCkuZ2V0VHJhbnNmb3JtKCksIHRoaXMubW9kZWwpO1xuICAgIH1cbiAgICB0aGlzLmNvbnRyb2xDYWdlIS5iYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk7XG4gIH1cblxuXG4gIHB1YmxpYyBkZWxldGUoKTogdm9pZCB7XG4gICAgdGhpcy5tZXNoPy5kZWxldGUoKTtcbiAgICB0aGlzLmNvbnRyb2xDYWdlPy5kZWxldGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbG9uZSgpOiBHZW9tZXRyeSB7XG4gICAgY29uc3QgcmVzOiBTdXJmYWNlID0gbmV3IFN1cmZhY2UoY2xvbmVWZWM0TGlzdExpc3QoXG4gICAgICB0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cyksXG4gICAgICBbLi4udGhpcy51S25vdHNdLCBbLi4udGhpcy52S25vdHNdLFxuICAgICAgdGhpcy5kZWdyZWVVLCB0aGlzLmRlZ3JlZVYsXG4gICAgICB0aGlzLnBhcmVudCwgbWF0NC5jbG9uZSh0aGlzLm1vZGVsKSxcbiAgICAgIHRoaXMubWF0ZXJpYWxOYW1lKTtcbiAgICBpZiAoIXRoaXMuY29udHJvbENhZ2UhLmlzSGlkZGVuKCkpIHtcbiAgICAgIHJlcy5zaG93Q29udHJvbHModHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH1cblxuICBwdWJsaWMgZ2V0TWVzaCgpOiBNZXNoIHtcbiAgICByZXR1cm4gdGhpcy5tZXNoITtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbENhZ2UhLmdldEJvdW5kaW5nQm94KCk7XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5LCBzdWI6IGJvb2xlYW4pOiBJbnRlcnNlY3Rpb24gfCBudWxsIHtcblxuICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHJldHVybiBudWxsO1xuXG4gICAgbGV0IGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgICBpbnRlcnNlY3Rpb24gPSB0aGlzLmNvbnRyb2xDYWdlIS5pbnRlcnNlY3QocmF5LCBzdWIpO1xuICAgIGlmIChpbnRlcnNlY3Rpb24pIHtcbiAgICAgIGludGVyc2VjdGlvbi5kZXNjcmlwdGlvbiA9IFwiY29udHJvbCBjYWdlXCI7XG4gICAgICBpbnRlcnNlY3Rpb24uZ2VvbWV0cnkgPSB0aGlzO1xuICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgICB9XG4gICAgaW50ZXJzZWN0aW9uID0gdGhpcy5tZXNoIS5pbnRlcnNlY3QocmF5LCBzdWIpO1xuICAgIGlmIChpbnRlcnNlY3Rpb24pIHtcbiAgICAgIGludGVyc2VjdGlvbi5kZXNjcmlwdGlvbiA9IFwic3VyZmFjZVwiO1xuICAgICAgaW50ZXJzZWN0aW9uLmdlb21ldHJ5ID0gdGhpcztcbiAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG5cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRUeXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlN1cmZhY2VcIjtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlKHVwZGF0ZUNhZ2U6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG5cbiAgICBpZiAodXBkYXRlQ2FnZSkgdGhpcy5jb250cm9sQ2FnZT8uZGVsZXRlKCk7XG4gICAgdGhpcy5tZXNoPy5kZWxldGUoKTtcblxuICAgIGNvbnN0IHNhbXBsZUNvdW50VTogbnVtYmVyID0gQ3VydmUuU0FNUExFU19QRVJfRURHRSAqICh0aGlzLndlaWdodGVkQ29udHJvbFBvaW50cy5sZW5ndGggLSAxKTtcbiAgICBjb25zdCBzYW1wbGVDb3VudFY6IG51bWJlciA9IEN1cnZlLlNBTVBMRVNfUEVSX0VER0UgKiAodGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbMF0ubGVuZ3RoIC0gMSk7XG5cbiAgICBjb25zdCBmaXJzdEtub3RVOiBudW1iZXIgPSB0aGlzLnVLbm90c1swXTtcbiAgICBjb25zdCBmaXJzdEtub3RWOiBudW1iZXIgPSB0aGlzLnZLbm90c1swXTtcblxuICAgIGNvbnN0IGtub3RTaXplVTogbnVtYmVyID0gdGhpcy51S25vdHNbdGhpcy51S25vdHMubGVuZ3RoIC0gMV0gLSBmaXJzdEtub3RVO1xuICAgIGNvbnN0IGtub3RTaXplVjogbnVtYmVyID0gdGhpcy52S25vdHNbdGhpcy52S25vdHMubGVuZ3RoIC0gMV0gLSBmaXJzdEtub3RWO1xuXG4gICAgY29uc3Qgc3RlcFU6IG51bWJlciA9IGtub3RTaXplVSAvIHNhbXBsZUNvdW50VTtcbiAgICBjb25zdCBzdGVwVjogbnVtYmVyID0ga25vdFNpemVWIC8gc2FtcGxlQ291bnRWO1xuXG4gICAgY29uc3QgbWVzaFZlcnRzOiBWZWMzW10gPSBbXTtcbiAgICBjb25zdCBtZXNoTm9ybWFsczogVmVjM1tdID0gW107XG4gICAgY29uc3QgbWVzaEluZGljZXM6IG51bWJlcltdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzYW1wbGVDb3VudFU7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gc2FtcGxlQ291bnRWOyBqKyspIHtcbiAgICAgICAgbWVzaFZlcnRzLnB1c2godGhpcy5zYW1wbGUoZmlyc3RLbm90VSArIGkgKiBzdGVwVSwgZmlyc3RLbm90ViArIGogKiBzdGVwVikpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZUNvdW50VTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNhbXBsZUNvdW50VjsgaisrKSB7XG4gICAgICAgIG1lc2hJbmRpY2VzLnB1c2goaSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGopO1xuICAgICAgICBtZXNoSW5kaWNlcy5wdXNoKGkgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqICsgMSk7XG4gICAgICAgIG1lc2hJbmRpY2VzLnB1c2goKGkgKyAxKSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGopO1xuICAgICAgICBtZXNoSW5kaWNlcy5wdXNoKGkgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqICsgMSk7XG4gICAgICAgIG1lc2hJbmRpY2VzLnB1c2goKGkgKyAxKSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGogKyAxKTtcbiAgICAgICAgbWVzaEluZGljZXMucHVzaCgoaSArIDEpICogKHNhbXBsZUNvdW50ViArIDEpICsgaik7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHNhbXBsZUNvdW50VTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBzYW1wbGVDb3VudFY7IGorKykge1xuICAgICAgICBjb25zdCB2MTogVmVjMyA9IChpID09IDApXG4gICAgICAgICAgPyB2ZWMzLnN1YihtZXNoVmVydHNbaSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGpdLCBtZXNoVmVydHNbKGkgKyAxKSAqIChzYW1wbGVDb3VudFYgKyAxKSArIGpdKVxuICAgICAgICAgIDogdmVjMy5zdWIobWVzaFZlcnRzW2kgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqXSwgbWVzaFZlcnRzWyhpIC0gMSkgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqXSk7XG4gICAgICAgIGNvbnN0IHYyOiBWZWMzID0gKGogPT0gMClcbiAgICAgICAgICA/IHZlYzMuc3ViKG1lc2hWZXJ0c1tpICogKHNhbXBsZUNvdW50ViArIDEpICsgal0sIG1lc2hWZXJ0c1tpICogKHNhbXBsZUNvdW50ViArIDEpICsgaiArIDFdKVxuICAgICAgICAgIDogdmVjMy5zdWIobWVzaFZlcnRzW2kgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqXSwgbWVzaFZlcnRzW2kgKiAoc2FtcGxlQ291bnRWICsgMSkgKyBqIC0gMV0pO1xuICAgICAgICB2YXIgbm9ybWFsOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5jcm9zcyh2MSwgdjIpKTtcbiAgICAgICAgaWYgKGkgPT0gMCkgbm9ybWFsID0gdmVjMy5zY2FsZShub3JtYWwsIC0xKTtcbiAgICAgICAgaWYgKGogPT0gMCkgbm9ybWFsID0gdmVjMy5zY2FsZShub3JtYWwsIC0xKTtcbiAgICAgICAgbWVzaE5vcm1hbHMucHVzaChub3JtYWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIElOU1RBTkNFLmdldFN0YXRzKCkub25UcmlhbmdsZXNDcmVhdGVkKG1lc2hJbmRpY2VzLmxlbmd0aCAvIDMpO1xuXG4gICAgdGhpcy5tZXNoID0gbmV3IE1lc2godGhpcywgbWVzaFZlcnRzLCBtZXNoTm9ybWFscywgbWVzaEluZGljZXMpO1xuICAgIGlmICh1cGRhdGVDYWdlKSB0aGlzLmNvbnRyb2xDYWdlID0gbmV3IENvbnRyb2xDYWdlMkQodGhpcywgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHMubWFwKChwb2ludHM6IFZlYzRbXSkgPT4ge1xuICAgICAgcmV0dXJuIHBvaW50cy5tYXAoKHBvaW50OiBWZWMzKSA9PiB7XG4gICAgICAgIHJldHVybiB2ZWMzLmNyZWF0ZShwb2ludFswXSAvIHBvaW50WzNdLCBwb2ludFsxXSAvIHBvaW50WzNdLCBwb2ludFsyXSAvIHBvaW50WzNdKTtcbiAgICAgIH0pXG4gICAgfSkpO1xuXG4gIH1cblxuICBwdWJsaWMgaXNXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5tZXNoIS5pc1dpdGhpbkZydXN0dW0oZnJ1c3R1bSwgaW5jbHVzaXZlKSB8fFxuICAgICAgKCF0aGlzLmNvbnRyb2xDYWdlIS5pc0hpZGRlbigpICYmIHRoaXMuY29udHJvbENhZ2UhLmlzV2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpKTtcbiAgfVxuXG4gIHB1YmxpYyBzYW1wbGUodTogbnVtYmVyLCB2OiBudW1iZXIpOiBWZWMzIHtcbiAgICBjb25zdCB1U3BhbjogbnVtYmVyID0gc3Bhbih0aGlzLnVLbm90cywgdSwgdGhpcy5kZWdyZWVVKTtcbiAgICBjb25zdCB2U3BhbjogbnVtYmVyID0gc3Bhbih0aGlzLnZLbm90cywgdiwgdGhpcy5kZWdyZWVWKTtcbiAgICBjb25zdCBiYXNpc0Z1bmNzVTogbnVtYmVyW10gPSBiYXNpc0Z1bmNzKHRoaXMudUtub3RzLCB1LCB0aGlzLmRlZ3JlZVUpO1xuICAgIGNvbnN0IGJhc2lzRnVuY3NWOiBudW1iZXJbXSA9IGJhc2lzRnVuY3ModGhpcy52S25vdHMsIHYsIHRoaXMuZGVncmVlVik7XG4gICAgdmFyIHJlczogVmVjNCA9IHZlYzQuY3JlYXRlKDAsIDAsIDAsIDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHRoaXMuZGVncmVlVTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSB0aGlzLmRlZ3JlZVY7IGorKykge1xuICAgICAgICByZXMgPSB2ZWM0LmFkZChyZXMsIHZlYzQuc2NhbGUoXG4gICAgICAgICAgdGhpcy53ZWlnaHRlZENvbnRyb2xQb2ludHNbdVNwYW4gLSB0aGlzLmRlZ3JlZVUgKyBpXVt2U3BhbiAtIHRoaXMuZGVncmVlViArIGpdLFxuICAgICAgICAgIGJhc2lzRnVuY3NWW2pdICogYmFzaXNGdW5jc1VbaV1cbiAgICAgICAgKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2ZWMzLmNyZWF0ZShyZXNbMF0gLyByZXNbM10sIHJlc1sxXSAvIHJlc1szXSwgcmVzWzJdIC8gcmVzWzNdKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/surface.ts\n");

/***/ }),

/***/ "./src/geometry/nurbs/utils.ts":
/*!*************************************!*\
  !*** ./src/geometry/nurbs/utils.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   basisFuncs: () => (/* binding */ basisFuncs),\n/* harmony export */   calcBezierAlphas: () => (/* binding */ calcBezierAlphas),\n/* harmony export */   genericKnotVector: () => (/* binding */ genericKnotVector),\n/* harmony export */   matchDegrees: () => (/* binding */ matchDegrees),\n/* harmony export */   matchKnots: () => (/* binding */ matchKnots),\n/* harmony export */   span: () => (/* binding */ span),\n/* harmony export */   toWeightedControlPoints: () => (/* binding */ toWeightedControlPoints)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/math */ \"./src/utils/math.ts\");\n\n\nconst span = function (knots, u, p) {\n    const n = knots.length - p - 2;\n    let l = p;\n    let h = n;\n    let m;\n    while (l < h) {\n        m = Math.floor((l + h) / 2);\n        if (u >= knots[m + 1])\n            l = m + 1;\n        else\n            h = m;\n    }\n    return l;\n};\nconst basisFuncs = function (knots, u, p) {\n    const funcs = [1];\n    const i = span(knots, u, p);\n    const left = (i, j) => { return u - knots[i - j + 1]; };\n    const right = (i, j) => { return knots[i + j] - u; };\n    for (let j = 1; j <= p; j++) {\n        let saved = 0;\n        for (let r = 0; r < j; r++) {\n            const temp = funcs[r] / (right(i, r + 1) + left(i, j - r));\n            funcs[r] = saved + right(i, r + 1) * temp;\n            saved = left(i, j - r) * temp;\n        }\n        funcs.push(saved);\n    }\n    return funcs;\n};\nconst genericKnotVector = function (pointCount, degree) {\n    const res = [];\n    for (let i = 0; i <= degree; i++)\n        res.push(0);\n    for (let i = 1; i < pointCount - degree; i++)\n        res.push(i);\n    for (let i = 0; i <= degree; i++)\n        res.push(pointCount - degree);\n    return res;\n};\nconst toWeightedControlPoints = function (points, weights) {\n    const res = [];\n    if (weights) {\n        for (let i = 0; i < weights.length; i++) {\n            const point = points[i];\n            res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(point[0] * weights[i], point[1] * weights[i], point[2] * weights[i], weights[i]));\n        }\n    }\n    else {\n        for (let point of points) {\n            res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(...point, 1));\n        }\n    }\n    return res;\n};\nconst calcBezierAlphas = function (startDegree, endDegree) {\n    const bezierAlphas = [];\n    for (let i = 0; i < endDegree + 1; i++) {\n        const temp = [];\n        for (let j = 0; j < startDegree + 1; j++) {\n            temp.push(0);\n        }\n        bezierAlphas.push(temp);\n    }\n    bezierAlphas[0][0] = bezierAlphas[endDegree][startDegree] = 1;\n    for (let i = 1; i <= Math.floor(endDegree / 2); i++) {\n        const inv = 1 / (0,_utils_math__WEBPACK_IMPORTED_MODULE_0__.bin)(endDegree, i);\n        const mpi = Math.min(startDegree, i);\n        for (let j = Math.max(0, i - endDegree + startDegree); j <= mpi; j++)\n            bezierAlphas[i][j] = inv * (0,_utils_math__WEBPACK_IMPORTED_MODULE_0__.bin)(startDegree, j) * (0,_utils_math__WEBPACK_IMPORTED_MODULE_0__.bin)(endDegree - startDegree, i - j);\n    }\n    for (let i = Math.floor(endDegree / 2) + 1; i <= endDegree - 1; i++) {\n        const mpi = Math.min(startDegree, i);\n        for (let j = Math.max(0, i - endDegree + startDegree); j <= mpi; j++)\n            bezierAlphas[i][j] = bezierAlphas[endDegree - i][startDegree - j];\n    }\n    return bezierAlphas;\n};\nconst equals = function (a, b, e = 0.000001) { return Math.abs(a - b) < e; };\nconst matchDegrees = function (curves) {\n    let maxDegree = 0;\n    for (let curve of curves)\n        maxDegree = Math.max(maxDegree, curve.getDegree());\n    for (let curve of curves)\n        if (curve.getDegree() < maxDegree)\n            curve.elevateDegree(maxDegree - curve.getDegree());\n};\nconst matchKnots = function (curves) {\n    for (let curve of curves)\n        curve.normalizeKnots();\n    for (let i = 0; i < curves[0].getKnotCount(); i++) {\n        var smallest = Number.POSITIVE_INFINITY;\n        var finished = true;\n        for (let curve of curves) {\n            if (i < curve.getKnotCount()) {\n                finished = false;\n                smallest = Math.min(smallest, curve.getKnots()[i]);\n            }\n        }\n        if (finished)\n            break;\n        for (let curve of curves) {\n            if (!equals(curve.getKnots()[i], smallest))\n                curve.insertKnot(smallest);\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLLElBQUksS0FBSyxJQUFJLE1BQU07UUFBRSxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDakQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNqRCxJQUFJLFFBQVEsR0FBVyxNQUFNLENBQUMsaUJBQWlCLENBQUM7UUFDaEQsSUFBSSxRQUFRLEdBQVksSUFBSSxDQUFDO1FBQzdCLEtBQUssSUFBSSxLQUFLLElBQUksTUFBTSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxZQUFZLEVBQUUsRUFBRTtnQkFDNUIsUUFBUSxHQUFHLEtBQUssQ0FBQztnQkFDakIsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3BEO1NBQ0Y7UUFDRCxJQUFJLFFBQVE7WUFBRSxNQUFNO1FBQ3BCLEtBQUssSUFBSSxLQUFLLElBQUksTUFBTSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQztnQkFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3hFO0tBQ0Y7QUFFSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvbnVyYnMvdXRpbHMudHM/YzUyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3YXJuIH0gZnJvbSBcImNvbnNvbGVcIjtcbmltcG9ydCB7IFZlYzMsIHZlYzQsIFZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IGJpbiB9IGZyb20gXCIuLi8uLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDdXJ2ZSB9IGZyb20gXCIuL2N1cnZlXCI7XG5cbmV4cG9ydCBjb25zdCBzcGFuID0gZnVuY3Rpb24oa25vdHM6IG51bWJlcltdLCB1OiBudW1iZXIsIHA6IG51bWJlcik6IG51bWJlciB7XG4gIGNvbnN0IG46IG51bWJlciA9IGtub3RzLmxlbmd0aCAtIHAgLSAyO1xuICBsZXQgbDogbnVtYmVyID0gcDtcbiAgbGV0IGg6IG51bWJlciA9IG47XG4gIGxldCBtOiBudW1iZXI7XG4gIHdoaWxlIChsIDwgaCkge1xuICAgIG0gPSBNYXRoLmZsb29yKChsICsgaCkgLyAyKTtcbiAgICBpZiAodSA+PSBrbm90c1ttICsgMV0pIGwgPSBtICsgMTtcbiAgICBlbHNlIGggPSBtO1xuICB9XG4gIHJldHVybiBsO1xufVxuXG5leHBvcnQgY29uc3QgYmFzaXNGdW5jcyA9IGZ1bmN0aW9uKGtub3RzOiBudW1iZXJbXSwgdTogbnVtYmVyLCBwOiBudW1iZXIpOiBudW1iZXJbXSB7XG4gIGNvbnN0IGZ1bmNzOiBudW1iZXJbXSA9IFsxXTtcbiAgY29uc3QgaSA9IHNwYW4oa25vdHMsIHUsIHApO1xuICBjb25zdCBsZWZ0ID0gKGk6IG51bWJlciwgajogbnVtYmVyKSA9PiB7IHJldHVybiB1IC0ga25vdHNbaSAtIGogKyAxXTsgfTtcbiAgY29uc3QgcmlnaHQgPSAoaTogbnVtYmVyLCBqOiBudW1iZXIpID0+IHsgcmV0dXJuIGtub3RzW2kgKyBqXSAtIHU7IH07XG4gIGZvciAobGV0IGogPSAxOyBqIDw9IHA7IGorKykge1xuICAgIGxldCBzYXZlZCA9IDA7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBqOyByKyspIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBmdW5jc1tyXSAvIChyaWdodChpLCByICsgMSkgKyBsZWZ0KGksIGogLSByKSk7XG4gICAgICBmdW5jc1tyXSA9IHNhdmVkICsgcmlnaHQoaSwgciArIDEpICogdGVtcDtcbiAgICAgIHNhdmVkID0gbGVmdChpLCBqIC0gcikgKiB0ZW1wO1xuICAgIH1cbiAgICBmdW5jcy5wdXNoKHNhdmVkKTtcbiAgfVxuICByZXR1cm4gZnVuY3M7XG59XG5cblxuZXhwb3J0IGNvbnN0IGdlbmVyaWNLbm90VmVjdG9yID0gZnVuY3Rpb24ocG9pbnRDb3VudDogbnVtYmVyLCBkZWdyZWU6IG51bWJlcik6IG51bWJlcltdIHtcbiAgY29uc3QgcmVzOiBudW1iZXJbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8PSBkZWdyZWU7IGkrKykgcmVzLnB1c2goMCk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRDb3VudCAtIGRlZ3JlZTsgaSsrKSAgcmVzLnB1c2goaSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDw9IGRlZ3JlZTsgaSsrKSByZXMucHVzaChwb2ludENvdW50IC0gZGVncmVlKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGNvbnN0IHRvV2VpZ2h0ZWRDb250cm9sUG9pbnRzID0gZnVuY3Rpb24ocG9pbnRzOiBWZWMzW10sIHdlaWdodHM/OiBudW1iZXJbXSk6IFZlYzRbXSB7XG4gIGNvbnN0IHJlczogVmVjNFtdID0gW107XG5cbiAgaWYgKHdlaWdodHMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHBvaW50OiBWZWMzID0gcG9pbnRzW2ldO1xuICAgICAgcmVzLnB1c2godmVjNC5jcmVhdGUoXG4gICAgICAgIHBvaW50WzBdICogd2VpZ2h0c1tpXSxcbiAgICAgICAgcG9pbnRbMV0gKiB3ZWlnaHRzW2ldLFxuICAgICAgICBwb2ludFsyXSAqIHdlaWdodHNbaV0sXG4gICAgICAgIHdlaWdodHNbaV1cbiAgICAgICkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBwb2ludCBvZiBwb2ludHMpIHtcbiAgICAgIHJlcy5wdXNoKHZlYzQuY3JlYXRlKC4uLnBvaW50LCAxKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbmV4cG9ydCBjb25zdCBjYWxjQmV6aWVyQWxwaGFzID0gZnVuY3Rpb24oc3RhcnREZWdyZWU6IG51bWJlciwgZW5kRGVncmVlOiBudW1iZXIpOiBudW1iZXJbXVtdIHtcbiAgY29uc3QgYmV6aWVyQWxwaGFzOiBudW1iZXJbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZW5kRGVncmVlICsgMTsgaSsrKSB7XG4gICAgY29uc3QgdGVtcDogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN0YXJ0RGVncmVlICsgMTsgaisrKSB7XG4gICAgICB0ZW1wLnB1c2goMCk7XG4gICAgfVxuICAgIGJlemllckFscGhhcy5wdXNoKHRlbXApO1xuICB9XG4gIGJlemllckFscGhhc1swXVswXSA9IGJlemllckFscGhhc1tlbmREZWdyZWVdW3N0YXJ0RGVncmVlXSA9IDE7XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IE1hdGguZmxvb3IoZW5kRGVncmVlIC8gMik7IGkrKykge1xuICAgIGNvbnN0IGludjogbnVtYmVyID0gMSAvIGJpbihlbmREZWdyZWUsIGkpO1xuICAgIGNvbnN0IG1waTogbnVtYmVyID0gTWF0aC5taW4oc3RhcnREZWdyZWUsIGkpO1xuICAgIGZvciAobGV0IGogPSBNYXRoLm1heCgwLCBpIC0gZW5kRGVncmVlICsgc3RhcnREZWdyZWUpOyBqIDw9IG1waTsgaisrKVxuICAgICAgYmV6aWVyQWxwaGFzW2ldW2pdID0gaW52ICogYmluKHN0YXJ0RGVncmVlLCBqKSAqIGJpbihlbmREZWdyZWUgLSBzdGFydERlZ3JlZSwgaSAtIGopO1xuXG4gIH1cbiAgZm9yIChsZXQgaSA9IE1hdGguZmxvb3IoZW5kRGVncmVlIC8gMikgKyAxOyBpIDw9IGVuZERlZ3JlZSAtIDE7IGkrKykge1xuICAgIGNvbnN0IG1waTogbnVtYmVyID0gTWF0aC5taW4oc3RhcnREZWdyZWUsIGkpO1xuICAgIGZvciAobGV0IGogPSBNYXRoLm1heCgwLCBpIC0gZW5kRGVncmVlICsgc3RhcnREZWdyZWUpOyBqIDw9IG1waTsgaisrKVxuICAgICAgYmV6aWVyQWxwaGFzW2ldW2pdID0gYmV6aWVyQWxwaGFzW2VuZERlZ3JlZSAtIGldW3N0YXJ0RGVncmVlIC0gal07XG4gIH1cbiAgcmV0dXJuIGJlemllckFscGhhcztcbn1cblxuY29uc3QgZXF1YWxzID0gZnVuY3Rpb24oYTogbnVtYmVyLCBiOiBudW1iZXIsIGU6IG51bWJlciA9IDAuMDAwMDAxKTogYm9vbGVhbiB7IHJldHVybiBNYXRoLmFicyhhIC0gYikgPCBlOyB9O1xuXG5leHBvcnQgY29uc3QgbWF0Y2hEZWdyZWVzID0gZnVuY3Rpb24oY3VydmVzOiBDdXJ2ZVtdKTogdm9pZCB7XG5cbiAgbGV0IG1heERlZ3JlZTogbnVtYmVyID0gMDtcbiAgZm9yIChsZXQgY3VydmUgb2YgY3VydmVzKSBtYXhEZWdyZWUgPSBNYXRoLm1heChtYXhEZWdyZWUsIGN1cnZlLmdldERlZ3JlZSgpKTtcbiAgZm9yIChsZXQgY3VydmUgb2YgY3VydmVzKSBpZiAoY3VydmUuZ2V0RGVncmVlKCkgPCBtYXhEZWdyZWUpIGN1cnZlLmVsZXZhdGVEZWdyZWUobWF4RGVncmVlIC0gY3VydmUuZ2V0RGVncmVlKCkpO1xuXG59XG5cbmV4cG9ydCBjb25zdCBtYXRjaEtub3RzID0gZnVuY3Rpb24oY3VydmVzOiBDdXJ2ZVtdKTogdm9pZCB7XG5cbiAgZm9yIChsZXQgY3VydmUgb2YgY3VydmVzKSBjdXJ2ZS5ub3JtYWxpemVLbm90cygpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnZlc1swXS5nZXRLbm90Q291bnQoKTsgaSsrKSB7XG4gICAgdmFyIHNtYWxsZXN0OiBudW1iZXIgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdmFyIGZpbmlzaGVkOiBib29sZWFuID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBjdXJ2ZSBvZiBjdXJ2ZXMpIHtcbiAgICAgIGlmIChpIDwgY3VydmUuZ2V0S25vdENvdW50KCkpIHtcbiAgICAgICAgZmluaXNoZWQgPSBmYWxzZTtcbiAgICAgICAgc21hbGxlc3QgPSBNYXRoLm1pbihzbWFsbGVzdCwgY3VydmUuZ2V0S25vdHMoKVtpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaW5pc2hlZCkgYnJlYWs7XG4gICAgZm9yIChsZXQgY3VydmUgb2YgY3VydmVzKSB7XG4gICAgICBpZiAoIWVxdWFscyhjdXJ2ZS5nZXRLbm90cygpW2ldLCBzbWFsbGVzdCkpIGN1cnZlLmluc2VydEtub3Qoc21hbGxlc3QpO1xuICAgIH1cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/nurbs/utils.ts\n");

/***/ }),

/***/ "./src/geometry/plane.ts":
/*!*******************************!*\
  !*** ./src/geometry/plane.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Plane: () => (/* binding */ Plane)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n\nclass Plane {\n    constructor(origin, normal) {\n        this.origin = origin;\n        this.normal = normal;\n        this.normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.normalize(this.normal);\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getNormal() {\n        return this.normal;\n    }\n    getXY() {\n        // NOTE: could break, probably wont.\n        const perturbed = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.clone(this.normal);\n        perturbed[0] *= 0.043283;\n        perturbed[1] += 4.33423;\n        perturbed[2] /= 32.324;\n        const yAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.cross(perturbed, this.normal));\n        const xAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.cross(yAxis, this.getNormal());\n        return [xAxis, yAxis];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvcGxhbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0M7QUFHakMsTUFBTSxLQUFLO0lBRWhCLFlBQ1UsTUFBWSxFQUNaLE1BQVk7UUFEWixXQUFNLEdBQU4sTUFBTSxDQUFNO1FBQ1osV0FBTSxHQUFOLE1BQU0sQ0FBTTtRQUVwQixJQUFJLENBQUMsTUFBTSxHQUFHLDZDQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRU0sU0FBUztRQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRU0sU0FBUztRQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRU0sS0FBSztRQUNWLG9DQUFvQztRQUNwQyxNQUFNLFNBQVMsR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEQsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQztRQUN6QixTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDO1FBQ3hCLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUM7UUFDdkIsTUFBTSxLQUFLLEdBQVMsNkNBQUksQ0FBQyxTQUFTLENBQUMsNkNBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3ZFLE1BQU0sS0FBSyxHQUFTLDZDQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUN4RCxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3hCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L3BsYW5lLnRzPzg2M2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiXG5cblxuZXhwb3J0IGNsYXNzIFBsYW5lIHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG9yaWdpbjogVmVjMyxcbiAgICBwcml2YXRlIG5vcm1hbDogVmVjM1xuICApIHtcbiAgICB0aGlzLm5vcm1hbCA9IHZlYzMubm9ybWFsaXplKHRoaXMubm9ybWFsKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPcmlnaW4oKTogVmVjMyB7XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luO1xuICB9XG5cbiAgcHVibGljIGdldE5vcm1hbCgpOiBWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5ub3JtYWw7XG4gIH1cblxuICBwdWJsaWMgZ2V0WFkoKTogW1ZlYzMsIFZlYzNdIHtcbiAgICAvLyBOT1RFOiBjb3VsZCBicmVhaywgcHJvYmFibHkgd29udC5cbiAgICBjb25zdCBwZXJ0dXJiZWQ6IFZlYzMgPSB2ZWMzLmNsb25lKHRoaXMubm9ybWFsKTtcbiAgICBwZXJ0dXJiZWRbMF0gKj0gMC4wNDMyODM7XG4gICAgcGVydHVyYmVkWzFdICs9IDQuMzM0MjM7XG4gICAgcGVydHVyYmVkWzJdIC89IDMyLjMyNDtcbiAgICBjb25zdCB5QXhpczogVmVjMyA9IHZlYzMubm9ybWFsaXplKHZlYzMuY3Jvc3MocGVydHVyYmVkLCB0aGlzLm5vcm1hbCkpO1xuICAgIGNvbnN0IHhBeGlzOiBWZWMzID0gdmVjMy5jcm9zcyh5QXhpcywgdGhpcy5nZXROb3JtYWwoKSk7XG4gICAgcmV0dXJuIFt4QXhpcywgeUF4aXNdO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/plane.ts\n");

/***/ }),

/***/ "./src/geometry/pointBoundingBoxHeirarchy.ts":
/*!***************************************************!*\
  !*** ./src/geometry/pointBoundingBoxHeirarchy.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PointBoundingBoxHeirarchy: () => (/* binding */ PointBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _ray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ray */ \"./src/geometry/ray.ts\");\n\n\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\nclass PointBoundingBoxHeirarchyNode {\n    constructor(geometry, verts, indices, depth = 0) {\n        this.geometry = geometry;\n        this.verts = verts;\n        this.depth = depth;\n        this.setup(indices);\n    }\n    setup(indices) {\n        this.axis = this.depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_0__.BoundingBox();\n        let average = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(0, 0, 0);\n        for (const index of indices) {\n            this.boundingBox.addVec3(this.verts[index]);\n            average = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.add(average, this.verts[index]);\n        }\n        average = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.scale(average, 1 / (indices.length));\n        if (indices.length < PointBoundingBoxHeirarchy.MAX_POINTS_PER_LEAF ||\n            this.boundingBox.hasNoVolume()) {\n            this.indices = indices;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            this.indices = null;\n            var child1Indices = [];\n            var child2Indices = [];\n            for (const index of indices) {\n                if (this.verts[index][this.axis] < average[this.axis]) {\n                    child1Indices.push(index);\n                }\n                else {\n                    child2Indices.push(index);\n                }\n            }\n            if (child1Indices.length === 0 || child2Indices.length === 0) {\n                child1Indices = indices.slice(0, indices.length / 2);\n                child2Indices = indices.slice(indices.length / 2, -1);\n            }\n            this.child1 = new PointBoundingBoxHeirarchyNode(this.geometry, this.verts, child1Indices, this.depth + 1);\n            this.child2 = new PointBoundingBoxHeirarchyNode(this.geometry, this.verts, child2Indices, this.depth + 1);\n        }\n    }\n    almostIntersect(ray, pixels) {\n        if (ray.almostIntersectBoundingBox(this.boundingBox, pixels) === null) {\n            return null;\n        }\n        if (this.isLeaf()) {\n            let closestIntersection = null;\n            for (const index of this.indices) {\n                let intersection = ray.almostIntersectPoint(this.geometry, index, this.verts[index], pixels);\n                if (intersection !== null) {\n                    if (closestIntersection === null || intersection.screenSpaceDist < closestIntersection.screenSpaceDist) {\n                        closestIntersection = intersection;\n                    }\n                }\n            }\n            return closestIntersection;\n        }\n        else {\n            const t1 = this.child1.almostIntersect(ray, pixels);\n            const t2 = this.child2.almostIntersect(ray, pixels);\n            if (t1 === null)\n                return t2;\n            if (t2 === null)\n                return t1;\n            return (t1.time < t2.time) ? t1 : t2;\n        }\n    }\n    isLeaf() {\n        return this.indices !== null;\n    }\n    print() {\n        var str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.isLeaf()) {\n            str += this.indices.length.toString();\n            console.log(str);\n        }\n        else {\n            console.log(str);\n            this.child1.print();\n            this.child2.print();\n        }\n    }\n}\nclass PointBoundingBoxHeirarchy {\n    constructor(geometry, verts) {\n        this.geometry = geometry;\n        const indices = [];\n        for (let i = 0; i < verts.length; i++)\n            indices.push(i);\n        this.root = new PointBoundingBoxHeirarchyNode(this.geometry, verts, indices);\n    }\n    print() {\n        console.log(\"========point bbh========\");\n        this.root.print();\n        console.log(\"=========================\");\n    }\n    almostIntersect(ray, pixels) {\n        const model = this.geometry.getModelRecursive();\n        const objectSpaceRay = _ray__WEBPACK_IMPORTED_MODULE_1__.Ray.transform(ray, wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.inverse(model));\n        var res = this.root.almostIntersect(objectSpaceRay, pixels);\n        res === null || res === void 0 ? void 0 : res.transform(model, objectSpaceRay);\n        return res;\n    }\n}\nPointBoundingBoxHeirarchy.MAX_POINTS_PER_LEAF = 5; // TODO: tune\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvcG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXFEO0FBRVQ7QUFHaEI7QUFHNUIsSUFBSyxJQUlKO0FBSkQsV0FBSyxJQUFJO0lBQ1AseUJBQUs7SUFDTCx5QkFBSztJQUNMLHlCQUFLO0FBQ1AsQ0FBQyxFQUpJLElBQUksS0FBSixJQUFJLFFBSVI7QUFHRCxNQUFNLDZCQUE2QjtJQVFqQyxZQUNVLFFBQWtCLEVBQ2xCLEtBQWEsRUFDckIsT0FBaUIsRUFDVCxRQUFnQixDQUFDO1FBSGpCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsVUFBSyxHQUFMLEtBQUssQ0FBUTtRQUViLFVBQUssR0FBTCxLQUFLLENBQVk7UUFFekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN0QixDQUFDO0lBRU8sS0FBSyxDQUFDLE9BQWlCO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLHFEQUFXLEVBQUUsQ0FBQztRQUNyQyxJQUFJLE9BQU8sR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEtBQUssTUFBTSxLQUFLLElBQUksT0FBTyxFQUFFO1lBQzNCLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUM1QyxPQUFPLEdBQUcsNkNBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztTQUNoRDtRQUNELE9BQU8sR0FBRyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7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QUFDLENBQUM7UUFDdkQsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLDZCQUE2QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9FLENBQUM7SUFFTSxLQUFLO1FBQ1YsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFTSxlQUFlLENBQUMsR0FBUSxFQUFFLE1BQWM7UUFFN0MsTUFBTSxLQUFLLEdBQVMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQ3RELE1BQU0sY0FBYyxHQUFRLHFDQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSw2Q0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLElBQUksR0FBRyxHQUF3QixJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDakYsR0FBRyxhQUFILEdBQUcsdUJBQUgsR0FBRyxDQUFFLFNBQVMsQ0FBQyxLQUFLLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDdEMsT0FBTyxHQUFHLENBQUM7SUFFYixDQUFDOztBQTNCZSw2Q0FBbUIsR0FBVyxDQUFDLENBQUMsQ0FBQyxhQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvcG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeS50cz8wM2JmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdDQsIG1hdDQsIHZlYzMsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IGNsb25lVmVjM0xpc3QgfSBmcm9tIFwiLi4vdXRpbHMvY2xvbmVcIjtcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSBcIi4vYm91bmRpbmdCb3hcIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuL2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cblxuZW51bSBBeGlzIHtcbiAgWCA9IDAsXG4gIFkgPSAxLFxuICBaID0gMixcbn1cblxuXG5jbGFzcyBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSB7XG5cbiAgcHJpdmF0ZSBpbmRpY2VzITogbnVtYmVyW10gfCBudWxsO1xuICBwcml2YXRlIGNoaWxkMSE6IFBvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHlOb2RlIHwgbnVsbDtcbiAgcHJpdmF0ZSBjaGlsZDIhOiBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSB8IG51bGw7XG4gIHByaXZhdGUgYm91bmRpbmdCb3ghOiBCb3VuZGluZ0JveDtcbiAgcHJpdmF0ZSBheGlzITogQXhpcztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGdlb21ldHJ5OiBHZW9tZXRyeSxcbiAgICBwcml2YXRlIHZlcnRzOiBWZWMzW10sXG4gICAgaW5kaWNlczogbnVtYmVyW10sXG4gICAgcHJpdmF0ZSBkZXB0aDogbnVtYmVyID0gMFxuICApIHtcbiAgICB0aGlzLnNldHVwKGluZGljZXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cChpbmRpY2VzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIHRoaXMuYXhpcyA9IHRoaXMuZGVwdGggJSAzO1xuICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICBsZXQgYXZlcmFnZTogVmVjMyA9IHZlYzMuY3JlYXRlKDAsIDAsIDApO1xuICAgIGZvciAoY29uc3QgaW5kZXggb2YgaW5kaWNlcykge1xuICAgICAgdGhpcy5ib3VuZGluZ0JveC5hZGRWZWMzKHRoaXMudmVydHNbaW5kZXhdKTtcbiAgICAgIGF2ZXJhZ2UgPSB2ZWMzLmFkZChhdmVyYWdlLCB0aGlzLnZlcnRzW2luZGV4XSk7XG4gICAgfVxuICAgIGF2ZXJhZ2UgPSB2ZWMzLnNjYWxlKGF2ZXJhZ2UsIDEgLyAoaW5kaWNlcy5sZW5ndGgpKTtcblxuICAgIGlmIChpbmRpY2VzLmxlbmd0aCA8IFBvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHkuTUFYX1BPSU5UU19QRVJfTEVBRiB8fFxuICAgICAgdGhpcy5ib3VuZGluZ0JveC5oYXNOb1ZvbHVtZSgpXG4gICAgKSB7XG4gICAgICB0aGlzLmluZGljZXMgPSBpbmRpY2VzO1xuICAgICAgdGhpcy5jaGlsZDEgPSBudWxsO1xuICAgICAgdGhpcy5jaGlsZDIgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluZGljZXMgPSBudWxsO1xuICAgICAgdmFyIGNoaWxkMUluZGljZXM6IG51bWJlcltdID0gW107XG4gICAgICB2YXIgY2hpbGQySW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgaW5kZXggb2YgaW5kaWNlcykge1xuICAgICAgICBpZiAodGhpcy52ZXJ0c1tpbmRleF1bdGhpcy5heGlzXSA8IGF2ZXJhZ2VbdGhpcy5heGlzXSkge1xuICAgICAgICAgIGNoaWxkMUluZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGQySW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoaWxkMUluZGljZXMubGVuZ3RoID09PSAwIHx8IGNoaWxkMkluZGljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNoaWxkMUluZGljZXMgPSBpbmRpY2VzLnNsaWNlKDAsIGluZGljZXMubGVuZ3RoIC8gMik7XG4gICAgICAgIGNoaWxkMkluZGljZXMgPSBpbmRpY2VzLnNsaWNlKGluZGljZXMubGVuZ3RoIC8gMiwgLTEpO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGlsZDEgPSBuZXcgUG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUodGhpcy5nZW9tZXRyeSwgdGhpcy52ZXJ0cywgY2hpbGQxSW5kaWNlcywgdGhpcy5kZXB0aCArIDEpO1xuICAgICAgdGhpcy5jaGlsZDIgPSBuZXcgUG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeU5vZGUodGhpcy5nZW9tZXRyeSwgdGhpcy52ZXJ0cywgY2hpbGQySW5kaWNlcywgdGhpcy5kZXB0aCArIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhbG1vc3RJbnRlcnNlY3QocmF5OiBSYXksIHBpeGVsczogbnVtYmVyKTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG5cbiAgICBpZiAocmF5LmFsbW9zdEludGVyc2VjdEJvdW5kaW5nQm94KHRoaXMuYm91bmRpbmdCb3gsIHBpeGVscykgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICBsZXQgY2xvc2VzdEludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IG51bGw7XG4gICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIHRoaXMuaW5kaWNlcyEpIHtcbiAgICAgICAgbGV0IGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IHJheS5hbG1vc3RJbnRlcnNlY3RQb2ludCh0aGlzLmdlb21ldHJ5LCBpbmRleCwgdGhpcy52ZXJ0c1tpbmRleF0sIHBpeGVscyk7XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAoY2xvc2VzdEludGVyc2VjdGlvbiA9PT0gbnVsbCB8fCBpbnRlcnNlY3Rpb24uc2NyZWVuU3BhY2VEaXN0IDwgY2xvc2VzdEludGVyc2VjdGlvbi5zY3JlZW5TcGFjZURpc3QpIHtcbiAgICAgICAgICAgIGNsb3Nlc3RJbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xvc2VzdEludGVyc2VjdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdDEgPSB0aGlzLmNoaWxkMSEuYWxtb3N0SW50ZXJzZWN0KHJheSwgcGl4ZWxzKTtcbiAgICAgIGNvbnN0IHQyID0gdGhpcy5jaGlsZDIhLmFsbW9zdEludGVyc2VjdChyYXksIHBpeGVscyk7XG4gICAgICBpZiAodDEgPT09IG51bGwpIHJldHVybiB0MjtcbiAgICAgIGlmICh0MiA9PT0gbnVsbCkgcmV0dXJuIHQxO1xuICAgICAgcmV0dXJuICh0MS50aW1lIDwgdDIudGltZSkgPyB0MSA6IHQyO1xuICAgIH1cblxuICB9XG5cbiAgcHJpdmF0ZSBpc0xlYWYoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW5kaWNlcyEgIT09IG51bGw7XG4gIH1cblxuICBwdWJsaWMgcHJpbnQoKTogdm9pZCB7XG4gICAgdmFyIHN0cjogc3RyaW5nID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGVwdGg7IGkrKykgc3RyICs9IFwiLT5cIjtcbiAgICBpZiAodGhpcy5pc0xlYWYoKSkge1xuICAgICAgc3RyICs9IHRoaXMuaW5kaWNlcyEubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgICBjb25zb2xlLmxvZyhzdHIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhzdHIpO1xuICAgICAgdGhpcy5jaGlsZDEhLnByaW50KCk7XG4gICAgICB0aGlzLmNoaWxkMiEucHJpbnQoKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHkge1xuXG4gIHN0YXRpYyByZWFkb25seSBNQVhfUE9JTlRTX1BFUl9MRUFGOiBudW1iZXIgPSA1OyAvLyBUT0RPOiB0dW5lXG5cbiAgcHJpdmF0ZSByb290OiBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGdlb21ldHJ5OiBHZW9tZXRyeSxcbiAgICB2ZXJ0czogVmVjM1tdXG4gICkge1xuICAgIGNvbnN0IGluZGljZXM6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0cy5sZW5ndGg7IGkrKykgaW5kaWNlcy5wdXNoKGkpO1xuICAgIHRoaXMucm9vdCA9IG5ldyBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5Tm9kZSh0aGlzLmdlb21ldHJ5LCB2ZXJ0cywgaW5kaWNlcyk7XG4gIH1cblxuICBwdWJsaWMgcHJpbnQoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCI9PT09PT09PXBvaW50IGJiaD09PT09PT09XCIpO1xuICAgIHRoaXMucm9vdC5wcmludCgpO1xuICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PVwiKTtcbiAgfVxuXG4gIHB1YmxpYyBhbG1vc3RJbnRlcnNlY3QocmF5OiBSYXksIHBpeGVsczogbnVtYmVyKTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG5cbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2VvbWV0cnkuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBjb25zdCBvYmplY3RTcGFjZVJheTogUmF5ID0gUmF5LnRyYW5zZm9ybShyYXksIG1hdDQuaW52ZXJzZShtb2RlbCkpO1xuICAgIHZhciByZXM6IEludGVyc2VjdGlvbiB8IG51bGwgPSB0aGlzLnJvb3QuYWxtb3N0SW50ZXJzZWN0KG9iamVjdFNwYWNlUmF5LCBwaXhlbHMpO1xuICAgIHJlcz8udHJhbnNmb3JtKG1vZGVsLCBvYmplY3RTcGFjZVJheSk7XG4gICAgcmV0dXJuIHJlcztcblxuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/geometry/pointBoundingBoxHeirarchy.ts\n");

/***/ }),

/***/ "./src/geometry/points.ts":
/*!********************************!*\
  !*** ./src/geometry/points.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POINT_INDICES: () => (/* binding */ POINT_INDICES),\n/* harmony export */   POINT_MODEL: () => (/* binding */ POINT_MODEL),\n/* harmony export */   POINT_VERTS: () => (/* binding */ POINT_VERTS),\n/* harmony export */   Points: () => (/* binding */ Points)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../render/renterMeshInstanced */ \"./src/render/renterMeshInstanced.ts\");\n/* harmony import */ var _utils_clone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/clone */ \"./src/utils/clone.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./geometry */ \"./src/geometry/geometry.ts\");\n/* harmony import */ var _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pointBoundingBoxHeirarchy */ \"./src/geometry/pointBoundingBoxHeirarchy.ts\");\n\n\n\n\n\n\n\n\nconst POINT_VERTS = [\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(1, 0, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(0, 1, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(0, 0, 1),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(-1, 0, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(0, -1, 0),\n    wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.create(0, 0, -1),\n];\nconst POINT_INDICES = [\n    0, 1, 2,\n    0, 2, 4,\n    0, 4, 5,\n    0, 5, 1,\n    3, 1, 5,\n    3, 5, 4,\n    3, 4, 2,\n    3, 2, 1,\n];\nconst POINT_MODEL = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.uniformScaling(0.01);\nconst controlPointModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.uniformScaling(0.01);\nclass Points extends _geometry__WEBPACK_IMPORTED_MODULE_5__.Geometry {\n    constructor(parent, verts, model, material = null) {\n        super(parent, model, material);\n        this.verts = verts;\n        this.pointBBH = new _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_6__.PointBoundingBoxHeirarchy(this, this.verts);\n        this.subSelection = [];\n        for (let i = 0; i < this.verts.length; i++)\n            this.subSelection.push(false);\n        this.subSelectionCount = 0;\n        const transforms = [];\n        for (const vert of this.verts) {\n            transforms.push((0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.translation(vert), POINT_MODEL)));\n        }\n        this.points = new _render_renterMeshInstanced__WEBPACK_IMPORTED_MODULE_1__.RenderMeshInstanced(this, POINT_VERTS, POINT_VERTS, POINT_INDICES, transforms, this.subSelection, true);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderMeshInstanced(this.points);\n    }\n    getBoundingBox() {\n        const res = new _boundingBox__WEBPACK_IMPORTED_MODULE_4__.BoundingBox();\n        const model = this.getModelRecursive();\n        for (const vert of this.verts) {\n            res.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(vert, model));\n        }\n        return res;\n    }\n    getTypeName() {\n        return \"Points\";\n    }\n    intersect(ray, sub) {\n        if (this.isHidden())\n            return null;\n        return this.pointBBH.almostIntersect(ray, 10);\n    }\n    isWithinFrustum(frustum, inclusive) {\n        const bb = this.getBoundingBox();\n        if (frustum.containsBoundingBoxFully(bb)) {\n            return true;\n        }\n        if (!frustum.intersectsBoundingBox(bb)) {\n            return false;\n        }\n        const model = this.getModelRecursive();\n        for (const vert of this.verts) {\n            if (!frustum.containsPoint(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(vert, model))) {\n                return false;\n            }\n        }\n        return true;\n    }\n    addToSubSelection(...subIDs) {\n        for (const subID of subIDs) {\n            if (!this.subSelection[subID]) {\n                this.subSelectionCount++;\n                this.subSelection[subID] = true;\n            }\n        }\n        this.points.updateSubSelection(this.subSelection);\n    }\n    removeFromSubSelection(...subIDs) {\n        for (const subID of subIDs) {\n            if (this.subSelection[subID]) {\n                this.subSelectionCount--;\n                this.subSelection[subID] = false;\n            }\n        }\n        this.points.updateSubSelection(this.subSelection);\n    }\n    clearSubSelection() {\n        for (let i = 0; i < this.subSelection.length; i++) {\n            this.subSelection[i] = false;\n        }\n        this.points.updateSubSelection(this.subSelection);\n    }\n    getWithinFrustumSub(frustum, _) {\n        if (this.isHidden())\n            return [];\n        const res = [];\n        const model = this.getModelRecursive();\n        for (let i = 0; i < this.verts.length; i++) {\n            if (frustum.containsPoint(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(this.verts[i], model))) {\n                res.push(i);\n            }\n        }\n        return res;\n    }\n    isSubSelected(subID) {\n        return this.subSelection[subID];\n    }\n    hasSubSelection() {\n        return this.subSelectionCount > 0;\n    }\n    getSubSelectionBoundingBox() {\n        const bb = new _boundingBox__WEBPACK_IMPORTED_MODULE_4__.BoundingBox();\n        if (this.subSelectionCount == 0)\n            return bb;\n        const model = this.getModelRecursive();\n        for (let i = 0; i < this.verts.length; i++) {\n            if (this.subSelection[i]) {\n                bb.addVec3(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(this.verts[i], model));\n            }\n        }\n        return bb;\n    }\n    showControls(on) {\n    }\n    onSelectionMoved() {\n        if (this.subSelectionCount > 0) {\n            const subSelectionTransform = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform();\n            const newTranslations = [];\n            for (let i = 0; i < this.verts.length; i++) {\n                if (this.subSelection[i]) {\n                    newTranslations.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(this.verts[i], subSelectionTransform)));\n                }\n                else {\n                    newTranslations.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.translation(this.verts[i]));\n                }\n            }\n            this.points.updateTransforms(newTranslations);\n        }\n        else {\n            const model = this.getModelRecursive();\n            const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.getTranslation(model);\n            const modelNoTranslation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(translation, -1)), model);\n            this.points.updateTransforms(this.verts.map((pos) => {\n                return (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.translation(pos), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.inverse(modelNoTranslation), POINT_MODEL)));\n            }));\n        }\n    }\n    bakeSelectionTransform() {\n        if (this.subSelectionCount > 0) {\n            const subSelectionTransform = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform();\n            const newVerts = [];\n            for (let i = 0; i < this.verts.length; i++) {\n                let newVert;\n                if (this.subSelection[i]) {\n                    newVert = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.transformMat4(this.verts[i], subSelectionTransform);\n                }\n                else {\n                    newVert = this.verts[i];\n                }\n                newVerts.push(newVert);\n            }\n            this.verts = newVerts;\n            this.pointBBH = new _pointBoundingBoxHeirarchy__WEBPACK_IMPORTED_MODULE_6__.PointBoundingBoxHeirarchy(this, this.verts);\n        }\n        else {\n            const model = this.getModelRecursive();\n            const translation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.getTranslation(model);\n            const modelNoTranslation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.vec3.scale(translation, -1)), model);\n            this.points.updateTransforms(this.verts.map((pos) => {\n                return (0,_utils_math__WEBPACK_IMPORTED_MODULE_3__.swizzleYZ)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.translation(pos), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.inverse(modelNoTranslation), POINT_MODEL)));\n            }));\n        }\n    }\n    delete() {\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeMeshInstanced(this.points);\n    }\n    clone() {\n        return new Points(this.parent, (0,_utils_clone__WEBPACK_IMPORTED_MODULE_2__.cloneVec3List)(this.verts), wgpu_matrix__WEBPACK_IMPORTED_MODULE_7__.mat4.clone(this.model), this.materialName);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akU7YUFBTTtZQUNMLE1BQU0sS0FBSyxHQUFTLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQzdDLE1BQU0sV0FBVyxHQUFTLDZDQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3JELE1BQU0sa0JBQWtCLEdBQVMsNkNBQUksQ0FBQyxHQUFHLENBQUMsNkNBQUksQ0FBQyxXQUFXLENBQUMsNkNBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNoRyxJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBUyxFQUFFLEVBQUU7Z0JBQ3hELE9BQU8sc0RBQVMsQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyw2Q0FBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRSw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyw2Q0FBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3RyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ0w7SUFDSCxDQUFDO0lBRU0sTUFBTTtRQUNYLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFFTSxLQUFLO1FBQ1YsT0FBTyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLDJEQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLDZDQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdkcsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvcG9pbnRzLnRzP2QzZWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCI7XG5pbXBvcnQgeyBNYXRlcmlhbE5hbWUgfSBmcm9tIFwiLi4vbWF0ZXJpYWxzL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBSZW5kZXJNZXNoSW5zdGFuY2VkIH0gZnJvbSBcIi4uL3JlbmRlci9yZW50ZXJNZXNoSW5zdGFuY2VkXCI7XG5pbXBvcnQgeyBjbG9uZVZlYzNMaXN0IH0gZnJvbSBcIi4uL3V0aWxzL2Nsb25lXCI7XG5pbXBvcnQgeyBzd2l6emxlWVogfSBmcm9tIFwiLi4vdXRpbHMvbWF0aFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgRnJ1c3R1bSB9IGZyb20gXCIuL2ZydXN0dW1cIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuL2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeSB9IGZyb20gXCIuL3BvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHlcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuL3JheVwiO1xuXG5leHBvcnQgY29uc3QgUE9JTlRfVkVSVFM6IFZlYzNbXSA9IFtcbiAgdmVjMy5jcmVhdGUoMSwgMCwgMCksXG4gIHZlYzMuY3JlYXRlKDAsIDEsIDApLFxuICB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSxcbiAgdmVjMy5jcmVhdGUoLTEsIDAsIDApLFxuICB2ZWMzLmNyZWF0ZSgwLCAtMSwgMCksXG4gIHZlYzMuY3JlYXRlKDAsIDAsIC0xKSxcbl07XG5cbmV4cG9ydCBjb25zdCBQT0lOVF9JTkRJQ0VTOiBudW1iZXJbXSA9IFtcbiAgMCwgMSwgMixcbiAgMCwgMiwgNCxcbiAgMCwgNCwgNSxcbiAgMCwgNSwgMSxcblxuICAzLCAxLCA1LFxuICAzLCA1LCA0LFxuICAzLCA0LCAyLFxuICAzLCAyLCAxLFxuXTtcblxuZXhwb3J0IGNvbnN0IFBPSU5UX01PREVMOiBNYXQ0ID0gbWF0NC51bmlmb3JtU2NhbGluZygwLjAxKTtcblxuY29uc3QgY29udHJvbFBvaW50TW9kZWw6IE1hdDQgPSBtYXQ0LnVuaWZvcm1TY2FsaW5nKDAuMDEpO1xuXG5leHBvcnQgY2xhc3MgUG9pbnRzIGV4dGVuZHMgR2VvbWV0cnkge1xuXG4gIHByaXZhdGUgcG9pbnRCQkg6IFBvaW50Qm91bmRpbmdCb3hIZWlyYXJjaHk7XG4gIHByaXZhdGUgc3ViU2VsZWN0aW9uOiBib29sZWFuW107XG4gIHByaXZhdGUgc3ViU2VsZWN0aW9uQ291bnQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBwb2ludHM6IFJlbmRlck1lc2hJbnN0YW5jZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50OiBHZW9tZXRyeSB8IG51bGwsXG4gICAgcHJpdmF0ZSB2ZXJ0czogVmVjM1tdLFxuICAgIG1vZGVsPzogTWF0NCxcbiAgICBtYXRlcmlhbDogTWF0ZXJpYWxOYW1lIHwgbnVsbCA9IG51bGxcbiAgKSB7XG5cbiAgICBzdXBlcihwYXJlbnQsIG1vZGVsLCBtYXRlcmlhbCk7XG4gICAgdGhpcy5wb2ludEJCSCA9IG5ldyBQb2ludEJvdW5kaW5nQm94SGVpcmFyY2h5KHRoaXMsIHRoaXMudmVydHMpO1xuICAgIHRoaXMuc3ViU2VsZWN0aW9uID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZlcnRzLmxlbmd0aDsgaSsrKSB0aGlzLnN1YlNlbGVjdGlvbi5wdXNoKGZhbHNlKTtcbiAgICB0aGlzLnN1YlNlbGVjdGlvbkNvdW50ID0gMDtcblxuICAgIGNvbnN0IHRyYW5zZm9ybXM6IE1hdDRbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgdmVydCBvZiB0aGlzLnZlcnRzKSB7XG4gICAgICB0cmFuc2Zvcm1zLnB1c2goc3dpenpsZVlaKG1hdDQubXVsKG1hdDQudHJhbnNsYXRpb24odmVydCksIFBPSU5UX01PREVMKSkpO1xuICAgIH1cblxuICAgIHRoaXMucG9pbnRzID0gbmV3IFJlbmRlck1lc2hJbnN0YW5jZWQoXG4gICAgICB0aGlzLFxuICAgICAgUE9JTlRfVkVSVFMsXG4gICAgICBQT0lOVF9WRVJUUyxcbiAgICAgIFBPSU5UX0lORElDRVMsXG4gICAgICB0cmFuc2Zvcm1zLFxuICAgICAgdGhpcy5zdWJTZWxlY3Rpb24sXG4gICAgICB0cnVlKTtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZFJlbmRlck1lc2hJbnN0YW5jZWQodGhpcy5wb2ludHMpO1xuICB9XG5cbiAgcHVibGljIGdldEJvdW5kaW5nQm94KCk6IEJvdW5kaW5nQm94IHtcbiAgICBjb25zdCByZXM6IEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgZm9yIChjb25zdCB2ZXJ0IG9mIHRoaXMudmVydHMpIHtcbiAgICAgIHJlcy5hZGRWZWMzKHZlYzMudHJhbnNmb3JtTWF0NCh2ZXJ0LCBtb2RlbCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHVibGljIGdldFR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiUG9pbnRzXCI7XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5LCBzdWI6IGJvb2xlYW4pOiBJbnRlcnNlY3Rpb24gfCBudWxsIHtcbiAgICBpZiAodGhpcy5pc0hpZGRlbigpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gdGhpcy5wb2ludEJCSC5hbG1vc3RJbnRlcnNlY3QocmF5LCAxMClcbiAgfVxuXG4gIHB1YmxpYyBpc1dpdGhpbkZydXN0dW0oZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYmI6IEJvdW5kaW5nQm94ID0gdGhpcy5nZXRCb3VuZGluZ0JveCgpO1xuICAgIGlmIChmcnVzdHVtLmNvbnRhaW5zQm91bmRpbmdCb3hGdWxseShiYikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWZydXN0dW0uaW50ZXJzZWN0c0JvdW5kaW5nQm94KGJiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICBmb3IgKGNvbnN0IHZlcnQgb2YgdGhpcy52ZXJ0cykge1xuICAgICAgaWYgKCFmcnVzdHVtLmNvbnRhaW5zUG9pbnQodmVjMy50cmFuc2Zvcm1NYXQ0KHZlcnQsIG1vZGVsKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRUb1N1YlNlbGVjdGlvbiguLi5zdWJJRHM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBzdWJJRCBvZiBzdWJJRHMpIHtcbiAgICAgIGlmICghdGhpcy5zdWJTZWxlY3Rpb25bc3ViSURdKSB7XG4gICAgICAgIHRoaXMuc3ViU2VsZWN0aW9uQ291bnQrKztcbiAgICAgICAgdGhpcy5zdWJTZWxlY3Rpb25bc3ViSURdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wb2ludHMudXBkYXRlU3ViU2VsZWN0aW9uKHRoaXMuc3ViU2VsZWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVGcm9tU3ViU2VsZWN0aW9uKC4uLnN1YklEczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHN1YklEIG9mIHN1YklEcykge1xuICAgICAgaWYgKHRoaXMuc3ViU2VsZWN0aW9uW3N1YklEXSkge1xuICAgICAgICB0aGlzLnN1YlNlbGVjdGlvbkNvdW50LS07XG4gICAgICAgIHRoaXMuc3ViU2VsZWN0aW9uW3N1YklEXSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnBvaW50cy51cGRhdGVTdWJTZWxlY3Rpb24odGhpcy5zdWJTZWxlY3Rpb24pO1xuICB9XG5cbiAgcHVibGljIGNsZWFyU3ViU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdWJTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuc3ViU2VsZWN0aW9uW2ldID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMucG9pbnRzLnVwZGF0ZVN1YlNlbGVjdGlvbih0aGlzLnN1YlNlbGVjdGlvbik7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtOiBGcnVzdHVtLCBfOiBib29sZWFuKTogbnVtYmVyW10ge1xuICAgIGlmICh0aGlzLmlzSGlkZGVuKCkpIHJldHVybiBbXTtcbiAgICBjb25zdCByZXM6IG51bWJlcltdID0gW107XG4gICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZlcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZnJ1c3R1bS5jb250YWluc1BvaW50KHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLnZlcnRzW2ldLCBtb2RlbCkpKSB7XG4gICAgICAgIHJlcy5wdXNoKGkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHVibGljIGlzU3ViU2VsZWN0ZWQoc3ViSUQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN1YlNlbGVjdGlvbltzdWJJRF07XG4gIH1cblxuICBwdWJsaWMgaGFzU3ViU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN1YlNlbGVjdGlvbkNvdW50ID4gMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdWJTZWxlY3Rpb25Cb3VuZGluZ0JveCgpOiBCb3VuZGluZ0JveCB7XG4gICAgY29uc3QgYmI6IEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgaWYgKHRoaXMuc3ViU2VsZWN0aW9uQ291bnQgPT0gMCkgcmV0dXJuIGJiO1xuICAgIGNvbnN0IG1vZGVsOiBNYXQ0ID0gdGhpcy5nZXRNb2RlbFJlY3Vyc2l2ZSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuc3ViU2VsZWN0aW9uW2ldKSB7XG4gICAgICAgIGJiLmFkZFZlYzModmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudmVydHNbaV0sIG1vZGVsKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBiYjtcbiAgfVxuXG4gIHB1YmxpYyBzaG93Q29udHJvbHMob246IGJvb2xlYW4pOiB2b2lkIHtcbiAgfVxuXG4gIHB1YmxpYyBvblNlbGVjdGlvbk1vdmVkKCk6IHZvaWQge1xuXG4gICAgaWYgKHRoaXMuc3ViU2VsZWN0aW9uQ291bnQgPiAwKSB7XG4gICAgICBjb25zdCBzdWJTZWxlY3Rpb25UcmFuc2Zvcm06IE1hdDQgPSBJTlNUQU5DRS5nZXRNb3ZlcigpLmdldFRyYW5zZm9ybSgpO1xuICAgICAgY29uc3QgbmV3VHJhbnNsYXRpb25zOiBNYXQ0W10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5zdWJTZWxlY3Rpb25baV0pIHtcbiAgICAgICAgICBuZXdUcmFuc2xhdGlvbnMucHVzaChtYXQ0LnRyYW5zbGF0aW9uKFxuICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudmVydHNbaV0sIHN1YlNlbGVjdGlvblRyYW5zZm9ybSkpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdUcmFuc2xhdGlvbnMucHVzaChtYXQ0LnRyYW5zbGF0aW9uKHRoaXMudmVydHNbaV0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5wb2ludHMudXBkYXRlVHJhbnNmb3JtcyhuZXdUcmFuc2xhdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtb2RlbDogTWF0NCA9IHRoaXMuZ2V0TW9kZWxSZWN1cnNpdmUoKTtcbiAgICAgIGNvbnN0IHRyYW5zbGF0aW9uOiBWZWMzID0gbWF0NC5nZXRUcmFuc2xhdGlvbihtb2RlbCk7XG4gICAgICBjb25zdCBtb2RlbE5vVHJhbnNsYXRpb246IE1hdDQgPSBtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHZlYzMuc2NhbGUodHJhbnNsYXRpb24sIC0xKSksIG1vZGVsKTtcbiAgICAgIHRoaXMucG9pbnRzLnVwZGF0ZVRyYW5zZm9ybXModGhpcy52ZXJ0cy5tYXAoKHBvczogVmVjMykgPT4ge1xuICAgICAgICByZXR1cm4gc3dpenpsZVlaKG1hdDQubXVsKG1hdDQudHJhbnNsYXRpb24ocG9zKSwgbWF0NC5tdWwobWF0NC5pbnZlcnNlKG1vZGVsTm9UcmFuc2xhdGlvbiksIFBPSU5UX01PREVMKSkpO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBiYWtlU2VsZWN0aW9uVHJhbnNmb3JtKCk6IHZvaWQge1xuXG4gICAgaWYgKHRoaXMuc3ViU2VsZWN0aW9uQ291bnQgPiAwKSB7XG4gICAgICBjb25zdCBzdWJTZWxlY3Rpb25UcmFuc2Zvcm06IE1hdDQgPSBJTlNUQU5DRS5nZXRNb3ZlcigpLmdldFRyYW5zZm9ybSgpO1xuICAgICAgY29uc3QgbmV3VmVydHM6IFZlYzNbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZlcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBuZXdWZXJ0OiBWZWMzO1xuICAgICAgICBpZiAodGhpcy5zdWJTZWxlY3Rpb25baV0pIHtcbiAgICAgICAgICBuZXdWZXJ0ID0gdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudmVydHNbaV0sIHN1YlNlbGVjdGlvblRyYW5zZm9ybSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3VmVydCA9IHRoaXMudmVydHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgbmV3VmVydHMucHVzaChuZXdWZXJ0KTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmVydHMgPSBuZXdWZXJ0cztcbiAgICAgIHRoaXMucG9pbnRCQkggPSBuZXcgUG9pbnRCb3VuZGluZ0JveEhlaXJhcmNoeSh0aGlzLCB0aGlzLnZlcnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbW9kZWw6IE1hdDQgPSB0aGlzLmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgICBjb25zdCB0cmFuc2xhdGlvbjogVmVjMyA9IG1hdDQuZ2V0VHJhbnNsYXRpb24obW9kZWwpO1xuICAgICAgY29uc3QgbW9kZWxOb1RyYW5zbGF0aW9uOiBNYXQ0ID0gbWF0NC5tdWwobWF0NC50cmFuc2xhdGlvbih2ZWMzLnNjYWxlKHRyYW5zbGF0aW9uLCAtMSkpLCBtb2RlbCk7XG4gICAgICB0aGlzLnBvaW50cy51cGRhdGVUcmFuc2Zvcm1zKHRoaXMudmVydHMubWFwKChwb3M6IFZlYzMpID0+IHtcbiAgICAgICAgcmV0dXJuIHN3aXp6bGVZWihtYXQ0Lm11bChtYXQ0LnRyYW5zbGF0aW9uKHBvcyksIG1hdDQubXVsKG1hdDQuaW52ZXJzZShtb2RlbE5vVHJhbnNsYXRpb24pLCBQT0lOVF9NT0RFTCkpKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlKCk6IHZvaWQge1xuICAgIElOU1RBTkNFLmdldFNjZW5lKCkucmVtb3ZlTWVzaEluc3RhbmNlZCh0aGlzLnBvaW50cyk7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogR2VvbWV0cnkge1xuICAgIHJldHVybiBuZXcgUG9pbnRzKHRoaXMucGFyZW50LCBjbG9uZVZlYzNMaXN0KHRoaXMudmVydHMpLCBtYXQ0LmNsb25lKHRoaXMubW9kZWwpLCB0aGlzLm1hdGVyaWFsTmFtZSk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/geometry/points.ts\n");

/***/ }),

/***/ "./src/geometry/ray.ts":
/*!*****************************!*\
  !*** ./src/geometry/ray.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ray: () => (/* binding */ Ray)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _intersection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./intersection */ \"./src/geometry/intersection.ts\");\n/* harmony import */ var _plane__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./plane */ \"./src/geometry/plane.ts\");\n\n\n\n\nclass Ray {\n    constructor(origin, direction) {\n        this.origin = origin;\n        this.direction = direction;\n        this.direction = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(this.direction);\n    }\n    print() {\n        console.log(`RAY: origin: ${this.origin.toString()}, direction: ${this.direction.map((n) => {\n            return Math.round(n * 100);\n        }).toString()}`);\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getDirection() {\n        return this.direction;\n    }\n    at(time) {\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.origin, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(this.direction, time));\n    }\n    intersectPlane(plane, allowNegative = false) {\n        const numerator = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(plane.getOrigin(), this.origin), plane.getNormal());\n        const denominator = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(this.direction, plane.getNormal());\n        if (denominator === 0) { // parallel case\n            // NOTE: might need to look into this\n            return null;\n        }\n        const t = numerator / denominator;\n        if (allowNegative)\n            return t;\n        if (t < 0)\n            return null;\n        return t;\n    }\n    almostIntersectBoundingBox(bb, pixels) {\n        var _a, _b, _c, _d, _e, _f;\n        const dxMin = Math.abs(this.origin[0] - bb.getXMin());\n        const dyMin = Math.abs(this.origin[1] - bb.getYMin());\n        const dzMin = Math.abs(this.origin[2] - bb.getZMin());\n        const dxMax = Math.abs(this.origin[0] - bb.getXMax());\n        const dyMax = Math.abs(this.origin[1] - bb.getYMax());\n        const dzMax = Math.abs(this.origin[2] - bb.getZMax());\n        const farthest = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(dxMin < dxMax ? bb.getXMax() : bb.getXMin(), dyMin < dyMax ? bb.getYMax() : bb.getYMin(), dzMin < dzMax ? bb.getZMax() : bb.getZMin());\n        const dist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.distance(this.origin, farthest);\n        const maxDist = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().pixelSizeAtDist(dist) * pixels;\n        const min = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin() - maxDist, bb.getYMin() - maxDist, bb.getZMin() - maxDist);\n        const max = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax() + maxDist, bb.getYMax() + maxDist, bb.getZMax() + maxDist);\n        if (this.direction[0] < 0)\n            [min[0], max[0]] = [max[0], min[0]];\n        if (this.direction[1] < 0)\n            [min[1], max[1]] = [max[1], min[1]];\n        if (this.direction[2] < 0)\n            [min[2], max[2]] = [max[2], min[2]];\n        var xMin = (_a = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(1, 0, 0)), true)) !== null && _a !== void 0 ? _a : -Infinity;\n        var yMin = (_b = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 1, 0)), true)) !== null && _b !== void 0 ? _b : -Infinity;\n        var zMin = (_c = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 1)), true)) !== null && _c !== void 0 ? _c : -Infinity;\n        var xMax = (_d = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(1, 0, 0)), true)) !== null && _d !== void 0 ? _d : Infinity;\n        var yMax = (_e = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 1, 0)), true)) !== null && _e !== void 0 ? _e : Infinity;\n        var zMax = (_f = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 1)), true)) !== null && _f !== void 0 ? _f : Infinity;\n        const end = Math.min(xMax, Math.min(yMax, zMax));\n        const start = Math.max(xMin, Math.max(yMin, zMin));\n        if (end < 0 || start > end)\n            return null;\n        return Math.max(start, 0.00001); // so its truthy\n    }\n    // always posotive\n    intersectBoundingBox(bb) {\n        var _a, _b, _c, _d, _e, _f;\n        const min = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMin(), bb.getYMin(), bb.getZMin());\n        const max = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(bb.getXMax(), bb.getYMax(), bb.getZMax());\n        if (this.direction[0] < 0)\n            [min[0], max[0]] = [max[0], min[0]];\n        if (this.direction[1] < 0)\n            [min[1], max[1]] = [max[1], min[1]];\n        if (this.direction[2] < 0)\n            [min[2], max[2]] = [max[2], min[2]];\n        var xMin = (_a = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(1, 0, 0)), true)) !== null && _a !== void 0 ? _a : -Infinity;\n        var yMin = (_b = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 1, 0)), true)) !== null && _b !== void 0 ? _b : -Infinity;\n        var zMin = (_c = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(min, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 1)), true)) !== null && _c !== void 0 ? _c : -Infinity;\n        var xMax = (_d = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(1, 0, 0)), true)) !== null && _d !== void 0 ? _d : Infinity;\n        var yMax = (_e = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 1, 0)), true)) !== null && _e !== void 0 ? _e : Infinity;\n        var zMax = (_f = this.intersectPlane(new _plane__WEBPACK_IMPORTED_MODULE_2__.Plane(max, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(0, 0, 1)), true)) !== null && _f !== void 0 ? _f : Infinity;\n        const end = Math.min(xMax, Math.min(yMax, zMax));\n        const start = Math.max(xMin, Math.max(yMin, zMin));\n        if (end < 0 || start > end)\n            return null;\n        return Math.max(start, 0.00001); // so its truthy\n    }\n    intersectTriangle(p1, p2, p3) {\n        const v12 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p2, p1);\n        const v13 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p3, p1);\n        const normal = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(v12, v13));\n        const denom = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(normal, this.direction);\n        if (denom === 0)\n            return null;\n        const t = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p1, this.origin), normal) / denom;\n        if (t < 0)\n            return null;\n        const point = this.at(t);\n        const d1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(normal, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, p1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p2, p1)));\n        const d2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(normal, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, p2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p3, p2)));\n        const d3 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(normal, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.cross(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, p3), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p1, p3)));\n        if (\n        // remove one of these lines for back face culling.\n        d1 > 0 && d2 > 0 && d3 > 0 ||\n            d1 < 0 && d2 < 0 && d3 < 0)\n            return t;\n        else\n            return null;\n    }\n    static transform(ray, mat) {\n        const newOrigin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.transformMat4(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(...ray.origin, 1), mat);\n        const newDirection = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.transformMat4(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(...ray.direction, 0), mat);\n        return new Ray(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(newOrigin[0], newOrigin[1], newOrigin[2]), wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.create(newDirection[0], newDirection[1], newDirection[2]));\n    }\n    almostIntersectLine(geo, subID, start, end, pixels) {\n        const p = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.origin, this.direction);\n        const v13 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(start, this.origin);\n        const v43 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p, this.origin);\n        const v21 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(end, start);\n        const d1343 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v13, v43);\n        const d4321 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v43, v21);\n        const d1321 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v13, v21);\n        const d4343 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v43, v43);\n        const d2121 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v21, v21);\n        var mua = (d1343 * d4321 - d1321 * d4343) / (d2121 * d4343 - d4321 * d4321);\n        const mub = (d1343 + mua * d4321) / d4343;\n        mua = Math.max(Math.min(mua, 1), 0);\n        // p line\n        const pLine = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(start, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(v21, mua));\n        //p ray\n        const pRay = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.origin, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(v43, mub));\n        const distToIntersection = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.distance(this.origin, pLine);\n        const closest = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.distance(pLine, pRay);\n        const sizeOfPixel = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().pixelSizeAtDist(distToIntersection);\n        if (closest < sizeOfPixel * pixels) {\n            return new _intersection__WEBPACK_IMPORTED_MODULE_1__.Intersection(mub, \"line\", geo, subID, pLine, closest, closest * sizeOfPixel);\n        }\n        else {\n            return null;\n        }\n    }\n    almostIntersectPoint(geometry, subID, point, pixels) {\n        const toPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, this.origin);\n        const time = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(toPoint, this.direction);\n        if (time <= 0)\n            return null;\n        const pointOnRay = this.at(time);\n        const dist = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.distance(pointOnRay, point);\n        const sizeOfPixel = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().pixelSizeAtDist(time);\n        if (dist < sizeOfPixel * pixels) {\n            return new _intersection__WEBPACK_IMPORTED_MODULE_1__.Intersection(time, \"point\", geometry, subID, point, dist, dist * sizeOfPixel);\n        }\n        else {\n            return null;\n        }\n    }\n    closestPointOnLine(start, end) {\n        const p = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.origin, this.direction);\n        const v13 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(start, this.origin);\n        const v43 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p, this.origin);\n        const v21 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(end, start);\n        const d1343 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v13, v43);\n        const d4321 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v43, v21);\n        const d1321 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v13, v21);\n        const d4343 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v43, v43);\n        const d2121 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v21, v21);\n        const denom = d2121 * d4343 - d4321 * d4321;\n        if (denom === 0)\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.clone(start);\n        var mua = (d1343 * d4321 - d1321 * d4343) / denom;\n        const res = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(start, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(v21, mua));\n        return res;\n    }\n    closestPointToLine(start, end) {\n        const p = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.origin, this.direction);\n        const v13 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(start, this.origin);\n        const v43 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(p, this.origin);\n        const v21 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(end, start);\n        const d1343 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v13, v43);\n        const d4321 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v43, v21);\n        const d1321 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v13, v21);\n        const d4343 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v43, v43);\n        const d2121 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(v21, v21);\n        var mua = (d1343 * d4321 - d1321 * d4343) / (d2121 * d4343 - d4321 * d4321);\n        const mub = (d1343 + mua * d4321) / d4343;\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.add(this.origin, wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.scale(v43, mub));\n    }\n    closestDistanceToPoint(point) {\n        const op = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, this.origin);\n        const a = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(op, this.direction);\n        const b = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.length(op);\n        return Math.sqrt(b * b + a * a);\n    }\n    closestPointToPoint(point) {\n        const op = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.sub(point, this.origin);\n        const a = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec3.dot(op, this.direction);\n        return this.at(a);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3RELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUV0RCxNQUFNLFFBQVEsR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FDaEMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEVBQzNDLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxFQUMzQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FDNUM7UUFFRCxNQUFNLElBQUksR0FBVyw2Q0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQzFELE1BQU0sT0FBTyxHQUFXLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQztRQUV2RixNQUFNLEdBQUcsR0FBUyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsT0FBTyxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDO1FBQ3RHLE1BQU0sR0FBRyxHQUFTLDZDQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDLENBQUM7UUFFdEcsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMvRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1lBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFL0QsSUFBSSxJQUFJLEdBQVcsVUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLHlDQUFLLENBQUMsR0FBRyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsbUNBQUksQ0FBQyxRQUFRLENBQUM7UUFDaEcsSUFBSSxJQUFJLEdBQVcsVUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLHlDQUFLLENBQUMsR0FBRyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsbUNBQUksQ0FBQyxRQUFRLENBQUM7UUFDaEcsSUFBSSxJQUFJLEdBQVcsVUFBSSxDQUFDLGNBQWMs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R0FBRyxLQUFLLENBQUMsQ0FBQztRQUNwRixNQUFNLEdBQUcsR0FBVyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBRWxELE9BQU8sNkNBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRU0sc0JBQXNCLENBQUMsS0FBVztRQUN2QyxNQUFNLEVBQUUsR0FBUyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlDLE1BQU0sQ0FBQyxHQUFXLDZDQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLEdBQVcsNkNBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFDTSxtQkFBbUIsQ0FBQyxLQUFXO1FBQ3BDLE1BQU0sRUFBRSxHQUFTLDZDQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLEdBQVcsNkNBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUMvQyxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEIsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvZ2VvbWV0cnkvcmF5LnRzPzg3YTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgdmVjMywgVmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCI7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9zY2VuZS9zY2VuZVwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4vaW50ZXJzZWN0aW9uXCI7XG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuL3BsYW5lXCI7XG5cbmV4cG9ydCBjbGFzcyBSYXkge1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgb3JpZ2luOiBWZWMzLFxuICAgIHByaXZhdGUgZGlyZWN0aW9uOiBWZWMzXG4gICkge1xuICAgIHRoaXMuZGlyZWN0aW9uID0gdmVjMy5ub3JtYWxpemUodGhpcy5kaXJlY3Rpb24pO1xuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKGBSQVk6IG9yaWdpbjogJHt0aGlzLm9yaWdpbi50b1N0cmluZygpfSwgZGlyZWN0aW9uOiAke3RoaXMuZGlyZWN0aW9uLm1hcCgobjogbnVtYmVyKSA9PiB7XG4gICAgICByZXR1cm4gTWF0aC5yb3VuZChuICogMTAwKTtcbiAgICB9KS50b1N0cmluZygpfWApO1xuICB9XG5cbiAgcHVibGljIGdldE9yaWdpbigpOiBWZWMzIHtcbiAgICByZXR1cm4gdGhpcy5vcmlnaW47XG4gIH1cblxuICBwdWJsaWMgZ2V0RGlyZWN0aW9uKCk6IFZlYzMge1xuICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBhdCh0aW1lOiBudW1iZXIpOiBWZWMzIHtcbiAgICByZXR1cm4gdmVjMy5hZGQodGhpcy5vcmlnaW4sIHZlYzMuc2NhbGUodGhpcy5kaXJlY3Rpb24sIHRpbWUpKTtcbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3RQbGFuZShwbGFuZTogUGxhbmUsIGFsbG93TmVnYXRpdmU6IGJvb2xlYW4gPSBmYWxzZSk6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IG51bWVyYXRvcjogbnVtYmVyID0gdmVjMy5kb3QodmVjMy5zdWIocGxhbmUuZ2V0T3JpZ2luKCksIHRoaXMub3JpZ2luKSwgcGxhbmUuZ2V0Tm9ybWFsKCkpO1xuICAgIGNvbnN0IGRlbm9taW5hdG9yOiBudW1iZXIgPSB2ZWMzLmRvdCh0aGlzLmRpcmVjdGlvbiwgcGxhbmUuZ2V0Tm9ybWFsKCkpO1xuICAgIGlmIChkZW5vbWluYXRvciA9PT0gMCkgeyAvLyBwYXJhbGxlbCBjYXNlXG4gICAgICAvLyBOT1RFOiBtaWdodCBuZWVkIHRvIGxvb2sgaW50byB0aGlzXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdDogbnVtYmVyID0gbnVtZXJhdG9yIC8gZGVub21pbmF0b3I7XG4gICAgaWYgKGFsbG93TmVnYXRpdmUpIHJldHVybiB0O1xuICAgIGlmICh0IDwgMCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHQ7XG4gIH1cblxuICBwdWJsaWMgYWxtb3N0SW50ZXJzZWN0Qm91bmRpbmdCb3goYmI6IEJvdW5kaW5nQm94LCBwaXhlbHM6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuXG4gICAgY29uc3QgZHhNaW4gPSBNYXRoLmFicyh0aGlzLm9yaWdpblswXSAtIGJiLmdldFhNaW4oKSk7XG4gICAgY29uc3QgZHlNaW4gPSBNYXRoLmFicyh0aGlzLm9yaWdpblsxXSAtIGJiLmdldFlNaW4oKSk7XG4gICAgY29uc3QgZHpNaW4gPSBNYXRoLmFicyh0aGlzLm9yaWdpblsyXSAtIGJiLmdldFpNaW4oKSk7XG4gICAgY29uc3QgZHhNYXggPSBNYXRoLmFicyh0aGlzLm9yaWdpblswXSAtIGJiLmdldFhNYXgoKSk7XG4gICAgY29uc3QgZHlNYXggPSBNYXRoLmFicyh0aGlzLm9yaWdpblsxXSAtIGJiLmdldFlNYXgoKSk7XG4gICAgY29uc3QgZHpNYXggPSBNYXRoLmFicyh0aGlzLm9yaWdpblsyXSAtIGJiLmdldFpNYXgoKSk7XG5cbiAgICBjb25zdCBmYXJ0aGVzdDogVmVjMyA9IHZlYzMuY3JlYXRlKFxuICAgICAgZHhNaW4gPCBkeE1heCA/IGJiLmdldFhNYXgoKSA6IGJiLmdldFhNaW4oKSxcbiAgICAgIGR5TWluIDwgZHlNYXggPyBiYi5nZXRZTWF4KCkgOiBiYi5nZXRZTWluKCksXG4gICAgICBkek1pbiA8IGR6TWF4ID8gYmIuZ2V0Wk1heCgpIDogYmIuZ2V0Wk1pbigpLFxuICAgIClcblxuICAgIGNvbnN0IGRpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UodGhpcy5vcmlnaW4sIGZhcnRoZXN0KTtcbiAgICBjb25zdCBtYXhEaXN0OiBudW1iZXIgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLnBpeGVsU2l6ZUF0RGlzdChkaXN0KSAqIHBpeGVscztcblxuICAgIGNvbnN0IG1pbjogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNaW4oKSAtIG1heERpc3QsIGJiLmdldFlNaW4oKSAtIG1heERpc3QsIGJiLmdldFpNaW4oKSAtIG1heERpc3QpO1xuICAgIGNvbnN0IG1heDogVmVjMyA9IHZlYzMuY3JlYXRlKGJiLmdldFhNYXgoKSArIG1heERpc3QsIGJiLmdldFlNYXgoKSArIG1heERpc3QsIGJiLmdldFpNYXgoKSArIG1heERpc3QpO1xuXG4gICAgaWYgKHRoaXMuZGlyZWN0aW9uWzBdIDwgMCkgW21pblswXSwgbWF4WzBdXSA9IFttYXhbMF0sIG1pblswXV07XG4gICAgaWYgKHRoaXMuZGlyZWN0aW9uWzFdIDwgMCkgW21pblsxXSwgbWF4WzFdXSA9IFttYXhbMV0sIG1pblsxXV07XG4gICAgaWYgKHRoaXMuZGlyZWN0aW9uWzJdIDwgMCkgW21pblsyXSwgbWF4WzJdXSA9IFttYXhbMl0sIG1pblsyXV07XG5cbiAgICB2YXIgeE1pbjogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWluLCB2ZWMzLmNyZWF0ZSgxLCAwLCAwKSksIHRydWUpID8/IC1JbmZpbml0eTtcbiAgICB2YXIgeU1pbjogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWluLCB2ZWMzLmNyZWF0ZSgwLCAxLCAwKSksIHRydWUpID8/IC1JbmZpbml0eTtcbiAgICB2YXIgek1pbjogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWluLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSksIHRydWUpID8/IC1JbmZpbml0eTtcbiAgICB2YXIgeE1heDogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWF4LCB2ZWMzLmNyZWF0ZSgxLCAwLCAwKSksIHRydWUpID8/IEluZmluaXR5O1xuICAgIHZhciB5TWF4OiBudW1iZXIgPSB0aGlzLmludGVyc2VjdFBsYW5lKG5ldyBQbGFuZShtYXgsIHZlYzMuY3JlYXRlKDAsIDEsIDApKSwgdHJ1ZSkgPz8gSW5maW5pdHk7XG4gICAgdmFyIHpNYXg6IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1heCwgdmVjMy5jcmVhdGUoMCwgMCwgMSkpLCB0cnVlKSA/PyBJbmZpbml0eTtcblxuICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKHhNYXgsIE1hdGgubWluKHlNYXgsIHpNYXgpKTtcbiAgICBjb25zdCBzdGFydCA9IE1hdGgubWF4KHhNaW4sIE1hdGgubWF4KHlNaW4sIHpNaW4pKTtcblxuICAgIGlmIChlbmQgPCAwIHx8IHN0YXJ0ID4gZW5kKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gTWF0aC5tYXgoc3RhcnQsIDAuMDAwMDEpOyAvLyBzbyBpdHMgdHJ1dGh5XG5cbiAgfVxuXG4gIC8vIGFsd2F5cyBwb3NvdGl2ZVxuICBwdWJsaWMgaW50ZXJzZWN0Qm91bmRpbmdCb3goYmI6IEJvdW5kaW5nQm94KTogbnVtYmVyIHwgbnVsbCB7XG5cbiAgICBjb25zdCBtaW46IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWluKCksIGJiLmdldFlNaW4oKSwgYmIuZ2V0Wk1pbigpKTtcbiAgICBjb25zdCBtYXg6IFZlYzMgPSB2ZWMzLmNyZWF0ZShiYi5nZXRYTWF4KCksIGJiLmdldFlNYXgoKSwgYmIuZ2V0Wk1heCgpKTtcblxuICAgIGlmICh0aGlzLmRpcmVjdGlvblswXSA8IDApIFttaW5bMF0sIG1heFswXV0gPSBbbWF4WzBdLCBtaW5bMF1dO1xuICAgIGlmICh0aGlzLmRpcmVjdGlvblsxXSA8IDApIFttaW5bMV0sIG1heFsxXV0gPSBbbWF4WzFdLCBtaW5bMV1dO1xuICAgIGlmICh0aGlzLmRpcmVjdGlvblsyXSA8IDApIFttaW5bMl0sIG1heFsyXV0gPSBbbWF4WzJdLCBtaW5bMl1dO1xuXG4gICAgdmFyIHhNaW46IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1pbiwgdmVjMy5jcmVhdGUoMSwgMCwgMCkpLCB0cnVlKSA/PyAtSW5maW5pdHk7XG4gICAgdmFyIHlNaW46IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1pbiwgdmVjMy5jcmVhdGUoMCwgMSwgMCkpLCB0cnVlKSA/PyAtSW5maW5pdHk7XG4gICAgdmFyIHpNaW46IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1pbiwgdmVjMy5jcmVhdGUoMCwgMCwgMSkpLCB0cnVlKSA/PyAtSW5maW5pdHk7XG4gICAgdmFyIHhNYXg6IG51bWJlciA9IHRoaXMuaW50ZXJzZWN0UGxhbmUobmV3IFBsYW5lKG1heCwgdmVjMy5jcmVhdGUoMSwgMCwgMCkpLCB0cnVlKSA/PyBJbmZpbml0eTtcbiAgICB2YXIgeU1heDogbnVtYmVyID0gdGhpcy5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUobWF4LCB2ZWMzLmNyZWF0ZSgwLCAxLCAwKSksIHRydWUpID8/IEluZmluaXR5O1xuICAgIHZhciB6TWF4OiBudW1iZXIgPSB0aGlzLmludGVyc2VjdFBsYW5lKG5ldyBQbGFuZShtYXgsIHZlYzMuY3JlYXRlKDAsIDAsIDEpKSwgdHJ1ZSkgPz8gSW5maW5pdHk7XG5cbiAgICBjb25zdCBlbmQgPSBNYXRoLm1pbih4TWF4LCBNYXRoLm1pbih5TWF4LCB6TWF4KSk7XG4gICAgY29uc3Qgc3RhcnQgPSBNYXRoLm1heCh4TWluLCBNYXRoLm1heCh5TWluLCB6TWluKSk7XG5cblxuICAgIGlmIChlbmQgPCAwIHx8IHN0YXJ0ID4gZW5kKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gTWF0aC5tYXgoc3RhcnQsIDAuMDAwMDEpOyAvLyBzbyBpdHMgdHJ1dGh5XG5cbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3RUcmlhbmdsZShwMTogVmVjMywgcDI6IFZlYzMsIHAzOiBWZWMzKTogbnVtYmVyIHwgbnVsbCB7XG5cbiAgICBjb25zdCB2MTIgPSB2ZWMzLnN1YihwMiwgcDEpO1xuICAgIGNvbnN0IHYxMyA9IHZlYzMuc3ViKHAzLCBwMSk7XG4gICAgY29uc3Qgbm9ybWFsID0gdmVjMy5ub3JtYWxpemUodmVjMy5jcm9zcyh2MTIsIHYxMykpO1xuICAgIGNvbnN0IGRlbm9tID0gdmVjMy5kb3Qobm9ybWFsLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgaWYgKGRlbm9tID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCB0ID0gdmVjMy5kb3QodmVjMy5zdWIocDEsIHRoaXMub3JpZ2luKSwgbm9ybWFsKSAvIGRlbm9tO1xuICAgIGlmICh0IDwgMCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBwb2ludDogVmVjMyA9IHRoaXMuYXQodCk7XG5cbiAgICBjb25zdCBkMSA9IHZlYzMuZG90KG5vcm1hbCwgdmVjMy5jcm9zcyh2ZWMzLnN1Yihwb2ludCwgcDEpLCB2ZWMzLnN1YihwMiwgcDEpKSk7XG4gICAgY29uc3QgZDIgPSB2ZWMzLmRvdChub3JtYWwsIHZlYzMuY3Jvc3ModmVjMy5zdWIocG9pbnQsIHAyKSwgdmVjMy5zdWIocDMsIHAyKSkpO1xuICAgIGNvbnN0IGQzID0gdmVjMy5kb3Qobm9ybWFsLCB2ZWMzLmNyb3NzKHZlYzMuc3ViKHBvaW50LCBwMyksIHZlYzMuc3ViKHAxLCBwMykpKTtcblxuICAgIGlmIChcbiAgICAgIC8vIHJlbW92ZSBvbmUgb2YgdGhlc2UgbGluZXMgZm9yIGJhY2sgZmFjZSBjdWxsaW5nLlxuICAgICAgZDEgPiAwICYmIGQyID4gMCAmJiBkMyA+IDAgfHxcbiAgICAgIGQxIDwgMCAmJiBkMiA8IDAgJiYgZDMgPCAwXG4gICAgKSByZXR1cm4gdDtcbiAgICBlbHNlIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyB0cmFuc2Zvcm0ocmF5OiBSYXksIG1hdDogTWF0NCk6IFJheSB7XG4gICAgY29uc3QgbmV3T3JpZ2luOiBWZWM0ID0gdmVjNC50cmFuc2Zvcm1NYXQ0KHZlYzQuY3JlYXRlKC4uLnJheS5vcmlnaW4sIDEpLCBtYXQpO1xuICAgIGNvbnN0IG5ld0RpcmVjdGlvbjogVmVjNCA9IHZlYzQudHJhbnNmb3JtTWF0NCh2ZWM0LmNyZWF0ZSguLi5yYXkuZGlyZWN0aW9uLCAwKSwgbWF0KTtcbiAgICByZXR1cm4gbmV3IFJheShcbiAgICAgIHZlYzMuY3JlYXRlKG5ld09yaWdpblswXSwgbmV3T3JpZ2luWzFdLCBuZXdPcmlnaW5bMl0pLFxuICAgICAgdmVjMy5jcmVhdGUobmV3RGlyZWN0aW9uWzBdLCBuZXdEaXJlY3Rpb25bMV0sIG5ld0RpcmVjdGlvblsyXSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGFsbW9zdEludGVyc2VjdExpbmUoZ2VvOiBHZW9tZXRyeSwgc3ViSUQ6IG51bWJlciwgc3RhcnQ6IFZlYzMsIGVuZDogVmVjMywgcGl4ZWxzOiBudW1iZXIpOiBJbnRlcnNlY3Rpb24gfCBudWxsIHtcblxuICAgIGNvbnN0IHA6IFZlYzMgPSB2ZWMzLmFkZCh0aGlzLm9yaWdpbiwgdGhpcy5kaXJlY3Rpb24pO1xuXG4gICAgY29uc3QgdjEzOiBWZWMzID0gdmVjMy5zdWIoc3RhcnQsIHRoaXMub3JpZ2luKTtcbiAgICBjb25zdCB2NDM6IFZlYzMgPSB2ZWMzLnN1YihwLCB0aGlzLm9yaWdpbik7XG4gICAgY29uc3QgdjIxOiBWZWMzID0gdmVjMy5zdWIoZW5kLCBzdGFydCk7XG5cbiAgICBjb25zdCBkMTM0MzogbnVtYmVyID0gdmVjMy5kb3QodjEzLCB2NDMpO1xuICAgIGNvbnN0IGQ0MzIxOiBudW1iZXIgPSB2ZWMzLmRvdCh2NDMsIHYyMSk7XG4gICAgY29uc3QgZDEzMjE6IG51bWJlciA9IHZlYzMuZG90KHYxMywgdjIxKTtcbiAgICBjb25zdCBkNDM0MzogbnVtYmVyID0gdmVjMy5kb3QodjQzLCB2NDMpO1xuICAgIGNvbnN0IGQyMTIxOiBudW1iZXIgPSB2ZWMzLmRvdCh2MjEsIHYyMSk7XG5cbiAgICB2YXIgbXVhOiBudW1iZXIgPSAoZDEzNDMgKiBkNDMyMSAtIGQxMzIxICogZDQzNDMpIC8gKGQyMTIxICogZDQzNDMgLSBkNDMyMSAqIGQ0MzIxKTtcbiAgICBjb25zdCBtdWI6IG51bWJlciA9IChkMTM0MyArIG11YSAqIGQ0MzIxKSAvIGQ0MzQzO1xuICAgIG11YSA9IE1hdGgubWF4KE1hdGgubWluKG11YSwgMSksIDApO1xuXG4gICAgLy8gcCBsaW5lXG4gICAgY29uc3QgcExpbmU6IFZlYzMgPSB2ZWMzLmFkZChzdGFydCwgdmVjMy5zY2FsZSh2MjEsIG11YSkpO1xuICAgIC8vcCByYXlcbiAgICBjb25zdCBwUmF5OiBWZWMzID0gdmVjMy5hZGQodGhpcy5vcmlnaW4sIHZlYzMuc2NhbGUodjQzLCBtdWIpKTtcblxuXG4gICAgY29uc3QgZGlzdFRvSW50ZXJzZWN0aW9uOiBudW1iZXIgPSB2ZWMzLmRpc3RhbmNlKHRoaXMub3JpZ2luLCBwTGluZSk7XG4gICAgY29uc3QgY2xvc2VzdDogbnVtYmVyID0gdmVjMy5kaXN0YW5jZShwTGluZSwgcFJheSk7XG4gICAgY29uc3Qgc2l6ZU9mUGl4ZWw6IG51bWJlciA9IElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q2FtZXJhKCkucGl4ZWxTaXplQXREaXN0KGRpc3RUb0ludGVyc2VjdGlvbik7XG5cbiAgICBpZiAoY2xvc2VzdCA8IHNpemVPZlBpeGVsICogcGl4ZWxzKSB7XG4gICAgICByZXR1cm4gbmV3IEludGVyc2VjdGlvbihtdWIsIFwibGluZVwiLCBnZW8sIHN1YklELCBwTGluZSwgY2xvc2VzdCwgY2xvc2VzdCAqIHNpemVPZlBpeGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gIH1cblxuICBhbG1vc3RJbnRlcnNlY3RQb2ludChnZW9tZXRyeTogR2VvbWV0cnksIHN1YklEOiBudW1iZXIsIHBvaW50OiBWZWMzLCBwaXhlbHM6IG51bWJlciwpOiBJbnRlcnNlY3Rpb24gfCBudWxsIHtcblxuICAgIGNvbnN0IHRvUG9pbnQ6IFZlYzMgPSB2ZWMzLnN1Yihwb2ludCwgdGhpcy5vcmlnaW4pO1xuICAgIGNvbnN0IHRpbWU6IG51bWJlciA9IHZlYzMuZG90KHRvUG9pbnQsIHRoaXMuZGlyZWN0aW9uKTtcbiAgICBpZiAodGltZSA8PSAwKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHBvaW50T25SYXk6IFZlYzMgPSB0aGlzLmF0KHRpbWUpO1xuICAgIGNvbnN0IGRpc3Q6IG51bWJlciA9IHZlYzMuZGlzdGFuY2UocG9pbnRPblJheSwgcG9pbnQpO1xuICAgIGNvbnN0IHNpemVPZlBpeGVsOiBudW1iZXIgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLnBpeGVsU2l6ZUF0RGlzdCh0aW1lKTtcblxuICAgIGlmIChkaXN0IDwgc2l6ZU9mUGl4ZWwgKiBwaXhlbHMpIHtcbiAgICAgIHJldHVybiBuZXcgSW50ZXJzZWN0aW9uKHRpbWUsIFwicG9pbnRcIiwgZ2VvbWV0cnksIHN1YklELCBwb2ludCwgZGlzdCwgZGlzdCAqIHNpemVPZlBpeGVsKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgfVxuXG4gIHB1YmxpYyBjbG9zZXN0UG9pbnRPbkxpbmUoc3RhcnQ6IFZlYzMsIGVuZDogVmVjMyk6IFZlYzMge1xuXG4gICAgY29uc3QgcDogVmVjMyA9IHZlYzMuYWRkKHRoaXMub3JpZ2luLCB0aGlzLmRpcmVjdGlvbik7XG5cbiAgICBjb25zdCB2MTM6IFZlYzMgPSB2ZWMzLnN1YihzdGFydCwgdGhpcy5vcmlnaW4pO1xuICAgIGNvbnN0IHY0MzogVmVjMyA9IHZlYzMuc3ViKHAsIHRoaXMub3JpZ2luKTtcbiAgICBjb25zdCB2MjE6IFZlYzMgPSB2ZWMzLnN1YihlbmQsIHN0YXJ0KTtcblxuICAgIGNvbnN0IGQxMzQzOiBudW1iZXIgPSB2ZWMzLmRvdCh2MTMsIHY0Myk7XG4gICAgY29uc3QgZDQzMjE6IG51bWJlciA9IHZlYzMuZG90KHY0MywgdjIxKTtcbiAgICBjb25zdCBkMTMyMTogbnVtYmVyID0gdmVjMy5kb3QodjEzLCB2MjEpO1xuICAgIGNvbnN0IGQ0MzQzOiBudW1iZXIgPSB2ZWMzLmRvdCh2NDMsIHY0Myk7XG4gICAgY29uc3QgZDIxMjE6IG51bWJlciA9IHZlYzMuZG90KHYyMSwgdjIxKTtcblxuICAgIGNvbnN0IGRlbm9tOiBudW1iZXIgPSBkMjEyMSAqIGQ0MzQzIC0gZDQzMjEgKiBkNDMyMTtcbiAgICBpZiAoZGVub20gPT09IDApIHJldHVybiB2ZWMzLmNsb25lKHN0YXJ0KTtcbiAgICB2YXIgbXVhOiBudW1iZXIgPSAoZDEzNDMgKiBkNDMyMSAtIGQxMzIxICogZDQzNDMpIC8gZGVub207XG5cbiAgICBjb25zdCByZXM6IFZlYzMgPSB2ZWMzLmFkZChzdGFydCwgdmVjMy5zY2FsZSh2MjEsIG11YSkpO1xuICAgIHJldHVybiByZXM7XG5cbiAgfVxuXG4gIHB1YmxpYyBjbG9zZXN0UG9pbnRUb0xpbmUoc3RhcnQ6IFZlYzMsIGVuZDogVmVjMyk6IFZlYzMge1xuICAgIGNvbnN0IHA6IFZlYzMgPSB2ZWMzLmFkZCh0aGlzLm9yaWdpbiwgdGhpcy5kaXJlY3Rpb24pO1xuXG4gICAgY29uc3QgdjEzOiBWZWMzID0gdmVjMy5zdWIoc3RhcnQsIHRoaXMub3JpZ2luKTtcbiAgICBjb25zdCB2NDM6IFZlYzMgPSB2ZWMzLnN1YihwLCB0aGlzLm9yaWdpbik7XG4gICAgY29uc3QgdjIxOiBWZWMzID0gdmVjMy5zdWIoZW5kLCBzdGFydCk7XG5cbiAgICBjb25zdCBkMTM0MzogbnVtYmVyID0gdmVjMy5kb3QodjEzLCB2NDMpO1xuICAgIGNvbnN0IGQ0MzIxOiBudW1iZXIgPSB2ZWMzLmRvdCh2NDMsIHYyMSk7XG4gICAgY29uc3QgZDEzMjE6IG51bWJlciA9IHZlYzMuZG90KHYxMywgdjIxKTtcbiAgICBjb25zdCBkNDM0MzogbnVtYmVyID0gdmVjMy5kb3QodjQzLCB2NDMpO1xuICAgIGNvbnN0IGQyMTIxOiBudW1iZXIgPSB2ZWMzLmRvdCh2MjEsIHYyMSk7XG5cbiAgICB2YXIgbXVhOiBudW1iZXIgPSAoZDEzNDMgKiBkNDMyMSAtIGQxMzIxICogZDQzNDMpIC8gKGQyMTIxICogZDQzNDMgLSBkNDMyMSAqIGQ0MzIxKTtcbiAgICBjb25zdCBtdWI6IG51bWJlciA9IChkMTM0MyArIG11YSAqIGQ0MzIxKSAvIGQ0MzQzO1xuXG4gICAgcmV0dXJuIHZlYzMuYWRkKHRoaXMub3JpZ2luLCB2ZWMzLnNjYWxlKHY0MywgbXViKSk7XG4gIH1cblxuICBwdWJsaWMgY2xvc2VzdERpc3RhbmNlVG9Qb2ludChwb2ludDogVmVjMyk6IG51bWJlciB7XG4gICAgY29uc3Qgb3A6IFZlYzMgPSB2ZWMzLnN1Yihwb2ludCwgdGhpcy5vcmlnaW4pO1xuICAgIGNvbnN0IGE6IG51bWJlciA9IHZlYzMuZG90KG9wLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgY29uc3QgYjogbnVtYmVyID0gdmVjMy5sZW5ndGgob3ApO1xuICAgIHJldHVybiBNYXRoLnNxcnQoYiAqIGIgKyBhICogYSk7XG4gIH1cbiAgcHVibGljIGNsb3Nlc3RQb2ludFRvUG9pbnQocG9pbnQ6IFZlYzMpOiBWZWMzIHtcbiAgICBjb25zdCBvcDogVmVjMyA9IHZlYzMuc3ViKHBvaW50LCB0aGlzLm9yaWdpbik7XG4gICAgY29uc3QgYTogbnVtYmVyID0gdmVjMy5kb3Qob3AsIHRoaXMuZGlyZWN0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5hdChhKTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/ray.ts\n");

/***/ }),

/***/ "./src/geometry/sceneBoundingBoxHeirarcy.ts":
/*!**************************************************!*\
  !*** ./src/geometry/sceneBoundingBoxHeirarcy.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneBoundingBoxHeirarchy: () => (/* binding */ SceneBoundingBoxHeirarchy)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _boundingBox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./boundingBox */ \"./src/geometry/boundingBox.ts\");\n\n\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n    Axis[Axis[\"Z\"] = 2] = \"Z\";\n})(Axis || (Axis = {}));\nclass BBHNode {\n    constructor(geometry, depth) {\n        this.depth = depth;\n        this.setup(geometry, depth);\n    }\n    setup(geometry, depth) {\n        this.axis = depth % 3;\n        this.boundingBox = new _boundingBox__WEBPACK_IMPORTED_MODULE_1__.BoundingBox();\n        geometry.forEach((geo) => { this.boundingBox.addBoundingBox(geo.getBoundingBox()); });\n        if (geometry.length <= SceneBoundingBoxHeirarchy.MAX_GEOMETRY_PER_LEAF) {\n            // leaf\n            this.geometry = geometry;\n            this.child1 = null;\n            this.child2 = null;\n        }\n        else {\n            // not a leaf\n            this.geometry = null;\n            const center = this.boundingBox.getCenter()[this.axis];\n            var child1Geometry = [];\n            var child2Geometry = [];\n            geometry.forEach((geo) => {\n                if (geo.getBoundingBox().getCenter()[this.axis] < center) {\n                    child1Geometry.push(geo);\n                }\n                else {\n                    child2Geometry.push(geo);\n                }\n            });\n            if (child1Geometry.length === 0 || child2Geometry.length === 0) {\n                child1Geometry = geometry.slice(0, geometry.length / 2);\n                child2Geometry = geometry.slice(geometry.length / 2, geometry.length);\n            }\n            this.child1 = new BBHNode(child1Geometry, depth + 1);\n            this.child2 = new BBHNode(child2Geometry, depth + 1);\n        }\n    }\n    firstIntersectionsWithinMargin(ray, margin, sub) {\n        const intersections = [];\n        if (ray.almostIntersectBoundingBox(this.boundingBox, 10) === null)\n            return intersections;\n        if (this.isLeaf()) {\n            this.geometry.forEach((geo) => {\n                const intersection = geo.intersect(ray, sub);\n                if (intersection !== null)\n                    intersections.push(intersection);\n            });\n        }\n        else {\n            intersections.push(...this.child1.firstIntersectionsWithinMargin(ray, margin, sub));\n            intersections.push(...this.child2.firstIntersectionsWithinMargin(ray, margin, sub));\n        }\n        intersections.sort((a, b) => {\n            // TODO: think about this\n            return a.time - b.time;\n        });\n        const nearIntersections = [];\n        for (const intersection of intersections) {\n            if (intersection.time <= intersections[0].time * (1 + margin / 100)) {\n                nearIntersections.push(intersection);\n            }\n        }\n        return nearIntersections;\n    }\n    getAllGeometry() {\n        if (this.isLeaf())\n            return this.geometry;\n        return [...this.child1.getAllGeometry(), ...this.child2.getAllGeometry()];\n    }\n    getWithinFrustum(frustum, inclusive) {\n        if (frustum.containsBoundingBoxFully(this.boundingBox)) {\n            return this.getAllGeometry();\n        }\n        if (!frustum.intersectsBoundingBox(this.boundingBox)) {\n            return [];\n        }\n        if (this.isLeaf()) {\n            const res = [];\n            for (const geo of this.geometry) {\n                if (geo.isWithinFrustum(frustum, inclusive)) {\n                    res.push(geo);\n                }\n            }\n            return res;\n        }\n        else {\n            return [\n                ...this.child1.getWithinFrustum(frustum, inclusive),\n                ...this.child2.getWithinFrustum(frustum, inclusive)\n            ];\n        }\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        if (frustum.containsBoundingBoxFully(this.boundingBox)) {\n            const geos = this.getAllGeometry();\n            const subs = [];\n            for (let i = 0; i < geos.length; i++)\n                subs.push([-1]);\n            return [geos, subs];\n        }\n        if (!frustum.intersectsBoundingBox(this.boundingBox)) {\n            return [[], []];\n        }\n        if (this.isLeaf()) {\n            const res = [[], []];\n            for (const geo of this.geometry) {\n                const sub = geo.getWithinFrustumSub(frustum, inclusive);\n                if (sub.length > 0) {\n                    res[0].push(geo);\n                    res[1].push(sub);\n                }\n            }\n            return res;\n        }\n        else {\n            const res1 = this.child1.getWithinFrustumSub(frustum, inclusive);\n            const res2 = this.child2.getWithinFrustumSub(frustum, inclusive);\n            res1[0].push(...res2[0]);\n            res1[1].push(...res2[1]);\n            return res1;\n        }\n    }\n    firstPositiveIntersection(ray, sub) {\n        if (ray.almostIntersectBoundingBox(this.boundingBox, 10) === null)\n            return null;\n        if (this.isLeaf()) {\n            var res = null;\n            this.geometry.forEach((geo) => {\n                var t = geo.intersect(ray, sub);\n                if (t !== null && t.time > 0) {\n                    if (res === null)\n                        res = t;\n                    else\n                        res = res.time < t.time ? res : t;\n                }\n            });\n            return res;\n        }\n        else {\n            const t1 = this.child1.firstPositiveIntersection(ray, sub);\n            const t2 = this.child2.firstPositiveIntersection(ray, sub);\n            if (t1 === null)\n                return t2;\n            if (t2 === null)\n                return t1;\n            return t1.time < t2.time ? t1 : t2;\n        }\n    }\n    print() {\n        var _a, _b;\n        let str = \"\";\n        for (let i = 0; i < this.depth; i++)\n            str += \"->\";\n        if (this.geometry) {\n            for (const geo of this.geometry) {\n                str += `[${geo.getID()},${geo.getTypeName()}]`;\n            }\n        }\n        else\n            str += \"node\";\n        console.log(str);\n        (_a = this.child1) === null || _a === void 0 ? void 0 : _a.print();\n        (_b = this.child2) === null || _b === void 0 ? void 0 : _b.print();\n    }\n    remove(geo) {\n        // TODO: after a few removals, should rebalance / shrink\n        if (!this.boundingBox.contains(geo.getBoundingBox()))\n            return;\n        if (this.isLeaf()) {\n            for (let i = 0; i < this.geometry.length; i++) {\n                if (this.geometry[i] === geo) {\n                    this.geometry.splice(i, 1);\n                }\n            }\n        }\n        else {\n            this.child1.remove(geo);\n            this.child2.remove(geo);\n        }\n    }\n    tighten() {\n        // tighten up bbs after removals\n        throw new Error(\"not implemented\");\n    }\n    add(geo) {\n        this.boundingBox.addBoundingBox(geo.getBoundingBox());\n        if (this.isLeaf()) {\n            if (this.geometry.length < SceneBoundingBoxHeirarchy.MAX_GEOMETRY_PER_LEAF) {\n                // leaf node with space\n                this.geometry.push(geo);\n            }\n            else {\n                this.geometry.push(geo);\n                this.setup(this.geometry, this.depth);\n            }\n        }\n        else {\n            // non leaf node\n            const nodeCenter = this.boundingBox.getCenter()[this.axis];\n            const geoCenter = geo.getBoundingBox().getCenter()[this.axis];\n            if (geoCenter < nodeCenter) {\n                this.child1.add(geo);\n            }\n            else {\n                this.child2.add(geo);\n            }\n        }\n    }\n    getDepth() {\n        return this.depth;\n    }\n    getChild1() {\n        return this.child1;\n    }\n    getChild2() {\n        return this.child2;\n    }\n    isLeaf() {\n        return this.geometry != null;\n    }\n}\nclass SceneBoundingBoxHeirarchy {\n    constructor(geometry) {\n        this.root = new BBHNode(geometry, 0);\n    }\n    add(geo) {\n        this.root.add(geo);\n    }\n    remove(geo) {\n        this.root.remove(geo);\n    }\n    getRoot() {\n        return this.root;\n    }\n    firstPositiveIntersection(ray, sub) {\n        const sceneIntersection = this.root.firstPositiveIntersection(ray, sub);\n        if (sceneIntersection)\n            return sceneIntersection;\n        return _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().intersect(ray);\n    }\n    // margin is max percentage of distance from camera behind first intersection\n    firstIntersectionsWithinMargin(ray, margin, sub) {\n        const res = this.root.firstIntersectionsWithinMargin(ray, margin, sub);\n        const iGroundPlane = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().intersect(ray);\n        if (res.length === 0)\n            return iGroundPlane ? [iGroundPlane] : [];\n        if (iGroundPlane && iGroundPlane.time < res[0].time * (1 + (margin / 100))) {\n            res.push(iGroundPlane);\n        }\n        return res;\n    }\n    getWithinFrustum(frustum, inclusive) {\n        return this.root.getWithinFrustum(frustum, inclusive);\n    }\n    getWithinFrustumSub(frustum, inclusive) {\n        return this.root.getWithinFrustumSub(frustum, inclusive);\n    }\n    print() {\n        console.log(\"==========Scene-BBH===========\");\n        this.root.print();\n    }\n}\nSceneBoundingBoxHeirarchy.MAX_GEOMETRY_PER_LEAF = 5;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VvbWV0cnkvc2NlbmVCb3VuZGluZ0JveEhlaXJhcmN5LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrQztBQUNVO0FBTTVDLElBQUssSUFJSjtBQUpELFdBQUssSUFBSTtJQUNQLHlCQUFLO0lBQ0wseUJBQUs7SUFDTCx5QkFBSztBQUNQLENBQUMsRUFKSSxJQUFJLEtBQUosSUFBSSxRQUlSO0FBRUQsTUFBTSxPQUFPO0lBUVgsWUFDRSxRQUFvQixFQUNaLEtBQWE7UUFBYixVQUFLLEdBQUwsS0FBSyxDQUFRO1FBRXJCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFTyxLQUFLLENBQUMsUUFBb0IsRUFBRSxLQUFhO1FBQy9DLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkscURBQVcsRUFBRSxDQUFDO1FBQ3JDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFhLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFaEcsSUFBSSxRQUFRLENBQUMsTUFBTSxJQUFJLHlCQUF5QixDQUFDLHFCQUFxQixFQUFFO1lBQ3RFLE9BQU87WUFDUCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztZQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUNwQjthQUFNO1lBQ0wsYUFBYTtZQUNiLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLE1BQU0sTUFBTSxHQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9ELElBQUksY0FB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QyxnQ0FBZ0MsQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDcEIsQ0FBQzs7QUFoRHNCLCtDQUFxQixHQUFHLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL2dlb21ldHJ5L3NjZW5lQm91bmRpbmdCb3hIZWlyYXJjeS50cz9jZWFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgQm91bmRpbmdCb3ggfSBmcm9tIFwiLi9ib3VuZGluZ0JveFwiO1xuaW1wb3J0IHsgRnJ1c3R1bSB9IGZyb20gXCIuL2ZydXN0dW1cIjtcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4vZ2VvbWV0cnlcIjtcbmltcG9ydCB7IEludGVyc2VjdGlvbiB9IGZyb20gXCIuL2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4vcmF5XCI7XG5cbmVudW0gQXhpcyB7XG4gIFggPSAwLFxuICBZID0gMSxcbiAgWiA9IDIsXG59XG5cbmNsYXNzIEJCSE5vZGUge1xuXG4gIHByaXZhdGUgYXhpcyE6IEF4aXM7XG4gIHByaXZhdGUgY2hpbGQxITogQkJITm9kZSB8IG51bGw7XG4gIHByaXZhdGUgY2hpbGQyITogQkJITm9kZSB8IG51bGw7XG4gIHByaXZhdGUgZ2VvbWV0cnkhOiBHZW9tZXRyeVtdIHwgbnVsbDtcbiAgcHJpdmF0ZSBib3VuZGluZ0JveCE6IEJvdW5kaW5nQm94O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGdlb21ldHJ5OiBHZW9tZXRyeVtdLFxuICAgIHByaXZhdGUgZGVwdGg6IG51bWJlcixcbiAgKSB7XG4gICAgdGhpcy5zZXR1cChnZW9tZXRyeSwgZGVwdGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cChnZW9tZXRyeTogR2VvbWV0cnlbXSwgZGVwdGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuYXhpcyA9IGRlcHRoICUgMztcbiAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgZ2VvbWV0cnkuZm9yRWFjaCgoZ2VvOiBHZW9tZXRyeSkgPT4geyB0aGlzLmJvdW5kaW5nQm94LmFkZEJvdW5kaW5nQm94KGdlby5nZXRCb3VuZGluZ0JveCgpKTsgfSk7XG5cbiAgICBpZiAoZ2VvbWV0cnkubGVuZ3RoIDw9IFNjZW5lQm91bmRpbmdCb3hIZWlyYXJjaHkuTUFYX0dFT01FVFJZX1BFUl9MRUFGKSB7XG4gICAgICAvLyBsZWFmXG4gICAgICB0aGlzLmdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgICB0aGlzLmNoaWxkMSA9IG51bGw7XG4gICAgICB0aGlzLmNoaWxkMiA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vdCBhIGxlYWZcbiAgICAgIHRoaXMuZ2VvbWV0cnkgPSBudWxsO1xuICAgICAgY29uc3QgY2VudGVyOiBudW1iZXIgPSB0aGlzLmJvdW5kaW5nQm94LmdldENlbnRlcigpW3RoaXMuYXhpc107XG4gICAgICB2YXIgY2hpbGQxR2VvbWV0cnk6IEdlb21ldHJ5W10gPSBbXTtcbiAgICAgIHZhciBjaGlsZDJHZW9tZXRyeTogR2VvbWV0cnlbXSA9IFtdO1xuICAgICAgZ2VvbWV0cnkuZm9yRWFjaCgoZ2VvOiBHZW9tZXRyeSkgPT4ge1xuICAgICAgICBpZiAoZ2VvLmdldEJvdW5kaW5nQm94KCkuZ2V0Q2VudGVyKClbdGhpcy5heGlzXSA8IGNlbnRlcikge1xuICAgICAgICAgIGNoaWxkMUdlb21ldHJ5LnB1c2goZ2VvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGlsZDJHZW9tZXRyeS5wdXNoKGdlbyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGNoaWxkMUdlb21ldHJ5Lmxlbmd0aCA9PT0gMCB8fCBjaGlsZDJHZW9tZXRyeS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY2hpbGQxR2VvbWV0cnkgPSBnZW9tZXRyeS5zbGljZSgwLCBnZW9tZXRyeS5sZW5ndGggLyAyKTtcbiAgICAgICAgY2hpbGQyR2VvbWV0cnkgPSBnZW9tZXRyeS5zbGljZShnZW9tZXRyeS5sZW5ndGggLyAyLCBnZW9tZXRyeS5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGlsZDEgPSBuZXcgQkJITm9kZShjaGlsZDFHZW9tZXRyeSwgZGVwdGggKyAxKTtcbiAgICAgIHRoaXMuY2hpbGQyID0gbmV3IEJCSE5vZGUoY2hpbGQyR2VvbWV0cnksIGRlcHRoICsgMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGZpcnN0SW50ZXJzZWN0aW9uc1dpdGhpbk1hcmdpbihyYXk6IFJheSwgbWFyZ2luOiBudW1iZXIsIHN1YjogYm9vbGVhbik6IEludGVyc2VjdGlvbltdIHtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25zOiBJbnRlcnNlY3Rpb25bXSA9IFtdO1xuICAgIGlmIChyYXkuYWxtb3N0SW50ZXJzZWN0Qm91bmRpbmdCb3godGhpcy5ib3VuZGluZ0JveCwgMTApID09PSBudWxsKSByZXR1cm4gaW50ZXJzZWN0aW9ucztcblxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICB0aGlzLmdlb21ldHJ5IS5mb3JFYWNoKChnZW86IEdlb21ldHJ5KSA9PiB7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbjogSW50ZXJzZWN0aW9uIHwgbnVsbCA9IGdlby5pbnRlcnNlY3QocmF5LCBzdWIpO1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uICE9PSBudWxsKSBpbnRlcnNlY3Rpb25zLnB1c2goaW50ZXJzZWN0aW9uKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcnNlY3Rpb25zLnB1c2goLi4udGhpcy5jaGlsZDEhLmZpcnN0SW50ZXJzZWN0aW9uc1dpdGhpbk1hcmdpbihyYXksIG1hcmdpbiwgc3ViKSk7XG4gICAgICBpbnRlcnNlY3Rpb25zLnB1c2goLi4udGhpcy5jaGlsZDIhLmZpcnN0SW50ZXJzZWN0aW9uc1dpdGhpbk1hcmdpbihyYXksIG1hcmdpbiwgc3ViKSk7XG4gICAgfVxuICAgIGludGVyc2VjdGlvbnMuc29ydCgoYTogSW50ZXJzZWN0aW9uLCBiOiBJbnRlcnNlY3Rpb24pID0+IHtcbiAgICAgIC8vIFRPRE86IHRoaW5rIGFib3V0IHRoaXNcbiAgICAgIHJldHVybiBhLnRpbWUgLSBiLnRpbWU7XG4gICAgfSlcbiAgICBjb25zdCBuZWFySW50ZXJzZWN0aW9uczogSW50ZXJzZWN0aW9uW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGludGVyc2VjdGlvbiBvZiBpbnRlcnNlY3Rpb25zKSB7XG4gICAgICBpZiAoaW50ZXJzZWN0aW9uLnRpbWUgPD0gaW50ZXJzZWN0aW9uc1swXS50aW1lICogKDEgKyBtYXJnaW4gLyAxMDApKSB7XG4gICAgICAgIG5lYXJJbnRlcnNlY3Rpb25zLnB1c2goaW50ZXJzZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5lYXJJbnRlcnNlY3Rpb25zO1xuICB9XG5cbiAgcHVibGljIGdldEFsbEdlb21ldHJ5KCk6IEdlb21ldHJ5W10ge1xuICAgIGlmICh0aGlzLmlzTGVhZigpKSByZXR1cm4gdGhpcy5nZW9tZXRyeSE7XG4gICAgcmV0dXJuIFsuLi50aGlzLmNoaWxkMSEuZ2V0QWxsR2VvbWV0cnkoKSwgLi4udGhpcy5jaGlsZDIhLmdldEFsbEdlb21ldHJ5KCldO1xuICB9XG5cbiAgcHVibGljIGdldFdpdGhpbkZydXN0dW0oZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogR2VvbWV0cnlbXSB7XG4gICAgaWYgKGZydXN0dW0uY29udGFpbnNCb3VuZGluZ0JveEZ1bGx5KHRoaXMuYm91bmRpbmdCb3gpKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRBbGxHZW9tZXRyeSgpO1xuICAgIH1cbiAgICBpZiAoIWZydXN0dW0uaW50ZXJzZWN0c0JvdW5kaW5nQm94KHRoaXMuYm91bmRpbmdCb3gpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICBjb25zdCByZXM6IEdlb21ldHJ5W10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuZ2VvbWV0cnkhKSB7XG4gICAgICAgIGlmIChnZW8uaXNXaXRoaW5GcnVzdHVtKGZydXN0dW0sIGluY2x1c2l2ZSkpIHtcbiAgICAgICAgICByZXMucHVzaChnZW8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICAuLi50aGlzLmNoaWxkMSEuZ2V0V2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpLFxuICAgICAgICAuLi50aGlzLmNoaWxkMiEuZ2V0V2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpXG4gICAgICBdXG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogW0dlb21ldHJ5W10sIG51bWJlcltdW11dIHtcbiAgICBpZiAoZnJ1c3R1bS5jb250YWluc0JvdW5kaW5nQm94RnVsbHkodGhpcy5ib3VuZGluZ0JveCkpIHtcbiAgICAgIGNvbnN0IGdlb3M6IEdlb21ldHJ5W10gPSB0aGlzLmdldEFsbEdlb21ldHJ5KCk7XG4gICAgICBjb25zdCBzdWJzOiBudW1iZXJbXVtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlb3MubGVuZ3RoOyBpKyspIHN1YnMucHVzaChbLTFdKTtcbiAgICAgIHJldHVybiBbZ2Vvcywgc3Vic107XG4gICAgfVxuICAgIGlmICghZnJ1c3R1bS5pbnRlcnNlY3RzQm91bmRpbmdCb3godGhpcy5ib3VuZGluZ0JveCkpIHtcbiAgICAgIHJldHVybiBbW10sIFtdXTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNMZWFmKCkpIHtcbiAgICAgIGNvbnN0IHJlczogW0dlb21ldHJ5W10sIG51bWJlcltdW11dID0gW1tdLCBbXV07XG4gICAgICBmb3IgKGNvbnN0IGdlbyBvZiB0aGlzLmdlb21ldHJ5ISkge1xuICAgICAgICBjb25zdCBzdWI6IG51bWJlcltdID0gZ2VvLmdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bSwgaW5jbHVzaXZlKTtcbiAgICAgICAgaWYgKHN1Yi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVzWzBdLnB1c2goZ2VvKTtcbiAgICAgICAgICByZXNbMV0ucHVzaChzdWIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXMxOiBbR2VvbWV0cnlbXSwgbnVtYmVyW11bXV0gPSB0aGlzLmNoaWxkMSEuZ2V0V2l0aGluRnJ1c3R1bVN1YihmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICAgICAgY29uc3QgcmVzMjogW0dlb21ldHJ5W10sIG51bWJlcltdW11dID0gdGhpcy5jaGlsZDIhLmdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bSwgaW5jbHVzaXZlKTtcbiAgICAgIHJlczFbMF0ucHVzaCguLi5yZXMyWzBdKTtcbiAgICAgIHJlczFbMV0ucHVzaCguLi5yZXMyWzFdKTtcbiAgICAgIHJldHVybiByZXMxO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBmaXJzdFBvc2l0aXZlSW50ZXJzZWN0aW9uKHJheTogUmF5LCBzdWI6IGJvb2xlYW4pOiBJbnRlcnNlY3Rpb24gfCBudWxsIHtcblxuICAgIGlmIChyYXkuYWxtb3N0SW50ZXJzZWN0Qm91bmRpbmdCb3godGhpcy5ib3VuZGluZ0JveCwgMTApID09PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgIGlmICh0aGlzLmlzTGVhZigpKSB7XG4gICAgICB2YXIgcmVzOiBJbnRlcnNlY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgICAgIHRoaXMuZ2VvbWV0cnkhLmZvckVhY2goKGdlbzogR2VvbWV0cnkpID0+IHtcbiAgICAgICAgdmFyIHQ6IEludGVyc2VjdGlvbiB8IG51bGwgPSBnZW8uaW50ZXJzZWN0KHJheSwgc3ViKTtcbiAgICAgICAgaWYgKHQgIT09IG51bGwgJiYgdC50aW1lID4gMCkge1xuICAgICAgICAgIGlmIChyZXMgPT09IG51bGwpIHJlcyA9IHQ7XG4gICAgICAgICAgZWxzZSByZXMgPSByZXMudGltZSA8IHQudGltZSA/IHJlcyA6IHQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdDEgPSB0aGlzLmNoaWxkMSEuZmlyc3RQb3NpdGl2ZUludGVyc2VjdGlvbihyYXksIHN1Yik7XG4gICAgICBjb25zdCB0MiA9IHRoaXMuY2hpbGQyIS5maXJzdFBvc2l0aXZlSW50ZXJzZWN0aW9uKHJheSwgc3ViKTtcbiAgICAgIGlmICh0MSA9PT0gbnVsbCkgcmV0dXJuIHQyO1xuICAgICAgaWYgKHQyID09PSBudWxsKSByZXR1cm4gdDE7XG4gICAgICByZXR1cm4gdDEudGltZSA8IHQyLnRpbWUgPyB0MSA6IHQyO1xuICAgIH1cblxuICB9XG5cbiAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgIGxldCBzdHI6IHN0cmluZyA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRlcHRoOyBpKyspIHN0ciArPSBcIi0+XCI7XG4gICAgaWYgKHRoaXMuZ2VvbWV0cnkpIHtcbiAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMuZ2VvbWV0cnkpIHtcbiAgICAgICAgc3RyICs9IGBbJHtnZW8uZ2V0SUQoKX0sJHtnZW8uZ2V0VHlwZU5hbWUoKX1dYDtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBzdHIgKz0gXCJub2RlXCI7XG4gICAgY29uc29sZS5sb2coc3RyKTtcbiAgICB0aGlzLmNoaWxkMT8ucHJpbnQoKTtcbiAgICB0aGlzLmNoaWxkMj8ucHJpbnQoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmUoZ2VvOiBHZW9tZXRyeSk6IHZvaWQge1xuICAgIC8vIFRPRE86IGFmdGVyIGEgZmV3IHJlbW92YWxzLCBzaG91bGQgcmViYWxhbmNlIC8gc2hyaW5rXG5cbiAgICBpZiAoIXRoaXMuYm91bmRpbmdCb3guY29udGFpbnMoZ2VvLmdldEJvdW5kaW5nQm94KCkpKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5pc0xlYWYoKSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdlb21ldHJ5IS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5nZW9tZXRyeSFbaV0gPT09IGdlbykge1xuICAgICAgICAgIHRoaXMuZ2VvbWV0cnkhLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNoaWxkMSEucmVtb3ZlKGdlbyk7XG4gICAgICB0aGlzLmNoaWxkMiEucmVtb3ZlKGdlbyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHRpZ2h0ZW4oKTogdm9pZCB7XG4gICAgLy8gdGlnaHRlbiB1cCBiYnMgYWZ0ZXIgcmVtb3ZhbHNcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cblxuICBwdWJsaWMgYWRkKGdlbzogR2VvbWV0cnkpOiB2b2lkIHtcbiAgICB0aGlzLmJvdW5kaW5nQm94LmFkZEJvdW5kaW5nQm94KGdlby5nZXRCb3VuZGluZ0JveCgpKTtcbiAgICBpZiAodGhpcy5pc0xlYWYoKSkge1xuICAgICAgaWYgKHRoaXMuZ2VvbWV0cnkhLmxlbmd0aCA8IFNjZW5lQm91bmRpbmdCb3hIZWlyYXJjaHkuTUFYX0dFT01FVFJZX1BFUl9MRUFGKSB7XG4gICAgICAgIC8vIGxlYWYgbm9kZSB3aXRoIHNwYWNlXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkhLnB1c2goZ2VvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZ2VvbWV0cnkhLnB1c2goZ2VvKTtcbiAgICAgICAgdGhpcy5zZXR1cCh0aGlzLmdlb21ldHJ5ISwgdGhpcy5kZXB0aCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbiBsZWFmIG5vZGVcbiAgICAgIGNvbnN0IG5vZGVDZW50ZXI6IG51bWJlciA9IHRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKClbdGhpcy5heGlzXTtcbiAgICAgIGNvbnN0IGdlb0NlbnRlcjogbnVtYmVyID0gZ2VvLmdldEJvdW5kaW5nQm94KCkuZ2V0Q2VudGVyKClbdGhpcy5heGlzXTtcbiAgICAgIGlmIChnZW9DZW50ZXIgPCBub2RlQ2VudGVyKSB7XG4gICAgICAgIHRoaXMuY2hpbGQxIS5hZGQoZ2VvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2hpbGQyIS5hZGQoZ2VvKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0RGVwdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5kZXB0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGlsZDEoKTogQkJITm9kZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmNoaWxkMTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGlsZDIoKTogQkJITm9kZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmNoaWxkMjtcbiAgfVxuXG4gIHB1YmxpYyBpc0xlYWYoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnkgIT0gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2NlbmVCb3VuZGluZ0JveEhlaXJhcmNoeSB7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBNQVhfR0VPTUVUUllfUEVSX0xFQUYgPSA1O1xuXG4gIHByaXZhdGUgcm9vdDogQkJITm9kZTtcblxuICBjb25zdHJ1Y3RvcihnZW9tZXRyeTogR2VvbWV0cnlbXSkge1xuICAgIHRoaXMucm9vdCA9IG5ldyBCQkhOb2RlKGdlb21ldHJ5LCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGQoZ2VvOiBHZW9tZXRyeSk6IHZvaWQge1xuICAgIHRoaXMucm9vdC5hZGQoZ2VvKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmUoZ2VvOiBHZW9tZXRyeSk6IHZvaWQge1xuICAgIHRoaXMucm9vdC5yZW1vdmUoZ2VvKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRSb290KCk6IEJCSE5vZGUge1xuICAgIHJldHVybiB0aGlzLnJvb3Q7XG4gIH1cblxuICBwdWJsaWMgZmlyc3RQb3NpdGl2ZUludGVyc2VjdGlvbihyYXk6IFJheSwgc3ViOiBib29sZWFuKTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG4gICAgY29uc3Qgc2NlbmVJbnRlcnNlY3Rpb246IEludGVyc2VjdGlvbiB8IG51bGwgPSB0aGlzLnJvb3QuZmlyc3RQb3NpdGl2ZUludGVyc2VjdGlvbihyYXksIHN1Yik7XG4gICAgaWYgKHNjZW5lSW50ZXJzZWN0aW9uKSByZXR1cm4gc2NlbmVJbnRlcnNlY3Rpb247XG4gICAgcmV0dXJuIElOU1RBTkNFLmdldFNjZW5lKCkuZ2V0Q29uc3RydWN0aW9uUGxhbmUoKS5pbnRlcnNlY3QocmF5KTtcbiAgfVxuXG4gIC8vIG1hcmdpbiBpcyBtYXggcGVyY2VudGFnZSBvZiBkaXN0YW5jZSBmcm9tIGNhbWVyYSBiZWhpbmQgZmlyc3QgaW50ZXJzZWN0aW9uXG4gIHB1YmxpYyBmaXJzdEludGVyc2VjdGlvbnNXaXRoaW5NYXJnaW4ocmF5OiBSYXksIG1hcmdpbjogbnVtYmVyLCBzdWI6IGJvb2xlYW4pOiBJbnRlcnNlY3Rpb25bXSB7XG4gICAgY29uc3QgcmVzOiBJbnRlcnNlY3Rpb25bXSA9IHRoaXMucm9vdC5maXJzdEludGVyc2VjdGlvbnNXaXRoaW5NYXJnaW4ocmF5LCBtYXJnaW4sIHN1Yik7XG4gICAgY29uc3QgaUdyb3VuZFBsYW5lOiBJbnRlcnNlY3Rpb24gfCBudWxsID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpLmludGVyc2VjdChyYXkpO1xuICAgIGlmIChyZXMubGVuZ3RoID09PSAwKSByZXR1cm4gaUdyb3VuZFBsYW5lID8gW2lHcm91bmRQbGFuZV0gOiBbXTtcbiAgICBpZiAoaUdyb3VuZFBsYW5lICYmIGlHcm91bmRQbGFuZS50aW1lIDwgcmVzWzBdLnRpbWUgKiAoMSArIChtYXJnaW4gLyAxMDApKSkge1xuICAgICAgcmVzLnB1c2goaUdyb3VuZFBsYW5lKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaXRoaW5GcnVzdHVtKGZydXN0dW06IEZydXN0dW0sIGluY2x1c2l2ZTogYm9vbGVhbik6IEdlb21ldHJ5W10ge1xuICAgIHJldHVybiB0aGlzLnJvb3QuZ2V0V2l0aGluRnJ1c3R1bShmcnVzdHVtLCBpbmNsdXNpdmUpO1xuICB9XG5cbiAgcHVibGljIGdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bTogRnJ1c3R1bSwgaW5jbHVzaXZlOiBib29sZWFuKTogW0dlb21ldHJ5W10sIG51bWJlcltdW11dIHtcbiAgICByZXR1cm4gdGhpcy5yb290LmdldFdpdGhpbkZydXN0dW1TdWIoZnJ1c3R1bSwgaW5jbHVzaXZlKTtcbiAgfVxuXG4gIHB1YmxpYyBwcmludCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT1TY2VuZS1CQkg9PT09PT09PT09PVwiKTtcbiAgICB0aGlzLnJvb3QucHJpbnQoKTtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/geometry/sceneBoundingBoxHeirarcy.ts\n");

/***/ }),

/***/ "./src/log.ts":
/*!********************!*\
  !*** ./src/log.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Log: () => (/* binding */ Log)\n/* harmony export */ });\nclass Log {\n    constructor() {\n        this.logs = \"<u>LOGS:</u>\";\n    }\n    log(text) {\n        this.logs += \"<br>\" + text;\n    }\n    getLogs() {\n        return this.logs;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbG9nLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFFTyxNQUFNLEdBQUc7SUFJZDtRQUNFLElBQUksQ0FBQyxJQUFJLEdBQUcsY0FBYyxDQUFDO0lBQzdCLENBQUM7SUFFTSxHQUFHLENBQUMsSUFBWTtRQUNyQixJQUFJLENBQUMsSUFBSSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDN0IsQ0FBQztJQUVNLE9BQU87UUFDWixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztDQUdGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvbG9nLnRzP2RkMzciXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmV4cG9ydCBjbGFzcyBMb2cge1xuXG4gIHByaXZhdGUgbG9nczogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubG9ncyA9IFwiPHU+TE9HUzo8L3U+XCI7XG4gIH1cblxuICBwdWJsaWMgbG9nKHRleHQ6IHN0cmluZykge1xuICAgIHRoaXMubG9ncyArPSBcIjxicj5cIiArIHRleHQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0TG9ncygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxvZ3M7XG4gIH1cblxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/log.ts\n");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cad */ \"./src/cad.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\nconst main = function () {\n    return __awaiter(this, void 0, void 0, function* () {\n        yield _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.init();\n        yield _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.run();\n    });\n};\nmain();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUVnQztBQUVoQyxNQUFNLElBQUksR0FBRzs7UUFFVCxNQUFNLDBDQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdEIsTUFBTSwwQ0FBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBRXpCLENBQUM7Q0FBQTtBQUVELElBQUksRUFBRSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvbWFpbi50cz9jZDQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuL2NhZFwiXG5cbmNvbnN0IG1haW4gPSBhc3luYyBmdW5jdGlvbigpIHtcblxuICAgIGF3YWl0IElOU1RBTkNFLmluaXQoKTtcbiAgICBhd2FpdCBJTlNUQU5DRS5ydW4oKTtcblxufVxuXG5tYWluKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ }),

/***/ "./src/materials/material.ts":
/*!***********************************!*\
  !*** ./src/materials/material.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Material: () => (/* binding */ Material)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\n\nclass Material {\n    constructor(name, color = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.5, 0.5, 0.5, 1), emissive = wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0, 0, 0, 0), ambientIntensity = 0.1, pseudoDiffuseIntensity = 0.7, specularity = 12, specularIntensity = 0.3) {\n        this.name = name;\n        this.color = color;\n        this.emissive = emissive;\n        this.ambientIntensity = ambientIntensity;\n        this.pseudoDiffuseIntensity = pseudoDiffuseIntensity;\n        this.specularity = specularity;\n        this.specularIntensity = specularIntensity;\n        this.buffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"color buffer for material \" + this.name,\n            size: 48,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.updateBuffer();\n    }\n    updateColor(color) {\n        this.color = color;\n        this.updateBuffer();\n    }\n    setName(name) {\n        this.name = name;\n    }\n    updateBuffer() {\n        const data = new Float32Array([\n            ...this.color,\n            ...this.emissive,\n            this.ambientIntensity,\n            this.pseudoDiffuseIntensity,\n            this.specularity,\n            this.specularIntensity,\n        ]);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.buffer, 0, data);\n    }\n    getColorBuffer() {\n        return this.buffer;\n    }\n    getName() {\n        return this.name;\n    }\n    getColor() {\n        return this.color;\n    }\n    getEmissive() {\n        return this.emissive;\n    }\n    getAmbientIntensity() {\n        return this.ambientIntensity;\n    }\n    getPseudoDiffuseIntensity() {\n        return this.pseudoDiffuseIntensity;\n    }\n    getSpecularity() {\n        return this.specularity;\n    }\n    getSpecularIntensity() {\n        return this.specularIntensity;\n    }\n    updateEmissive(val) {\n        this.emissive = val;\n        this.updateBuffer();\n    }\n    updateAmbientIntensity(val) {\n        this.ambientIntensity = val;\n        this.updateBuffer();\n    }\n    updatePseudoDiffuseIntensity(val) {\n        this.pseudoDiffuseIntensity = val;\n        this.updateBuffer();\n    }\n    updateSpecularity(val) {\n        this.specularity = val;\n        this.updateBuffer();\n    }\n    updateSpecularIntensity(val) {\n        this.specularIntensity = val;\n        this.updateBuffer();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxHQUFXO1FBQ3ZDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxHQUFHLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFDTSw0QkFBNEIsQ0FBQyxHQUFXO1FBQzdDLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxHQUFHLENBQUM7UUFDbEMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3RCLENBQUM7SUFDTSxpQkFBaUIsQ0FBQyxHQUFXO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBQ00sdUJBQXVCLENBQUMsR0FBVztRQUN4QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDO1FBQzdCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDO0NBR0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9tYXRlcmlhbHMvbWF0ZXJpYWwudHM/MmYzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2ZWM0LCBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcblxuZXhwb3J0IHR5cGUgTWF0ZXJpYWxOYW1lID0gc3RyaW5nO1xuXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWwge1xuXG4gIHByaXZhdGUgYnVmZmVyOiBHUFVCdWZmZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBuYW1lOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBjb2xvcjogVmVjNCA9IHZlYzQuY3JlYXRlKDAuNSwgMC41LCAwLjUsIDEpLFxuICAgIHByaXZhdGUgZW1pc3NpdmU6IFZlYzQgPSB2ZWM0LmNyZWF0ZSgwLCAwLCAwLCAwKSxcbiAgICBwcml2YXRlIGFtYmllbnRJbnRlbnNpdHk6IG51bWJlciA9IDAuMSxcbiAgICBwcml2YXRlIHBzZXVkb0RpZmZ1c2VJbnRlbnNpdHk6IG51bWJlciA9IDAuNyxcbiAgICBwcml2YXRlIHNwZWN1bGFyaXR5OiBudW1iZXIgPSAxMixcbiAgICBwcml2YXRlIHNwZWN1bGFySW50ZW5zaXR5OiBudW1iZXIgPSAwLjMsXG4gICkge1xuXG4gICAgdGhpcy5idWZmZXIgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBsYWJlbDogXCJjb2xvciBidWZmZXIgZm9yIG1hdGVyaWFsIFwiICsgdGhpcy5uYW1lLFxuICAgICAgc2l6ZTogNDgsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVCdWZmZXIoKTtcblxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNvbG9yKGNvbG9yOiBWZWM0KTogdm9pZCB7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMudXBkYXRlQnVmZmVyKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0TmFtZShuYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVCdWZmZXIoKTogdm9pZCB7XG4gICAgY29uc3QgZGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAuLi50aGlzLmNvbG9yLFxuICAgICAgLi4udGhpcy5lbWlzc2l2ZSxcbiAgICAgIHRoaXMuYW1iaWVudEludGVuc2l0eSxcbiAgICAgIHRoaXMucHNldWRvRGlmZnVzZUludGVuc2l0eSxcbiAgICAgIHRoaXMuc3BlY3VsYXJpdHksXG4gICAgICB0aGlzLnNwZWN1bGFySW50ZW5zaXR5LFxuICAgIF0pO1xuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5idWZmZXIsIDAsIGRhdGEpO1xuICB9XG5cbiAgcHVibGljIGdldENvbG9yQnVmZmVyKCk6IEdQVUJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyO1xuICB9XG5cbiAgcHVibGljIGdldE5hbWUoKTogTWF0ZXJpYWxOYW1lIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9XG5cbiAgcHVibGljIGdldENvbG9yKCk6IFZlYzQge1xuICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICB9XG4gIHB1YmxpYyBnZXRFbWlzc2l2ZSgpOiBWZWM0IHtcbiAgICByZXR1cm4gdGhpcy5lbWlzc2l2ZTtcbiAgfVxuICBwdWJsaWMgZ2V0QW1iaWVudEludGVuc2l0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmFtYmllbnRJbnRlbnNpdHk7XG4gIH1cbiAgcHVibGljIGdldFBzZXVkb0RpZmZ1c2VJbnRlbnNpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5wc2V1ZG9EaWZmdXNlSW50ZW5zaXR5O1xuICB9XG4gIHB1YmxpYyBnZXRTcGVjdWxhcml0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnNwZWN1bGFyaXR5O1xuICB9XG4gIHB1YmxpYyBnZXRTcGVjdWxhckludGVuc2l0eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnNwZWN1bGFySW50ZW5zaXR5O1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUVtaXNzaXZlKHZhbDogVmVjNCk6IHZvaWQge1xuICAgIHRoaXMuZW1pc3NpdmUgPSB2YWw7XG4gICAgdGhpcy51cGRhdGVCdWZmZXIoKTtcbiAgfVxuICBwdWJsaWMgdXBkYXRlQW1iaWVudEludGVuc2l0eSh2YWw6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuYW1iaWVudEludGVuc2l0eSA9IHZhbDtcbiAgICB0aGlzLnVwZGF0ZUJ1ZmZlcigpO1xuICB9XG4gIHB1YmxpYyB1cGRhdGVQc2V1ZG9EaWZmdXNlSW50ZW5zaXR5KHZhbDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5wc2V1ZG9EaWZmdXNlSW50ZW5zaXR5ID0gdmFsO1xuICAgIHRoaXMudXBkYXRlQnVmZmVyKCk7XG4gIH1cbiAgcHVibGljIHVwZGF0ZVNwZWN1bGFyaXR5KHZhbDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zcGVjdWxhcml0eSA9IHZhbDtcbiAgICB0aGlzLnVwZGF0ZUJ1ZmZlcigpO1xuICB9XG4gIHB1YmxpYyB1cGRhdGVTcGVjdWxhckludGVuc2l0eSh2YWw6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc3BlY3VsYXJJbnRlbnNpdHkgPSB2YWw7XG4gICAgdGhpcy51cGRhdGVCdWZmZXIoKTtcbiAgfVxuXG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/materials/material.ts\n");

/***/ }),

/***/ "./src/materials/materialManager.ts":
/*!******************************************!*\
  !*** ./src/materials/materialManager.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MaterialManager: () => (/* binding */ MaterialManager)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./material */ \"./src/materials/material.ts\");\n\n\nclass MaterialManager {\n    constructor() {\n        this.materials = new Map();\n        this.createDefaultMaterial();\n    }\n    createDefaultMaterial() {\n        this.materials.set(\"default\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"default\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(1.0, 1.0, 1.0, 1.0)));\n        this.materials.set(\"darker grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"darker grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.1, 0.1, 0.1, 1.0)));\n        this.materials.set(\"dark grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"dark grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.3, 0.3, 0.3, 1.0)));\n        this.materials.set(\"lighter grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"lighter grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.9, 0.9, 0.9, 1.0)));\n        this.materials.set(\"light grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"light grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.7, 0.7, 0.7, 1.0)));\n        this.materials.set(\"mid grey\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"mid grey\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0.5, 0.5, 0.5, 1.0)));\n        this.materials.set(\"red\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"red\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(1, 0, 0, 1)));\n        this.materials.set(\"green\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"green\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0, 1, 0, 1)));\n        this.materials.set(\"blue\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"blue\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(0, 0, 1, 1)));\n        this.materials.set(\"white\", new _material__WEBPACK_IMPORTED_MODULE_0__.Material(\"white\", wgpu_matrix__WEBPACK_IMPORTED_MODULE_1__.vec4.create(1, 1, 1, 1)));\n    }\n    getDefaultMaterial() {\n        if (!this.materials.has(\"default\"))\n            this.createDefaultMaterial();\n        return this.materials.get(\"default\");\n    }\n    getMaterials() {\n        return this.materials;\n    }\n    addMaterial(name, mat) {\n        this.materials.set(name, mat);\n    }\n    removeMaterial(name) {\n        this.materials.delete(name);\n        if (this.materials.size === 0)\n            this.createDefaultMaterial();\n    }\n    getMaterial(name) {\n        return this.materials.get(name);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QztRQUNqRSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBRSxDQUFDO0lBQ3hDLENBQUM7SUFFTSxZQUFZO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBRU0sV0FBVyxDQUFDLElBQWtCLEVBQUUsR0FBYTtRQUNsRCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVNLGNBQWMsQ0FBQyxJQUFrQjtRQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxLQUFLLENBQUM7WUFBRSxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztJQUM5RCxDQUFDO0lBRU0sV0FBVyxDQUFDLElBQWtCO1FBQ25DLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEMsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvbWF0ZXJpYWxzL21hdGVyaWFsTWFuYWdlci50cz83N2ZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IE1hdGVyaWFsLCBNYXRlcmlhbE5hbWUgfSBmcm9tIFwiLi9tYXRlcmlhbFwiO1xuXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWxNYW5hZ2VyIHtcblxuICBwcml2YXRlIG1hdGVyaWFsczogTWFwPE1hdGVyaWFsTmFtZSwgTWF0ZXJpYWw+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWF0ZXJpYWxzID0gbmV3IE1hcDxNYXRlcmlhbE5hbWUsIE1hdGVyaWFsPigpO1xuICAgIHRoaXMuY3JlYXRlRGVmYXVsdE1hdGVyaWFsKCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZURlZmF1bHRNYXRlcmlhbCgpOiB2b2lkIHtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJkZWZhdWx0XCIsIG5ldyBNYXRlcmlhbChcImRlZmF1bHRcIiwgdmVjNC5jcmVhdGUoMS4wLCAxLjAsIDEuMCwgMS4wKSkpO1xuICAgIHRoaXMubWF0ZXJpYWxzLnNldChcImRhcmtlciBncmV5XCIsIG5ldyBNYXRlcmlhbChcImRhcmtlciBncmV5XCIsIHZlYzQuY3JlYXRlKDAuMSwgMC4xLCAwLjEsIDEuMCkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJkYXJrIGdyZXlcIiwgbmV3IE1hdGVyaWFsKFwiZGFyayBncmV5XCIsIHZlYzQuY3JlYXRlKDAuMywgMC4zLCAwLjMsIDEuMCkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJsaWdodGVyIGdyZXlcIiwgbmV3IE1hdGVyaWFsKFwibGlnaHRlciBncmV5XCIsIHZlYzQuY3JlYXRlKDAuOSwgMC45LCAwLjksIDEuMCkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJsaWdodCBncmV5XCIsIG5ldyBNYXRlcmlhbChcImxpZ2h0IGdyZXlcIiwgdmVjNC5jcmVhdGUoMC43LCAwLjcsIDAuNywgMS4wKSkpO1xuICAgIHRoaXMubWF0ZXJpYWxzLnNldChcIm1pZCBncmV5XCIsIG5ldyBNYXRlcmlhbChcIm1pZCBncmV5XCIsIHZlYzQuY3JlYXRlKDAuNSwgMC41LCAwLjUsIDEuMCkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJyZWRcIiwgbmV3IE1hdGVyaWFsKFwicmVkXCIsIHZlYzQuY3JlYXRlKDEsIDAsIDAsIDEpKSk7XG4gICAgdGhpcy5tYXRlcmlhbHMuc2V0KFwiZ3JlZW5cIiwgbmV3IE1hdGVyaWFsKFwiZ3JlZW5cIiwgdmVjNC5jcmVhdGUoMCwgMSwgMCwgMSkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJibHVlXCIsIG5ldyBNYXRlcmlhbChcImJsdWVcIiwgdmVjNC5jcmVhdGUoMCwgMCwgMSwgMSkpKTtcbiAgICB0aGlzLm1hdGVyaWFscy5zZXQoXCJ3aGl0ZVwiLCBuZXcgTWF0ZXJpYWwoXCJ3aGl0ZVwiLCB2ZWM0LmNyZWF0ZSgxLCAxLCAxLCAxKSkpO1xuICB9XG5cbiAgcHVibGljIGdldERlZmF1bHRNYXRlcmlhbCgpOiBNYXRlcmlhbCB7XG4gICAgaWYgKCF0aGlzLm1hdGVyaWFscy5oYXMoXCJkZWZhdWx0XCIpKSB0aGlzLmNyZWF0ZURlZmF1bHRNYXRlcmlhbCgpO1xuICAgIHJldHVybiB0aGlzLm1hdGVyaWFscy5nZXQoXCJkZWZhdWx0XCIpITtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNYXRlcmlhbHMoKTogTWFwPE1hdGVyaWFsTmFtZSwgTWF0ZXJpYWw+IHtcbiAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHM7XG4gIH1cblxuICBwdWJsaWMgYWRkTWF0ZXJpYWwobmFtZTogTWF0ZXJpYWxOYW1lLCBtYXQ6IE1hdGVyaWFsKSB7XG4gICAgdGhpcy5tYXRlcmlhbHMuc2V0KG5hbWUsIG1hdCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlTWF0ZXJpYWwobmFtZTogTWF0ZXJpYWxOYW1lKTogdm9pZCB7XG4gICAgdGhpcy5tYXRlcmlhbHMuZGVsZXRlKG5hbWUpO1xuICAgIGlmICh0aGlzLm1hdGVyaWFscy5zaXplID09PSAwKSB0aGlzLmNyZWF0ZURlZmF1bHRNYXRlcmlhbCgpO1xuICB9XG5cbiAgcHVibGljIGdldE1hdGVyaWFsKG5hbWU6IE1hdGVyaWFsTmFtZSk6IE1hdGVyaWFsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5tYXRlcmlhbHMuZ2V0KG5hbWUpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/materials/materialManager.ts\n");

/***/ }),

/***/ "./src/mode.ts":
/*!*********************!*\
  !*** ./src/mode.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OperatingMode: () => (/* binding */ OperatingMode)\n/* harmony export */ });\nvar OperatingMode;\n(function (OperatingMode) {\n    OperatingMode[OperatingMode[\"Navigation\"] = 0] = \"Navigation\";\n    OperatingMode[OperatingMode[\"Command\"] = 1] = \"Command\";\n})(OperatingMode || (OperatingMode = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUEsSUFBWSxhQUdYO0FBSEQsV0FBWSxhQUFhO0lBQ3JCLDZEQUFVO0lBQ1YsdURBQU87QUFDWCxDQUFDLEVBSFcsYUFBYSxLQUFiLGFBQWEsUUFHeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9tb2RlLnRzP2RlMGQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmV4cG9ydCBlbnVtIE9wZXJhdGluZ01vZGUge1xuICAgIE5hdmlnYXRpb24sIC8vIEtleXMgY29udHJvbCBjYW1lcmEgbW90aW9uXG4gICAgQ29tbWFuZCwgLy8gS2V5cyBjb250cm9sIGNvbW1hbmQgaW5wdXRcbn1cblxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/mode.ts\n");

/***/ }),

/***/ "./src/render/flags.ts":
/*!*****************************!*\
  !*** ./src/render/flags.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CONSTANT_SCREEN_SIZE_BIT: () => (/* binding */ CONSTANT_SCREEN_SIZE_BIT),\n/* harmony export */   HOVER_BIT: () => (/* binding */ HOVER_BIT),\n/* harmony export */   SELECTED_BIT: () => (/* binding */ SELECTED_BIT)\n/* harmony export */ });\nconst CONSTANT_SCREEN_SIZE_BIT = 1 << 0;\nconst HOVER_BIT = 1 << 1;\nconst SELECTED_BIT = 1 << 2;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL2ZsYWdzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUdPLE1BQU0sd0JBQXdCLEdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoRCxNQUFNLFNBQVMsR0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLE1BQU0sWUFBWSxHQUFXLENBQUMsSUFBSSxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvZmxhZ3MudHM/NDczZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuXG5leHBvcnQgY29uc3QgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUOiBudW1iZXIgPSAxIDw8IDA7XG5leHBvcnQgY29uc3QgSE9WRVJfQklUOiBudW1iZXIgPSAxIDw8IDE7XG5leHBvcnQgY29uc3QgU0VMRUNURURfQklUOiBudW1iZXIgPSAxIDw8IDI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/flags.ts\n");

/***/ }),

/***/ "./src/render/globalUniforms.ts":
/*!**************************************!*\
  !*** ./src/render/globalUniforms.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalUniforms: () => (/* binding */ GlobalUniforms)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/math */ \"./src/utils/math.ts\");\n\n\n\nvar ShadingMode;\n(function (ShadingMode) {\n    ShadingMode[ShadingMode[\"Default\"] = 0] = \"Default\";\n    ShadingMode[ShadingMode[\"Ghosted\"] = 1] = \"Ghosted\";\n})(ShadingMode || (ShadingMode = {}));\nclass GlobalUniforms {\n    constructor(device) {\n        this.device = device;\n        this.cameraPositionBuffer = this.device.createBuffer({\n            label: \"camera position buffer\",\n            size: 12,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.cameraViewProjBuffer = this.device.createBuffer({\n            label: \"camera view proj buffer\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.selectionTransformBuffer = this.device.createBuffer({\n            label: \"selection transform buffer\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.selectionTransformBufferInverseTranspose = this.device.createBuffer({\n            label: \"selection trasform buffer inverse transpose\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.resolutionBuffer = this.device.createBuffer({\n            label: \"resolutionBuffer\",\n            size: 8,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.layout = this.device.createBindGroupLayout({\n            label: \"global uniforms layout\",\n            entries: [\n                {\n                    binding: 0,\n                    visibility: GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT,\n                    buffer: {}\n                }, {\n                    binding: 1,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                }, {\n                    binding: 2,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                }, {\n                    binding: 3,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                }, {\n                    binding: 4,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {}\n                }\n            ]\n        });\n        this.bindGroup = this.device.createBindGroup({\n            label: \"global uniforms\",\n            layout: this.layout,\n            entries: [\n                {\n                    binding: 0,\n                    resource: { buffer: this.cameraPositionBuffer },\n                }, {\n                    binding: 1,\n                    resource: { buffer: this.cameraViewProjBuffer },\n                }, {\n                    binding: 2,\n                    resource: { buffer: this.selectionTransformBuffer }\n                }, {\n                    binding: 3,\n                    resource: { buffer: this.selectionTransformBufferInverseTranspose }\n                }, {\n                    binding: 4,\n                    resource: { buffer: this.resolutionBuffer }\n                }\n            ]\n        });\n    }\n    getLayout() {\n        return this.layout;\n    }\n    tick() {\n        this.device.queue.writeBuffer(this.cameraPositionBuffer, 0, (0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.swizzleYZVec3)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.clone(_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPosition())));\n        this.device.queue.writeBuffer(this.cameraViewProjBuffer, 0, _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getViewProj());\n        const selectionTrasform = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMover().getTransform();\n        const selectionTrasformInverseTraspose = wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.transpose(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.mat4.inverse(selectionTrasform));\n        this.device.queue.writeBuffer(this.selectionTransformBuffer, 0, (0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.swizzleYZ)(selectionTrasform));\n        this.device.queue.writeBuffer(this.selectionTransformBufferInverseTranspose, 0, (0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.swizzleYZ)(selectionTrasformInverseTraspose));\n        const resolutionArray = new Float32Array([window.innerWidth, window.innerHeight]);\n        this.device.queue.writeBuffer(this.resolutionBuffer, 0, resolutionArray);\n    }\n    bind(pass) {\n        pass.setBindGroup(1, this.bindGroup);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL2dsb2JhbFVuaWZvcm1zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkQ7QUFDekI7QUFDdUI7QUFFekQsSUFBSyxXQUdKO0FBSEQsV0FBSyxXQUFXO0lBQ2QsbURBQU87SUFDUCxtREFBTztBQUNULENBQUMsRUFISSxXQUFXLEtBQVgsV0FBVyxRQUdmO0FBRU0sTUFBTSxjQUFjO0lBV3pCLFlBQ1UsTUFBaUI7UUFBakIsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUV6QixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUM7WUFDbkQsS0FBSyxFQUFFLHdCQUF3QjtZQUMvQixJQUFJLEVBQUUsRUFBRTtZQUNSLEtBQUssRUFBRSxjQUFjLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxRQUFRO1NBQ3hELENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQztZQUNuRCxLQUFLLEVBQUUseUJBQXlCO1lBQ2hDLElBQUksRUFBRSxFQUFFO1lBQ1IsS0FBSyxFQUFFLGNBQWMsQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDLFFBQVE7U0FDeEQsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO1lBQ3ZELEtBQUssRUFBRSw0QkFBNEI7WUFDbkMsSUFBSSxFQUFFLEVBQUU7WUFDUixLQUFLLEVBQUUsY0FBYyxDQUFDLE9BQU8sR0FBRyxjQUFjLENBQUMsUUFBUTtTQUN4RCxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsd0NBQXdDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUM7WUFDdkUsS0FBSyxFQUFFLDZDQUE2QztZQUNwRCxJQUFJLEVBQUUsRUFBRTtZQUNSLEtBQUssRUFBRSxjQUFjLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxRQUFRO1NBQ3hELENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQztZQUMvQyxLQUFLLEVBQUUsa0JBQWtCO1lBQ3pCLElBQUksRUFBRSxDQUFDO1lBQ1AsS0FBSyxFQUFFLGNBQWMsQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDLFFBQVE7U0FDeEQsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDO1lBQzlDLEtBQUssRUFBRSx3QkFBd0I7WUFDL0IsT0FBTyxFQUFFO2dCQUNQO29CQUNFLE9BQU8sRUFBRSxDQUFDO29CQUNWLFVBQVUsRUFBRSxjQUFjLENBQUMsTUFBTSxHQUFHLGNBQWMsQ0FBQyxRQUFRO29CQUMzRCxNQUFNLEVBQUUsRUFBRTtpQkFDWCxFQUFFO29CQUNELE9BQU8sRUFBRSxDQUFDO29CQUNWLFVBQVUsRUFBRSxjQUFjLENBQUMsTUFBTTtvQkFDakMsTUFBTSxFQUFFLEVBQUU7aUJBQ1gsRUFBRTtvQkFDRCxPQUFPLEVBQUUsQ0FBQztvQkFDVixVQUFVLEVBQUUsY0FBYyxDQUFDLE1BQU07b0JBQ2pDLE1BQU0sRUFBRSxFQUFFO2lCQUNYLEVBQUU7b0JBQ0QsT0FBTyxFQUFFLENBQUM7b0JBQ1YsVUFBVSxFQUFFLGNBQWMsQ0FBQyxNQUFNO29CQUNqQyxNQUFNLEVBQUUsRUFBRTtpQkFDWCxFQUFFO29CQUNELE9BQU8sRUFBRSxDQUFDO29CQUNWLFVBQVUsRUFBRSxjQUFjLENBQUMsUUFBUTtvQkFDbkMsTUFBTSxFQUFFLEVBQUU7aUJBQ1g7YUFDRjtTQUNGLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUM7WUFDM0MsS0FBSyxFQUFFLGlCQUFpQjtZQUN4QixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07WUFDbkIsT0FBTyxFQUFFO2dCQUNQO29CQUNFLE9BQU8sRUFBRSxDQUFDO29CQUNWLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7aUJBQ2hELEVBQUU7b0JBQ0QsT0FBTyxFQUFFLENBQUM7b0JBQ1YsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtpQkFDaEQsRUFBRTtvQkFDRCxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLHdCQUF3QixFQUFFO2lCQUNwRCxFQUFFO29CQUNELE9BQU8sRUFBRSxDQUFDO29CQUNWLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsd0NBQXdDLEVBQUU7aUJBQ3BFLEVBQUU7b0JBQ0QsT0FBTyxFQUFFLENBQUM7b0JBQ1YsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtpQkFDNUM7YUFDRjtTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTSxTQUFTO1FBQ2QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFHTSxJQUFJO1FBQ1QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLEVBQWdCLDBEQUFhLENBQ3JGLDZDQUFJLENBQUMsS0FBSyxDQUFDLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUMzRCxDQUFDO1FBQ0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLEVBQUUsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1FBRTNHLE1BQU0saUJBQWlCLEdBQVMsMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNuRSxNQUFNLGdDQUFnQyxHQUFTLDZDQUFJLENBQUMsU0FBUyxDQUFDLDZDQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUUvRixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLHdCQUF3QixFQUN6RCxDQUFDLEVBQWdCLHNEQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsd0NBQXdDLEVBQ3pFLENBQUMsRUFBZ0Isc0RBQVMsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLENBQUM7UUFFaEUsTUFBTSxlQUFlLEdBQWlCLElBQUksWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUNoRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUMzRSxDQUFDO0lBRU0sSUFBSSxDQUFDLElBQTBCO1FBQ3BDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN2QyxDQUFDO0NBSUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvZ2xvYmFsVW5pZm9ybXMudHM/N2JjYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzLCBWZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IHN3aXp6bGVZWiwgc3dpenpsZVlaVmVjMyB9IGZyb20gXCIuLi91dGlscy9tYXRoXCI7XG5cbmVudW0gU2hhZGluZ01vZGUge1xuICBEZWZhdWx0LFxuICBHaG9zdGVkLFxufVxuXG5leHBvcnQgY2xhc3MgR2xvYmFsVW5pZm9ybXMge1xuXG4gIHByaXZhdGUgY2FtZXJhUG9zaXRpb25CdWZmZXI6IEdQVUJ1ZmZlcjtcbiAgcHJpdmF0ZSBjYW1lcmFWaWV3UHJvakJ1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIHNlbGVjdGlvblRyYW5zZm9ybUJ1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIHNlbGVjdGlvblRyYW5zZm9ybUJ1ZmZlckludmVyc2VUcmFuc3Bvc2U6IEdQVUJ1ZmZlcjtcbiAgcHJpdmF0ZSByZXNvbHV0aW9uQnVmZmVyOiBHUFVCdWZmZXI7XG5cbiAgcHJpdmF0ZSBsYXlvdXQ6IEdQVUJpbmRHcm91cExheW91dDtcbiAgcHJpdmF0ZSBiaW5kR3JvdXA6IEdQVUJpbmRHcm91cDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGRldmljZTogR1BVRGV2aWNlLFxuICApIHtcbiAgICB0aGlzLmNhbWVyYVBvc2l0aW9uQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcImNhbWVyYSBwb3NpdGlvbiBidWZmZXJcIixcbiAgICAgIHNpemU6IDEyLCAvLyAzICogNFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICB0aGlzLmNhbWVyYVZpZXdQcm9qQnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcImNhbWVyYSB2aWV3IHByb2ogYnVmZmVyXCIsXG4gICAgICBzaXplOiA2NCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG4gICAgdGhpcy5zZWxlY3Rpb25UcmFuc2Zvcm1CdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwic2VsZWN0aW9uIHRyYW5zZm9ybSBidWZmZXJcIixcbiAgICAgIHNpemU6IDY0LFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICB0aGlzLnNlbGVjdGlvblRyYW5zZm9ybUJ1ZmZlckludmVyc2VUcmFuc3Bvc2UgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwic2VsZWN0aW9uIHRyYXNmb3JtIGJ1ZmZlciBpbnZlcnNlIHRyYW5zcG9zZVwiLFxuICAgICAgc2l6ZTogNjQsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgIH0pO1xuICAgIHRoaXMucmVzb2x1dGlvbkJ1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBsYWJlbDogXCJyZXNvbHV0aW9uQnVmZmVyXCIsXG4gICAgICBzaXplOiA4LFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICB0aGlzLmxheW91dCA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cExheW91dCh7XG4gICAgICBsYWJlbDogXCJnbG9iYWwgdW5pZm9ybXMgbGF5b3V0XCIsXG4gICAgICBlbnRyaWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBiaW5kaW5nOiAwLCAvLyBjYW1lcmEgcG9zXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYIHwgR1BVU2hhZGVyU3RhZ2UuRlJBR01FTlQsXG4gICAgICAgICAgYnVmZmVyOiB7fVxuICAgICAgICB9LCB7XG4gICAgICAgICAgYmluZGluZzogMSwgLy8gY2FtZXIgdmlldyBwcm9qXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgIGJ1ZmZlcjoge31cbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDIsIC8vIHNlbGVjdGlvbiB0cmFuc2Zvcm1cbiAgICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5WRVJURVgsXG4gICAgICAgICAgYnVmZmVyOiB7fVxuICAgICAgICB9LCB7XG4gICAgICAgICAgYmluZGluZzogMywgLy8gc2VsZWN0aW9uIHRyYW5zZm9ybSBpbnZlcnNlIHRyYXNwb3NlXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgIGJ1ZmZlcjoge31cbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDQsIC8vIHJlc29sdXRpb24gYnVmZmVyXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuRlJBR01FTlQsXG4gICAgICAgICAgYnVmZmVyOiB7fVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gICAgdGhpcy5iaW5kR3JvdXAgPSB0aGlzLmRldmljZS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgICAgbGFiZWw6IFwiZ2xvYmFsIHVuaWZvcm1zXCIsXG4gICAgICBsYXlvdXQ6IHRoaXMubGF5b3V0LFxuICAgICAgZW50cmllczogW1xuICAgICAgICB7XG4gICAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMuY2FtZXJhUG9zaXRpb25CdWZmZXIgfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDEsXG4gICAgICAgICAgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLmNhbWVyYVZpZXdQcm9qQnVmZmVyIH0sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAyLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5zZWxlY3Rpb25UcmFuc2Zvcm1CdWZmZXIgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgYmluZGluZzogMyxcbiAgICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMuc2VsZWN0aW9uVHJhbnNmb3JtQnVmZmVySW52ZXJzZVRyYW5zcG9zZSB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiA0LFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5yZXNvbHV0aW9uQnVmZmVyIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldExheW91dCgpOiBHUFVCaW5kR3JvdXBMYXlvdXQge1xuICAgIHJldHVybiB0aGlzLmxheW91dDtcbiAgfVxuXG5cbiAgcHVibGljIHRpY2soKTogdm9pZCB7XG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy5jYW1lcmFQb3NpdGlvbkJ1ZmZlciwgMCwgPEZsb2F0MzJBcnJheT5zd2l6emxlWVpWZWMzKFxuICAgICAgdmVjMy5jbG9uZShJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLmdldFBvc2l0aW9uKCkpKVxuICAgICk7XG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy5jYW1lcmFWaWV3UHJvakJ1ZmZlciwgMCwgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5nZXRWaWV3UHJvaigpKTtcblxuICAgIGNvbnN0IHNlbGVjdGlvblRyYXNmb3JtOiBNYXQ0ID0gSU5TVEFOQ0UuZ2V0TW92ZXIoKS5nZXRUcmFuc2Zvcm0oKTtcbiAgICBjb25zdCBzZWxlY3Rpb25UcmFzZm9ybUludmVyc2VUcmFzcG9zZTogTWF0NCA9IG1hdDQudHJhbnNwb3NlKG1hdDQuaW52ZXJzZShzZWxlY3Rpb25UcmFzZm9ybSkpO1xuXG4gICAgdGhpcy5kZXZpY2UucXVldWUud3JpdGVCdWZmZXIodGhpcy5zZWxlY3Rpb25UcmFuc2Zvcm1CdWZmZXIsXG4gICAgICAwLCA8RmxvYXQzMkFycmF5PnN3aXp6bGVZWihzZWxlY3Rpb25UcmFzZm9ybSkpO1xuICAgIHRoaXMuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMuc2VsZWN0aW9uVHJhbnNmb3JtQnVmZmVySW52ZXJzZVRyYW5zcG9zZSxcbiAgICAgIDAsIDxGbG9hdDMyQXJyYXk+c3dpenpsZVlaKHNlbGVjdGlvblRyYXNmb3JtSW52ZXJzZVRyYXNwb3NlKSk7XG5cbiAgICBjb25zdCByZXNvbHV0aW9uQXJyYXk6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoW3dpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHRdKTtcbiAgICB0aGlzLmRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnJlc29sdXRpb25CdWZmZXIsIDAsIHJlc29sdXRpb25BcnJheSk7XG4gIH1cblxuICBwdWJsaWMgYmluZChwYXNzOiBHUFVSZW5kZXJQYXNzRW5jb2Rlcik6IHZvaWQge1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDEsIHRoaXMuYmluZEdyb3VwKTtcbiAgfVxuXG5cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/globalUniforms.ts\n");

/***/ }),

/***/ "./src/render/pipeline.ts":
/*!********************************!*\
  !*** ./src/render/pipeline.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pipeline: () => (/* binding */ Pipeline),\n/* harmony export */   PipelinePrimitive: () => (/* binding */ PipelinePrimitive)\n/* harmony export */ });\n/* harmony import */ var _renderMesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderMesh */ \"./src/render/renderMesh.ts\");\n/* harmony import */ var _renderLines__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderLines */ \"./src/render/renderLines.ts\");\n/* harmony import */ var _renderPoints__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./renderPoints */ \"./src/render/renderPoints.ts\");\n\n\n\nvar PipelinePrimitive;\n(function (PipelinePrimitive) {\n    PipelinePrimitive[PipelinePrimitive[\"Triangle\"] = 0] = \"Triangle\";\n    PipelinePrimitive[PipelinePrimitive[\"Line\"] = 1] = \"Line\";\n    PipelinePrimitive[PipelinePrimitive[\"Point\"] = 2] = \"Point\";\n})(PipelinePrimitive || (PipelinePrimitive = {}));\nclass Pipeline {\n    constructor(device, format, layouts, shaderModule, primitive, samples) {\n        const pipelineLayout = device.createPipelineLayout({\n            label: getLabel(primitive) + \" label\",\n            bindGroupLayouts: layouts,\n        });\n        this.gpuPipeline = device.createRenderPipeline({\n            label: getLabel(primitive),\n            primitive: {\n                topology: getTopology(primitive),\n                cullMode: \"none\"\n            },\n            layout: pipelineLayout,\n            depthStencil: {\n                depthWriteEnabled: true,\n                depthCompare: \"less\",\n                format: \"depth24plus\"\n            },\n            vertex: {\n                module: shaderModule,\n                entryPoint: \"vertexMain\",\n                buffers: [getVertexBufferLayout(primitive)]\n            },\n            fragment: {\n                module: shaderModule,\n                entryPoint: \"fragmentMain\",\n                targets: [\n                    getTarget(format)\n                ]\n            },\n            multisample: {\n                count: samples\n            }\n        });\n    }\n    get() {\n        return this.gpuPipeline;\n    }\n}\nfunction getTopology(primitive) {\n    switch (primitive) {\n        case PipelinePrimitive.Triangle: return \"triangle-list\";\n        case PipelinePrimitive.Line: return \"line-list\";\n        case PipelinePrimitive.Point: return \"point-list\";\n        default:\n            console.error(\"unimplemented primitive\");\n            return \"triangle-list\";\n    }\n}\nfunction getVertexBufferLayout(primitive) {\n    switch (primitive) {\n        case PipelinePrimitive.Triangle: return _renderMesh__WEBPACK_IMPORTED_MODULE_0__.RenderMesh.getVertexBufferLayout();\n        case PipelinePrimitive.Line: return _renderLines__WEBPACK_IMPORTED_MODULE_1__.RenderLines.getVertexBufferLayout();\n        case PipelinePrimitive.Point: return _renderPoints__WEBPACK_IMPORTED_MODULE_2__.RenderPoints.getVertexBufferLayout();\n        default:\n            console.error(\"unimplemented primitive\");\n            return _renderMesh__WEBPACK_IMPORTED_MODULE_0__.RenderMesh.getVertexBufferLayout();\n    }\n}\nfunction getLabel(primitive) {\n    switch (primitive) {\n        case PipelinePrimitive.Triangle: return \"trinagle pipeline\";\n        case PipelinePrimitive.Line: return \"line pipeline\";\n        case PipelinePrimitive.Point: return \"point pipeline\";\n        default: throw new Error(\"not implemented\");\n    }\n}\nfunction getTarget(format) {\n    if (true) {\n        //if (format === \"r32sint\") { // TODO:\n        return {\n            format: format\n        };\n    }\n    return {\n        format: format,\n        blend: {\n            color: {\n                operation: 'add',\n                srcFactor: 'src-alpha',\n                dstFactor: 'one-minus-src-alpha',\n            },\n            alpha: {\n                operation: 'add',\n                srcFactor: 'one',\n                dstFactor: 'one-minus-src-alpha',\n            },\n        },\n        writeMask: GPUColorWrite.ALL,\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLGVBQWUsQ0FBQztRQUNwRCxLQUFLLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sZ0JBQWdCLENBQUM7UUFDdEQsT0FBTyxDQUFDLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0tBQzdDO0FBQ0gsQ0FBQztBQUVELFNBQVMsU0FBUyxDQUFDLE1BQXdCO0lBQ3pDLElBQUksSUFBSSxFQUFFO1FBQ1Isc0NBQXNDO1FBQ3RDLE9BQU87WUFDTCxNQUFNLEVBQUUsTUFBTTtTQUNmO0tBQ0Y7SUFDRCxPQUFPO1FBQ0wsTUFBTSxFQUFFLE1BQU07UUFDZCxLQUFLLEVBQUU7WUFDTCxLQUFLLEVBQUU7Z0JBQ0wsU0FBUyxFQUFFLEtBQUs7Z0JBQ2hCLFNBQVMsRUFBRSxXQUFXO2dCQUN0QixTQUFTLEVBQUUscUJBQXFCO2FBQ2pDO1lBQ0QsS0FBSyxFQUFFO2dCQUNMLFNBQVMsRUFBRSxLQUFLO2dCQUNoQixTQUFTLEVBQUUsS0FBSztnQkFDaEIsU0FBUyxFQUFFLHFCQUFxQjthQUNqQztTQUNGO1FBQ0QsU0FBUyxFQUFFLGFBQWEsQ0FBQyxHQUFHO0tBQzdCO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9waXBlbGluZS50cz9iMzBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlbmRlck1lc2ggfSBmcm9tIFwiLi9yZW5kZXJNZXNoXCJcbmltcG9ydCB7IFJlbmRlckxpbmVzIH0gZnJvbSBcIi4vcmVuZGVyTGluZXNcIlxuaW1wb3J0IHsgUmVuZGVyUG9pbnRzIH0gZnJvbSBcIi4vcmVuZGVyUG9pbnRzXCI7XG5cbmV4cG9ydCBlbnVtIFBpcGVsaW5lUHJpbWl0aXZlIHtcbiAgVHJpYW5nbGUsXG4gIExpbmUsXG4gIFBvaW50LFxufVxuXG5leHBvcnQgY2xhc3MgUGlwZWxpbmUge1xuXG5cbiAgcHJpdmF0ZSBncHVQaXBlbGluZTogR1BVUmVuZGVyUGlwZWxpbmU7XG5cbiAgY29uc3RydWN0b3IoZGV2aWNlOiBHUFVEZXZpY2UsIGZvcm1hdDogR1BVVGV4dHVyZUZvcm1hdCwgbGF5b3V0czogR1BVQmluZEdyb3VwTGF5b3V0W10sIHNoYWRlck1vZHVsZTogR1BVU2hhZGVyTW9kdWxlLCBwcmltaXRpdmU6IFBpcGVsaW5lUHJpbWl0aXZlLCBzYW1wbGVzOiBudW1iZXIpIHtcblxuXG4gICAgY29uc3QgcGlwZWxpbmVMYXlvdXQ6IEdQVVBpcGVsaW5lTGF5b3V0ID0gZGV2aWNlLmNyZWF0ZVBpcGVsaW5lTGF5b3V0KHtcbiAgICAgIGxhYmVsOiBnZXRMYWJlbChwcmltaXRpdmUpICsgXCIgbGFiZWxcIixcbiAgICAgIGJpbmRHcm91cExheW91dHM6IGxheW91dHMsXG4gICAgfSk7XG5cbiAgICB0aGlzLmdwdVBpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZVJlbmRlclBpcGVsaW5lKHtcbiAgICAgIGxhYmVsOiBnZXRMYWJlbChwcmltaXRpdmUpLFxuICAgICAgcHJpbWl0aXZlOiB7XG4gICAgICAgIHRvcG9sb2d5OiBnZXRUb3BvbG9neShwcmltaXRpdmUpLFxuICAgICAgICBjdWxsTW9kZTogXCJub25lXCJcbiAgICAgIH0sXG4gICAgICBsYXlvdXQ6IHBpcGVsaW5lTGF5b3V0LFxuICAgICAgZGVwdGhTdGVuY2lsOiB7XG4gICAgICAgIGRlcHRoV3JpdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICBkZXB0aENvbXBhcmU6IFwibGVzc1wiLFxuICAgICAgICBmb3JtYXQ6IFwiZGVwdGgyNHBsdXNcIlxuICAgICAgfSxcbiAgICAgIHZlcnRleDoge1xuICAgICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgICAgZW50cnlQb2ludDogXCJ2ZXJ0ZXhNYWluXCIsXG4gICAgICAgIGJ1ZmZlcnM6IFtnZXRWZXJ0ZXhCdWZmZXJMYXlvdXQocHJpbWl0aXZlKV1cbiAgICAgIH0sXG4gICAgICBmcmFnbWVudDoge1xuICAgICAgICBtb2R1bGU6IHNoYWRlck1vZHVsZSxcbiAgICAgICAgZW50cnlQb2ludDogXCJmcmFnbWVudE1haW5cIixcbiAgICAgICAgdGFyZ2V0czogW1xuICAgICAgICAgIGdldFRhcmdldChmb3JtYXQpXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBtdWx0aXNhbXBsZToge1xuICAgICAgICBjb3VudDogc2FtcGxlc1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldCgpOiBHUFVSZW5kZXJQaXBlbGluZSB7XG4gICAgcmV0dXJuIHRoaXMuZ3B1UGlwZWxpbmU7XG4gIH1cblxufVxuXG5mdW5jdGlvbiBnZXRUb3BvbG9neShwcmltaXRpdmU6IFBpcGVsaW5lUHJpbWl0aXZlKTogR1BVUHJpbWl0aXZlVG9wb2xvZ3kge1xuICBzd2l0Y2ggKHByaW1pdGl2ZSkge1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuVHJpYW5nbGU6IHJldHVybiBcInRyaWFuZ2xlLWxpc3RcIjtcbiAgICBjYXNlIFBpcGVsaW5lUHJpbWl0aXZlLkxpbmU6IHJldHVybiBcImxpbmUtbGlzdFwiO1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuUG9pbnQ6IHJldHVybiBcInBvaW50LWxpc3RcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5lcnJvcihcInVuaW1wbGVtZW50ZWQgcHJpbWl0aXZlXCIpO1xuICAgICAgcmV0dXJuIFwidHJpYW5nbGUtbGlzdFwiO1xuICB9XG59XG5mdW5jdGlvbiBnZXRWZXJ0ZXhCdWZmZXJMYXlvdXQocHJpbWl0aXZlOiBQaXBlbGluZVByaW1pdGl2ZSk6IEdQVVZlcnRleEJ1ZmZlckxheW91dCB7XG4gIHN3aXRjaCAocHJpbWl0aXZlKSB7XG4gICAgY2FzZSBQaXBlbGluZVByaW1pdGl2ZS5UcmlhbmdsZTogcmV0dXJuIFJlbmRlck1lc2guZ2V0VmVydGV4QnVmZmVyTGF5b3V0KCk7XG4gICAgY2FzZSBQaXBlbGluZVByaW1pdGl2ZS5MaW5lOiByZXR1cm4gUmVuZGVyTGluZXMuZ2V0VmVydGV4QnVmZmVyTGF5b3V0KCk7XG4gICAgY2FzZSBQaXBlbGluZVByaW1pdGl2ZS5Qb2ludDogcmV0dXJuIFJlbmRlclBvaW50cy5nZXRWZXJ0ZXhCdWZmZXJMYXlvdXQoKTtcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5lcnJvcihcInVuaW1wbGVtZW50ZWQgcHJpbWl0aXZlXCIpO1xuICAgICAgcmV0dXJuIFJlbmRlck1lc2guZ2V0VmVydGV4QnVmZmVyTGF5b3V0KCk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldExhYmVsKHByaW1pdGl2ZTogUGlwZWxpbmVQcmltaXRpdmUpOiBzdHJpbmcge1xuICBzd2l0Y2ggKHByaW1pdGl2ZSkge1xuICAgIGNhc2UgUGlwZWxpbmVQcmltaXRpdmUuVHJpYW5nbGU6IHJldHVybiBcInRyaW5hZ2xlIHBpcGVsaW5lXCI7XG4gICAgY2FzZSBQaXBlbGluZVByaW1pdGl2ZS5MaW5lOiByZXR1cm4gXCJsaW5lIHBpcGVsaW5lXCI7XG4gICAgY2FzZSBQaXBlbGluZVByaW1pdGl2ZS5Qb2ludDogcmV0dXJuIFwicG9pbnQgcGlwZWxpbmVcIjtcbiAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0KGZvcm1hdDogR1BVVGV4dHVyZUZvcm1hdCk6IEdQVUNvbG9yVGFyZ2V0U3RhdGUge1xuICBpZiAodHJ1ZSkge1xuICAgIC8vaWYgKGZvcm1hdCA9PT0gXCJyMzJzaW50XCIpIHsgLy8gVE9ETzpcbiAgICByZXR1cm4ge1xuICAgICAgZm9ybWF0OiBmb3JtYXRcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBmb3JtYXQ6IGZvcm1hdCxcbiAgICBibGVuZDoge1xuICAgICAgY29sb3I6IHtcbiAgICAgICAgb3BlcmF0aW9uOiAnYWRkJyxcbiAgICAgICAgc3JjRmFjdG9yOiAnc3JjLWFscGhhJyxcbiAgICAgICAgZHN0RmFjdG9yOiAnb25lLW1pbnVzLXNyYy1hbHBoYScsXG4gICAgICB9LFxuICAgICAgYWxwaGE6IHtcbiAgICAgICAgb3BlcmF0aW9uOiAnYWRkJyxcbiAgICAgICAgc3JjRmFjdG9yOiAnb25lJyxcbiAgICAgICAgZHN0RmFjdG9yOiAnb25lLW1pbnVzLXNyYy1hbHBoYScsXG4gICAgICB9LFxuICAgIH0sXG4gICAgd3JpdGVNYXNrOiBHUFVDb2xvcldyaXRlLkFMTCxcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/pipeline.ts\n");

/***/ }),

/***/ "./src/render/renderLines.ts":
/*!***********************************!*\
  !*** ./src/render/renderLines.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderLines: () => (/* binding */ RenderLines)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _renderable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderable */ \"./src/render/renderable.ts\");\n\n\nclass RenderLines extends _renderable__WEBPACK_IMPORTED_MODULE_1__.Renderable {\n    constructor(parent, vertices, indices, subSelection) {\n        super(parent, subSelection);\n        // vertex\n        const vertexList = [];\n        for (const vert of vertices) {\n            vertexList.push(...vert, 1);\n        }\n        const vertexArray = new Float32Array(vertexList);\n        this.vertexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"vertex buffer\",\n            size: vertexArray.byteLength,\n            usage: GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.vertexBuffer, 0, vertexArray);\n        // index\n        const indexArray = new Uint32Array(indices);\n        this.indexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"index buffer\",\n            size: indexArray.byteLength,\n            usage: GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.indexBuffer, 0, indexArray);\n        this.indexCount = indices.length;\n    }\n    updateVerts(verts) {\n        const vertexList = [];\n        for (const vert of verts) {\n            vertexList.push(...vert, 1);\n        }\n        const vertexArray = new Float32Array(vertexList);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.vertexBuffer, 0, vertexArray);\n    }\n    draw(pass) {\n        if (this.parent.isHidden())\n            return;\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.setIndexBuffer(this.indexBuffer, \"uint32\");\n        pass.drawIndexed(this.indexCount);\n    }\n    static getVertexBufferLayout() {\n        return RenderLines.vertexBufferLayout;\n    }\n}\nRenderLines.vertexBufferLayout = {\n    arrayStride: 16,\n    attributes: [\n        {\n            format: \"float32x4\",\n            offset: 0,\n            shaderLocation: 0,\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWtCLENBQUM7SUFDeEMsQ0FBQzs7QUFyRXVCLDhCQUFrQixHQUEwQjtJQUNsRSxXQUFXLEVBQUUsRUFBRTtJQUNmLFVBQVUsRUFBRTtRQUNWO1lBQ0UsTUFBTSxFQUFFLFdBQVc7WUFDbkIsTUFBTSxFQUFFLENBQUM7WUFDVCxjQUFjLEVBQUUsQ0FBQztTQUNsQjtLQUNGO0NBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9yZW5kZXJMaW5lcy50cz9kYjUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiXG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9nZW9tZXRyeS9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgUmVuZGVyYWJsZSB9IGZyb20gXCIuL3JlbmRlcmFibGVcIjtcblxuZXhwb3J0IGNsYXNzIFJlbmRlckxpbmVzIGV4dGVuZHMgUmVuZGVyYWJsZSB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdmVydGV4QnVmZmVyTGF5b3V0OiBHUFVWZXJ0ZXhCdWZmZXJMYXlvdXQgPSB7XG4gICAgYXJyYXlTdHJpZGU6IDE2LFxuICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgIHsgLy8gbG9jYXRpb25cbiAgICAgICAgZm9ybWF0OiBcImZsb2F0MzJ4NFwiLFxuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLFxuICAgICAgfVxuICAgIF1cbiAgfTtcblxuICBwcml2YXRlIHZlcnRleEJ1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIGluZGV4QnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByaXZhdGUgaW5kZXhDb3VudDogbnVtYmVyO1xuXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50OiBHZW9tZXRyeSxcbiAgICB2ZXJ0aWNlczogVmVjM1tdLFxuICAgIGluZGljZXM6IG51bWJlcltdLFxuICAgIHN1YlNlbGVjdGlvbjogYm9vbGVhbltdXG4gICkge1xuXG4gICAgc3VwZXIocGFyZW50LCBzdWJTZWxlY3Rpb24pO1xuXG4gICAgLy8gdmVydGV4XG4gICAgY29uc3QgdmVydGV4TGlzdDogbnVtYmVyW10gPSBbXVxuICAgIGZvciAoY29uc3QgdmVydCBvZiB2ZXJ0aWNlcykge1xuICAgICAgdmVydGV4TGlzdC5wdXNoKC4uLnZlcnQsIDEpO1xuICAgIH1cbiAgICBjb25zdCB2ZXJ0ZXhBcnJheTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhMaXN0KTtcbiAgICB0aGlzLnZlcnRleEJ1ZmZlciA9IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcInZlcnRleCBidWZmZXJcIixcbiAgICAgIHNpemU6IHZlcnRleEFycmF5LmJ5dGVMZW5ndGgsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnZlcnRleEJ1ZmZlciwgMCwgdmVydGV4QXJyYXkpO1xuXG4gICAgLy8gaW5kZXhcbiAgICBjb25zdCBpbmRleEFycmF5OiBVaW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheShpbmRpY2VzKTtcbiAgICB0aGlzLmluZGV4QnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwiaW5kZXggYnVmZmVyXCIsXG4gICAgICBzaXplOiBpbmRleEFycmF5LmJ5dGVMZW5ndGgsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuSU5ERVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIsIDAsIGluZGV4QXJyYXkpO1xuICAgIHRoaXMuaW5kZXhDb3VudCA9IGluZGljZXMubGVuZ3RoO1xuXG4gIH1cblxuICB1cGRhdGVWZXJ0cyh2ZXJ0czogVmVjM1tdKSB7XG4gICAgY29uc3QgdmVydGV4TGlzdDogbnVtYmVyW10gPSBbXVxuICAgIGZvciAoY29uc3QgdmVydCBvZiB2ZXJ0cykge1xuICAgICAgdmVydGV4TGlzdC5wdXNoKC4uLnZlcnQsIDEpO1xuICAgIH1cbiAgICBjb25zdCB2ZXJ0ZXhBcnJheTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhMaXN0KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMudmVydGV4QnVmZmVyLCAwLCB2ZXJ0ZXhBcnJheSk7XG4gIH1cblxuICBwdWJsaWMgZHJhdyhwYXNzOiBHUFVSZW5kZXJQYXNzRW5jb2Rlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhcmVudC5pc0hpZGRlbigpKSByZXR1cm47XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgdGhpcy5iaW5kR3JvdXApO1xuICAgIHBhc3Muc2V0VmVydGV4QnVmZmVyKDAsIHRoaXMudmVydGV4QnVmZmVyKTtcbiAgICBwYXNzLnNldEluZGV4QnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIsIFwidWludDMyXCIpO1xuICAgIHBhc3MuZHJhd0luZGV4ZWQodGhpcy5pbmRleENvdW50KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0VmVydGV4QnVmZmVyTGF5b3V0KCk6IEdQVVZlcnRleEJ1ZmZlckxheW91dCB7XG4gICAgcmV0dXJuIFJlbmRlckxpbmVzLnZlcnRleEJ1ZmZlckxheW91dDtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/renderLines.ts\n");

/***/ }),

/***/ "./src/render/renderMesh.ts":
/*!**********************************!*\
  !*** ./src/render/renderMesh.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderMesh: () => (/* binding */ RenderMesh)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _renderable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderable */ \"./src/render/renderable.ts\");\n\n\nclass RenderMesh extends _renderable__WEBPACK_IMPORTED_MODULE_1__.Renderable {\n    constructor(parent, vertices, normals, indices, subSelection, constantScreenSize = false) {\n        super(parent, subSelection, constantScreenSize);\n        //vertex\n        const vertexList = [];\n        for (let i = 0; i < vertices.length; i++) {\n            vertexList.push(...vertices[i], 1, ...normals[i], 0);\n        }\n        const vertexArray = new Float32Array(vertexList);\n        this.vertexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"vertex buffer\",\n            size: vertexArray.byteLength,\n            usage: GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.vertexBuffer, 0, vertexArray);\n        //index\n        const indexArray = new Uint32Array(indices);\n        this.indexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"index buffer\",\n            size: indexArray.byteLength,\n            usage: GPUBufferUsage.INDEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.indexBuffer, 0, indexArray);\n        this.indexCount = indices.length;\n    }\n    isOverlay() {\n        return this.parent.isOverlay();\n    }\n    draw(pass) {\n        if (this.parent.isHidden())\n            return;\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.setIndexBuffer(this.indexBuffer, \"uint32\");\n        pass.drawIndexed(this.indexCount);\n    }\n    static getVertexBufferLayout() {\n        return this.vertexBufferLayout;\n    }\n}\nRenderMesh.vertexBufferLayout = {\n    arrayStride: 32,\n    attributes: [\n        {\n            format: \"float32x4\",\n            offset: 0,\n            shaderLocation: 0,\n        }, {\n            format: \"float32x4\",\n            offset: 16,\n            shaderLocation: 1,\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxFQUFFLENBQUM7WUFDVCxjQUFjLEVBQUUsQ0FBQztTQUNsQixFQUFFO1lBQ0QsTUFBTSxFQUFFLFdBQVc7WUFDbkIsTUFBTSxFQUFFLEVBQUU7WUFDVixjQUFjLEVBQUUsQ0FBQztTQUNsQjtLQUNGO0NBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9yZW5kZXJNZXNoLnRzPzRmMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBSZW5kZXJhYmxlIH0gZnJvbSBcIi4vcmVuZGVyYWJsZVwiO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyTWVzaCBleHRlbmRzIFJlbmRlcmFibGUge1xuXG4gIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IHZlcnRleEJ1ZmZlckxheW91dDogR1BVVmVydGV4QnVmZmVyTGF5b3V0ID0ge1xuICAgIGFycmF5U3RyaWRlOiAzMixcbiAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICB7IC8vIGxvY2F0aW9uXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDMyeDRcIixcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBzaGFkZXJMb2NhdGlvbjogMCxcbiAgICAgIH0sIHsgLy8gbm9ybWFsXG4gICAgICAgIGZvcm1hdDogXCJmbG9hdDMyeDRcIixcbiAgICAgICAgb2Zmc2V0OiAxNixcbiAgICAgICAgc2hhZGVyTG9jYXRpb246IDEsXG4gICAgICB9XG4gICAgXVxuICB9O1xuXG4gIHByb3RlY3RlZCB2ZXJ0ZXhCdWZmZXI6IEdQVUJ1ZmZlcjtcbiAgcHJvdGVjdGVkIGluZGV4QnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByb3RlY3RlZCBpbmRleENvdW50OiBudW1iZXI7XG5cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwYXJlbnQ6IEdlb21ldHJ5LFxuICAgIHZlcnRpY2VzOiBWZWMzW10sXG4gICAgbm9ybWFsczogVmVjM1tdLFxuICAgIGluZGljZXM6IG51bWJlcltdLFxuICAgIHN1YlNlbGVjdGlvbjogYm9vbGVhbltdLFxuICAgIGNvbnN0YW50U2NyZWVuU2l6ZTogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIHN1cGVyKHBhcmVudCwgc3ViU2VsZWN0aW9uLCBjb25zdGFudFNjcmVlblNpemUpO1xuXG4gICAgLy92ZXJ0ZXhcbiAgICBjb25zdCB2ZXJ0ZXhMaXN0OiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZlcnRleExpc3QucHVzaCguLi52ZXJ0aWNlc1tpXSwgMSwgLi4ubm9ybWFsc1tpXSwgMCk7XG4gICAgfVxuICAgIGNvbnN0IHZlcnRleEFycmF5OiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRleExpc3QpO1xuICAgIHRoaXMudmVydGV4QnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwidmVydGV4IGJ1ZmZlclwiLFxuICAgICAgc2l6ZTogdmVydGV4QXJyYXkuYnl0ZUxlbmd0aCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5WRVJURVggfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMudmVydGV4QnVmZmVyLCAwLCB2ZXJ0ZXhBcnJheSk7XG5cbiAgICAvL2luZGV4XG4gICAgY29uc3QgaW5kZXhBcnJheTogVWludDMyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoaW5kaWNlcyk7XG4gICAgdGhpcy5pbmRleEJ1ZmZlciA9IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcImluZGV4IGJ1ZmZlclwiLFxuICAgICAgc2l6ZTogaW5kZXhBcnJheS5ieXRlTGVuZ3RoLFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLklOREVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLmluZGV4QnVmZmVyLCAwLCBpbmRleEFycmF5KTtcbiAgICB0aGlzLmluZGV4Q291bnQgPSBpbmRpY2VzLmxlbmd0aDtcblxuICB9XG5cbiAgcHVibGljIGlzT3ZlcmxheSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuaXNPdmVybGF5KCk7XG4gIH1cblxuICBwdWJsaWMgZHJhdyhwYXNzOiBHUFVSZW5kZXJQYXNzRW5jb2Rlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhcmVudC5pc0hpZGRlbigpKSByZXR1cm47XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgdGhpcy5iaW5kR3JvdXApO1xuICAgIHBhc3Muc2V0VmVydGV4QnVmZmVyKDAsIHRoaXMudmVydGV4QnVmZmVyKTtcbiAgICBwYXNzLnNldEluZGV4QnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIsIFwidWludDMyXCIpO1xuICAgIHBhc3MuZHJhd0luZGV4ZWQodGhpcy5pbmRleENvdW50KTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRWZXJ0ZXhCdWZmZXJMYXlvdXQoKTogR1BVVmVydGV4QnVmZmVyTGF5b3V0IHtcbiAgICByZXR1cm4gdGhpcy52ZXJ0ZXhCdWZmZXJMYXlvdXQ7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/renderMesh.ts\n");

/***/ }),

/***/ "./src/render/renderPoints.ts":
/*!************************************!*\
  !*** ./src/render/renderPoints.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderPoints: () => (/* binding */ RenderPoints)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _renderable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderable */ \"./src/render/renderable.ts\");\n\n\nclass RenderPoints extends _renderable__WEBPACK_IMPORTED_MODULE_1__.Renderable {\n    constructor(parent, points, subSelection) {\n        super(parent, subSelection);\n        // vertex\n        const verts = [];\n        for (let i = 0; i < points.length; i++)\n            verts.push(...points[i], 1);\n        const vertexArray = new Float32Array(verts);\n        this.vertexBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"points vertex buffer\",\n            size: vertexArray.byteLength,\n            usage: GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.vertexBuffer, 0, vertexArray);\n        this.vertexCount = vertexArray.length / 4;\n        this.update();\n    }\n    draw(pass) {\n        if (this.parent.isHidden())\n            return;\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.draw(this.vertexCount);\n    }\n    static getVertexBufferLayout() {\n        return RenderPoints.vertexBufferLayout;\n    }\n}\nRenderPoints.vertexBufferLayout = {\n    arrayStride: 16,\n    attributes: [\n        {\n            format: \"float32x4\",\n            offset: 0,\n            shaderLocation: 0,\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3JlbmRlclBvaW50cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDaUM7QUFJUztBQUVuQyxNQUFNLFlBQWEsU0FBUSxtREFBVTtJQWdCMUMsWUFDRSxNQUFnQixFQUNoQixNQUFjLEVBQ2QsWUFBdUI7UUFHdkIsS0FBSyxDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsQ0FBQztRQUU1QixTQUFTO1FBQ1QsTUFBTSxLQUFLLEdBQWEsRUFBRSxDQUFDO1FBQzNCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRTtZQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDcEUsTUFBTSxXQUFXLEdBQWlCLElBQUksWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxZQUFZLEdBQUcsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxZQUFZLENBQUM7WUFDbEUsS0FBSyxFQUFFLHNCQUFzQjtZQUM3QixJQUFJLEVBQUUsV0FBVyxDQUFDLFVBQVU7WUFDNUIsS0FBSyxFQUFFLGNBQWMsQ0FBQyxNQUFNLEdBQUcsY0FBYyxDQUFDLFFBQVE7U0FDdkQsQ0FBQyxDQUFDO1FBQ0gsMENBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3hGLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFFMUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFHTSxJQUFJLENBQUMsSUFBMEI7UUFDcEMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTtZQUFFLE9BQU87UUFDbkMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRU0sTUFBTSxDQUFDLHFCQUFxQjtRQUNqQyxPQUFPLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQztJQUN6QyxDQUFDOztBQS9DdUIsK0JBQWtCLEdBQTBCO0lBQ2xFLFdBQVcsRUFBRSxFQUFFO0lBQ2YsVUFBVSxFQUFFO1FBQ1Y7WUFDRSxNQUFNLEVBQUUsV0FBVztZQUNuQixNQUFNLEVBQUUsQ0FBQztZQUNULGNBQWMsRUFBRSxDQUFDO1NBQ2xCO0tBQ0Y7Q0FDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3JlbmRlclBvaW50cy50cz9kMWY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdDQsIG1hdDQsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIlxuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBzd2l6emxlWVogfSBmcm9tIFwiLi4vdXRpbHMvbWF0aFwiO1xuaW1wb3J0IHsgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklULCBIT1ZFUl9CSVQsIFNFTEVDVEVEX0JJVCB9IGZyb20gXCIuL2ZsYWdzXCI7XG5pbXBvcnQgeyBSZW5kZXJhYmxlIH0gZnJvbSBcIi4vcmVuZGVyYWJsZVwiO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyUG9pbnRzIGV4dGVuZHMgUmVuZGVyYWJsZSB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdmVydGV4QnVmZmVyTGF5b3V0OiBHUFVWZXJ0ZXhCdWZmZXJMYXlvdXQgPSB7XG4gICAgYXJyYXlTdHJpZGU6IDE2LFxuICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgIHsgLy8gbG9jYXRpb25cbiAgICAgICAgZm9ybWF0OiBcImZsb2F0MzJ4NFwiLFxuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLFxuICAgICAgfVxuICAgIF1cbiAgfTtcblxuICBwcml2YXRlIHZlcnRleEJ1ZmZlcjogR1BVQnVmZmVyO1xuICBwcml2YXRlIHZlcnRleENvdW50OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50OiBHZW9tZXRyeSxcbiAgICBwb2ludHM6IFZlYzNbXSxcbiAgICBzdWJTZWxlY3Rpb246IGJvb2xlYW5bXVxuICApIHtcblxuICAgIHN1cGVyKHBhcmVudCwgc3ViU2VsZWN0aW9uKTtcblxuICAgIC8vIHZlcnRleFxuICAgIGNvbnN0IHZlcnRzOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB2ZXJ0cy5wdXNoKC4uLnBvaW50c1tpXSwgMSk7XG4gICAgY29uc3QgdmVydGV4QXJyYXk6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkodmVydHMpO1xuICAgIHRoaXMudmVydGV4QnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwicG9pbnRzIHZlcnRleCBidWZmZXJcIixcbiAgICAgIHNpemU6IHZlcnRleEFycmF5LmJ5dGVMZW5ndGgsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVkVSVEVYIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLnZlcnRleEJ1ZmZlciwgMCwgdmVydGV4QXJyYXkpO1xuICAgIHRoaXMudmVydGV4Q291bnQgPSB2ZXJ0ZXhBcnJheS5sZW5ndGggLyA0O1xuXG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG5cbiAgcHVibGljIGRyYXcocGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wYXJlbnQuaXNIaWRkZW4oKSkgcmV0dXJuO1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDAsIHRoaXMuYmluZEdyb3VwKTtcbiAgICBwYXNzLnNldFZlcnRleEJ1ZmZlcigwLCB0aGlzLnZlcnRleEJ1ZmZlcik7XG4gICAgcGFzcy5kcmF3KHRoaXMudmVydGV4Q291bnQpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRWZXJ0ZXhCdWZmZXJMYXlvdXQoKTogR1BVVmVydGV4QnVmZmVyTGF5b3V0IHtcbiAgICByZXR1cm4gUmVuZGVyUG9pbnRzLnZlcnRleEJ1ZmZlckxheW91dDtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/renderPoints.ts\n");

/***/ }),

/***/ "./src/render/renderable.ts":
/*!**********************************!*\
  !*** ./src/render/renderable.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Renderable: () => (/* binding */ Renderable)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/math */ \"./src/utils/math.ts\");\n/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./flags */ \"./src/render/flags.ts\");\n\n\n\n\nclass Renderable {\n    constructor(parent, subSelection, constantScreenSize = false) {\n        this.parent = parent;\n        this.constantScreenSize = constantScreenSize;\n        //model\n        this.modelBufferPoints = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"model points\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.modelBufferNormals = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"model normals\",\n            size: 64,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        // id\n        this.objectIDBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"id buffer\",\n            size: 4,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        const objectIDArray = new Int32Array([this.parent.getID()]);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.objectIDBuffer, 0, objectIDArray);\n        //flags\n        this.flagsBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"renderable flag buffer\",\n            size: 4,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        this.flags = new Int32Array([0]);\n        if (this.constantScreenSize)\n            this.flags[0] |= _flags__WEBPACK_IMPORTED_MODULE_2__.CONSTANT_SCREEN_SIZE_BIT;\n        this.subSelectionBuffer = null;\n        this.updateSubSelection(subSelection);\n    }\n    setConstantScreenSpaceSize(on) {\n        if (on) {\n            this.flags[0] |= _flags__WEBPACK_IMPORTED_MODULE_2__.CONSTANT_SCREEN_SIZE_BIT;\n        }\n        else {\n            this.flags[0] &= ~_flags__WEBPACK_IMPORTED_MODULE_2__.CONSTANT_SCREEN_SIZE_BIT;\n        }\n    }\n    update() {\n        this.updateFlags();\n        this.updateModel();\n        this.updateBindGroup();\n    }\n    updateSubSelection(subSelection) {\n        const subSelectionList = [];\n        for (let i = 0; i < subSelection.length; i++) {\n            if (i % 32 === 0) {\n                subSelectionList.push(0);\n            }\n            if (subSelection[i]) {\n                subSelectionList[Math.floor(i / 32)] |= 1 << (i % 32);\n            }\n        }\n        const subSelectionArray = new Uint32Array(subSelectionList);\n        if (this.subSelectionBuffer === null) {\n            this.subSelectionBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n                label: \"sub selection buffer\",\n                size: subSelectionArray.byteLength,\n                usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST,\n            });\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.subSelectionBuffer, 0, subSelectionArray);\n    }\n    updateFlags() {\n        if (this.parent.isSelected())\n            this.flags[0] |= _flags__WEBPACK_IMPORTED_MODULE_2__.SELECTED_BIT;\n        else\n            this.flags[0] &= ~_flags__WEBPACK_IMPORTED_MODULE_2__.SELECTED_BIT;\n        if (this.parent.isHovered())\n            this.flags[0] |= _flags__WEBPACK_IMPORTED_MODULE_2__.HOVER_BIT;\n        else\n            this.flags[0] &= ~_flags__WEBPACK_IMPORTED_MODULE_2__.HOVER_BIT;\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.flagsBuffer, 0, this.flags);\n    }\n    updateModel() {\n        const modelForPoints = this.parent.getModelRecursive();\n        const modelForNormals = wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.transpose(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.mat4.inverse(modelForPoints));\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue\n            .writeBuffer(this.modelBufferPoints, 0, (0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.swizzleYZ)(modelForPoints));\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue\n            .writeBuffer(this.modelBufferNormals, 0, (0,_utils_math__WEBPACK_IMPORTED_MODULE_1__.swizzleYZ)(modelForNormals));\n    }\n    updateBindGroup() {\n        this.bindGroup = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBindGroup({\n            label: \"renderable bind group\",\n            layout: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getBindGroupLayout(),\n            entries: [\n                {\n                    binding: 0,\n                    resource: { buffer: this.modelBufferPoints },\n                }, {\n                    binding: 1,\n                    resource: { buffer: this.modelBufferNormals },\n                }, {\n                    binding: 2,\n                    resource: { buffer: this.parent.getColorBuffer() },\n                }, {\n                    binding: 3,\n                    resource: { buffer: this.flagsBuffer }\n                }, {\n                    binding: 4,\n                    resource: { buffer: this.objectIDBuffer }\n                }, {\n                    binding: 5,\n                    resource: { buffer: this.subSelectionBuffer }\n                }\n            ]\n        });\n    }\n    getParent() {\n        return this.parent;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1YsUUFBUSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtpQkFDN0MsRUFBRTtvQkFDRCxPQUFPLEVBQUUsQ0FBQztvQkFDVixRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFO2lCQUM5QyxFQUFFO29CQUNELE9BQU8sRUFBRSxDQUFDO29CQUNWLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRSxFQUFFO2lCQUNuRCxFQUFFO29CQUNELE9BQU8sRUFBRSxDQUFDO29CQUNWLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFO2lCQUN2QyxFQUFFO29CQUNELE9BQU8sRUFBRSxDQUFDO29CQUNWLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFO2lCQUMxQyxFQUFFO29CQUNELE9BQU8sRUFBRSxDQUFDO29CQUNWLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsa0JBQW1CLEVBQUU7aUJBQy9DO2FBQ0Y7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU0sU0FBUztRQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvcmVuZGVyYWJsZS50cz9kMTVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdDQsIE1hdDQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiO1xuaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZ2VvbWV0cnlcIjtcbmltcG9ydCB7IHN3aXp6bGVZWiB9IGZyb20gXCIuLi91dGlscy9tYXRoXCI7XG5pbXBvcnQgeyBDT05TVEFOVF9TQ1JFRU5fU0laRV9CSVQsIEhPVkVSX0JJVCwgU0VMRUNURURfQklUIH0gZnJvbSBcIi4vZmxhZ3NcIjtcblxuXG5cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJlbmRlcmFibGUge1xuXG4gIHByb3RlY3RlZCBmbGFnczogSW50MzJBcnJheTtcbiAgcHJvdGVjdGVkIG9iamVjdElEQnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByb3RlY3RlZCBmbGFnc0J1ZmZlcjogR1BVQnVmZmVyO1xuICBwcm90ZWN0ZWQgbW9kZWxCdWZmZXJQb2ludHM6IEdQVUJ1ZmZlcjtcbiAgcHJvdGVjdGVkIG1vZGVsQnVmZmVyTm9ybWFsczogR1BVQnVmZmVyO1xuICBwcm90ZWN0ZWQgYmluZEdyb3VwITogR1BVQmluZEdyb3VwO1xuICBwcm90ZWN0ZWQgc3ViU2VsZWN0aW9uQnVmZmVyOiBHUFVCdWZmZXIgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBwYXJlbnQ6IEdlb21ldHJ5LFxuICAgIHN1YlNlbGVjdGlvbjogYm9vbGVhbltdLFxuICAgIHByb3RlY3RlZCBjb25zdGFudFNjcmVlblNpemU6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcblxuICAgIC8vbW9kZWxcbiAgICB0aGlzLm1vZGVsQnVmZmVyUG9pbnRzID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwibW9kZWwgcG9pbnRzXCIsXG4gICAgICBzaXplOiA2NCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG4gICAgdGhpcy5tb2RlbEJ1ZmZlck5vcm1hbHMgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBsYWJlbDogXCJtb2RlbCBub3JtYWxzXCIsXG4gICAgICBzaXplOiA2NCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgfSk7XG5cblxuXG4gICAgLy8gaWRcbiAgICB0aGlzLm9iamVjdElEQnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwiaWQgYnVmZmVyXCIsXG4gICAgICBzaXplOiA0LFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0gfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICBjb25zdCBvYmplY3RJREFycmF5OiBJbnQzMkFycmF5ID0gbmV3IEludDMyQXJyYXkoW3RoaXMucGFyZW50LmdldElEKCldKTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMub2JqZWN0SURCdWZmZXIsIDAsIG9iamVjdElEQXJyYXkpO1xuXG5cbiAgICAvL2ZsYWdzXG4gICAgdGhpcy5mbGFnc0J1ZmZlciA9IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkuY3JlYXRlQnVmZmVyKHtcbiAgICAgIGxhYmVsOiBcInJlbmRlcmFibGUgZmxhZyBidWZmZXJcIixcbiAgICAgIHNpemU6IDQsXG4gICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuVU5JRk9STSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgIH0pXG4gICAgdGhpcy5mbGFncyA9IG5ldyBJbnQzMkFycmF5KFswXSk7XG4gICAgaWYgKHRoaXMuY29uc3RhbnRTY3JlZW5TaXplKSB0aGlzLmZsYWdzWzBdIHw9IENPTlNUQU5UX1NDUkVFTl9TSVpFX0JJVDtcblxuXG4gICAgdGhpcy5zdWJTZWxlY3Rpb25CdWZmZXIgPSBudWxsO1xuICAgIHRoaXMudXBkYXRlU3ViU2VsZWN0aW9uKHN1YlNlbGVjdGlvbik7XG5cbiAgfVxuXG4gIHB1YmxpYyBzZXRDb25zdGFudFNjcmVlblNwYWNlU2l6ZShvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmIChvbikge1xuICAgICAgdGhpcy5mbGFnc1swXSB8PSBDT05TVEFOVF9TQ1JFRU5fU0laRV9CSVQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmxhZ3NbMF0gJj0gfkNPTlNUQU5UX1NDUkVFTl9TSVpFX0JJVDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlRmxhZ3MoKTtcbiAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gICAgdGhpcy51cGRhdGVCaW5kR3JvdXAoKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVTdWJTZWxlY3Rpb24oc3ViU2VsZWN0aW9uOiBib29sZWFuW10pOiB2b2lkIHtcblxuICAgIGNvbnN0IHN1YlNlbGVjdGlvbkxpc3Q6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWJTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpICUgMzIgPT09IDApIHsgc3ViU2VsZWN0aW9uTGlzdC5wdXNoKDApOyB9XG4gICAgICBpZiAoc3ViU2VsZWN0aW9uW2ldKSB7IHN1YlNlbGVjdGlvbkxpc3RbTWF0aC5mbG9vcihpIC8gMzIpXSB8PSAxIDw8IChpICUgMzIpOyB9XG4gICAgfVxuICAgIGNvbnN0IHN1YlNlbGVjdGlvbkFycmF5OiBVaW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheShzdWJTZWxlY3Rpb25MaXN0KTtcbiAgICBpZiAodGhpcy5zdWJTZWxlY3Rpb25CdWZmZXIgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuc3ViU2VsZWN0aW9uQnVmZmVyID0gSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5jcmVhdGVCdWZmZXIoe1xuICAgICAgICBsYWJlbDogXCJzdWIgc2VsZWN0aW9uIGJ1ZmZlclwiLFxuICAgICAgICBzaXplOiBzdWJTZWxlY3Rpb25BcnJheS5ieXRlTGVuZ3RoLFxuICAgICAgICB1c2FnZTogR1BVQnVmZmVyVXNhZ2UuU1RPUkFHRSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgICAgfSk7XG4gICAgfVxuICAgIElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0RGV2aWNlKCkucXVldWUud3JpdGVCdWZmZXIodGhpcy5zdWJTZWxlY3Rpb25CdWZmZXIsIDAsIHN1YlNlbGVjdGlvbkFycmF5KTtcblxuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZUZsYWdzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhcmVudC5pc1NlbGVjdGVkKCkpIHRoaXMuZmxhZ3NbMF0gfD0gU0VMRUNURURfQklUO1xuICAgIGVsc2UgdGhpcy5mbGFnc1swXSAmPSB+U0VMRUNURURfQklUO1xuICAgIGlmICh0aGlzLnBhcmVudC5pc0hvdmVyZWQoKSkgdGhpcy5mbGFnc1swXSB8PSBIT1ZFUl9CSVQ7XG4gICAgZWxzZSB0aGlzLmZsYWdzWzBdICY9IH5IT1ZFUl9CSVQ7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZS53cml0ZUJ1ZmZlcih0aGlzLmZsYWdzQnVmZmVyLCAwLCB0aGlzLmZsYWdzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVNb2RlbCgpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RlbEZvclBvaW50czogTWF0NCA9IHRoaXMucGFyZW50LmdldE1vZGVsUmVjdXJzaXZlKCk7XG4gICAgY29uc3QgbW9kZWxGb3JOb3JtYWxzOiBNYXQ0ID0gbWF0NC50cmFuc3Bvc2UobWF0NC5pbnZlcnNlKG1vZGVsRm9yUG9pbnRzKSk7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZVxuICAgICAgLndyaXRlQnVmZmVyKHRoaXMubW9kZWxCdWZmZXJQb2ludHMsIDAsIDxGbG9hdDMyQXJyYXk+c3dpenpsZVlaKG1vZGVsRm9yUG9pbnRzKSk7XG4gICAgSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXREZXZpY2UoKS5xdWV1ZVxuICAgICAgLndyaXRlQnVmZmVyKHRoaXMubW9kZWxCdWZmZXJOb3JtYWxzLCAwLCA8RmxvYXQzMkFycmF5PnN3aXp6bGVZWihtb2RlbEZvck5vcm1hbHMpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVCaW5kR3JvdXAoKTogdm9pZCB7XG4gICAgdGhpcy5iaW5kR3JvdXAgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICBsYWJlbDogXCJyZW5kZXJhYmxlIGJpbmQgZ3JvdXBcIixcbiAgICAgIGxheW91dDogSU5TVEFOQ0UuZ2V0UmVuZGVyZXIoKS5nZXRCaW5kR3JvdXBMYXlvdXQoKSxcbiAgICAgIGVudHJpZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJpbmRpbmc6IDAsXG4gICAgICAgICAgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLm1vZGVsQnVmZmVyUG9pbnRzIH0sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAxLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5tb2RlbEJ1ZmZlck5vcm1hbHMgfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgIGJpbmRpbmc6IDIsXG4gICAgICAgICAgcmVzb3VyY2U6IHsgYnVmZmVyOiB0aGlzLnBhcmVudC5nZXRDb2xvckJ1ZmZlcigpIH0sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAzLFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5mbGFnc0J1ZmZlciB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiA0LFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5vYmplY3RJREJ1ZmZlciB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiA1LFxuICAgICAgICAgIHJlc291cmNlOiB7IGJ1ZmZlcjogdGhpcy5zdWJTZWxlY3Rpb25CdWZmZXIhIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldFBhcmVudCgpOiBHZW9tZXRyeSB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50O1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renderable.ts\n");

/***/ }),

/***/ "./src/render/renderer.ts":
/*!********************************!*\
  !*** ./src/render/renderer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Renderer: () => (/* binding */ Renderer)\n/* harmony export */ });\n/* harmony import */ var _shaders_triangleShader_wgsl__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shaders/triangleShader.wgsl */ \"./src/render/shaders/triangleShader.wgsl\");\n/* harmony import */ var _shaders_lineShader_wgsl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shaders/lineShader.wgsl */ \"./src/render/shaders/lineShader.wgsl\");\n/* harmony import */ var _shaders_pointShader_wgsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/pointShader.wgsl */ \"./src/render/shaders/pointShader.wgsl\");\n/* harmony import */ var _shaders_instancedTriangleShader_wgsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/instancedTriangleShader.wgsl */ \"./src/render/shaders/instancedTriangleShader.wgsl\");\n/* harmony import */ var _shaders_overlayMeshShader_wgsl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shaders/overlayMeshShader.wgsl */ \"./src/render/shaders/overlayMeshShader.wgsl\");\n/* harmony import */ var _shaders_idShader_wgsl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shaders/idShader.wgsl */ \"./src/render/shaders/idShader.wgsl\");\n/* harmony import */ var _pipeline__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pipeline */ \"./src/render/pipeline.ts\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _globalUniforms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./globalUniforms */ \"./src/render/globalUniforms.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\n\n\n\n\n\n\n\nconst compatibilityCheck = document.getElementById(\"compatibility-check\");\nclass Renderer {\n    constructor() {\n        this.clearColor = [0.1, 0.1, 0.1, 1.0];\n    }\n    getDevice() {\n        return this.device;\n    }\n    getBindGroupLayout() {\n        return this.bindGroupLayout;\n    }\n    getBindGroupLayoutInstanced() {\n        return this.bindGroupLayoutInstanced;\n    }\n    setClearColor(color) {\n        this.clearColor = color;\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.createDevice();\n            this.createResources();\n            this.createPipelines();\n            this.updateScreenSize();\n        });\n    }\n    createDevice() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!navigator.gpu) {\n                alert(\"Your browser / computer does not support WebGPU.\");\n                compatibilityCheck.innerText = \"This browser does not support WebGPU. Check here for a list of supported browsers https://caniuse.com/webgpu\";\n                return;\n            }\n            var adapter;\n            try {\n                adapter = yield navigator.gpu.requestAdapter();\n            }\n            catch (error) {\n                console.log(error);\n            }\n            if (adapter == null) {\n                alert(\"Your browser / computer does not support WebGPU.\");\n                compatibilityCheck.innerText = \"No valid gpu adapter. Check here for a list of supported browsers https://caniuse.com/webgpu\";\n                return;\n            }\n            this.device = (yield adapter.requestDevice());\n            this.canvas = document.getElementById(\"screen\");\n            this.context = this.canvas.getContext(\"webgpu\");\n            this.canvasFormat = navigator.gpu.getPreferredCanvasFormat();\n            this.context.configure({\n                device: this.device,\n                format: this.canvasFormat,\n            });\n        });\n    }\n    getIdAtPixel(x, y) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // window is mirrored\n            x = window.innerWidth - x;\n            // TODO: factor buffer out\n            const idBuffer = this.device.createBuffer({\n                label: \"id dst buffer\",\n                size: 4,\n                usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ\n            });\n            const encoder = this.device.createCommandEncoder();\n            encoder.copyTextureToBuffer({ texture: this.idTexture, mipLevel: 0, origin: [x, y, 0] }, { buffer: idBuffer, bytesPerRow: 256, rowsPerImage: 1 }, [1, 1, 1]);\n            this.device.queue.submit([encoder.finish()]);\n            yield this.device.queue.onSubmittedWorkDone();\n            yield idBuffer.mapAsync(GPUMapMode.READ);\n            const data = new Int32Array(idBuffer.getMappedRange());\n            return data[0];\n        });\n    }\n    createResources() {\n        this.triangleShaderModule = this.device.createShaderModule({\n            label: \"triangle shader module\",\n            code: _shaders_triangleShader_wgsl__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\n        });\n        this.lineShaderModule = this.device.createShaderModule({\n            label: \"line shader module\",\n            code: _shaders_lineShader_wgsl__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n        });\n        this.pointShaderModule = this.device.createShaderModule({\n            label: \"point shader module\",\n            code: _shaders_pointShader_wgsl__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n        });\n        this.instancedTriangleShaderModule = this.device.createShaderModule({\n            label: \"instanced triangle shader module\",\n            code: _shaders_instancedTriangleShader_wgsl__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n        });\n        this.overlayMeshShaderModule = this.device.createShaderModule({\n            label: \"overlay mesh shader module\",\n            code: _shaders_overlayMeshShader_wgsl__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        });\n        this.idShaderModule = this.device.createShaderModule({\n            label: \"id shader module\",\n            code: _shaders_idShader_wgsl__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n        });\n        this.bindGroupLayout = this.device.createBindGroupLayout({\n            label: \"bind group layout\",\n            entries: [\n                {\n                    binding: 0,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {}\n                }, {\n                    binding: 1,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: {},\n                }, {\n                    binding: 2,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {},\n                }, {\n                    binding: 3,\n                    visibility: GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT,\n                    buffer: {},\n                }, {\n                    binding: 4,\n                    visibility: GPUShaderStage.FRAGMENT,\n                    buffer: {},\n                }, {\n                    binding: 5,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: { type: \"read-only-storage\" },\n                }\n            ]\n        });\n        // TODO: factor\n        this.bindGroupLayoutInstanced = this.device.createBindGroupLayout({\n            label: \"bind group layout instanced\",\n            entries: [\n                {\n                    binding: 0,\n                    visibility: GPUShaderStage.VERTEX,\n                    buffer: { type: \"read-only-storage\" },\n                }\n            ]\n        });\n        this.globalUniforms = new _globalUniforms__WEBPACK_IMPORTED_MODULE_8__.GlobalUniforms(this.device);\n        this.updateScreenSize();\n    }\n    createPipelines() {\n        this.trianglePipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_6__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout()], this.triangleShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_6__.PipelinePrimitive.Triangle, 4);\n        this.linePipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_6__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout()], this.lineShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_6__.PipelinePrimitive.Line, 4);\n        this.pointPipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_6__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout()], this.pointShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_6__.PipelinePrimitive.Point, 4);\n        this.instancedTrianglePipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_6__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout(), this.bindGroupLayoutInstanced], this.instancedTriangleShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_6__.PipelinePrimitive.Triangle, 4);\n        this.overlayMeshPipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_6__.Pipeline(this.device, this.canvasFormat, [this.bindGroupLayout, this.globalUniforms.getLayout()], this.overlayMeshShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_6__.PipelinePrimitive.Triangle, 4);\n        this.idRasterPipeline = new _pipeline__WEBPACK_IMPORTED_MODULE_6__.Pipeline(this.device, \"r32sint\", [this.bindGroupLayout, this.globalUniforms.getLayout()], this.idShaderModule, _pipeline__WEBPACK_IMPORTED_MODULE_6__.PipelinePrimitive.Triangle, 1);\n    }\n    updateScreenSize() {\n        this.canvas.width = window.innerWidth;\n        this.canvas.height = window.innerHeight;\n        this.depthTextureSuperSample = this.device.createTexture({\n            size: [this.canvas.width, this.canvas.height],\n            sampleCount: 4,\n            format: \"depth24plus\",\n            usage: GPUTextureUsage.RENDER_ATTACHMENT\n        });\n        this.renderTarget = this.device.createTexture({\n            size: [this.canvas.width, this.canvas.height],\n            sampleCount: 4,\n            format: this.canvasFormat,\n            usage: GPUTextureUsage.RENDER_ATTACHMENT\n        });\n        this.idTexture = this.device.createTexture({\n            size: [this.canvas.width, this.canvas.height],\n            sampleCount: 1,\n            format: \"r32sint\",\n            usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC\n        });\n        this.depthTexture = this.device.createTexture({\n            size: [this.canvas.width, this.canvas.height],\n            sampleCount: 1,\n            format: \"depth24plus\",\n            usage: GPUTextureUsage.RENDER_ATTACHMENT\n        });\n    }\n    render(scene) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // TODO: Factor this stuff out of main loop\n            this.globalUniforms.tick();\n            var drawCallCounter = 0;\n            const encoder = this.device.createCommandEncoder();\n            // mainPass  ================================\n            const mainPass = encoder.beginRenderPass({\n                label: \"main pass\",\n                colorAttachments: [\n                    {\n                        view: this.renderTarget.createView(),\n                        resolveTarget: this.context.getCurrentTexture().createView(),\n                        loadOp: \"clear\",\n                        clearValue: this.clearColor,\n                        storeOp: \"store\",\n                    },\n                ],\n                depthStencilAttachment: {\n                    view: this.depthTextureSuperSample.createView(),\n                    depthClearValue: 1.0,\n                    depthLoadOp: \"clear\",\n                    depthStoreOp: \"store\"\n                }\n            });\n            this.globalUniforms.bind(mainPass);\n            mainPass.setPipeline(this.trianglePipeline.get());\n            for (let mesh of scene.getAllMeshes()) {\n                if (!mesh.isOverlay()) {\n                    mesh.draw(mainPass);\n                    drawCallCounter++;\n                }\n            }\n            ;\n            mainPass.setPipeline(this.linePipeline.get());\n            for (let lines of scene.getAllLines()) {\n                lines.draw(mainPass);\n                drawCallCounter++;\n            }\n            ;\n            mainPass.setPipeline(this.pointPipeline.get());\n            for (let points of scene.getAllPoints()) {\n                points.draw(mainPass);\n                drawCallCounter++;\n            }\n            mainPass.setPipeline(this.instancedTrianglePipeline.get());\n            for (let mesh of scene.getAllMeshesInstanced()) {\n                mesh.draw(mainPass);\n                drawCallCounter++;\n            }\n            mainPass.end();\n            // Overlay Pass ================================\n            const overlayPass = encoder.beginRenderPass({\n                label: \"overlay pass\",\n                colorAttachments: [\n                    {\n                        view: this.renderTarget.createView(),\n                        resolveTarget: this.context.getCurrentTexture().createView(),\n                        loadOp: \"load\",\n                        clearValue: this.clearColor,\n                        storeOp: \"store\",\n                    },\n                ],\n                depthStencilAttachment: {\n                    view: this.depthTextureSuperSample.createView(),\n                    depthClearValue: 1.0,\n                    depthLoadOp: \"clear\",\n                    depthStoreOp: \"store\"\n                }\n            });\n            overlayPass.setPipeline(this.overlayMeshPipeline.get());\n            this.globalUniforms.bind(overlayPass);\n            for (let mesh of scene.getAllMeshes()) {\n                if (mesh.isOverlay()) {\n                    mesh.draw(overlayPass);\n                    drawCallCounter++;\n                }\n            }\n            overlayPass.end();\n            // ID Pass ================================\n            // rasterize ids for mouse picking\n            const idPass = encoder.beginRenderPass({\n                label: \"id pass\",\n                colorAttachments: [\n                    {\n                        view: this.idTexture.createView(),\n                        loadOp: \"clear\",\n                        clearValue: [0, 0, 0, 0],\n                        storeOp: \"store\",\n                    },\n                ],\n                depthStencilAttachment: {\n                    view: this.depthTexture.createView(),\n                    depthClearValue: 1.0,\n                    depthLoadOp: \"clear\",\n                    depthStoreOp: \"store\" // prolly dont need to store this TODO:\n                }\n            });\n            idPass.setPipeline(this.idRasterPipeline.get());\n            this.globalUniforms.bind(idPass);\n            for (let mesh of scene.getAllMeshes()) {\n                if (mesh.isOverlay()) {\n                    mesh.draw(idPass);\n                    drawCallCounter++;\n                }\n            }\n            idPass.end();\n            const commandBuffer = encoder.finish();\n            this.device.queue.submit([commandBuffer]);\n            _cad__WEBPACK_IMPORTED_MODULE_7__.INSTANCE.getStats().setDrawCalls(drawCallCounter);\n            yield this.device.queue.onSubmittedWorkDone();\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQ3hCLE9BQU8sRUFBRSxPQUFPO3FCQUNqQjtpQkFDRjtnQkFDRCxzQkFBc0IsRUFBRTtvQkFDdEIsSUFBSSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFO29CQUNwQyxlQUFlLEVBQUUsR0FBRztvQkFDcEIsV0FBVyxFQUFFLE9BQU87b0JBQ3BCLFlBQVksRUFBRSxPQUFPLENBQUMsdUNBQXVDO2lCQUM5RDthQUNGLENBQUMsQ0FBQztZQUNILE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFFaEQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFakMsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLENBQUMsWUFBWSxFQUFFLEVBQUU7Z0JBQ3JDLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFO29CQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUNsQixlQUFlLEVBQUUsQ0FBQztpQkFDbkI7YUFDRjtZQUVELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUViLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUN2QyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBRTFDLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBRWxELE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUVoRCxDQUFDO0tBQUE7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9yZW5kZXJlci50cz9iNWM3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHRyaWFuZ2xlU2hhZGVyIGZyb20gXCIuL3NoYWRlcnMvdHJpYW5nbGVTaGFkZXIud2dzbFwiO1xuaW1wb3J0IGxpbmVTaGFkZXIgZnJvbSBcIi4vc2hhZGVycy9saW5lU2hhZGVyLndnc2xcIjtcbmltcG9ydCBwb2ludFNoYWRlciBmcm9tIFwiLi9zaGFkZXJzL3BvaW50U2hhZGVyLndnc2xcIjtcbmltcG9ydCBpbnN0YW5jZWRUcmlhbmdsZVNoYWRlciBmcm9tIFwiLi9zaGFkZXJzL2luc3RhbmNlZFRyaWFuZ2xlU2hhZGVyLndnc2xcIlxuaW1wb3J0IG92ZXJsYXlNZXNoU2hhZGVyIGZyb20gXCIuL3NoYWRlcnMvb3ZlcmxheU1lc2hTaGFkZXIud2dzbFwiXG5pbXBvcnQgaWRTaGFkZXIgZnJvbSBcIi4vc2hhZGVycy9pZFNoYWRlci53Z3NsXCI7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gXCIuLi9zY2VuZS9zY2VuZVwiXG5pbXBvcnQgeyBQaXBlbGluZSwgUGlwZWxpbmVQcmltaXRpdmUgfSBmcm9tIFwiLi9waXBlbGluZVwiXG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IEdsb2JhbFVuaWZvcm1zIH0gZnJvbSBcIi4vZ2xvYmFsVW5pZm9ybXNcIjtcblxuY29uc3QgY29tcGF0aWJpbGl0eUNoZWNrOiBIVE1MRWxlbWVudCA9IDxIVE1MRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXBhdGliaWxpdHktY2hlY2tcIik7XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJlciB7XG5cbiAgcHJpdmF0ZSBkZXZpY2UhOiBHUFVEZXZpY2U7XG4gIHByaXZhdGUgY29udGV4dCE6IEdQVUNhbnZhc0NvbnRleHQ7XG4gIHByaXZhdGUgY2FudmFzITogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHByaXZhdGUgY2FudmFzRm9ybWF0ITogR1BVVGV4dHVyZUZvcm1hdDtcblxuICBwcml2YXRlIHRyaWFuZ2xlU2hhZGVyTW9kdWxlITogR1BVU2hhZGVyTW9kdWxlO1xuICBwcml2YXRlIGxpbmVTaGFkZXJNb2R1bGUhOiBHUFVTaGFkZXJNb2R1bGU7XG4gIHByaXZhdGUgcG9pbnRTaGFkZXJNb2R1bGUhOiBHUFVTaGFkZXJNb2R1bGU7XG4gIHByaXZhdGUgaW5zdGFuY2VkVHJpYW5nbGVTaGFkZXJNb2R1bGUhOiBHUFVTaGFkZXJNb2R1bGU7XG4gIHByaXZhdGUgb3ZlcmxheU1lc2hTaGFkZXJNb2R1bGUhOiBHUFVTaGFkZXJNb2R1bGU7XG4gIHByaXZhdGUgaWRTaGFkZXJNb2R1bGUhOiBHUFVTaGFkZXJNb2R1bGU7XG5cbiAgcHJpdmF0ZSBkZXB0aFRleHR1cmVTdXBlclNhbXBsZSE6IEdQVVRleHR1cmU7XG4gIHByaXZhdGUgZGVwdGhUZXh0dXJlITogR1BVVGV4dHVyZTtcbiAgcHJpdmF0ZSByZW5kZXJUYXJnZXQhOiBHUFVUZXh0dXJlO1xuICBwcml2YXRlIGlkVGV4dHVyZSE6IEdQVVRleHR1cmU7IC8vIHJhc3Rlcml6ZSBpZCBmb3IgbW91c2UgcGlja2luZ1xuXG4gIHByaXZhdGUgYmluZEdyb3VwTGF5b3V0ITogR1BVQmluZEdyb3VwTGF5b3V0O1xuICBwcml2YXRlIGJpbmRHcm91cExheW91dEluc3RhbmNlZCE6IEdQVUJpbmRHcm91cExheW91dDtcblxuICBwcml2YXRlIGdsb2JhbFVuaWZvcm1zITogR2xvYmFsVW5pZm9ybXM7XG5cbiAgcHJpdmF0ZSB0cmlhbmdsZVBpcGVsaW5lITogUGlwZWxpbmU7XG4gIHByaXZhdGUgbGluZVBpcGVsaW5lITogUGlwZWxpbmU7XG4gIHByaXZhdGUgcG9pbnRQaXBlbGluZSE6IFBpcGVsaW5lO1xuICBwcml2YXRlIGluc3RhbmNlZFRyaWFuZ2xlUGlwZWxpbmUhOiBQaXBlbGluZTtcbiAgcHJpdmF0ZSBvdmVybGF5TWVzaFBpcGVsaW5lITogUGlwZWxpbmU7XG4gIHByaXZhdGUgaWRSYXN0ZXJQaXBlbGluZSE6IFBpcGVsaW5lO1xuXG4gIHByaXZhdGUgY2xlYXJDb2xvcjogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jbGVhckNvbG9yID0gWzAuMSwgMC4xLCAwLjEsIDEuMF07XG4gIH1cblxuICBwdWJsaWMgZ2V0RGV2aWNlKCk6IEdQVURldmljZSB7XG4gICAgcmV0dXJuIHRoaXMuZGV2aWNlO1xuICB9XG5cbiAgcHVibGljIGdldEJpbmRHcm91cExheW91dCgpOiBHUFVCaW5kR3JvdXBMYXlvdXQge1xuICAgIHJldHVybiB0aGlzLmJpbmRHcm91cExheW91dDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCaW5kR3JvdXBMYXlvdXRJbnN0YW5jZWQoKTogR1BVQmluZEdyb3VwTGF5b3V0IHtcbiAgICByZXR1cm4gdGhpcy5iaW5kR3JvdXBMYXlvdXRJbnN0YW5jZWQ7XG4gIH1cblxuICBwdWJsaWMgc2V0Q2xlYXJDb2xvcihjb2xvcjogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0pOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyQ29sb3IgPSBjb2xvcjtcbiAgfVxuXG4gIGFzeW5jIGluaXQoKSB7XG5cblxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRGV2aWNlKCk7XG4gICAgdGhpcy5jcmVhdGVSZXNvdXJjZXMoKTtcbiAgICB0aGlzLmNyZWF0ZVBpcGVsaW5lcygpO1xuICAgIHRoaXMudXBkYXRlU2NyZWVuU2l6ZSgpO1xuXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZURldmljZSgpIHtcblxuICAgIGlmICghbmF2aWdhdG9yLmdwdSkge1xuICAgICAgYWxlcnQoXCJZb3VyIGJyb3dzZXIgLyBjb21wdXRlciBkb2VzIG5vdCBzdXBwb3J0IFdlYkdQVS5cIik7XG4gICAgICBjb21wYXRpYmlsaXR5Q2hlY2suaW5uZXJUZXh0ID0gXCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBXZWJHUFUuIENoZWNrIGhlcmUgZm9yIGEgbGlzdCBvZiBzdXBwb3J0ZWQgYnJvd3NlcnMgaHR0cHM6Ly9jYW5pdXNlLmNvbS93ZWJncHVcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYWRhcHRlcjogR1BVQWRhcHRlciB8IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIGFkYXB0ZXIgPSBhd2FpdCBuYXZpZ2F0b3IuZ3B1LnJlcXVlc3RBZGFwdGVyKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9XG5cbiAgICBpZiAoYWRhcHRlciEgPT0gbnVsbCkge1xuICAgICAgYWxlcnQoXCJZb3VyIGJyb3dzZXIgLyBjb21wdXRlciBkb2VzIG5vdCBzdXBwb3J0IFdlYkdQVS5cIik7XG4gICAgICBjb21wYXRpYmlsaXR5Q2hlY2suaW5uZXJUZXh0ID0gXCJObyB2YWxpZCBncHUgYWRhcHRlci4gQ2hlY2sgaGVyZSBmb3IgYSBsaXN0IG9mIHN1cHBvcnRlZCBicm93c2VycyBodHRwczovL2Nhbml1c2UuY29tL3dlYmdwdVwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGV2aWNlID0gPEdQVURldmljZT5hd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoKTtcbiAgICB0aGlzLmNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcmVlblwiKTtcbiAgICB0aGlzLmNvbnRleHQgPSA8R1BVQ2FudmFzQ29udGV4dD50aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ3B1XCIpO1xuICAgIHRoaXMuY2FudmFzRm9ybWF0ID0gbmF2aWdhdG9yLmdwdS5nZXRQcmVmZXJyZWRDYW52YXNGb3JtYXQoKTtcblxuICAgIHRoaXMuY29udGV4dC5jb25maWd1cmUoe1xuICAgICAgZGV2aWNlOiB0aGlzLmRldmljZSxcbiAgICAgIGZvcm1hdDogdGhpcy5jYW52YXNGb3JtYXQsXG4gICAgfSk7XG5cbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBnZXRJZEF0UGl4ZWwoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQcm9taXNlPG51bWJlcj4ge1xuXG4gICAgLy8gd2luZG93IGlzIG1pcnJvcmVkXG4gICAgeCA9IHdpbmRvdy5pbm5lcldpZHRoIC0geDtcblxuICAgIC8vIFRPRE86IGZhY3RvciBidWZmZXIgb3V0XG4gICAgY29uc3QgaWRCdWZmZXIgPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXIoe1xuICAgICAgbGFiZWw6IFwiaWQgZHN0IGJ1ZmZlclwiLFxuICAgICAgc2l6ZTogNCxcbiAgICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCB8IEdQVUJ1ZmZlclVzYWdlLk1BUF9SRUFEXG4gICAgfSk7XG5cbiAgICBjb25zdCBlbmNvZGVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQ29tbWFuZEVuY29kZXIoKTtcbiAgICBlbmNvZGVyLmNvcHlUZXh0dXJlVG9CdWZmZXIoXG4gICAgICB7IHRleHR1cmU6IHRoaXMuaWRUZXh0dXJlLCBtaXBMZXZlbDogMCwgb3JpZ2luOiBbeCwgeSwgMF0gfSxcbiAgICAgIHsgYnVmZmVyOiBpZEJ1ZmZlciwgYnl0ZXNQZXJSb3c6IDI1Niwgcm93c1BlckltYWdlOiAxIH0sXG4gICAgICBbMSwgMSwgMV1cbiAgICApO1xuICAgIHRoaXMuZGV2aWNlLnF1ZXVlLnN1Ym1pdChbZW5jb2Rlci5maW5pc2goKV0pO1xuXG4gICAgYXdhaXQgdGhpcy5kZXZpY2UucXVldWUub25TdWJtaXR0ZWRXb3JrRG9uZSgpO1xuICAgIGF3YWl0IGlkQnVmZmVyLm1hcEFzeW5jKEdQVU1hcE1vZGUuUkVBRCk7XG4gICAgY29uc3QgZGF0YTogSW50MzJBcnJheSA9IG5ldyBJbnQzMkFycmF5KGlkQnVmZmVyLmdldE1hcHBlZFJhbmdlKCkpO1xuICAgIHJldHVybiBkYXRhWzBdO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVSZXNvdXJjZXMoKSB7XG5cbiAgICB0aGlzLnRyaWFuZ2xlU2hhZGVyTW9kdWxlID0gdGhpcy5kZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgIGxhYmVsOiBcInRyaWFuZ2xlIHNoYWRlciBtb2R1bGVcIixcbiAgICAgIGNvZGU6IHRyaWFuZ2xlU2hhZGVyLFxuICAgIH0pO1xuICAgIHRoaXMubGluZVNoYWRlck1vZHVsZSA9IHRoaXMuZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgICBsYWJlbDogXCJsaW5lIHNoYWRlciBtb2R1bGVcIixcbiAgICAgIGNvZGU6IGxpbmVTaGFkZXIsXG4gICAgfSk7XG4gICAgdGhpcy5wb2ludFNoYWRlck1vZHVsZSA9IHRoaXMuZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgICBsYWJlbDogXCJwb2ludCBzaGFkZXIgbW9kdWxlXCIsXG4gICAgICBjb2RlOiBwb2ludFNoYWRlcixcbiAgICB9KTtcbiAgICB0aGlzLmluc3RhbmNlZFRyaWFuZ2xlU2hhZGVyTW9kdWxlID0gdGhpcy5kZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgIGxhYmVsOiBcImluc3RhbmNlZCB0cmlhbmdsZSBzaGFkZXIgbW9kdWxlXCIsXG4gICAgICBjb2RlOiBpbnN0YW5jZWRUcmlhbmdsZVNoYWRlcixcbiAgICB9KTtcbiAgICB0aGlzLm92ZXJsYXlNZXNoU2hhZGVyTW9kdWxlID0gdGhpcy5kZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgIGxhYmVsOiBcIm92ZXJsYXkgbWVzaCBzaGFkZXIgbW9kdWxlXCIsXG4gICAgICBjb2RlOiBvdmVybGF5TWVzaFNoYWRlcixcbiAgICB9KTtcbiAgICB0aGlzLmlkU2hhZGVyTW9kdWxlID0gdGhpcy5kZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtcbiAgICAgIGxhYmVsOiBcImlkIHNoYWRlciBtb2R1bGVcIixcbiAgICAgIGNvZGU6IGlkU2hhZGVyLFxuICAgIH0pO1xuXG4gICAgdGhpcy5iaW5kR3JvdXBMYXlvdXQgPSB0aGlzLmRldmljZS5jcmVhdGVCaW5kR3JvdXBMYXlvdXQoe1xuICAgICAgbGFiZWw6IFwiYmluZCBncm91cCBsYXlvdXRcIixcbiAgICAgIGVudHJpZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJpbmRpbmc6IDAsIC8vIG1vZGVsIHBvaW50c1xuICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLlZFUlRFWCxcbiAgICAgICAgICBidWZmZXI6IHt9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAxLCAvLyBtb2RlbCBub3JtYWxzXG4gICAgICAgICAgdmlzaWJpbGl0eTogR1BVU2hhZGVyU3RhZ2UuVkVSVEVYLFxuICAgICAgICAgIGJ1ZmZlcjoge30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAyLCAvLyBjb2xvclxuICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULFxuICAgICAgICAgIGJ1ZmZlcjoge30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiAzLCAvLyBmbGFnc1xuICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLlZFUlRFWCB8IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULFxuICAgICAgICAgIGJ1ZmZlcjoge30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiA0LCAvLyBpZFxuICAgICAgICAgIHZpc2liaWxpdHk6IEdQVVNoYWRlclN0YWdlLkZSQUdNRU5ULFxuICAgICAgICAgIGJ1ZmZlcjoge30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBiaW5kaW5nOiA1LCAvLyBzdWJTZWxlY3Rpb25CdWZmZXJcbiAgICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5WRVJURVgsXG4gICAgICAgICAgYnVmZmVyOiB7IHR5cGU6IFwicmVhZC1vbmx5LXN0b3JhZ2VcIiB9LFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG5cbiAgICAvLyBUT0RPOiBmYWN0b3JcbiAgICB0aGlzLmJpbmRHcm91cExheW91dEluc3RhbmNlZCA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cExheW91dCh7XG4gICAgICBsYWJlbDogXCJiaW5kIGdyb3VwIGxheW91dCBpbnN0YW5jZWRcIixcbiAgICAgIGVudHJpZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJpbmRpbmc6IDAsIC8vIHRyYW5zZm9ybSBidWZmZXJcbiAgICAgICAgICB2aXNpYmlsaXR5OiBHUFVTaGFkZXJTdGFnZS5WRVJURVgsXG4gICAgICAgICAgYnVmZmVyOiB7IHR5cGU6IFwicmVhZC1vbmx5LXN0b3JhZ2VcIiB9LFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG5cbiAgICB0aGlzLmdsb2JhbFVuaWZvcm1zID0gbmV3IEdsb2JhbFVuaWZvcm1zKHRoaXMuZGV2aWNlKTtcblxuICAgIHRoaXMudXBkYXRlU2NyZWVuU2l6ZSgpO1xuXG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVBpcGVsaW5lcygpIHtcbiAgICB0aGlzLnRyaWFuZ2xlUGlwZWxpbmUgPSBuZXcgUGlwZWxpbmUoXG4gICAgICB0aGlzLmRldmljZSxcbiAgICAgIHRoaXMuY2FudmFzRm9ybWF0LFxuICAgICAgW3RoaXMuYmluZEdyb3VwTGF5b3V0LCB0aGlzLmdsb2JhbFVuaWZvcm1zLmdldExheW91dCgpXSxcbiAgICAgIHRoaXMudHJpYW5nbGVTaGFkZXJNb2R1bGUsXG4gICAgICBQaXBlbGluZVByaW1pdGl2ZS5UcmlhbmdsZSxcbiAgICAgIDQpO1xuICAgIHRoaXMubGluZVBpcGVsaW5lID0gbmV3IFBpcGVsaW5lKFxuICAgICAgdGhpcy5kZXZpY2UsXG4gICAgICB0aGlzLmNhbnZhc0Zvcm1hdCxcbiAgICAgIFt0aGlzLmJpbmRHcm91cExheW91dCwgdGhpcy5nbG9iYWxVbmlmb3Jtcy5nZXRMYXlvdXQoKV0sXG4gICAgICB0aGlzLmxpbmVTaGFkZXJNb2R1bGUsXG4gICAgICBQaXBlbGluZVByaW1pdGl2ZS5MaW5lLFxuICAgICAgNCk7XG4gICAgdGhpcy5wb2ludFBpcGVsaW5lID0gbmV3IFBpcGVsaW5lKFxuICAgICAgdGhpcy5kZXZpY2UsXG4gICAgICB0aGlzLmNhbnZhc0Zvcm1hdCxcbiAgICAgIFt0aGlzLmJpbmRHcm91cExheW91dCwgdGhpcy5nbG9iYWxVbmlmb3Jtcy5nZXRMYXlvdXQoKV0sXG4gICAgICB0aGlzLnBvaW50U2hhZGVyTW9kdWxlLFxuICAgICAgUGlwZWxpbmVQcmltaXRpdmUuUG9pbnQsXG4gICAgICA0KTtcbiAgICB0aGlzLmluc3RhbmNlZFRyaWFuZ2xlUGlwZWxpbmUgPSBuZXcgUGlwZWxpbmUoXG4gICAgICB0aGlzLmRldmljZSxcbiAgICAgIHRoaXMuY2FudmFzRm9ybWF0LFxuICAgICAgW3RoaXMuYmluZEdyb3VwTGF5b3V0LCB0aGlzLmdsb2JhbFVuaWZvcm1zLmdldExheW91dCgpLCB0aGlzLmJpbmRHcm91cExheW91dEluc3RhbmNlZF0sXG4gICAgICB0aGlzLmluc3RhbmNlZFRyaWFuZ2xlU2hhZGVyTW9kdWxlLFxuICAgICAgUGlwZWxpbmVQcmltaXRpdmUuVHJpYW5nbGUsXG4gICAgICA0KTtcbiAgICB0aGlzLm92ZXJsYXlNZXNoUGlwZWxpbmUgPSBuZXcgUGlwZWxpbmUoXG4gICAgICB0aGlzLmRldmljZSxcbiAgICAgIHRoaXMuY2FudmFzRm9ybWF0LFxuICAgICAgW3RoaXMuYmluZEdyb3VwTGF5b3V0LCB0aGlzLmdsb2JhbFVuaWZvcm1zLmdldExheW91dCgpXSxcbiAgICAgIHRoaXMub3ZlcmxheU1lc2hTaGFkZXJNb2R1bGUsXG4gICAgICBQaXBlbGluZVByaW1pdGl2ZS5UcmlhbmdsZSxcbiAgICAgIDQpO1xuICAgIHRoaXMuaWRSYXN0ZXJQaXBlbGluZSA9IG5ldyBQaXBlbGluZShcbiAgICAgIHRoaXMuZGV2aWNlLFxuICAgICAgXCJyMzJzaW50XCIsXG4gICAgICBbdGhpcy5iaW5kR3JvdXBMYXlvdXQsIHRoaXMuZ2xvYmFsVW5pZm9ybXMuZ2V0TGF5b3V0KCldLFxuICAgICAgdGhpcy5pZFNoYWRlck1vZHVsZSxcbiAgICAgIFBpcGVsaW5lUHJpbWl0aXZlLlRyaWFuZ2xlLFxuICAgICAgMSk7XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlU2NyZWVuU2l6ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB0aGlzLmRlcHRoVGV4dHVyZVN1cGVyU2FtcGxlID0gdGhpcy5kZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgICBzaXplOiBbdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodF0sXG4gICAgICBzYW1wbGVDb3VudDogNCxcbiAgICAgIGZvcm1hdDogXCJkZXB0aDI0cGx1c1wiLFxuXG4gICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UXG4gICAgfSk7XG4gICAgdGhpcy5yZW5kZXJUYXJnZXQgPSB0aGlzLmRldmljZS5jcmVhdGVUZXh0dXJlKHtcbiAgICAgIHNpemU6IFt0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0XSxcbiAgICAgIHNhbXBsZUNvdW50OiA0LFxuICAgICAgZm9ybWF0OiB0aGlzLmNhbnZhc0Zvcm1hdCxcbiAgICAgIHVzYWdlOiBHUFVUZXh0dXJlVXNhZ2UuUkVOREVSX0FUVEFDSE1FTlRcbiAgICB9KTtcbiAgICB0aGlzLmlkVGV4dHVyZSA9IHRoaXMuZGV2aWNlLmNyZWF0ZVRleHR1cmUoe1xuICAgICAgc2l6ZTogW3RoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHRdLFxuICAgICAgc2FtcGxlQ291bnQ6IDEsXG4gICAgICBmb3JtYXQ6IFwicjMyc2ludFwiLFxuICAgICAgdXNhZ2U6IEdQVVRleHR1cmVVc2FnZS5SRU5ERVJfQVRUQUNITUVOVCB8IEdQVVRleHR1cmVVc2FnZS5DT1BZX1NSQ1xuICAgIH0pO1xuICAgIHRoaXMuZGVwdGhUZXh0dXJlID0gdGhpcy5kZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgICBzaXplOiBbdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodF0sXG4gICAgICBzYW1wbGVDb3VudDogMSxcbiAgICAgIGZvcm1hdDogXCJkZXB0aDI0cGx1c1wiLFxuICAgICAgdXNhZ2U6IEdQVVRleHR1cmVVc2FnZS5SRU5ERVJfQVRUQUNITUVOVFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgcmVuZGVyKHNjZW5lOiBTY2VuZSkge1xuXG4gICAgLy8gVE9ETzogRmFjdG9yIHRoaXMgc3R1ZmYgb3V0IG9mIG1haW4gbG9vcFxuXG4gICAgdGhpcy5nbG9iYWxVbmlmb3Jtcy50aWNrKCk7XG5cbiAgICB2YXIgZHJhd0NhbGxDb3VudGVyOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3QgZW5jb2RlcjogR1BVQ29tbWFuZEVuY29kZXIgPSB0aGlzLmRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuXG4gICAgLy8gbWFpblBhc3MgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICBjb25zdCBtYWluUGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIgPSBlbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyh7XG4gICAgICBsYWJlbDogXCJtYWluIHBhc3NcIixcbiAgICAgIGNvbG9yQXR0YWNobWVudHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHZpZXc6IHRoaXMucmVuZGVyVGFyZ2V0LmNyZWF0ZVZpZXcoKSxcbiAgICAgICAgICByZXNvbHZlVGFyZ2V0OiB0aGlzLmNvbnRleHQuZ2V0Q3VycmVudFRleHR1cmUoKS5jcmVhdGVWaWV3KCksXG4gICAgICAgICAgbG9hZE9wOiBcImNsZWFyXCIsXG4gICAgICAgICAgY2xlYXJWYWx1ZTogdGhpcy5jbGVhckNvbG9yLFxuICAgICAgICAgIHN0b3JlT3A6IFwic3RvcmVcIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZXB0aFN0ZW5jaWxBdHRhY2htZW50OiB7XG4gICAgICAgIHZpZXc6IHRoaXMuZGVwdGhUZXh0dXJlU3VwZXJTYW1wbGUuY3JlYXRlVmlldygpLFxuICAgICAgICBkZXB0aENsZWFyVmFsdWU6IDEuMCxcbiAgICAgICAgZGVwdGhMb2FkT3A6IFwiY2xlYXJcIixcbiAgICAgICAgZGVwdGhTdG9yZU9wOiBcInN0b3JlXCJcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuZ2xvYmFsVW5pZm9ybXMuYmluZChtYWluUGFzcyk7XG5cbiAgICBtYWluUGFzcy5zZXRQaXBlbGluZSh0aGlzLnRyaWFuZ2xlUGlwZWxpbmUuZ2V0KCkpO1xuICAgIGZvciAobGV0IG1lc2ggb2Ygc2NlbmUuZ2V0QWxsTWVzaGVzKCkpIHtcbiAgICAgIGlmICghbWVzaC5pc092ZXJsYXkoKSkge1xuICAgICAgICBtZXNoLmRyYXcobWFpblBhc3MpO1xuICAgICAgICBkcmF3Q2FsbENvdW50ZXIrKztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbWFpblBhc3Muc2V0UGlwZWxpbmUodGhpcy5saW5lUGlwZWxpbmUuZ2V0KCkpO1xuICAgIGZvciAobGV0IGxpbmVzIG9mIHNjZW5lLmdldEFsbExpbmVzKCkpIHtcbiAgICAgIGxpbmVzLmRyYXcobWFpblBhc3MpO1xuICAgICAgZHJhd0NhbGxDb3VudGVyKys7XG4gICAgfTtcblxuICAgIG1haW5QYXNzLnNldFBpcGVsaW5lKHRoaXMucG9pbnRQaXBlbGluZS5nZXQoKSk7XG4gICAgZm9yIChsZXQgcG9pbnRzIG9mIHNjZW5lLmdldEFsbFBvaW50cygpKSB7XG4gICAgICBwb2ludHMuZHJhdyhtYWluUGFzcyk7XG4gICAgICBkcmF3Q2FsbENvdW50ZXIrKztcbiAgICB9XG5cbiAgICBtYWluUGFzcy5zZXRQaXBlbGluZSh0aGlzLmluc3RhbmNlZFRyaWFuZ2xlUGlwZWxpbmUuZ2V0KCkpO1xuICAgIGZvciAobGV0IG1lc2ggb2Ygc2NlbmUuZ2V0QWxsTWVzaGVzSW5zdGFuY2VkKCkpIHtcbiAgICAgIG1lc2guZHJhdyhtYWluUGFzcyk7XG4gICAgICBkcmF3Q2FsbENvdW50ZXIrKztcbiAgICB9XG5cbiAgICBtYWluUGFzcy5lbmQoKTtcblxuICAgIC8vIE92ZXJsYXkgUGFzcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgY29uc3Qgb3ZlcmxheVBhc3M6IEdQVVJlbmRlclBhc3NFbmNvZGVyID0gZW5jb2Rlci5iZWdpblJlbmRlclBhc3Moe1xuICAgICAgbGFiZWw6IFwib3ZlcmxheSBwYXNzXCIsXG4gICAgICBjb2xvckF0dGFjaG1lbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB2aWV3OiB0aGlzLnJlbmRlclRhcmdldC5jcmVhdGVWaWV3KCksIC8vIGNvdWxkIG1heWJlIGZhY3RvciBjcmFldGUgdmlldyBvdXQ/XG4gICAgICAgICAgcmVzb2x2ZVRhcmdldDogdGhpcy5jb250ZXh0LmdldEN1cnJlbnRUZXh0dXJlKCkuY3JlYXRlVmlldygpLFxuICAgICAgICAgIGxvYWRPcDogXCJsb2FkXCIsXG4gICAgICAgICAgY2xlYXJWYWx1ZTogdGhpcy5jbGVhckNvbG9yLFxuICAgICAgICAgIHN0b3JlT3A6IFwic3RvcmVcIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBkZXB0aFN0ZW5jaWxBdHRhY2htZW50OiB7XG4gICAgICAgIHZpZXc6IHRoaXMuZGVwdGhUZXh0dXJlU3VwZXJTYW1wbGUuY3JlYXRlVmlldygpLFxuICAgICAgICBkZXB0aENsZWFyVmFsdWU6IDEuMCxcbiAgICAgICAgZGVwdGhMb2FkT3A6IFwiY2xlYXJcIixcbiAgICAgICAgZGVwdGhTdG9yZU9wOiBcInN0b3JlXCJcbiAgICAgIH1cbiAgICB9KVxuICAgIG92ZXJsYXlQYXNzLnNldFBpcGVsaW5lKHRoaXMub3ZlcmxheU1lc2hQaXBlbGluZS5nZXQoKSk7XG5cblxuICAgIHRoaXMuZ2xvYmFsVW5pZm9ybXMuYmluZChvdmVybGF5UGFzcyk7XG4gICAgZm9yIChsZXQgbWVzaCBvZiBzY2VuZS5nZXRBbGxNZXNoZXMoKSkge1xuICAgICAgaWYgKG1lc2guaXNPdmVybGF5KCkpIHtcbiAgICAgICAgbWVzaC5kcmF3KG92ZXJsYXlQYXNzKTtcbiAgICAgICAgZHJhd0NhbGxDb3VudGVyKys7XG4gICAgICB9XG4gICAgfVxuICAgIG92ZXJsYXlQYXNzLmVuZCgpO1xuXG4gICAgLy8gSUQgUGFzcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIHJhc3Rlcml6ZSBpZHMgZm9yIG1vdXNlIHBpY2tpbmdcblxuICAgIGNvbnN0IGlkUGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIgPSBlbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyh7XG4gICAgICBsYWJlbDogXCJpZCBwYXNzXCIsXG4gICAgICBjb2xvckF0dGFjaG1lbnRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB2aWV3OiB0aGlzLmlkVGV4dHVyZS5jcmVhdGVWaWV3KCksXG4gICAgICAgICAgbG9hZE9wOiBcImNsZWFyXCIsXG4gICAgICAgICAgY2xlYXJWYWx1ZTogWzAsIDAsIDAsIDBdLCAvLyBUT0RPOiBkZWxldGUgYWZ0ZXIgZGVidWdcbiAgICAgICAgICBzdG9yZU9wOiBcInN0b3JlXCIsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZGVwdGhTdGVuY2lsQXR0YWNobWVudDoge1xuICAgICAgICB2aWV3OiB0aGlzLmRlcHRoVGV4dHVyZS5jcmVhdGVWaWV3KCksXG4gICAgICAgIGRlcHRoQ2xlYXJWYWx1ZTogMS4wLFxuICAgICAgICBkZXB0aExvYWRPcDogXCJjbGVhclwiLFxuICAgICAgICBkZXB0aFN0b3JlT3A6IFwic3RvcmVcIiAvLyBwcm9sbHkgZG9udCBuZWVkIHRvIHN0b3JlIHRoaXMgVE9ETzpcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZFBhc3Muc2V0UGlwZWxpbmUodGhpcy5pZFJhc3RlclBpcGVsaW5lLmdldCgpKTtcblxuICAgIHRoaXMuZ2xvYmFsVW5pZm9ybXMuYmluZChpZFBhc3MpO1xuXG4gICAgZm9yIChsZXQgbWVzaCBvZiBzY2VuZS5nZXRBbGxNZXNoZXMoKSkge1xuICAgICAgaWYgKG1lc2guaXNPdmVybGF5KCkpIHtcbiAgICAgICAgbWVzaC5kcmF3KGlkUGFzcyk7XG4gICAgICAgIGRyYXdDYWxsQ291bnRlcisrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlkUGFzcy5lbmQoKTtcblxuICAgIGNvbnN0IGNvbW1hbmRCdWZmZXIgPSBlbmNvZGVyLmZpbmlzaCgpO1xuICAgIHRoaXMuZGV2aWNlLnF1ZXVlLnN1Ym1pdChbY29tbWFuZEJ1ZmZlcl0pO1xuXG4gICAgSU5TVEFOQ0UuZ2V0U3RhdHMoKS5zZXREcmF3Q2FsbHMoZHJhd0NhbGxDb3VudGVyKTtcblxuICAgIGF3YWl0IHRoaXMuZGV2aWNlLnF1ZXVlLm9uU3VibWl0dGVkV29ya0RvbmUoKTtcblxuICB9XG5cbn1cblxuXG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renderer.ts\n");

/***/ }),

/***/ "./src/render/renterMeshInstanced.ts":
/*!*******************************************!*\
  !*** ./src/render/renterMeshInstanced.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderMeshInstanced: () => (/* binding */ RenderMeshInstanced)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _renderMesh__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./renderMesh */ \"./src/render/renderMesh.ts\");\n\n\nclass RenderMeshInstanced extends _renderMesh__WEBPACK_IMPORTED_MODULE_1__.RenderMesh {\n    constructor(parent, vertices, normals, indices, transforms, subSelection, constantScreenSpaceSize = false) {\n        super(parent, vertices, normals, indices, subSelection, constantScreenSpaceSize);\n        this.instanceCount = transforms.length;\n        const transformsList = [];\n        for (let i = 0; i < transforms.length; i++)\n            transformsList.push(...transforms[i]);\n        const transformsArray = new Float32Array(transformsList);\n        this.transformBuffer = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBuffer({\n            label: \"transform array\",\n            size: transformsArray.byteLength,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST,\n        });\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.transformBuffer, 0, transformsArray);\n    }\n    updateTransforms(transforms) {\n        const transformsList = [];\n        for (let i = 0; i < transforms.length; i++)\n            transformsList.push(...transforms[i]);\n        const transformsArray = new Float32Array(transformsList);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().queue.writeBuffer(this.transformBuffer, 0, transformsArray);\n    }\n    updateBindGroup() {\n        super.updateBindGroup();\n        this.instanceBindGroup = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getDevice().createBindGroup({\n            label: \"bind group instanced mesh\",\n            layout: _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getRenderer().getBindGroupLayoutInstanced(),\n            entries: [{\n                    binding: 0,\n                    resource: { buffer: this.transformBuffer }\n                }]\n        });\n    }\n    draw(pass) {\n        if (this.parent.isHidden())\n            return;\n        pass.setBindGroup(0, this.bindGroup);\n        pass.setBindGroup(2, this.instanceBindGroup);\n        pass.setVertexBuffer(0, this.vertexBuffer);\n        pass.setIndexBuffer(this.indexBuffer, \"uint32\");\n        pass.drawIndexed(this.indexCount, this.instanceCount);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDeEQsQ0FBQztDQUVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3JlbnRlck1lc2hJbnN0YW5jZWQudHM/OGFjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiXG5pbXBvcnQgeyBtYXQ0LCBNYXQ0LCBWZWMzIH0gZnJvbSBcIndncHUtbWF0cml4XCJcbmltcG9ydCB7IEdlb21ldHJ5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L2dlb21ldHJ5XCI7XG5pbXBvcnQgeyBSZW5kZXJNZXNoIH0gZnJvbSBcIi4vcmVuZGVyTWVzaFwiO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyTWVzaEluc3RhbmNlZCBleHRlbmRzIFJlbmRlck1lc2gge1xuXG4gIHByaXZhdGUgaW5zdGFuY2VDb3VudDogbnVtYmVyO1xuICBwcml2YXRlIHRyYW5zZm9ybUJ1ZmZlciE6IEdQVUJ1ZmZlcjtcbiAgcHJpdmF0ZSBpbnN0YW5jZUJpbmRHcm91cCE6IEdQVUJpbmRHcm91cDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwYXJlbnQ6IEdlb21ldHJ5LFxuICAgIHZlcnRpY2VzOiBWZWMzW10sXG4gICAgbm9ybWFsczogVmVjM1tdLFxuICAgIGluZGljZXM6IG51bWJlcltdLFxuICAgIHRyYW5zZm9ybXM6IE1hdDRbXSxcbiAgICBzdWJTZWxlY3Rpb246IGJvb2xlYW5bXSxcbiAgICBjb25zdGFudFNjcmVlblNwYWNlU2l6ZTogYm9vbGVhbiA9IGZhbHNlLFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIHZlcnRpY2VzLCBub3JtYWxzLCBpbmRpY2VzLCBzdWJTZWxlY3Rpb24sIGNvbnN0YW50U2NyZWVuU3BhY2VTaXplKTtcblxuICAgIHRoaXMuaW5zdGFuY2VDb3VudCA9IHRyYW5zZm9ybXMubGVuZ3RoO1xuXG4gICAgY29uc3QgdHJhbnNmb3Jtc0xpc3Q6IG51bWJlcltdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB0cmFuc2Zvcm1zTGlzdC5wdXNoKC4uLnRyYW5zZm9ybXNbaV0pO1xuICAgIGNvbnN0IHRyYW5zZm9ybXNBcnJheTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0cmFuc2Zvcm1zTGlzdCk7XG4gICAgdGhpcy50cmFuc2Zvcm1CdWZmZXIgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJ1ZmZlcih7XG4gICAgICBsYWJlbDogXCJ0cmFuc2Zvcm0gYXJyYXlcIixcbiAgICAgIHNpemU6IHRyYW5zZm9ybXNBcnJheS5ieXRlTGVuZ3RoLFxuICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCxcbiAgICB9KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMudHJhbnNmb3JtQnVmZmVyLCAwLCB0cmFuc2Zvcm1zQXJyYXkpO1xuXG4gIH1cblxuICBwdWJsaWMgdXBkYXRlVHJhbnNmb3Jtcyh0cmFuc2Zvcm1zOiBNYXQ0W10pIHtcbiAgICBjb25zdCB0cmFuc2Zvcm1zTGlzdDogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYW5zZm9ybXMubGVuZ3RoOyBpKyspIHRyYW5zZm9ybXNMaXN0LnB1c2goLi4udHJhbnNmb3Jtc1tpXSk7XG4gICAgY29uc3QgdHJhbnNmb3Jtc0FycmF5OiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHRyYW5zZm9ybXNMaXN0KTtcbiAgICBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLnF1ZXVlLndyaXRlQnVmZmVyKHRoaXMudHJhbnNmb3JtQnVmZmVyLCAwLCB0cmFuc2Zvcm1zQXJyYXkpO1xuICB9XG5cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdXBkYXRlQmluZEdyb3VwKCk6IHZvaWQge1xuICAgIHN1cGVyLnVwZGF0ZUJpbmRHcm91cCgpO1xuICAgIHRoaXMuaW5zdGFuY2VCaW5kR3JvdXAgPSBJTlNUQU5DRS5nZXRSZW5kZXJlcigpLmdldERldmljZSgpLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICBsYWJlbDogXCJiaW5kIGdyb3VwIGluc3RhbmNlZCBtZXNoXCIsXG4gICAgICBsYXlvdXQ6IElOU1RBTkNFLmdldFJlbmRlcmVyKCkuZ2V0QmluZEdyb3VwTGF5b3V0SW5zdGFuY2VkKCksXG4gICAgICBlbnRyaWVzOiBbe1xuICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICByZXNvdXJjZTogeyBidWZmZXI6IHRoaXMudHJhbnNmb3JtQnVmZmVyIH1cbiAgICAgIH1dXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZHJhdyhwYXNzOiBHUFVSZW5kZXJQYXNzRW5jb2Rlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhcmVudC5pc0hpZGRlbigpKSByZXR1cm47XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgdGhpcy5iaW5kR3JvdXApO1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDIsIHRoaXMuaW5zdGFuY2VCaW5kR3JvdXApO1xuICAgIHBhc3Muc2V0VmVydGV4QnVmZmVyKDAsIHRoaXMudmVydGV4QnVmZmVyKTtcbiAgICBwYXNzLnNldEluZGV4QnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIsIFwidWludDMyXCIpO1xuICAgIHBhc3MuZHJhd0luZGV4ZWQodGhpcy5pbmRleENvdW50LCB0aGlzLmluc3RhbmNlQ291bnQpO1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/renterMeshInstanced.ts\n");

/***/ }),

/***/ "./src/scene/camera.ts":
/*!*****************************!*\
  !*** ./src/scene/camera.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Camera: () => (/* binding */ Camera)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _geometry_ray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/ray */ \"./src/geometry/ray.ts\");\n/* harmony import */ var _mode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mode */ \"./src/mode.ts\");\n\n\n\n\n\nclass Camera {\n    constructor(position, up, forward, fovy, screen) {\n        this.position = position;\n        this.up = up;\n        this.forward = forward;\n        this.fovy = fovy;\n        this.screen = screen;\n        this.isTurningRight = false;\n        this.isTurningLeft = false;\n        this.isMovingForward = false;\n        this.isMovingBackward = false;\n        this.isLookingUp = false;\n        this.isLookingDown = false;\n        this.isMovingLeft = false;\n        this.isMovingRight = false;\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(this.up);\n        this.lastFrameTime = performance.now();\n        this.viewProj = new Float32Array(16);\n        this.addEvents();\n    }\n    getViewProj() {\n        return this.viewProj;\n    }\n    getPosition() {\n        return this.position;\n    }\n    getFovy() {\n        return this.fovy;\n    }\n    setFovy(newFovy) {\n        this.fovy = newFovy;\n        this.updateViewProj();\n    }\n    getPixelAtPoint(point) {\n        const dir = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.normalize(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(point, this.position));\n        const center = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(this.position, this.forward);\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.forward, this.up);\n        const xRes = window.innerWidth;\n        const yRes = window.innerHeight;\n        const sizeY = 2.0 * Math.tan(this.fovy / 2.0);\n        const sizeX = sizeY / yRes * xRes;\n        const ray = new _geometry_ray__WEBPACK_IMPORTED_MODULE_2__.Ray(this.position, dir);\n        const tScreen = ray.intersectPlane(new _geometry_plane__WEBPACK_IMPORTED_MODULE_1__.Plane(center, this.forward), true);\n        const pScreen = ray.at(tScreen);\n        const topLeft = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(center, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(this.up, sizeY / 2), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(right, sizeX / -2)));\n        const topLeftToPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(pScreen, topLeft);\n        const x = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.dot(topLeftToPoint, right);\n        const y = -wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.dot(topLeftToPoint, this.up);\n        return [\n            Math.floor(x / sizeX * xRes),\n            Math.floor(y / sizeY * yRes)\n        ];\n    }\n    getRayAtPixel(x, y) {\n        const center = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(this.position, this.forward);\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.forward, this.up);\n        const xRes = window.innerWidth;\n        const yRes = window.innerHeight;\n        const sizeY = 2.0 * Math.tan(this.fovy / 2.0);\n        const sizeX = sizeY / yRes * xRes;\n        const screenPoint = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(center, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(right, sizeX / xRes * (x - xRes / 2.0)), wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(this.up, sizeY / yRes * (y - yRes / 2.0))));\n        return new _geometry_ray__WEBPACK_IMPORTED_MODULE_2__.Ray(this.position, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.sub(screenPoint, this.position));\n    }\n    pixelSizeAtDist(dist) {\n        const yRes = window.innerHeight;\n        const sizeY = 2.0 * Math.tan(this.fovy / 2.0);\n        return sizeY / yRes * dist;\n    }\n    addEvents() {\n        document.addEventListener('keydown', (event) => {\n            switch (event.code) {\n                case 'ArrowLeft':\n                    this.isTurningLeft = true;\n                    break;\n                case 'ArrowRight':\n                    this.isTurningRight = true;\n                    break;\n                case 'ArrowUp':\n                    this.isLookingUp = true;\n                    break;\n                case 'ArrowDown':\n                    this.isLookingDown = true;\n                    break;\n                case 'KeyW':\n                    this.isMovingForward = true;\n                    break;\n                case 'KeyS':\n                    this.isMovingBackward = true;\n                    break;\n                case 'KeyA':\n                    this.isMovingLeft = true;\n                    break;\n                case 'KeyD':\n                    this.isMovingRight = true;\n                    break;\n            }\n        }, false);\n        document.addEventListener('keyup', (event) => {\n            switch (event.code) {\n                case 'ArrowLeft':\n                    this.isTurningLeft = false;\n                    break;\n                case 'ArrowRight':\n                    this.isTurningRight = false;\n                    break;\n                case 'ArrowUp':\n                    this.isLookingUp = false;\n                    break;\n                case 'ArrowDown':\n                    this.isLookingDown = false;\n                    break;\n                case 'KeyW':\n                    this.isMovingForward = false;\n                    break;\n                case 'KeyS':\n                    this.isMovingBackward = false;\n                    break;\n                case 'KeyA':\n                    this.isMovingLeft = false;\n                    break;\n                case 'KeyD':\n                    this.isMovingRight = false;\n                    break;\n            }\n        }, false);\n    }\n    tick() {\n        var now = performance.now();\n        if (_cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMode() == _mode__WEBPACK_IMPORTED_MODULE_3__.OperatingMode.Navigation) {\n            if (this.isTurningLeft) {\n                this.turnRight((this.lastFrameTime - now) / 500);\n            }\n            else if (this.isTurningRight == true) {\n                this.turnRight((now - this.lastFrameTime) / 500);\n            }\n            if (this.isLookingUp) {\n                this.lookUp((now - this.lastFrameTime) / 500);\n            }\n            else if (this.isLookingDown) {\n                this.lookUp((this.lastFrameTime - now) / 500);\n            }\n            if (this.isMovingForward) {\n                this.goForward((now - this.lastFrameTime) / 20);\n            }\n            else if (this.isMovingBackward) {\n                this.goForward((this.lastFrameTime - now) / 20);\n            }\n            if (this.isMovingRight) {\n                this.goRight((now - this.lastFrameTime) / 20);\n            }\n            else if (this.isMovingLeft) {\n                this.goRight((this.lastFrameTime - now) / 20);\n            }\n        }\n        this.updateViewProj();\n        this.lastFrameTime = now;\n    }\n    turnRight(amount) {\n        const rotation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.rotateZ(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.identity(), -amount);\n        this.forward = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.forward, rotation);\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.up, rotation);\n    }\n    lookUp(amount) {\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.forward, this.up);\n        const rotation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.axisRotate(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.identity(), right, amount);\n        this.forward = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.forward, rotation);\n        this.up = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.transformMat4(this.up, rotation);\n    }\n    goForward(amount) {\n        this.position = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(this.forward, amount), this.position);\n    }\n    goRight(amount) {\n        const right = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.cross(this.up, this.forward);\n        this.position = wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(this.position, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.scale(right, -amount));\n    }\n    updateViewProj() {\n        const view = new Float32Array(16);\n        const proj = new Float32Array(16);\n        const swapYZ = (v) => {\n            return wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(v[0], v[2], v[1]);\n        };\n        const forward = swapYZ(this.forward);\n        const position = swapYZ(this.position);\n        const up = swapYZ(this.up);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.lookAt(position, wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.add(position, forward), up, view);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.perspective(this.fovy, this.screen.width / this.screen.height, 0.1, 10000.0, proj);\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.mat4.multiply(proj, view, this.viewProj);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzdDLE1BQU0sRUFBRSxHQUFTLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFakMsNkNBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLDZDQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDN0QsNkNBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3hGLDZDQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRTNDLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3NjZW5lL2NhbWVyYS50cz8xNWFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1hdDQsIHZlYzMsIE1hdDQsIFZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIlxuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IFBsYW5lIH0gZnJvbSBcIi4uL2dlb21ldHJ5L3BsYW5lXCI7XG5pbXBvcnQgeyBSYXkgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcmF5XCI7XG5pbXBvcnQgeyBPcGVyYXRpbmdNb2RlIH0gZnJvbSBcIi4uL21vZGVcIlxuaW1wb3J0IHsgc3dpenpsZVlaIH0gZnJvbSBcIi4uL3V0aWxzL21hdGhcIjtcblxuZXhwb3J0IGNsYXNzIENhbWVyYSB7XG5cbiAgcHJpdmF0ZSB2aWV3UHJvajogRmxvYXQzMkFycmF5O1xuICBwcml2YXRlIGxhc3RGcmFtZVRpbWU6IG51bWJlcjtcbiAgcHJpdmF0ZSBpc1R1cm5pbmdSaWdodDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGlzVHVybmluZ0xlZnQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc01vdmluZ0ZvcndhcmQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc01vdmluZ0JhY2t3YXJkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgaXNMb29raW5nVXA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc0xvb2tpbmdEb3duOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgaXNNb3ZpbmdMZWZ0OiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgaXNNb3ZpbmdSaWdodDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcG9zaXRpb246IFZlYzMsXG4gICAgcHJpdmF0ZSB1cDogVmVjMyxcbiAgICBwcml2YXRlIGZvcndhcmQ6IFZlYzMsXG4gICAgcHJpdmF0ZSBmb3Z5OiBudW1iZXIsXG4gICAgcHJpdmF0ZSBzY3JlZW46IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgdGhpcy51cCA9IHZlYzMubm9ybWFsaXplKHRoaXMudXApO1xuICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRoaXMudmlld1Byb2ogPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcbiAgICB0aGlzLmFkZEV2ZW50cygpO1xuICB9XG5cbiAgZ2V0Vmlld1Byb2ooKTogRmxvYXQzMkFycmF5IHtcbiAgICByZXR1cm4gdGhpcy52aWV3UHJvajtcbiAgfVxuXG4gIGdldFBvc2l0aW9uKCk6IFZlYzMge1xuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICB9XG5cbiAgZ2V0Rm92eSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmZvdnk7XG4gIH1cblxuICBzZXRGb3Z5KG5ld0Zvdnk6IG51bWJlcikge1xuICAgIHRoaXMuZm92eSA9IG5ld0Zvdnk7XG4gICAgdGhpcy51cGRhdGVWaWV3UHJvaigpO1xuICB9XG5cbiAgcHVibGljIGdldFBpeGVsQXRQb2ludChwb2ludDogVmVjMyk6IFtudW1iZXIsIG51bWJlcl0ge1xuXG4gICAgY29uc3QgZGlyOiBWZWMzID0gdmVjMy5ub3JtYWxpemUodmVjMy5zdWIocG9pbnQsIHRoaXMucG9zaXRpb24pKTtcbiAgICBjb25zdCBjZW50ZXI6IFZlYzMgPSB2ZWMzLmFkZCh0aGlzLnBvc2l0aW9uLCB0aGlzLmZvcndhcmQpO1xuICAgIGNvbnN0IHJpZ2h0OiBWZWMzID0gdmVjMy5jcm9zcyh0aGlzLmZvcndhcmQsIHRoaXMudXApO1xuICAgIGNvbnN0IHhSZXM6IG51bWJlciA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIGNvbnN0IHlSZXM6IG51bWJlciA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBjb25zdCBzaXplWTogbnVtYmVyID0gMi4wICogTWF0aC50YW4odGhpcy5mb3Z5IC8gMi4wKTtcbiAgICBjb25zdCBzaXplWDogbnVtYmVyID0gc2l6ZVkgLyB5UmVzICogeFJlcztcblxuICAgIGNvbnN0IHJheTogUmF5ID0gbmV3IFJheSh0aGlzLnBvc2l0aW9uLCBkaXIpO1xuICAgIGNvbnN0IHRTY3JlZW46IG51bWJlciA9IHJheS5pbnRlcnNlY3RQbGFuZShuZXcgUGxhbmUoY2VudGVyLCB0aGlzLmZvcndhcmQpLCB0cnVlKSE7XG4gICAgY29uc3QgcFNjcmVlbjogVmVjMyA9IHJheS5hdCh0U2NyZWVuKTtcblxuICAgIGNvbnN0IHRvcExlZnQ6IFZlYzMgPSB2ZWMzLmFkZChcbiAgICAgIGNlbnRlcixcbiAgICAgIHZlYzMuYWRkKFxuICAgICAgICB2ZWMzLnNjYWxlKHRoaXMudXAsIHNpemVZIC8gMiksXG4gICAgICAgIHZlYzMuc2NhbGUocmlnaHQsIHNpemVYIC8gLTIpXG4gICAgICApXG4gICAgKTtcblxuICAgIGNvbnN0IHRvcExlZnRUb1BvaW50ID0gdmVjMy5zdWIocFNjcmVlbiwgdG9wTGVmdCk7XG4gICAgY29uc3QgeDogbnVtYmVyID0gdmVjMy5kb3QodG9wTGVmdFRvUG9pbnQsIHJpZ2h0KTtcbiAgICBjb25zdCB5OiBudW1iZXIgPSAtdmVjMy5kb3QodG9wTGVmdFRvUG9pbnQsIHRoaXMudXApO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgIE1hdGguZmxvb3IoeCAvIHNpemVYICogeFJlcyksXG4gICAgICBNYXRoLmZsb29yKHkgLyBzaXplWSAqIHlSZXMpXG4gICAgXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRSYXlBdFBpeGVsKHg6IG51bWJlciwgeTogbnVtYmVyKTogUmF5IHtcbiAgICBjb25zdCBjZW50ZXI6IFZlYzMgPSB2ZWMzLmFkZCh0aGlzLnBvc2l0aW9uLCB0aGlzLmZvcndhcmQpO1xuICAgIGNvbnN0IHJpZ2h0OiBWZWMzID0gdmVjMy5jcm9zcyh0aGlzLmZvcndhcmQsIHRoaXMudXApO1xuICAgIGNvbnN0IHhSZXM6IG51bWJlciA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIGNvbnN0IHlSZXM6IG51bWJlciA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBjb25zdCBzaXplWTogbnVtYmVyID0gMi4wICogTWF0aC50YW4odGhpcy5mb3Z5IC8gMi4wKTtcbiAgICBjb25zdCBzaXplWDogbnVtYmVyID0gc2l6ZVkgLyB5UmVzICogeFJlcztcbiAgICBjb25zdCBzY3JlZW5Qb2ludDogVmVjMyA9IHZlYzMuYWRkKFxuICAgICAgY2VudGVyLFxuICAgICAgdmVjMy5zdWIoXG4gICAgICAgIHZlYzMuc2NhbGUocmlnaHQsIHNpemVYIC8geFJlcyAqICh4IC0geFJlcyAvIDIuMCkpLFxuICAgICAgICB2ZWMzLnNjYWxlKHRoaXMudXAsIHNpemVZIC8geVJlcyAqICh5IC0geVJlcyAvIDIuMCkpXG4gICAgICApXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFJheSh0aGlzLnBvc2l0aW9uLCB2ZWMzLnN1YihzY3JlZW5Qb2ludCwgdGhpcy5wb3NpdGlvbikpO1xuICB9XG5cbiAgcHVibGljIHBpeGVsU2l6ZUF0RGlzdChkaXN0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHlSZXM6IG51bWJlciA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBjb25zdCBzaXplWTogbnVtYmVyID0gMi4wICogTWF0aC50YW4odGhpcy5mb3Z5IC8gMi4wKTtcbiAgICByZXR1cm4gc2l6ZVkgLyB5UmVzICogZGlzdDtcbiAgfVxuXG4gIHByaXZhdGUgYWRkRXZlbnRzKCkge1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgc3dpdGNoIChldmVudC5jb2RlKSB7XG4gICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6IHRoaXMuaXNUdXJuaW5nTGVmdCA9IHRydWU7IGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzogdGhpcy5pc1R1cm5pbmdSaWdodCA9IHRydWU7IGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd1VwJzogdGhpcy5pc0xvb2tpbmdVcCA9IHRydWU7IGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOiB0aGlzLmlzTG9va2luZ0Rvd24gPSB0cnVlOyBicmVhaztcbiAgICAgICAgY2FzZSAnS2V5Vyc6IHRoaXMuaXNNb3ZpbmdGb3J3YXJkID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0tleVMnOiB0aGlzLmlzTW92aW5nQmFja3dhcmQgPSB0cnVlOyBicmVhaztcbiAgICAgICAgY2FzZSAnS2V5QSc6IHRoaXMuaXNNb3ZpbmdMZWZ0ID0gdHJ1ZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0tleUQnOiB0aGlzLmlzTW92aW5nUmlnaHQgPSB0cnVlOyBicmVhaztcbiAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xuICAgICAgc3dpdGNoIChldmVudC5jb2RlKSB7XG4gICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6IHRoaXMuaXNUdXJuaW5nTGVmdCA9IGZhbHNlOyBicmVhaztcbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6IHRoaXMuaXNUdXJuaW5nUmlnaHQgPSBmYWxzZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOiB0aGlzLmlzTG9va2luZ1VwID0gZmFsc2U7IGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOiB0aGlzLmlzTG9va2luZ0Rvd24gPSBmYWxzZTsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0tleVcnOiB0aGlzLmlzTW92aW5nRm9yd2FyZCA9IGZhbHNlOyBicmVhaztcbiAgICAgICAgY2FzZSAnS2V5Uyc6IHRoaXMuaXNNb3ZpbmdCYWNrd2FyZCA9IGZhbHNlOyBicmVhaztcbiAgICAgICAgY2FzZSAnS2V5QSc6IHRoaXMuaXNNb3ZpbmdMZWZ0ID0gZmFsc2U7IGJyZWFrO1xuICAgICAgICBjYXNlICdLZXlEJzogdGhpcy5pc01vdmluZ1JpZ2h0ID0gZmFsc2U7IGJyZWFrO1xuICAgICAgfVxuICAgIH0sIGZhbHNlKTtcblxuICB9XG5cblxuICB0aWNrKCk6IHZvaWQge1xuXG5cbiAgICB2YXIgbm93OiBudW1iZXIgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICAgIGlmIChJTlNUQU5DRS5nZXRNb2RlKCkgPT0gT3BlcmF0aW5nTW9kZS5OYXZpZ2F0aW9uKSB7XG4gICAgICBpZiAodGhpcy5pc1R1cm5pbmdMZWZ0KSB7XG4gICAgICAgIHRoaXMudHVyblJpZ2h0KCh0aGlzLmxhc3RGcmFtZVRpbWUgLSBub3cpIC8gNTAwKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1R1cm5pbmdSaWdodCA9PSB0cnVlKSB7XG4gICAgICAgIHRoaXMudHVyblJpZ2h0KChub3cgLSB0aGlzLmxhc3RGcmFtZVRpbWUpIC8gNTAwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaXNMb29raW5nVXApIHtcbiAgICAgICAgdGhpcy5sb29rVXAoKG5vdyAtIHRoaXMubGFzdEZyYW1lVGltZSkgLyA1MDApO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTG9va2luZ0Rvd24pIHtcbiAgICAgICAgdGhpcy5sb29rVXAoKHRoaXMubGFzdEZyYW1lVGltZSAtIG5vdykgLyA1MDApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc01vdmluZ0ZvcndhcmQpIHtcbiAgICAgICAgdGhpcy5nb0ZvcndhcmQoKG5vdyAtIHRoaXMubGFzdEZyYW1lVGltZSkgLyAyMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNNb3ZpbmdCYWNrd2FyZCkge1xuICAgICAgICB0aGlzLmdvRm9yd2FyZCgodGhpcy5sYXN0RnJhbWVUaW1lIC0gbm93KSAvIDIwKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaXNNb3ZpbmdSaWdodCkge1xuICAgICAgICB0aGlzLmdvUmlnaHQoKG5vdyAtIHRoaXMubGFzdEZyYW1lVGltZSkgLyAyMCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNNb3ZpbmdMZWZ0KSB7XG4gICAgICAgIHRoaXMuZ29SaWdodCgodGhpcy5sYXN0RnJhbWVUaW1lIC0gbm93KSAvIDIwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy51cGRhdGVWaWV3UHJvaigpO1xuICAgIHRoaXMubGFzdEZyYW1lVGltZSA9IG5vdztcbiAgfVxuXG4gIHByaXZhdGUgdHVyblJpZ2h0KGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgcm90YXRpb246IE1hdDQgPSBtYXQ0LnJvdGF0ZVoobWF0NC5pZGVudGl0eSgpLCAtYW1vdW50KTtcbiAgICB0aGlzLmZvcndhcmQgPSB2ZWMzLnRyYW5zZm9ybU1hdDQodGhpcy5mb3J3YXJkLCByb3RhdGlvbik7XG4gICAgdGhpcy51cCA9IHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLnVwLCByb3RhdGlvbik7XG4gIH1cbiAgcHJpdmF0ZSBsb29rVXAoYW1vdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByaWdodDogVmVjMyA9IHZlYzMuY3Jvc3ModGhpcy5mb3J3YXJkLCB0aGlzLnVwKTtcbiAgICBjb25zdCByb3RhdGlvbjogTWF0NCA9IG1hdDQuYXhpc1JvdGF0ZShtYXQ0LmlkZW50aXR5KCksIHJpZ2h0LCBhbW91bnQpO1xuICAgIHRoaXMuZm9yd2FyZCA9IHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLmZvcndhcmQsIHJvdGF0aW9uKTtcbiAgICB0aGlzLnVwID0gdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMudXAsIHJvdGF0aW9uKTtcbiAgfVxuXG4gIHByaXZhdGUgZ29Gb3J3YXJkKGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHZlYzMuYWRkKHZlYzMuc2NhbGUodGhpcy5mb3J3YXJkLCBhbW91bnQpLCB0aGlzLnBvc2l0aW9uKTtcbiAgfVxuXG4gIHByaXZhdGUgZ29SaWdodChhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHJpZ2h0OiBWZWMzID0gdmVjMy5jcm9zcyh0aGlzLnVwLCB0aGlzLmZvcndhcmQpO1xuICAgIHRoaXMucG9zaXRpb24gPSB2ZWMzLmFkZCh0aGlzLnBvc2l0aW9uLCB2ZWMzLnNjYWxlKHJpZ2h0LCAtYW1vdW50KSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVZpZXdQcm9qKCk6IHZvaWQge1xuICAgIGNvbnN0IHZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcbiAgICBjb25zdCBwcm9qID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XG5cbiAgICBjb25zdCBzd2FwWVogPSAodjogVmVjMykgPT4ge1xuICAgICAgcmV0dXJuIHZlYzMuY3JlYXRlKHZbMF0sIHZbMl0sIHZbMV0pO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcndhcmQ6IFZlYzMgPSBzd2FwWVoodGhpcy5mb3J3YXJkKTtcbiAgICBjb25zdCBwb3NpdGlvbjogVmVjMyA9IHN3YXBZWih0aGlzLnBvc2l0aW9uKTtcbiAgICBjb25zdCB1cDogVmVjMyA9IHN3YXBZWih0aGlzLnVwKTtcblxuICAgIG1hdDQubG9va0F0KHBvc2l0aW9uLCB2ZWMzLmFkZChwb3NpdGlvbiwgZm9yd2FyZCksIHVwLCB2aWV3KTtcbiAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMuZm92eSwgdGhpcy5zY3JlZW4ud2lkdGggLyB0aGlzLnNjcmVlbi5oZWlnaHQsIDAuMSwgMTAwMDAuMCwgcHJvaik7XG4gICAgbWF0NC5tdWx0aXBseShwcm9qLCB2aWV3LCB0aGlzLnZpZXdQcm9qKTtcblxuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/scene/camera.ts\n");

/***/ }),

/***/ "./src/scene/constructionPlane.ts":
/*!****************************************!*\
  !*** ./src/scene/constructionPlane.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConstructionPlane: () => (/* binding */ ConstructionPlane)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/group */ \"./src/geometry/group.ts\");\n/* harmony import */ var _geometry_intersection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/intersection */ \"./src/geometry/intersection.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _render_renderLines__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../render/renderLines */ \"./src/render/renderLines.ts\");\n\n\n\n\n\n\n// TODO: draw this first, disable depth buffer while drawing\nclass ConstructionPlane {\n    constructor(majorCount = 10, minorCount = 10, cellSize = 1) {\n        this.majorCount = majorCount;\n        this.minorCount = minorCount;\n        this.cellSize = cellSize;\n        this.majorLines = null;\n        this.minorLines = null;\n        this.xAxis = null;\n        this.yAxis = null;\n        this.minorLinesParent = new _geometry_group__WEBPACK_IMPORTED_MODULE_1__.Group([], null, undefined, \"mid grey\");\n        this.majorLinesParent = new _geometry_group__WEBPACK_IMPORTED_MODULE_1__.Group([], null, undefined, \"lighter grey\");\n        this.xAxisParent = new _geometry_group__WEBPACK_IMPORTED_MODULE_1__.Group([], null, undefined, \"red\");\n        this.yAxisParent = new _geometry_group__WEBPACK_IMPORTED_MODULE_1__.Group([], null, undefined, \"green\");\n        this.setup();\n    }\n    setup() {\n        const cellCount = this.majorCount * this.minorCount;\n        const size = cellCount * this.cellSize;\n        const majorVerts = [];\n        const minorVerts = [];\n        const majorIndices = [];\n        const minorIndices = [];\n        const majorSubSelection = [];\n        const minorSubSelection = [];\n        var majorIndex = 0;\n        var minorIndex = 0;\n        const halfSize = size / 2.0;\n        const start = -halfSize;\n        const z = -0.001;\n        for (var i = 0; i <= cellCount; i++) {\n            let midOrEnd = (i === cellCount / 2) ? 0 : halfSize;\n            if (i % this.minorCount === 0) { // major line\n                majorVerts.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(start + i * this.cellSize, -halfSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(start + i * this.cellSize, midOrEnd, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(-halfSize, start + i * this.cellSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(midOrEnd, start + i * this.cellSize));\n                majorSubSelection.push(false, false, false, false);\n                majorIndices.push(majorIndex, majorIndex + 1, majorIndex + 2, majorIndex + 3);\n                majorIndex += 4;\n            }\n            else { // minor line\n                minorVerts.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(start + i * this.cellSize, -halfSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(start + i * this.cellSize, midOrEnd, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(-halfSize, start + i * this.cellSize, z), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(midOrEnd, start + i * this.cellSize, z));\n                minorSubSelection.push(false, false, false, false);\n                minorIndices.push(minorIndex, minorIndex + 1, minorIndex + 2, minorIndex + 3);\n                minorIndex += 4;\n            }\n        }\n        if (this.majorLines)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.majorLines);\n        if (this.minorLines)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.minorLines);\n        if (this.xAxis)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.xAxis);\n        if (this.yAxis)\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().removeLines(this.yAxis);\n        this.majorLines = new _render_renderLines__WEBPACK_IMPORTED_MODULE_4__.RenderLines(this.majorLinesParent, majorVerts, majorIndices, majorSubSelection);\n        this.minorLines = new _render_renderLines__WEBPACK_IMPORTED_MODULE_4__.RenderLines(this.minorLinesParent, minorVerts, minorIndices, minorSubSelection);\n        this.xAxis = new _render_renderLines__WEBPACK_IMPORTED_MODULE_4__.RenderLines(this.xAxisParent, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(halfSize, 0, 0)], [0, 1], [false, false]);\n        this.yAxis = new _render_renderLines__WEBPACK_IMPORTED_MODULE_4__.RenderLines(this.yAxisParent, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(0, halfSize, 0)], [0, 1], [false, false]);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(this.majorLines);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(this.minorLines);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(this.xAxis);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addRenderLines(this.yAxis);\n    }\n    snapToGrid(point) {\n        const alignedWithOrigin = ((this.minorCount * this.majorCount) & 1) === 0;\n        var dx = point[0] % this.cellSize;\n        var dy = point[1] % this.cellSize;\n        if (dx < 0)\n            dx += this.cellSize;\n        if (dy < 0)\n            dy += this.cellSize;\n        if (!alignedWithOrigin) {\n            point[0] += this.cellSize / 2;\n            point[1] += this.cellSize / 2;\n        }\n        if (dx < this.cellSize / 2)\n            point[0] -= dx;\n        else\n            point[0] += this.cellSize - dx;\n        if (dy < this.cellSize / 2)\n            point[1] -= dy;\n        else\n            point[1] += this.cellSize - dy;\n        if (!alignedWithOrigin) {\n            point[0] -= this.cellSize / 2;\n            point[1] -= this.cellSize / 2;\n        }\n        return point;\n    }\n    intersect(ray) {\n        const tGroundPlane = ray.intersectPlane(new _geometry_plane__WEBPACK_IMPORTED_MODULE_3__.Plane(wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_5__.vec3.create(0, 0, 1)));\n        if (tGroundPlane) { // intrsected ground plane;\n            var pGroundPlane = tGroundPlane ? ray.at(tGroundPlane) : null;\n            if (pGroundPlane && _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getSnapSettings().snapGrid) {\n                pGroundPlane = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getConstructionPlane().snapToGrid(pGroundPlane);\n            }\n            if (pGroundPlane) {\n                return new _geometry_intersection__WEBPACK_IMPORTED_MODULE_2__.Intersection(tGroundPlane, \"ground plane\", null, 0, pGroundPlane, 0, 0);\n            }\n        }\n        return null;\n    }\n    getMinorCount() {\n        return this.minorCount;\n    }\n    getMajorCount() {\n        return this.majorCount;\n    }\n    getCellSize() {\n        return this.cellSize;\n    }\n    setMajorMaterial(mat) {\n        this.majorLinesParent.setMaterial(mat);\n    }\n    setMinorMaterial(mat) {\n        this.minorLinesParent.setMaterial(mat);\n    }\n    setMinorCount(count) {\n        this.minorCount = count;\n        this.setup();\n    }\n    setMajorCount(count) {\n        this.majorCount = count;\n        this.setup();\n    }\n    setCellSize(size) {\n        this.cellSize = size;\n        this.setup();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVcsQ0FBQyxJQUFZO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNmLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3NjZW5lL2NvbnN0cnVjdGlvblBsYW5lLnRzPzkyYzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgdmVjMywgVmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCI7XG5pbXBvcnQgeyBHcm91cCB9IGZyb20gXCIuLi9nZW9tZXRyeS9ncm91cFwiO1xuaW1wb3J0IHsgSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uL2dlb21ldHJ5L2ludGVyc2VjdGlvblwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcGxhbmVcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yYXlcIjtcbmltcG9ydCB7IE1hdGVyaWFsTmFtZSB9IGZyb20gXCIuLi9tYXRlcmlhbHMvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IFJlbmRlckxpbmVzIH0gZnJvbSBcIi4uL3JlbmRlci9yZW5kZXJMaW5lc1wiO1xuXG5cbi8vIFRPRE86IGRyYXcgdGhpcyBmaXJzdCwgZGlzYWJsZSBkZXB0aCBidWZmZXIgd2hpbGUgZHJhd2luZ1xuZXhwb3J0IGNsYXNzIENvbnN0cnVjdGlvblBsYW5lIHtcblxuICBwcml2YXRlIG1ham9yTGluZXM6IFJlbmRlckxpbmVzIHwgbnVsbDtcbiAgcHJpdmF0ZSBtaW5vckxpbmVzOiBSZW5kZXJMaW5lcyB8IG51bGw7XG4gIHByaXZhdGUgeEF4aXM6IFJlbmRlckxpbmVzIHwgbnVsbDtcbiAgcHJpdmF0ZSB5QXhpczogUmVuZGVyTGluZXMgfCBudWxsO1xuXG4gIHByaXZhdGUgbWFqb3JMaW5lc1BhcmVudDogR3JvdXA7XG4gIHByaXZhdGUgbWlub3JMaW5lc1BhcmVudDogR3JvdXA7XG4gIHByaXZhdGUgeEF4aXNQYXJlbnQ6IEdyb3VwO1xuICBwcml2YXRlIHlBeGlzUGFyZW50OiBHcm91cDtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1ham9yQ291bnQ6IG51bWJlciA9IDEwLFxuICAgIHByaXZhdGUgbWlub3JDb3VudDogbnVtYmVyID0gMTAsXG4gICAgcHJpdmF0ZSBjZWxsU2l6ZTogbnVtYmVyID0gMSkge1xuICAgIHRoaXMubWFqb3JMaW5lcyA9IG51bGw7XG4gICAgdGhpcy5taW5vckxpbmVzID0gbnVsbDtcbiAgICB0aGlzLnhBeGlzID0gbnVsbDtcbiAgICB0aGlzLnlBeGlzID0gbnVsbDtcbiAgICB0aGlzLm1pbm9yTGluZXNQYXJlbnQgPSBuZXcgR3JvdXAoW10sIG51bGwsIHVuZGVmaW5lZCwgXCJtaWQgZ3JleVwiKTtcbiAgICB0aGlzLm1ham9yTGluZXNQYXJlbnQgPSBuZXcgR3JvdXAoW10sIG51bGwsIHVuZGVmaW5lZCwgXCJsaWdodGVyIGdyZXlcIik7XG4gICAgdGhpcy54QXhpc1BhcmVudCA9IG5ldyBHcm91cChbXSwgbnVsbCwgdW5kZWZpbmVkLCBcInJlZFwiKTtcbiAgICB0aGlzLnlBeGlzUGFyZW50ID0gbmV3IEdyb3VwKFtdLCBudWxsLCB1bmRlZmluZWQsIFwiZ3JlZW5cIik7XG4gICAgdGhpcy5zZXR1cCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cCgpIHtcblxuXG4gICAgY29uc3QgY2VsbENvdW50ID0gdGhpcy5tYWpvckNvdW50ICogdGhpcy5taW5vckNvdW50O1xuICAgIGNvbnN0IHNpemUgPSBjZWxsQ291bnQgKiB0aGlzLmNlbGxTaXplO1xuXG4gICAgY29uc3QgbWFqb3JWZXJ0czogVmVjM1tdID0gW107XG4gICAgY29uc3QgbWlub3JWZXJ0czogVmVjM1tdID0gW107XG4gICAgY29uc3QgbWFqb3JJbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IG1pbm9ySW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgICBjb25zdCBtYWpvclN1YlNlbGVjdGlvbjogYm9vbGVhbltdID0gW107XG4gICAgY29uc3QgbWlub3JTdWJTZWxlY3Rpb246IGJvb2xlYW5bXSA9IFtdO1xuXG4gICAgdmFyIG1ham9ySW5kZXg6IG51bWJlciA9IDA7XG4gICAgdmFyIG1pbm9ySW5kZXg6IG51bWJlciA9IDA7XG5cbiAgICBjb25zdCBoYWxmU2l6ZSA9IHNpemUgLyAyLjA7XG4gICAgY29uc3Qgc3RhcnQ6IG51bWJlciA9IC1oYWxmU2l6ZTtcbiAgICBjb25zdCB6OiBudW1iZXIgPSAtMC4wMDE7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBjZWxsQ291bnQ7IGkrKykge1xuICAgICAgbGV0IG1pZE9yRW5kOiBudW1iZXIgPSAoaSA9PT0gY2VsbENvdW50IC8gMikgPyAwIDogaGFsZlNpemU7XG4gICAgICBpZiAoaSAlIHRoaXMubWlub3JDb3VudCA9PT0gMCkgeyAvLyBtYWpvciBsaW5lXG4gICAgICAgIG1ham9yVmVydHMucHVzaChcbiAgICAgICAgICB2ZWMzLmNyZWF0ZShzdGFydCArIGkgKiB0aGlzLmNlbGxTaXplLCAtaGFsZlNpemUsIHopLFxuICAgICAgICAgIHZlYzMuY3JlYXRlKHN0YXJ0ICsgaSAqIHRoaXMuY2VsbFNpemUsIG1pZE9yRW5kLCB6KSxcbiAgICAgICAgICB2ZWMzLmNyZWF0ZSgtaGFsZlNpemUsIHN0YXJ0ICsgaSAqIHRoaXMuY2VsbFNpemUsIHopLFxuICAgICAgICAgIHZlYzMuY3JlYXRlKG1pZE9yRW5kLCBzdGFydCArIGkgKiB0aGlzLmNlbGxTaXplLCksXG4gICAgICAgICk7XG4gICAgICAgIG1ham9yU3ViU2VsZWN0aW9uLnB1c2goZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICBtYWpvckluZGljZXMucHVzaChtYWpvckluZGV4LCBtYWpvckluZGV4ICsgMSwgbWFqb3JJbmRleCArIDIsIG1ham9ySW5kZXggKyAzKTtcbiAgICAgICAgbWFqb3JJbmRleCArPSA0O1xuICAgICAgfSBlbHNlIHsgLy8gbWlub3IgbGluZVxuICAgICAgICBtaW5vclZlcnRzLnB1c2goXG4gICAgICAgICAgdmVjMy5jcmVhdGUoc3RhcnQgKyBpICogdGhpcy5jZWxsU2l6ZSwgLWhhbGZTaXplLCB6KSxcbiAgICAgICAgICB2ZWMzLmNyZWF0ZShzdGFydCArIGkgKiB0aGlzLmNlbGxTaXplLCBtaWRPckVuZCwgeiksXG4gICAgICAgICAgdmVjMy5jcmVhdGUoLWhhbGZTaXplLCBzdGFydCArIGkgKiB0aGlzLmNlbGxTaXplLCB6KSxcbiAgICAgICAgICB2ZWMzLmNyZWF0ZShtaWRPckVuZCwgc3RhcnQgKyBpICogdGhpcy5jZWxsU2l6ZSwgeiksXG4gICAgICAgICk7XG4gICAgICAgIG1pbm9yU3ViU2VsZWN0aW9uLnB1c2goZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICBtaW5vckluZGljZXMucHVzaChtaW5vckluZGV4LCBtaW5vckluZGV4ICsgMSwgbWlub3JJbmRleCArIDIsIG1pbm9ySW5kZXggKyAzKTtcbiAgICAgICAgbWlub3JJbmRleCArPSA0O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5tYWpvckxpbmVzKSBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUxpbmVzKHRoaXMubWFqb3JMaW5lcyk7XG4gICAgaWYgKHRoaXMubWlub3JMaW5lcykgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5yZW1vdmVMaW5lcyh0aGlzLm1pbm9yTGluZXMpO1xuICAgIGlmICh0aGlzLnhBeGlzKSBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUxpbmVzKHRoaXMueEF4aXMpO1xuICAgIGlmICh0aGlzLnlBeGlzKSBJTlNUQU5DRS5nZXRTY2VuZSgpLnJlbW92ZUxpbmVzKHRoaXMueUF4aXMpO1xuXG4gICAgdGhpcy5tYWpvckxpbmVzID0gbmV3IFJlbmRlckxpbmVzKHRoaXMubWFqb3JMaW5lc1BhcmVudCwgbWFqb3JWZXJ0cywgbWFqb3JJbmRpY2VzLCBtYWpvclN1YlNlbGVjdGlvbik7XG4gICAgdGhpcy5taW5vckxpbmVzID0gbmV3IFJlbmRlckxpbmVzKHRoaXMubWlub3JMaW5lc1BhcmVudCwgbWlub3JWZXJ0cywgbWlub3JJbmRpY2VzLCBtaW5vclN1YlNlbGVjdGlvbik7XG4gICAgdGhpcy54QXhpcyA9IG5ldyBSZW5kZXJMaW5lcyh0aGlzLnhBeGlzUGFyZW50LCBbdmVjMy5jcmVhdGUoMCwgMCwgMCksIHZlYzMuY3JlYXRlKGhhbGZTaXplLCAwLCAwKV0sIFswLCAxXSwgW2ZhbHNlLCBmYWxzZV0pO1xuICAgIHRoaXMueUF4aXMgPSBuZXcgUmVuZGVyTGluZXModGhpcy55QXhpc1BhcmVudCwgW3ZlYzMuY3JlYXRlKDAsIDAsIDApLCB2ZWMzLmNyZWF0ZSgwLCBoYWxmU2l6ZSwgMCldLCBbMCwgMV0sIFtmYWxzZSwgZmFsc2VdKTtcblxuICAgIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkUmVuZGVyTGluZXModGhpcy5tYWpvckxpbmVzKTtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZFJlbmRlckxpbmVzKHRoaXMubWlub3JMaW5lcyk7XG4gICAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRSZW5kZXJMaW5lcyh0aGlzLnhBeGlzKTtcbiAgICBJTlNUQU5DRS5nZXRTY2VuZSgpLmFkZFJlbmRlckxpbmVzKHRoaXMueUF4aXMpO1xuICB9XG5cblxuICBwdWJsaWMgc25hcFRvR3JpZChwb2ludDogVmVjMyk6IFZlYzMge1xuICAgIGNvbnN0IGFsaWduZWRXaXRoT3JpZ2luOiBib29sZWFuID0gKCh0aGlzLm1pbm9yQ291bnQgKiB0aGlzLm1ham9yQ291bnQpICYgMSkgPT09IDA7XG4gICAgdmFyIGR4OiBudW1iZXIgPSBwb2ludFswXSAlIHRoaXMuY2VsbFNpemU7XG4gICAgdmFyIGR5OiBudW1iZXIgPSBwb2ludFsxXSAlIHRoaXMuY2VsbFNpemU7XG4gICAgaWYgKGR4IDwgMCkgZHggKz0gdGhpcy5jZWxsU2l6ZTtcbiAgICBpZiAoZHkgPCAwKSBkeSArPSB0aGlzLmNlbGxTaXplO1xuICAgIGlmICghYWxpZ25lZFdpdGhPcmlnaW4pIHtcbiAgICAgIHBvaW50WzBdICs9IHRoaXMuY2VsbFNpemUgLyAyO1xuICAgICAgcG9pbnRbMV0gKz0gdGhpcy5jZWxsU2l6ZSAvIDI7XG4gICAgfVxuICAgIGlmIChkeCA8IHRoaXMuY2VsbFNpemUgLyAyKSBwb2ludFswXSAtPSBkeDtcbiAgICBlbHNlIHBvaW50WzBdICs9IHRoaXMuY2VsbFNpemUgLSBkeDtcbiAgICBpZiAoZHkgPCB0aGlzLmNlbGxTaXplIC8gMikgcG9pbnRbMV0gLT0gZHk7XG4gICAgZWxzZSBwb2ludFsxXSArPSB0aGlzLmNlbGxTaXplIC0gZHk7XG5cbiAgICBpZiAoIWFsaWduZWRXaXRoT3JpZ2luKSB7XG4gICAgICBwb2ludFswXSAtPSB0aGlzLmNlbGxTaXplIC8gMjtcbiAgICAgIHBvaW50WzFdIC09IHRoaXMuY2VsbFNpemUgLyAyO1xuICAgIH1cbiAgICByZXR1cm4gcG9pbnQ7XG4gIH1cblxuICBwdWJsaWMgaW50ZXJzZWN0KHJheTogUmF5KTogSW50ZXJzZWN0aW9uIHwgbnVsbCB7XG4gICAgY29uc3QgdEdyb3VuZFBsYW5lOiBudW1iZXIgfCBudWxsID0gcmF5LmludGVyc2VjdFBsYW5lKG5ldyBQbGFuZSh2ZWMzLmNyZWF0ZSgwLCAwLCAwKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSkpKTtcbiAgICBpZiAodEdyb3VuZFBsYW5lKSB7IC8vIGludHJzZWN0ZWQgZ3JvdW5kIHBsYW5lO1xuICAgICAgdmFyIHBHcm91bmRQbGFuZTogVmVjMyB8IG51bGwgPSB0R3JvdW5kUGxhbmUgPyByYXkuYXQodEdyb3VuZFBsYW5lISkgOiBudWxsO1xuICAgICAgaWYgKHBHcm91bmRQbGFuZSAmJiBJTlNUQU5DRS5nZXRTZXR0aW5nc01hbmFnZXIoKS5nZXRTbmFwU2V0dGluZ3NNYW5hZ2VyKCkuZ2V0U25hcFNldHRpbmdzKCkuc25hcEdyaWQpIHtcbiAgICAgICAgcEdyb3VuZFBsYW5lID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDb25zdHJ1Y3Rpb25QbGFuZSgpLnNuYXBUb0dyaWQocEdyb3VuZFBsYW5lKTtcbiAgICAgIH1cbiAgICAgIGlmIChwR3JvdW5kUGxhbmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnNlY3Rpb24odEdyb3VuZFBsYW5lLCBcImdyb3VuZCBwbGFuZVwiLCBudWxsLCAwLCBwR3JvdW5kUGxhbmUsIDAsIDApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNaW5vckNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubWlub3JDb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRNYWpvckNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubWFqb3JDb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDZWxsU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNlbGxTaXplO1xuICB9XG5cbiAgcHVibGljIHNldE1ham9yTWF0ZXJpYWwobWF0OiBNYXRlcmlhbE5hbWUpIHtcbiAgICB0aGlzLm1ham9yTGluZXNQYXJlbnQhLnNldE1hdGVyaWFsKG1hdCk7XG4gIH1cbiAgcHVibGljIHNldE1pbm9yTWF0ZXJpYWwobWF0OiBNYXRlcmlhbE5hbWUpIHtcbiAgICB0aGlzLm1pbm9yTGluZXNQYXJlbnQhLnNldE1hdGVyaWFsKG1hdCk7XG4gIH1cblxuICBwdWJsaWMgc2V0TWlub3JDb3VudChjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5taW5vckNvdW50ID0gY291bnQ7XG4gICAgdGhpcy5zZXR1cCgpO1xuICB9XG5cbiAgcHVibGljIHNldE1ham9yQ291bnQoY291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMubWFqb3JDb3VudCA9IGNvdW50O1xuICAgIHRoaXMuc2V0dXAoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDZWxsU2l6ZShzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmNlbGxTaXplID0gc2l6ZTtcbiAgICB0aGlzLnNldHVwKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scene/constructionPlane.ts\n");

/***/ }),

/***/ "./src/scene/scene.ts":
/*!****************************!*\
  !*** ./src/scene/scene.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Scene: () => (/* binding */ Scene)\n/* harmony export */ });\n/* harmony import */ var _camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./camera */ \"./src/scene/camera.ts\");\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _constructionPlane__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constructionPlane */ \"./src/scene/constructionPlane.ts\");\n/* harmony import */ var _geometry_sceneBoundingBoxHeirarcy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/sceneBoundingBoxHeirarcy */ \"./src/geometry/sceneBoundingBoxHeirarcy.ts\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n\n\n\n\n\nclass Scene {\n    constructor() {\n        this.renderLines = new Set();\n        this.renderMeshes = new Set();\n        this.renderPoints = new Set();\n        this.renderMeshesInstanced = new Set();\n        this.rootGeometry = new Set(); // stores geometry with no parents\n        this.geometry = new Set(); // stores all geometry\n        this.boundingBoxHeirarchy = new _geometry_sceneBoundingBoxHeirarcy__WEBPACK_IMPORTED_MODULE_2__.SceneBoundingBoxHeirarchy([]);\n        this.camera = new _camera__WEBPACK_IMPORTED_MODULE_0__.Camera(wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0.0, -80.0, 20.0), //position\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0.0, 0.0, 1.0), //up\n        wgpu_matrix__WEBPACK_IMPORTED_MODULE_4__.vec3.create(0.0, 1.0, 0.0), //forward\n        1, //fovy\n        document.getElementById(\"screen\"));\n    }\n    getRootGeometry() {\n        return this.rootGeometry.values();\n    }\n    containsGeometry(geo) {\n        return this.geometry.has(geo);\n    }\n    getConstructionPlane() {\n        return this.constructionPlane;\n    }\n    getBoundingBoxHeirarchy() {\n        return this.boundingBoxHeirarchy;\n    }\n    init() {\n        this.constructionPlane = new _constructionPlane__WEBPACK_IMPORTED_MODULE_1__.ConstructionPlane();\n    }\n    addGeometry(geo) {\n        this.boundingBoxHeirarchy.add(geo);\n        this.rootGeometry.add(geo);\n    }\n    removeGeometry(geo) {\n        this.boundingBoxHeirarchy.remove(geo);\n        this.rootGeometry.delete(geo);\n    }\n    addRenderMesh(mesh) { this.renderMeshes.add(mesh); }\n    addRenderMeshInstanced(mesh) { this.renderMeshesInstanced.add(mesh); }\n    addRenderLines(lines) { this.renderLines.add(lines); }\n    addRenderPoints(points) { this.renderPoints.add(points); }\n    getAllLines() { return this.renderLines.values(); }\n    getAllMeshes() { return this.renderMeshes.values(); }\n    getAllPoints() { return this.renderPoints.values(); }\n    getAllMeshesInstanced() { return this.renderMeshesInstanced.values(); }\n    removeMesh(renderMesh) { this.renderMeshes.delete(renderMesh); }\n    removeLines(renderLines) { this.renderLines.delete(renderLines); }\n    removePoints(renderPoints) { this.renderPoints.delete(renderPoints); }\n    removeMeshInstanced(renderMeshInstanced) { this.renderMeshesInstanced.delete(renderMeshInstanced); }\n    deleteSelected() {\n        for (const geo of this.rootGeometry.values()) {\n            if (geo.isSelected()) {\n                this.boundingBoxHeirarchy.remove(geo);\n                this.rootGeometry.delete(geo);\n                geo.delete();\n            }\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_3__.INSTANCE.getSelector().reset();\n    }\n    tick() {\n        this.camera.tick();\n        for (const line of this.renderLines.values()) {\n            line.update();\n        }\n        for (const mesh of this.renderMeshes.values()) {\n            mesh.update();\n        }\n        for (const point of this.renderPoints.values()) {\n            point.update();\n        }\n        for (const mesh of this.renderMeshesInstanced.values()) {\n            mesh.update();\n        }\n    }\n    getCamera() {\n        return this.camera;\n    }\n}\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFO1lBQzVDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO1FBQ0QsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQzdDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO1FBQ0QsS0FBSyxNQUFNLEtBQUssSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQzlDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNoQjtRQUNELEtBQUssTUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3RELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNmO0lBRUgsQ0FBQztJQUVNLFNBQVM7UUFDZCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztDQUVGO0FBQUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3NjZW5lL3NjZW5lLnRzP2M5YmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FtZXJhIH0gZnJvbSBcIi4vY2FtZXJhXCJcbmltcG9ydCB7IE1hdDQsIHZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIlxuaW1wb3J0IHsgUmVuZGVyTWVzaCB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyTWVzaFwiXG5pbXBvcnQgeyBSZW5kZXJMaW5lcyB9IGZyb20gXCIuLi9yZW5kZXIvcmVuZGVyTGluZXNcIlxuaW1wb3J0IHsgQ29uc3RydWN0aW9uUGxhbmUgfSBmcm9tIFwiLi9jb25zdHJ1Y3Rpb25QbGFuZVwiXG5pbXBvcnQgeyBSZW5kZXJQb2ludHMgfSBmcm9tIFwiLi4vcmVuZGVyL3JlbmRlclBvaW50c1wiXG5pbXBvcnQgeyBTY2VuZUJvdW5kaW5nQm94SGVpcmFyY2h5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3NjZW5lQm91bmRpbmdCb3hIZWlyYXJjeVwiXG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9nZW9tZXRyeS9nZW9tZXRyeVwiXG5pbXBvcnQgeyBSZW5kZXJNZXNoSW5zdGFuY2VkIH0gZnJvbSBcIi4uL3JlbmRlci9yZW50ZXJNZXNoSW5zdGFuY2VkXCJcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uL2NhZFwiXG5cbmV4cG9ydCBjbGFzcyBTY2VuZSB7XG5cbiAgcHJpdmF0ZSBjYW1lcmE6IENhbWVyYTtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rpb25QbGFuZSE6IENvbnN0cnVjdGlvblBsYW5lO1xuXG5cbiAgcHJpdmF0ZSByZW5kZXJMaW5lczogU2V0PFJlbmRlckxpbmVzPiA9IG5ldyBTZXQ8UmVuZGVyTGluZXM+KCk7XG4gIHByaXZhdGUgcmVuZGVyTWVzaGVzOiBTZXQ8UmVuZGVyTWVzaD4gPSBuZXcgU2V0PFJlbmRlck1lc2g+KCk7XG4gIHByaXZhdGUgcmVuZGVyUG9pbnRzOiBTZXQ8UmVuZGVyUG9pbnRzPiA9IG5ldyBTZXQ8UmVuZGVyUG9pbnRzPigpO1xuICBwcml2YXRlIHJlbmRlck1lc2hlc0luc3RhbmNlZDogU2V0PFJlbmRlck1lc2hJbnN0YW5jZWQ+ID0gbmV3IFNldDxSZW5kZXJNZXNoSW5zdGFuY2VkPigpO1xuXG4gIHByaXZhdGUgcm9vdEdlb21ldHJ5OiBTZXQ8R2VvbWV0cnk+ID0gbmV3IFNldDxHZW9tZXRyeT4oKTsgLy8gc3RvcmVzIGdlb21ldHJ5IHdpdGggbm8gcGFyZW50c1xuICBwcml2YXRlIGdlb21ldHJ5OiBTZXQ8R2VvbWV0cnk+ID0gbmV3IFNldDxHZW9tZXRyeT4oKTsgLy8gc3RvcmVzIGFsbCBnZW9tZXRyeVxuXG4gIHByaXZhdGUgYm91bmRpbmdCb3hIZWlyYXJjaHk6IFNjZW5lQm91bmRpbmdCb3hIZWlyYXJjaHkgPSBuZXcgU2NlbmVCb3VuZGluZ0JveEhlaXJhcmNoeShbXSk7XG5cbiAgY29uc3RydWN0b3IoXG4gICkge1xuXG4gICAgdGhpcy5jYW1lcmEgPSBuZXcgQ2FtZXJhKFxuICAgICAgdmVjMy5jcmVhdGUoMC4wLCAtODAuMCwgMjAuMCksXHQvL3Bvc2l0aW9uXG4gICAgICB2ZWMzLmNyZWF0ZSgwLjAsIDAuMCwgMS4wKSxcdC8vdXBcbiAgICAgIHZlYzMuY3JlYXRlKDAuMCwgMS4wLCAwLjApLFx0Ly9mb3J3YXJkXG4gICAgICAxLFx0XHQvL2ZvdnlcbiAgICAgIDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjcmVlblwiKVxuICAgICk7XG5cbiAgfVxuXG4gIHB1YmxpYyBnZXRSb290R2VvbWV0cnkoKTogSXRlcmFibGVJdGVyYXRvcjxHZW9tZXRyeT4ge1xuICAgIHJldHVybiB0aGlzLnJvb3RHZW9tZXRyeS52YWx1ZXMoKVxuICB9XG5cbiAgcHVibGljIGNvbnRhaW5zR2VvbWV0cnkoZ2VvOiBHZW9tZXRyeSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdlb21ldHJ5LmhhcyhnZW8pO1xuICB9XG5cbiAgcHVibGljIGdldENvbnN0cnVjdGlvblBsYW5lKCk6IENvbnN0cnVjdGlvblBsYW5lIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rpb25QbGFuZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCb3VuZGluZ0JveEhlaXJhcmNoeSgpOiBTY2VuZUJvdW5kaW5nQm94SGVpcmFyY2h5IHtcbiAgICByZXR1cm4gdGhpcy5ib3VuZGluZ0JveEhlaXJhcmNoeTtcbiAgfVxuXG4gIHB1YmxpYyBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMuY29uc3RydWN0aW9uUGxhbmUgPSBuZXcgQ29uc3RydWN0aW9uUGxhbmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRHZW9tZXRyeShnZW86IEdlb21ldHJ5KTogdm9pZCB7XG4gICAgdGhpcy5ib3VuZGluZ0JveEhlaXJhcmNoeS5hZGQoZ2VvKTtcbiAgICB0aGlzLnJvb3RHZW9tZXRyeS5hZGQoZ2VvKTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVHZW9tZXRyeShnZW86IEdlb21ldHJ5KTogdm9pZCB7XG4gICAgdGhpcy5ib3VuZGluZ0JveEhlaXJhcmNoeS5yZW1vdmUoZ2VvKTtcbiAgICB0aGlzLnJvb3RHZW9tZXRyeS5kZWxldGUoZ2VvKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRSZW5kZXJNZXNoKG1lc2g6IFJlbmRlck1lc2gpOiB2b2lkIHsgdGhpcy5yZW5kZXJNZXNoZXMuYWRkKG1lc2gpOyB9XG4gIHB1YmxpYyBhZGRSZW5kZXJNZXNoSW5zdGFuY2VkKG1lc2g6IFJlbmRlck1lc2hJbnN0YW5jZWQpOiB2b2lkIHsgdGhpcy5yZW5kZXJNZXNoZXNJbnN0YW5jZWQuYWRkKG1lc2gpOyB9XG4gIHB1YmxpYyBhZGRSZW5kZXJMaW5lcyhsaW5lczogUmVuZGVyTGluZXMpOiB2b2lkIHsgdGhpcy5yZW5kZXJMaW5lcy5hZGQobGluZXMpOyB9XG4gIHB1YmxpYyBhZGRSZW5kZXJQb2ludHMocG9pbnRzOiBSZW5kZXJQb2ludHMpOiB2b2lkIHsgdGhpcy5yZW5kZXJQb2ludHMuYWRkKHBvaW50cyk7IH1cblxuICBwdWJsaWMgZ2V0QWxsTGluZXMoKTogSXRlcmFibGVJdGVyYXRvcjxSZW5kZXJMaW5lcz4geyByZXR1cm4gdGhpcy5yZW5kZXJMaW5lcy52YWx1ZXMoKTsgfVxuICBwdWJsaWMgZ2V0QWxsTWVzaGVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8UmVuZGVyTWVzaD4geyByZXR1cm4gdGhpcy5yZW5kZXJNZXNoZXMudmFsdWVzKCk7IH1cbiAgcHVibGljIGdldEFsbFBvaW50cygpOiBJdGVyYWJsZUl0ZXJhdG9yPFJlbmRlclBvaW50cz4geyByZXR1cm4gdGhpcy5yZW5kZXJQb2ludHMudmFsdWVzKCk7IH1cbiAgcHVibGljIGdldEFsbE1lc2hlc0luc3RhbmNlZCgpOiBJdGVyYWJsZUl0ZXJhdG9yPFJlbmRlck1lc2hJbnN0YW5jZWQ+IHsgcmV0dXJuIHRoaXMucmVuZGVyTWVzaGVzSW5zdGFuY2VkLnZhbHVlcygpOyB9XG5cbiAgcHVibGljIHJlbW92ZU1lc2gocmVuZGVyTWVzaDogUmVuZGVyTWVzaCk6IHZvaWQgeyB0aGlzLnJlbmRlck1lc2hlcy5kZWxldGUocmVuZGVyTWVzaCk7IH1cbiAgcHVibGljIHJlbW92ZUxpbmVzKHJlbmRlckxpbmVzOiBSZW5kZXJMaW5lcyk6IHZvaWQgeyB0aGlzLnJlbmRlckxpbmVzLmRlbGV0ZShyZW5kZXJMaW5lcyk7IH1cbiAgcHVibGljIHJlbW92ZVBvaW50cyhyZW5kZXJQb2ludHM6IFJlbmRlclBvaW50cyk6IHZvaWQgeyB0aGlzLnJlbmRlclBvaW50cy5kZWxldGUocmVuZGVyUG9pbnRzKTsgfVxuICBwdWJsaWMgcmVtb3ZlTWVzaEluc3RhbmNlZChyZW5kZXJNZXNoSW5zdGFuY2VkOiBSZW5kZXJNZXNoSW5zdGFuY2VkKTogdm9pZCB7IHRoaXMucmVuZGVyTWVzaGVzSW5zdGFuY2VkLmRlbGV0ZShyZW5kZXJNZXNoSW5zdGFuY2VkKTsgfVxuXG5cbiAgcHVibGljIGRlbGV0ZVNlbGVjdGVkKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZ2VvIG9mIHRoaXMucm9vdEdlb21ldHJ5LnZhbHVlcygpKSB7XG4gICAgICBpZiAoZ2VvLmlzU2VsZWN0ZWQoKSkge1xuICAgICAgICB0aGlzLmJvdW5kaW5nQm94SGVpcmFyY2h5LnJlbW92ZShnZW8pO1xuICAgICAgICB0aGlzLnJvb3RHZW9tZXRyeS5kZWxldGUoZ2VvKTtcbiAgICAgICAgZ2VvLmRlbGV0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLnJlc2V0KCk7XG4gIH1cblxuICBwdWJsaWMgdGljaygpOiB2b2lkIHtcblxuICAgIHRoaXMuY2FtZXJhLnRpY2soKTtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGhpcy5yZW5kZXJMaW5lcy52YWx1ZXMoKSkge1xuICAgICAgbGluZS51cGRhdGUoKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBtZXNoIG9mIHRoaXMucmVuZGVyTWVzaGVzLnZhbHVlcygpKSB7XG4gICAgICBtZXNoLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHBvaW50IG9mIHRoaXMucmVuZGVyUG9pbnRzLnZhbHVlcygpKSB7XG4gICAgICBwb2ludC51cGRhdGUoKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBtZXNoIG9mIHRoaXMucmVuZGVyTWVzaGVzSW5zdGFuY2VkLnZhbHVlcygpKSB7XG4gICAgICBtZXNoLnVwZGF0ZSgpO1xuICAgIH1cblxuICB9XG5cbiAgcHVibGljIGdldENhbWVyYSgpOiBDYW1lcmEge1xuICAgIHJldHVybiB0aGlzLmNhbWVyYTtcbiAgfVxuXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/scene/scene.ts\n");

/***/ }),

/***/ "./src/settings/settingsManager.ts":
/*!*****************************************!*\
  !*** ./src/settings/settingsManager.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsManager: () => (/* binding */ SettingsManager)\n/* harmony export */ });\n/* harmony import */ var _snapsManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./snapsManager */ \"./src/settings/snapsManager.ts\");\n\nclass SettingsManager {\n    constructor() {\n        this.snapSettingsManager = new _snapsManager__WEBPACK_IMPORTED_MODULE_0__.SnapSettingsManager();\n    }\n    getSnapSettingsManager() {\n        return this.snapSettingsManager;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2V0dGluZ3Mvc2V0dGluZ3NNYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRTlDLE1BQU0sZUFBZTtJQUkxQjtRQUNFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLDhEQUFtQixFQUFFLENBQUM7SUFDdkQsQ0FBQztJQUVNLHNCQUFzQjtRQUMzQixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUNsQyxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9zZXR0aW5ncy9zZXR0aW5nc01hbmFnZXIudHM/ZjBmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTbmFwU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSBcIi4vc25hcHNNYW5hZ2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc01hbmFnZXIge1xuXG4gIHByaXZhdGUgc25hcFNldHRpbmdzTWFuYWdlcjogU25hcFNldHRpbmdzTWFuYWdlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNuYXBTZXR0aW5nc01hbmFnZXIgPSBuZXcgU25hcFNldHRpbmdzTWFuYWdlcigpO1xuICB9XG5cbiAgcHVibGljIGdldFNuYXBTZXR0aW5nc01hbmFnZXIoKTogU25hcFNldHRpbmdzTWFuYWdlciB7XG4gICAgcmV0dXJuIHRoaXMuc25hcFNldHRpbmdzTWFuYWdlcjtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/settings/settingsManager.ts\n");

/***/ }),

/***/ "./src/settings/snapsManager.ts":
/*!**************************************!*\
  !*** ./src/settings/snapsManager.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapSettings: () => (/* binding */ SnapSettings),\n/* harmony export */   SnapSettingsManager: () => (/* binding */ SnapSettingsManager)\n/* harmony export */ });\nclass SnapSettings {\n    constructor(snapGrid = true, snapLine = true, snapPoint = true, snapScreenPercent = false) {\n        this.snapGrid = snapGrid;\n        this.snapLine = snapLine;\n        this.snapPoint = snapPoint;\n        this.snapScreenPercent = snapScreenPercent;\n    }\n}\nclass SnapSettingsManager {\n    constructor() {\n        this.stack = [new SnapSettings()];\n    }\n    push(settings) {\n        this.stack.push(settings);\n    }\n    pop() {\n        this.stack.pop();\n    }\n    getSnapSettings() {\n        return this.stack.at(-1);\n    }\n    getHTML() {\n        const settings = this.stack.at(-1);\n        return `\n      <u>SNAPS:</u><br>\n      <br>\n      grid(${settings.snapGrid ? \"on\" : \"off\"})<br>\n      line(${settings.snapLine ? \"on\" : \"off\"})<br>\n      point(${settings.snapPoint ? \"on\" : \"off\"})<br>\n    `;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2V0dGluZ3Mvc25hcHNNYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRU8sTUFBTSxZQUFZO0lBRXZCLFlBQ1MsV0FBb0IsSUFBSSxFQUN4QixXQUFvQixJQUFJLEVBQ3hCLFlBQXFCLElBQUksRUFDekIsb0JBQTZCLEtBQUs7UUFIbEMsYUFBUSxHQUFSLFFBQVEsQ0FBZ0I7UUFDeEIsYUFBUSxHQUFSLFFBQVEsQ0FBZ0I7UUFDeEIsY0FBUyxHQUFULFNBQVMsQ0FBZ0I7UUFDekIsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFpQjtJQUczQyxDQUFDO0NBRUY7QUFHTSxNQUFNLG1CQUFtQjtJQUk5QjtRQUNFLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxJQUFJLFlBQVksRUFBRSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVNLElBQUksQ0FBQyxRQUFzQjtRQUNoQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRU0sR0FBRztRQUNSLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbkIsQ0FBQztJQUVNLGVBQWU7UUFDcEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBRSxDQUFDO0lBQzVCLENBQUM7SUFFTSxPQUFPO1FBQ1osTUFBTSxRQUFRLEdBQWlCLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFFLENBQUM7UUFDbEQsT0FBTzs7O2FBR0UsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLO2FBQ2hDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSztjQUMvQixRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUs7S0FDMUMsQ0FBQztJQUNKLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3NldHRpbmdzL3NuYXBzTWFuYWdlci50cz9kMzVlIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG5leHBvcnQgY2xhc3MgU25hcFNldHRpbmdzIHtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgc25hcEdyaWQ6IGJvb2xlYW4gPSB0cnVlLFxuICAgIHB1YmxpYyBzbmFwTGluZTogYm9vbGVhbiA9IHRydWUsXG4gICAgcHVibGljIHNuYXBQb2ludDogYm9vbGVhbiA9IHRydWUsXG4gICAgcHVibGljIHNuYXBTY3JlZW5QZXJjZW50OiBib29sZWFuID0gZmFsc2UsXG4gICkge1xuXG4gIH1cblxufVxuXG5cbmV4cG9ydCBjbGFzcyBTbmFwU2V0dGluZ3NNYW5hZ2VyIHtcblxuICBwcml2YXRlIHN0YWNrOiBTbmFwU2V0dGluZ3NbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0YWNrID0gW25ldyBTbmFwU2V0dGluZ3MoKV07XG4gIH1cblxuICBwdWJsaWMgcHVzaChzZXR0aW5nczogU25hcFNldHRpbmdzKTogdm9pZCB7XG4gICAgdGhpcy5zdGFjay5wdXNoKHNldHRpbmdzKTtcbiAgfVxuXG4gIHB1YmxpYyBwb3AoKTogdm9pZCB7XG4gICAgdGhpcy5zdGFjay5wb3AoKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTbmFwU2V0dGluZ3MoKTogU25hcFNldHRpbmdzIHtcbiAgICByZXR1cm4gdGhpcy5zdGFjay5hdCgtMSkhO1xuICB9XG5cbiAgcHVibGljIGdldEhUTUwoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZXR0aW5nczogU25hcFNldHRpbmdzID0gdGhpcy5zdGFjay5hdCgtMSkhO1xuICAgIHJldHVybiBgXG4gICAgICA8dT5TTkFQUzo8L3U+PGJyPlxuICAgICAgPGJyPlxuICAgICAgZ3JpZCgke3NldHRpbmdzLnNuYXBHcmlkID8gXCJvblwiIDogXCJvZmZcIn0pPGJyPlxuICAgICAgbGluZSgke3NldHRpbmdzLnNuYXBMaW5lID8gXCJvblwiIDogXCJvZmZcIn0pPGJyPlxuICAgICAgcG9pbnQoJHtzZXR0aW5ncy5zbmFwUG9pbnQgPyBcIm9uXCIgOiBcIm9mZlwifSk8YnI+XG4gICAgYDtcbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/settings/snapsManager.ts\n");

/***/ }),

/***/ "./src/stats.ts":
/*!**********************!*\
  !*** ./src/stats.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RenderStats: () => (/* binding */ RenderStats)\n/* harmony export */ });\nclass RenderStats {\n    constructor() {\n        this.framesOver100ms = 0;\n        this.trianglesCreated = 0;\n        this.drawCalls = 0;\n        this.reset();\n    }\n    reset() {\n        this.renderTime = NaN;\n        this.frameTime = NaN;\n        this.sceneTime = NaN;\n        this.startTime = Date.now();\n        this.totalFrames = 0;\n    }\n    setRenderTime(renderTime) {\n        this.renderTime = renderTime;\n    }\n    setFrameTime(frameTime) {\n        this.totalFrames++;\n        if (frameTime > 0.1)\n            this.framesOver100ms++;\n        this.frameTime = frameTime;\n    }\n    setSceneTime(sceneTime) {\n        this.sceneTime = sceneTime;\n    }\n    setDrawCalls(count) {\n        this.drawCalls = count;\n    }\n    onTrianglesCreated(count) {\n        this.trianglesCreated += count;\n    }\n    getInnerHTML() {\n        const fps = (1.0 / this.frameTime).toFixed(3);\n        const averageFps = (1000.0 * this.totalFrames / (Date.now() - this.startTime)).toFixed(3);\n        const html = \"<u>STATS:</u><br>\" +\n            \"<br>\" +\n            \"FPS: \" + fps + \"<br>\" +\n            \"Average FPS: \" + averageFps + \"<br>\" +\n            \"<br>\" +\n            \"Frame Time: \" + this.frameTime.toFixed(3) + \"<br>\" +\n            \"Render Time: \" + this.renderTime.toFixed(3) + \"<br>\" +\n            \"Scene Time: \" + this.sceneTime.toFixed(3) + \"<br>\" +\n            \"<br>\" +\n            \"Frames Over 100ms: \" + this.framesOver100ms.toString() + \"<br>\" +\n            \"<br>\" +\n            \"Draw Calls: \" + this.drawCalls.toString() + \"<br>\" +\n            \"Tris Created: \" + (this.trianglesCreated / 1000000).toFixed(2) + \"m\";\n        return html;\n    }\n}\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RhdHMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUNPLE1BQU0sV0FBVztJQVl0QjtRQUNFLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ2YsQ0FBQztJQUVNLEtBQUs7UUFDVixJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQztRQUN0QixJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztRQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztRQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM1QixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDO0lBRU0sYUFBYSxDQUFDLFVBQWtCO1FBQ3JDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0lBQy9CLENBQUM7SUFFTSxZQUFZLENBQUMsU0FBaUI7UUFDbkMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ25CLElBQUksU0FBUyxHQUFHLEdBQUc7WUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDNUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDN0IsQ0FBQztJQUVNLFlBQVksQ0FBQyxTQUFpQjtRQUNuQyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixDQUFDO0lBRU0sWUFBWSxDQUFDLEtBQWE7UUFDL0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQUVNLGtCQUFrQixDQUFDLEtBQWE7UUFDckMsSUFBSSxDQUFDLGdCQUFnQixJQUFJLEtBQUssQ0FBQztJQUNqQyxDQUFDO0lBRU0sWUFBWTtRQUNqQixNQUFNLEdBQUcsR0FBVyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RELE1BQU0sVUFBVSxHQUFXLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xHLE1BQU0sSUFBSSxHQUFXLG1CQUFtQjtZQUN0QyxNQUFNO1lBQ04sT0FBTyxHQUFHLEdBQUcsR0FBRyxNQUFNO1lBQ3RCLGVBQWUsR0FBRyxVQUFVLEdBQUcsTUFBTTtZQUNyQyxNQUFNO1lBQ04sY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU07WUFDbkQsZUFBZSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU07WUFDckQsY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU07WUFDbkQsTUFBTTtZQUNOLHFCQUFxQixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLEdBQUcsTUFBTTtZQUNoRSxNQUFNO1lBQ04sY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLEdBQUcsTUFBTTtZQUNuRCxnQkFBZ0IsR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQ3hFLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztDQUVGO0FBQUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3N0YXRzLnRzPzAyNWQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgY2xhc3MgUmVuZGVyU3RhdHMge1xuXG4gIC8vcHJpdmF0ZSBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSByZW5kZXJUaW1lITogbnVtYmVyO1xuICBwcml2YXRlIGZyYW1lVGltZSE6IG51bWJlcjtcbiAgcHJpdmF0ZSBzY2VuZVRpbWUhOiBudW1iZXI7XG4gIHByaXZhdGUgZnJhbWVzT3ZlcjEwMG1zITogbnVtYmVyO1xuICBwcml2YXRlIHRvdGFsRnJhbWVzITogbnVtYmVyO1xuICBwcml2YXRlIHN0YXJ0VGltZSE6IG51bWJlcjtcbiAgcHJpdmF0ZSBkcmF3Q2FsbHMhOiBudW1iZXI7XG4gIHByaXZhdGUgdHJpYW5nbGVzQ3JlYXRlZCE6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmZyYW1lc092ZXIxMDBtcyA9IDA7XG4gICAgdGhpcy50cmlhbmdsZXNDcmVhdGVkID0gMDtcbiAgICB0aGlzLmRyYXdDYWxscyA9IDA7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyVGltZSA9IE5hTjtcbiAgICB0aGlzLmZyYW1lVGltZSA9IE5hTjtcbiAgICB0aGlzLnNjZW5lVGltZSA9IE5hTjtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy50b3RhbEZyYW1lcyA9IDA7XG4gIH1cblxuICBwdWJsaWMgc2V0UmVuZGVyVGltZShyZW5kZXJUaW1lOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclRpbWUgPSByZW5kZXJUaW1lO1xuICB9XG5cbiAgcHVibGljIHNldEZyYW1lVGltZShmcmFtZVRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMudG90YWxGcmFtZXMrKztcbiAgICBpZiAoZnJhbWVUaW1lID4gMC4xKSB0aGlzLmZyYW1lc092ZXIxMDBtcysrO1xuICAgIHRoaXMuZnJhbWVUaW1lID0gZnJhbWVUaW1lO1xuICB9XG5cbiAgcHVibGljIHNldFNjZW5lVGltZShzY2VuZVRpbWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc2NlbmVUaW1lID0gc2NlbmVUaW1lO1xuICB9XG5cbiAgcHVibGljIHNldERyYXdDYWxscyhjb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5kcmF3Q2FsbHMgPSBjb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBvblRyaWFuZ2xlc0NyZWF0ZWQoY291bnQ6IG51bWJlcikge1xuICAgIHRoaXMudHJpYW5nbGVzQ3JlYXRlZCArPSBjb3VudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbm5lckhUTUwoKTogc3RyaW5nIHtcbiAgICBjb25zdCBmcHM6IHN0cmluZyA9ICgxLjAgLyB0aGlzLmZyYW1lVGltZSkudG9GaXhlZCgzKTtcbiAgICBjb25zdCBhdmVyYWdlRnBzOiBzdHJpbmcgPSAoMTAwMC4wICogdGhpcy50b3RhbEZyYW1lcyAvIChEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWUpKS50b0ZpeGVkKDMpO1xuICAgIGNvbnN0IGh0bWw6IHN0cmluZyA9IFwiPHU+U1RBVFM6PC91Pjxicj5cIiArXG4gICAgICBcIjxicj5cIiArXG4gICAgICBcIkZQUzogXCIgKyBmcHMgKyBcIjxicj5cIiArXG4gICAgICBcIkF2ZXJhZ2UgRlBTOiBcIiArIGF2ZXJhZ2VGcHMgKyBcIjxicj5cIiArXG4gICAgICBcIjxicj5cIiArXG4gICAgICBcIkZyYW1lIFRpbWU6IFwiICsgdGhpcy5mcmFtZVRpbWUudG9GaXhlZCgzKSArIFwiPGJyPlwiICtcbiAgICAgIFwiUmVuZGVyIFRpbWU6IFwiICsgdGhpcy5yZW5kZXJUaW1lLnRvRml4ZWQoMykgKyBcIjxicj5cIiArXG4gICAgICBcIlNjZW5lIFRpbWU6IFwiICsgdGhpcy5zY2VuZVRpbWUudG9GaXhlZCgzKSArIFwiPGJyPlwiICtcbiAgICAgIFwiPGJyPlwiICtcbiAgICAgIFwiRnJhbWVzIE92ZXIgMTAwbXM6IFwiICsgdGhpcy5mcmFtZXNPdmVyMTAwbXMudG9TdHJpbmcoKSArIFwiPGJyPlwiICtcbiAgICAgIFwiPGJyPlwiICtcbiAgICAgIFwiRHJhdyBDYWxsczogXCIgKyB0aGlzLmRyYXdDYWxscy50b1N0cmluZygpICsgXCI8YnI+XCIgK1xuICAgICAgXCJUcmlzIENyZWF0ZWQ6IFwiICsgKHRoaXMudHJpYW5nbGVzQ3JlYXRlZCAvIDEwMDAwMDApLnRvRml4ZWQoMikgKyBcIm1cIjtcbiAgICByZXR1cm4gaHRtbDtcbiAgfVxuXG59O1xuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/stats.ts\n");

/***/ }),

/***/ "./src/tests/testSceneSphere.ts":
/*!**************************************!*\
  !*** ./src/tests/testSceneSphere.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addTestSceneSphere: () => (/* binding */ addTestSceneSphere)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_nurbs_sphere__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/nurbs/sphere */ \"./src/geometry/nurbs/sphere.ts\");\n\n\n\nconst addTestSceneSphere = function () {\n    const sphereRed = (0,_geometry_nurbs_sphere__WEBPACK_IMPORTED_MODULE_1__.createSphere)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(-30, 0, 15), 15);\n    sphereRed.setMaterial(\"red\");\n    const sphereGreen = (0,_geometry_nurbs_sphere__WEBPACK_IMPORTED_MODULE_1__.createSphere)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(-0, 0, 15), 15);\n    sphereGreen.setMaterial(\"green\");\n    const sphereBlue = (0,_geometry_nurbs_sphere__WEBPACK_IMPORTED_MODULE_1__.createSphere)(wgpu_matrix__WEBPACK_IMPORTED_MODULE_2__.vec3.create(30, 0, 15), 15);\n    sphereBlue.setMaterial(\"blue\");\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(sphereRed);\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(sphereGreen);\n    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().addGeometry(sphereBlue);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdGVzdHMvdGVzdFNjZW5lU3BoZXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFa0M7QUFDRDtBQUN1QjtBQUdqRCxNQUFNLGtCQUFrQixHQUFHO0lBRWhDLE1BQU0sU0FBUyxHQUFZLG9FQUFZLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3JFLFNBQVMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFN0IsTUFBTSxXQUFXLEdBQVksb0VBQVksQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdEUsV0FBVyxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUVqQyxNQUFNLFVBQVUsR0FBWSxvRUFBWSxDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDckUsVUFBVSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUUvQiwwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUMzQywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM3QywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM5QyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvdGVzdHMvdGVzdFNjZW5lU3BoZXJlLnRzP2JiYmQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmltcG9ydCB7IHZlYzMgfSBmcm9tIFwid2dwdS1tYXRyaXhcIlxuaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vY2FkXCJcbmltcG9ydCB7IGNyZWF0ZVNwaGVyZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9udXJicy9zcGhlcmVcIjtcbmltcG9ydCB7IFN1cmZhY2UgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvbnVyYnMvc3VyZmFjZVwiO1xuXG5leHBvcnQgY29uc3QgYWRkVGVzdFNjZW5lU3BoZXJlID0gZnVuY3Rpb24oKSB7XG5cbiAgY29uc3Qgc3BoZXJlUmVkOiBTdXJmYWNlID0gY3JlYXRlU3BoZXJlKHZlYzMuY3JlYXRlKC0zMCwgMCwgMTUpLCAxNSk7XG4gIHNwaGVyZVJlZC5zZXRNYXRlcmlhbChcInJlZFwiKTtcblxuICBjb25zdCBzcGhlcmVHcmVlbjogU3VyZmFjZSA9IGNyZWF0ZVNwaGVyZSh2ZWMzLmNyZWF0ZSgtMCwgMCwgMTUpLCAxNSk7XG4gIHNwaGVyZUdyZWVuLnNldE1hdGVyaWFsKFwiZ3JlZW5cIik7XG5cbiAgY29uc3Qgc3BoZXJlQmx1ZTogU3VyZmFjZSA9IGNyZWF0ZVNwaGVyZSh2ZWMzLmNyZWF0ZSgzMCwgMCwgMTUpLCAxNSk7XG4gIHNwaGVyZUJsdWUuc2V0TWF0ZXJpYWwoXCJibHVlXCIpO1xuXG4gIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoc3BoZXJlUmVkKTtcbiAgSU5TVEFOQ0UuZ2V0U2NlbmUoKS5hZGRHZW9tZXRyeShzcGhlcmVHcmVlbik7XG4gIElOU1RBTkNFLmdldFNjZW5lKCkuYWRkR2VvbWV0cnkoc3BoZXJlQmx1ZSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/tests/testSceneSphere.ts\n");

/***/ }),

/***/ "./src/utils/clone.ts":
/*!****************************!*\
  !*** ./src/utils/clone.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cloneMat4List: () => (/* binding */ cloneMat4List),\n/* harmony export */   cloneVec3List: () => (/* binding */ cloneVec3List),\n/* harmony export */   cloneVec3ListList: () => (/* binding */ cloneVec3ListList),\n/* harmony export */   cloneVec4List: () => (/* binding */ cloneVec4List),\n/* harmony export */   cloneVec4ListList: () => (/* binding */ cloneVec4ListList)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n\nconst cloneVec3List = function (l) {\n    const res = [];\n    for (let v of l)\n        res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.clone(v));\n    return res;\n};\nconst cloneVec3ListList = function (l) {\n    const res = [];\n    let i = 0;\n    for (let v1 of l) {\n        res.push([]);\n        for (let v2 of v1) {\n            res[i].push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.clone(v2));\n        }\n        i++;\n    }\n    return res;\n};\nconst cloneVec4List = function (l) {\n    const res = [];\n    for (let v of l)\n        res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec4.clone(v));\n    return res;\n};\nconst cloneVec4ListList = function (l) {\n    const res = [];\n    let i = 0;\n    for (let v1 of l) {\n        res.push([]);\n        for (let v2 of v1) {\n            res[i].push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec4.clone(v2));\n        }\n        i++;\n    }\n    return res;\n};\nconst cloneMat4List = function (l) {\n    const res = [];\n    for (let m of l)\n        res.push(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.clone(m));\n    return res;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvY2xvbmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdFO0FBR3pELE1BQU0sYUFBYSxHQUFHLFVBQVMsQ0FBUztJQUM3QyxNQUFNLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDdkIsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVNLE1BQU0saUJBQWlCLEdBQUcsVUFBUyxDQUFXO0lBQ25ELE1BQU0sR0FBRyxHQUFhLEVBQUUsQ0FBQztJQUN6QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDVixLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRTtRQUNoQixHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2IsS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7WUFDakIsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQzdCO1FBQ0QsQ0FBQyxFQUFFLENBQUM7S0FDTDtJQUNELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVNLE1BQU0sYUFBYSxHQUFHLFVBQVMsQ0FBUztJQUM3QyxNQUFNLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDdkIsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUNNLE1BQU0saUJBQWlCLEdBQUcsVUFBUyxDQUFXO0lBQ25ELE1BQU0sR0FBRyxHQUFhLEVBQUUsQ0FBQztJQUN6QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDVixLQUFLLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRTtRQUNoQixHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2IsS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLEVBQUU7WUFDakIsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQzdCO1FBQ0QsQ0FBQyxFQUFFLENBQUM7S0FDTDtJQUNELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUNNLE1BQU0sYUFBYSxHQUFHLFVBQVMsQ0FBUztJQUM3QyxNQUFNLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDdkIsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3V0aWxzL2Nsb25lLnRzPzNhY2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWF0NCwgbWF0NCwgdmVjMywgVmVjMywgdmVjNCwgVmVjNCB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiXG5cblxuZXhwb3J0IGNvbnN0IGNsb25lVmVjM0xpc3QgPSBmdW5jdGlvbihsOiBWZWMzW10pOiBWZWMzW10ge1xuICBjb25zdCByZXM6IFZlYzNbXSA9IFtdO1xuICBmb3IgKGxldCB2IG9mIGwpIHJlcy5wdXNoKHZlYzMuY2xvbmUodikpO1xuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgY29uc3QgY2xvbmVWZWMzTGlzdExpc3QgPSBmdW5jdGlvbihsOiBWZWMzW11bXSk6IFZlYzNbXVtdIHtcbiAgY29uc3QgcmVzOiBWZWMzW11bXSA9IFtdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IHYxIG9mIGwpIHtcbiAgICByZXMucHVzaChbXSk7XG4gICAgZm9yIChsZXQgdjIgb2YgdjEpIHtcbiAgICAgIHJlc1tpXS5wdXNoKHZlYzMuY2xvbmUodjIpKTtcbiAgICB9XG4gICAgaSsrO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbmV4cG9ydCBjb25zdCBjbG9uZVZlYzRMaXN0ID0gZnVuY3Rpb24obDogVmVjNFtdKTogVmVjNFtdIHtcbiAgY29uc3QgcmVzOiBWZWM0W10gPSBbXTtcbiAgZm9yIChsZXQgdiBvZiBsKSByZXMucHVzaCh2ZWM0LmNsb25lKHYpKTtcbiAgcmV0dXJuIHJlcztcbn1cbmV4cG9ydCBjb25zdCBjbG9uZVZlYzRMaXN0TGlzdCA9IGZ1bmN0aW9uKGw6IFZlYzRbXVtdKTogVmVjNFtdW10ge1xuICBjb25zdCByZXM6IFZlYzRbXVtdID0gW107XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQgdjEgb2YgbCkge1xuICAgIHJlcy5wdXNoKFtdKTtcbiAgICBmb3IgKGxldCB2MiBvZiB2MSkge1xuICAgICAgcmVzW2ldLnB1c2godmVjNC5jbG9uZSh2MikpO1xuICAgIH1cbiAgICBpKys7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cbmV4cG9ydCBjb25zdCBjbG9uZU1hdDRMaXN0ID0gZnVuY3Rpb24obDogTWF0NFtdKTogTWF0NFtdIHtcbiAgY29uc3QgcmVzOiBNYXQ0W10gPSBbXTtcbiAgZm9yIChsZXQgbSBvZiBsKSByZXMucHVzaChtYXQ0LmNsb25lKG0pKTtcbiAgcmV0dXJuIHJlcztcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/clone.ts\n");

/***/ }),

/***/ "./src/utils/math.ts":
/*!***************************!*\
  !*** ./src/utils/math.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   angleBetween: () => (/* binding */ angleBetween),\n/* harmony export */   bin: () => (/* binding */ bin),\n/* harmony export */   changeOfBasis: () => (/* binding */ changeOfBasis),\n/* harmony export */   getMirrorTransform: () => (/* binding */ getMirrorTransform),\n/* harmony export */   getRotationTransform: () => (/* binding */ getRotationTransform),\n/* harmony export */   getScale1Transform: () => (/* binding */ getScale1Transform),\n/* harmony export */   getScaleTransform: () => (/* binding */ getScaleTransform),\n/* harmony export */   getShearTransform: () => (/* binding */ getShearTransform),\n/* harmony export */   lerp: () => (/* binding */ lerp),\n/* harmony export */   mirrorVector: () => (/* binding */ mirrorVector),\n/* harmony export */   scale1Vector: () => (/* binding */ scale1Vector),\n/* harmony export */   swizzleYZ: () => (/* binding */ swizzleYZ),\n/* harmony export */   swizzleYZVec3: () => (/* binding */ swizzleYZVec3)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n\nconst swizzleYZ = function (mat) {\n    [mat[1], mat[2]] = [mat[2], mat[1]];\n    [mat[7], mat[11]] = [mat[11], mat[7]];\n    [mat[14], mat[13]] = [mat[13], mat[14]];\n    [mat[8], mat[4]] = [mat[4], mat[8]];\n    [mat[6], mat[9]] = [mat[9], mat[6]];\n    [mat[5], mat[10]] = [mat[10], mat[5]];\n    return mat;\n};\nconst swizzleYZVec3 = function (v) {\n    [v[1], v[2]] = [v[2], v[1]];\n    return v;\n};\nconst bin = function (a, b) {\n    let res = 1;\n    for (let i = a; i > a - b; i--)\n        res *= i;\n    for (let i = 2; i <= b; i++)\n        res = res / i;\n    return res;\n};\nconst angleBetween = function (a, b) {\n    return Math.acos(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.normalize(a), wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.normalize(b)));\n};\nconst mirrorVector = function (v, plane) {\n    const d = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.dot(v, plane.getNormal());\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.sub(v, wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(plane.getNormal(), 2 * d));\n};\nconst getMirrorTransform = function (plane) {\n    const newX = mirrorVector(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create(1, 0, 0), plane);\n    const newY = mirrorVector(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create(0, 1, 0), plane);\n    const newZ = mirrorVector(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create(0, 0, 1), plane);\n    const mirrorTransform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.create(...newX, 0, ...newY, 0, ...newZ, 0, 0, 0, 0, 1);\n    const toOrigin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(plane.getOrigin(), -1));\n    const toPos = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(plane.getOrigin());\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(toPos, mirrorTransform), toOrigin);\n};\nconst scale1Vector = function (v, factor, plane) {\n    const d = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.dot(v, plane.getNormal());\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.add(v, wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(plane.getNormal(), d * factor - d));\n};\nconst getScale1Transform = function (plane, factor) {\n    const newX = scale1Vector(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create(1, 0, 0), factor, plane);\n    const newY = scale1Vector(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create(0, 1, 0), factor, plane);\n    const newZ = scale1Vector(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.create(0, 0, 1), factor, plane);\n    const scaleTransform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.create(...newX, 0, ...newY, 0, ...newZ, 0, 0, 0, 0, 1);\n    const toOrigin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(plane.getOrigin(), -1));\n    const toPos = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(plane.getOrigin());\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(toPos, scaleTransform), toOrigin);\n};\nconst getRotationTransform = function (axis, theta) {\n    const rotation = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.axisRotate(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.identity(), axis.getDirection(), theta);\n    const toOrigin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(axis.getOrigin(), -1));\n    const toPos = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(axis.getOrigin());\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(toPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(rotation, toOrigin));\n};\nconst changeOfBasis = function (fromX, fromY, fromZ, fromO, toX, toY, toZ, toO) {\n    const from = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.create(...fromX, 0, ...fromY, 0, ...fromZ, 0, ...fromO, 1);\n    const to = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.create(...toX, 0, ...toY, 0, ...toZ, 0, ...toO, 1);\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(to, wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.inverse(from));\n};\nconst getScaleTransform = function (center, factor) {\n    const scaleTransform = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.uniformScaling(factor);\n    const toOrigin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(center, -1));\n    const toPos = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.translation(center);\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(toPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(scaleTransform, toOrigin));\n};\n// from and to are vectors from planes origin to point\nconst getShearTransform = function (plane, from, to) {\n    const origin = plane.getOrigin();\n    const normal = plane.getNormal();\n    const distFrom = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.dot(normal, from);\n    const distTo = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.dot(normal, to);\n    const newTo = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.sub(to, wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(normal, distTo - distFrom)); //\n    const shearVector = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.sub(newTo, from), 1 / distFrom);\n    const [xAxis, yAxis] = plane.getXY();\n    const fromMat = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.create(...xAxis, 0, ...yAxis, 0, ...normal, 0, ...origin, 1);\n    const toMat = wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.create(...xAxis, 0, ...yAxis, 0, ...wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.vec3.add(normal, shearVector), 0, ...origin, 1);\n    return wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.mul(toMat, wgpu_matrix__WEBPACK_IMPORTED_MODULE_0__.mat4.inverse(fromMat));\n};\nconst lerp = function (a, b, r) {\n    return a * (1 - r) + b * r;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxDQUFDLENBQUMsRUFBRTtJQUUzRSxNQUFNLFdBQVcsR0FBUyw2Q0FBSSxDQUFDLEtBQUssQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDO0lBRTFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBRXJDLE1BQU0sT0FBTyxHQUFTLDZDQUFJLENBQUMsTUFBTSxDQUMvQixHQUFHLEtBQUssRUFBRSxDQUFDLEVBQ1gsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUNYLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFDWixHQUFHLE1BQU0sRUFBRSxDQUFDLENBQ2IsQ0FBQztJQUNGLE1BQU0sS0FBSyxHQUFTLDZDQUFJLENBQUMsTUFBTSxDQUM3QixHQUFHLEtBQUssRUFBRSxDQUFDLEVBQ1gsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUNYLEdBQUcsNkNBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxFQUFFLENBQUMsRUFDbkMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxDQUNiLENBQUM7SUFDRixPQUFPLDZDQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSw2Q0FBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBRWhELENBQUM7QUFHTSxNQUFNLElBQUksR0FBRyxVQUFTLENBQVMsRUFBRSxDQUFTLEVBQUUsQ0FBUztJQUMxRCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy91dGlscy9tYXRoLnRzP2IyY2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF0NCwgTWF0NCwgVmVjMywgdmVjMyB9IGZyb20gXCJ3Z3B1LW1hdHJpeFwiO1xuaW1wb3J0IHsgUGxhbmUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvcGxhbmVcIjtcbmltcG9ydCB7IFJheSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yYXlcIjtcblxuXG5leHBvcnQgY29uc3Qgc3dpenpsZVlaID0gZnVuY3Rpb24obWF0OiBNYXQ0KTogTWF0NCB7XG4gIFttYXRbMV0sIG1hdFsyXV0gPSBbbWF0WzJdLCBtYXRbMV1dO1xuICBbbWF0WzddLCBtYXRbMTFdXSA9IFttYXRbMTFdLCBtYXRbN11dO1xuICBbbWF0WzE0XSwgbWF0WzEzXV0gPSBbbWF0WzEzXSwgbWF0WzE0XV07XG4gIFttYXRbOF0sIG1hdFs0XV0gPSBbbWF0WzRdLCBtYXRbOF1dO1xuICBbbWF0WzZdLCBtYXRbOV1dID0gW21hdFs5XSwgbWF0WzZdXTtcbiAgW21hdFs1XSwgbWF0WzEwXV0gPSBbbWF0WzEwXSwgbWF0WzVdXTtcbiAgcmV0dXJuIG1hdDtcbn1cbmV4cG9ydCBjb25zdCBzd2l6emxlWVpWZWMzID0gZnVuY3Rpb24odjogVmVjMyk6IFZlYzMge1xuICBbdlsxXSwgdlsyXV0gPSBbdlsyXSwgdlsxXV07XG4gIHJldHVybiB2O1xufVxuZXhwb3J0IGNvbnN0IGJpbiA9IGZ1bmN0aW9uKGE6IG51bWJlciwgYjogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IHJlczogbnVtYmVyID0gMTtcbiAgZm9yIChsZXQgaSA9IGE7IGkgPiBhIC0gYjsgaS0tKSByZXMgKj0gaTtcbiAgZm9yIChsZXQgaSA9IDI7IGkgPD0gYjsgaSsrKSByZXMgPSByZXMgLyBpO1xuICByZXR1cm4gcmVzO1xufTtcblxuZXhwb3J0IGNvbnN0IGFuZ2xlQmV0d2VlbiA9IGZ1bmN0aW9uKGE6IFZlYzMsIGI6IFZlYzMpOiBudW1iZXIge1xuICByZXR1cm4gTWF0aC5hY29zKHZlYzMuZG90KHZlYzMubm9ybWFsaXplKGEpLCB2ZWMzLm5vcm1hbGl6ZShiKSkpO1xufVxuXG5leHBvcnQgY29uc3QgbWlycm9yVmVjdG9yID0gZnVuY3Rpb24odjogVmVjMywgcGxhbmU6IFBsYW5lKTogVmVjMyB7XG4gIGNvbnN0IGQ6IG51bWJlciA9IHZlYzMuZG90KHYsIHBsYW5lLmdldE5vcm1hbCgpKTtcbiAgcmV0dXJuIHZlYzMuc3ViKHYsIHZlYzMuc2NhbGUocGxhbmUuZ2V0Tm9ybWFsKCksIDIgKiBkKSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRNaXJyb3JUcmFuc2Zvcm0gPSBmdW5jdGlvbihwbGFuZTogUGxhbmUpOiBNYXQ0IHtcbiAgY29uc3QgbmV3WDogVmVjMyA9IG1pcnJvclZlY3Rvcih2ZWMzLmNyZWF0ZSgxLCAwLCAwKSwgcGxhbmUpO1xuICBjb25zdCBuZXdZOiBWZWMzID0gbWlycm9yVmVjdG9yKHZlYzMuY3JlYXRlKDAsIDEsIDApLCBwbGFuZSk7XG4gIGNvbnN0IG5ld1o6IFZlYzMgPSBtaXJyb3JWZWN0b3IodmVjMy5jcmVhdGUoMCwgMCwgMSksIHBsYW5lKTtcbiAgY29uc3QgbWlycm9yVHJhbnNmb3JtOiBNYXQ0ID0gbWF0NC5jcmVhdGUoXG4gICAgLi4ubmV3WCwgMCxcbiAgICAuLi5uZXdZLCAwLFxuICAgIC4uLm5ld1osIDAsXG4gICAgMCwgMCwgMCwgMVxuICApO1xuICBjb25zdCB0b09yaWdpbiA9IG1hdDQudHJhbnNsYXRpb24odmVjMy5zY2FsZShwbGFuZS5nZXRPcmlnaW4oKSwgLTEpKTtcbiAgY29uc3QgdG9Qb3MgPSBtYXQ0LnRyYW5zbGF0aW9uKHBsYW5lLmdldE9yaWdpbigpKTtcbiAgcmV0dXJuIG1hdDQubXVsKG1hdDQubXVsKHRvUG9zLCBtaXJyb3JUcmFuc2Zvcm0pLCB0b09yaWdpbik7XG59XG5cbmV4cG9ydCBjb25zdCBzY2FsZTFWZWN0b3IgPSBmdW5jdGlvbih2OiBWZWMzLCBmYWN0b3I6IG51bWJlciwgcGxhbmU6IFBsYW5lKTogVmVjMyB7XG4gIGNvbnN0IGQ6IG51bWJlciA9IHZlYzMuZG90KHYsIHBsYW5lLmdldE5vcm1hbCgpKTtcbiAgcmV0dXJuIHZlYzMuYWRkKHYsIHZlYzMuc2NhbGUocGxhbmUuZ2V0Tm9ybWFsKCksIGQgKiBmYWN0b3IgLSBkKSk7XG59XG5cbmV4cG9ydCBjb25zdCBnZXRTY2FsZTFUcmFuc2Zvcm0gPSBmdW5jdGlvbihwbGFuZTogUGxhbmUsIGZhY3RvcjogbnVtYmVyKTogTWF0NCB7XG4gIGNvbnN0IG5ld1g6IFZlYzMgPSBzY2FsZTFWZWN0b3IodmVjMy5jcmVhdGUoMSwgMCwgMCksIGZhY3RvciwgcGxhbmUpO1xuICBjb25zdCBuZXdZOiBWZWMzID0gc2NhbGUxVmVjdG9yKHZlYzMuY3JlYXRlKDAsIDEsIDApLCBmYWN0b3IsIHBsYW5lKTtcbiAgY29uc3QgbmV3WjogVmVjMyA9IHNjYWxlMVZlY3Rvcih2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgZmFjdG9yLCBwbGFuZSk7XG4gIGNvbnN0IHNjYWxlVHJhbnNmb3JtOiBNYXQ0ID0gbWF0NC5jcmVhdGUoXG4gICAgLi4ubmV3WCwgMCxcbiAgICAuLi5uZXdZLCAwLFxuICAgIC4uLm5ld1osIDAsXG4gICAgMCwgMCwgMCwgMVxuICApO1xuICBjb25zdCB0b09yaWdpbiA9IG1hdDQudHJhbnNsYXRpb24odmVjMy5zY2FsZShwbGFuZS5nZXRPcmlnaW4oKSwgLTEpKTtcbiAgY29uc3QgdG9Qb3MgPSBtYXQ0LnRyYW5zbGF0aW9uKHBsYW5lLmdldE9yaWdpbigpKTtcbiAgcmV0dXJuIG1hdDQubXVsKG1hdDQubXVsKHRvUG9zLCBzY2FsZVRyYW5zZm9ybSksIHRvT3JpZ2luKTtcbn1cblxuXG5leHBvcnQgY29uc3QgZ2V0Um90YXRpb25UcmFuc2Zvcm0gPSBmdW5jdGlvbihheGlzOiBSYXksIHRoZXRhOiBudW1iZXIpOiBNYXQ0IHtcbiAgY29uc3Qgcm90YXRpb246IE1hdDQgPSBtYXQ0LmF4aXNSb3RhdGUobWF0NC5pZGVudGl0eSgpLCBheGlzLmdldERpcmVjdGlvbigpLCB0aGV0YSk7XG4gIGNvbnN0IHRvT3JpZ2luOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbih2ZWMzLnNjYWxlKGF4aXMuZ2V0T3JpZ2luKCksIC0xKSk7XG4gIGNvbnN0IHRvUG9zOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbihheGlzLmdldE9yaWdpbigpKTtcbiAgcmV0dXJuIG1hdDQubXVsKHRvUG9zLCBtYXQ0Lm11bChyb3RhdGlvbiwgdG9PcmlnaW4pKTtcbn1cblxuZXhwb3J0IGNvbnN0IGNoYW5nZU9mQmFzaXMgPSBmdW5jdGlvbihcbiAgZnJvbVg6IFZlYzMsIGZyb21ZOiBWZWMzLCBmcm9tWjogVmVjMywgZnJvbU86IFZlYzMsXG4gIHRvWDogVmVjMywgdG9ZOiBWZWMzLCB0b1o6IFZlYzMsIHRvTzogVmVjMyxcbik6IE1hdDQge1xuICBjb25zdCBmcm9tOiBNYXQ0ID0gbWF0NC5jcmVhdGUoXG4gICAgLi4uZnJvbVgsIDAsXG4gICAgLi4uZnJvbVksIDAsXG4gICAgLi4uZnJvbVosIDAsXG4gICAgLi4uZnJvbU8sIDFcbiAgKTtcbiAgY29uc3QgdG86IE1hdDQgPSBtYXQ0LmNyZWF0ZShcbiAgICAuLi50b1gsIDAsXG4gICAgLi4udG9ZLCAwLFxuICAgIC4uLnRvWiwgMCxcbiAgICAuLi50b08sIDFcbiAgKTtcbiAgcmV0dXJuIG1hdDQubXVsKHRvLCBtYXQ0LmludmVyc2UoZnJvbSkpO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0U2NhbGVUcmFuc2Zvcm0gPSBmdW5jdGlvbihjZW50ZXI6IFZlYzMsIGZhY3RvcjogbnVtYmVyKTogTWF0NCB7XG4gIGNvbnN0IHNjYWxlVHJhbnNmb3JtOiBNYXQ0ID0gbWF0NC51bmlmb3JtU2NhbGluZyhmYWN0b3IpO1xuICBjb25zdCB0b09yaWdpbjogTWF0NCA9IG1hdDQudHJhbnNsYXRpb24odmVjMy5zY2FsZShjZW50ZXIsIC0xKSk7XG4gIGNvbnN0IHRvUG9zOiBNYXQ0ID0gbWF0NC50cmFuc2xhdGlvbihjZW50ZXIpO1xuICByZXR1cm4gbWF0NC5tdWwodG9Qb3MsIG1hdDQubXVsKHNjYWxlVHJhbnNmb3JtLCB0b09yaWdpbikpO1xufVxuXG4vLyBmcm9tIGFuZCB0byBhcmUgdmVjdG9ycyBmcm9tIHBsYW5lcyBvcmlnaW4gdG8gcG9pbnRcbmV4cG9ydCBjb25zdCBnZXRTaGVhclRyYW5zZm9ybSA9IGZ1bmN0aW9uKHBsYW5lOiBQbGFuZSwgZnJvbTogVmVjMywgdG86IFZlYzMpOiBNYXQ0IHtcblxuICBjb25zdCBvcmlnaW46IFZlYzMgPSBwbGFuZS5nZXRPcmlnaW4oKTtcbiAgY29uc3Qgbm9ybWFsOiBWZWMzID0gcGxhbmUuZ2V0Tm9ybWFsKCk7XG5cbiAgY29uc3QgZGlzdEZyb206IG51bWJlciA9IHZlYzMuZG90KG5vcm1hbCwgZnJvbSk7XG5cbiAgY29uc3QgZGlzdFRvOiBudW1iZXIgPSB2ZWMzLmRvdChub3JtYWwsIHRvKTtcbiAgY29uc3QgbmV3VG86IFZlYzMgPSB2ZWMzLnN1Yih0bywgdmVjMy5zY2FsZShub3JtYWwsIGRpc3RUbyAtIGRpc3RGcm9tKSk7IC8vXG5cbiAgY29uc3Qgc2hlYXJWZWN0b3I6IFZlYzMgPSB2ZWMzLnNjYWxlKHZlYzMuc3ViKG5ld1RvLCBmcm9tKSwgMSAvIGRpc3RGcm9tKTtcblxuICBjb25zdCBbeEF4aXMsIHlBeGlzXSA9IHBsYW5lLmdldFhZKCk7XG5cbiAgY29uc3QgZnJvbU1hdDogTWF0NCA9IG1hdDQuY3JlYXRlKFxuICAgIC4uLnhBeGlzLCAwLFxuICAgIC4uLnlBeGlzLCAwLFxuICAgIC4uLm5vcm1hbCwgMCxcbiAgICAuLi5vcmlnaW4sIDFcbiAgKTtcbiAgY29uc3QgdG9NYXQ6IE1hdDQgPSBtYXQ0LmNyZWF0ZShcbiAgICAuLi54QXhpcywgMCxcbiAgICAuLi55QXhpcywgMCxcbiAgICAuLi52ZWMzLmFkZChub3JtYWwsIHNoZWFyVmVjdG9yKSwgMCxcbiAgICAuLi5vcmlnaW4sIDFcbiAgKTtcbiAgcmV0dXJuIG1hdDQubXVsKHRvTWF0LCBtYXQ0LmludmVyc2UoZnJvbU1hdCkpO1xuXG59XG5cblxuZXhwb3J0IGNvbnN0IGxlcnAgPSBmdW5jdGlvbihhOiBudW1iZXIsIGI6IG51bWJlciwgcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIGEgKiAoMSAtIHIpICsgYiAqIHI7XG59XG5cblxuXG5cblxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/math.ts\n");

/***/ }),

/***/ "./src/utils/print.ts":
/*!****************************!*\
  !*** ./src/utils/print.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   printMat4: () => (/* binding */ printMat4),\n/* harmony export */   printVec3: () => (/* binding */ printVec3),\n/* harmony export */   vec3ToString: () => (/* binding */ vec3ToString),\n/* harmony export */   vec4ToString: () => (/* binding */ vec4ToString)\n/* harmony export */ });\nconst printMat4 = function (m) {\n    var str = \"\";\n    for (var i = 0; i < 4; i++) {\n        for (var j = 0; j < 4; j++) {\n            str += m[4 * i + j].toFixed(2) + \",  \";\n        }\n        str += \"\\n\";\n    }\n    console.log(str);\n};\nconst printVec3 = function (v, decimals = 2) {\n    console.log(vec3ToString(v, decimals));\n};\nconst vec3ToString = function (v, decimals = 2) {\n    var str = \"\";\n    for (var i = 0; i < 3; i++) {\n        str += v[i].toFixed(decimals) + \",  \";\n    }\n    str = str.slice(0, -1);\n    return str;\n};\nconst vec4ToString = function (v, decimals = 2) {\n    var str = \"[\";\n    for (var i = 0; i < 4; i++) {\n        str += v[i].toFixed(decimals) + \",\";\n    }\n    str = str.slice(0, -1);\n    return str + \"]\";\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvcHJpbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUdPLE1BQU0sU0FBUyxHQUFHLFVBQVMsQ0FBTztJQUN2QyxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDckIsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNsQyxLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2xDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO1NBQ3hDO1FBQ0QsR0FBRyxJQUFJLElBQUksQ0FBQztLQUNiO0lBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNuQixDQUFDO0FBRU0sTUFBTSxTQUFTLEdBQUcsVUFBUyxDQUFPLEVBQUUsV0FBbUIsQ0FBQztJQUM3RCxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUN6QyxDQUFDO0FBRU0sTUFBTSxZQUFZLEdBQUcsVUFBUyxDQUFPLEVBQUUsV0FBbUIsQ0FBQztJQUNoRSxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUM7SUFDckIsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNsQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUM7S0FDdkM7SUFDRCxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2QixPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFTSxNQUFNLFlBQVksR0FBRyxVQUFTLENBQU8sRUFBRSxXQUFtQixDQUFDO0lBQ2hFLElBQUksR0FBRyxHQUFXLEdBQUcsQ0FBQztJQUN0QixLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2xDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNyQztJQUNELEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3ZCLE9BQU8sR0FBRyxHQUFHLEdBQUcsQ0FBQztBQUNuQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvdXRpbHMvcHJpbnQudHM/ZDc2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3YXJuIH0gZnJvbSBcImNvbnNvbGVcIjtcbmltcG9ydCB7IG1hdDQsIG1hdDMsIE1hdDQsIFZlYzMsIFZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcblxuZXhwb3J0IGNvbnN0IHByaW50TWF0NCA9IGZ1bmN0aW9uKG06IE1hdDQpOiB2b2lkIHtcbiAgdmFyIHN0cjogc3RyaW5nID0gXCJcIjtcbiAgZm9yICh2YXIgaTogbnVtYmVyID0gMDsgaSA8IDQ7IGkrKykge1xuICAgIGZvciAodmFyIGo6IG51bWJlciA9IDA7IGogPCA0OyBqKyspIHtcbiAgICAgIHN0ciArPSBtWzQgKiBpICsgal0udG9GaXhlZCgyKSArIFwiLCAgXCI7XG4gICAgfVxuICAgIHN0ciArPSBcIlxcblwiO1xuICB9XG4gIGNvbnNvbGUubG9nKHN0cik7XG59XG5cbmV4cG9ydCBjb25zdCBwcmludFZlYzMgPSBmdW5jdGlvbih2OiBWZWMzLCBkZWNpbWFsczogbnVtYmVyID0gMik6IHZvaWQge1xuICBjb25zb2xlLmxvZyh2ZWMzVG9TdHJpbmcodiwgZGVjaW1hbHMpKTtcbn1cblxuZXhwb3J0IGNvbnN0IHZlYzNUb1N0cmluZyA9IGZ1bmN0aW9uKHY6IFZlYzMsIGRlY2ltYWxzOiBudW1iZXIgPSAyKTogc3RyaW5nIHtcbiAgdmFyIHN0cjogc3RyaW5nID0gXCJcIjtcbiAgZm9yICh2YXIgaTogbnVtYmVyID0gMDsgaSA8IDM7IGkrKykge1xuICAgIHN0ciArPSB2W2ldLnRvRml4ZWQoZGVjaW1hbHMpICsgXCIsICBcIjtcbiAgfVxuICBzdHIgPSBzdHIuc2xpY2UoMCwgLTEpO1xuICByZXR1cm4gc3RyO1xufVxuXG5leHBvcnQgY29uc3QgdmVjNFRvU3RyaW5nID0gZnVuY3Rpb24odjogVmVjNCwgZGVjaW1hbHM6IG51bWJlciA9IDIpOiBzdHJpbmcge1xuICB2YXIgc3RyOiBzdHJpbmcgPSBcIltcIjtcbiAgZm9yICh2YXIgaTogbnVtYmVyID0gMDsgaSA8IDQ7IGkrKykge1xuICAgIHN0ciArPSB2W2ldLnRvRml4ZWQoZGVjaW1hbHMpICsgXCIsXCI7XG4gIH1cbiAgc3RyID0gc3RyLnNsaWNlKDAsIC0xKTtcbiAgcmV0dXJuIHN0ciArIFwiXVwiO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/print.ts\n");

/***/ }),

/***/ "./src/utils/timer.ts":
/*!****************************!*\
  !*** ./src/utils/timer.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Timer: () => (/* binding */ Timer)\n/* harmony export */ });\nclass Timer {\n    constructor() {\n        this.startTime = 0;\n        this.reset();\n    }\n    reset() {\n        this.startTime = Date.now();\n    }\n    logTime() {\n        console.log((Date.now() - this.startTime) / 1000.0);\n    }\n    getTime() {\n        return (Date.now() - this.startTime) / 1000.0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvdGltZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUdPLE1BQU0sS0FBSztJQUlkO1FBRlEsY0FBUyxHQUFXLENBQUMsQ0FBQztRQUcxQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVNLEtBQUs7UUFDUixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNoQyxDQUFDO0lBRU0sT0FBTztRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFTSxPQUFPO1FBQ1YsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ2xELENBQUM7Q0FFSiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3V0aWxzL3RpbWVyLnRzPzI4ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cblxuZXhwb3J0IGNsYXNzIFRpbWVyIHtcblxuICAgIHByaXZhdGUgc3RhcnRUaW1lOiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9nVGltZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc29sZS5sb2coKERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZSkgLyAxMDAwLjApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaW1lKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAoRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lKSAvIDEwMDAuMDtcbiAgICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/timer.ts\n");

/***/ }),

/***/ "./src/widgets/cursor.ts":
/*!*******************************!*\
  !*** ./src/widgets/cursor.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cursor: () => (/* binding */ cursor)\n/* harmony export */ });\nclass Cursor {\n    constructor() {\n        this.cursor = this.createCursor();\n    }\n    setPosition(pos) {\n        this.cursor[0].style.left = (pos[0]).toString() + \"px\";\n        this.cursor[0].style.top = (pos[1] - 5).toString() + \"px\";\n        this.cursor[1].style.left = (pos[0] - 5).toString() + \"px\";\n        this.cursor[1].style.top = (pos[1]).toString() + \"px\";\n    }\n    show() {\n        this.cursor[0].hidden = false;\n        this.cursor[1].hidden = false;\n    }\n    hide() {\n        this.cursor[0].hidden = true;\n        this.cursor[1].hidden = true;\n    }\n    createCursor() {\n        const cursorVertical = document.createElement(\"div\");\n        const cursorHorizontal = document.createElement(\"div\");\n        cursorVertical.className = \"floating-window\";\n        cursorVertical.style.borderRadius = \"0px\";\n        cursorVertical.style.padding = \"0px\";\n        cursorVertical.style.margin = \"0px\";\n        cursorVertical.style.width = \"0px\";\n        cursorVertical.style.height = \"10px\";\n        cursorHorizontal.className = \"floating-window\";\n        cursorHorizontal.style.borderRadius = \"0px\";\n        cursorHorizontal.style.padding = \"0px\";\n        cursorHorizontal.style.margin = \"0px\";\n        cursorHorizontal.style.width = \"10px\";\n        cursorHorizontal.style.height = \"0px\";\n        document.body.appendChild(cursorVertical);\n        document.body.appendChild(cursorHorizontal);\n        const res = [cursorVertical, cursorHorizontal];\n        return res;\n    }\n}\nconst cursor = new Cursor;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQztDQUdGO0FBRU0sTUFBTSxNQUFNLEdBQVcsSUFBSSxNQUFNLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy93aWRnZXRzL2N1cnNvci50cz9lZTA3Il0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEN1cnNvciB7XG5cbiAgcHJpdmF0ZSBjdXJzb3I6IFtIVE1MRGl2RWxlbWVudCwgSFRNTERpdkVsZW1lbnRdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY3Vyc29yID0gdGhpcy5jcmVhdGVDdXJzb3IoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRQb3NpdGlvbihwb3M6IFtudW1iZXIsIG51bWJlcl0pOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvclswXS5zdHlsZS5sZWZ0ID0gKHBvc1swXSkudG9TdHJpbmcoKSArIFwicHhcIjtcbiAgICB0aGlzLmN1cnNvclswXS5zdHlsZS50b3AgPSAocG9zWzFdIC0gNSkudG9TdHJpbmcoKSArIFwicHhcIjtcbiAgICB0aGlzLmN1cnNvclsxXS5zdHlsZS5sZWZ0ID0gKHBvc1swXSAtIDUpLnRvU3RyaW5nKCkgKyBcInB4XCI7XG4gICAgdGhpcy5jdXJzb3JbMV0uc3R5bGUudG9wID0gKHBvc1sxXSkudG9TdHJpbmcoKSArIFwicHhcIjtcbiAgfVxuXG4gIHB1YmxpYyBzaG93KCk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yWzBdLmhpZGRlbiA9IGZhbHNlO1xuICAgIHRoaXMuY3Vyc29yWzFdLmhpZGRlbiA9IGZhbHNlO1xuICB9XG4gIHB1YmxpYyBoaWRlKCk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yWzBdLmhpZGRlbiA9IHRydWU7XG4gICAgdGhpcy5jdXJzb3JbMV0uaGlkZGVuID0gdHJ1ZTtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBjcmVhdGVDdXJzb3IoKTogW0hUTUxEaXZFbGVtZW50LCBIVE1MRGl2RWxlbWVudF0ge1xuICAgIGNvbnN0IGN1cnNvclZlcnRpY2FsOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3QgY3Vyc29ySG9yaXpvbnRhbDogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGN1cnNvclZlcnRpY2FsLmNsYXNzTmFtZSA9IFwiZmxvYXRpbmctd2luZG93XCI7XG4gICAgY3Vyc29yVmVydGljYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCIwcHhcIjtcbiAgICBjdXJzb3JWZXJ0aWNhbC5zdHlsZS5wYWRkaW5nID0gXCIwcHhcIjtcbiAgICBjdXJzb3JWZXJ0aWNhbC5zdHlsZS5tYXJnaW4gPSBcIjBweFwiO1xuICAgIGN1cnNvclZlcnRpY2FsLnN0eWxlLndpZHRoID0gXCIwcHhcIjtcbiAgICBjdXJzb3JWZXJ0aWNhbC5zdHlsZS5oZWlnaHQgPSBcIjEwcHhcIjtcbiAgICBjdXJzb3JIb3Jpem9udGFsLmNsYXNzTmFtZSA9IFwiZmxvYXRpbmctd2luZG93XCI7XG4gICAgY3Vyc29ySG9yaXpvbnRhbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjBweFwiO1xuICAgIGN1cnNvckhvcml6b250YWwuc3R5bGUucGFkZGluZyA9IFwiMHB4XCI7XG4gICAgY3Vyc29ySG9yaXpvbnRhbC5zdHlsZS5tYXJnaW4gPSBcIjBweFwiO1xuICAgIGN1cnNvckhvcml6b250YWwuc3R5bGUud2lkdGggPSBcIjEwcHhcIjtcbiAgICBjdXJzb3JIb3Jpem9udGFsLnN0eWxlLmhlaWdodCA9IFwiMHB4XCI7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjdXJzb3JWZXJ0aWNhbCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjdXJzb3JIb3Jpem9udGFsKTtcbiAgICBjb25zdCByZXM6IFtIVE1MRGl2RWxlbWVudCwgSFRNTERpdkVsZW1lbnRdID0gW2N1cnNvclZlcnRpY2FsLCBjdXJzb3JIb3Jpem9udGFsXTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cblxufVxuXG5leHBvcnQgY29uc3QgY3Vyc29yOiBDdXJzb3IgPSBuZXcgQ3Vyc29yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/widgets/cursor.ts\n");

/***/ }),

/***/ "./src/widgets/mover.ts":
/*!******************************!*\
  !*** ./src/widgets/mover.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mover: () => (/* binding */ Mover)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cad */ \"./src/cad.ts\");\n/* harmony import */ var _geometry_boundingBox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/boundingBox */ \"./src/geometry/boundingBox.ts\");\n/* harmony import */ var _geometry_group__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../geometry/group */ \"./src/geometry/group.ts\");\n/* harmony import */ var _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../geometry/mesh */ \"./src/geometry/mesh.ts\");\n/* harmony import */ var _geometry_nurbs_arc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../geometry/nurbs/arc */ \"./src/geometry/nurbs/arc.ts\");\n/* harmony import */ var _geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../geometry/nurbs/loft */ \"./src/geometry/nurbs/loft.ts\");\n/* harmony import */ var _geometry_plane__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../geometry/plane */ \"./src/geometry/plane.ts\");\n/* harmony import */ var _utils_math__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/math */ \"./src/utils/math.ts\");\n\n\n\n\n\n\n\n\n\nclass Mover {\n    constructor() {\n        this.active = false;\n        this.moved = false;\n        this.componentClicked = null;\n        this.originalIntersectionPoint = null;\n        this.originalModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity();\n        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity();\n        this.element = document.createElement(\"div\");\n        this.element.id = \"mover\";\n        this.element.className = \"floating-window\";\n        this.element.style.width = \"auto\";\n        this.element.style.height = \"auto\";\n        this.element.hidden = true;\n        document.body.appendChild(this.element);\n        const origin = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, 0);\n        const xAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0);\n        const yAxis = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0);\n        const spinnerInner = (0,_geometry_nurbs_arc__WEBPACK_IMPORTED_MODULE_4__.createArc)(origin, xAxis, yAxis, 4, 0, Math.PI / 2);\n        const spinnerOuter = (0,_geometry_nurbs_arc__WEBPACK_IMPORTED_MODULE_4__.createArc)(origin, xAxis, yAxis, 5, 0, Math.PI / 2);\n        const tempSurface = (0,_geometry_nurbs_loft__WEBPACK_IMPORTED_MODULE_5__.loft)([spinnerInner, spinnerOuter], 1);\n        this.xSpinner = tempSurface.getMesh().clone();\n        this.ySpinner = tempSurface.getMesh().clone();\n        this.zSpinner = tempSurface.getMesh().clone();\n        this.xSpinner.setMaterial(\"red\");\n        this.ySpinner.setMaterial(\"green\");\n        this.zSpinner.setMaterial(\"blue\");\n        this.xSpinner.setConstantScreenSpaceSize(true);\n        this.ySpinner.setConstantScreenSpaceSize(true);\n        this.zSpinner.setConstantScreenSpaceSize(true);\n        tempSurface.delete();\n        this.xyzScaler = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 1)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 0)], [0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 5, 0, 5, 6, 0, 6, 1], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"white\", true);\n        this.xyPlaneMover = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(3, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(3, 3, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 3, 0)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"blue\", true);\n        this.xzPlaneMover = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(3, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(3, 3, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 3, 0)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"green\", true);\n        this.yzPlaneMover = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(3, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(3, 3, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 3, 0)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"red\", true);\n        this.xAxisMover = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(6, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(6, 0, 0),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(6, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 1)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0, 0, 3, 4, 4, 5, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"red\", true);\n        this.yAxisMover = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 6, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 6, 0),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 6, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 1)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0, 0, 3, 4, 4, 5, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"green\", true);\n        this.zAxisMover = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 6), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 6),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 6), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 1)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1),\n            wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0, 0, 3, 4, 4, 5, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"blue\", true);\n        this.xScaler = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(6, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(6.5, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(8, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(6.5, 0, 1)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"red\", true);\n        this.yScaler = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 6, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 6.5, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 8, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 6.5, 1)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"green\", true);\n        this.zScaler = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 6), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 6.5), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 8), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 6.5)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"blue\", true);\n        this.xyScaler = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(4.5, 4.5, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(5.5, 4.5, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(7, 7, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(4.5, 5.5, 0)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"blue\", true);\n        this.yzScaler = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(4.5, 4.5, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(5.5, 4.5, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(7, 7, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(4.5, 5.5, 0)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"red\", true);\n        this.xzScaler = new _geometry_mesh__WEBPACK_IMPORTED_MODULE_3__.Mesh(null, [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(4.5, 4.5, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(5.5, 4.5, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(7, 7, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(4.5, 5.5, 0)], [wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)], [0, 1, 2, 2, 3, 0], wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), \"green\", true);\n        this.surfaces = new _geometry_group__WEBPACK_IMPORTED_MODULE_2__.Group([\n            this.xyPlaneMover, this.xzPlaneMover, this.yzPlaneMover,\n            this.xSpinner, this.ySpinner, this.zSpinner,\n            this.xAxisMover, this.yAxisMover, this.zAxisMover,\n            this.xyzScaler,\n            this.xScaler, this.yScaler, this.zScaler,\n            this.xyScaler, this.yzScaler, this.xzScaler\n        ]);\n        this.surfaces.hide();\n        this.surfaces.setOverlay(true);\n        // cleanup construction curves\n        spinnerInner.delete();\n        spinnerOuter.delete();\n    }\n    onMouseMove() {\n        if (!this.active)\n            return;\n        if (this.element.hidden === false)\n            return;\n        this.moved = true;\n        const [x, y] = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos();\n        const ray = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getRayAtPixel(x, y);\n        const originalPos = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.getTranslation(this.originalModel);\n        switch (this.componentClicked) {\n            case this.xyPlaneMover.getID(): {\n                const xyPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1));\n                const intersectionTime = ray.intersectPlane(xyPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const delta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, this.originalIntersectionPoint);\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, delta);\n                    }\n                }\n                break;\n            }\n            case this.yzPlaneMover.getID(): {\n                const yzPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0));\n                const intersectionTime = ray.intersectPlane(yzPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const delta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, this.originalIntersectionPoint);\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, delta);\n                    }\n                }\n                break;\n            }\n            case this.xzPlaneMover.getID(): {\n                const xzPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0));\n                const intersectionTime = ray.intersectPlane(xzPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const delta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, this.originalIntersectionPoint);\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, delta);\n                    }\n                }\n                break;\n            }\n            case this.xSpinner.getID(): {\n                const yzPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0));\n                const intersectionTime = ray.intersectPlane(yzPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const pos = originalPos;\n                        const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(this.originalIntersectionPoint, pos);\n                        const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, pos);\n                        var angle = (0,_utils_math__WEBPACK_IMPORTED_MODULE_7__.angleBetween)(v1, v2);\n                        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.cross(v1, v2)) < 0) {\n                            angle *= -1;\n                        }\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateX(this.originalModel, angle);\n                    }\n                }\n                break;\n            }\n            case this.ySpinner.getID(): {\n                const xzPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0));\n                const intersectionTime = ray.intersectPlane(xzPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const pos = originalPos;\n                        const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(this.originalIntersectionPoint, pos);\n                        const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, pos);\n                        var angle = (0,_utils_math__WEBPACK_IMPORTED_MODULE_7__.angleBetween)(v1, v2);\n                        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.cross(v1, v2)) < 0) {\n                            angle *= -1;\n                        }\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateY(this.originalModel, angle);\n                    }\n                }\n                break;\n            }\n            case this.zSpinner.getID(): {\n                const xyPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1));\n                const intersectionTime = ray.intersectPlane(xyPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const pos = originalPos;\n                        const v1 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(this.originalIntersectionPoint, pos);\n                        const v2 = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, pos);\n                        var angle = (0,_utils_math__WEBPACK_IMPORTED_MODULE_7__.angleBetween)(v1, v2);\n                        if (wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.dot(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.cross(v1, v2)) < 0) {\n                            angle *= -1;\n                        }\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateZ(this.originalModel, angle);\n                    }\n                }\n                break;\n            }\n            case this.xAxisMover.getID(): {\n                const intersection = ray.closestPointOnLine(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.add(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0)));\n                if (!this.originalIntersectionPoint) {\n                    this.originalIntersectionPoint = intersection;\n                }\n                else {\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersection, this.originalIntersectionPoint));\n                }\n                break;\n            }\n            case this.yAxisMover.getID(): {\n                const intersection = ray.closestPointOnLine(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.add(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0)));\n                if (!this.originalIntersectionPoint) {\n                    this.originalIntersectionPoint = intersection;\n                }\n                else {\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersection, this.originalIntersectionPoint));\n                }\n                break;\n            }\n            case this.zAxisMover.getID(): {\n                const intersection = ray.closestPointOnLine(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.add(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)));\n                if (!this.originalIntersectionPoint) {\n                    this.originalIntersectionPoint = intersection;\n                }\n                else {\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersection, this.originalIntersectionPoint));\n                }\n                break;\n            }\n            case this.xScaler.getID(): {\n                const intersection = ray.closestPointOnLine(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.add(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0)));\n                if (!this.originalIntersectionPoint) {\n                    this.originalIntersectionPoint = intersection;\n                }\n                else {\n                    const originalDelta = this.originalIntersectionPoint[0] - originalPos[0];\n                    const newDelta = intersection[0] - originalPos[0];\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(newDelta / originalDelta, 1, 1));\n                }\n                break;\n            }\n            case this.yScaler.getID(): {\n                const intersection = ray.closestPointOnLine(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.add(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0)));\n                if (!this.originalIntersectionPoint) {\n                    this.originalIntersectionPoint = intersection;\n                }\n                else {\n                    const originalDelta = this.originalIntersectionPoint[1] - originalPos[1];\n                    const newDelta = intersection[1] - originalPos[1];\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, newDelta / originalDelta, 1));\n                }\n                break;\n            }\n            case this.zScaler.getID(): {\n                const intersection = ray.closestPointOnLine(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.add(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)));\n                if (!this.originalIntersectionPoint) {\n                    this.originalIntersectionPoint = intersection;\n                }\n                else {\n                    const originalDelta = this.originalIntersectionPoint[2] - originalPos[2];\n                    const newDelta = intersection[2] - originalPos[2];\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, newDelta / originalDelta));\n                }\n                break;\n            }\n            case this.xyScaler.getID(): {\n                const xyPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1));\n                const intersectionTime = ray.intersectPlane(xyPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const originalDelta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.length(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(this.originalIntersectionPoint, originalPos));\n                        const newDelta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.length(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, originalPos));\n                        const factor = newDelta / originalDelta;\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(factor, factor, 1));\n                    }\n                }\n                break;\n            }\n            case this.yzScaler.getID(): {\n                const yzPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 0, 0));\n                const intersectionTime = ray.intersectPlane(yzPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const originalDelta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.length(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(this.originalIntersectionPoint, originalPos));\n                        const newDelta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.length(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, originalPos));\n                        const factor = newDelta / originalDelta;\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, factor, factor));\n                    }\n                }\n                break;\n            }\n            case this.xzScaler.getID(): {\n                const xzPlane = new _geometry_plane__WEBPACK_IMPORTED_MODULE_6__.Plane(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 1, 0));\n                const intersectionTime = ray.intersectPlane(xzPlane);\n                if (intersectionTime) {\n                    const intersectionPoint = ray.at(intersectionTime);\n                    if (!this.originalIntersectionPoint) {\n                        this.originalIntersectionPoint = intersectionPoint;\n                    }\n                    else {\n                        const originalDelta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.length(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(this.originalIntersectionPoint, originalPos));\n                        const newDelta = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.length(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.sub(intersectionPoint, originalPos));\n                        const factor = newDelta / originalDelta;\n                        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(factor, 1, factor));\n                    }\n                }\n                break;\n            }\n            case this.xyzScaler.getID(): {\n                const intersection = ray.closestPointOnLine(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.add(originalPos, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, 1)));\n                if (this.originalIntersectionPoint === null) {\n                    this.originalIntersectionPoint = intersection;\n                }\n                else {\n                    var dz = intersection[2] - this.originalIntersectionPoint[2];\n                    if (dz > 0)\n                        dz += 1;\n                    else\n                        dz = -1 / (dz - 1);\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(dz, dz, dz));\n                }\n                break;\n            }\n            default:\n                throw new Error(\"case not implemented\");\n        }\n        this.surfaces.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.currentModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.inverse(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.getScaling(this.currentModel))));\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n    }\n    onMouseUp() {\n        if (this.active) {\n            if (this.element.hidden) {\n                if (this.moved) { // dragged\n                    this.moved = false;\n                    this.active = false;\n                    this.originalIntersectionPoint = null;\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n                    _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().transformSelected();\n                    this.updatedSelection();\n                    this.originalModel = this.currentModel;\n                }\n                else { // clicked\n                    this.originalIntersectionPoint = null;\n                    switch (this.componentClicked) {\n                        case this.xSpinner.getID():\n                            this.element.innerHTML = \"X Rotation: \";\n                            break;\n                        case this.ySpinner.getID():\n                            this.element.innerHTML = \"Y Rotation: \";\n                            break;\n                        case this.zSpinner.getID():\n                            this.element.innerHTML = \"Z Rotation: \";\n                            break;\n                        case this.xAxisMover.getID():\n                            this.element.innerHTML = \"X Translation: \";\n                            break;\n                        case this.yAxisMover.getID():\n                            this.element.innerHTML = \"Y Translation: \";\n                            break;\n                        case this.zAxisMover.getID():\n                            this.element.innerHTML = \"Z Translation: \";\n                            break;\n                        case this.xScaler.getID():\n                            this.element.innerHTML = \"X Scale: \";\n                            break;\n                        case this.yScaler.getID():\n                            this.element.innerHTML = \"Y Scale: \";\n                            break;\n                        case this.zScaler.getID():\n                            this.element.innerHTML = \"Z Scale: \";\n                            break;\n                        case this.xyScaler.getID():\n                            this.element.innerHTML = \"XY Scale: \";\n                            break;\n                        case this.yzScaler.getID():\n                            this.element.innerHTML = \"YZ Scale: \";\n                            break;\n                        case this.xzScaler.getID():\n                            this.element.innerHTML = \"XZ Scale: \";\n                            break;\n                        case this.xyzScaler.getID():\n                            this.element.innerHTML = \"Scale: \";\n                            break;\n                        default:\n                            this.active = false;\n                            this.originalIntersectionPoint = null;\n                            return;\n                    }\n                    const mousePos = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getEventManager().getMouseHandler().getMousePos();\n                    this.element.setAttribute(\"style\", `\n          left:${mousePos[0] + 20}px;\n          top:${mousePos[1] - 20}px;\n          width:auto;\n          height:auto;`);\n                    this.element.hidden = false;\n                }\n            }\n            else { // active with text dialog\n                this.active = false;\n                this.element.hidden = true;\n                this.originalIntersectionPoint = null;\n                this.currentModel = this.originalModel;\n            }\n        }\n    }\n    onkeydown(event) {\n        if (this.active && this.element.hidden === false) {\n            if (event.code == \"Enter\") {\n                this.active = false;\n                this.element.hidden = true;\n                this.originalIntersectionPoint = null;\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n                _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().transformSelected();\n                this.updatedSelection();\n                this.originalModel = this.currentModel;\n                return;\n            }\n            if (event.code == \"Delete\" || event.code == \"Backspace\" && this.element.innerHTML.at(-1) != \":\") {\n                console.log(\"here\");\n                this.element.innerHTML = this.element.innerHTML.slice(0, -1);\n            }\n            else if (event.key.length === 1) {\n                this.element.innerHTML += event.key;\n            }\n            const input = this.element.innerHTML.split(\":\")[1];\n            var parsedInput = parseFloat(input);\n            switch (this.componentClicked) {\n                case this.xSpinner.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 0;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateX(this.originalModel, parsedInput / 180 * Math.PI);\n                    break;\n                case this.ySpinner.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 0;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateY(this.originalModel, parsedInput / 180 * Math.PI);\n                    break;\n                case this.zSpinner.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 0;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateZ(this.originalModel, parsedInput / 180 * Math.PI);\n                    break;\n                case this.xAxisMover.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 0;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(parsedInput, 0, 0));\n                    break;\n                case this.yAxisMover.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 0;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, parsedInput, 0));\n                    break;\n                case this.zAxisMover.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 0;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(0, 0, parsedInput));\n                    break;\n                case this.xScaler.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 1;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(parsedInput, 1, 1));\n                    break;\n                case this.yScaler.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 1;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, parsedInput, 1));\n                    break;\n                case this.zScaler.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 1;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, 1, parsedInput));\n                    break;\n                case this.xyScaler.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 1;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(parsedInput, parsedInput, 1));\n                    break;\n                case this.yzScaler.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 1;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(1, parsedInput, parsedInput));\n                    break;\n                case this.xzScaler.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 1;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(parsedInput, 1, parsedInput));\n                    break;\n                case this.xyzScaler.getID():\n                    if (isNaN(parsedInput))\n                        parsedInput = 1;\n                    this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(this.originalModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(parsedInput, parsedInput, parsedInput));\n                    break;\n            }\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().onSelectionMoved();\n        }\n    }\n    isActive() {\n        return this.active;\n    }\n    idClicked(id) {\n        if (!this.active) {\n            if (this.element.hidden) {\n                this.active = true;\n                this.componentClicked = id;\n            }\n        }\n    }\n    tick() {\n        this.flip();\n    }\n    updatedSelection() {\n        const selection = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSelector().getSelection();\n        if (selection.size === 0) {\n            this.surfaces.hide();\n        }\n        else {\n            const selectionBB = new _geometry_boundingBox__WEBPACK_IMPORTED_MODULE_1__.BoundingBox();\n            for (const geo of selection) {\n                if (geo.isSelected()) {\n                    selectionBB.addBoundingBox(geo.getBoundingBox());\n                }\n                else {\n                    selectionBB.addBoundingBox(geo.getSubSelectionBoundingBox());\n                }\n            }\n            this.originalModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.translate(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), selectionBB.getCenter());\n            this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.clone(this.originalModel);\n            this.surfaces.setModel(this.originalModel);\n            this.flip();\n            this.surfaces.show();\n        }\n    }\n    flip() {\n        const cameraPos = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getCamera().getPosition();\n        const thisPos = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.getTranslation(this.currentModel);\n        const dx = thisPos[0] - cameraPos[0];\n        const dy = thisPos[1] - cameraPos[1];\n        const dz = thisPos[2] - cameraPos[2];\n        var flipper = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.scale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.vec3.create(dx > 0 ? -1 : 1, dy > 0 ? -1 : 1, dz > 0 ? -1 : 1));\n        this.xyPlaneMover.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.yzPlaneMover.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toYZPlane));\n        this.xzPlaneMover.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXZPlane));\n        this.xSpinner.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toYZPlane));\n        this.ySpinner.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXZPlane));\n        this.zSpinner.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.xAxisMover.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.yAxisMover.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.zAxisMover.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.xScaler.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.yScaler.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.zScaler.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.xyScaler.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n        this.yzScaler.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toYZPlane));\n        this.xzScaler.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXZPlane));\n        this.xyzScaler.setModel(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(flipper, Mover.toXYPlane));\n    }\n    getTransform() {\n        return wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(this.currentModel, wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.inverse(this.originalModel));\n    }\n    setTransform(t) {\n        this.currentModel = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.mul(t, this.originalModel);\n    }\n}\nMover.toXZPlane = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.uniformScale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateX(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), Math.PI / 2), 0.02);\nMover.toYZPlane = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.uniformScale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.rotateY(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), Math.PI / -2), 0.02);\nMover.toXYPlane = wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.uniformScale(wgpu_matrix__WEBPACK_IMPORTED_MODULE_8__.mat4.identity(), 0.02);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsSUFBSSxDQUFDLENBQUM7UUFFL0MsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRXJCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxnREFBSSxDQUFDLElBQUksRUFDNUIsQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQzFKLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUMxSixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUN2RixDQUFDO1FBRUYsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLGdEQUFJLENBQUMsSUFBSSxFQUMvQixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDeEYsQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ3hGLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQ2xELENBQUM7UUFFRixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksZ0RBQUksQ0FBQyxJQUFJLEVBQy9CLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUN4RixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDeEYsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FDbkQsQ0FBQztRQUVGLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxnREFBSSxDQUFDLElBQUksRUFDL0IsQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ3hGLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUN4RixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUNqRCxDQUFDO1FBRUYsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLGdEQUFJLENBQUMsSUFBSSxFQUM3QixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZGLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUMzQyxDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZGLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUMzQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUNuRSxDQUFDO1FBRUYsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLGdEQUFJLENBQUMsSUFBSSxFQUM3QixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZGLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUMzQyxDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZGLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUMzQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUNyRSxDQUFDO1FBRUYsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLGdEQUFJLENBQUMsSUFBSSxFQUM3QixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZGLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUMzQyxDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3ZGLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUMzQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUNwRSxDQUFDO1FBRUYsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGdEQUFJLENBQUMsSUFBSSxFQUMxQixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDNUYsQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ3hGLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQ2pELENBQUM7UUFFRixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksZ0RBQUksQ0FBQyxJQUFJLEVBQzFCLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUM1RixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDeEYsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FDbkQsQ0FBQztRQUVGLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxnREFBSSxDQUFDLElBQUksRUFDMUIsQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQzVGLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUN4RixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUNsRCxDQUFDO1FBRUYsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLGdEQUFJLENBQUMsSUFBSSxFQUMzQixDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDcEcsQ0FBQyw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ3hGLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQ2xELENBQUM7UUFFRixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksZ0RBQUksQ0FBQyxJQUFJLEVBQzNCLENBQUMsNkNBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUNwRyxDQUFDLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsNkNBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSw2Q0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLDZDQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFDeEYsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMs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LE9BQU8sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUUzRCxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDN0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsNkNBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzdELElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLDZDQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUU3RCxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsNkNBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLDZDQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUUxRCxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsNkNBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLDZDQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUUzRCxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDOUQsQ0FBQztJQUVNLFlBQVk7UUFDakIsT0FBTyw2Q0FBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLDZDQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFFTSxZQUFZLENBQUMsQ0FBTztRQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLDZDQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDdEQsQ0FBQzs7QUE1b0J1QixlQUFTLEdBQVMsNkNBQUksQ0FBQyxZQUFZLENBQUMsNkNBQUksQ0FBQyxPQUFPLENBQUMsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3RGLGVBQVMsR0FBUyw2Q0FBSSxDQUFDLFlBQVksQ0FBQyw2Q0FBSSxDQUFDLE9BQU8sQ0FBQyw2Q0FBSSxDQUFDLFFBQVEsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN2RixlQUFTLEdBQVMsNkNBQUksQ0FBQyxZQUFZLENBQUMsNkNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpZGdldHMvbW92ZXIudHM/NGYwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXQ0LCBNYXQ0LCB2ZWMzLCBWZWMzLCB2ZWM0IH0gZnJvbSBcIndncHUtbWF0cml4XCI7XG5pbXBvcnQgeyBJTlNUQU5DRSB9IGZyb20gXCIuLi9jYWRcIjtcbmltcG9ydCB7IEJvdW5kaW5nQm94IH0gZnJvbSBcIi4uL2dlb21ldHJ5L2JvdW5kaW5nQm94XCI7XG5pbXBvcnQgeyBHZW9tZXRyeSB9IGZyb20gXCIuLi9nZW9tZXRyeS9nZW9tZXRyeVwiO1xuaW1wb3J0IHsgR3JvdXAgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvZ3JvdXBcIjtcbmltcG9ydCB7IE1lc2ggfSBmcm9tIFwiLi4vZ2VvbWV0cnkvbWVzaFwiO1xuaW1wb3J0IHsgY3JlYXRlQXJjIH0gZnJvbSBcIi4uL2dlb21ldHJ5L251cmJzL2FyY1wiO1xuaW1wb3J0IHsgQ3VydmUgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvbnVyYnMvY3VydmVcIjtcbmltcG9ydCB7IGxvZnQgfSBmcm9tIFwiLi4vZ2VvbWV0cnkvbnVyYnMvbG9mdFwiO1xuaW1wb3J0IHsgU3VyZmFjZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9udXJicy9zdXJmYWNlXCI7XG5pbXBvcnQgeyBQbGFuZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9wbGFuZVwiO1xuaW1wb3J0IHsgUmF5IH0gZnJvbSBcIi4uL2dlb21ldHJ5L3JheVwiO1xuaW1wb3J0IHsgYW5nbGVCZXR3ZWVuIH0gZnJvbSBcIi4uL3V0aWxzL21hdGhcIjtcblxuZXhwb3J0IGNsYXNzIE1vdmVyIHtcblxuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSB0b1haUGxhbmU6IE1hdDQgPSBtYXQ0LnVuaWZvcm1TY2FsZShtYXQ0LnJvdGF0ZVgobWF0NC5pZGVudGl0eSgpLCBNYXRoLlBJIC8gMiksIDAuMDIpO1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSB0b1laUGxhbmU6IE1hdDQgPSBtYXQ0LnVuaWZvcm1TY2FsZShtYXQ0LnJvdGF0ZVkobWF0NC5pZGVudGl0eSgpLCBNYXRoLlBJIC8gLTIpLCAwLjAyKTtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdG9YWVBsYW5lOiBNYXQ0ID0gbWF0NC51bmlmb3JtU2NhbGUobWF0NC5pZGVudGl0eSgpLCAwLjAyKTtcblxuICBwcml2YXRlIG9yaWdpbmFsTW9kZWw6IE1hdDQ7XG4gIHByaXZhdGUgY3VycmVudE1vZGVsOiBNYXQ0O1xuICBwcml2YXRlIGFjdGl2ZTogYm9vbGVhbjsgLy8gY3VycmVudGx5IGdldHRpbmcgZHJhZ2dlZFxuICBwcml2YXRlIGNvbXBvbmVudENsaWNrZWQ6IG51bWJlciB8IG51bGw7XG4gIHByaXZhdGUgb3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludDogVmVjMyB8IG51bGw7XG5cbiAgcHJpdmF0ZSBzdXJmYWNlczogR3JvdXA7XG4gIHByaXZhdGUgeHlQbGFuZU1vdmVyOiBNZXNoO1xuICBwcml2YXRlIHh6UGxhbmVNb3ZlcjogTWVzaDtcbiAgcHJpdmF0ZSB5elBsYW5lTW92ZXI6IE1lc2g7XG5cbiAgcHJpdmF0ZSB4U3Bpbm5lcjogTWVzaDtcbiAgcHJpdmF0ZSB5U3Bpbm5lcjogTWVzaDtcbiAgcHJpdmF0ZSB6U3Bpbm5lcjogTWVzaDtcblxuICBwcml2YXRlIHhBeGlzTW92ZXI6IE1lc2g7XG4gIHByaXZhdGUgeUF4aXNNb3ZlcjogTWVzaDtcbiAgcHJpdmF0ZSB6QXhpc01vdmVyOiBNZXNoO1xuXG4gIHByaXZhdGUgeFNjYWxlcjogTWVzaDtcbiAgcHJpdmF0ZSB5U2NhbGVyOiBNZXNoO1xuICBwcml2YXRlIHpTY2FsZXI6IE1lc2g7XG5cbiAgcHJpdmF0ZSB4eVNjYWxlcjogTWVzaDtcbiAgcHJpdmF0ZSB5elNjYWxlcjogTWVzaDtcbiAgcHJpdmF0ZSB4elNjYWxlcjogTWVzaDtcblxuICBwcml2YXRlIHh5elNjYWxlcjogTWVzaDtcbiAgcHJpdmF0ZSBtb3ZlZDogYm9vbGVhbjtcblxuICBwcml2YXRlIGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5tb3ZlZCA9IGZhbHNlO1xuICAgIHRoaXMuY29tcG9uZW50Q2xpY2tlZCA9IG51bGw7XG4gICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gbnVsbDtcbiAgICB0aGlzLm9yaWdpbmFsTW9kZWwgPSBtYXQ0LmlkZW50aXR5KCk7XG4gICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LmlkZW50aXR5KCk7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRoaXMuZWxlbWVudC5pZCA9IFwibW92ZXJcIjtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJmbG9hdGluZy13aW5kb3dcIjtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSBcImF1dG9cIjtcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCJhdXRvXCI7XG4gICAgdGhpcy5lbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuXG5cbiAgICBjb25zdCBvcmlnaW46IFZlYzMgPSB2ZWMzLmNyZWF0ZSgxLCAxLCAwKTtcbiAgICBjb25zdCB4QXhpczogVmVjMyA9IHZlYzMuY3JlYXRlKDEsIDAsIDApO1xuICAgIGNvbnN0IHlBeGlzOiBWZWMzID0gdmVjMy5jcmVhdGUoMCwgMSwgMCk7XG4gICAgY29uc3Qgc3Bpbm5lcklubmVyOiBDdXJ2ZSA9IGNyZWF0ZUFyYyhvcmlnaW4sIHhBeGlzLCB5QXhpcywgNCwgMCwgTWF0aC5QSSAvIDIpO1xuICAgIGNvbnN0IHNwaW5uZXJPdXRlcjogQ3VydmUgPSBjcmVhdGVBcmMob3JpZ2luLCB4QXhpcywgeUF4aXMsIDUsIDAsIE1hdGguUEkgLyAyKTtcbiAgICBjb25zdCB0ZW1wU3VyZmFjZTogU3VyZmFjZSA9IGxvZnQoW3NwaW5uZXJJbm5lciwgc3Bpbm5lck91dGVyXSwgMSk7XG5cbiAgICB0aGlzLnhTcGlubmVyID0gPE1lc2g+dGVtcFN1cmZhY2UuZ2V0TWVzaCgpLmNsb25lKCk7XG4gICAgdGhpcy55U3Bpbm5lciA9IDxNZXNoPnRlbXBTdXJmYWNlLmdldE1lc2goKS5jbG9uZSgpO1xuICAgIHRoaXMuelNwaW5uZXIgPSA8TWVzaD50ZW1wU3VyZmFjZS5nZXRNZXNoKCkuY2xvbmUoKTtcbiAgICB0aGlzLnhTcGlubmVyLnNldE1hdGVyaWFsKFwicmVkXCIpO1xuICAgIHRoaXMueVNwaW5uZXIuc2V0TWF0ZXJpYWwoXCJncmVlblwiKTtcbiAgICB0aGlzLnpTcGlubmVyLnNldE1hdGVyaWFsKFwiYmx1ZVwiKTtcbiAgICB0aGlzLnhTcGlubmVyLnNldENvbnN0YW50U2NyZWVuU3BhY2VTaXplKHRydWUpO1xuICAgIHRoaXMueVNwaW5uZXIuc2V0Q29uc3RhbnRTY3JlZW5TcGFjZVNpemUodHJ1ZSk7XG4gICAgdGhpcy56U3Bpbm5lci5zZXRDb25zdGFudFNjcmVlblNwYWNlU2l6ZSh0cnVlKTtcblxuICAgIHRlbXBTdXJmYWNlLmRlbGV0ZSgpO1xuXG4gICAgdGhpcy54eXpTY2FsZXIgPSBuZXcgTWVzaChudWxsLFxuICAgICAgW3ZlYzMuY3JlYXRlKDAsIDAsIDApLCB2ZWMzLmNyZWF0ZSgxLCAwLCAwKSwgdmVjMy5jcmVhdGUoMSwgMSwgMCksIHZlYzMuY3JlYXRlKDAsIDEsIDApLCB2ZWMzLmNyZWF0ZSgwLCAxLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDEsIDAsIDEpXSxcbiAgICAgIFt2ZWMzLmNyZWF0ZSgwLCAwLCAwKSwgdmVjMy5jcmVhdGUoMCwgMCwgMCksIHZlYzMuY3JlYXRlKDAsIDAsIDApLCB2ZWMzLmNyZWF0ZSgwLCAwLCAwKSwgdmVjMy5jcmVhdGUoMCwgMCwgMCksIHZlYzMuY3JlYXRlKDAsIDAsIDApLCB2ZWMzLmNyZWF0ZSgwLCAwLCAwKV0sXG4gICAgICBbMCwgMSwgMiwgMCwgMiwgMywgMCwgMywgNCwgMCwgNCwgNSwgMCwgNSwgNiwgMCwgNiwgMV0sIG1hdDQuaWRlbnRpdHkoKSwgXCJ3aGl0ZVwiLCB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMueHlQbGFuZU1vdmVyID0gbmV3IE1lc2gobnVsbCxcbiAgICAgIFt2ZWMzLmNyZWF0ZSgxLCAxLCAwKSwgdmVjMy5jcmVhdGUoMywgMSwgMCksIHZlYzMuY3JlYXRlKDMsIDMsIDApLCB2ZWMzLmNyZWF0ZSgxLCAzLCAwKV0sXG4gICAgICBbdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSldLFxuICAgICAgWzAsIDEsIDIsIDIsIDMsIDBdLCBtYXQ0LmlkZW50aXR5KCksIFwiYmx1ZVwiLCB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMueHpQbGFuZU1vdmVyID0gbmV3IE1lc2gobnVsbCxcbiAgICAgIFt2ZWMzLmNyZWF0ZSgxLCAxLCAwKSwgdmVjMy5jcmVhdGUoMywgMSwgMCksIHZlYzMuY3JlYXRlKDMsIDMsIDApLCB2ZWMzLmNyZWF0ZSgxLCAzLCAwKV0sXG4gICAgICBbdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSldLFxuICAgICAgWzAsIDEsIDIsIDIsIDMsIDBdLCBtYXQ0LmlkZW50aXR5KCksIFwiZ3JlZW5cIiwgdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLnl6UGxhbmVNb3ZlciA9IG5ldyBNZXNoKG51bGwsXG4gICAgICBbdmVjMy5jcmVhdGUoMSwgMSwgMCksIHZlYzMuY3JlYXRlKDMsIDEsIDApLCB2ZWMzLmNyZWF0ZSgzLCAzLCAwKSwgdmVjMy5jcmVhdGUoMSwgMywgMCldLFxuICAgICAgW3ZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpXSxcbiAgICAgIFswLCAxLCAyLCAyLCAzLCAwXSwgbWF0NC5pZGVudGl0eSgpLCBcInJlZFwiLCB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMueEF4aXNNb3ZlciA9IG5ldyBNZXNoKG51bGwsXG4gICAgICBbdmVjMy5jcmVhdGUoMSwgMCwgMCksIHZlYzMuY3JlYXRlKDEsIDEsIDApLCB2ZWMzLmNyZWF0ZSg2LCAxLCAwKSwgdmVjMy5jcmVhdGUoNiwgMCwgMCksXG4gICAgICB2ZWMzLmNyZWF0ZSg2LCAwLCAxKSwgdmVjMy5jcmVhdGUoMSwgMCwgMSldLFxuICAgICAgW3ZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLFxuICAgICAgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpXSxcbiAgICAgIFswLCAxLCAyLCAyLCAzLCAwLCAwLCAzLCA0LCA0LCA1LCAwXSwgbWF0NC5pZGVudGl0eSgpLCBcInJlZFwiLCB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMueUF4aXNNb3ZlciA9IG5ldyBNZXNoKG51bGwsXG4gICAgICBbdmVjMy5jcmVhdGUoMCwgMSwgMCksIHZlYzMuY3JlYXRlKDEsIDEsIDApLCB2ZWMzLmNyZWF0ZSgxLCA2LCAwKSwgdmVjMy5jcmVhdGUoMCwgNiwgMCksXG4gICAgICB2ZWMzLmNyZWF0ZSgwLCA2LCAxKSwgdmVjMy5jcmVhdGUoMCwgMSwgMSldLFxuICAgICAgW3ZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLFxuICAgICAgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpXSxcbiAgICAgIFswLCAxLCAyLCAyLCAzLCAwLCAwLCAzLCA0LCA0LCA1LCAwXSwgbWF0NC5pZGVudGl0eSgpLCBcImdyZWVuXCIsIHRydWVcbiAgICApO1xuXG4gICAgdGhpcy56QXhpc01vdmVyID0gbmV3IE1lc2gobnVsbCxcbiAgICAgIFt2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMSwgMCwgMSksIHZlYzMuY3JlYXRlKDEsIDAsIDYpLCB2ZWMzLmNyZWF0ZSgwLCAwLCA2KSxcbiAgICAgIHZlYzMuY3JlYXRlKDAsIDEsIDYpLCB2ZWMzLmNyZWF0ZSgwLCAxLCAxKV0sXG4gICAgICBbdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksXG4gICAgICB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSldLFxuICAgICAgWzAsIDEsIDIsIDIsIDMsIDAsIDAsIDMsIDQsIDQsIDUsIDBdLCBtYXQ0LmlkZW50aXR5KCksIFwiYmx1ZVwiLCB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMueFNjYWxlciA9IG5ldyBNZXNoKG51bGwsXG4gICAgICBbdmVjMy5jcmVhdGUoNiwgMCwgMCksIHZlYzMuY3JlYXRlKDYuNSwgMSwgMCksIHZlYzMuY3JlYXRlKDgsIDAsIDApLCB2ZWMzLmNyZWF0ZSg2LjUsIDAsIDEpXSxcbiAgICAgIFt2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKV0sXG4gICAgICBbMCwgMSwgMiwgMiwgMywgMF0sIG1hdDQuaWRlbnRpdHkoKSwgXCJyZWRcIiwgdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLnlTY2FsZXIgPSBuZXcgTWVzaChudWxsLFxuICAgICAgW3ZlYzMuY3JlYXRlKDAsIDYsIDApLCB2ZWMzLmNyZWF0ZSgxLCA2LjUsIDApLCB2ZWMzLmNyZWF0ZSgwLCA4LCAwKSwgdmVjMy5jcmVhdGUoMCwgNi41LCAxKV0sXG4gICAgICBbdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSldLFxuICAgICAgWzAsIDEsIDIsIDIsIDMsIDBdLCBtYXQ0LmlkZW50aXR5KCksIFwiZ3JlZW5cIiwgdHJ1ZVxuICAgICk7XG5cbiAgICB0aGlzLnpTY2FsZXIgPSBuZXcgTWVzaChudWxsLFxuICAgICAgW3ZlYzMuY3JlYXRlKDAsIDAsIDYpLCB2ZWMzLmNyZWF0ZSgwLCAxLCA2LjUpLCB2ZWMzLmNyZWF0ZSgwLCAwLCA4KSwgdmVjMy5jcmVhdGUoMSwgMCwgNi41KV0sXG4gICAgICBbdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSldLFxuICAgICAgWzAsIDEsIDIsIDIsIDMsIDBdLCBtYXQ0LmlkZW50aXR5KCksIFwiYmx1ZVwiLCB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMueHlTY2FsZXIgPSBuZXcgTWVzaChudWxsLFxuICAgICAgW3ZlYzMuY3JlYXRlKDQuNSwgNC41LCAwKSwgdmVjMy5jcmVhdGUoNS41LCA0LjUsIDApLCB2ZWMzLmNyZWF0ZSg3LCA3LCAwKSwgdmVjMy5jcmVhdGUoNC41LCA1LjUsIDApXSxcbiAgICAgIFt2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKV0sXG4gICAgICBbMCwgMSwgMiwgMiwgMywgMF0sIG1hdDQuaWRlbnRpdHkoKSwgXCJibHVlXCIsIHRydWVcbiAgICApO1xuXG4gICAgdGhpcy55elNjYWxlciA9IG5ldyBNZXNoKG51bGwsXG4gICAgICBbdmVjMy5jcmVhdGUoNC41LCA0LjUsIDApLCB2ZWMzLmNyZWF0ZSg1LjUsIDQuNSwgMCksIHZlYzMuY3JlYXRlKDcsIDcsIDApLCB2ZWMzLmNyZWF0ZSg0LjUsIDUuNSwgMCldLFxuICAgICAgW3ZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpXSxcbiAgICAgIFswLCAxLCAyLCAyLCAzLCAwXSwgbWF0NC5pZGVudGl0eSgpLCBcInJlZFwiLCB0cnVlXG4gICAgKTtcblxuICAgIHRoaXMueHpTY2FsZXIgPSBuZXcgTWVzaChudWxsLFxuICAgICAgW3ZlYzMuY3JlYXRlKDQuNSwgNC41LCAwKSwgdmVjMy5jcmVhdGUoNS41LCA0LjUsIDApLCB2ZWMzLmNyZWF0ZSg3LCA3LCAwKSwgdmVjMy5jcmVhdGUoNC41LCA1LjUsIDApXSxcbiAgICAgIFt2ZWMzLmNyZWF0ZSgwLCAwLCAxKSwgdmVjMy5jcmVhdGUoMCwgMCwgMSksIHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKV0sXG4gICAgICBbMCwgMSwgMiwgMiwgMywgMF0sIG1hdDQuaWRlbnRpdHkoKSwgXCJncmVlblwiLCB0cnVlXG4gICAgKTtcblxuXG5cbiAgICB0aGlzLnN1cmZhY2VzID0gbmV3IEdyb3VwKFtcbiAgICAgIHRoaXMueHlQbGFuZU1vdmVyLCB0aGlzLnh6UGxhbmVNb3ZlciwgdGhpcy55elBsYW5lTW92ZXIsXG4gICAgICB0aGlzLnhTcGlubmVyLCB0aGlzLnlTcGlubmVyLCB0aGlzLnpTcGlubmVyLFxuICAgICAgdGhpcy54QXhpc01vdmVyLCB0aGlzLnlBeGlzTW92ZXIsIHRoaXMuekF4aXNNb3ZlcixcbiAgICAgIHRoaXMueHl6U2NhbGVyLFxuICAgICAgdGhpcy54U2NhbGVyLCB0aGlzLnlTY2FsZXIsIHRoaXMuelNjYWxlcixcbiAgICAgIHRoaXMueHlTY2FsZXIsIHRoaXMueXpTY2FsZXIsIHRoaXMueHpTY2FsZXJdKTtcblxuICAgIHRoaXMuc3VyZmFjZXMuaGlkZSgpO1xuICAgIHRoaXMuc3VyZmFjZXMuc2V0T3ZlcmxheSh0cnVlKTtcblxuICAgIC8vIGNsZWFudXAgY29uc3RydWN0aW9uIGN1cnZlc1xuICAgIHNwaW5uZXJJbm5lci5kZWxldGUoKTtcbiAgICBzcGlubmVyT3V0ZXIuZGVsZXRlKCk7XG5cbiAgfVxuXG5cbiAgcHVibGljIG9uTW91c2VNb3ZlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5hY3RpdmUpIHJldHVybjtcbiAgICBpZiAodGhpcy5lbGVtZW50LmhpZGRlbiA9PT0gZmFsc2UpIHJldHVybjtcbiAgICB0aGlzLm1vdmVkID0gdHJ1ZTtcblxuICAgIGNvbnN0IFt4LCB5XSA9IElOU1RBTkNFLmdldEV2ZW50TWFuYWdlcigpLmdldE1vdXNlSGFuZGxlcigpLmdldE1vdXNlUG9zKCk7XG4gICAgY29uc3QgcmF5OiBSYXkgPSBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldENhbWVyYSgpLmdldFJheUF0UGl4ZWwoeCwgeSk7XG4gICAgY29uc3Qgb3JpZ2luYWxQb3M6IFZlYzMgPSBtYXQ0LmdldFRyYW5zbGF0aW9uKHRoaXMub3JpZ2luYWxNb2RlbCk7XG5cbiAgICBzd2l0Y2ggKHRoaXMuY29tcG9uZW50Q2xpY2tlZCkge1xuICAgICAgY2FzZSB0aGlzLnh5UGxhbmVNb3Zlci5nZXRJRCgpOiB7XG4gICAgICAgIGNvbnN0IHh5UGxhbmU6IFBsYW5lID0gbmV3IFBsYW5lKG9yaWdpbmFsUG9zLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSk7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvblRpbWU6IG51bWJlciB8IG51bGwgPSByYXkuaW50ZXJzZWN0UGxhbmUoeHlQbGFuZSk7XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb25UaW1lKSB7XG4gICAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uUG9pbnQ6IFZlYzMgPSByYXkuYXQoaW50ZXJzZWN0aW9uVGltZSk7XG4gICAgICAgICAgaWYgKCF0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCA9IGludGVyc2VjdGlvblBvaW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YTogVmVjMyA9IHZlYzMuc3ViKGludGVyc2VjdGlvblBvaW50LCB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnRyYW5zbGF0ZSh0aGlzLm9yaWdpbmFsTW9kZWwsIGRlbHRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIHRoaXMueXpQbGFuZU1vdmVyLmdldElEKCk6IHtcbiAgICAgICAgY29uc3QgeXpQbGFuZTogUGxhbmUgPSBuZXcgUGxhbmUob3JpZ2luYWxQb3MsIHZlYzMuY3JlYXRlKDEsIDAsIDApKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uVGltZTogbnVtYmVyIHwgbnVsbCA9IHJheS5pbnRlcnNlY3RQbGFuZSh5elBsYW5lKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvblRpbWUpIHtcbiAgICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludDogVmVjMyA9IHJheS5hdChpbnRlcnNlY3Rpb25UaW1lKTtcbiAgICAgICAgICBpZiAoIXRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gaW50ZXJzZWN0aW9uUG9pbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhOiBWZWMzID0gdmVjMy5zdWIoaW50ZXJzZWN0aW9uUG9pbnQsIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQudHJhbnNsYXRlKHRoaXMub3JpZ2luYWxNb2RlbCwgZGVsdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgdGhpcy54elBsYW5lTW92ZXIuZ2V0SUQoKToge1xuICAgICAgICBjb25zdCB4elBsYW5lOiBQbGFuZSA9IG5ldyBQbGFuZShvcmlnaW5hbFBvcywgdmVjMy5jcmVhdGUoMCwgMSwgMCkpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25UaW1lOiBudW1iZXIgfCBudWxsID0gcmF5LmludGVyc2VjdFBsYW5lKHh6UGxhbmUpO1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uVGltZSkge1xuICAgICAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50OiBWZWMzID0gcmF5LmF0KGludGVyc2VjdGlvblRpbWUpO1xuICAgICAgICAgIGlmICghdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50KSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb25Qb2ludDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGVsdGE6IFZlYzMgPSB2ZWMzLnN1YihpbnRlcnNlY3Rpb25Qb2ludCwgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50KTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC50cmFuc2xhdGUodGhpcy5vcmlnaW5hbE1vZGVsLCBkZWx0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSB0aGlzLnhTcGlubmVyLmdldElEKCk6IHtcbiAgICAgICAgY29uc3QgeXpQbGFuZTogUGxhbmUgPSBuZXcgUGxhbmUob3JpZ2luYWxQb3MsIHZlYzMuY3JlYXRlKDEsIDAsIDApKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uVGltZTogbnVtYmVyIHwgbnVsbCA9IHJheS5pbnRlcnNlY3RQbGFuZSh5elBsYW5lKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvblRpbWUpIHtcbiAgICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludDogVmVjMyA9IHJheS5hdChpbnRlcnNlY3Rpb25UaW1lKTtcbiAgICAgICAgICBpZiAoIXRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gaW50ZXJzZWN0aW9uUG9pbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBvczogVmVjMyA9IG9yaWdpbmFsUG9zO1xuICAgICAgICAgICAgY29uc3QgdjE6IFZlYzMgPSB2ZWMzLnN1Yih0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQsIHBvcyk7XG4gICAgICAgICAgICBjb25zdCB2MjogVmVjMyA9IHZlYzMuc3ViKGludGVyc2VjdGlvblBvaW50LCBwb3MpO1xuICAgICAgICAgICAgdmFyIGFuZ2xlOiBudW1iZXIgPSBhbmdsZUJldHdlZW4odjEsIHYyKTtcbiAgICAgICAgICAgIGlmICh2ZWMzLmRvdCh2ZWMzLmNyZWF0ZSgxLCAwLCAwKSwgdmVjMy5jcm9zcyh2MSwgdjIpKSA8IDApIHtcbiAgICAgICAgICAgICAgYW5nbGUgKj0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQucm90YXRlWCh0aGlzLm9yaWdpbmFsTW9kZWwsIGFuZ2xlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgdGhpcy55U3Bpbm5lci5nZXRJRCgpOiB7XG4gICAgICAgIGNvbnN0IHh6UGxhbmU6IFBsYW5lID0gbmV3IFBsYW5lKG9yaWdpbmFsUG9zLCB2ZWMzLmNyZWF0ZSgwLCAxLCAwKSk7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvblRpbWU6IG51bWJlciB8IG51bGwgPSByYXkuaW50ZXJzZWN0UGxhbmUoeHpQbGFuZSk7XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb25UaW1lKSB7XG4gICAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uUG9pbnQ6IFZlYzMgPSByYXkuYXQoaW50ZXJzZWN0aW9uVGltZSk7XG4gICAgICAgICAgaWYgKCF0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCA9IGludGVyc2VjdGlvblBvaW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwb3M6IFZlYzMgPSBvcmlnaW5hbFBvcztcbiAgICAgICAgICAgIGNvbnN0IHYxOiBWZWMzID0gdmVjMy5zdWIodGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50LCBwb3MpO1xuICAgICAgICAgICAgY29uc3QgdjI6IFZlYzMgPSB2ZWMzLnN1YihpbnRlcnNlY3Rpb25Qb2ludCwgcG9zKTtcbiAgICAgICAgICAgIHZhciBhbmdsZTogbnVtYmVyID0gYW5nbGVCZXR3ZWVuKHYxLCB2Mik7XG4gICAgICAgICAgICBpZiAodmVjMy5kb3QodmVjMy5jcmVhdGUoMCwgMSwgMCksIHZlYzMuY3Jvc3ModjEsIHYyKSkgPCAwKSB7XG4gICAgICAgICAgICAgIGFuZ2xlICo9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnJvdGF0ZVkodGhpcy5vcmlnaW5hbE1vZGVsLCBhbmdsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSB0aGlzLnpTcGlubmVyLmdldElEKCk6IHtcblxuICAgICAgICBjb25zdCB4eVBsYW5lOiBQbGFuZSA9IG5ldyBQbGFuZShvcmlnaW5hbFBvcywgdmVjMy5jcmVhdGUoMCwgMCwgMSkpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25UaW1lOiBudW1iZXIgfCBudWxsID0gcmF5LmludGVyc2VjdFBsYW5lKHh5UGxhbmUpO1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uVGltZSkge1xuICAgICAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50OiBWZWMzID0gcmF5LmF0KGludGVyc2VjdGlvblRpbWUpO1xuICAgICAgICAgIGlmICghdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50KSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb25Qb2ludDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcG9zOiBWZWMzID0gb3JpZ2luYWxQb3M7XG4gICAgICAgICAgICBjb25zdCB2MTogVmVjMyA9IHZlYzMuc3ViKHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCwgcG9zKTtcbiAgICAgICAgICAgIGNvbnN0IHYyOiBWZWMzID0gdmVjMy5zdWIoaW50ZXJzZWN0aW9uUG9pbnQsIHBvcyk7XG4gICAgICAgICAgICB2YXIgYW5nbGU6IG51bWJlciA9IGFuZ2xlQmV0d2Vlbih2MSwgdjIpO1xuICAgICAgICAgICAgaWYgKHZlYzMuZG90KHZlYzMuY3JlYXRlKDAsIDAsIDEpLCB2ZWMzLmNyb3NzKHYxLCB2MikpIDwgMCkge1xuICAgICAgICAgICAgICBhbmdsZSAqPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5yb3RhdGVaKHRoaXMub3JpZ2luYWxNb2RlbCwgYW5nbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgdGhpcy54QXhpc01vdmVyLmdldElEKCk6IHtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uOiBWZWMzID0gcmF5LmNsb3Nlc3RQb2ludE9uTGluZShvcmlnaW5hbFBvcywgdmVjMy5hZGQob3JpZ2luYWxQb3MsIHZlYzMuY3JlYXRlKDEsIDAsIDApKSk7XG4gICAgICAgIGlmICghdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50KSB7XG4gICAgICAgICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gaW50ZXJzZWN0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC50cmFuc2xhdGUodGhpcy5vcmlnaW5hbE1vZGVsLCB2ZWMzLnN1YihpbnRlcnNlY3Rpb24sIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSB0aGlzLnlBeGlzTW92ZXIuZ2V0SUQoKToge1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb246IFZlYzMgPSByYXkuY2xvc2VzdFBvaW50T25MaW5lKG9yaWdpbmFsUG9zLCB2ZWMzLmFkZChvcmlnaW5hbFBvcywgdmVjMy5jcmVhdGUoMCwgMSwgMCkpKTtcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnRyYW5zbGF0ZSh0aGlzLm9yaWdpbmFsTW9kZWwsIHZlYzMuc3ViKGludGVyc2VjdGlvbiwgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIHRoaXMuekF4aXNNb3Zlci5nZXRJRCgpOiB7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbjogVmVjMyA9IHJheS5jbG9zZXN0UG9pbnRPbkxpbmUob3JpZ2luYWxQb3MsIHZlYzMuYWRkKG9yaWdpbmFsUG9zLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSkpO1xuICAgICAgICBpZiAoIXRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCkge1xuICAgICAgICAgIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCA9IGludGVyc2VjdGlvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQudHJhbnNsYXRlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5zdWIoaW50ZXJzZWN0aW9uLCB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgdGhpcy54U2NhbGVyLmdldElEKCk6IHtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uOiBWZWMzID0gcmF5LmNsb3Nlc3RQb2ludE9uTGluZShvcmlnaW5hbFBvcywgdmVjMy5hZGQob3JpZ2luYWxQb3MsIHZlYzMuY3JlYXRlKDEsIDAsIDApKSk7XG4gICAgICAgIGlmICghdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50KSB7XG4gICAgICAgICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gaW50ZXJzZWN0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRGVsdGEgPSB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnRbMF0gLSBvcmlnaW5hbFBvc1swXTtcbiAgICAgICAgICBjb25zdCBuZXdEZWx0YSA9IGludGVyc2VjdGlvblswXSAtIG9yaWdpbmFsUG9zWzBdO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5zY2FsZSh0aGlzLm9yaWdpbmFsTW9kZWwsIHZlYzMuY3JlYXRlKG5ld0RlbHRhIC8gb3JpZ2luYWxEZWx0YSwgMSwgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSB0aGlzLnlTY2FsZXIuZ2V0SUQoKToge1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb246IFZlYzMgPSByYXkuY2xvc2VzdFBvaW50T25MaW5lKG9yaWdpbmFsUG9zLCB2ZWMzLmFkZChvcmlnaW5hbFBvcywgdmVjMy5jcmVhdGUoMCwgMSwgMCkpKTtcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxEZWx0YTogbnVtYmVyID0gdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50WzFdIC0gb3JpZ2luYWxQb3NbMV07XG4gICAgICAgICAgY29uc3QgbmV3RGVsdGE6IG51bWJlciA9IGludGVyc2VjdGlvblsxXSAtIG9yaWdpbmFsUG9zWzFdO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5zY2FsZSh0aGlzLm9yaWdpbmFsTW9kZWwsIHZlYzMuY3JlYXRlKDEsIG5ld0RlbHRhIC8gb3JpZ2luYWxEZWx0YSwgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSB0aGlzLnpTY2FsZXIuZ2V0SUQoKToge1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb246IFZlYzMgPSByYXkuY2xvc2VzdFBvaW50T25MaW5lKG9yaWdpbmFsUG9zLCB2ZWMzLmFkZChvcmlnaW5hbFBvcywgdmVjMy5jcmVhdGUoMCwgMCwgMSkpKTtcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb247XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxEZWx0YTogbnVtYmVyID0gdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50WzJdIC0gb3JpZ2luYWxQb3NbMl07XG4gICAgICAgICAgY29uc3QgbmV3RGVsdGE6IG51bWJlciA9IGludGVyc2VjdGlvblsyXSAtIG9yaWdpbmFsUG9zWzJdO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5zY2FsZSh0aGlzLm9yaWdpbmFsTW9kZWwsIHZlYzMuY3JlYXRlKDEsIDEsIG5ld0RlbHRhIC8gb3JpZ2luYWxEZWx0YSkpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSB0aGlzLnh5U2NhbGVyLmdldElEKCk6IHtcbiAgICAgICAgY29uc3QgeHlQbGFuZTogUGxhbmUgPSBuZXcgUGxhbmUob3JpZ2luYWxQb3MsIHZlYzMuY3JlYXRlKDAsIDAsIDEpKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uVGltZTogbnVtYmVyIHwgbnVsbCA9IHJheS5pbnRlcnNlY3RQbGFuZSh4eVBsYW5lKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvblRpbWUpIHtcbiAgICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludDogVmVjMyA9IHJheS5hdChpbnRlcnNlY3Rpb25UaW1lKTtcbiAgICAgICAgICBpZiAoIXRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gaW50ZXJzZWN0aW9uUG9pbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsRGVsdGE6IG51bWJlciA9IHZlYzMubGVuZ3RoKHZlYzMuc3ViKHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCwgb3JpZ2luYWxQb3MpKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlbHRhOiBudW1iZXIgPSB2ZWMzLmxlbmd0aCh2ZWMzLnN1YihpbnRlcnNlY3Rpb25Qb2ludCwgb3JpZ2luYWxQb3MpKTtcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcjogbnVtYmVyID0gbmV3RGVsdGEgLyBvcmlnaW5hbERlbHRhO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnNjYWxlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5jcmVhdGUoZmFjdG9yLCBmYWN0b3IsIDEpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIHRoaXMueXpTY2FsZXIuZ2V0SUQoKToge1xuICAgICAgICBjb25zdCB5elBsYW5lOiBQbGFuZSA9IG5ldyBQbGFuZShvcmlnaW5hbFBvcywgdmVjMy5jcmVhdGUoMSwgMCwgMCkpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25UaW1lOiBudW1iZXIgfCBudWxsID0gcmF5LmludGVyc2VjdFBsYW5lKHl6UGxhbmUpO1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uVGltZSkge1xuICAgICAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50OiBWZWMzID0gcmF5LmF0KGludGVyc2VjdGlvblRpbWUpO1xuICAgICAgICAgIGlmICghdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50KSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBpbnRlcnNlY3Rpb25Qb2ludDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxEZWx0YTogbnVtYmVyID0gdmVjMy5sZW5ndGgodmVjMy5zdWIodGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50LCBvcmlnaW5hbFBvcykpO1xuICAgICAgICAgICAgY29uc3QgbmV3RGVsdGE6IG51bWJlciA9IHZlYzMubGVuZ3RoKHZlYzMuc3ViKGludGVyc2VjdGlvblBvaW50LCBvcmlnaW5hbFBvcykpO1xuICAgICAgICAgICAgY29uc3QgZmFjdG9yOiBudW1iZXIgPSBuZXdEZWx0YSAvIG9yaWdpbmFsRGVsdGE7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQuc2NhbGUodGhpcy5vcmlnaW5hbE1vZGVsLCB2ZWMzLmNyZWF0ZSgxLCBmYWN0b3IsIGZhY3RvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgdGhpcy54elNjYWxlci5nZXRJRCgpOiB7XG4gICAgICAgIGNvbnN0IHh6UGxhbmU6IFBsYW5lID0gbmV3IFBsYW5lKG9yaWdpbmFsUG9zLCB2ZWMzLmNyZWF0ZSgwLCAxLCAwKSk7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvblRpbWU6IG51bWJlciB8IG51bGwgPSByYXkuaW50ZXJzZWN0UGxhbmUoeHpQbGFuZSk7XG4gICAgICAgIGlmIChpbnRlcnNlY3Rpb25UaW1lKSB7XG4gICAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uUG9pbnQ6IFZlYzMgPSByYXkuYXQoaW50ZXJzZWN0aW9uVGltZSk7XG4gICAgICAgICAgaWYgKCF0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCA9IGludGVyc2VjdGlvblBvaW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbERlbHRhOiBudW1iZXIgPSB2ZWMzLmxlbmd0aCh2ZWMzLnN1Yih0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQsIG9yaWdpbmFsUG9zKSk7XG4gICAgICAgICAgICBjb25zdCBuZXdEZWx0YTogbnVtYmVyID0gdmVjMy5sZW5ndGgodmVjMy5zdWIoaW50ZXJzZWN0aW9uUG9pbnQsIG9yaWdpbmFsUG9zKSk7XG4gICAgICAgICAgICBjb25zdCBmYWN0b3I6IG51bWJlciA9IG5ld0RlbHRhIC8gb3JpZ2luYWxEZWx0YTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5zY2FsZSh0aGlzLm9yaWdpbmFsTW9kZWwsIHZlYzMuY3JlYXRlKGZhY3RvciwgMSwgZmFjdG9yKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSB0aGlzLnh5elNjYWxlci5nZXRJRCgpOiB7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbjogVmVjMyA9IHJheS5jbG9zZXN0UG9pbnRPbkxpbmUob3JpZ2luYWxQb3MsIHZlYzMuYWRkKG9yaWdpbmFsUG9zLCB2ZWMzLmNyZWF0ZSgwLCAwLCAxKSkpO1xuICAgICAgICBpZiAodGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID09PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gaW50ZXJzZWN0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBkejogbnVtYmVyID0gaW50ZXJzZWN0aW9uWzJdIC0gdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50WzJdO1xuICAgICAgICAgIGlmIChkeiA+IDApIGR6ICs9IDE7XG4gICAgICAgICAgZWxzZSBkeiA9IC0xIC8gKGR6IC0gMSk7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnNjYWxlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5jcmVhdGUoZHosIGR6LCBkeikpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FzZSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICAgIHRoaXMuc3VyZmFjZXMuc2V0TW9kZWwobWF0NC5zY2FsZSh0aGlzLmN1cnJlbnRNb2RlbCwgdmVjMy5pbnZlcnNlKG1hdDQuZ2V0U2NhbGluZyh0aGlzLmN1cnJlbnRNb2RlbCkpKSk7XG4gICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5vblNlbGVjdGlvbk1vdmVkKCk7XG4gIH1cblxuICBwdWJsaWMgb25Nb3VzZVVwKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgaWYgKHRoaXMuZWxlbWVudC5oaWRkZW4pIHtcbiAgICAgICAgaWYgKHRoaXMubW92ZWQpIHsgLy8gZHJhZ2dlZFxuICAgICAgICAgIHRoaXMubW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCA9IG51bGw7XG4gICAgICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5vblNlbGVjdGlvbk1vdmVkKCk7XG4gICAgICAgICAgSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS50cmFuc2Zvcm1TZWxlY3RlZCgpO1xuICAgICAgICAgIHRoaXMudXBkYXRlZFNlbGVjdGlvbigpO1xuICAgICAgICAgIHRoaXMub3JpZ2luYWxNb2RlbCA9IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB9IGVsc2UgeyAvLyBjbGlja2VkXG4gICAgICAgICAgdGhpcy5vcmlnaW5hbEludGVyc2VjdGlvblBvaW50ID0gbnVsbDtcblxuICAgICAgICAgIHN3aXRjaCAodGhpcy5jb21wb25lbnRDbGlja2VkKSB7XG4gICAgICAgICAgICBjYXNlIHRoaXMueFNwaW5uZXIuZ2V0SUQoKTpcbiAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IFwiWCBSb3RhdGlvbjogXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSB0aGlzLnlTcGlubmVyLmdldElEKCk6XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlkgUm90YXRpb246IFwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy56U3Bpbm5lci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJaIFJvdGF0aW9uOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMueEF4aXNNb3Zlci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJYIFRyYW5zbGF0aW9uOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMueUF4aXNNb3Zlci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJZIFRyYW5zbGF0aW9uOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMuekF4aXNNb3Zlci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJaIFRyYW5zbGF0aW9uOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMueFNjYWxlci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJYIFNjYWxlOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMueVNjYWxlci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJZIFNjYWxlOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMuelNjYWxlci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJaIFNjYWxlOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMueHlTY2FsZXIuZ2V0SUQoKTpcbiAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IFwiWFkgU2NhbGU6IFwiO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy55elNjYWxlci5nZXRJRCgpOlxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCJZWiBTY2FsZTogXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSB0aGlzLnh6U2NhbGVyLmdldElEKCk6XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlhaIFNjYWxlOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMueHl6U2NhbGVyLmdldElEKCk6XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIlNjYWxlOiBcIjtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBudWxsO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG1vdXNlUG9zOiBbbnVtYmVyLCBudW1iZXJdID0gSU5TVEFOQ0UuZ2V0RXZlbnRNYW5hZ2VyKCkuZ2V0TW91c2VIYW5kbGVyKCkuZ2V0TW91c2VQb3MoKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYFxuICAgICAgICAgIGxlZnQ6JHttb3VzZVBvc1swXSArIDIwfXB4O1xuICAgICAgICAgIHRvcDoke21vdXNlUG9zWzFdIC0gMjB9cHg7XG4gICAgICAgICAgd2lkdGg6YXV0bztcbiAgICAgICAgICBoZWlnaHQ6YXV0bztgXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIGFjdGl2ZSB3aXRoIHRleHQgZGlhbG9nXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZWxlbWVudC5oaWRkZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLm9yaWdpbmFsSW50ZXJzZWN0aW9uUG9pbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IHRoaXMub3JpZ2luYWxNb2RlbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25rZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlICYmIHRoaXMuZWxlbWVudC5oaWRkZW4gPT09IGZhbHNlKSB7XG4gICAgICBpZiAoZXZlbnQuY29kZSA9PSBcIkVudGVyXCIpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gICAgICAgIHRoaXMub3JpZ2luYWxJbnRlcnNlY3Rpb25Qb2ludCA9IG51bGw7XG4gICAgICAgIElOU1RBTkNFLmdldFNlbGVjdG9yKCkub25TZWxlY3Rpb25Nb3ZlZCgpO1xuICAgICAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLnRyYW5zZm9ybVNlbGVjdGVkKCk7XG4gICAgICAgIHRoaXMudXBkYXRlZFNlbGVjdGlvbigpO1xuICAgICAgICB0aGlzLm9yaWdpbmFsTW9kZWwgPSB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGV2ZW50LmNvZGUgPT0gXCJEZWxldGVcIiB8fCBldmVudC5jb2RlID09IFwiQmFja3NwYWNlXCIgJiYgdGhpcy5lbGVtZW50LmlubmVySFRNTC5hdCgtMSkgIT0gXCI6XCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJoZXJlXCIpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5lbGVtZW50LmlubmVySFRNTC5zbGljZSgwLCAtMSk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBldmVudC5rZXk7XG4gICAgICB9XG4gICAgICBjb25zdCBpbnB1dDogc3RyaW5nID0gdGhpcy5lbGVtZW50LmlubmVySFRNTC5zcGxpdChcIjpcIilbMV07XG4gICAgICB2YXIgcGFyc2VkSW5wdXQ6IG51bWJlciA9IHBhcnNlRmxvYXQoaW5wdXQpO1xuICAgICAgc3dpdGNoICh0aGlzLmNvbXBvbmVudENsaWNrZWQpIHtcbiAgICAgICAgY2FzZSB0aGlzLnhTcGlubmVyLmdldElEKCk6XG4gICAgICAgICAgaWYgKGlzTmFOKHBhcnNlZElucHV0KSkgcGFyc2VkSW5wdXQgPSAwO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5yb3RhdGVYKHRoaXMub3JpZ2luYWxNb2RlbCwgcGFyc2VkSW5wdXQgLyAxODAgKiBNYXRoLlBJKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnlTcGlubmVyLmdldElEKCk6XG4gICAgICAgICAgaWYgKGlzTmFOKHBhcnNlZElucHV0KSkgcGFyc2VkSW5wdXQgPSAwO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5yb3RhdGVZKHRoaXMub3JpZ2luYWxNb2RlbCwgcGFyc2VkSW5wdXQgLyAxODAgKiBNYXRoLlBJKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnpTcGlubmVyLmdldElEKCk6XG4gICAgICAgICAgaWYgKGlzTmFOKHBhcnNlZElucHV0KSkgcGFyc2VkSW5wdXQgPSAwO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5yb3RhdGVaKHRoaXMub3JpZ2luYWxNb2RlbCwgcGFyc2VkSW5wdXQgLyAxODAgKiBNYXRoLlBJKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnhBeGlzTW92ZXIuZ2V0SUQoKTpcbiAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VkSW5wdXQpKSBwYXJzZWRJbnB1dCA9IDA7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnRyYW5zbGF0ZSh0aGlzLm9yaWdpbmFsTW9kZWwsIHZlYzMuY3JlYXRlKHBhcnNlZElucHV0LCAwLCAwKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgdGhpcy55QXhpc01vdmVyLmdldElEKCk6XG4gICAgICAgICAgaWYgKGlzTmFOKHBhcnNlZElucHV0KSkgcGFyc2VkSW5wdXQgPSAwO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC50cmFuc2xhdGUodGhpcy5vcmlnaW5hbE1vZGVsLCB2ZWMzLmNyZWF0ZSgwLCBwYXJzZWRJbnB1dCwgMCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIHRoaXMuekF4aXNNb3Zlci5nZXRJRCgpOlxuICAgICAgICAgIGlmIChpc05hTihwYXJzZWRJbnB1dCkpIHBhcnNlZElucHV0ID0gMDtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQudHJhbnNsYXRlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5jcmVhdGUoMCwgMCwgcGFyc2VkSW5wdXQpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnhTY2FsZXIuZ2V0SUQoKTpcbiAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VkSW5wdXQpKSBwYXJzZWRJbnB1dCA9IDE7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnNjYWxlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5jcmVhdGUocGFyc2VkSW5wdXQsIDEsIDEpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnlTY2FsZXIuZ2V0SUQoKTpcbiAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VkSW5wdXQpKSBwYXJzZWRJbnB1dCA9IDE7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnNjYWxlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5jcmVhdGUoMSwgcGFyc2VkSW5wdXQsIDEpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnpTY2FsZXIuZ2V0SUQoKTpcbiAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VkSW5wdXQpKSBwYXJzZWRJbnB1dCA9IDE7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnNjYWxlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5jcmVhdGUoMSwgMSwgcGFyc2VkSW5wdXQpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnh5U2NhbGVyLmdldElEKCk6XG4gICAgICAgICAgaWYgKGlzTmFOKHBhcnNlZElucHV0KSkgcGFyc2VkSW5wdXQgPSAxO1xuICAgICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbWF0NC5zY2FsZSh0aGlzLm9yaWdpbmFsTW9kZWwsIHZlYzMuY3JlYXRlKHBhcnNlZElucHV0LCBwYXJzZWRJbnB1dCwgMSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIHRoaXMueXpTY2FsZXIuZ2V0SUQoKTpcbiAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VkSW5wdXQpKSBwYXJzZWRJbnB1dCA9IDE7XG4gICAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LnNjYWxlKHRoaXMub3JpZ2luYWxNb2RlbCwgdmVjMy5jcmVhdGUoMSwgcGFyc2VkSW5wdXQsIHBhcnNlZElucHV0KSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgdGhpcy54elNjYWxlci5nZXRJRCgpOlxuICAgICAgICAgIGlmIChpc05hTihwYXJzZWRJbnB1dCkpIHBhcnNlZElucHV0ID0gMTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQuc2NhbGUodGhpcy5vcmlnaW5hbE1vZGVsLCB2ZWMzLmNyZWF0ZShwYXJzZWRJbnB1dCwgMSwgcGFyc2VkSW5wdXQpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLnh5elNjYWxlci5nZXRJRCgpOlxuICAgICAgICAgIGlmIChpc05hTihwYXJzZWRJbnB1dCkpIHBhcnNlZElucHV0ID0gMTtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQuc2NhbGUodGhpcy5vcmlnaW5hbE1vZGVsLCB2ZWMzLmNyZWF0ZShwYXJzZWRJbnB1dCwgcGFyc2VkSW5wdXQsIHBhcnNlZElucHV0KSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBJTlNUQU5DRS5nZXRTZWxlY3RvcigpLm9uU2VsZWN0aW9uTW92ZWQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaXNBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xuICB9XG5cbiAgcHVibGljIGlkQ2xpY2tlZChpZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmFjdGl2ZSkge1xuICAgICAgaWYgKHRoaXMuZWxlbWVudC5oaWRkZW4pIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbXBvbmVudENsaWNrZWQgPSBpZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmZsaXAoKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVkU2VsZWN0aW9uKCk6IHZvaWQge1xuXG4gICAgY29uc3Qgc2VsZWN0aW9uOiBTZXQ8R2VvbWV0cnk+ID0gSU5TVEFOQ0UuZ2V0U2VsZWN0b3IoKS5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoc2VsZWN0aW9uLnNpemUgPT09IDApIHtcbiAgICAgIHRoaXMuc3VyZmFjZXMuaGlkZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb25CQjogQm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgIGZvciAoY29uc3QgZ2VvIG9mIHNlbGVjdGlvbikge1xuICAgICAgICBpZiAoZ2VvLmlzU2VsZWN0ZWQoKSkge1xuICAgICAgICAgIHNlbGVjdGlvbkJCLmFkZEJvdW5kaW5nQm94KGdlby5nZXRCb3VuZGluZ0JveCgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxlY3Rpb25CQi5hZGRCb3VuZGluZ0JveChnZW8uZ2V0U3ViU2VsZWN0aW9uQm91bmRpbmdCb3goKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMub3JpZ2luYWxNb2RlbCA9IG1hdDQudHJhbnNsYXRlKG1hdDQuaWRlbnRpdHkoKSwgc2VsZWN0aW9uQkIuZ2V0Q2VudGVyKCkpO1xuICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtYXQ0LmNsb25lKHRoaXMub3JpZ2luYWxNb2RlbCk7XG4gICAgICB0aGlzLnN1cmZhY2VzLnNldE1vZGVsKHRoaXMub3JpZ2luYWxNb2RlbCk7XG4gICAgICB0aGlzLmZsaXAoKTtcbiAgICAgIHRoaXMuc3VyZmFjZXMuc2hvdygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBmbGlwKCk6IHZvaWQge1xuXG4gICAgY29uc3QgY2FtZXJhUG9zOiBWZWMzID0gSU5TVEFOQ0UuZ2V0U2NlbmUoKS5nZXRDYW1lcmEoKS5nZXRQb3NpdGlvbigpO1xuICAgIGNvbnN0IHRoaXNQb3M6IFZlYzMgPSBtYXQ0LmdldFRyYW5zbGF0aW9uKHRoaXMuY3VycmVudE1vZGVsKTtcbiAgICBjb25zdCBkeDogbnVtYmVyID0gdGhpc1Bvc1swXSAtIGNhbWVyYVBvc1swXTtcbiAgICBjb25zdCBkeTogbnVtYmVyID0gdGhpc1Bvc1sxXSAtIGNhbWVyYVBvc1sxXTtcbiAgICBjb25zdCBkejogbnVtYmVyID0gdGhpc1Bvc1syXSAtIGNhbWVyYVBvc1syXTtcbiAgICB2YXIgZmxpcHBlcjogTWF0NCA9IG1hdDQuc2NhbGUobWF0NC5pZGVudGl0eSgpLCB2ZWMzLmNyZWF0ZShcbiAgICAgIGR4ID4gMCA/IC0xIDogMSxcbiAgICAgIGR5ID4gMCA/IC0xIDogMSxcbiAgICAgIGR6ID4gMCA/IC0xIDogMSxcbiAgICApKTtcblxuICAgIHRoaXMueHlQbGFuZU1vdmVyLnNldE1vZGVsKG1hdDQubXVsKGZsaXBwZXIsIE1vdmVyLnRvWFlQbGFuZSkpO1xuICAgIHRoaXMueXpQbGFuZU1vdmVyLnNldE1vZGVsKG1hdDQubXVsKGZsaXBwZXIsIE1vdmVyLnRvWVpQbGFuZSkpO1xuICAgIHRoaXMueHpQbGFuZU1vdmVyLnNldE1vZGVsKG1hdDQubXVsKGZsaXBwZXIsIE1vdmVyLnRvWFpQbGFuZSkpO1xuXG4gICAgdGhpcy54U3Bpbm5lci5zZXRNb2RlbChtYXQ0Lm11bChmbGlwcGVyLCBNb3Zlci50b1laUGxhbmUpKTtcbiAgICB0aGlzLnlTcGlubmVyLnNldE1vZGVsKG1hdDQubXVsKGZsaXBwZXIsIE1vdmVyLnRvWFpQbGFuZSkpO1xuICAgIHRoaXMuelNwaW5uZXIuc2V0TW9kZWwobWF0NC5tdWwoZmxpcHBlciwgTW92ZXIudG9YWVBsYW5lKSk7XG5cbiAgICB0aGlzLnhBeGlzTW92ZXIuc2V0TW9kZWwobWF0NC5tdWwoZmxpcHBlciwgTW92ZXIudG9YWVBsYW5lKSk7XG4gICAgdGhpcy55QXhpc01vdmVyLnNldE1vZGVsKG1hdDQubXVsKGZsaXBwZXIsIE1vdmVyLnRvWFlQbGFuZSkpO1xuICAgIHRoaXMuekF4aXNNb3Zlci5zZXRNb2RlbChtYXQ0Lm11bChmbGlwcGVyLCBNb3Zlci50b1hZUGxhbmUpKTtcblxuICAgIHRoaXMueFNjYWxlci5zZXRNb2RlbChtYXQ0Lm11bChmbGlwcGVyLCBNb3Zlci50b1hZUGxhbmUpKTtcbiAgICB0aGlzLnlTY2FsZXIuc2V0TW9kZWwobWF0NC5tdWwoZmxpcHBlciwgTW92ZXIudG9YWVBsYW5lKSk7XG4gICAgdGhpcy56U2NhbGVyLnNldE1vZGVsKG1hdDQubXVsKGZsaXBwZXIsIE1vdmVyLnRvWFlQbGFuZSkpO1xuXG4gICAgdGhpcy54eVNjYWxlci5zZXRNb2RlbChtYXQ0Lm11bChmbGlwcGVyLCBNb3Zlci50b1hZUGxhbmUpKTtcbiAgICB0aGlzLnl6U2NhbGVyLnNldE1vZGVsKG1hdDQubXVsKGZsaXBwZXIsIE1vdmVyLnRvWVpQbGFuZSkpO1xuICAgIHRoaXMueHpTY2FsZXIuc2V0TW9kZWwobWF0NC5tdWwoZmxpcHBlciwgTW92ZXIudG9YWlBsYW5lKSk7XG5cbiAgICB0aGlzLnh5elNjYWxlci5zZXRNb2RlbChtYXQ0Lm11bChmbGlwcGVyLCBNb3Zlci50b1hZUGxhbmUpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUcmFuc2Zvcm0oKTogTWF0NCB7XG4gICAgcmV0dXJuIG1hdDQubXVsKHRoaXMuY3VycmVudE1vZGVsLCBtYXQ0LmludmVyc2UodGhpcy5vcmlnaW5hbE1vZGVsKSk7XG4gIH1cblxuICBwdWJsaWMgc2V0VHJhbnNmb3JtKHQ6IE1hdDQpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1hdDQubXVsKHQsIHRoaXMub3JpZ2luYWxNb2RlbCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/widgets/mover.ts\n");

/***/ }),

/***/ "./src/window/window.ts":
/*!******************************!*\
  !*** ./src/window/window.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CADWindow: () => (/* binding */ CADWindow)\n/* harmony export */ });\nclass CADWindow {\n    constructor(name, start, end) {\n        this.start = start;\n        this.end = end;\n        this.element = document.createElement(\"div\");\n        this.element.id = name;\n        this.element.className = \"floating-window\";\n        this.updateSize();\n        document.body.appendChild(this.element);\n        this.populate();\n    }\n    updateEnd(end) {\n        this.end = end;\n        this.updateSize();\n    }\n    updateSize() {\n        const left = Math.min(this.start[0], this.end[0]);\n        const top = Math.min(this.start[1], this.end[1]);\n        const width = Math.abs(this.start[0] - this.end[0]) - 10;\n        const height = Math.abs(this.start[1] - this.end[1]) - 10;\n        this.element.setAttribute(\"style\", `\n      left:${left}px;\n      top:${top}px;\n      width:${width}px;\n      height:${height}px;`);\n    }\n    destroy() {\n        document.body.removeChild(this.element);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvdy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBZSxTQUFTO0lBSTdCLFlBQVksSUFBWSxFQUNkLEtBQXVCLEVBQ3ZCLEdBQXFCO1FBRHJCLFVBQUssR0FBTCxLQUFLLENBQWtCO1FBQ3ZCLFFBQUcsR0FBSCxHQUFHLENBQWtCO1FBQzdCLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUM7UUFDM0MsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUVNLFNBQVMsQ0FBQyxHQUFxQjtRQUNwQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRU8sVUFBVTtRQUNoQixNQUFNLElBQUksR0FBVyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELE1BQU0sR0FBRyxHQUFXLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekQsTUFBTSxLQUFLLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDakUsTUFBTSxNQUFNLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDbEUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFO2FBQzFCLElBQUk7WUFDTCxHQUFHO2NBQ0QsS0FBSztlQUNKLE1BQU0sS0FBSyxDQUNyQixDQUFDO0lBQ0osQ0FBQztJQUVNLE9BQU87UUFDWixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDMUMsQ0FBQztDQUtGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvd2luZG93L3dpbmRvdy50cz9kN2NhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDQURXaW5kb3cge1xuXG4gIHByb3RlY3RlZCBlbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBzdGFydDogW251bWJlciwgbnVtYmVyXSxcbiAgICBwcml2YXRlIGVuZDogW251bWJlciwgbnVtYmVyXSkge1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5lbGVtZW50LmlkID0gbmFtZTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gXCJmbG9hdGluZy13aW5kb3dcIjtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5wb3B1bGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUVuZChlbmQ6IFtudW1iZXIsIG51bWJlcl0pOiB2b2lkIHtcbiAgICB0aGlzLmVuZCA9IGVuZDtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU2l6ZSgpOiB2b2lkIHtcbiAgICBjb25zdCBsZWZ0OiBudW1iZXIgPSBNYXRoLm1pbih0aGlzLnN0YXJ0WzBdLCB0aGlzLmVuZFswXSk7XG4gICAgY29uc3QgdG9wOiBudW1iZXIgPSBNYXRoLm1pbih0aGlzLnN0YXJ0WzFdLCB0aGlzLmVuZFsxXSk7XG4gICAgY29uc3Qgd2lkdGg6IG51bWJlciA9IE1hdGguYWJzKHRoaXMuc3RhcnRbMF0gLSB0aGlzLmVuZFswXSkgLSAxMDtcbiAgICBjb25zdCBoZWlnaHQ6IG51bWJlciA9IE1hdGguYWJzKHRoaXMuc3RhcnRbMV0gLSB0aGlzLmVuZFsxXSkgLSAxMDtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgYFxuICAgICAgbGVmdDoke2xlZnR9cHg7XG4gICAgICB0b3A6JHt0b3B9cHg7XG4gICAgICB3aWR0aDoke3dpZHRofXB4O1xuICAgICAgaGVpZ2h0OiR7aGVpZ2h0fXB4O2BcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IHBvcHVsYXRlKCk6IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCB0aWNrKCk6IHZvaWQ7XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/window/window.ts\n");

/***/ }),

/***/ "./src/window/windowManager.ts":
/*!*************************************!*\
  !*** ./src/window/windowManager.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WINDOW_NAMES: () => (/* binding */ WINDOW_NAMES),\n/* harmony export */   WindowManager: () => (/* binding */ WindowManager)\n/* harmony export */ });\n/* harmony import */ var _windows_logWindow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./windows/logWindow */ \"./src/window/windows/logWindow.ts\");\n/* harmony import */ var _windows_materialsWindow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./windows/materialsWindow */ \"./src/window/windows/materialsWindow.ts\");\n/* harmony import */ var _windows_sceneWindow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./windows/sceneWindow */ \"./src/window/windows/sceneWindow.ts\");\n/* harmony import */ var _windows_snapsWindow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./windows/snapsWindow */ \"./src/window/windows/snapsWindow.ts\");\n/* harmony import */ var _windows_statsWindow__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./windows/statsWindow */ \"./src/window/windows/statsWindow.ts\");\n\n\n\n\n\nconst WINDOW_NAMES = new Map();\nWINDOW_NAMES.set(1, \"stats\");\nWINDOW_NAMES.set(2, \"log\");\nWINDOW_NAMES.set(3, \"materials\");\nWINDOW_NAMES.set(4, \"scene\");\nWINDOW_NAMES.set(5, \"snaps\");\nclass WindowManager {\n    constructor() {\n        this.windows = new Map();\n        this.setupDefaultWindows();\n    }\n    setupDefaultWindows() {\n        this.addWindow(\"materials\", [10, 10], [210, 580]);\n        this.addWindow(\"stats\", [220, 10], [410, 240]);\n        this.addWindow(\"snaps\", [420, 10], [550, 100]);\n    }\n    getWindows() {\n        return this.windows;\n    }\n    addWindow(windowName, start, end) {\n        this.removeWindow(windowName);\n        switch (windowName) {\n            case \"stats\":\n                this.windows.set(\"stats\", new _windows_statsWindow__WEBPACK_IMPORTED_MODULE_4__.StatsWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"log\":\n                this.windows.set(\"log\", new _windows_logWindow__WEBPACK_IMPORTED_MODULE_0__.LogWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"materials\":\n                this.windows.set(\"materials\", new _windows_materialsWindow__WEBPACK_IMPORTED_MODULE_1__.MaterialsWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"scene\":\n                this.windows.set(\"scene\", new _windows_sceneWindow__WEBPACK_IMPORTED_MODULE_2__.SceneWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            case \"snaps\":\n                this.windows.set(\"snaps\", new _windows_snapsWindow__WEBPACK_IMPORTED_MODULE_3__.SnapsWindow(windowName, start, end !== null && end !== void 0 ? end : start));\n                break;\n            default:\n                throw new Error(\"not implemented\");\n        }\n    }\n    removeWindow(windowName) {\n        var _a;\n        (_a = this.windows.get(windowName)) === null || _a === void 0 ? void 0 : _a.destroy();\n        this.windows.delete(windowName);\n    }\n    tick() {\n        for (let window of this.windows.values()) {\n            window.tick();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUM7U0FDdEM7SUFDSCxDQUFDO0lBRU0sWUFBWSxDQUFDLFVBQWtCOztRQUNwQyxVQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsMENBQUUsT0FBTyxFQUFFLENBQUM7UUFDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVNLElBQUk7UUFDVCxLQUFLLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDeEMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ2Y7SUFDSCxDQUFDO0NBRUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy93aW5kb3cvd2luZG93TWFuYWdlci50cz80YTM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENBRFdpbmRvdyB9IGZyb20gXCIuL3dpbmRvd1wiO1xuaW1wb3J0IHsgTG9nV2luZG93IH0gZnJvbSBcIi4vd2luZG93cy9sb2dXaW5kb3dcIjtcbmltcG9ydCB7IE1hdGVyaWFsc1dpbmRvdyB9IGZyb20gXCIuL3dpbmRvd3MvbWF0ZXJpYWxzV2luZG93XCI7XG5pbXBvcnQgeyBTY2VuZVdpbmRvdyB9IGZyb20gXCIuL3dpbmRvd3Mvc2NlbmVXaW5kb3dcIjtcbmltcG9ydCB7IFNuYXBzV2luZG93IH0gZnJvbSBcIi4vd2luZG93cy9zbmFwc1dpbmRvd1wiO1xuaW1wb3J0IHsgU3RhdHNXaW5kb3cgfSBmcm9tIFwiLi93aW5kb3dzL3N0YXRzV2luZG93XCI7XG5cbmV4cG9ydCBjb25zdCBXSU5ET1dfTkFNRVM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwPG51bWJlciwgc3RyaW5nPigpO1xuV0lORE9XX05BTUVTLnNldCgxLCBcInN0YXRzXCIpO1xuV0lORE9XX05BTUVTLnNldCgyLCBcImxvZ1wiKTtcbldJTkRPV19OQU1FUy5zZXQoMywgXCJtYXRlcmlhbHNcIik7XG5XSU5ET1dfTkFNRVMuc2V0KDQsIFwic2NlbmVcIik7XG5XSU5ET1dfTkFNRVMuc2V0KDUsIFwic25hcHNcIik7XG5cbmV4cG9ydCBjbGFzcyBXaW5kb3dNYW5hZ2VyIHtcblxuICBwcml2YXRlIHdpbmRvd3M6IE1hcDxzdHJpbmcsIENBRFdpbmRvdz47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy53aW5kb3dzID0gbmV3IE1hcDxzdHJpbmcsIENBRFdpbmRvdz4oKTtcbiAgICB0aGlzLnNldHVwRGVmYXVsdFdpbmRvd3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBEZWZhdWx0V2luZG93cygpOiB2b2lkIHtcbiAgICB0aGlzLmFkZFdpbmRvdyhcIm1hdGVyaWFsc1wiLCBbMTAsIDEwXSwgWzIxMCwgNTgwXSk7XG4gICAgdGhpcy5hZGRXaW5kb3coXCJzdGF0c1wiLCBbMjIwLCAxMF0sIFs0MTAsIDI0MF0pO1xuICAgIHRoaXMuYWRkV2luZG93KFwic25hcHNcIiwgWzQyMCwgMTBdLCBbNTUwLCAxMDBdKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaW5kb3dzKCk6IE1hcDxzdHJpbmcsIENBRFdpbmRvdz4ge1xuICAgIHJldHVybiB0aGlzLndpbmRvd3M7XG4gIH1cblxuICBwdWJsaWMgYWRkV2luZG93KHdpbmRvd05hbWU6IHN0cmluZywgc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZD86IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgICB0aGlzLnJlbW92ZVdpbmRvdyh3aW5kb3dOYW1lKTtcbiAgICBzd2l0Y2ggKHdpbmRvd05hbWUpIHtcbiAgICAgIGNhc2UgXCJzdGF0c1wiOlxuICAgICAgICB0aGlzLndpbmRvd3Muc2V0KFwic3RhdHNcIiwgbmV3IFN0YXRzV2luZG93KHdpbmRvd05hbWUsIHN0YXJ0LCBlbmQgPz8gc3RhcnQpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibG9nXCI6XG4gICAgICAgIHRoaXMud2luZG93cy5zZXQoXCJsb2dcIiwgbmV3IExvZ1dpbmRvdyh3aW5kb3dOYW1lLCBzdGFydCwgZW5kID8/IHN0YXJ0KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm1hdGVyaWFsc1wiOlxuICAgICAgICB0aGlzLndpbmRvd3Muc2V0KFwibWF0ZXJpYWxzXCIsIG5ldyBNYXRlcmlhbHNXaW5kb3cod2luZG93TmFtZSwgc3RhcnQsIGVuZCA/PyBzdGFydCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzY2VuZVwiOlxuICAgICAgICB0aGlzLndpbmRvd3Muc2V0KFwic2NlbmVcIiwgbmV3IFNjZW5lV2luZG93KHdpbmRvd05hbWUsIHN0YXJ0LCBlbmQgPz8gc3RhcnQpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwic25hcHNcIjpcbiAgICAgICAgdGhpcy53aW5kb3dzLnNldChcInNuYXBzXCIsIG5ldyBTbmFwc1dpbmRvdyh3aW5kb3dOYW1lLCBzdGFydCwgZW5kID8/IHN0YXJ0KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVXaW5kb3cod2luZG93TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy53aW5kb3dzLmdldCh3aW5kb3dOYW1lKT8uZGVzdHJveSgpO1xuICAgIHRoaXMud2luZG93cy5kZWxldGUod2luZG93TmFtZSk7XG4gIH1cblxuICBwdWJsaWMgdGljaygpOiB2b2lkIHtcbiAgICBmb3IgKGxldCB3aW5kb3cgb2YgdGhpcy53aW5kb3dzLnZhbHVlcygpKSB7XG4gICAgICB3aW5kb3cudGljaygpO1xuICAgIH1cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/window/windowManager.ts\n");

/***/ }),

/***/ "./src/window/windows/logWindow.ts":
/*!*****************************************!*\
  !*** ./src/window/windows/logWindow.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogWindow: () => (/* binding */ LogWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\nclass LogWindow extends _window__WEBPACK_IMPORTED_MODULE_1__.CADWindow {\n    populate() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getLog().getLogs();\n    }\n    tick() {\n        this.populate();\n        this.element.scrollTop = this.element.scrollHeight;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3MvbG9nV2luZG93LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUNDO0FBRS9CLE1BQU0sU0FBVSxTQUFRLDhDQUFTO0lBRS9CLFFBQVE7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRywwQ0FBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3ZELENBQUM7SUFFTSxJQUFJO1FBRVQsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0lBQ3JELENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL2xvZ1dpbmRvdy50cz83NWEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgQ0FEV2luZG93IH0gZnJvbSBcIi4uL3dpbmRvd1wiO1xuXG5leHBvcnQgY2xhc3MgTG9nV2luZG93IGV4dGVuZHMgQ0FEV2luZG93IHtcblxuICBwdWJsaWMgcG9wdWxhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IElOU1RBTkNFLmdldExvZygpLmdldExvZ3MoKTtcbiAgfVxuXG4gIHB1YmxpYyB0aWNrKCk6IHZvaWQge1xuXG4gICAgdGhpcy5wb3B1bGF0ZSgpO1xuICAgIHRoaXMuZWxlbWVudC5zY3JvbGxUb3AgPSB0aGlzLmVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/window/windows/logWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/materialsWindow.ts":
/*!***********************************************!*\
  !*** ./src/window/windows/materialsWindow.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MaterialsWindow: () => (/* binding */ MaterialsWindow)\n/* harmony export */ });\n/* harmony import */ var wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wgpu-matrix */ \"./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\");\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _materials_material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../materials/material */ \"./src/materials/material.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\n\n\nclass MaterialsWindow extends _window__WEBPACK_IMPORTED_MODULE_2__.CADWindow {\n    constructor(name, start, end) {\n        super(name, start, end);\n        this.selectedMaterial = null;\n        this.renderMaterialList();\n    }\n    populate() {\n    }\n    tick() {\n    }\n    renderMaterialList() {\n        const materials = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().getMaterials();\n        this.element.innerHTML = \"<u>MATERIALS:</u><br><br>\";\n        const list = document.createElement(\"ul\");\n        const newMaterialButton = document.createElement(\"li\");\n        newMaterialButton.innerHTML = \"<b>Create New Material</b>\";\n        newMaterialButton.onclick = function () {\n            const mat = new _materials_material__WEBPACK_IMPORTED_MODULE_1__.Material(\"\");\n            const thisWindow = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(\"materials\");\n            thisWindow.setSelectedMaterial(mat);\n        };\n        list.appendChild(newMaterialButton);\n        for (const [name, material] of materials) {\n            const element = document.createElement(\"li\");\n            element.innerHTML = name;\n            element.onmousedown = function (ev) {\n                const thisWindow = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(\"materials\");\n                thisWindow.setSelectedMaterial(material);\n                ev.stopPropagation();\n            };\n            list.appendChild(element);\n        }\n        this.element.appendChild(list);\n    }\n    createSlider(id, min, max, initialValue) {\n        const res = document.createElement(\"input\");\n        res.setAttribute(\"type\", \"range\");\n        res.setAttribute(\"min\", min.toString());\n        res.setAttribute(\"max\", max.toString());\n        res.setAttribute(\"step\", \"0.01\");\n        res.style.width = \"12em\";\n        res.setAttribute(\"value\", initialValue.toString());\n        res.setAttribute(\"id\", id);\n        return res;\n    }\n    renderMaterial() {\n        const name = this.selectedMaterial.getName();\n        const color = this.selectedMaterial.getColor();\n        const emissive = this.selectedMaterial.getEmissive();\n        const ambientIntensity = this.selectedMaterial.getAmbientIntensity();\n        const diffuseIntensity = this.selectedMaterial.getPseudoDiffuseIntensity();\n        const specularity = this.selectedMaterial.getSpecularity();\n        const specularIntensity = this.selectedMaterial.getSpecularIntensity();\n        this.element.innerHTML = \"<b><u>Materials:</u></b><br>\";\n        this.element.innerHTML += \"<br><b>Color:<b>\";\n        this.element.innerHTML += \"<br>R:\";\n        this.element.appendChild(this.createSlider(\"colorRedSlider\", 0, 1, color[0]));\n        this.element.innerHTML += \"<br>G:\";\n        this.element.appendChild(this.createSlider(\"colorGreenSlider\", 0, 1, color[1]));\n        this.element.innerHTML += \"<br>B:\";\n        this.element.appendChild(this.createSlider(\"colorBlueSlider\", 0, 1, color[2]));\n        this.element.innerHTML += \"<br>A:\";\n        this.element.appendChild(this.createSlider(\"colorAlphaSlider\", 0, 1, color[3]));\n        this.element.innerHTML += \"<br><b>Emissive:<b>\";\n        this.element.innerHTML += \"<br>R:\";\n        this.element.appendChild(this.createSlider(\"emissiveRedSlider\", 0, 1, emissive[0]));\n        this.element.innerHTML += \"<br>G:\";\n        this.element.appendChild(this.createSlider(\"emissiveGreenSlider\", 0, 1, emissive[1]));\n        this.element.innerHTML += \"<br>B:\";\n        this.element.appendChild(this.createSlider(\"emissiveBlueSlider\", 0, 1, emissive[2]));\n        this.element.innerHTML += \"<br>A:\";\n        this.element.appendChild(this.createSlider(\"emissiveAlphaSlider\", 0, 1, emissive[3]));\n        this.element.innerHTML += \"<br><b>Ambient Intensity:<b>\";\n        this.element.appendChild(this.createSlider(\"ambientIntensity\", 0, 1, ambientIntensity));\n        this.element.innerHTML += \"<br><b>Diffuse Intensity:<b>\";\n        this.element.appendChild(this.createSlider(\"diffuseIntensity\", 0, 1, diffuseIntensity));\n        this.element.innerHTML += \"<br><b>Specularity:<b>\";\n        this.element.appendChild(this.createSlider(\"specularity\", 0, 7, Math.log2(specularity)));\n        this.element.innerHTML += \"<br><b>Specular Intensity:<b>\";\n        this.element.appendChild(this.createSlider(\"specularIntensity\", 0, 1, specularIntensity));\n        this.element.innerHTML += \"<br><b>Name: <b>\";\n        const nameField = document.createElement(\"input\");\n        nameField.setAttribute(\"value\", name);\n        nameField.style.width = \"9em\";\n        nameField.setAttribute(\"id\", \"name field\");\n        this.element.appendChild(nameField);\n        const nameSubmitButton = document.createElement(\"button\");\n        nameSubmitButton.innerHTML = \"<b>Save Name</b>\";\n        nameSubmitButton.style.width = \"13em\";\n        nameSubmitButton.onclick = function (ev) {\n            const thisWindow = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(\"materials\");\n            thisWindow.updatedName();\n            ev.stopPropagation();\n        };\n        this.element.appendChild(nameSubmitButton);\n        const backButton = document.createElement(\"button\");\n        backButton.innerHTML = \"<b>Back</b>\";\n        backButton.onclick = function (ev) {\n            const thisWindow = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(\"materials\");\n            thisWindow.setSelectedMaterial(null);\n            ev.stopPropagation();\n        };\n        this.element.appendChild(backButton);\n        const deleteButton = document.createElement(\"button\");\n        deleteButton.innerHTML = \"<b>Delete</b>\";\n        deleteButton.onclick = function (ev) {\n            const thisWindow = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(\"materials\");\n            const mat = thisWindow.getSelectedMaterial();\n            _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().removeMaterial(mat.getName());\n            thisWindow.setSelectedMaterial(null);\n            ev.stopPropagation();\n        };\n        this.element.appendChild(deleteButton);\n        this.element.oninput = function (ev) {\n            const thisWindow = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getWindowManager().getWindows().get(\"materials\");\n            thisWindow.updatedMaterial();\n            ev.stopPropagation();\n        };\n    }\n    updatedName() {\n        const name = document.getElementById(\"name field\").value;\n        if (name == \"\") {\n            alert(\"Invalid Name\");\n            return;\n        }\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().removeMaterial(this.selectedMaterial.getName());\n        this.selectedMaterial.setName(name);\n        _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getMaterialManager().addMaterial(this.selectedMaterial.getName(), this.selectedMaterial);\n    }\n    updatedMaterial() {\n        const colorR = parseFloat(document.getElementById(\"colorRedSlider\").value);\n        const colorG = parseFloat(document.getElementById(\"colorGreenSlider\").value);\n        const colorB = parseFloat(document.getElementById(\"colorBlueSlider\").value);\n        const colorA = parseFloat(document.getElementById(\"colorAlphaSlider\").value);\n        this.selectedMaterial.updateColor(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(colorR, colorG, colorB, colorA));\n        const emissiveR = parseFloat(document.getElementById(\"emissiveRedSlider\").value);\n        const emissiveG = parseFloat(document.getElementById(\"emissiveGreenSlider\").value);\n        const emissiveB = parseFloat(document.getElementById(\"emissiveBlueSlider\").value);\n        const emissiveA = parseFloat(document.getElementById(\"emissiveAlphaSlider\").value);\n        this.selectedMaterial.updateEmissive(wgpu_matrix__WEBPACK_IMPORTED_MODULE_3__.vec4.create(emissiveR, emissiveG, emissiveB, emissiveA));\n        const ambientIntensity = parseFloat(document.getElementById(\"ambientIntensity\").value);\n        this.selectedMaterial.updateAmbientIntensity(ambientIntensity);\n        const diffuseIntensity = parseFloat(document.getElementById(\"diffuseIntensity\").value);\n        this.selectedMaterial.updatePseudoDiffuseIntensity(diffuseIntensity);\n        const specularity = parseFloat(document.getElementById(\"specularity\").value);\n        this.selectedMaterial.updateSpecularity(Math.pow(2, specularity));\n        const specularIntensity = parseFloat(document.getElementById(\"specularIntensity\").value);\n        this.selectedMaterial.updateSpecularIntensity(specularIntensity);\n    }\n    getSelectedMaterial() {\n        return this.selectedMaterial;\n    }\n    setSelectedMaterial(material) {\n        this.selectedMaterial = material;\n        if (this.selectedMaterial) {\n            this.renderMaterial();\n        }\n        else {\n            this.renderMaterialList();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxnQkFBaUIsQ0FBQyx1QkFBdUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFFTSxtQkFBbUI7UUFDeEIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7SUFDL0IsQ0FBQztJQUVNLG1CQUFtQixDQUFDLFFBQXlCO1FBQ2xELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxRQUFRLENBQUM7UUFDakMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7WUFDekIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3ZCO2FBQU07WUFDTCxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztTQUMzQjtJQUNILENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL21hdGVyaWFsc1dpbmRvdy50cz8zNDdiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlYzQsIFZlYzQgfSBmcm9tIFwid2dwdS1tYXRyaXhcIjtcbmltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgTWF0ZXJpYWwgfSBmcm9tIFwiLi4vLi4vbWF0ZXJpYWxzL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBDQURXaW5kb3cgfSBmcm9tIFwiLi4vd2luZG93XCJcblxuXG5leHBvcnQgY2xhc3MgTWF0ZXJpYWxzV2luZG93IGV4dGVuZHMgQ0FEV2luZG93IHtcblxuICBwcml2YXRlIHNlbGVjdGVkTWF0ZXJpYWw6IE1hdGVyaWFsIHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgZW5kOiBbbnVtYmVyLCBudW1iZXJdXG4gICkge1xuICAgIHN1cGVyKG5hbWUsIHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCA9IG51bGxcbiAgICB0aGlzLnJlbmRlck1hdGVyaWFsTGlzdCgpO1xuICB9XG5cbiAgcHVibGljIHBvcHVsYXRlKCk6IHZvaWQge1xuICB9XG5cbiAgcHVibGljIHRpY2soKTogdm9pZCB7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck1hdGVyaWFsTGlzdCgpOiB2b2lkIHtcbiAgICBjb25zdCBtYXRlcmlhbHM6IE1hcDxzdHJpbmcsIE1hdGVyaWFsPiA9IElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLmdldE1hdGVyaWFscygpO1xuXG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IFwiPHU+TUFURVJJQUxTOjwvdT48YnI+PGJyPlwiO1xuXG4gICAgY29uc3QgbGlzdDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG5cbiAgICBjb25zdCBuZXdNYXRlcmlhbEJ1dHRvbjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbmV3TWF0ZXJpYWxCdXR0b24uaW5uZXJIVE1MID0gXCI8Yj5DcmVhdGUgTmV3IE1hdGVyaWFsPC9iPlwiO1xuICAgIG5ld01hdGVyaWFsQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IG1hdCA9IG5ldyBNYXRlcmlhbChcIlwiKTtcbiAgICAgIGNvbnN0IHRoaXNXaW5kb3c6IE1hdGVyaWFsc1dpbmRvdyA9IDxNYXRlcmlhbHNXaW5kb3c+SU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmdldFdpbmRvd3MoKS5nZXQoXCJtYXRlcmlhbHNcIik7XG4gICAgICB0aGlzV2luZG93LnNldFNlbGVjdGVkTWF0ZXJpYWwobWF0KTtcbiAgICB9O1xuICAgIGxpc3QuYXBwZW5kQ2hpbGQobmV3TWF0ZXJpYWxCdXR0b24pO1xuXG4gICAgZm9yIChjb25zdCBbbmFtZSwgbWF0ZXJpYWxdIG9mIG1hdGVyaWFscykge1xuICAgICAgY29uc3QgZWxlbWVudDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IG5hbWU7XG4gICAgICBlbGVtZW50Lm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZXY6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGhpc1dpbmRvdzogTWF0ZXJpYWxzV2luZG93ID0gPE1hdGVyaWFsc1dpbmRvdz5JTlNUQU5DRS5nZXRXaW5kb3dNYW5hZ2VyKCkuZ2V0V2luZG93cygpLmdldChcIm1hdGVyaWFsc1wiKTtcbiAgICAgICAgdGhpc1dpbmRvdy5zZXRTZWxlY3RlZE1hdGVyaWFsKG1hdGVyaWFsKTtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobGlzdCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVNsaWRlcihpZDogc3RyaW5nLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGluaXRpYWxWYWx1ZTogbnVtYmVyKTogSFRNTElucHV0RWxlbWVudCB7XG4gICAgY29uc3QgcmVzOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHJlcy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwicmFuZ2VcIik7XG4gICAgcmVzLnNldEF0dHJpYnV0ZShcIm1pblwiLCBtaW4udG9TdHJpbmcoKSk7XG4gICAgcmVzLnNldEF0dHJpYnV0ZShcIm1heFwiLCBtYXgudG9TdHJpbmcoKSk7XG4gICAgcmVzLnNldEF0dHJpYnV0ZShcInN0ZXBcIiwgXCIwLjAxXCIpO1xuICAgIHJlcy5zdHlsZS53aWR0aCA9IFwiMTJlbVwiO1xuICAgIHJlcy5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBpbml0aWFsVmFsdWUudG9TdHJpbmcoKSk7XG4gICAgcmVzLnNldEF0dHJpYnV0ZShcImlkXCIsIGlkKTtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYXRlcmlhbCgpOiB2b2lkIHtcblxuICAgIGNvbnN0IG5hbWU6IHN0cmluZyA9IHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEuZ2V0TmFtZSgpO1xuICAgIGNvbnN0IGNvbG9yOiBWZWM0ID0gdGhpcy5zZWxlY3RlZE1hdGVyaWFsIS5nZXRDb2xvcigpO1xuICAgIGNvbnN0IGVtaXNzaXZlOiBWZWM0ID0gdGhpcy5zZWxlY3RlZE1hdGVyaWFsIS5nZXRFbWlzc2l2ZSgpO1xuICAgIGNvbnN0IGFtYmllbnRJbnRlbnNpdHk6IG51bWJlciA9IHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEuZ2V0QW1iaWVudEludGVuc2l0eSgpO1xuICAgIGNvbnN0IGRpZmZ1c2VJbnRlbnNpdHk6IG51bWJlciA9IHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEuZ2V0UHNldWRvRGlmZnVzZUludGVuc2l0eSgpO1xuICAgIGNvbnN0IHNwZWN1bGFyaXR5OiBudW1iZXIgPSB0aGlzLnNlbGVjdGVkTWF0ZXJpYWwhLmdldFNwZWN1bGFyaXR5KCk7XG4gICAgY29uc3Qgc3BlY3VsYXJJbnRlbnNpdHk6IG51bWJlciA9IHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEuZ2V0U3BlY3VsYXJJbnRlbnNpdHkoKTtcblxuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBcIjxiPjx1Pk1hdGVyaWFsczo8L3U+PC9iPjxicj5cIjtcblxuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgKz0gXCI8YnI+PGI+Q29sb3I6PGI+XCI7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj5SOlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNsaWRlcihcImNvbG9yUmVkU2xpZGVyXCIsIDAsIDEsIGNvbG9yWzBdKSk7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj5HOlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNsaWRlcihcImNvbG9yR3JlZW5TbGlkZXJcIiwgMCwgMSwgY29sb3JbMV0pKTtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MICs9IFwiPGJyPkI6XCI7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU2xpZGVyKFwiY29sb3JCbHVlU2xpZGVyXCIsIDAsIDEsIGNvbG9yWzJdKSk7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj5BOlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNsaWRlcihcImNvbG9yQWxwaGFTbGlkZXJcIiwgMCwgMSwgY29sb3JbM10pKTtcblxuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgKz0gXCI8YnI+PGI+RW1pc3NpdmU6PGI+XCI7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj5SOlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNsaWRlcihcImVtaXNzaXZlUmVkU2xpZGVyXCIsIDAsIDEsIGVtaXNzaXZlWzBdKSk7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj5HOlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNsaWRlcihcImVtaXNzaXZlR3JlZW5TbGlkZXJcIiwgMCwgMSwgZW1pc3NpdmVbMV0pKTtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MICs9IFwiPGJyPkI6XCI7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU2xpZGVyKFwiZW1pc3NpdmVCbHVlU2xpZGVyXCIsIDAsIDEsIGVtaXNzaXZlWzJdKSk7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj5BOlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNsaWRlcihcImVtaXNzaXZlQWxwaGFTbGlkZXJcIiwgMCwgMSwgZW1pc3NpdmVbM10pKTtcblxuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgKz0gXCI8YnI+PGI+QW1iaWVudCBJbnRlbnNpdHk6PGI+XCI7XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlU2xpZGVyKFwiYW1iaWVudEludGVuc2l0eVwiLCAwLCAxLCBhbWJpZW50SW50ZW5zaXR5KSk7XG5cbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MICs9IFwiPGJyPjxiPkRpZmZ1c2UgSW50ZW5zaXR5OjxiPlwiO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVNsaWRlcihcImRpZmZ1c2VJbnRlbnNpdHlcIiwgMCwgMSwgZGlmZnVzZUludGVuc2l0eSkpO1xuXG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj48Yj5TcGVjdWxhcml0eTo8Yj5cIjtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVTbGlkZXIoXCJzcGVjdWxhcml0eVwiLCAwLCA3LCBNYXRoLmxvZzIoc3BlY3VsYXJpdHkpKSk7XG5cbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MICs9IFwiPGJyPjxiPlNwZWN1bGFyIEludGVuc2l0eTo8Yj5cIjtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVTbGlkZXIoXCJzcGVjdWxhckludGVuc2l0eVwiLCAwLCAxLCBzcGVjdWxhckludGVuc2l0eSkpO1xuXG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCArPSBcIjxicj48Yj5OYW1lOiA8Yj5cIjtcbiAgICBjb25zdCBuYW1lRmllbGQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgbmFtZUZpZWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIG5hbWUpO1xuICAgIG5hbWVGaWVsZC5zdHlsZS53aWR0aCA9IFwiOWVtXCI7XG4gICAgbmFtZUZpZWxkLnNldEF0dHJpYnV0ZShcImlkXCIsIFwibmFtZSBmaWVsZFwiKTtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobmFtZUZpZWxkKTtcblxuICAgIGNvbnN0IG5hbWVTdWJtaXRCdXR0b246IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBuYW1lU3VibWl0QnV0dG9uLmlubmVySFRNTCA9IFwiPGI+U2F2ZSBOYW1lPC9iPlwiO1xuICAgIG5hbWVTdWJtaXRCdXR0b24uc3R5bGUud2lkdGggPSBcIjEzZW1cIjtcbiAgICBuYW1lU3VibWl0QnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbihldjogTW91c2VFdmVudCkge1xuICAgICAgY29uc3QgdGhpc1dpbmRvdzogTWF0ZXJpYWxzV2luZG93ID0gPE1hdGVyaWFsc1dpbmRvdz5JTlNUQU5DRS5nZXRXaW5kb3dNYW5hZ2VyKCkuZ2V0V2luZG93cygpLmdldChcIm1hdGVyaWFsc1wiKTtcbiAgICAgIHRoaXNXaW5kb3cudXBkYXRlZE5hbWUoKTtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH07XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKG5hbWVTdWJtaXRCdXR0b24pO1xuXG5cbiAgICBjb25zdCBiYWNrQnV0dG9uOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYmFja0J1dHRvbi5pbm5lckhUTUwgPSBcIjxiPkJhY2s8L2I+XCI7XG4gICAgYmFja0J1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXY6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGNvbnN0IHRoaXNXaW5kb3c6IE1hdGVyaWFsc1dpbmRvdyA9IDxNYXRlcmlhbHNXaW5kb3c+SU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmdldFdpbmRvd3MoKS5nZXQoXCJtYXRlcmlhbHNcIik7XG4gICAgICB0aGlzV2luZG93LnNldFNlbGVjdGVkTWF0ZXJpYWwobnVsbCk7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChiYWNrQnV0dG9uKTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGRlbGV0ZUJ1dHRvbi5pbm5lckhUTUwgPSBcIjxiPkRlbGV0ZTwvYj5cIlxuICAgIGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZXY6IE1vdXNlRXZlbnQpIHtcbiAgICAgIGNvbnN0IHRoaXNXaW5kb3c6IE1hdGVyaWFsc1dpbmRvdyA9IDxNYXRlcmlhbHNXaW5kb3c+SU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmdldFdpbmRvd3MoKS5nZXQoXCJtYXRlcmlhbHNcIik7XG4gICAgICBjb25zdCBtYXQ6IE1hdGVyaWFsID0gdGhpc1dpbmRvdy5nZXRTZWxlY3RlZE1hdGVyaWFsKCkhO1xuICAgICAgSU5TVEFOQ0UuZ2V0TWF0ZXJpYWxNYW5hZ2VyKCkucmVtb3ZlTWF0ZXJpYWwobWF0LmdldE5hbWUoKSk7XG4gICAgICB0aGlzV2luZG93LnNldFNlbGVjdGVkTWF0ZXJpYWwobnVsbCk7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuXG4gICAgdGhpcy5lbGVtZW50Lm9uaW5wdXQgPSBmdW5jdGlvbihldjogRXZlbnQpIHtcbiAgICAgIGNvbnN0IHRoaXNXaW5kb3c6IE1hdGVyaWFsc1dpbmRvdyA9IDxNYXRlcmlhbHNXaW5kb3c+SU5TVEFOQ0UuZ2V0V2luZG93TWFuYWdlcigpLmdldFdpbmRvd3MoKS5nZXQoXCJtYXRlcmlhbHNcIik7XG4gICAgICB0aGlzV2luZG93LnVwZGF0ZWRNYXRlcmlhbCgpO1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZWROYW1lKCk6IHZvaWQge1xuICAgIGNvbnN0IG5hbWU6IHN0cmluZyA9ICg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hbWUgZmllbGRcIikpLnZhbHVlXG4gICAgaWYgKG5hbWUgPT0gXCJcIikge1xuICAgICAgYWxlcnQoXCJJbnZhbGlkIE5hbWVcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIElOU1RBTkNFLmdldE1hdGVyaWFsTWFuYWdlcigpLnJlbW92ZU1hdGVyaWFsKHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEuZ2V0TmFtZSgpKTtcbiAgICB0aGlzLnNlbGVjdGVkTWF0ZXJpYWwhLnNldE5hbWUobmFtZSk7XG4gICAgSU5TVEFOQ0UuZ2V0TWF0ZXJpYWxNYW5hZ2VyKCkuYWRkTWF0ZXJpYWwodGhpcy5zZWxlY3RlZE1hdGVyaWFsIS5nZXROYW1lKCksIHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZWRNYXRlcmlhbCgpIHtcbiAgICBjb25zdCBjb2xvclI6IG51bWJlciA9IHBhcnNlRmxvYXQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3JSZWRTbGlkZXJcIikpLnZhbHVlKTtcbiAgICBjb25zdCBjb2xvckc6IG51bWJlciA9IHBhcnNlRmxvYXQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3JHcmVlblNsaWRlclwiKSkudmFsdWUpO1xuICAgIGNvbnN0IGNvbG9yQjogbnVtYmVyID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb2xvckJsdWVTbGlkZXJcIikpLnZhbHVlKTtcbiAgICBjb25zdCBjb2xvckE6IG51bWJlciA9IHBhcnNlRmxvYXQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29sb3JBbHBoYVNsaWRlclwiKSkudmFsdWUpO1xuICAgIHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEudXBkYXRlQ29sb3IodmVjNC5jcmVhdGUoY29sb3JSLCBjb2xvckcsIGNvbG9yQiwgY29sb3JBKSk7XG5cbiAgICBjb25zdCBlbWlzc2l2ZVI6IG51bWJlciA9IHBhcnNlRmxvYXQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1pc3NpdmVSZWRTbGlkZXJcIikpLnZhbHVlKTtcbiAgICBjb25zdCBlbWlzc2l2ZUc6IG51bWJlciA9IHBhcnNlRmxvYXQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1pc3NpdmVHcmVlblNsaWRlclwiKSkudmFsdWUpO1xuICAgIGNvbnN0IGVtaXNzaXZlQjogbnVtYmVyID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlbWlzc2l2ZUJsdWVTbGlkZXJcIikpLnZhbHVlKTtcbiAgICBjb25zdCBlbWlzc2l2ZUE6IG51bWJlciA9IHBhcnNlRmxvYXQoKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1pc3NpdmVBbHBoYVNsaWRlclwiKSkudmFsdWUpO1xuICAgIHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEudXBkYXRlRW1pc3NpdmUodmVjNC5jcmVhdGUoZW1pc3NpdmVSLCBlbWlzc2l2ZUcsIGVtaXNzaXZlQiwgZW1pc3NpdmVBKSk7XG5cbiAgICBjb25zdCBhbWJpZW50SW50ZW5zaXR5OiBudW1iZXIgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFtYmllbnRJbnRlbnNpdHlcIikpLnZhbHVlKTtcbiAgICB0aGlzLnNlbGVjdGVkTWF0ZXJpYWwhLnVwZGF0ZUFtYmllbnRJbnRlbnNpdHkoYW1iaWVudEludGVuc2l0eSk7XG5cbiAgICBjb25zdCBkaWZmdXNlSW50ZW5zaXR5OiBudW1iZXIgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpZmZ1c2VJbnRlbnNpdHlcIikpLnZhbHVlKTtcbiAgICB0aGlzLnNlbGVjdGVkTWF0ZXJpYWwhLnVwZGF0ZVBzZXVkb0RpZmZ1c2VJbnRlbnNpdHkoZGlmZnVzZUludGVuc2l0eSk7XG5cbiAgICBjb25zdCBzcGVjdWxhcml0eTogbnVtYmVyID0gcGFyc2VGbG9hdCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGVjdWxhcml0eVwiKSkudmFsdWUpO1xuICAgIHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCEudXBkYXRlU3BlY3VsYXJpdHkoTWF0aC5wb3coMiwgc3BlY3VsYXJpdHkpKTtcblxuICAgIGNvbnN0IHNwZWN1bGFySW50ZW5zaXR5OiBudW1iZXIgPSBwYXJzZUZsb2F0KCg8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwZWN1bGFySW50ZW5zaXR5XCIpKS52YWx1ZSk7XG4gICAgdGhpcy5zZWxlY3RlZE1hdGVyaWFsIS51cGRhdGVTcGVjdWxhckludGVuc2l0eShzcGVjdWxhckludGVuc2l0eSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2VsZWN0ZWRNYXRlcmlhbCgpOiBNYXRlcmlhbCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkTWF0ZXJpYWw7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VsZWN0ZWRNYXRlcmlhbChtYXRlcmlhbDogTWF0ZXJpYWwgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZE1hdGVyaWFsID0gbWF0ZXJpYWw7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRNYXRlcmlhbCkge1xuICAgICAgdGhpcy5yZW5kZXJNYXRlcmlhbCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlck1hdGVyaWFsTGlzdCgpO1xuICAgIH1cbiAgfVxuXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/window/windows/materialsWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/sceneWindow.ts":
/*!*******************************************!*\
  !*** ./src/window/windows/sceneWindow.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SceneWindow: () => (/* binding */ SceneWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\nclass SceneWindow extends _window__WEBPACK_IMPORTED_MODULE_1__.CADWindow {\n    populate() {\n        this.element.innerHTML = \"<u>SCENE:</u><br>\";\n        const list = document.createElement(\"ul\");\n        for (let geo of _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getScene().getRootGeometry()) {\n            const item = document.createElement(\"li\");\n            item.innerHTML = geo.getTypeName() +\n                \" id:\" + geo.getID().toString() +\n                \" selected:\" + geo.isSelected().toString();\n            list.appendChild(item);\n        }\n        this.element.appendChild(list);\n    }\n    tick() {\n        this.populate();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3Mvc2NlbmVXaW5kb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ0M7QUFFL0IsTUFBTSxXQUFZLFNBQVEsOENBQVM7SUFFakMsUUFBUTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLG1CQUFtQixDQUFDO1FBQzdDLE1BQU0sSUFBSSxHQUFnQixRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZELEtBQUssSUFBSSxHQUFHLElBQUksMENBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxlQUFlLEVBQUUsRUFBRTtZQUNyRCxNQUFNLElBQUksR0FBZ0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2RCxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxXQUFXLEVBQUU7Z0JBQ2hDLE1BQU0sR0FBRyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMsUUFBUSxFQUFFO2dCQUMvQixZQUFZLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQzdDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDeEI7UUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRU0sSUFBSTtRQUNULElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy93aW5kb3cvd2luZG93cy9zY2VuZVdpbmRvdy50cz82OTdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElOU1RBTkNFIH0gZnJvbSBcIi4uLy4uL2NhZFwiO1xuaW1wb3J0IHsgQ0FEV2luZG93IH0gZnJvbSBcIi4uL3dpbmRvd1wiO1xuXG5leHBvcnQgY2xhc3MgU2NlbmVXaW5kb3cgZXh0ZW5kcyBDQURXaW5kb3cge1xuXG4gIHB1YmxpYyBwb3B1bGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gXCI8dT5TQ0VORTo8L3U+PGJyPlwiO1xuICAgIGNvbnN0IGxpc3Q6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgIGZvciAobGV0IGdlbyBvZiBJTlNUQU5DRS5nZXRTY2VuZSgpLmdldFJvb3RHZW9tZXRyeSgpKSB7XG4gICAgICBjb25zdCBpdGVtOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgIGl0ZW0uaW5uZXJIVE1MID0gZ2VvLmdldFR5cGVOYW1lKCkgK1xuICAgICAgICBcIiBpZDpcIiArIGdlby5nZXRJRCgpLnRvU3RyaW5nKCkgK1xuICAgICAgICBcIiBzZWxlY3RlZDpcIiArIGdlby5pc1NlbGVjdGVkKCkudG9TdHJpbmcoKTtcbiAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgfVxuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChsaXN0KTtcbiAgfVxuXG4gIHB1YmxpYyB0aWNrKCk6IHZvaWQge1xuICAgIHRoaXMucG9wdWxhdGUoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windows/sceneWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/snapsWindow.ts":
/*!*******************************************!*\
  !*** ./src/window/windows/snapsWindow.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SnapsWindow: () => (/* binding */ SnapsWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\nclass SnapsWindow extends _window__WEBPACK_IMPORTED_MODULE_1__.CADWindow {\n    populate() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getSettingsManager().getSnapSettingsManager().getHTML();\n    }\n    tick() {\n        this.populate();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3Mvc25hcHNXaW5kb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ0M7QUFFL0IsTUFBTSxXQUFZLFNBQVEsOENBQVM7SUFHakMsUUFBUTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLDBDQUFRLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzVGLENBQUM7SUFFTSxJQUFJO1FBQ1QsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ2xCLENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL3NuYXBzV2luZG93LnRzPzk5MmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBDQURXaW5kb3cgfSBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmV4cG9ydCBjbGFzcyBTbmFwc1dpbmRvdyBleHRlbmRzIENBRFdpbmRvdyB7XG5cblxuICBwdWJsaWMgcG9wdWxhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IElOU1RBTkNFLmdldFNldHRpbmdzTWFuYWdlcigpLmdldFNuYXBTZXR0aW5nc01hbmFnZXIoKS5nZXRIVE1MKCk7XG4gIH1cblxuICBwdWJsaWMgdGljaygpOiB2b2lkIHtcbiAgICB0aGlzLnBvcHVsYXRlKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windows/snapsWindow.ts\n");

/***/ }),

/***/ "./src/window/windows/statsWindow.ts":
/*!*******************************************!*\
  !*** ./src/window/windows/statsWindow.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StatsWindow: () => (/* binding */ StatsWindow)\n/* harmony export */ });\n/* harmony import */ var _cad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cad */ \"./src/cad.ts\");\n/* harmony import */ var _window__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../window */ \"./src/window/window.ts\");\n\n\nclass StatsWindow extends _window__WEBPACK_IMPORTED_MODULE_1__.CADWindow {\n    populate() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getStats().getInnerHTML();\n    }\n    tick() {\n        this.element.innerHTML = _cad__WEBPACK_IMPORTED_MODULE_0__.INSTANCE.getStats().getInnerHTML();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvd2luZG93L3dpbmRvd3Mvc3RhdHNXaW5kb3cudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFDO0FBQ0M7QUFFL0IsTUFBTSxXQUFZLFNBQVEsOENBQVM7SUFFakMsUUFBUTtRQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLDBDQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDOUQsQ0FBQztJQUVNLElBQUk7UUFDVCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRywwQ0FBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQzlELENBQUM7Q0FFRiIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3dpbmRvdy93aW5kb3dzL3N0YXRzV2luZG93LnRzPzUyNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU5TVEFOQ0UgfSBmcm9tIFwiLi4vLi4vY2FkXCI7XG5pbXBvcnQgeyBDQURXaW5kb3cgfSBmcm9tIFwiLi4vd2luZG93XCI7XG5cbmV4cG9ydCBjbGFzcyBTdGF0c1dpbmRvdyBleHRlbmRzIENBRFdpbmRvdyB7XG5cbiAgcHVibGljIHBvcHVsYXRlKCk6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBJTlNUQU5DRS5nZXRTdGF0cygpLmdldElubmVySFRNTCgpO1xuICB9XG5cbiAgcHVibGljIHRpY2soKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IElOU1RBTkNFLmdldFN0YXRzKCkuZ2V0SW5uZXJIVE1MKCk7XG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/window/windows/statsWindow.ts\n");

/***/ }),

/***/ "./src/render/shaders/idShader.wgsl":
/*!******************************************!*\
  !*** ./src/render/shaders/idShader.wgsl ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"struct VertexOutput {\\n  @builtin(position) position : vec4<f32>,\\n}\\n\\n// local uniforms;\\n@group(0) @binding(0) var<uniform> model : mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> modelInverseTranspose : mat4x4<f32>;\\n@group(0) @binding(2) var<uniform> color : vec4<f32>;\\n@group(0) @binding(3) var<uniform> flags: i32;\\n@group(0) @binding(4) var<uniform> id: i32;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n@group(1) @binding(2) var<uniform> selectionTransform: mat4x4<f32>;\\n@group(1) @binding(3) var<uniform> selectionTransformInverseTraspose: mat4x4<f32>;\\n@group(1) @binding(4) var<uniform> resolution: vec2<f32>;\\n// TODO: why is resolution.x 0? \\n\\nconst CONSTANT_SCREEN_SIZE_BIT: i32 = 1 << 0;\\nconst HOVER_BIT: i32 = 1 << 1;\\nconst SELECTED_BIT: i32 = 1 << 2;\\n\\nconst STRIPE_WIDTH: f32 = 10.0;\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) objectSpacePosition : vec4<f32>,\\n    @location(1) normal : vec4<f32>\\n    ) -> VertexOutput\\n{\\n  var worldSpacePosition = model * objectSpacePosition.xzyw;\\n\\n  if ((flags & CONSTANT_SCREEN_SIZE_BIT) != 0) {\\n    var dist: f32 = distance(worldSpacePosition.xyz, cameraPos.xyz);\\n    worldSpacePosition = model * vec4<f32>(objectSpacePosition.xzy * dist, objectSpacePosition.w);\\n  } \\n\\n  var output: VertexOutput;\\n  output.position = cameraViewProj * worldSpacePosition;\\n  return output;\\n}\\n\\n\\nstruct FragInputs {\\n  @builtin(position) fragCoords: vec4<f32>,\\n}\\n\\n@fragment\\nfn fragmentMain(inputs: FragInputs) -> @location(0) i32 {\\n\\n  return id;\\n\\n}\\n\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvaWRTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsc0JBQXNCLCtDQUErQyxzQkFBc0IseURBQXlELHlFQUF5RSx1REFBdUQsZ0RBQWdELDZDQUE2QyxpRkFBaUYsaUVBQWlFLHFFQUFxRSxvRkFBb0YsMkRBQTJELG1GQUFtRixnQ0FBZ0MsbUNBQW1DLG1DQUFtQyw2SUFBNkksOERBQThELG9EQUFvRCxzRUFBc0Usb0dBQW9HLE1BQU0sK0JBQStCLDBEQUEwRCxrQkFBa0IsR0FBRyx5QkFBeUIsZ0RBQWdELHdFQUF3RSxnQkFBZ0IsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9zaGFkZXJzL2lkU2hhZGVyLndnc2w/MzNiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcInN0cnVjdCBWZXJ0ZXhPdXRwdXQge1xcbiAgQGJ1aWx0aW4ocG9zaXRpb24pIHBvc2l0aW9uIDogdmVjNDxmMzI+LFxcbn1cXG5cXG4vLyBsb2NhbCB1bmlmb3JtcztcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IG1vZGVsIDogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDEpIHZhcjx1bmlmb3JtPiBtb2RlbEludmVyc2VUcmFuc3Bvc2UgOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IGNvbG9yIDogdmVjNDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygzKSB2YXI8dW5pZm9ybT4gZmxhZ3M6IGkzMjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoNCkgdmFyPHVuaWZvcm0+IGlkOiBpMzI7XFxuXFxuLy8gZ2xvYmFsIHVuaWZvcm1zOlxcbkBncm91cCgxKSBAYmluZGluZygwKSB2YXI8dW5pZm9ybT4gY2FtZXJhUG9zOiB2ZWMzPGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDEpIHZhcjx1bmlmb3JtPiBjYW1lcmFWaWV3UHJvajogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiBzZWxlY3Rpb25UcmFuc2Zvcm06IG1hdDR4NDxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZygzKSB2YXI8dW5pZm9ybT4gc2VsZWN0aW9uVHJhbnNmb3JtSW52ZXJzZVRyYXNwb3NlOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoNCkgdmFyPHVuaWZvcm0+IHJlc29sdXRpb246IHZlYzI8ZjMyPjtcXG4vLyBUT0RPOiB3aHkgaXMgcmVzb2x1dGlvbi54IDA/IFxcblxcbmNvbnN0IENPTlNUQU5UX1NDUkVFTl9TSVpFX0JJVDogaTMyID0gMSA8PCAwO1xcbmNvbnN0IEhPVkVSX0JJVDogaTMyID0gMSA8PCAxO1xcbmNvbnN0IFNFTEVDVEVEX0JJVDogaTMyID0gMSA8PCAyO1xcblxcbmNvbnN0IFNUUklQRV9XSURUSDogZjMyID0gMTAuMDtcXG5cXG5AdmVydGV4XFxuZm4gdmVydGV4TWFpbihcXG4gICAgQGxvY2F0aW9uKDApIG9iamVjdFNwYWNlUG9zaXRpb24gOiB2ZWM0PGYzMj4sXFxuICAgIEBsb2NhdGlvbigxKSBub3JtYWwgOiB2ZWM0PGYzMj5cXG4gICAgKSAtPiBWZXJ0ZXhPdXRwdXRcXG57XFxuICB2YXIgd29ybGRTcGFjZVBvc2l0aW9uID0gbW9kZWwgKiBvYmplY3RTcGFjZVBvc2l0aW9uLnh6eXc7XFxuXFxuICBpZiAoKGZsYWdzICYgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUKSAhPSAwKSB7XFxuICAgIHZhciBkaXN0OiBmMzIgPSBkaXN0YW5jZSh3b3JsZFNwYWNlUG9zaXRpb24ueHl6LCBjYW1lcmFQb3MueHl6KTtcXG4gICAgd29ybGRTcGFjZVBvc2l0aW9uID0gbW9kZWwgKiB2ZWM0PGYzMj4ob2JqZWN0U3BhY2VQb3NpdGlvbi54enkgKiBkaXN0LCBvYmplY3RTcGFjZVBvc2l0aW9uLncpO1xcbiAgfSBcXG5cXG4gIHZhciBvdXRwdXQ6IFZlcnRleE91dHB1dDtcXG4gIG91dHB1dC5wb3NpdGlvbiA9IGNhbWVyYVZpZXdQcm9qICogd29ybGRTcGFjZVBvc2l0aW9uO1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXFxuXFxuc3RydWN0IEZyYWdJbnB1dHMge1xcbiAgQGJ1aWx0aW4ocG9zaXRpb24pIGZyYWdDb29yZHM6IHZlYzQ8ZjMyPixcXG59XFxuXFxuQGZyYWdtZW50XFxuZm4gZnJhZ21lbnRNYWluKGlucHV0czogRnJhZ0lucHV0cykgLT4gQGxvY2F0aW9uKDApIGkzMiB7XFxuXFxuICByZXR1cm4gaWQ7XFxuXFxufVxcblxcblxcblxcblxcblwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/shaders/idShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/instancedTriangleShader.wgsl":
/*!*********************************************************!*\
  !*** ./src/render/shaders/instancedTriangleShader.wgsl ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"// local uniforms:\\n@group(0) @binding(0) var<uniform> model: mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> modelInverseTranspose : mat4x4<f32>;\\n@group(0) @binding(2) var<uniform> material: Material;\\n@group(0) @binding(3) var<uniform> flags: i32;\\n@group(0) @binding(4) var<uniform> id: i32;\\n@group(0) @binding(5) var<storage, read> subSelection: array<u32>;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n@group(1) @binding(2) var<uniform> selectionTransform: mat4x4<f32>;\\n@group(1) @binding(3) var<uniform> selectionTransformInverseTraspose: mat4x4<f32>;\\n@group(1) @binding(4) var<uniform> resolution: vec2<f32>;\\n\\n// instance uniforms:\\n@group(2) @binding(0) var<storage, read> transforms: array<mat4x4<f32>>;\\n\\nstruct Material {\\n  color: vec4<f32>,\\n  emissive: vec4<f32>,\\n  ambientIntensity: f32,\\n  pseudoDiffuseIntensity: f32,\\n  specularity: f32,\\n  specularIntensity: f32,\\n}\\n\\nconst CONSTANT_SCREEN_SIZE_BIT: i32 = 1 << 0;\\nconst HOVER_BIT: i32 = 1 << 1;\\nconst SELECTED_BIT: i32 = 1 << 2;\\n\\nconst STRIPE_WIDTH: f32 = 10.0;\\n\\nfn toWorldSpace(p: vec4<f32>, instanceID: u32) -> vec4<f32> {\\n  return model * transforms[instanceID] * p.xzyw;\\n}\\n\\nfn applySelectionTransform(p: vec4<f32>) -> vec4<f32> {\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    return selectionTransform * p;\\n  } else {\\n    return p;\\n  }\\n}\\nfn applySelectionTransformNormal(p: vec4<f32>) -> vec4<f32> {\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    return selectionTransformInverseTraspose * p;\\n  } else {\\n    return p;\\n  }\\n}\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) objectSpacePosition: vec4<f32>,\\n    @location(1) objectSpaceNormal: vec4<f32>,\\n    @builtin(instance_index) instanceID: u32) -> FragInput \\n{\\n\\n  var worldSpacePosition = applySelectionTransform(toWorldSpace(objectSpacePosition, instanceID));\\n  var worldSpaceNormal = applySelectionTransformNormal(modelInverseTranspose * objectSpaceNormal.xzyw);\\n\\n  if ((flags & CONSTANT_SCREEN_SIZE_BIT) != 0) {\\n    var dist: f32 = distance(worldSpacePosition.xyz, cameraPos.xyz);\\n    // TODO: dist should actually be dist in forward direction\\n    var scaledObjectSpacePosition: vec4<f32> = vec4<f32>(objectSpacePosition.xzy * dist, objectSpacePosition.w);\\n    worldSpacePosition = applySelectionTransform(toWorldSpace(scaledObjectSpacePosition, instanceID));\\n  } \\n\\n  var selected: u32 = 0u;\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    selected = 1u;\\n  }\\n  if (selected == 0u) {\\n    selected = (subSelection[instanceID / 32] & (1u << (instanceID % 32u)));\\n  }\\n\\n\\n  var output: FragInput;\\n  output.normal = worldSpaceNormal;\\n  output.fragCoord = cameraViewProj * worldSpacePosition;\\n  output.position = worldSpacePosition;\\n  output.selected = selected;\\n  return output;\\n}\\n\\n\\nfn calculateLighting(position: vec4<f32>, normal: vec3<f32>, material: Material) -> vec4<f32> {\\n  var toCamera: vec3<f32> = normalize(cameraPos.xyz - position.xyz);\\n\\n  var flippedNormal: vec3<f32> = normal;\\n  if (dot(toCamera, normal) < 0) {\\n    flippedNormal *= -1;\\n  } \\n\\n  let normalizedLightIntensity: f32 = dot(flippedNormal, vec3<f32>(0,1,0)) * 0.5 + 0.5;\\n  let reflectedLight: vec3<f32> = reflect(vec3<f32>(0,1,0), normal);\\n  let pseudoDiffuse: vec4<f32> = material.color * normalizedLightIntensity * material.pseudoDiffuseIntensity;\\n  let ambient: vec4<f32> = material.color * material.ambientIntensity;\\n  let specular: vec4<f32> = material.color * pow(max(dot(reflectedLight, toCamera) * -0.5 + 0.5, 0), material.specularity) * material.specularIntensity;\\n\\n  return pseudoDiffuse + ambient + specular + material.emissive;\\n}\\n\\nstruct FragInput {\\n  @builtin(position) fragCoord: vec4<f32>,\\n  @location(0) @interpolate(linear) normal: vec4<f32>,\\n  @location(1) @interpolate(linear) position: vec4<f32>,\\n  @location(2) @interpolate(flat) selected: u32,\\n}\\n\\nstruct FragOutputs {\\n  @builtin(frag_depth) depth: f32,\\n  @location(0) color: vec4f,\\n}\\n\\n\\n@fragment\\nfn fragmentMain(inputs: FragInput) -> FragOutputs {\\n\\n  var normalizedNormal: vec3<f32> = normalize(inputs.normal.xyz);\\n  var fragColor: vec4<f32> = calculateLighting(inputs.position, normalizedNormal, material);\\n\\n  var scaledFragCoords: vec2<f32> = inputs.fragCoord.xy / STRIPE_WIDTH;\\n\\n  var depth: f32 = inputs.fragCoord.z;\\n\\n  if (inputs.selected > 0u) {\\n      var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n      var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n      if ((evenX && !evenY) || (evenY && !evenX)) {\\n        fragColor = vec4<f32>(1.0, 1.0, 0.0, 1.0);\\n      }\\n      depth *= 0.9999999;\\n  }\\n  \\n  if ((flags & HOVER_BIT) == HOVER_BIT) {\\n      var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n      var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n      if ((evenX && !evenY) || (evenY && !evenX)) {\\n        fragColor = vec4<f32>(0.0, 0.0, 1.0, 1.0);\\n      }\\n      depth *= 0.9999999;\\n  }\\n\\n  var res: FragOutputs;\\n  res.depth = depth;\\n  res.color = fragColor;\\n  return res;\\n\\n}\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvaW5zdGFuY2VkVHJpYW5nbGVTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsMkVBQTJFLHlFQUF5RSx3REFBd0QsZ0RBQWdELDZDQUE2QyxvRUFBb0UsaUZBQWlGLGlFQUFpRSxxRUFBcUUsb0ZBQW9GLDJEQUEyRCxtR0FBbUcscUJBQXFCLDBKQUEwSixpREFBaUQsZ0NBQWdDLG1DQUFtQyxtQ0FBbUMsaUVBQWlFLG1EQUFtRCxHQUFHLDJEQUEyRCxpREFBaUQsb0NBQW9DLE1BQU0sTUFBTSxlQUFlLEtBQUssR0FBRywrREFBK0QsaURBQWlELG1EQUFtRCxNQUFNLE1BQU0sZUFBZSxLQUFLLEdBQUcsNkxBQTZMLHNHQUFzRyx5R0FBeUcsb0RBQW9ELHNFQUFzRSxrTEFBa0wsd0dBQXdHLE1BQU0sNkJBQTZCLGlEQUFpRCxvQkFBb0IsS0FBSyx5QkFBeUIsOEVBQThFLEtBQUssOEJBQThCLHFDQUFxQywyREFBMkQseUNBQXlDLCtCQUErQixrQkFBa0IsR0FBRyxxR0FBcUcsc0VBQXNFLDRDQUE0QyxvQ0FBb0MsMEJBQTBCLE1BQU0sMkZBQTJGLHNFQUFzRSwrR0FBK0csd0VBQXdFLDBKQUEwSixvRUFBb0UsR0FBRyxzQkFBc0IsbU5BQW1OLHdCQUF3QixxRUFBcUUsb0VBQW9FLHFFQUFxRSw4RkFBOEYsMkVBQTJFLDBDQUEwQyxpQ0FBaUMsK0RBQStELCtEQUErRCxxREFBcUQsb0RBQW9ELFNBQVMsMkJBQTJCLEtBQUssK0NBQStDLCtEQUErRCwrREFBK0QscURBQXFELG9EQUFvRCxTQUFTLDJCQUEyQixLQUFLLDJCQUEyQixzQkFBc0IsMEJBQTBCLGVBQWUsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9zaGFkZXJzL2luc3RhbmNlZFRyaWFuZ2xlU2hhZGVyLndnc2w/MWM5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIi8vIGxvY2FsIHVuaWZvcm1zOlxcbkBncm91cCgwKSBAYmluZGluZygwKSB2YXI8dW5pZm9ybT4gbW9kZWw6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gbW9kZWxJbnZlcnNlVHJhbnNwb3NlIDogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiBtYXRlcmlhbDogTWF0ZXJpYWw7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDMpIHZhcjx1bmlmb3JtPiBmbGFnczogaTMyO1xcbkBncm91cCgwKSBAYmluZGluZyg0KSB2YXI8dW5pZm9ybT4gaWQ6IGkzMjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoNSkgdmFyPHN0b3JhZ2UsIHJlYWQ+IHN1YlNlbGVjdGlvbjogYXJyYXk8dTMyPjtcXG5cXG4vLyBnbG9iYWwgdW5pZm9ybXM6XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBjYW1lcmFQb3M6IHZlYzM8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMSkgdmFyPHVuaWZvcm0+IGNhbWVyYVZpZXdQcm9qOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IHNlbGVjdGlvblRyYW5zZm9ybTogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDMpIHZhcjx1bmlmb3JtPiBzZWxlY3Rpb25UcmFuc2Zvcm1JbnZlcnNlVHJhc3Bvc2U6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZyg0KSB2YXI8dW5pZm9ybT4gcmVzb2x1dGlvbjogdmVjMjxmMzI+O1xcblxcbi8vIGluc3RhbmNlIHVuaWZvcm1zOlxcbkBncm91cCgyKSBAYmluZGluZygwKSB2YXI8c3RvcmFnZSwgcmVhZD4gdHJhbnNmb3JtczogYXJyYXk8bWF0NHg0PGYzMj4+O1xcblxcbnN0cnVjdCBNYXRlcmlhbCB7XFxuICBjb2xvcjogdmVjNDxmMzI+LFxcbiAgZW1pc3NpdmU6IHZlYzQ8ZjMyPixcXG4gIGFtYmllbnRJbnRlbnNpdHk6IGYzMixcXG4gIHBzZXVkb0RpZmZ1c2VJbnRlbnNpdHk6IGYzMixcXG4gIHNwZWN1bGFyaXR5OiBmMzIsXFxuICBzcGVjdWxhckludGVuc2l0eTogZjMyLFxcbn1cXG5cXG5jb25zdCBDT05TVEFOVF9TQ1JFRU5fU0laRV9CSVQ6IGkzMiA9IDEgPDwgMDtcXG5jb25zdCBIT1ZFUl9CSVQ6IGkzMiA9IDEgPDwgMTtcXG5jb25zdCBTRUxFQ1RFRF9CSVQ6IGkzMiA9IDEgPDwgMjtcXG5cXG5jb25zdCBTVFJJUEVfV0lEVEg6IGYzMiA9IDEwLjA7XFxuXFxuZm4gdG9Xb3JsZFNwYWNlKHA6IHZlYzQ8ZjMyPiwgaW5zdGFuY2VJRDogdTMyKSAtPiB2ZWM0PGYzMj4ge1xcbiAgcmV0dXJuIG1vZGVsICogdHJhbnNmb3Jtc1tpbnN0YW5jZUlEXSAqIHAueHp5dztcXG59XFxuXFxuZm4gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm0ocDogdmVjNDxmMzI+KSAtPiB2ZWM0PGYzMj4ge1xcbiAgaWYgKChmbGFncyAmIFNFTEVDVEVEX0JJVCkgPT0gU0VMRUNURURfQklUKSB7XFxuICAgIHJldHVybiBzZWxlY3Rpb25UcmFuc2Zvcm0gKiBwO1xcbiAgfSBlbHNlIHtcXG4gICAgcmV0dXJuIHA7XFxuICB9XFxufVxcbmZuIGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtTm9ybWFsKHA6IHZlYzQ8ZjMyPikgLT4gdmVjNDxmMzI+IHtcXG4gIGlmICgoZmxhZ3MgJiBTRUxFQ1RFRF9CSVQpID09IFNFTEVDVEVEX0JJVCkge1xcbiAgICByZXR1cm4gc2VsZWN0aW9uVHJhbnNmb3JtSW52ZXJzZVRyYXNwb3NlICogcDtcXG4gIH0gZWxzZSB7XFxuICAgIHJldHVybiBwO1xcbiAgfVxcbn1cXG5cXG5AdmVydGV4XFxuZm4gdmVydGV4TWFpbihcXG4gICAgQGxvY2F0aW9uKDApIG9iamVjdFNwYWNlUG9zaXRpb246IHZlYzQ8ZjMyPixcXG4gICAgQGxvY2F0aW9uKDEpIG9iamVjdFNwYWNlTm9ybWFsOiB2ZWM0PGYzMj4sXFxuICAgIEBidWlsdGluKGluc3RhbmNlX2luZGV4KSBpbnN0YW5jZUlEOiB1MzIpIC0+IEZyYWdJbnB1dCBcXG57XFxuXFxuICB2YXIgd29ybGRTcGFjZVBvc2l0aW9uID0gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm0odG9Xb3JsZFNwYWNlKG9iamVjdFNwYWNlUG9zaXRpb24sIGluc3RhbmNlSUQpKTtcXG4gIHZhciB3b3JsZFNwYWNlTm9ybWFsID0gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm1Ob3JtYWwobW9kZWxJbnZlcnNlVHJhbnNwb3NlICogb2JqZWN0U3BhY2VOb3JtYWwueHp5dyk7XFxuXFxuICBpZiAoKGZsYWdzICYgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUKSAhPSAwKSB7XFxuICAgIHZhciBkaXN0OiBmMzIgPSBkaXN0YW5jZSh3b3JsZFNwYWNlUG9zaXRpb24ueHl6LCBjYW1lcmFQb3MueHl6KTtcXG4gICAgLy8gVE9ETzogZGlzdCBzaG91bGQgYWN0dWFsbHkgYmUgZGlzdCBpbiBmb3J3YXJkIGRpcmVjdGlvblxcbiAgICB2YXIgc2NhbGVkT2JqZWN0U3BhY2VQb3NpdGlvbjogdmVjNDxmMzI+ID0gdmVjNDxmMzI+KG9iamVjdFNwYWNlUG9zaXRpb24ueHp5ICogZGlzdCwgb2JqZWN0U3BhY2VQb3NpdGlvbi53KTtcXG4gICAgd29ybGRTcGFjZVBvc2l0aW9uID0gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm0odG9Xb3JsZFNwYWNlKHNjYWxlZE9iamVjdFNwYWNlUG9zaXRpb24sIGluc3RhbmNlSUQpKTtcXG4gIH0gXFxuXFxuICB2YXIgc2VsZWN0ZWQ6IHUzMiA9IDB1O1xcbiAgaWYgKChmbGFncyAmIFNFTEVDVEVEX0JJVCkgPT0gU0VMRUNURURfQklUKSB7XFxuICAgIHNlbGVjdGVkID0gMXU7XFxuICB9XFxuICBpZiAoc2VsZWN0ZWQgPT0gMHUpIHtcXG4gICAgc2VsZWN0ZWQgPSAoc3ViU2VsZWN0aW9uW2luc3RhbmNlSUQgLyAzMl0gJiAoMXUgPDwgKGluc3RhbmNlSUQgJSAzMnUpKSk7XFxuICB9XFxuXFxuXFxuICB2YXIgb3V0cHV0OiBGcmFnSW5wdXQ7XFxuICBvdXRwdXQubm9ybWFsID0gd29ybGRTcGFjZU5vcm1hbDtcXG4gIG91dHB1dC5mcmFnQ29vcmQgPSBjYW1lcmFWaWV3UHJvaiAqIHdvcmxkU3BhY2VQb3NpdGlvbjtcXG4gIG91dHB1dC5wb3NpdGlvbiA9IHdvcmxkU3BhY2VQb3NpdGlvbjtcXG4gIG91dHB1dC5zZWxlY3RlZCA9IHNlbGVjdGVkO1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXFxuXFxuZm4gY2FsY3VsYXRlTGlnaHRpbmcocG9zaXRpb246IHZlYzQ8ZjMyPiwgbm9ybWFsOiB2ZWMzPGYzMj4sIG1hdGVyaWFsOiBNYXRlcmlhbCkgLT4gdmVjNDxmMzI+IHtcXG4gIHZhciB0b0NhbWVyYTogdmVjMzxmMzI+ID0gbm9ybWFsaXplKGNhbWVyYVBvcy54eXogLSBwb3NpdGlvbi54eXopO1xcblxcbiAgdmFyIGZsaXBwZWROb3JtYWw6IHZlYzM8ZjMyPiA9IG5vcm1hbDtcXG4gIGlmIChkb3QodG9DYW1lcmEsIG5vcm1hbCkgPCAwKSB7XFxuICAgIGZsaXBwZWROb3JtYWwgKj0gLTE7XFxuICB9IFxcblxcbiAgbGV0IG5vcm1hbGl6ZWRMaWdodEludGVuc2l0eTogZjMyID0gZG90KGZsaXBwZWROb3JtYWwsIHZlYzM8ZjMyPigwLDEsMCkpICogMC41ICsgMC41O1xcbiAgbGV0IHJlZmxlY3RlZExpZ2h0OiB2ZWMzPGYzMj4gPSByZWZsZWN0KHZlYzM8ZjMyPigwLDEsMCksIG5vcm1hbCk7XFxuICBsZXQgcHNldWRvRGlmZnVzZTogdmVjNDxmMzI+ID0gbWF0ZXJpYWwuY29sb3IgKiBub3JtYWxpemVkTGlnaHRJbnRlbnNpdHkgKiBtYXRlcmlhbC5wc2V1ZG9EaWZmdXNlSW50ZW5zaXR5O1xcbiAgbGV0IGFtYmllbnQ6IHZlYzQ8ZjMyPiA9IG1hdGVyaWFsLmNvbG9yICogbWF0ZXJpYWwuYW1iaWVudEludGVuc2l0eTtcXG4gIGxldCBzcGVjdWxhcjogdmVjNDxmMzI+ID0gbWF0ZXJpYWwuY29sb3IgKiBwb3cobWF4KGRvdChyZWZsZWN0ZWRMaWdodCwgdG9DYW1lcmEpICogLTAuNSArIDAuNSwgMCksIG1hdGVyaWFsLnNwZWN1bGFyaXR5KSAqIG1hdGVyaWFsLnNwZWN1bGFySW50ZW5zaXR5O1xcblxcbiAgcmV0dXJuIHBzZXVkb0RpZmZ1c2UgKyBhbWJpZW50ICsgc3BlY3VsYXIgKyBtYXRlcmlhbC5lbWlzc2l2ZTtcXG59XFxuXFxuc3RydWN0IEZyYWdJbnB1dCB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgZnJhZ0Nvb3JkOiB2ZWM0PGYzMj4sXFxuICBAbG9jYXRpb24oMCkgQGludGVycG9sYXRlKGxpbmVhcikgbm9ybWFsOiB2ZWM0PGYzMj4sXFxuICBAbG9jYXRpb24oMSkgQGludGVycG9sYXRlKGxpbmVhcikgcG9zaXRpb246IHZlYzQ8ZjMyPixcXG4gIEBsb2NhdGlvbigyKSBAaW50ZXJwb2xhdGUoZmxhdCkgc2VsZWN0ZWQ6IHUzMixcXG59XFxuXFxuc3RydWN0IEZyYWdPdXRwdXRzIHtcXG4gIEBidWlsdGluKGZyYWdfZGVwdGgpIGRlcHRoOiBmMzIsXFxuICBAbG9jYXRpb24oMCkgY29sb3I6IHZlYzRmLFxcbn1cXG5cXG5cXG5AZnJhZ21lbnRcXG5mbiBmcmFnbWVudE1haW4oaW5wdXRzOiBGcmFnSW5wdXQpIC0+IEZyYWdPdXRwdXRzIHtcXG5cXG4gIHZhciBub3JtYWxpemVkTm9ybWFsOiB2ZWMzPGYzMj4gPSBub3JtYWxpemUoaW5wdXRzLm5vcm1hbC54eXopO1xcbiAgdmFyIGZyYWdDb2xvcjogdmVjNDxmMzI+ID0gY2FsY3VsYXRlTGlnaHRpbmcoaW5wdXRzLnBvc2l0aW9uLCBub3JtYWxpemVkTm9ybWFsLCBtYXRlcmlhbCk7XFxuXFxuICB2YXIgc2NhbGVkRnJhZ0Nvb3JkczogdmVjMjxmMzI+ID0gaW5wdXRzLmZyYWdDb29yZC54eSAvIFNUUklQRV9XSURUSDtcXG5cXG4gIHZhciBkZXB0aDogZjMyID0gaW5wdXRzLmZyYWdDb29yZC56O1xcblxcbiAgaWYgKGlucHV0cy5zZWxlY3RlZCA+IDB1KSB7XFxuICAgICAgdmFyIGV2ZW5YOiBib29sID0gbW9kZihzY2FsZWRGcmFnQ29vcmRzLngpLmZyYWN0IDwgMC41O1xcbiAgICAgIHZhciBldmVuWTogYm9vbCA9IG1vZGYoc2NhbGVkRnJhZ0Nvb3Jkcy55KS5mcmFjdCA8IDAuNTtcXG4gICAgICBpZiAoKGV2ZW5YICYmICFldmVuWSkgfHwgKGV2ZW5ZICYmICFldmVuWCkpIHtcXG4gICAgICAgIGZyYWdDb2xvciA9IHZlYzQ8ZjMyPigxLjAsIDEuMCwgMC4wLCAxLjApO1xcbiAgICAgIH1cXG4gICAgICBkZXB0aCAqPSAwLjk5OTk5OTk7XFxuICB9XFxuICBcXG4gIGlmICgoZmxhZ3MgJiBIT1ZFUl9CSVQpID09IEhPVkVSX0JJVCkge1xcbiAgICAgIHZhciBldmVuWDogYm9vbCA9IG1vZGYoc2NhbGVkRnJhZ0Nvb3Jkcy54KS5mcmFjdCA8IDAuNTtcXG4gICAgICB2YXIgZXZlblk6IGJvb2wgPSBtb2RmKHNjYWxlZEZyYWdDb29yZHMueSkuZnJhY3QgPCAwLjU7XFxuICAgICAgaWYgKChldmVuWCAmJiAhZXZlblkpIHx8IChldmVuWSAmJiAhZXZlblgpKSB7XFxuICAgICAgICBmcmFnQ29sb3IgPSB2ZWM0PGYzMj4oMC4wLCAwLjAsIDEuMCwgMS4wKTtcXG4gICAgICB9XFxuICAgICAgZGVwdGggKj0gMC45OTk5OTk5O1xcbiAgfVxcblxcbiAgdmFyIHJlczogRnJhZ091dHB1dHM7XFxuICByZXMuZGVwdGggPSBkZXB0aDtcXG4gIHJlcy5jb2xvciA9IGZyYWdDb2xvcjtcXG4gIHJldHVybiByZXM7XFxuXFxufVxcblxcblxcblxcblwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/shaders/instancedTriangleShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/lineShader.wgsl":
/*!********************************************!*\
  !*** ./src/render/shaders/lineShader.wgsl ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"\\nstruct VertexOutput {\\n  @builtin(position) position : vec4<f32>,\\n  @location(0) @interpolate(linear) selectedness: f32,\\n}\\n\\n// local uniforms;\\n@group(0) @binding(0) var<uniform> model : mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> modelInverseTranspose : mat4x4<f32>;\\n@group(0) @binding(2) var<uniform> color : vec4<f32>;\\n@group(0) @binding(3) var<uniform> flags: i32;\\n@group(0) @binding(4) var<uniform> id: i32;\\n@group(0) @binding(5) var<storage, read> subSelection: array<u32>;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n@group(1) @binding(2) var<uniform> selectionTransform: mat4x4<f32>;\\n@group(1) @binding(3) var<uniform> selectionTransformInverseTraspose: mat4x4<f32>;\\n@group(1) @binding(4) var<uniform> resolution: vec2<f32>;\\n\\nconst CONSTANT_SCREEN_SIZE_BIT: i32 = 1 << 0;\\nconst HOVER_BIT: i32 = 1 << 1;\\nconst SELECTED_BIT: i32 = 1 << 2;\\n\\nconst STRIPE_WIDTH: f32 = 10.0;\\n\\nconst SELECTED_COLOR: vec4<f32> = vec4<f32>(1,1,0,1);\\n\\nfn toWorldSpace(p: vec4<f32>) -> vec4<f32> {\\n  return model * p.xzyw;\\n}\\n\\nfn applySelectionTransform(p: vec4<f32>) -> vec4<f32> {\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    return selectionTransform * p;\\n  } else {\\n    return p;\\n  }\\n}\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) objectSpacePosition : vec4<f32>,\\n    @builtin(vertex_index) index: u32,\\n    ) -> VertexOutput\\n{\\n\\n  var worldSpacePosition = applySelectionTransform(toWorldSpace(objectSpacePosition));\\n  if ((flags & CONSTANT_SCREEN_SIZE_BIT) != 0) {\\n    var dist: f32 = distance(worldSpacePosition.xyz, cameraPos.xyz);\\n    // TODO: dist should actually be dist in forward direction\\n    var scaledObjectSpacePosition: vec4<f32> = vec4<f32>(objectSpacePosition.xzy * dist, objectSpacePosition.w);\\n    worldSpacePosition = applySelectionTransform(toWorldSpace(scaledObjectSpacePosition));\\n  } \\n\\n  var selectedness: f32 = 0;\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {selectedness = 1;}\\n  if ((subSelection[index / 32] & (1u << (index % 32))) > 0) {selectedness = 1;}\\n\\n  var output: VertexOutput;\\n  output.position = cameraViewProj * worldSpacePosition;\\n  output.selectedness = selectedness;\\n  return output;\\n}\\n\\nstruct FragOutputs {\\n  @builtin(frag_depth) depth: f32,\\n  @location(0) color: vec4f,\\n}\\n\\n\\n@fragment\\nfn fragmentMain(inputs: VertexOutput) -> FragOutputs {\\n\\n  // set up frag color\\n  var fragColor: vec4<f32> = color;\\n\\n  var depth: f32 = inputs.position.z * 0.9999999;\\n\\n  var scaledFragCoords: vec2<f32> = inputs.position.xy / STRIPE_WIDTH;\\n  if (inputs.selectedness > 0) {\\n    var test: f32 = pow(inputs.selectedness, 2);\\n   fragColor = (1 - test) * fragColor + test * SELECTED_COLOR;\\n    depth *= 0.9999999;\\n  }\\n  if ((flags & HOVER_BIT) == HOVER_BIT) {\\n   fragColor = vec4<f32>(0.0, 0.0, 1.0, 1.0);\\n    depth *= 0.9999999;\\n  }\\n\\n  var output: FragOutputs;\\n  output.color = fragColor;\\n  output.depth = depth;\\n  return output;\\n}\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvbGluZVNoYWRlci53Z3NsIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSx3QkFBd0IsdUdBQXVHLHNCQUFzQix5REFBeUQseUVBQXlFLHVEQUF1RCxnREFBZ0QsNkNBQTZDLG9FQUFvRSxpRkFBaUYsaUVBQWlFLHFFQUFxRSxvRkFBb0YsMkRBQTJELGlEQUFpRCxnQ0FBZ0MsbUNBQW1DLG1DQUFtQyx5REFBeUQsZ0RBQWdELDBCQUEwQixHQUFHLDJEQUEyRCxpREFBaUQsb0NBQW9DLE1BQU0sTUFBTSxlQUFlLEtBQUssR0FBRyxnSkFBZ0osMEZBQTBGLGtEQUFrRCxzRUFBc0Usa0xBQWtMLDRGQUE0RixNQUFNLGdDQUFnQyxpREFBaUQsa0JBQWtCLGdFQUFnRSxrQkFBa0IsK0JBQStCLDBEQUEwRCx1Q0FBdUMsa0JBQWtCLEdBQUcsd0JBQXdCLHFFQUFxRSx1RUFBdUUsK0RBQStELHFEQUFxRCwwRUFBMEUsa0NBQWtDLGtEQUFrRCxnRUFBZ0UseUJBQXlCLEtBQUssMkNBQTJDLCtDQUErQyx5QkFBeUIsS0FBSyw4QkFBOEIsNkJBQTZCLHlCQUF5QixrQkFBa0IsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL25wbS10ZXN0Ly4vc3JjL3JlbmRlci9zaGFkZXJzL2xpbmVTaGFkZXIud2dzbD8yNTRjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuc3RydWN0IFZlcnRleE91dHB1dCB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0PGYzMj4sXFxuICBAbG9jYXRpb24oMCkgQGludGVycG9sYXRlKGxpbmVhcikgc2VsZWN0ZWRuZXNzOiBmMzIsXFxufVxcblxcbi8vIGxvY2FsIHVuaWZvcm1zO1xcbkBncm91cCgwKSBAYmluZGluZygwKSB2YXI8dW5pZm9ybT4gbW9kZWwgOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMSkgdmFyPHVuaWZvcm0+IG1vZGVsSW52ZXJzZVRyYW5zcG9zZSA6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygyKSB2YXI8dW5pZm9ybT4gY29sb3IgOiB2ZWM0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDMpIHZhcjx1bmlmb3JtPiBmbGFnczogaTMyO1xcbkBncm91cCgwKSBAYmluZGluZyg0KSB2YXI8dW5pZm9ybT4gaWQ6IGkzMjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoNSkgdmFyPHN0b3JhZ2UsIHJlYWQ+IHN1YlNlbGVjdGlvbjogYXJyYXk8dTMyPjtcXG5cXG4vLyBnbG9iYWwgdW5pZm9ybXM6XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBjYW1lcmFQb3M6IHZlYzM8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMSkgdmFyPHVuaWZvcm0+IGNhbWVyYVZpZXdQcm9qOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IHNlbGVjdGlvblRyYW5zZm9ybTogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDMpIHZhcjx1bmlmb3JtPiBzZWxlY3Rpb25UcmFuc2Zvcm1JbnZlcnNlVHJhc3Bvc2U6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZyg0KSB2YXI8dW5pZm9ybT4gcmVzb2x1dGlvbjogdmVjMjxmMzI+O1xcblxcbmNvbnN0IENPTlNUQU5UX1NDUkVFTl9TSVpFX0JJVDogaTMyID0gMSA8PCAwO1xcbmNvbnN0IEhPVkVSX0JJVDogaTMyID0gMSA8PCAxO1xcbmNvbnN0IFNFTEVDVEVEX0JJVDogaTMyID0gMSA8PCAyO1xcblxcbmNvbnN0IFNUUklQRV9XSURUSDogZjMyID0gMTAuMDtcXG5cXG5jb25zdCBTRUxFQ1RFRF9DT0xPUjogdmVjNDxmMzI+ID0gdmVjNDxmMzI+KDEsMSwwLDEpO1xcblxcbmZuIHRvV29ybGRTcGFjZShwOiB2ZWM0PGYzMj4pIC0+IHZlYzQ8ZjMyPiB7XFxuICByZXR1cm4gbW9kZWwgKiBwLnh6eXc7XFxufVxcblxcbmZuIGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtKHA6IHZlYzQ8ZjMyPikgLT4gdmVjNDxmMzI+IHtcXG4gIGlmICgoZmxhZ3MgJiBTRUxFQ1RFRF9CSVQpID09IFNFTEVDVEVEX0JJVCkge1xcbiAgICByZXR1cm4gc2VsZWN0aW9uVHJhbnNmb3JtICogcDtcXG4gIH0gZWxzZSB7XFxuICAgIHJldHVybiBwO1xcbiAgfVxcbn1cXG5cXG5AdmVydGV4XFxuZm4gdmVydGV4TWFpbihcXG4gICAgQGxvY2F0aW9uKDApIG9iamVjdFNwYWNlUG9zaXRpb24gOiB2ZWM0PGYzMj4sXFxuICAgIEBidWlsdGluKHZlcnRleF9pbmRleCkgaW5kZXg6IHUzMixcXG4gICAgKSAtPiBWZXJ0ZXhPdXRwdXRcXG57XFxuXFxuICB2YXIgd29ybGRTcGFjZVBvc2l0aW9uID0gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm0odG9Xb3JsZFNwYWNlKG9iamVjdFNwYWNlUG9zaXRpb24pKTtcXG4gIGlmICgoZmxhZ3MgJiBDT05TVEFOVF9TQ1JFRU5fU0laRV9CSVQpICE9IDApIHtcXG4gICAgdmFyIGRpc3Q6IGYzMiA9IGRpc3RhbmNlKHdvcmxkU3BhY2VQb3NpdGlvbi54eXosIGNhbWVyYVBvcy54eXopO1xcbiAgICAvLyBUT0RPOiBkaXN0IHNob3VsZCBhY3R1YWxseSBiZSBkaXN0IGluIGZvcndhcmQgZGlyZWN0aW9uXFxuICAgIHZhciBzY2FsZWRPYmplY3RTcGFjZVBvc2l0aW9uOiB2ZWM0PGYzMj4gPSB2ZWM0PGYzMj4ob2JqZWN0U3BhY2VQb3NpdGlvbi54enkgKiBkaXN0LCBvYmplY3RTcGFjZVBvc2l0aW9uLncpO1xcbiAgICB3b3JsZFNwYWNlUG9zaXRpb24gPSBhcHBseVNlbGVjdGlvblRyYW5zZm9ybSh0b1dvcmxkU3BhY2Uoc2NhbGVkT2JqZWN0U3BhY2VQb3NpdGlvbikpO1xcbiAgfSBcXG5cXG4gIHZhciBzZWxlY3RlZG5lc3M6IGYzMiA9IDA7XFxuICBpZiAoKGZsYWdzICYgU0VMRUNURURfQklUKSA9PSBTRUxFQ1RFRF9CSVQpIHtzZWxlY3RlZG5lc3MgPSAxO31cXG4gIGlmICgoc3ViU2VsZWN0aW9uW2luZGV4IC8gMzJdICYgKDF1IDw8IChpbmRleCAlIDMyKSkpID4gMCkge3NlbGVjdGVkbmVzcyA9IDE7fVxcblxcbiAgdmFyIG91dHB1dDogVmVydGV4T3V0cHV0O1xcbiAgb3V0cHV0LnBvc2l0aW9uID0gY2FtZXJhVmlld1Byb2ogKiB3b3JsZFNwYWNlUG9zaXRpb247XFxuICBvdXRwdXQuc2VsZWN0ZWRuZXNzID0gc2VsZWN0ZWRuZXNzO1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXFxuc3RydWN0IEZyYWdPdXRwdXRzIHtcXG4gIEBidWlsdGluKGZyYWdfZGVwdGgpIGRlcHRoOiBmMzIsXFxuICBAbG9jYXRpb24oMCkgY29sb3I6IHZlYzRmLFxcbn1cXG5cXG5cXG5AZnJhZ21lbnRcXG5mbiBmcmFnbWVudE1haW4oaW5wdXRzOiBWZXJ0ZXhPdXRwdXQpIC0+IEZyYWdPdXRwdXRzIHtcXG5cXG4gIC8vIHNldCB1cCBmcmFnIGNvbG9yXFxuICB2YXIgZnJhZ0NvbG9yOiB2ZWM0PGYzMj4gPSBjb2xvcjtcXG5cXG4gIHZhciBkZXB0aDogZjMyID0gaW5wdXRzLnBvc2l0aW9uLnogKiAwLjk5OTk5OTk7XFxuXFxuICB2YXIgc2NhbGVkRnJhZ0Nvb3JkczogdmVjMjxmMzI+ID0gaW5wdXRzLnBvc2l0aW9uLnh5IC8gU1RSSVBFX1dJRFRIO1xcbiAgaWYgKGlucHV0cy5zZWxlY3RlZG5lc3MgPiAwKSB7XFxuICAgIHZhciB0ZXN0OiBmMzIgPSBwb3coaW5wdXRzLnNlbGVjdGVkbmVzcywgMik7XFxuICAgZnJhZ0NvbG9yID0gKDEgLSB0ZXN0KSAqIGZyYWdDb2xvciArIHRlc3QgKiBTRUxFQ1RFRF9DT0xPUjtcXG4gICAgZGVwdGggKj0gMC45OTk5OTk5O1xcbiAgfVxcbiAgaWYgKChmbGFncyAmIEhPVkVSX0JJVCkgPT0gSE9WRVJfQklUKSB7XFxuICAgZnJhZ0NvbG9yID0gdmVjNDxmMzI+KDAuMCwgMC4wLCAxLjAsIDEuMCk7XFxuICAgIGRlcHRoICo9IDAuOTk5OTk5OTtcXG4gIH1cXG5cXG4gIHZhciBvdXRwdXQ6IEZyYWdPdXRwdXRzO1xcbiAgb3V0cHV0LmNvbG9yID0gZnJhZ0NvbG9yO1xcbiAgb3V0cHV0LmRlcHRoID0gZGVwdGg7XFxuICByZXR1cm4gb3V0cHV0O1xcbn1cXG5cXG5cXG5cXG5cIiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/render/shaders/lineShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/overlayMeshShader.wgsl":
/*!***************************************************!*\
  !*** ./src/render/shaders/overlayMeshShader.wgsl ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"\\nstruct VertexOutput {\\n  @builtin(position) position : vec4<f32>,\\n    @location(0) @interpolate(linear) normal : vec4<f32>\\n}\\n\\n// local uniforms;\\n@group(0) @binding(0) var<uniform> model : mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> modelInverseTranspose : mat4x4<f32>;\\n@group(0) @binding(2) var<uniform> color : vec4<f32>;\\n@group(0) @binding(3) var<uniform> flags: i32;\\n@group(0) @binding(4) var<uniform> id: i32;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n@group(1) @binding(2) var<uniform> selectionTransform: mat4x4<f32>;\\n@group(1) @binding(3) var<uniform> selectionTransformInverseTraspose: mat4x4<f32>;\\n@group(1) @binding(4) var<uniform> resolution: vec2<f32>;\\n// TODO: why is resolution.x 0? \\n\\nconst CONSTANT_SCREEN_SIZE_BIT: i32 = 1 << 0;\\nconst HOVER_BIT: i32 = 1 << 1;\\nconst SELECTED_BIT: i32 = 1 << 2;\\n\\nconst STRIPE_WIDTH: f32 = 10.0;\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) objectSpacePosition : vec4<f32>,\\n    @location(1) objectSpaceNormal : vec4<f32>\\n    ) -> VertexOutput\\n{\\n  var worldSpacePosition = model * objectSpacePosition.xzyw;\\n\\n  if ((flags & CONSTANT_SCREEN_SIZE_BIT) != 0) {\\n    var dist: f32 = distance(worldSpacePosition.xyz, cameraPos.xyz);\\n    // TODO: Magic number should prolly be factored out...\\n    worldSpacePosition = model * vec4<f32>(objectSpacePosition.xzy * dist, objectSpacePosition.w);\\n  } \\n\\n  var output: VertexOutput;\\n  output.normal = objectSpaceNormal.xzyw;\\n  output.position = cameraViewProj * worldSpacePosition;\\n  return output;\\n\\n}\\n\\n\\nstruct FragInputs {\\n  @location(0) @interpolate(linear) normal : vec4f,\\n  @builtin(position) fragCoords: vec4<f32>,\\n}\\n\\n@fragment\\nfn fragmentMain(inputs: FragInputs) -> @location(0) vec4f {\\n\\n  var normalizedNormal: vec3<f32> = normalize(inputs.normal.xyz);\\n  //var fragColor: vec4<f32> = vec4<f32>(normalizedNormal/2.0 + vec3<f32>(0.5, 0.5, 0.5), 1.0);\\n  var fragColor: vec4<f32> = color;\\n\\n  var scaledFragCoords: vec2<f32> = inputs.fragCoords.xy / STRIPE_WIDTH;\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    \\n      var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n      var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n      if ((evenX && !evenY) || (evenY && !evenX)) {\\n        fragColor = vec4<f32>(1.0, 1.0, 0.0, 1.0);\\n      }\\n   \\n  }\\n  if ((flags & HOVER_BIT) == HOVER_BIT) {\\n\\n      var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n      var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n      if ((evenX && !evenY) || (evenY && !evenX)) {\\n        fragColor = vec4<f32>(0.0, 0.0, 1.0, 1.0);\\n      }\\n\\n  }\\n  return fragColor;\\n\\n}\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvb3ZlcmxheU1lc2hTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsd0JBQXdCLHlHQUF5RyxzQkFBc0IseURBQXlELHlFQUF5RSx1REFBdUQsZ0RBQWdELDZDQUE2QyxpRkFBaUYsaUVBQWlFLHFFQUFxRSxvRkFBb0YsMkRBQTJELG1GQUFtRixnQ0FBZ0MsbUNBQW1DLG1DQUFtQyx3SkFBd0osOERBQThELG9EQUFvRCxzRUFBc0UsZ0tBQWdLLE1BQU0sK0JBQStCLDJDQUEyQywwREFBMEQsa0JBQWtCLEtBQUsseUJBQXlCLHFHQUFxRywwRUFBMEUscUVBQXFFLGlHQUFpRyxxQ0FBcUMsNEVBQTRFLGlEQUFpRCxxRUFBcUUsK0RBQStELHFEQUFxRCxvREFBb0QsU0FBUyxVQUFVLDJDQUEyQyxpRUFBaUUsK0RBQStELHFEQUFxRCxvREFBb0QsU0FBUyxPQUFPLHFCQUFxQixLQUFLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbnBtLXRlc3QvLi9zcmMvcmVuZGVyL3NoYWRlcnMvb3ZlcmxheU1lc2hTaGFkZXIud2dzbD8zNzVmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuc3RydWN0IFZlcnRleE91dHB1dCB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb24gOiB2ZWM0PGYzMj4sXFxuICAgIEBsb2NhdGlvbigwKSBAaW50ZXJwb2xhdGUobGluZWFyKSBub3JtYWwgOiB2ZWM0PGYzMj5cXG59XFxuXFxuLy8gbG9jYWwgdW5pZm9ybXM7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBtb2RlbCA6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gbW9kZWxJbnZlcnNlVHJhbnNwb3NlIDogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiBjb2xvciA6IHZlYzQ8ZjMyPjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMykgdmFyPHVuaWZvcm0+IGZsYWdzOiBpMzI7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDQpIHZhcjx1bmlmb3JtPiBpZDogaTMyO1xcblxcbi8vIGdsb2JhbCB1bmlmb3JtczpcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IGNhbWVyYVBvczogdmVjMzxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gY2FtZXJhVmlld1Byb2o6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZygyKSB2YXI8dW5pZm9ybT4gc2VsZWN0aW9uVHJhbnNmb3JtOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMykgdmFyPHVuaWZvcm0+IHNlbGVjdGlvblRyYW5zZm9ybUludmVyc2VUcmFzcG9zZTogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDQpIHZhcjx1bmlmb3JtPiByZXNvbHV0aW9uOiB2ZWMyPGYzMj47XFxuLy8gVE9ETzogd2h5IGlzIHJlc29sdXRpb24ueCAwPyBcXG5cXG5jb25zdCBDT05TVEFOVF9TQ1JFRU5fU0laRV9CSVQ6IGkzMiA9IDEgPDwgMDtcXG5jb25zdCBIT1ZFUl9CSVQ6IGkzMiA9IDEgPDwgMTtcXG5jb25zdCBTRUxFQ1RFRF9CSVQ6IGkzMiA9IDEgPDwgMjtcXG5cXG5jb25zdCBTVFJJUEVfV0lEVEg6IGYzMiA9IDEwLjA7XFxuXFxuQHZlcnRleFxcbmZuIHZlcnRleE1haW4oXFxuICAgIEBsb2NhdGlvbigwKSBvYmplY3RTcGFjZVBvc2l0aW9uIDogdmVjNDxmMzI+LFxcbiAgICBAbG9jYXRpb24oMSkgb2JqZWN0U3BhY2VOb3JtYWwgOiB2ZWM0PGYzMj5cXG4gICAgKSAtPiBWZXJ0ZXhPdXRwdXRcXG57XFxuICB2YXIgd29ybGRTcGFjZVBvc2l0aW9uID0gbW9kZWwgKiBvYmplY3RTcGFjZVBvc2l0aW9uLnh6eXc7XFxuXFxuICBpZiAoKGZsYWdzICYgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUKSAhPSAwKSB7XFxuICAgIHZhciBkaXN0OiBmMzIgPSBkaXN0YW5jZSh3b3JsZFNwYWNlUG9zaXRpb24ueHl6LCBjYW1lcmFQb3MueHl6KTtcXG4gICAgLy8gVE9ETzogTWFnaWMgbnVtYmVyIHNob3VsZCBwcm9sbHkgYmUgZmFjdG9yZWQgb3V0Li4uXFxuICAgIHdvcmxkU3BhY2VQb3NpdGlvbiA9IG1vZGVsICogdmVjNDxmMzI+KG9iamVjdFNwYWNlUG9zaXRpb24ueHp5ICogZGlzdCwgb2JqZWN0U3BhY2VQb3NpdGlvbi53KTtcXG4gIH0gXFxuXFxuICB2YXIgb3V0cHV0OiBWZXJ0ZXhPdXRwdXQ7XFxuICBvdXRwdXQubm9ybWFsID0gb2JqZWN0U3BhY2VOb3JtYWwueHp5dztcXG4gIG91dHB1dC5wb3NpdGlvbiA9IGNhbWVyYVZpZXdQcm9qICogd29ybGRTcGFjZVBvc2l0aW9uO1xcbiAgcmV0dXJuIG91dHB1dDtcXG5cXG59XFxuXFxuXFxuc3RydWN0IEZyYWdJbnB1dHMge1xcbiAgQGxvY2F0aW9uKDApIEBpbnRlcnBvbGF0ZShsaW5lYXIpIG5vcm1hbCA6IHZlYzRmLFxcbiAgQGJ1aWx0aW4ocG9zaXRpb24pIGZyYWdDb29yZHM6IHZlYzQ8ZjMyPixcXG59XFxuXFxuQGZyYWdtZW50XFxuZm4gZnJhZ21lbnRNYWluKGlucHV0czogRnJhZ0lucHV0cykgLT4gQGxvY2F0aW9uKDApIHZlYzRmIHtcXG5cXG4gIHZhciBub3JtYWxpemVkTm9ybWFsOiB2ZWMzPGYzMj4gPSBub3JtYWxpemUoaW5wdXRzLm5vcm1hbC54eXopO1xcbiAgLy92YXIgZnJhZ0NvbG9yOiB2ZWM0PGYzMj4gPSB2ZWM0PGYzMj4obm9ybWFsaXplZE5vcm1hbC8yLjAgKyB2ZWMzPGYzMj4oMC41LCAwLjUsIDAuNSksIDEuMCk7XFxuICB2YXIgZnJhZ0NvbG9yOiB2ZWM0PGYzMj4gPSBjb2xvcjtcXG5cXG4gIHZhciBzY2FsZWRGcmFnQ29vcmRzOiB2ZWMyPGYzMj4gPSBpbnB1dHMuZnJhZ0Nvb3Jkcy54eSAvIFNUUklQRV9XSURUSDtcXG4gIGlmICgoZmxhZ3MgJiBTRUxFQ1RFRF9CSVQpID09IFNFTEVDVEVEX0JJVCkge1xcbiAgICBcXG4gICAgICB2YXIgZXZlblg6IGJvb2wgPSBtb2RmKHNjYWxlZEZyYWdDb29yZHMueCkuZnJhY3QgPCAwLjU7XFxuICAgICAgdmFyIGV2ZW5ZOiBib29sID0gbW9kZihzY2FsZWRGcmFnQ29vcmRzLnkpLmZyYWN0IDwgMC41O1xcbiAgICAgIGlmICgoZXZlblggJiYgIWV2ZW5ZKSB8fCAoZXZlblkgJiYgIWV2ZW5YKSkge1xcbiAgICAgICAgZnJhZ0NvbG9yID0gdmVjNDxmMzI+KDEuMCwgMS4wLCAwLjAsIDEuMCk7XFxuICAgICAgfVxcbiAgIFxcbiAgfVxcbiAgaWYgKChmbGFncyAmIEhPVkVSX0JJVCkgPT0gSE9WRVJfQklUKSB7XFxuXFxuICAgICAgdmFyIGV2ZW5YOiBib29sID0gbW9kZihzY2FsZWRGcmFnQ29vcmRzLngpLmZyYWN0IDwgMC41O1xcbiAgICAgIHZhciBldmVuWTogYm9vbCA9IG1vZGYoc2NhbGVkRnJhZ0Nvb3Jkcy55KS5mcmFjdCA8IDAuNTtcXG4gICAgICBpZiAoKGV2ZW5YICYmICFldmVuWSkgfHwgKGV2ZW5ZICYmICFldmVuWCkpIHtcXG4gICAgICAgIGZyYWdDb2xvciA9IHZlYzQ8ZjMyPigwLjAsIDAuMCwgMS4wLCAxLjApO1xcbiAgICAgIH1cXG5cXG4gIH1cXG4gIHJldHVybiBmcmFnQ29sb3I7XFxuXFxufVxcblxcblxcblxcblwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/render/shaders/overlayMeshShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/pointShader.wgsl":
/*!*********************************************!*\
  !*** ./src/render/shaders/pointShader.wgsl ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"\\nstruct VertexOutput {\\n  @builtin(position) position : vec4<f32>,\\n}\\n\\n// local uniforms;\\n@group(0) @binding(0) var<uniform> model : mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> modelInverseTranspose : mat4x4<f32>;\\n@group(0) @binding(2) var<uniform> color : vec4<f32>;\\n@group(0) @binding(3) var<uniform> flags: i32;\\n@group(0) @binding(4) var<uniform> id: i32;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n@group(1) @binding(2) var<uniform> selectionTransform: mat4x4<f32>;\\n@group(1) @binding(3) var<uniform> selectionTransformInverseTraspose: mat4x4<f32>;\\n@group(1) @binding(4) var<uniform> resolution: vec2<f32>;\\n\\nconst CONSTANT_SCREEN_SIZE_BIT: i32 = 1 << 0;\\nconst HOVER_BIT: i32 = 1 << 1;\\nconst SELECTED_BIT: i32 = 1 << 2;\\n\\nconst STRIPE_WIDTH: f32 = 10.0;\\n\\nfn toWorldSpace(p: vec4<f32>) -> vec4<f32> {\\n  return model * p.xzyw;\\n}\\n\\nfn applySelectionTransform(p: vec4<f32>) -> vec4<f32> {\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    return selectionTransform * p;\\n  } else {\\n    return p;\\n  }\\n}\\n\\n@vertex\\nfn vertexMain(\\n    @location(0) objectSpacePosition : vec4<f32>,\\n    ) -> VertexOutput\\n{\\n  var worldSpacePosition = applySelectionTransform(toWorldSpace(objectSpacePosition));\\n\\n  if ((flags & CONSTANT_SCREEN_SIZE_BIT) != 0) {\\n    var dist: f32 = distance(worldSpacePosition.xyz, cameraPos.xyz);\\n    // TODO: dist should actually be dist in forward direction\\n    var scaledObjectSpacePosition: vec4<f32> = vec4<f32>(objectSpacePosition.xzy * dist, objectSpacePosition.w);\\n    worldSpacePosition = applySelectionTransform(toWorldSpace(scaledObjectSpacePosition));\\n  } \\n\\n  var output: VertexOutput;\\n  output.position = cameraViewProj * model * worldSpacePosition;\\n  return output;\\n}\\n\\nstruct FragOutputs {\\n  @builtin(frag_depth) depth: f32,\\n  @location(0) color: vec4f,\\n}\\n\\nstruct FragInputs {\\n  @builtin(position) fragCoords: vec4<f32>,\\n}\\n\\n@fragment\\nfn fragmentMain(inputs: FragInputs) -> FragOutputs {\\n\\n  var fragColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 1.0);\\n  var scaledFragCoords: vec2<f32> = inputs.fragCoords.xy / STRIPE_WIDTH;\\n  var depth: f32 = inputs.fragCoords.z * 0.9999999;\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    \\n      var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n      var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n      if ((evenX && !evenY) || (evenY && !evenX)) {\\n        fragColor = vec4<f32>(1.0, 1.0, 0.0, 1.0);\\n      }\\n    depth *= 0.9999999;\\n   \\n  }\\n  if ((flags & HOVER_BIT) == HOVER_BIT) {\\n\\n      var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n      var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n      if ((evenX && !evenY) || (evenY && !evenX)) {\\n        fragColor = vec4<f32>(0.0, 0.0, 1.0, 1.0);\\n      }\\n    depth *= 0.9999999;\\n\\n  }\\n  var output: FragOutputs;\\n  output.color = fragColor;\\n  output.depth = depth;\\n  return output;\\n}\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvcG9pbnRTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsd0JBQXdCLCtDQUErQyxzQkFBc0IseURBQXlELHlFQUF5RSx1REFBdUQsZ0RBQWdELDZDQUE2QyxpRkFBaUYsaUVBQWlFLHFFQUFxRSxvRkFBb0YsMkRBQTJELGlEQUFpRCxnQ0FBZ0MsbUNBQW1DLG1DQUFtQyxnREFBZ0QsMEJBQTBCLEdBQUcsMkRBQTJELGlEQUFpRCxvQ0FBb0MsTUFBTSxNQUFNLGVBQWUsS0FBSyxHQUFHLHdHQUF3Ryx3RkFBd0Ysb0RBQW9ELHNFQUFzRSxrTEFBa0wsNEZBQTRGLE1BQU0sK0JBQStCLGtFQUFrRSxrQkFBa0IsR0FBRyx3QkFBd0IscUVBQXFFLHVCQUF1QixnREFBZ0QsbUVBQW1FLCtEQUErRCwwRUFBMEUscURBQXFELGlEQUFpRCxxRUFBcUUsK0RBQStELHFEQUFxRCxvREFBb0QsU0FBUyx5QkFBeUIsVUFBVSwyQ0FBMkMsaUVBQWlFLCtEQUErRCxxREFBcUQsb0RBQW9ELFNBQVMseUJBQXlCLE9BQU8sNEJBQTRCLDZCQUE2Qix5QkFBeUIsa0JBQWtCLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvc2hhZGVycy9wb2ludFNoYWRlci53Z3NsPzYwZDUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJcXG5zdHJ1Y3QgVmVydGV4T3V0cHV0IHtcXG4gIEBidWlsdGluKHBvc2l0aW9uKSBwb3NpdGlvbiA6IHZlYzQ8ZjMyPixcXG59XFxuXFxuLy8gbG9jYWwgdW5pZm9ybXM7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBtb2RlbCA6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gbW9kZWxJbnZlcnNlVHJhbnNwb3NlIDogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiBjb2xvciA6IHZlYzQ8ZjMyPjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMykgdmFyPHVuaWZvcm0+IGZsYWdzOiBpMzI7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDQpIHZhcjx1bmlmb3JtPiBpZDogaTMyO1xcblxcbi8vIGdsb2JhbCB1bmlmb3JtczpcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IGNhbWVyYVBvczogdmVjMzxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZygxKSB2YXI8dW5pZm9ybT4gY2FtZXJhVmlld1Byb2o6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZygyKSB2YXI8dW5pZm9ybT4gc2VsZWN0aW9uVHJhbnNmb3JtOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMykgdmFyPHVuaWZvcm0+IHNlbGVjdGlvblRyYW5zZm9ybUludmVyc2VUcmFzcG9zZTogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDQpIHZhcjx1bmlmb3JtPiByZXNvbHV0aW9uOiB2ZWMyPGYzMj47XFxuXFxuY29uc3QgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUOiBpMzIgPSAxIDw8IDA7XFxuY29uc3QgSE9WRVJfQklUOiBpMzIgPSAxIDw8IDE7XFxuY29uc3QgU0VMRUNURURfQklUOiBpMzIgPSAxIDw8IDI7XFxuXFxuY29uc3QgU1RSSVBFX1dJRFRIOiBmMzIgPSAxMC4wO1xcblxcbmZuIHRvV29ybGRTcGFjZShwOiB2ZWM0PGYzMj4pIC0+IHZlYzQ8ZjMyPiB7XFxuICByZXR1cm4gbW9kZWwgKiBwLnh6eXc7XFxufVxcblxcbmZuIGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtKHA6IHZlYzQ8ZjMyPikgLT4gdmVjNDxmMzI+IHtcXG4gIGlmICgoZmxhZ3MgJiBTRUxFQ1RFRF9CSVQpID09IFNFTEVDVEVEX0JJVCkge1xcbiAgICByZXR1cm4gc2VsZWN0aW9uVHJhbnNmb3JtICogcDtcXG4gIH0gZWxzZSB7XFxuICAgIHJldHVybiBwO1xcbiAgfVxcbn1cXG5cXG5AdmVydGV4XFxuZm4gdmVydGV4TWFpbihcXG4gICAgQGxvY2F0aW9uKDApIG9iamVjdFNwYWNlUG9zaXRpb24gOiB2ZWM0PGYzMj4sXFxuICAgICkgLT4gVmVydGV4T3V0cHV0XFxue1xcbiAgdmFyIHdvcmxkU3BhY2VQb3NpdGlvbiA9IGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtKHRvV29ybGRTcGFjZShvYmplY3RTcGFjZVBvc2l0aW9uKSk7XFxuXFxuICBpZiAoKGZsYWdzICYgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUKSAhPSAwKSB7XFxuICAgIHZhciBkaXN0OiBmMzIgPSBkaXN0YW5jZSh3b3JsZFNwYWNlUG9zaXRpb24ueHl6LCBjYW1lcmFQb3MueHl6KTtcXG4gICAgLy8gVE9ETzogZGlzdCBzaG91bGQgYWN0dWFsbHkgYmUgZGlzdCBpbiBmb3J3YXJkIGRpcmVjdGlvblxcbiAgICB2YXIgc2NhbGVkT2JqZWN0U3BhY2VQb3NpdGlvbjogdmVjNDxmMzI+ID0gdmVjNDxmMzI+KG9iamVjdFNwYWNlUG9zaXRpb24ueHp5ICogZGlzdCwgb2JqZWN0U3BhY2VQb3NpdGlvbi53KTtcXG4gICAgd29ybGRTcGFjZVBvc2l0aW9uID0gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm0odG9Xb3JsZFNwYWNlKHNjYWxlZE9iamVjdFNwYWNlUG9zaXRpb24pKTtcXG4gIH0gXFxuXFxuICB2YXIgb3V0cHV0OiBWZXJ0ZXhPdXRwdXQ7XFxuICBvdXRwdXQucG9zaXRpb24gPSBjYW1lcmFWaWV3UHJvaiAqIG1vZGVsICogd29ybGRTcGFjZVBvc2l0aW9uO1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXFxuc3RydWN0IEZyYWdPdXRwdXRzIHtcXG4gIEBidWlsdGluKGZyYWdfZGVwdGgpIGRlcHRoOiBmMzIsXFxuICBAbG9jYXRpb24oMCkgY29sb3I6IHZlYzRmLFxcbn1cXG5cXG5zdHJ1Y3QgRnJhZ0lucHV0cyB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgZnJhZ0Nvb3JkczogdmVjNDxmMzI+LFxcbn1cXG5cXG5AZnJhZ21lbnRcXG5mbiBmcmFnbWVudE1haW4oaW5wdXRzOiBGcmFnSW5wdXRzKSAtPiBGcmFnT3V0cHV0cyB7XFxuXFxuICB2YXIgZnJhZ0NvbG9yOiB2ZWM0PGYzMj4gPSB2ZWM0PGYzMj4oMC4wLCAwLjAsIDAuMCwgMS4wKTtcXG4gIHZhciBzY2FsZWRGcmFnQ29vcmRzOiB2ZWMyPGYzMj4gPSBpbnB1dHMuZnJhZ0Nvb3Jkcy54eSAvIFNUUklQRV9XSURUSDtcXG4gIHZhciBkZXB0aDogZjMyID0gaW5wdXRzLmZyYWdDb29yZHMueiAqIDAuOTk5OTk5OTtcXG4gIGlmICgoZmxhZ3MgJiBTRUxFQ1RFRF9CSVQpID09IFNFTEVDVEVEX0JJVCkge1xcbiAgICBcXG4gICAgICB2YXIgZXZlblg6IGJvb2wgPSBtb2RmKHNjYWxlZEZyYWdDb29yZHMueCkuZnJhY3QgPCAwLjU7XFxuICAgICAgdmFyIGV2ZW5ZOiBib29sID0gbW9kZihzY2FsZWRGcmFnQ29vcmRzLnkpLmZyYWN0IDwgMC41O1xcbiAgICAgIGlmICgoZXZlblggJiYgIWV2ZW5ZKSB8fCAoZXZlblkgJiYgIWV2ZW5YKSkge1xcbiAgICAgICAgZnJhZ0NvbG9yID0gdmVjNDxmMzI+KDEuMCwgMS4wLCAwLjAsIDEuMCk7XFxuICAgICAgfVxcbiAgICBkZXB0aCAqPSAwLjk5OTk5OTk7XFxuICAgXFxuICB9XFxuICBpZiAoKGZsYWdzICYgSE9WRVJfQklUKSA9PSBIT1ZFUl9CSVQpIHtcXG5cXG4gICAgICB2YXIgZXZlblg6IGJvb2wgPSBtb2RmKHNjYWxlZEZyYWdDb29yZHMueCkuZnJhY3QgPCAwLjU7XFxuICAgICAgdmFyIGV2ZW5ZOiBib29sID0gbW9kZihzY2FsZWRGcmFnQ29vcmRzLnkpLmZyYWN0IDwgMC41O1xcbiAgICAgIGlmICgoZXZlblggJiYgIWV2ZW5ZKSB8fCAoZXZlblkgJiYgIWV2ZW5YKSkge1xcbiAgICAgICAgZnJhZ0NvbG9yID0gdmVjNDxmMzI+KDAuMCwgMC4wLCAxLjAsIDEuMCk7XFxuICAgICAgfVxcbiAgICBkZXB0aCAqPSAwLjk5OTk5OTk7XFxuXFxuICB9XFxuICB2YXIgb3V0cHV0OiBGcmFnT3V0cHV0cztcXG4gIG91dHB1dC5jb2xvciA9IGZyYWdDb2xvcjtcXG4gIG91dHB1dC5kZXB0aCA9IGRlcHRoO1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXFxuXFxuXCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/shaders/pointShader.wgsl\n");

/***/ }),

/***/ "./src/render/shaders/triangleShader.wgsl":
/*!************************************************!*\
  !*** ./src/render/shaders/triangleShader.wgsl ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"\\n// local uniforms;\\n@group(0) @binding(0) var<uniform> model: mat4x4<f32>;\\n@group(0) @binding(1) var<uniform> modelInverseTranspose: mat4x4<f32>;\\n@group(0) @binding(2) var<uniform> material: Material;\\n@group(0) @binding(3) var<uniform> flags: i32;\\n@group(0) @binding(4) var<uniform> id: i32;\\n@group(0) @binding(5) var<storage, read> subSelection: array<u32>;\\n\\n// global uniforms:\\n@group(1) @binding(0) var<uniform> cameraPos: vec3<f32>;\\n@group(1) @binding(1) var<uniform> cameraViewProj: mat4x4<f32>;\\n@group(1) @binding(2) var<uniform> selectionTransform: mat4x4<f32>;\\n@group(1) @binding(3) var<uniform> selectionTransformInverseTraspose: mat4x4<f32>;\\n@group(1) @binding(4) var<uniform> resolution: vec2<f32>;\\n// TODO: why is resolution.x 0? \\n\\nconst CONSTANT_SCREEN_SIZE_BIT: i32 = 1 << 0;\\nconst HOVER_BIT: i32 = 1 << 1;\\nconst SELECTED_BIT: i32 = 1 << 2;\\n\\nconst STRIPE_WIDTH: f32 = 10.0;\\n\\nfn applySelectionTransform(p: vec4<f32>) -> vec4<f32> {\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    return selectionTransform * p;\\n  } else {\\n    return p;\\n  }\\n}\\nfn applySelectionTransformNormal(p: vec4<f32>) -> vec4<f32> {\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) {\\n    return selectionTransformInverseTraspose * p;\\n  } else {\\n    return p;\\n  }\\n}\\n\\nstruct VertexOutput {\\n  @builtin(position) fragCoord : vec4<f32>,\\n    @location(0) @interpolate(linear) normal : vec4<f32>,\\n    @location(1) @interpolate(linear) selectedness: f32,\\n    @location(2) @interpolate(linear) position: vec4<f32>,\\n}\\n\\n@vertex\\nfn vertexMain(\\n    @builtin(vertex_index) index: u32,\\n    @location(0) objectSpacePosition : vec4<f32>,\\n    @location(1) objectSpaceNormal : vec4<f32>\\n    ) -> VertexOutput\\n{\\n\\n  var worldSpacePosition = applySelectionTransform(model * objectSpacePosition.xzyw);\\n  var worldSpaceNormal = applySelectionTransformNormal(modelInverseTranspose * objectSpaceNormal.xzyw);\\n\\n  if ((flags & CONSTANT_SCREEN_SIZE_BIT) != 0) {\\n    var dist: f32 = distance(worldSpacePosition.xyz, cameraPos.xyz);\\n    // TODO: dist should actually be dist in forward direction\\n    var scaledObjectSpacePosition: vec4<f32> = vec4<f32>(objectSpacePosition.xzy * dist, objectSpacePosition.w);\\n    worldSpacePosition = applySelectionTransform(model * scaledObjectSpacePosition);\\n  } \\n\\n  var selectedness: f32 = 0;\\n  if ((flags & SELECTED_BIT) == SELECTED_BIT) { selectedness = 1; }\\n  if ((subSelection[index / 32] & (1u << (index % 32))) > 0u) { selectedness = 1; }\\n\\n  var output: VertexOutput;\\n  output.normal = worldSpaceNormal;\\n  output.fragCoord = cameraViewProj * worldSpacePosition;\\n  output.position = worldSpacePosition;\\n  output.selectedness = selectedness;\\n  return output;\\n}\\n\\n\\nstruct Material {\\n  color: vec4<f32>,\\n  emissive: vec4<f32>,\\n  ambientIntensity: f32,\\n  pseudoDiffuseIntensity: f32,\\n  specularity: f32,\\n  specularIntensity: f32,\\n}\\n\\nfn calculateLighting(position: vec4<f32>, normal: vec3<f32>, material: Material) -> vec4<f32> {\\n  var toCamera: vec3<f32> = normalize(cameraPos.xyz - position.xyz);\\n\\n  var flippedNormal: vec3<f32> = normal;\\n  if (dot(toCamera, normal) < 0) {\\n    flippedNormal *= -1;\\n  } \\n\\n  let normalizedLightIntensity: f32 = dot(flippedNormal, vec3<f32>(0,1,0)) * 0.5 + 0.5;\\n\\n  let reflectedLight: vec3<f32> = reflect(vec3<f32>(0,1,0), normal);\\n\\n  let pseudoDiffuse: vec4<f32> = material.color * normalizedLightIntensity * material.pseudoDiffuseIntensity;\\n  let ambient: vec4<f32> = material.color * material.ambientIntensity;\\n  let specular: vec4<f32> = material.color * pow(max(dot(reflectedLight, toCamera) * -0.5 + 0.5, 0), material.specularity) * material.specularIntensity;\\n\\n  return pseudoDiffuse + ambient + specular + material.emissive;\\n}\\n\\nstruct FragOutputs {\\n  @builtin(frag_depth) depth: f32,\\n  @location(0) color: vec4f,\\n}\\n\\n@fragment\\nfn fragmentMain(inputs: VertexOutput) -> FragOutputs {\\n\\n  var normalizedNormal: vec3<f32> = normalize(inputs.normal.xyz);\\n  var fragColor: vec4<f32> = calculateLighting(inputs.position, normalizedNormal, material);\\n\\n  var depth: f32 = inputs.fragCoord.z;\\n\\n  var scaledFragCoords: vec2<f32> = inputs.fragCoord.xy / STRIPE_WIDTH;\\n  if (inputs.selectedness > 0) {\\n    var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n    var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n    if ((evenX && !evenY) || (evenY && !evenX)) {\\n      fragColor = vec4<f32>(1.0, 1.0, 0.0, 1.0);\\n    }\\n    depth *= 0.9999999;\\n  }\\n\\n  if ((flags & HOVER_BIT) == HOVER_BIT) {\\n    var evenX: bool = modf(scaledFragCoords.x).fract < 0.5;\\n    var evenY: bool = modf(scaledFragCoords.y).fract < 0.5;\\n    if ((evenX && !evenY) || (evenY && !evenX)) {\\n      fragColor = vec4<f32>(0.0, 0.0, 1.0, 1.0);\\n    }\\n    depth *= 0.9999999;\\n  }\\n\\n\\n  var res: FragOutputs;\\n  res.depth = depth;\\n  res.color = fragColor;\\n  return res;\\n\\n}\\n\\n\\n\\n\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVuZGVyL3NoYWRlcnMvdHJpYW5nbGVTaGFkZXIud2dzbCIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUscUJBQXFCLHdEQUF3RCx3RUFBd0Usd0RBQXdELGdEQUFnRCw2Q0FBNkMsb0VBQW9FLGlGQUFpRixpRUFBaUUscUVBQXFFLG9GQUFvRiwyREFBMkQsbUZBQW1GLGdDQUFnQyxtQ0FBbUMsbUNBQW1DLDJEQUEyRCxpREFBaUQsb0NBQW9DLE1BQU0sTUFBTSxlQUFlLEtBQUssR0FBRywrREFBK0QsaURBQWlELG1EQUFtRCxNQUFNLE1BQU0sZUFBZSxLQUFLLEdBQUcseUJBQXlCLGlPQUFpTyxnTUFBZ00seUZBQXlGLHlHQUF5RyxvREFBb0Qsc0VBQXNFLGtMQUFrTCxzRkFBc0YsTUFBTSxnQ0FBZ0Msa0RBQWtELG1CQUFtQixrRUFBa0UsbUJBQW1CLCtCQUErQixxQ0FBcUMsMkRBQTJELHlDQUF5Qyx1Q0FBdUMsa0JBQWtCLEdBQUcsdUJBQXVCLDBKQUEwSixtR0FBbUcsc0VBQXNFLDRDQUE0QyxvQ0FBb0MsMEJBQTBCLE1BQU0sMkZBQTJGLHdFQUF3RSxpSEFBaUgsd0VBQXdFLDBKQUEwSixvRUFBb0UsR0FBRyx3QkFBd0IscUVBQXFFLHFFQUFxRSxxRUFBcUUsOEZBQThGLDBDQUEwQywyRUFBMkUsa0NBQWtDLDZEQUE2RCw2REFBNkQsbURBQW1ELGtEQUFrRCxPQUFPLHlCQUF5QixLQUFLLDZDQUE2Qyw2REFBNkQsNkRBQTZELG1EQUFtRCxrREFBa0QsT0FBTyx5QkFBeUIsS0FBSyw2QkFBNkIsc0JBQXNCLDBCQUEwQixlQUFlLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL3NyYy9yZW5kZXIvc2hhZGVycy90cmlhbmdsZVNoYWRlci53Z3NsP2QzZGQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJcXG4vLyBsb2NhbCB1bmlmb3JtcztcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMCkgdmFyPHVuaWZvcm0+IG1vZGVsOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoMSkgdmFyPHVuaWZvcm0+IG1vZGVsSW52ZXJzZVRyYW5zcG9zZTogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiBtYXRlcmlhbDogTWF0ZXJpYWw7XFxuQGdyb3VwKDApIEBiaW5kaW5nKDMpIHZhcjx1bmlmb3JtPiBmbGFnczogaTMyO1xcbkBncm91cCgwKSBAYmluZGluZyg0KSB2YXI8dW5pZm9ybT4gaWQ6IGkzMjtcXG5AZ3JvdXAoMCkgQGJpbmRpbmcoNSkgdmFyPHN0b3JhZ2UsIHJlYWQ+IHN1YlNlbGVjdGlvbjogYXJyYXk8dTMyPjtcXG5cXG4vLyBnbG9iYWwgdW5pZm9ybXM6XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDApIHZhcjx1bmlmb3JtPiBjYW1lcmFQb3M6IHZlYzM8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMSkgdmFyPHVuaWZvcm0+IGNhbWVyYVZpZXdQcm9qOiBtYXQ0eDQ8ZjMyPjtcXG5AZ3JvdXAoMSkgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IHNlbGVjdGlvblRyYW5zZm9ybTogbWF0NHg0PGYzMj47XFxuQGdyb3VwKDEpIEBiaW5kaW5nKDMpIHZhcjx1bmlmb3JtPiBzZWxlY3Rpb25UcmFuc2Zvcm1JbnZlcnNlVHJhc3Bvc2U6IG1hdDR4NDxmMzI+O1xcbkBncm91cCgxKSBAYmluZGluZyg0KSB2YXI8dW5pZm9ybT4gcmVzb2x1dGlvbjogdmVjMjxmMzI+O1xcbi8vIFRPRE86IHdoeSBpcyByZXNvbHV0aW9uLnggMD8gXFxuXFxuY29uc3QgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUOiBpMzIgPSAxIDw8IDA7XFxuY29uc3QgSE9WRVJfQklUOiBpMzIgPSAxIDw8IDE7XFxuY29uc3QgU0VMRUNURURfQklUOiBpMzIgPSAxIDw8IDI7XFxuXFxuY29uc3QgU1RSSVBFX1dJRFRIOiBmMzIgPSAxMC4wO1xcblxcbmZuIGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtKHA6IHZlYzQ8ZjMyPikgLT4gdmVjNDxmMzI+IHtcXG4gIGlmICgoZmxhZ3MgJiBTRUxFQ1RFRF9CSVQpID09IFNFTEVDVEVEX0JJVCkge1xcbiAgICByZXR1cm4gc2VsZWN0aW9uVHJhbnNmb3JtICogcDtcXG4gIH0gZWxzZSB7XFxuICAgIHJldHVybiBwO1xcbiAgfVxcbn1cXG5mbiBhcHBseVNlbGVjdGlvblRyYW5zZm9ybU5vcm1hbChwOiB2ZWM0PGYzMj4pIC0+IHZlYzQ8ZjMyPiB7XFxuICBpZiAoKGZsYWdzICYgU0VMRUNURURfQklUKSA9PSBTRUxFQ1RFRF9CSVQpIHtcXG4gICAgcmV0dXJuIHNlbGVjdGlvblRyYW5zZm9ybUludmVyc2VUcmFzcG9zZSAqIHA7XFxuICB9IGVsc2Uge1xcbiAgICByZXR1cm4gcDtcXG4gIH1cXG59XFxuXFxuc3RydWN0IFZlcnRleE91dHB1dCB7XFxuICBAYnVpbHRpbihwb3NpdGlvbikgZnJhZ0Nvb3JkIDogdmVjNDxmMzI+LFxcbiAgICBAbG9jYXRpb24oMCkgQGludGVycG9sYXRlKGxpbmVhcikgbm9ybWFsIDogdmVjNDxmMzI+LFxcbiAgICBAbG9jYXRpb24oMSkgQGludGVycG9sYXRlKGxpbmVhcikgc2VsZWN0ZWRuZXNzOiBmMzIsXFxuICAgIEBsb2NhdGlvbigyKSBAaW50ZXJwb2xhdGUobGluZWFyKSBwb3NpdGlvbjogdmVjNDxmMzI+LFxcbn1cXG5cXG5AdmVydGV4XFxuZm4gdmVydGV4TWFpbihcXG4gICAgQGJ1aWx0aW4odmVydGV4X2luZGV4KSBpbmRleDogdTMyLFxcbiAgICBAbG9jYXRpb24oMCkgb2JqZWN0U3BhY2VQb3NpdGlvbiA6IHZlYzQ8ZjMyPixcXG4gICAgQGxvY2F0aW9uKDEpIG9iamVjdFNwYWNlTm9ybWFsIDogdmVjNDxmMzI+XFxuICAgICkgLT4gVmVydGV4T3V0cHV0XFxue1xcblxcbiAgdmFyIHdvcmxkU3BhY2VQb3NpdGlvbiA9IGFwcGx5U2VsZWN0aW9uVHJhbnNmb3JtKG1vZGVsICogb2JqZWN0U3BhY2VQb3NpdGlvbi54enl3KTtcXG4gIHZhciB3b3JsZFNwYWNlTm9ybWFsID0gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm1Ob3JtYWwobW9kZWxJbnZlcnNlVHJhbnNwb3NlICogb2JqZWN0U3BhY2VOb3JtYWwueHp5dyk7XFxuXFxuICBpZiAoKGZsYWdzICYgQ09OU1RBTlRfU0NSRUVOX1NJWkVfQklUKSAhPSAwKSB7XFxuICAgIHZhciBkaXN0OiBmMzIgPSBkaXN0YW5jZSh3b3JsZFNwYWNlUG9zaXRpb24ueHl6LCBjYW1lcmFQb3MueHl6KTtcXG4gICAgLy8gVE9ETzogZGlzdCBzaG91bGQgYWN0dWFsbHkgYmUgZGlzdCBpbiBmb3J3YXJkIGRpcmVjdGlvblxcbiAgICB2YXIgc2NhbGVkT2JqZWN0U3BhY2VQb3NpdGlvbjogdmVjNDxmMzI+ID0gdmVjNDxmMzI+KG9iamVjdFNwYWNlUG9zaXRpb24ueHp5ICogZGlzdCwgb2JqZWN0U3BhY2VQb3NpdGlvbi53KTtcXG4gICAgd29ybGRTcGFjZVBvc2l0aW9uID0gYXBwbHlTZWxlY3Rpb25UcmFuc2Zvcm0obW9kZWwgKiBzY2FsZWRPYmplY3RTcGFjZVBvc2l0aW9uKTtcXG4gIH0gXFxuXFxuICB2YXIgc2VsZWN0ZWRuZXNzOiBmMzIgPSAwO1xcbiAgaWYgKChmbGFncyAmIFNFTEVDVEVEX0JJVCkgPT0gU0VMRUNURURfQklUKSB7IHNlbGVjdGVkbmVzcyA9IDE7IH1cXG4gIGlmICgoc3ViU2VsZWN0aW9uW2luZGV4IC8gMzJdICYgKDF1IDw8IChpbmRleCAlIDMyKSkpID4gMHUpIHsgc2VsZWN0ZWRuZXNzID0gMTsgfVxcblxcbiAgdmFyIG91dHB1dDogVmVydGV4T3V0cHV0O1xcbiAgb3V0cHV0Lm5vcm1hbCA9IHdvcmxkU3BhY2VOb3JtYWw7XFxuICBvdXRwdXQuZnJhZ0Nvb3JkID0gY2FtZXJhVmlld1Byb2ogKiB3b3JsZFNwYWNlUG9zaXRpb247XFxuICBvdXRwdXQucG9zaXRpb24gPSB3b3JsZFNwYWNlUG9zaXRpb247XFxuICBvdXRwdXQuc2VsZWN0ZWRuZXNzID0gc2VsZWN0ZWRuZXNzO1xcbiAgcmV0dXJuIG91dHB1dDtcXG59XFxuXFxuXFxuc3RydWN0IE1hdGVyaWFsIHtcXG4gIGNvbG9yOiB2ZWM0PGYzMj4sXFxuICBlbWlzc2l2ZTogdmVjNDxmMzI+LFxcbiAgYW1iaWVudEludGVuc2l0eTogZjMyLFxcbiAgcHNldWRvRGlmZnVzZUludGVuc2l0eTogZjMyLFxcbiAgc3BlY3VsYXJpdHk6IGYzMixcXG4gIHNwZWN1bGFySW50ZW5zaXR5OiBmMzIsXFxufVxcblxcbmZuIGNhbGN1bGF0ZUxpZ2h0aW5nKHBvc2l0aW9uOiB2ZWM0PGYzMj4sIG5vcm1hbDogdmVjMzxmMzI+LCBtYXRlcmlhbDogTWF0ZXJpYWwpIC0+IHZlYzQ8ZjMyPiB7XFxuICB2YXIgdG9DYW1lcmE6IHZlYzM8ZjMyPiA9IG5vcm1hbGl6ZShjYW1lcmFQb3MueHl6IC0gcG9zaXRpb24ueHl6KTtcXG5cXG4gIHZhciBmbGlwcGVkTm9ybWFsOiB2ZWMzPGYzMj4gPSBub3JtYWw7XFxuICBpZiAoZG90KHRvQ2FtZXJhLCBub3JtYWwpIDwgMCkge1xcbiAgICBmbGlwcGVkTm9ybWFsICo9IC0xO1xcbiAgfSBcXG5cXG4gIGxldCBub3JtYWxpemVkTGlnaHRJbnRlbnNpdHk6IGYzMiA9IGRvdChmbGlwcGVkTm9ybWFsLCB2ZWMzPGYzMj4oMCwxLDApKSAqIDAuNSArIDAuNTtcXG5cXG4gIGxldCByZWZsZWN0ZWRMaWdodDogdmVjMzxmMzI+ID0gcmVmbGVjdCh2ZWMzPGYzMj4oMCwxLDApLCBub3JtYWwpO1xcblxcbiAgbGV0IHBzZXVkb0RpZmZ1c2U6IHZlYzQ8ZjMyPiA9IG1hdGVyaWFsLmNvbG9yICogbm9ybWFsaXplZExpZ2h0SW50ZW5zaXR5ICogbWF0ZXJpYWwucHNldWRvRGlmZnVzZUludGVuc2l0eTtcXG4gIGxldCBhbWJpZW50OiB2ZWM0PGYzMj4gPSBtYXRlcmlhbC5jb2xvciAqIG1hdGVyaWFsLmFtYmllbnRJbnRlbnNpdHk7XFxuICBsZXQgc3BlY3VsYXI6IHZlYzQ8ZjMyPiA9IG1hdGVyaWFsLmNvbG9yICogcG93KG1heChkb3QocmVmbGVjdGVkTGlnaHQsIHRvQ2FtZXJhKSAqIC0wLjUgKyAwLjUsIDApLCBtYXRlcmlhbC5zcGVjdWxhcml0eSkgKiBtYXRlcmlhbC5zcGVjdWxhckludGVuc2l0eTtcXG5cXG4gIHJldHVybiBwc2V1ZG9EaWZmdXNlICsgYW1iaWVudCArIHNwZWN1bGFyICsgbWF0ZXJpYWwuZW1pc3NpdmU7XFxufVxcblxcbnN0cnVjdCBGcmFnT3V0cHV0cyB7XFxuICBAYnVpbHRpbihmcmFnX2RlcHRoKSBkZXB0aDogZjMyLFxcbiAgQGxvY2F0aW9uKDApIGNvbG9yOiB2ZWM0ZixcXG59XFxuXFxuQGZyYWdtZW50XFxuZm4gZnJhZ21lbnRNYWluKGlucHV0czogVmVydGV4T3V0cHV0KSAtPiBGcmFnT3V0cHV0cyB7XFxuXFxuICB2YXIgbm9ybWFsaXplZE5vcm1hbDogdmVjMzxmMzI+ID0gbm9ybWFsaXplKGlucHV0cy5ub3JtYWwueHl6KTtcXG4gIHZhciBmcmFnQ29sb3I6IHZlYzQ8ZjMyPiA9IGNhbGN1bGF0ZUxpZ2h0aW5nKGlucHV0cy5wb3NpdGlvbiwgbm9ybWFsaXplZE5vcm1hbCwgbWF0ZXJpYWwpO1xcblxcbiAgdmFyIGRlcHRoOiBmMzIgPSBpbnB1dHMuZnJhZ0Nvb3JkLno7XFxuXFxuICB2YXIgc2NhbGVkRnJhZ0Nvb3JkczogdmVjMjxmMzI+ID0gaW5wdXRzLmZyYWdDb29yZC54eSAvIFNUUklQRV9XSURUSDtcXG4gIGlmIChpbnB1dHMuc2VsZWN0ZWRuZXNzID4gMCkge1xcbiAgICB2YXIgZXZlblg6IGJvb2wgPSBtb2RmKHNjYWxlZEZyYWdDb29yZHMueCkuZnJhY3QgPCAwLjU7XFxuICAgIHZhciBldmVuWTogYm9vbCA9IG1vZGYoc2NhbGVkRnJhZ0Nvb3Jkcy55KS5mcmFjdCA8IDAuNTtcXG4gICAgaWYgKChldmVuWCAmJiAhZXZlblkpIHx8IChldmVuWSAmJiAhZXZlblgpKSB7XFxuICAgICAgZnJhZ0NvbG9yID0gdmVjNDxmMzI+KDEuMCwgMS4wLCAwLjAsIDEuMCk7XFxuICAgIH1cXG4gICAgZGVwdGggKj0gMC45OTk5OTk5O1xcbiAgfVxcblxcbiAgaWYgKChmbGFncyAmIEhPVkVSX0JJVCkgPT0gSE9WRVJfQklUKSB7XFxuICAgIHZhciBldmVuWDogYm9vbCA9IG1vZGYoc2NhbGVkRnJhZ0Nvb3Jkcy54KS5mcmFjdCA8IDAuNTtcXG4gICAgdmFyIGV2ZW5ZOiBib29sID0gbW9kZihzY2FsZWRGcmFnQ29vcmRzLnkpLmZyYWN0IDwgMC41O1xcbiAgICBpZiAoKGV2ZW5YICYmICFldmVuWSkgfHwgKGV2ZW5ZICYmICFldmVuWCkpIHtcXG4gICAgICBmcmFnQ29sb3IgPSB2ZWM0PGYzMj4oMC4wLCAwLjAsIDEuMCwgMS4wKTtcXG4gICAgfVxcbiAgICBkZXB0aCAqPSAwLjk5OTk5OTk7XFxuICB9XFxuXFxuXFxuICB2YXIgcmVzOiBGcmFnT3V0cHV0cztcXG4gIHJlcy5kZXB0aCA9IGRlcHRoO1xcbiAgcmVzLmNvbG9yID0gZnJhZ0NvbG9yO1xcbiAgcmV0dXJuIHJlcztcXG5cXG59XFxuXFxuXFxuXFxuXCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/render/shaders/triangleShader.wgsl\n");

/***/ }),

/***/ "./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js":
/*!*****************************************************************!*\
  !*** ./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mat3: () => (/* binding */ mat3Impl),\n/* harmony export */   mat4: () => (/* binding */ mat4Impl),\n/* harmony export */   quat: () => (/* binding */ quatImpl),\n/* harmony export */   setDefaultType: () => (/* binding */ setDefaultType),\n/* harmony export */   utils: () => (/* binding */ utils),\n/* harmony export */   vec2: () => (/* binding */ vec2Impl),\n/* harmony export */   vec3: () => (/* binding */ vec3Impl),\n/* harmony export */   vec4: () => (/* binding */ vec4Impl)\n/* harmony export */ });\n/* wgpu-matrix@2.5.0, license MIT */\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nlet EPSILON = 0.000001;\n/**\n * Set the value for EPSILON for various checks\n * @param v - Value to use for EPSILON.\n * @returns previous value of EPSILON;\n */\nfunction setEpsilon(v) {\n    const old = EPSILON;\n    EPSILON = v;\n    return old;\n}\n/**\n * Convert degrees to radians\n * @param degrees - Angle in degrees\n * @returns angle converted to radians\n */\nfunction degToRad(degrees) {\n    return degrees * Math.PI / 180;\n}\n/**\n * Convert radians to degrees\n * @param radians - Angle in radians\n * @returns angle converted to degrees\n */\nfunction radToDeg(radians) {\n    return radians * 180 / Math.PI;\n}\n/**\n * Lerps between a and b via t\n * @param a - starting value\n * @param b - ending value\n * @param t - value where 0 = a and 1 = b\n * @returns a + (b - a) * t\n */\nfunction lerp$4(a, b, t) {\n    return a + (b - a) * t;\n}\n/**\n * Compute the opposite of lerp. Given a and b and a value between\n * a and b returns a value between 0 and 1. 0 if a, 1 if b.\n * Note: no clamping is done.\n * @param a - start value\n * @param b - end value\n * @param v - value between a and b\n * @returns (v - a) / (b - a)\n */\nfunction inverseLerp(a, b, v) {\n    const d = b - a;\n    return (Math.abs(b - a) < EPSILON)\n        ? a\n        : (v - a) / d;\n}\n/**\n * Compute the euclidean modulo\n *\n * ```\n * // table for n / 3\n * -5, -4, -3, -2, -1,  0,  1,  2,  3,  4,  5   <- n\n * ------------------------------------\n * -2  -1  -0  -2  -1   0,  1,  2,  0,  1,  2   <- n % 3\n *  1   2   0   1   2   0,  1,  2,  0,  1,  2   <- euclideanModule(n, 3)\n * ```\n *\n * @param n - dividend\n * @param m - divisor\n * @returns the euclidean modulo of n / m\n */\nfunction euclideanModulo(n, m) {\n    return ((n % m) + m) % m;\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    get EPSILON () { return EPSILON; },\n    setEpsilon: setEpsilon,\n    degToRad: degToRad,\n    radToDeg: radToDeg,\n    lerp: lerp$4,\n    inverseLerp: inverseLerp,\n    euclideanModulo: euclideanModulo\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Vec2 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new Vec2. In other words you can do this\n *\n *     const v = vec2.cross(v1, v2);  // Creates a new Vec2 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = vec2.create();\n *     vec2.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     vec2.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet VecType$2 = Float32Array;\n/**\n * Sets the type this library creates for a Vec2\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Vec2\n */\nfunction setDefaultType$6(ctor) {\n    const oldType = VecType$2;\n    VecType$2 = ctor;\n    return oldType;\n}\n/**\n * Creates a Vec2; may be called with x, y, z to set initial values.\n *\n * Note: Since passing in a raw JavaScript array\n * is valid in all circumstances, if you want to\n * force a JavaScript array into a Vec2's specified type\n * it would be faster to use\n *\n * ```\n * const v = vec2.clone(someJSArray);\n * ```\n *\n * Note: a consequence of the implementation is if your Vec2Type = `Array`\n * instead of `Float32Array` or `Float64Array` then any values you\n * don't pass in will be undefined. Usually this is not an issue since\n * (a) using `Array` is rare and (b) using `vec2.create` is usually used\n * to create a Vec2 to be filled out as in\n *\n * ```\n * const sum = vec2.create();\n * vec2.add(v1, v2, sum);\n * ```\n *\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @returns the created vector\n */\nfunction create$5(x = 0, y = 0) {\n    const dst = new VecType$2(2);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a Vec2; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @returns the created vector\n */\nconst fromValues$3 = create$5;\n/**\n * Sets the values of a Vec2\n * Also see {@link vec2.create} and {@link vec2.copy}\n *\n * @param x first value\n * @param y second value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set$5(x, y, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = x;\n    dst[1] = y;\n    return dst;\n}\n/**\n * Applies Math.ceil to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the ceil of each element of v.\n */\nfunction ceil$2(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.ceil(v[0]);\n    dst[1] = Math.ceil(v[1]);\n    return dst;\n}\n/**\n * Applies Math.floor to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the floor of each element of v.\n */\nfunction floor$2(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.floor(v[0]);\n    dst[1] = Math.floor(v[1]);\n    return dst;\n}\n/**\n * Applies Math.round to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the round of each element of v.\n */\nfunction round$2(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.round(v[0]);\n    dst[1] = Math.round(v[1]);\n    return dst;\n}\n/**\n * Clamp each element of vector between min and max\n * @param v - Operand vector.\n * @param max - Min value, default 0\n * @param min - Max value, default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that the clamped value of each element of v.\n */\nfunction clamp$2(v, min = 0, max = 1, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.min(max, Math.max(min, v[0]));\n    dst[1] = Math.min(max, Math.max(min, v[1]));\n    return dst;\n}\n/**\n * Adds two vectors; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a and b.\n */\nfunction add$3(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    return dst;\n}\n/**\n * Adds two vectors, scaling the 2nd; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param scale - Amount to scale b\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a + b * scale.\n */\nfunction addScaled$2(a, b, scale, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + b[0] * scale;\n    dst[1] = a[1] + b[1] * scale;\n    return dst;\n}\n/**\n * Returns the angle in radians between two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns The angle in radians between the 2 vectors.\n */\nfunction angle$2(a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const bx = a[0];\n    const by = a[1];\n    const mag1 = Math.sqrt(ax * ax + ay * ay);\n    const mag2 = Math.sqrt(bx * bx + by * by);\n    const mag = mag1 * mag2;\n    const cosine = mag && dot$3(a, b) / mag;\n    return Math.acos(cosine);\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nfunction subtract$3(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nconst sub$3 = subtract$3;\n/**\n * Check if 2 vectors are approximately equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are approximately equal\n */\nfunction equalsApproximately$5(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON;\n}\n/**\n * Check if 2 vectors are exactly equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are exactly equal\n */\nfunction equals$5(a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficient.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp$3(a, b, t, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient vector t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficients vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns the linear interpolated result.\n */\nfunction lerpV$2(a, b, t, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] + t[0] * (b[0] - a[0]);\n    dst[1] = a[1] + t[1] * (b[1] - a[1]);\n    return dst;\n}\n/**\n * Return max values of two vectors.\n * Given vectors a and b returns\n * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The max components vector.\n */\nfunction max$2(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.max(a[0], b[0]);\n    dst[1] = Math.max(a[1], b[1]);\n    return dst;\n}\n/**\n * Return min values of two vectors.\n * Given vectors a and b returns\n * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The min components vector.\n */\nfunction min$2(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = Math.min(a[0], b[0]);\n    dst[1] = Math.min(a[1], b[1]);\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction mulScalar$3(v, k, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar. (same as mulScalar)\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nconst scale$5 = mulScalar$3;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction divScalar$3(v, k, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    return dst;\n}\n/**\n * Inverse a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nfunction inverse$5(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = 1 / v[0];\n    dst[1] = 1 / v[1];\n    return dst;\n}\n/**\n * Invert a vector. (same as inverse)\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nconst invert$4 = inverse$5;\n/**\n * Computes the cross product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of a cross b.\n */\nfunction cross$1(a, b, dst) {\n    dst = dst || new VecType$2(3);\n    const z = a[0] * b[1] - a[1] * b[0];\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = z;\n    return dst;\n}\n/**\n * Computes the dot product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns dot product\n */\nfunction dot$3(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the length of vector\n * @param v - vector.\n * @returns length of vector.\n */\nfunction length$3(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    return Math.sqrt(v0 * v0 + v1 * v1);\n}\n/**\n * Computes the length of vector (same as length)\n * @param v - vector.\n * @returns length of vector.\n */\nconst len$3 = length$3;\n/**\n * Computes the square of the length of vector\n * @param v - vector.\n * @returns square of the length of vector.\n */\nfunction lengthSq$3(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    return v0 * v0 + v1 * v1;\n}\n/**\n * Computes the square of the length of vector (same as lengthSq)\n * @param v - vector.\n * @returns square of the length of vector.\n */\nconst lenSq$3 = lengthSq$3;\n/**\n * Computes the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nfunction distance$2(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\n/**\n * Computes the distance between 2 points (same as distance)\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nconst dist$2 = distance$2;\n/**\n * Computes the square of the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nfunction distanceSq$2(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    return dx * dx + dy * dy;\n}\n/**\n * Computes the square of the distance between 2 points (same as distanceSq)\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nconst distSq$2 = distanceSq$2;\n/**\n * Divides a vector by its Euclidean length and returns the quotient.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The normalized vector.\n */\nfunction normalize$3(v, dst) {\n    dst = dst || new VecType$2(2);\n    const v0 = v[0];\n    const v1 = v[1];\n    const len = Math.sqrt(v0 * v0 + v1 * v1);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n    }\n    return dst;\n}\n/**\n * Negates a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns -v.\n */\nfunction negate$4(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = -v[0];\n    dst[1] = -v[1];\n    return dst;\n}\n/**\n * Copies a vector. (same as {@link vec2.clone})\n * Also see {@link vec2.create} and {@link vec2.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nfunction copy$5(v, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = v[0];\n    dst[1] = v[1];\n    return dst;\n}\n/**\n * Clones a vector. (same as {@link vec2.copy})\n * Also see {@link vec2.create} and {@link vec2.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nconst clone$5 = copy$5;\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nfunction multiply$5(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] * b[0];\n    dst[1] = a[1] * b[1];\n    return dst;\n}\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as mul)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nconst mul$5 = multiply$5;\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nfunction divide$2(a, b, dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = a[0] / b[0];\n    dst[1] = a[1] / b[1];\n    return dst;\n}\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as divide)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nconst div$2 = divide$2;\n/**\n * Creates a random unit vector * scale\n * @param scale - Default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The random vector.\n */\nfunction random$1(scale = 1, dst) {\n    dst = dst || new VecType$2(2);\n    const angle = Math.random() * 2 * Math.PI;\n    dst[0] = Math.cos(angle) * scale;\n    dst[1] = Math.sin(angle) * scale;\n    return dst;\n}\n/**\n * Zero's a vector\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The zeroed vector.\n */\nfunction zero$2(dst) {\n    dst = dst || new VecType$2(2);\n    dst[0] = 0;\n    dst[1] = 0;\n    return dst;\n}\n/**\n * transform Vec2 by 4x4 matrix\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional Vec2 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat4$2(v, m, dst) {\n    dst = dst || new VecType$2(2);\n    const x = v[0];\n    const y = v[1];\n    dst[0] = x * m[0] + y * m[4] + m[12];\n    dst[1] = x * m[1] + y * m[5] + m[13];\n    return dst;\n}\n/**\n * Transforms vec4 by 3x3 matrix\n *\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional Vec2 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat3$1(v, m, dst) {\n    dst = dst || new VecType$2(2);\n    const x = v[0];\n    const y = v[1];\n    dst[0] = m[0] * x + m[4] * y + m[8];\n    dst[1] = m[1] * x + m[5] * y + m[9];\n    return dst;\n}\n\nvar vec2Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create$5,\n    setDefaultType: setDefaultType$6,\n    fromValues: fromValues$3,\n    set: set$5,\n    ceil: ceil$2,\n    floor: floor$2,\n    round: round$2,\n    clamp: clamp$2,\n    add: add$3,\n    addScaled: addScaled$2,\n    angle: angle$2,\n    subtract: subtract$3,\n    sub: sub$3,\n    equalsApproximately: equalsApproximately$5,\n    equals: equals$5,\n    lerp: lerp$3,\n    lerpV: lerpV$2,\n    max: max$2,\n    min: min$2,\n    mulScalar: mulScalar$3,\n    scale: scale$5,\n    divScalar: divScalar$3,\n    inverse: inverse$5,\n    invert: invert$4,\n    cross: cross$1,\n    dot: dot$3,\n    length: length$3,\n    len: len$3,\n    lengthSq: lengthSq$3,\n    lenSq: lenSq$3,\n    distance: distance$2,\n    dist: dist$2,\n    distanceSq: distanceSq$2,\n    distSq: distSq$2,\n    normalize: normalize$3,\n    negate: negate$4,\n    copy: copy$5,\n    clone: clone$5,\n    multiply: multiply$5,\n    mul: mul$5,\n    divide: divide$2,\n    div: div$2,\n    random: random$1,\n    zero: zero$2,\n    transformMat4: transformMat4$2,\n    transformMat3: transformMat3$1\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * 3x3 Matrix math math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new matrix. In other words you can do this\n *\n *     const mat = mat3.translation([1, 2, 3]);  // Creates a new translation matrix\n *\n * or\n *\n *     const mat = mat3.create();\n *     mat3.translation([1, 2, 3], mat);  // Puts translation matrix in mat.\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always save to pass any matrix as the destination. So for example\n *\n *     const mat = mat3.identity();\n *     const trans = mat3.translation([1, 2, 3]);\n *     mat3.multiply(mat, trans, mat);  // Multiplies mat * trans and puts result in mat.\n *\n */\nlet MatType$1 = Float32Array;\n// This mess is because with Mat3 we have 3 unused elements.\n// For Float32Array and Float64Array that's not an issue\n// but for Array it's troublesome\nconst ctorMap = new Map([\n    [Float32Array, () => new Float32Array(12)],\n    [Float64Array, () => new Float64Array(12)],\n    [Array, () => new Array(12).fill(0)],\n]);\nlet newMat3 = ctorMap.get(Float32Array);\n/**\n * Sets the type this library creates for a Mat3\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Mat3\n */\nfunction setDefaultType$5(ctor) {\n    const oldType = MatType$1;\n    MatType$1 = ctor;\n    newMat3 = ctorMap.get(ctor);\n    return oldType;\n}\n/**\n * Create a Mat3 from values\n *\n * Note: Since passing in a raw JavaScript array\n * is valid in all circumstances, if you want to\n * force a JavaScript array into a Mat3's specified type\n * it would be faster to use\n *\n * ```\n * const m = mat3.clone(someJSArray);\n * ```\n *\n * Note: a consequence of the implementation is if your Mat3Type = `Array`\n * instead of `Float32Array` or `Float64Array` then any values you\n * don't pass in will be undefined. Usually this is not an issue since\n * (a) using `Array` is rare and (b) using `mat3.create` is usually used\n * to create a Mat3 to be filled out as in\n *\n * ```\n * const m = mat3.create();\n * mat3.perspective(fov, aspect, near, far, m);\n * ```\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @returns matrix created from values.\n */\nfunction create$4(v0, v1, v2, v3, v4, v5, v6, v7, v8) {\n    const dst = newMat3();\n    // to make the array homogenous\n    dst[3] = 0;\n    dst[7] = 0;\n    dst[11] = 0;\n    if (v0 !== undefined) {\n        dst[0] = v0;\n        if (v1 !== undefined) {\n            dst[1] = v1;\n            if (v2 !== undefined) {\n                dst[2] = v2;\n                if (v3 !== undefined) {\n                    dst[4] = v3;\n                    if (v4 !== undefined) {\n                        dst[5] = v4;\n                        if (v5 !== undefined) {\n                            dst[6] = v5;\n                            if (v6 !== undefined) {\n                                dst[8] = v6;\n                                if (v7 !== undefined) {\n                                    dst[9] = v7;\n                                    if (v8 !== undefined) {\n                                        dst[10] = v8;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return dst;\n}\n/**\n * Sets the values of a Mat3\n * Also see {@link mat3.create} and {@link mat3.copy}\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat3 set from values.\n */\nfunction set$4(v0, v1, v2, v3, v4, v5, v6, v7, v8, dst) {\n    dst = dst || newMat3();\n    dst[0] = v0;\n    dst[1] = v1;\n    dst[2] = v2;\n    dst[3] = 0;\n    dst[4] = v3;\n    dst[5] = v4;\n    dst[6] = v5;\n    dst[7] = 0;\n    dst[8] = v6;\n    dst[9] = v7;\n    dst[10] = v8;\n    dst[11] = 0;\n    return dst;\n}\n/**\n * Creates a Mat3 from the upper left 3x3 part of a Mat4\n * @param m4 - source matrix\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat3 made from m4\n */\nfunction fromMat4(m4, dst) {\n    dst = dst || newMat3();\n    dst[0] = m4[0];\n    dst[1] = m4[1];\n    dst[2] = m4[2];\n    dst[3] = 0;\n    dst[4] = m4[4];\n    dst[5] = m4[5];\n    dst[6] = m4[6];\n    dst[7] = 0;\n    dst[8] = m4[8];\n    dst[9] = m4[9];\n    dst[10] = m4[10];\n    dst[11] = 0;\n    return dst;\n}\n/**\n * Creates a Mat3 rotation matrix from a quaternion\n * @param q - quaternion to create matrix from\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat3 made from q\n */\nfunction fromQuat$1(q, dst) {\n    dst = dst || newMat3();\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const yx = y * x2;\n    const yy = y * y2;\n    const zx = z * x2;\n    const zy = z * y2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    dst[0] = 1 - yy - zz;\n    dst[1] = yx + wz;\n    dst[2] = zx - wy;\n    dst[3] = 0;\n    dst[4] = yx - wz;\n    dst[5] = 1 - xx - zz;\n    dst[6] = zy + wx;\n    dst[7] = 0;\n    dst[8] = zx + wy;\n    dst[9] = zy - wx;\n    dst[10] = 1 - xx - yy;\n    dst[11] = 0;\n    return dst;\n}\n/**\n * Negates a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns -m.\n */\nfunction negate$3(m, dst) {\n    dst = dst || newMat3();\n    dst[0] = -m[0];\n    dst[1] = -m[1];\n    dst[2] = -m[2];\n    dst[4] = -m[4];\n    dst[5] = -m[5];\n    dst[6] = -m[6];\n    dst[8] = -m[8];\n    dst[9] = -m[9];\n    dst[10] = -m[10];\n    return dst;\n}\n/**\n * Copies a matrix. (same as {@link mat3.clone})\n * Also see {@link mat3.create} and {@link mat3.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nfunction copy$4(m, dst) {\n    dst = dst || newMat3();\n    dst[0] = m[0];\n    dst[1] = m[1];\n    dst[2] = m[2];\n    dst[4] = m[4];\n    dst[5] = m[5];\n    dst[6] = m[6];\n    dst[8] = m[8];\n    dst[9] = m[9];\n    dst[10] = m[10];\n    return dst;\n}\n/**\n * Copies a matrix (same as {@link mat3.copy})\n * Also see {@link mat3.create} and {@link mat3.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nconst clone$4 = copy$4;\n/**\n * Check if 2 matrices are approximately equal\n * @param a Operand matrix.\n * @param b Operand matrix.\n * @returns true if matrices are approximately equal\n */\nfunction equalsApproximately$4(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[4] - b[4]) < EPSILON &&\n        Math.abs(a[5] - b[5]) < EPSILON &&\n        Math.abs(a[6] - b[6]) < EPSILON &&\n        Math.abs(a[8] - b[8]) < EPSILON &&\n        Math.abs(a[9] - b[9]) < EPSILON &&\n        Math.abs(a[10] - b[10]) < EPSILON;\n}\n/**\n * Check if 2 matrices are exactly equal\n * @param a Operand matrix.\n * @param b Operand matrix.\n * @returns true if matrices are exactly equal\n */\nfunction equals$4(a, b) {\n    return a[0] === b[0] &&\n        a[1] === b[1] &&\n        a[2] === b[2] &&\n        a[4] === b[4] &&\n        a[5] === b[5] &&\n        a[6] === b[6] &&\n        a[8] === b[8] &&\n        a[9] === b[9] &&\n        a[10] === b[10];\n}\n/**\n * Creates a 3-by-3 identity matrix.\n *\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A 3-by-3 identity matrix.\n */\nfunction identity$2(dst) {\n    dst = dst || newMat3();\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Takes the transpose of a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The transpose of m.\n */\nfunction transpose$1(m, dst) {\n    dst = dst || newMat3();\n    if (dst === m) {\n        let t;\n        // 0 1 2\n        // 4 5 6\n        // 8 9 10\n        t = m[1];\n        m[1] = m[4];\n        m[4] = t;\n        t = m[2];\n        m[2] = m[8];\n        m[8] = t;\n        t = m[6];\n        m[6] = m[9];\n        m[9] = t;\n        return dst;\n    }\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    dst[0] = m00;\n    dst[1] = m10;\n    dst[2] = m20;\n    dst[4] = m01;\n    dst[5] = m11;\n    dst[6] = m21;\n    dst[8] = m02;\n    dst[9] = m12;\n    dst[10] = m22;\n    return dst;\n}\n/**\n * Computes the inverse of a 3-by-3 matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nfunction inverse$4(m, dst) {\n    dst = dst || newMat3();\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const b01 = m22 * m11 - m12 * m21;\n    const b11 = -m22 * m10 + m12 * m20;\n    const b21 = m21 * m10 - m11 * m20;\n    const invDet = 1 / (m00 * b01 + m01 * b11 + m02 * b21);\n    dst[0] = b01 * invDet;\n    dst[1] = (-m22 * m01 + m02 * m21) * invDet;\n    dst[2] = (m12 * m01 - m02 * m11) * invDet;\n    dst[4] = b11 * invDet;\n    dst[5] = (m22 * m00 - m02 * m20) * invDet;\n    dst[6] = (-m12 * m00 + m02 * m10) * invDet;\n    dst[8] = b21 * invDet;\n    dst[9] = (-m21 * m00 + m01 * m20) * invDet;\n    dst[10] = (m11 * m00 - m01 * m10) * invDet;\n    return dst;\n}\n/**\n * Compute the determinant of a matrix\n * @param m - the matrix\n * @returns the determinant\n */\nfunction determinant$1(m) {\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    return m00 * (m11 * m22 - m21 * m12) -\n        m10 * (m01 * m22 - m21 * m02) +\n        m20 * (m01 * m12 - m11 * m02);\n}\n/**\n * Computes the inverse of a 3-by-3 matrix. (same as inverse)\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nconst invert$3 = inverse$4;\n/**\n * Multiplies two 3-by-3 matrices with a on the left and b on the right\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nfunction multiply$4(a, b, dst) {\n    dst = dst || newMat3();\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a10 = a[4 + 0];\n    const a11 = a[4 + 1];\n    const a12 = a[4 + 2];\n    const a20 = a[8 + 0];\n    const a21 = a[8 + 1];\n    const a22 = a[8 + 2];\n    const b00 = b[0];\n    const b01 = b[1];\n    const b02 = b[2];\n    const b10 = b[4 + 0];\n    const b11 = b[4 + 1];\n    const b12 = b[4 + 2];\n    const b20 = b[8 + 0];\n    const b21 = b[8 + 1];\n    const b22 = b[8 + 2];\n    dst[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    dst[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    dst[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    dst[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    dst[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    dst[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    dst[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    dst[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    dst[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    return dst;\n}\n/**\n * Multiplies two 3-by-3 matrices with a on the left and b on the right (same as multiply)\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nconst mul$4 = multiply$4;\n/**\n * Sets the translation component of a 3-by-3 matrix to the given\n * vector.\n * @param a - The matrix.\n * @param v - The vector.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix with translation set.\n */\nfunction setTranslation$1(a, v, dst) {\n    dst = dst || identity$2();\n    if (a !== dst) {\n        dst[0] = a[0];\n        dst[1] = a[1];\n        dst[2] = a[2];\n        dst[4] = a[4];\n        dst[5] = a[5];\n        dst[6] = a[6];\n    }\n    dst[8] = v[0];\n    dst[9] = v[1];\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Returns the translation component of a 3-by-3 matrix as a vector with 3\n * entries.\n * @param m - The matrix.\n * @param dst - vector to hold result. If not passed a new one is created.\n * @returns The translation component of m.\n */\nfunction getTranslation$2(m, dst) {\n    dst = dst || create$5();\n    dst[0] = m[8];\n    dst[1] = m[9];\n    return dst;\n}\n/**\n * Returns an axis of a 3x3 matrix as a vector with 2 entries\n * @param m - The matrix.\n * @param axis - The axis 0 = x, 1 = y,\n * @returns The axis component of m.\n */\nfunction getAxis$2(m, axis, dst) {\n    dst = dst || create$5();\n    const off = axis * 4;\n    dst[0] = m[off + 0];\n    dst[1] = m[off + 1];\n    return dst;\n}\n/**\n * Sets an axis of a 3x3 matrix as a vector with 2 entries\n * @param m - The matrix.\n * @param v - the axis vector\n * @param axis - The axis  0 = x, 1 = y;\n * @param dst - The matrix to set. If not passed a new one is created.\n * @returns The matrix with axis set.\n */\nfunction setAxis$1(m, v, axis, dst) {\n    if (dst !== m) {\n        dst = copy$4(m, dst);\n    }\n    const off = axis * 4;\n    dst[off + 0] = v[0];\n    dst[off + 1] = v[1];\n    return dst;\n}\n/**\n * Returns the scaling component of the matrix\n * @param m - The Matrix\n * @param dst - The vector to set. If not passed a new one is created.\n */\nfunction getScaling$2(m, dst) {\n    dst = dst || create$5();\n    const xx = m[0];\n    const xy = m[1];\n    const yx = m[4];\n    const yy = m[5];\n    dst[0] = Math.sqrt(xx * xx + xy * xy);\n    dst[1] = Math.sqrt(yx * yx + yy * yy);\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which translates by the given vector v.\n * @param v - The vector by which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translation matrix.\n */\nfunction translation$1(v, dst) {\n    dst = dst || newMat3();\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[8] = v[0];\n    dst[9] = v[1];\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Translates the given 3-by-3 matrix by the given vector v.\n * @param m - The matrix.\n * @param v - The vector by which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translated matrix.\n */\nfunction translate$1(m, v, dst) {\n    dst = dst || newMat3();\n    const v0 = v[0];\n    const v1 = v[1];\n    const m00 = m[0];\n    const m01 = m[1];\n    const m02 = m[2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    if (m !== dst) {\n        dst[0] = m00;\n        dst[1] = m01;\n        dst[2] = m02;\n        dst[4] = m10;\n        dst[5] = m11;\n        dst[6] = m12;\n    }\n    dst[8] = m00 * v0 + m10 * v1 + m20;\n    dst[9] = m01 * v0 + m11 * v1 + m21;\n    dst[10] = m02 * v0 + m12 * v1 + m22;\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which rotates  by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotation$1(angleInRadians, dst) {\n    dst = dst || newMat3();\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c;\n    dst[1] = s;\n    dst[2] = 0;\n    dst[4] = -s;\n    dst[5] = c;\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Rotates the given 3-by-3 matrix  by the given angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotate$1(m, angleInRadians, dst) {\n    dst = dst || newMat3();\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c * m00 + s * m10;\n    dst[1] = c * m01 + s * m11;\n    dst[2] = c * m02 + s * m12;\n    dst[4] = c * m10 - s * m00;\n    dst[5] = c * m11 - s * m01;\n    dst[6] = c * m12 - s * m02;\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n    }\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which scales in each dimension by an amount given by\n * the corresponding entry in the given vector; assumes the vector has three\n * entries.\n * @param v - A vector of\n *     2 entries specifying the factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction scaling$1(v, dst) {\n    dst = dst || newMat3();\n    dst[0] = v[0];\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = v[1];\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Scales the given 3-by-3 matrix in each dimension by an amount\n * given by the corresponding entry in the given vector; assumes the vector has\n * three entries.\n * @param m - The matrix to be modified.\n * @param v - A vector of 2 entries specifying the\n *     factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction scale$4(m, v, dst) {\n    dst = dst || newMat3();\n    const v0 = v[0];\n    const v1 = v[1];\n    dst[0] = v0 * m[0 * 4 + 0];\n    dst[1] = v0 * m[0 * 4 + 1];\n    dst[2] = v0 * m[0 * 4 + 2];\n    dst[4] = v1 * m[1 * 4 + 0];\n    dst[5] = v1 * m[1 * 4 + 1];\n    dst[6] = v1 * m[1 * 4 + 2];\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n    }\n    return dst;\n}\n/**\n * Creates a 3-by-3 matrix which scales uniformly in each dimension\n * @param s - Amount to scale\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction uniformScaling$1(s, dst) {\n    dst = dst || newMat3();\n    dst[0] = s;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[4] = 0;\n    dst[5] = s;\n    dst[6] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    return dst;\n}\n/**\n * Scales the given 3-by-3 matrix in each dimension by an amount\n * given.\n * @param m - The matrix to be modified.\n * @param s - Amount to scale.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction uniformScale$1(m, s, dst) {\n    dst = dst || newMat3();\n    dst[0] = s * m[0 * 4 + 0];\n    dst[1] = s * m[0 * 4 + 1];\n    dst[2] = s * m[0 * 4 + 2];\n    dst[4] = s * m[1 * 4 + 0];\n    dst[5] = s * m[1 * 4 + 1];\n    dst[6] = s * m[1 * 4 + 2];\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n    }\n    return dst;\n}\n\nvar mat3Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    setDefaultType: setDefaultType$5,\n    create: create$4,\n    set: set$4,\n    fromMat4: fromMat4,\n    fromQuat: fromQuat$1,\n    negate: negate$3,\n    copy: copy$4,\n    clone: clone$4,\n    equalsApproximately: equalsApproximately$4,\n    equals: equals$4,\n    identity: identity$2,\n    transpose: transpose$1,\n    inverse: inverse$4,\n    determinant: determinant$1,\n    invert: invert$3,\n    multiply: multiply$4,\n    mul: mul$4,\n    setTranslation: setTranslation$1,\n    getTranslation: getTranslation$2,\n    getAxis: getAxis$2,\n    setAxis: setAxis$1,\n    getScaling: getScaling$2,\n    translation: translation$1,\n    translate: translate$1,\n    rotation: rotation$1,\n    rotate: rotate$1,\n    scaling: scaling$1,\n    scale: scale$4,\n    uniformScaling: uniformScaling$1,\n    uniformScale: uniformScale$1\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Vec3 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new `Vec3`. In other words you can do this\n *\n *     const v = vec3.cross(v1, v2);  // Creates a new Vec3 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = vec3.create();\n *     vec3.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     vec3.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet VecType$1 = Float32Array;\n/**\n * Sets the type this library creates for a Vec3\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Vec3\n */\nfunction setDefaultType$4(ctor) {\n    const oldType = VecType$1;\n    VecType$1 = ctor;\n    return oldType;\n}\n/**\n * Creates a vec3; may be called with x, y, z to set initial values.\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @returns the created vector\n */\nfunction create$3(x, y, z) {\n    const dst = new VecType$1(3);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n            if (z !== undefined) {\n                dst[2] = z;\n            }\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a vec3; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @returns the created vector\n */\nconst fromValues$2 = create$3;\n/**\n * Sets the values of a Vec3\n * Also see {@link vec3.create} and {@link vec3.copy}\n *\n * @param x first value\n * @param y second value\n * @param z third value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set$3(x, y, z, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = x;\n    dst[1] = y;\n    dst[2] = z;\n    return dst;\n}\n/**\n * Applies Math.ceil to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the ceil of each element of v.\n */\nfunction ceil$1(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.ceil(v[0]);\n    dst[1] = Math.ceil(v[1]);\n    dst[2] = Math.ceil(v[2]);\n    return dst;\n}\n/**\n * Applies Math.floor to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the floor of each element of v.\n */\nfunction floor$1(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.floor(v[0]);\n    dst[1] = Math.floor(v[1]);\n    dst[2] = Math.floor(v[2]);\n    return dst;\n}\n/**\n * Applies Math.round to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the round of each element of v.\n */\nfunction round$1(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.round(v[0]);\n    dst[1] = Math.round(v[1]);\n    dst[2] = Math.round(v[2]);\n    return dst;\n}\n/**\n * Clamp each element of vector between min and max\n * @param v - Operand vector.\n * @param max - Min value, default 0\n * @param min - Max value, default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that the clamped value of each element of v.\n */\nfunction clamp$1(v, min = 0, max = 1, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.min(max, Math.max(min, v[0]));\n    dst[1] = Math.min(max, Math.max(min, v[1]));\n    dst[2] = Math.min(max, Math.max(min, v[2]));\n    return dst;\n}\n/**\n * Adds two vectors; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a and b.\n */\nfunction add$2(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    dst[2] = a[2] + b[2];\n    return dst;\n}\n/**\n * Adds two vectors, scaling the 2nd; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param scale - Amount to scale b\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a + b * scale.\n */\nfunction addScaled$1(a, b, scale, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + b[0] * scale;\n    dst[1] = a[1] + b[1] * scale;\n    dst[2] = a[2] + b[2] * scale;\n    return dst;\n}\n/**\n * Returns the angle in radians between two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns The angle in radians between the 2 vectors.\n */\nfunction angle$1(a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const bx = a[0];\n    const by = a[1];\n    const bz = a[2];\n    const mag1 = Math.sqrt(ax * ax + ay * ay + az * az);\n    const mag2 = Math.sqrt(bx * bx + by * by + bz * bz);\n    const mag = mag1 * mag2;\n    const cosine = mag && dot$2(a, b) / mag;\n    return Math.acos(cosine);\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nfunction subtract$2(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    dst[2] = a[2] - b[2];\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nconst sub$2 = subtract$2;\n/**\n * Check if 2 vectors are approximately equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are approximately equal\n */\nfunction equalsApproximately$3(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON;\n}\n/**\n * Check if 2 vectors are exactly equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are exactly equal\n */\nfunction equals$3(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficient.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp$2(a, b, t, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    dst[2] = a[2] + t * (b[2] - a[2]);\n    return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient vector t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficients vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns the linear interpolated result.\n */\nfunction lerpV$1(a, b, t, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] + t[0] * (b[0] - a[0]);\n    dst[1] = a[1] + t[1] * (b[1] - a[1]);\n    dst[2] = a[2] + t[2] * (b[2] - a[2]);\n    return dst;\n}\n/**\n * Return max values of two vectors.\n * Given vectors a and b returns\n * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The max components vector.\n */\nfunction max$1(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.max(a[0], b[0]);\n    dst[1] = Math.max(a[1], b[1]);\n    dst[2] = Math.max(a[2], b[2]);\n    return dst;\n}\n/**\n * Return min values of two vectors.\n * Given vectors a and b returns\n * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The min components vector.\n */\nfunction min$1(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = Math.min(a[0], b[0]);\n    dst[1] = Math.min(a[1], b[1]);\n    dst[2] = Math.min(a[2], b[2]);\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction mulScalar$2(v, k, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    dst[2] = v[2] * k;\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar. (same as mulScalar)\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nconst scale$3 = mulScalar$2;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction divScalar$2(v, k, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    dst[2] = v[2] / k;\n    return dst;\n}\n/**\n * Inverse a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nfunction inverse$3(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = 1 / v[0];\n    dst[1] = 1 / v[1];\n    dst[2] = 1 / v[2];\n    return dst;\n}\n/**\n * Invert a vector. (same as inverse)\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nconst invert$2 = inverse$3;\n/**\n * Computes the cross product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of a cross b.\n */\nfunction cross(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    const t1 = a[2] * b[0] - a[0] * b[2];\n    const t2 = a[0] * b[1] - a[1] * b[0];\n    dst[0] = a[1] * b[2] - a[2] * b[1];\n    dst[1] = t1;\n    dst[2] = t2;\n    return dst;\n}\n/**\n * Computes the dot product of two vectors; assumes both vectors have\n * three entries.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns dot product\n */\nfunction dot$2(a, b) {\n    return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]);\n}\n/**\n * Computes the length of vector\n * @param v - vector.\n * @returns length of vector.\n */\nfunction length$2(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    return Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2);\n}\n/**\n * Computes the length of vector (same as length)\n * @param v - vector.\n * @returns length of vector.\n */\nconst len$2 = length$2;\n/**\n * Computes the square of the length of vector\n * @param v - vector.\n * @returns square of the length of vector.\n */\nfunction lengthSq$2(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    return v0 * v0 + v1 * v1 + v2 * v2;\n}\n/**\n * Computes the square of the length of vector (same as lengthSq)\n * @param v - vector.\n * @returns square of the length of vector.\n */\nconst lenSq$2 = lengthSq$2;\n/**\n * Computes the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nfunction distance$1(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\n/**\n * Computes the distance between 2 points (same as distance)\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nconst dist$1 = distance$1;\n/**\n * Computes the square of the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nfunction distanceSq$1(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    return dx * dx + dy * dy + dz * dz;\n}\n/**\n * Computes the square of the distance between 2 points (same as distanceSq)\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nconst distSq$1 = distanceSq$1;\n/**\n * Divides a vector by its Euclidean length and returns the quotient.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The normalized vector.\n */\nfunction normalize$2(v, dst) {\n    dst = dst || new VecType$1(3);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const len = Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n        dst[2] = v2 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n    }\n    return dst;\n}\n/**\n * Negates a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns -v.\n */\nfunction negate$2(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = -v[0];\n    dst[1] = -v[1];\n    dst[2] = -v[2];\n    return dst;\n}\n/**\n * Copies a vector. (same as {@link vec3.clone})\n * Also see {@link vec3.create} and {@link vec3.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nfunction copy$3(v, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = v[0];\n    dst[1] = v[1];\n    dst[2] = v[2];\n    return dst;\n}\n/**\n * Clones a vector. (same as {@link vec3.copy})\n * Also see {@link vec3.create} and {@link vec3.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nconst clone$3 = copy$3;\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nfunction multiply$3(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] * b[0];\n    dst[1] = a[1] * b[1];\n    dst[2] = a[2] * b[2];\n    return dst;\n}\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as mul)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nconst mul$3 = multiply$3;\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nfunction divide$1(a, b, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = a[0] / b[0];\n    dst[1] = a[1] / b[1];\n    dst[2] = a[2] / b[2];\n    return dst;\n}\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as divide)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nconst div$1 = divide$1;\n/**\n * Creates a random vector\n * @param scale - Default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The random vector.\n */\nfunction random(scale = 1, dst) {\n    dst = dst || new VecType$1(3);\n    const angle = Math.random() * 2 * Math.PI;\n    const z = Math.random() * 2 - 1;\n    const zScale = Math.sqrt(1 - z * z) * scale;\n    dst[0] = Math.cos(angle) * zScale;\n    dst[1] = Math.sin(angle) * zScale;\n    dst[2] = z * scale;\n    return dst;\n}\n/**\n * Zero's a vector\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The zeroed vector.\n */\nfunction zero$1(dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = 0;\n    return dst;\n}\n/**\n * transform vec3 by 4x4 matrix\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional vec3 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat4$1(v, m, dst) {\n    dst = dst || new VecType$1(3);\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const w = (m[3] * x + m[7] * y + m[11] * z + m[15]) || 1;\n    dst[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    dst[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    dst[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return dst;\n}\n/**\n * Transform vec4 by upper 3x3 matrix inside 4x4 matrix.\n * @param v - The direction.\n * @param m - The matrix.\n * @param dst - optional Vec3 to store result. If not passed a new one is created.\n * @returns The transformed vector.\n */\nfunction transformMat4Upper3x3(v, m, dst) {\n    dst = dst || new VecType$1(3);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    dst[0] = v0 * m[0 * 4 + 0] + v1 * m[1 * 4 + 0] + v2 * m[2 * 4 + 0];\n    dst[1] = v0 * m[0 * 4 + 1] + v1 * m[1 * 4 + 1] + v2 * m[2 * 4 + 1];\n    dst[2] = v0 * m[0 * 4 + 2] + v1 * m[1 * 4 + 2] + v2 * m[2 * 4 + 2];\n    return dst;\n}\n/**\n * Transforms vec3 by 3x3 matrix\n *\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional vec3 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat3(v, m, dst) {\n    dst = dst || new VecType$1(3);\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    dst[0] = x * m[0] + y * m[4] + z * m[8];\n    dst[1] = x * m[1] + y * m[5] + z * m[9];\n    dst[2] = x * m[2] + y * m[6] + z * m[10];\n    return dst;\n}\n/**\n * Transforms vec3 by Quaternion\n * @param v - the vector to transform\n * @param q - the quaternion to transform by\n * @param dst - optional vec3 to store result. If not passed a new one is created.\n * @returns the transformed\n */\nfunction transformQuat(v, q, dst) {\n    dst = dst || new VecType$1(3);\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const w2 = q[3] * 2;\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const uvX = qy * z - qz * y;\n    const uvY = qz * x - qx * z;\n    const uvZ = qx * y - qy * x;\n    dst[0] = x + uvX * w2 + (qy * uvZ - qz * uvY) * 2;\n    dst[1] = y + uvY * w2 + (qz * uvX - qx * uvZ) * 2;\n    dst[2] = z + uvZ * w2 + (qx * uvY - qy * uvX) * 2;\n    return dst;\n}\n/**\n * Returns the translation component of a 4-by-4 matrix as a vector with 3\n * entries.\n * @param m - The matrix.\n * @param dst - vector to hold result. If not passed a new one is created.\n * @returns The translation component of m.\n */\nfunction getTranslation$1(m, dst) {\n    dst = dst || new VecType$1(3);\n    dst[0] = m[12];\n    dst[1] = m[13];\n    dst[2] = m[14];\n    return dst;\n}\n/**\n * Returns an axis of a 4x4 matrix as a vector with 3 entries\n * @param m - The matrix.\n * @param axis - The axis 0 = x, 1 = y, 2 = z;\n * @returns The axis component of m.\n */\nfunction getAxis$1(m, axis, dst) {\n    dst = dst || new VecType$1(3);\n    const off = axis * 4;\n    dst[0] = m[off + 0];\n    dst[1] = m[off + 1];\n    dst[2] = m[off + 2];\n    return dst;\n}\n/**\n * Returns the scaling component of the matrix\n * @param m - The Matrix\n * @param dst - The vector to set. If not passed a new one is created.\n */\nfunction getScaling$1(m, dst) {\n    dst = dst || new VecType$1(3);\n    const xx = m[0];\n    const xy = m[1];\n    const xz = m[2];\n    const yx = m[4];\n    const yy = m[5];\n    const yz = m[6];\n    const zx = m[8];\n    const zy = m[9];\n    const zz = m[10];\n    dst[0] = Math.sqrt(xx * xx + xy * xy + xz * xz);\n    dst[1] = Math.sqrt(yx * yx + yy * yy + yz * yz);\n    dst[2] = Math.sqrt(zx * zx + zy * zy + zz * zz);\n    return dst;\n}\n\nvar vec3Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create$3,\n    setDefaultType: setDefaultType$4,\n    fromValues: fromValues$2,\n    set: set$3,\n    ceil: ceil$1,\n    floor: floor$1,\n    round: round$1,\n    clamp: clamp$1,\n    add: add$2,\n    addScaled: addScaled$1,\n    angle: angle$1,\n    subtract: subtract$2,\n    sub: sub$2,\n    equalsApproximately: equalsApproximately$3,\n    equals: equals$3,\n    lerp: lerp$2,\n    lerpV: lerpV$1,\n    max: max$1,\n    min: min$1,\n    mulScalar: mulScalar$2,\n    scale: scale$3,\n    divScalar: divScalar$2,\n    inverse: inverse$3,\n    invert: invert$2,\n    cross: cross,\n    dot: dot$2,\n    length: length$2,\n    len: len$2,\n    lengthSq: lengthSq$2,\n    lenSq: lenSq$2,\n    distance: distance$1,\n    dist: dist$1,\n    distanceSq: distanceSq$1,\n    distSq: distSq$1,\n    normalize: normalize$2,\n    negate: negate$2,\n    copy: copy$3,\n    clone: clone$3,\n    multiply: multiply$3,\n    mul: mul$3,\n    divide: divide$1,\n    div: div$1,\n    random: random,\n    zero: zero$1,\n    transformMat4: transformMat4$1,\n    transformMat4Upper3x3: transformMat4Upper3x3,\n    transformMat3: transformMat3,\n    transformQuat: transformQuat,\n    getTranslation: getTranslation$1,\n    getAxis: getAxis$1,\n    getScaling: getScaling$1\n});\n\n/**\n * 4x4 Matrix math math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new matrix. In other words you can do this\n *\n *     const mat = mat4.translation([1, 2, 3]);  // Creates a new translation matrix\n *\n * or\n *\n *     const mat = mat4.create();\n *     mat4.translation([1, 2, 3], mat);  // Puts translation matrix in mat.\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always save to pass any matrix as the destination. So for example\n *\n *     const mat = mat4.identity();\n *     const trans = mat4.translation([1, 2, 3]);\n *     mat4.multiply(mat, trans, mat);  // Multiplies mat * trans and puts result in mat.\n *\n */\nlet MatType = Float32Array;\n/**\n * Sets the type this library creates for a Mat4\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Mat4\n */\nfunction setDefaultType$3(ctor) {\n    const oldType = MatType;\n    MatType = ctor;\n    return oldType;\n}\n/**\n * Create a Mat4 from values\n *\n * Note: Since passing in a raw JavaScript array\n * is valid in all circumstances, if you want to\n * force a JavaScript array into a Mat4's specified type\n * it would be faster to use\n *\n * ```\n * const m = mat4.clone(someJSArray);\n * ```\n *\n * Note: a consequence of the implementation is if your Mat4Type = `Array`\n * instead of `Float32Array` or `Float64Array` then any values you\n * don't pass in will be undefined. Usually this is not an issue since\n * (a) using `Array` is rare and (b) using `mat4.create` is usually used\n * to create a Mat4 to be filled out as in\n *\n * ```\n * const m = mat4.create();\n * mat4.perspective(fov, aspect, near, far, m);\n * ```\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @param v9 - value for element 9\n * @param v10 - value for element 10\n * @param v11 - value for element 11\n * @param v12 - value for element 12\n * @param v13 - value for element 13\n * @param v14 - value for element 14\n * @param v15 - value for element 15\n * @returns created from values.\n */\nfunction create$2(v0, v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14, v15) {\n    const dst = new MatType(16);\n    if (v0 !== undefined) {\n        dst[0] = v0;\n        if (v1 !== undefined) {\n            dst[1] = v1;\n            if (v2 !== undefined) {\n                dst[2] = v2;\n                if (v3 !== undefined) {\n                    dst[3] = v3;\n                    if (v4 !== undefined) {\n                        dst[4] = v4;\n                        if (v5 !== undefined) {\n                            dst[5] = v5;\n                            if (v6 !== undefined) {\n                                dst[6] = v6;\n                                if (v7 !== undefined) {\n                                    dst[7] = v7;\n                                    if (v8 !== undefined) {\n                                        dst[8] = v8;\n                                        if (v9 !== undefined) {\n                                            dst[9] = v9;\n                                            if (v10 !== undefined) {\n                                                dst[10] = v10;\n                                                if (v11 !== undefined) {\n                                                    dst[11] = v11;\n                                                    if (v12 !== undefined) {\n                                                        dst[12] = v12;\n                                                        if (v13 !== undefined) {\n                                                            dst[13] = v13;\n                                                            if (v14 !== undefined) {\n                                                                dst[14] = v14;\n                                                                if (v15 !== undefined) {\n                                                                    dst[15] = v15;\n                                                                }\n                                                            }\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return dst;\n}\n/**\n * Sets the values of a Mat4\n * Also see {@link mat4.create} and {@link mat4.copy}\n *\n * @param v0 - value for element 0\n * @param v1 - value for element 1\n * @param v2 - value for element 2\n * @param v3 - value for element 3\n * @param v4 - value for element 4\n * @param v5 - value for element 5\n * @param v6 - value for element 6\n * @param v7 - value for element 7\n * @param v8 - value for element 8\n * @param v9 - value for element 9\n * @param v10 - value for element 10\n * @param v11 - value for element 11\n * @param v12 - value for element 12\n * @param v13 - value for element 13\n * @param v14 - value for element 14\n * @param v15 - value for element 15\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat4 created from values.\n */\nfunction set$2(v0, v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13, v14, v15, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = v0;\n    dst[1] = v1;\n    dst[2] = v2;\n    dst[3] = v3;\n    dst[4] = v4;\n    dst[5] = v5;\n    dst[6] = v6;\n    dst[7] = v7;\n    dst[8] = v8;\n    dst[9] = v9;\n    dst[10] = v10;\n    dst[11] = v11;\n    dst[12] = v12;\n    dst[13] = v13;\n    dst[14] = v14;\n    dst[15] = v15;\n    return dst;\n}\n/**\n * Creates a Mat4 from a Mat3\n * @param m3 - source matrix\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat4 made from m3\n */\nfunction fromMat3(m3, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = m3[0];\n    dst[1] = m3[1];\n    dst[2] = m3[2];\n    dst[3] = 0;\n    dst[4] = m3[4];\n    dst[5] = m3[5];\n    dst[6] = m3[6];\n    dst[7] = 0;\n    dst[8] = m3[8];\n    dst[9] = m3[9];\n    dst[10] = m3[10];\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Creates a Mat4 rotation matrix from a quaternion\n * @param q - quaternion to create matrix from\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns Mat4 made from q\n */\nfunction fromQuat(q, dst) {\n    dst = dst || new MatType(16);\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const yx = y * x2;\n    const yy = y * y2;\n    const zx = z * x2;\n    const zy = z * y2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    dst[0] = 1 - yy - zz;\n    dst[1] = yx + wz;\n    dst[2] = zx - wy;\n    dst[3] = 0;\n    dst[4] = yx - wz;\n    dst[5] = 1 - xx - zz;\n    dst[6] = zy + wx;\n    dst[7] = 0;\n    dst[8] = zx + wy;\n    dst[9] = zy - wx;\n    dst[10] = 1 - xx - yy;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Negates a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns -m.\n */\nfunction negate$1(m, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = -m[0];\n    dst[1] = -m[1];\n    dst[2] = -m[2];\n    dst[3] = -m[3];\n    dst[4] = -m[4];\n    dst[5] = -m[5];\n    dst[6] = -m[6];\n    dst[7] = -m[7];\n    dst[8] = -m[8];\n    dst[9] = -m[9];\n    dst[10] = -m[10];\n    dst[11] = -m[11];\n    dst[12] = -m[12];\n    dst[13] = -m[13];\n    dst[14] = -m[14];\n    dst[15] = -m[15];\n    return dst;\n}\n/**\n * Copies a matrix. (same as {@link mat4.clone})\n * Also see {@link mat4.create} and {@link mat4.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nfunction copy$2(m, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = m[0];\n    dst[1] = m[1];\n    dst[2] = m[2];\n    dst[3] = m[3];\n    dst[4] = m[4];\n    dst[5] = m[5];\n    dst[6] = m[6];\n    dst[7] = m[7];\n    dst[8] = m[8];\n    dst[9] = m[9];\n    dst[10] = m[10];\n    dst[11] = m[11];\n    dst[12] = m[12];\n    dst[13] = m[13];\n    dst[14] = m[14];\n    dst[15] = m[15];\n    return dst;\n}\n/**\n * Copies a matrix (same as {@link mat4.copy})\n * Also see {@link mat4.create} and {@link mat4.set}\n * @param m - The matrix.\n * @param dst - The matrix. If not passed a new one is created.\n * @returns A copy of m.\n */\nconst clone$2 = copy$2;\n/**\n * Check if 2 matrices are approximately equal\n * @param a - Operand matrix.\n * @param b - Operand matrix.\n * @returns true if matrices are approximately equal\n */\nfunction equalsApproximately$2(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[3] - b[3]) < EPSILON &&\n        Math.abs(a[4] - b[4]) < EPSILON &&\n        Math.abs(a[5] - b[5]) < EPSILON &&\n        Math.abs(a[6] - b[6]) < EPSILON &&\n        Math.abs(a[7] - b[7]) < EPSILON &&\n        Math.abs(a[8] - b[8]) < EPSILON &&\n        Math.abs(a[9] - b[9]) < EPSILON &&\n        Math.abs(a[10] - b[10]) < EPSILON &&\n        Math.abs(a[11] - b[11]) < EPSILON &&\n        Math.abs(a[12] - b[12]) < EPSILON &&\n        Math.abs(a[13] - b[13]) < EPSILON &&\n        Math.abs(a[14] - b[14]) < EPSILON &&\n        Math.abs(a[15] - b[15]) < EPSILON;\n}\n/**\n * Check if 2 matrices are exactly equal\n * @param a - Operand matrix.\n * @param b - Operand matrix.\n * @returns true if matrices are exactly equal\n */\nfunction equals$2(a, b) {\n    return a[0] === b[0] &&\n        a[1] === b[1] &&\n        a[2] === b[2] &&\n        a[3] === b[3] &&\n        a[4] === b[4] &&\n        a[5] === b[5] &&\n        a[6] === b[6] &&\n        a[7] === b[7] &&\n        a[8] === b[8] &&\n        a[9] === b[9] &&\n        a[10] === b[10] &&\n        a[11] === b[11] &&\n        a[12] === b[12] &&\n        a[13] === b[13] &&\n        a[14] === b[14] &&\n        a[15] === b[15];\n}\n/**\n * Creates a 4-by-4 identity matrix.\n *\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A 4-by-4 identity matrix.\n */\nfunction identity$1(dst) {\n    dst = dst || new MatType(16);\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Takes the transpose of a matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The transpose of m.\n */\nfunction transpose(m, dst) {\n    dst = dst || new MatType(16);\n    if (dst === m) {\n        let t;\n        t = m[1];\n        m[1] = m[4];\n        m[4] = t;\n        t = m[2];\n        m[2] = m[8];\n        m[8] = t;\n        t = m[3];\n        m[3] = m[12];\n        m[12] = t;\n        t = m[6];\n        m[6] = m[9];\n        m[9] = t;\n        t = m[7];\n        m[7] = m[13];\n        m[13] = t;\n        t = m[11];\n        m[11] = m[14];\n        m[14] = t;\n        return dst;\n    }\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    dst[0] = m00;\n    dst[1] = m10;\n    dst[2] = m20;\n    dst[3] = m30;\n    dst[4] = m01;\n    dst[5] = m11;\n    dst[6] = m21;\n    dst[7] = m31;\n    dst[8] = m02;\n    dst[9] = m12;\n    dst[10] = m22;\n    dst[11] = m32;\n    dst[12] = m03;\n    dst[13] = m13;\n    dst[14] = m23;\n    dst[15] = m33;\n    return dst;\n}\n/**\n * Computes the inverse of a 4-by-4 matrix.\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nfunction inverse$2(m, dst) {\n    dst = dst || new MatType(16);\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    const tmp0 = m22 * m33;\n    const tmp1 = m32 * m23;\n    const tmp2 = m12 * m33;\n    const tmp3 = m32 * m13;\n    const tmp4 = m12 * m23;\n    const tmp5 = m22 * m13;\n    const tmp6 = m02 * m33;\n    const tmp7 = m32 * m03;\n    const tmp8 = m02 * m23;\n    const tmp9 = m22 * m03;\n    const tmp10 = m02 * m13;\n    const tmp11 = m12 * m03;\n    const tmp12 = m20 * m31;\n    const tmp13 = m30 * m21;\n    const tmp14 = m10 * m31;\n    const tmp15 = m30 * m11;\n    const tmp16 = m10 * m21;\n    const tmp17 = m20 * m11;\n    const tmp18 = m00 * m31;\n    const tmp19 = m30 * m01;\n    const tmp20 = m00 * m21;\n    const tmp21 = m20 * m01;\n    const tmp22 = m00 * m11;\n    const tmp23 = m10 * m01;\n    const t0 = (tmp0 * m11 + tmp3 * m21 + tmp4 * m31) -\n        (tmp1 * m11 + tmp2 * m21 + tmp5 * m31);\n    const t1 = (tmp1 * m01 + tmp6 * m21 + tmp9 * m31) -\n        (tmp0 * m01 + tmp7 * m21 + tmp8 * m31);\n    const t2 = (tmp2 * m01 + tmp7 * m11 + tmp10 * m31) -\n        (tmp3 * m01 + tmp6 * m11 + tmp11 * m31);\n    const t3 = (tmp5 * m01 + tmp8 * m11 + tmp11 * m21) -\n        (tmp4 * m01 + tmp9 * m11 + tmp10 * m21);\n    const d = 1 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\n    dst[0] = d * t0;\n    dst[1] = d * t1;\n    dst[2] = d * t2;\n    dst[3] = d * t3;\n    dst[4] = d * ((tmp1 * m10 + tmp2 * m20 + tmp5 * m30) -\n        (tmp0 * m10 + tmp3 * m20 + tmp4 * m30));\n    dst[5] = d * ((tmp0 * m00 + tmp7 * m20 + tmp8 * m30) -\n        (tmp1 * m00 + tmp6 * m20 + tmp9 * m30));\n    dst[6] = d * ((tmp3 * m00 + tmp6 * m10 + tmp11 * m30) -\n        (tmp2 * m00 + tmp7 * m10 + tmp10 * m30));\n    dst[7] = d * ((tmp4 * m00 + tmp9 * m10 + tmp10 * m20) -\n        (tmp5 * m00 + tmp8 * m10 + tmp11 * m20));\n    dst[8] = d * ((tmp12 * m13 + tmp15 * m23 + tmp16 * m33) -\n        (tmp13 * m13 + tmp14 * m23 + tmp17 * m33));\n    dst[9] = d * ((tmp13 * m03 + tmp18 * m23 + tmp21 * m33) -\n        (tmp12 * m03 + tmp19 * m23 + tmp20 * m33));\n    dst[10] = d * ((tmp14 * m03 + tmp19 * m13 + tmp22 * m33) -\n        (tmp15 * m03 + tmp18 * m13 + tmp23 * m33));\n    dst[11] = d * ((tmp17 * m03 + tmp20 * m13 + tmp23 * m23) -\n        (tmp16 * m03 + tmp21 * m13 + tmp22 * m23));\n    dst[12] = d * ((tmp14 * m22 + tmp17 * m32 + tmp13 * m12) -\n        (tmp16 * m32 + tmp12 * m12 + tmp15 * m22));\n    dst[13] = d * ((tmp20 * m32 + tmp12 * m02 + tmp19 * m22) -\n        (tmp18 * m22 + tmp21 * m32 + tmp13 * m02));\n    dst[14] = d * ((tmp18 * m12 + tmp23 * m32 + tmp15 * m02) -\n        (tmp22 * m32 + tmp14 * m02 + tmp19 * m12));\n    dst[15] = d * ((tmp22 * m22 + tmp16 * m02 + tmp21 * m12) -\n        (tmp20 * m12 + tmp23 * m22 + tmp17 * m02));\n    return dst;\n}\n/**\n * Compute the determinant of a matrix\n * @param m - the matrix\n * @returns the determinant\n */\nfunction determinant(m) {\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    const tmp0 = m22 * m33;\n    const tmp1 = m32 * m23;\n    const tmp2 = m12 * m33;\n    const tmp3 = m32 * m13;\n    const tmp4 = m12 * m23;\n    const tmp5 = m22 * m13;\n    const tmp6 = m02 * m33;\n    const tmp7 = m32 * m03;\n    const tmp8 = m02 * m23;\n    const tmp9 = m22 * m03;\n    const tmp10 = m02 * m13;\n    const tmp11 = m12 * m03;\n    const t0 = (tmp0 * m11 + tmp3 * m21 + tmp4 * m31) -\n        (tmp1 * m11 + tmp2 * m21 + tmp5 * m31);\n    const t1 = (tmp1 * m01 + tmp6 * m21 + tmp9 * m31) -\n        (tmp0 * m01 + tmp7 * m21 + tmp8 * m31);\n    const t2 = (tmp2 * m01 + tmp7 * m11 + tmp10 * m31) -\n        (tmp3 * m01 + tmp6 * m11 + tmp11 * m31);\n    const t3 = (tmp5 * m01 + tmp8 * m11 + tmp11 * m21) -\n        (tmp4 * m01 + tmp9 * m11 + tmp10 * m21);\n    return m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3;\n}\n/**\n * Computes the inverse of a 4-by-4 matrix. (same as inverse)\n * @param m - The matrix.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The inverse of m.\n */\nconst invert$1 = inverse$2;\n/**\n * Multiplies two 4-by-4 matrices with a on the left and b on the right\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nfunction multiply$2(a, b, dst) {\n    dst = dst || new MatType(16);\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4 + 0];\n    const a11 = a[4 + 1];\n    const a12 = a[4 + 2];\n    const a13 = a[4 + 3];\n    const a20 = a[8 + 0];\n    const a21 = a[8 + 1];\n    const a22 = a[8 + 2];\n    const a23 = a[8 + 3];\n    const a30 = a[12 + 0];\n    const a31 = a[12 + 1];\n    const a32 = a[12 + 2];\n    const a33 = a[12 + 3];\n    const b00 = b[0];\n    const b01 = b[1];\n    const b02 = b[2];\n    const b03 = b[3];\n    const b10 = b[4 + 0];\n    const b11 = b[4 + 1];\n    const b12 = b[4 + 2];\n    const b13 = b[4 + 3];\n    const b20 = b[8 + 0];\n    const b21 = b[8 + 1];\n    const b22 = b[8 + 2];\n    const b23 = b[8 + 3];\n    const b30 = b[12 + 0];\n    const b31 = b[12 + 1];\n    const b32 = b[12 + 2];\n    const b33 = b[12 + 3];\n    dst[0] = a00 * b00 + a10 * b01 + a20 * b02 + a30 * b03;\n    dst[1] = a01 * b00 + a11 * b01 + a21 * b02 + a31 * b03;\n    dst[2] = a02 * b00 + a12 * b01 + a22 * b02 + a32 * b03;\n    dst[3] = a03 * b00 + a13 * b01 + a23 * b02 + a33 * b03;\n    dst[4] = a00 * b10 + a10 * b11 + a20 * b12 + a30 * b13;\n    dst[5] = a01 * b10 + a11 * b11 + a21 * b12 + a31 * b13;\n    dst[6] = a02 * b10 + a12 * b11 + a22 * b12 + a32 * b13;\n    dst[7] = a03 * b10 + a13 * b11 + a23 * b12 + a33 * b13;\n    dst[8] = a00 * b20 + a10 * b21 + a20 * b22 + a30 * b23;\n    dst[9] = a01 * b20 + a11 * b21 + a21 * b22 + a31 * b23;\n    dst[10] = a02 * b20 + a12 * b21 + a22 * b22 + a32 * b23;\n    dst[11] = a03 * b20 + a13 * b21 + a23 * b22 + a33 * b23;\n    dst[12] = a00 * b30 + a10 * b31 + a20 * b32 + a30 * b33;\n    dst[13] = a01 * b30 + a11 * b31 + a21 * b32 + a31 * b33;\n    dst[14] = a02 * b30 + a12 * b31 + a22 * b32 + a32 * b33;\n    dst[15] = a03 * b30 + a13 * b31 + a23 * b32 + a33 * b33;\n    return dst;\n}\n/**\n * Multiplies two 4-by-4 matrices with a on the left and b on the right (same as multiply)\n * @param a - The matrix on the left.\n * @param b - The matrix on the right.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix product of a and b.\n */\nconst mul$2 = multiply$2;\n/**\n * Sets the translation component of a 4-by-4 matrix to the given\n * vector.\n * @param a - The matrix.\n * @param v - The vector.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The matrix with translation set.\n */\nfunction setTranslation(a, v, dst) {\n    dst = dst || identity$1();\n    if (a !== dst) {\n        dst[0] = a[0];\n        dst[1] = a[1];\n        dst[2] = a[2];\n        dst[3] = a[3];\n        dst[4] = a[4];\n        dst[5] = a[5];\n        dst[6] = a[6];\n        dst[7] = a[7];\n        dst[8] = a[8];\n        dst[9] = a[9];\n        dst[10] = a[10];\n        dst[11] = a[11];\n    }\n    dst[12] = v[0];\n    dst[13] = v[1];\n    dst[14] = v[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Returns the translation component of a 4-by-4 matrix as a vector with 3\n * entries.\n * @param m - The matrix.\n * @param dst - vector to hold result. If not passed a new one is created.\n * @returns The translation component of m.\n */\nfunction getTranslation(m, dst) {\n    dst = dst || create$3();\n    dst[0] = m[12];\n    dst[1] = m[13];\n    dst[2] = m[14];\n    return dst;\n}\n/**\n * Returns an axis of a 4x4 matrix as a vector with 3 entries\n * @param m - The matrix.\n * @param axis - The axis 0 = x, 1 = y, 2 = z;\n * @returns The axis component of m.\n */\nfunction getAxis(m, axis, dst) {\n    dst = dst || create$3();\n    const off = axis * 4;\n    dst[0] = m[off + 0];\n    dst[1] = m[off + 1];\n    dst[2] = m[off + 2];\n    return dst;\n}\n/**\n * Sets an axis of a 4x4 matrix as a vector with 3 entries\n * @param m - The matrix.\n * @param v - the axis vector\n * @param axis - The axis  0 = x, 1 = y, 2 = z;\n * @param dst - The matrix to set. If not passed a new one is created.\n * @returns The matrix with axis set.\n */\nfunction setAxis(a, v, axis, dst) {\n    if (dst !== a) {\n        dst = copy$2(a, dst);\n    }\n    const off = axis * 4;\n    dst[off + 0] = v[0];\n    dst[off + 1] = v[1];\n    dst[off + 2] = v[2];\n    return dst;\n}\n/**\n * Returns the scaling component of the matrix\n * @param m - The Matrix\n * @param dst - The vector to set. If not passed a new one is created.\n */\nfunction getScaling(m, dst) {\n    dst = dst || create$3();\n    const xx = m[0];\n    const xy = m[1];\n    const xz = m[2];\n    const yx = m[4];\n    const yy = m[5];\n    const yz = m[6];\n    const zx = m[8];\n    const zy = m[9];\n    const zz = m[10];\n    dst[0] = Math.sqrt(xx * xx + xy * xy + xz * xz);\n    dst[1] = Math.sqrt(yx * yx + yy * yy + yz * yz);\n    dst[2] = Math.sqrt(zx * zx + zy * zy + zz * zz);\n    return dst;\n}\n/**\n * Computes a 4-by-4 perspective transformation matrix given the angular height\n * of the frustum, the aspect ratio, and the near and far clipping planes.  The\n * arguments define a frustum extending in the negative z direction.  The given\n * angle is the vertical angle of the frustum, and the horizontal angle is\n * determined to produce the given aspect ratio.  The arguments near and far are\n * the distances to the near and far clipping planes.  Note that near and far\n * are not z coordinates, but rather they are distances along the negative\n * z-axis.  The matrix generated sends the viewing frustum to the unit box.\n * We assume a unit box extending from -1 to 1 in the x and y dimensions and\n * from 0 to 1 in the z dimension.\n *\n * Note: If you pass `Infinity` for zFar then it will produce a projection matrix\n * returns -Infinity for Z when transforming coordinates with Z <= 0 and +Infinity for Z\n * otherwise.\n *\n * @param fieldOfViewYInRadians - The camera angle from top to bottom (in radians).\n * @param aspect - The aspect ratio width / height.\n * @param zNear - The depth (negative z coordinate)\n *     of the near clipping plane.\n * @param zFar - The depth (negative z coordinate)\n *     of the far clipping plane.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The perspective matrix.\n */\nfunction perspective(fieldOfViewYInRadians, aspect, zNear, zFar, dst) {\n    dst = dst || new MatType(16);\n    const f = Math.tan(Math.PI * 0.5 - 0.5 * fieldOfViewYInRadians);\n    dst[0] = f / aspect;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = f;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[11] = -1;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[15] = 0;\n    if (zFar === Infinity) {\n        dst[10] = -1;\n        dst[14] = -zNear;\n    }\n    else {\n        const rangeInv = 1 / (zNear - zFar);\n        dst[10] = zFar * rangeInv;\n        dst[14] = zFar * zNear * rangeInv;\n    }\n    return dst;\n}\n/**\n * Computes a 4-by-4 orthogonal transformation matrix that transforms from\n * the given the left, right, bottom, and top dimensions to -1 +1 in x, and y\n * and 0 to +1 in z.\n * @param left - Left side of the near clipping plane viewport.\n * @param right - Right side of the near clipping plane viewport.\n * @param bottom - Bottom of the near clipping plane viewport.\n * @param top - Top of the near clipping plane viewport.\n * @param near - The depth (negative z coordinate)\n *     of the near clipping plane.\n * @param far - The depth (negative z coordinate)\n *     of the far clipping plane.\n * @param dst - Output matrix. If not passed a new one is created.\n * @returns The orthographic projection matrix.\n */\nfunction ortho(left, right, bottom, top, near, far, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = 2 / (right - left);\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 2 / (top - bottom);\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1 / (near - far);\n    dst[11] = 0;\n    dst[12] = (right + left) / (left - right);\n    dst[13] = (top + bottom) / (bottom - top);\n    dst[14] = near / (near - far);\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Computes a 4-by-4 perspective transformation matrix given the left, right,\n * top, bottom, near and far clipping planes. The arguments define a frustum\n * extending in the negative z direction. The arguments near and far are the\n * distances to the near and far clipping planes. Note that near and far are not\n * z coordinates, but rather they are distances along the negative z-axis. The\n * matrix generated sends the viewing frustum to the unit box. We assume a unit\n * box extending from -1 to 1 in the x and y dimensions and from 0 to 1 in the z\n * dimension.\n * @param left - The x coordinate of the left plane of the box.\n * @param right - The x coordinate of the right plane of the box.\n * @param bottom - The y coordinate of the bottom plane of the box.\n * @param top - The y coordinate of the right plane of the box.\n * @param near - The negative z coordinate of the near plane of the box.\n * @param far - The negative z coordinate of the far plane of the box.\n * @param dst - Output matrix. If not passed a new one is created.\n * @returns The perspective projection matrix.\n */\nfunction frustum(left, right, bottom, top, near, far, dst) {\n    dst = dst || new MatType(16);\n    const dx = (right - left);\n    const dy = (top - bottom);\n    const dz = (near - far);\n    dst[0] = 2 * near / dx;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 2 * near / dy;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = (left + right) / dx;\n    dst[9] = (top + bottom) / dy;\n    dst[10] = far / dz;\n    dst[11] = -1;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = near * far / dz;\n    dst[15] = 0;\n    return dst;\n}\nlet xAxis;\nlet yAxis;\nlet zAxis;\n/**\n * Computes a 4-by-4 aim transformation.\n *\n * This is a matrix which positions an object aiming down positive Z.\n * toward the target.\n *\n * Note: this is **NOT** the inverse of lookAt as lookAt looks at negative Z.\n *\n * @param position - The position of the object.\n * @param target - The position meant to be aimed at.\n * @param up - A vector pointing up.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The aim matrix.\n */\nfunction aim(position, target, up, dst) {\n    dst = dst || new MatType(16);\n    xAxis = xAxis || create$3();\n    yAxis = yAxis || create$3();\n    zAxis = zAxis || create$3();\n    normalize$2(subtract$2(target, position, zAxis), zAxis);\n    normalize$2(cross(up, zAxis, xAxis), xAxis);\n    normalize$2(cross(zAxis, xAxis, yAxis), yAxis);\n    dst[0] = xAxis[0];\n    dst[1] = xAxis[1];\n    dst[2] = xAxis[2];\n    dst[3] = 0;\n    dst[4] = yAxis[0];\n    dst[5] = yAxis[1];\n    dst[6] = yAxis[2];\n    dst[7] = 0;\n    dst[8] = zAxis[0];\n    dst[9] = zAxis[1];\n    dst[10] = zAxis[2];\n    dst[11] = 0;\n    dst[12] = position[0];\n    dst[13] = position[1];\n    dst[14] = position[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Computes a 4-by-4 camera aim transformation.\n *\n * This is a matrix which positions an object aiming down negative Z.\n * toward the target.\n *\n * Note: this is the inverse of `lookAt`\n *\n * @param eye - The position of the object.\n * @param target - The position meant to be aimed at.\n * @param up - A vector pointing up.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The aim matrix.\n */\nfunction cameraAim(eye, target, up, dst) {\n    dst = dst || new MatType(16);\n    xAxis = xAxis || create$3();\n    yAxis = yAxis || create$3();\n    zAxis = zAxis || create$3();\n    normalize$2(subtract$2(eye, target, zAxis), zAxis);\n    normalize$2(cross(up, zAxis, xAxis), xAxis);\n    normalize$2(cross(zAxis, xAxis, yAxis), yAxis);\n    dst[0] = xAxis[0];\n    dst[1] = xAxis[1];\n    dst[2] = xAxis[2];\n    dst[3] = 0;\n    dst[4] = yAxis[0];\n    dst[5] = yAxis[1];\n    dst[6] = yAxis[2];\n    dst[7] = 0;\n    dst[8] = zAxis[0];\n    dst[9] = zAxis[1];\n    dst[10] = zAxis[2];\n    dst[11] = 0;\n    dst[12] = eye[0];\n    dst[13] = eye[1];\n    dst[14] = eye[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Computes a 4-by-4 view transformation.\n *\n * This is a view matrix which transforms all other objects\n * to be in the space of the view defined by the parameters.\n *\n * @param eye - The position of the object.\n * @param target - The position meant to be aimed at.\n * @param up - A vector pointing up.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The look-at matrix.\n */\nfunction lookAt(eye, target, up, dst) {\n    dst = dst || new MatType(16);\n    xAxis = xAxis || create$3();\n    yAxis = yAxis || create$3();\n    zAxis = zAxis || create$3();\n    normalize$2(subtract$2(eye, target, zAxis), zAxis);\n    normalize$2(cross(up, zAxis, xAxis), xAxis);\n    normalize$2(cross(zAxis, xAxis, yAxis), yAxis);\n    dst[0] = xAxis[0];\n    dst[1] = yAxis[0];\n    dst[2] = zAxis[0];\n    dst[3] = 0;\n    dst[4] = xAxis[1];\n    dst[5] = yAxis[1];\n    dst[6] = zAxis[1];\n    dst[7] = 0;\n    dst[8] = xAxis[2];\n    dst[9] = yAxis[2];\n    dst[10] = zAxis[2];\n    dst[11] = 0;\n    dst[12] = -(xAxis[0] * eye[0] + xAxis[1] * eye[1] + xAxis[2] * eye[2]);\n    dst[13] = -(yAxis[0] * eye[0] + yAxis[1] * eye[1] + yAxis[2] * eye[2]);\n    dst[14] = -(zAxis[0] * eye[0] + zAxis[1] * eye[1] + zAxis[2] * eye[2]);\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which translates by the given vector v.\n * @param v - The vector by\n *     which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translation matrix.\n */\nfunction translation(v, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = v[0];\n    dst[13] = v[1];\n    dst[14] = v[2];\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Translates the given 4-by-4 matrix by the given vector v.\n * @param m - The matrix.\n * @param v - The vector by\n *     which to translate.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The translated matrix.\n */\nfunction translate(m, v, dst) {\n    dst = dst || new MatType(16);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const m00 = m[0];\n    const m01 = m[1];\n    const m02 = m[2];\n    const m03 = m[3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const m30 = m[3 * 4 + 0];\n    const m31 = m[3 * 4 + 1];\n    const m32 = m[3 * 4 + 2];\n    const m33 = m[3 * 4 + 3];\n    if (m !== dst) {\n        dst[0] = m00;\n        dst[1] = m01;\n        dst[2] = m02;\n        dst[3] = m03;\n        dst[4] = m10;\n        dst[5] = m11;\n        dst[6] = m12;\n        dst[7] = m13;\n        dst[8] = m20;\n        dst[9] = m21;\n        dst[10] = m22;\n        dst[11] = m23;\n    }\n    dst[12] = m00 * v0 + m10 * v1 + m20 * v2 + m30;\n    dst[13] = m01 * v0 + m11 * v1 + m21 * v2 + m31;\n    dst[14] = m02 * v0 + m12 * v1 + m22 * v2 + m32;\n    dst[15] = m03 * v0 + m13 * v1 + m23 * v2 + m33;\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the x-axis by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotationX(angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = 1;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = c;\n    dst[6] = s;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = -s;\n    dst[10] = c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the x-axis by the given\n * angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotateX$1(m, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const m10 = m[4];\n    const m11 = m[5];\n    const m12 = m[6];\n    const m13 = m[7];\n    const m20 = m[8];\n    const m21 = m[9];\n    const m22 = m[10];\n    const m23 = m[11];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[4] = c * m10 + s * m20;\n    dst[5] = c * m11 + s * m21;\n    dst[6] = c * m12 + s * m22;\n    dst[7] = c * m13 + s * m23;\n    dst[8] = c * m20 - s * m10;\n    dst[9] = c * m21 - s * m11;\n    dst[10] = c * m22 - s * m12;\n    dst[11] = c * m23 - s * m13;\n    if (m !== dst) {\n        dst[0] = m[0];\n        dst[1] = m[1];\n        dst[2] = m[2];\n        dst[3] = m[3];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the y-axis by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotationY(angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c;\n    dst[1] = 0;\n    dst[2] = -s;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = 1;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = s;\n    dst[9] = 0;\n    dst[10] = c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the y-axis by the given\n * angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotateY$1(m, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m20 = m[2 * 4 + 0];\n    const m21 = m[2 * 4 + 1];\n    const m22 = m[2 * 4 + 2];\n    const m23 = m[2 * 4 + 3];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c * m00 - s * m20;\n    dst[1] = c * m01 - s * m21;\n    dst[2] = c * m02 - s * m22;\n    dst[3] = c * m03 - s * m23;\n    dst[8] = c * m20 + s * m00;\n    dst[9] = c * m21 + s * m01;\n    dst[10] = c * m22 + s * m02;\n    dst[11] = c * m23 + s * m03;\n    if (m !== dst) {\n        dst[4] = m[4];\n        dst[5] = m[5];\n        dst[6] = m[6];\n        dst[7] = m[7];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the z-axis by the given angle.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotation matrix.\n */\nfunction rotationZ(angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c;\n    dst[1] = s;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = -s;\n    dst[5] = c;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = 1;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the z-axis by the given\n * angle.\n * @param m - The matrix.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction rotateZ$1(m, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    const m00 = m[0 * 4 + 0];\n    const m01 = m[0 * 4 + 1];\n    const m02 = m[0 * 4 + 2];\n    const m03 = m[0 * 4 + 3];\n    const m10 = m[1 * 4 + 0];\n    const m11 = m[1 * 4 + 1];\n    const m12 = m[1 * 4 + 2];\n    const m13 = m[1 * 4 + 3];\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    dst[0] = c * m00 + s * m10;\n    dst[1] = c * m01 + s * m11;\n    dst[2] = c * m02 + s * m12;\n    dst[3] = c * m03 + s * m13;\n    dst[4] = c * m10 - s * m00;\n    dst[5] = c * m11 - s * m01;\n    dst[6] = c * m12 - s * m02;\n    dst[7] = c * m13 - s * m03;\n    if (m !== dst) {\n        dst[8] = m[8];\n        dst[9] = m[9];\n        dst[10] = m[10];\n        dst[11] = m[11];\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the given axis by the given\n * angle.\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A matrix which rotates angle radians\n *     around the axis.\n */\nfunction axisRotation(axis, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    const n = Math.sqrt(x * x + y * y + z * z);\n    x /= n;\n    y /= n;\n    z /= n;\n    const xx = x * x;\n    const yy = y * y;\n    const zz = z * z;\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    const oneMinusCosine = 1 - c;\n    dst[0] = xx + (1 - xx) * c;\n    dst[1] = x * y * oneMinusCosine + z * s;\n    dst[2] = x * z * oneMinusCosine - y * s;\n    dst[3] = 0;\n    dst[4] = x * y * oneMinusCosine - z * s;\n    dst[5] = yy + (1 - yy) * c;\n    dst[6] = y * z * oneMinusCosine + x * s;\n    dst[7] = 0;\n    dst[8] = x * z * oneMinusCosine + y * s;\n    dst[9] = y * z * oneMinusCosine - x * s;\n    dst[10] = zz + (1 - zz) * c;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which rotates around the given axis by the given\n * angle. (same as axisRotation)\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns A matrix which rotates angle radians\n *     around the axis.\n */\nconst rotation = axisRotation;\n/**\n * Rotates the given 4-by-4 matrix around the given axis by the\n * given angle.\n * @param m - The matrix.\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nfunction axisRotate(m, axis, angleInRadians, dst) {\n    dst = dst || new MatType(16);\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    const n = Math.sqrt(x * x + y * y + z * z);\n    x /= n;\n    y /= n;\n    z /= n;\n    const xx = x * x;\n    const yy = y * y;\n    const zz = z * z;\n    const c = Math.cos(angleInRadians);\n    const s = Math.sin(angleInRadians);\n    const oneMinusCosine = 1 - c;\n    const r00 = xx + (1 - xx) * c;\n    const r01 = x * y * oneMinusCosine + z * s;\n    const r02 = x * z * oneMinusCosine - y * s;\n    const r10 = x * y * oneMinusCosine - z * s;\n    const r11 = yy + (1 - yy) * c;\n    const r12 = y * z * oneMinusCosine + x * s;\n    const r20 = x * z * oneMinusCosine + y * s;\n    const r21 = y * z * oneMinusCosine - x * s;\n    const r22 = zz + (1 - zz) * c;\n    const m00 = m[0];\n    const m01 = m[1];\n    const m02 = m[2];\n    const m03 = m[3];\n    const m10 = m[4];\n    const m11 = m[5];\n    const m12 = m[6];\n    const m13 = m[7];\n    const m20 = m[8];\n    const m21 = m[9];\n    const m22 = m[10];\n    const m23 = m[11];\n    dst[0] = r00 * m00 + r01 * m10 + r02 * m20;\n    dst[1] = r00 * m01 + r01 * m11 + r02 * m21;\n    dst[2] = r00 * m02 + r01 * m12 + r02 * m22;\n    dst[3] = r00 * m03 + r01 * m13 + r02 * m23;\n    dst[4] = r10 * m00 + r11 * m10 + r12 * m20;\n    dst[5] = r10 * m01 + r11 * m11 + r12 * m21;\n    dst[6] = r10 * m02 + r11 * m12 + r12 * m22;\n    dst[7] = r10 * m03 + r11 * m13 + r12 * m23;\n    dst[8] = r20 * m00 + r21 * m10 + r22 * m20;\n    dst[9] = r20 * m01 + r21 * m11 + r22 * m21;\n    dst[10] = r20 * m02 + r21 * m12 + r22 * m22;\n    dst[11] = r20 * m03 + r21 * m13 + r22 * m23;\n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Rotates the given 4-by-4 matrix around the given axis by the\n * given angle. (same as rotate)\n * @param m - The matrix.\n * @param axis - The axis\n *     about which to rotate.\n * @param angleInRadians - The angle by which to rotate (in radians).\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The rotated matrix.\n */\nconst rotate = axisRotate;\n/**\n * Creates a 4-by-4 matrix which scales in each dimension by an amount given by\n * the corresponding entry in the given vector; assumes the vector has three\n * entries.\n * @param v - A vector of\n *     three entries specifying the factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction scaling(v, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = v[0];\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = v[1];\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = v[2];\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Scales the given 4-by-4 matrix in each dimension by an amount\n * given by the corresponding entry in the given vector; assumes the vector has\n * three entries.\n * @param m - The matrix to be modified.\n * @param v - A vector of three entries specifying the\n *     factor by which to scale in each dimension.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction scale$2(m, v, dst) {\n    dst = dst || new MatType(16);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    dst[0] = v0 * m[0 * 4 + 0];\n    dst[1] = v0 * m[0 * 4 + 1];\n    dst[2] = v0 * m[0 * 4 + 2];\n    dst[3] = v0 * m[0 * 4 + 3];\n    dst[4] = v1 * m[1 * 4 + 0];\n    dst[5] = v1 * m[1 * 4 + 1];\n    dst[6] = v1 * m[1 * 4 + 2];\n    dst[7] = v1 * m[1 * 4 + 3];\n    dst[8] = v2 * m[2 * 4 + 0];\n    dst[9] = v2 * m[2 * 4 + 1];\n    dst[10] = v2 * m[2 * 4 + 2];\n    dst[11] = v2 * m[2 * 4 + 3];\n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n/**\n * Creates a 4-by-4 matrix which scales a uniform amount in each dimension.\n * @param s - the amount to scale\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaling matrix.\n */\nfunction uniformScaling(s, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = s;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    dst[4] = 0;\n    dst[5] = s;\n    dst[6] = 0;\n    dst[7] = 0;\n    dst[8] = 0;\n    dst[9] = 0;\n    dst[10] = s;\n    dst[11] = 0;\n    dst[12] = 0;\n    dst[13] = 0;\n    dst[14] = 0;\n    dst[15] = 1;\n    return dst;\n}\n/**\n * Scales the given 4-by-4 matrix in each dimension by a uniform scale.\n * @param m - The matrix to be modified.\n * @param s - The amount to scale.\n * @param dst - matrix to hold result. If not passed a new one is created.\n * @returns The scaled matrix.\n */\nfunction uniformScale(m, s, dst) {\n    dst = dst || new MatType(16);\n    dst[0] = s * m[0 * 4 + 0];\n    dst[1] = s * m[0 * 4 + 1];\n    dst[2] = s * m[0 * 4 + 2];\n    dst[3] = s * m[0 * 4 + 3];\n    dst[4] = s * m[1 * 4 + 0];\n    dst[5] = s * m[1 * 4 + 1];\n    dst[6] = s * m[1 * 4 + 2];\n    dst[7] = s * m[1 * 4 + 3];\n    dst[8] = s * m[2 * 4 + 0];\n    dst[9] = s * m[2 * 4 + 1];\n    dst[10] = s * m[2 * 4 + 2];\n    dst[11] = s * m[2 * 4 + 3];\n    if (m !== dst) {\n        dst[12] = m[12];\n        dst[13] = m[13];\n        dst[14] = m[14];\n        dst[15] = m[15];\n    }\n    return dst;\n}\n\nvar mat4Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    setDefaultType: setDefaultType$3,\n    create: create$2,\n    set: set$2,\n    fromMat3: fromMat3,\n    fromQuat: fromQuat,\n    negate: negate$1,\n    copy: copy$2,\n    clone: clone$2,\n    equalsApproximately: equalsApproximately$2,\n    equals: equals$2,\n    identity: identity$1,\n    transpose: transpose,\n    inverse: inverse$2,\n    determinant: determinant,\n    invert: invert$1,\n    multiply: multiply$2,\n    mul: mul$2,\n    setTranslation: setTranslation,\n    getTranslation: getTranslation,\n    getAxis: getAxis,\n    setAxis: setAxis,\n    getScaling: getScaling,\n    perspective: perspective,\n    ortho: ortho,\n    frustum: frustum,\n    aim: aim,\n    cameraAim: cameraAim,\n    lookAt: lookAt,\n    translation: translation,\n    translate: translate,\n    rotationX: rotationX,\n    rotateX: rotateX$1,\n    rotationY: rotationY,\n    rotateY: rotateY$1,\n    rotationZ: rotationZ,\n    rotateZ: rotateZ$1,\n    axisRotation: axisRotation,\n    rotation: rotation,\n    axisRotate: axisRotate,\n    rotate: rotate,\n    scaling: scaling,\n    scale: scale$2,\n    uniformScaling: uniformScaling,\n    uniformScale: uniformScale\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Quat4 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new `Quat4`. In other words you can do this\n *\n *     const v = quat4.cross(v1, v2);  // Creates a new Quat4 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = quat4.create();\n *     quat4.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     quat4.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet QuatType = Float32Array;\n/**\n * Sets the type this library creates for a Quat4\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Quat4\n */\nfunction setDefaultType$2(ctor) {\n    const oldType = QuatType;\n    QuatType = ctor;\n    return oldType;\n}\n/**\n * Creates a quat4; may be called with x, y, z to set initial values.\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param w - Initial w value.\n * @returns the created vector\n */\nfunction create$1(x, y, z, w) {\n    const dst = new QuatType(4);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n            if (z !== undefined) {\n                dst[2] = z;\n                if (w !== undefined) {\n                    dst[3] = w;\n                }\n            }\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a Quat; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param z - Initial w value.\n * @returns the created vector\n */\nconst fromValues$1 = create$1;\n/**\n * Sets the values of a Quat\n * Also see {@link quat.create} and {@link quat.copy}\n *\n * @param x first value\n * @param y second value\n * @param z third value\n * @param w fourth value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set$1(x, y, z, w, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = x;\n    dst[1] = y;\n    dst[2] = z;\n    dst[3] = w;\n    return dst;\n}\n/**\n * Sets a quaternion from the given angle and  axis,\n * then returns it.\n *\n * @param axis - the axis to rotate around\n * @param angleInRadians - the angle\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The quaternion that represents the given axis and angle\n **/\nfunction fromAxisAngle(axis, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const s = Math.sin(halfAngle);\n    dst[0] = s * axis[0];\n    dst[1] = s * axis[1];\n    dst[2] = s * axis[2];\n    dst[3] = Math.cos(halfAngle);\n    return dst;\n}\n/**\n * Gets the rotation axis and angle\n * @param q - quaternion to compute from\n * @param dst - Vec3 to hold result. If not passed in a new one is created.\n * @return angle and axis\n */\nfunction toAxisAngle(q, dst) {\n    dst = dst || create$3(4);\n    const angle = Math.acos(q[3]) * 2;\n    const s = Math.sin(angle * 0.5);\n    if (s > EPSILON) {\n        dst[0] = q[0] / s;\n        dst[1] = q[1] / s;\n        dst[2] = q[2] / s;\n    }\n    else {\n        dst[0] = 1;\n        dst[1] = 0;\n        dst[2] = 0;\n    }\n    return { angle, axis: dst };\n}\n/**\n * Returns the angle in degrees between two rotations a and b.\n * @param a - quaternion a\n * @param b - quaternion b\n * @return angle in radians between the two quaternions\n */\nfunction angle(a, b) {\n    const d = dot$1(a, b);\n    return Math.acos(2 * d * d - 1);\n}\n/**\n * Multiplies two quaternions\n *\n * @param a - the first quaternion\n * @param b - the second quaternion\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction multiply$1(a, b, dst) {\n    dst = dst || new QuatType(4);\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const aw = a[3];\n    const bx = b[0];\n    const by = b[1];\n    const bz = b[2];\n    const bw = b[3];\n    dst[0] = ax * bw + aw * bx + ay * bz - az * by;\n    dst[1] = ay * bw + aw * by + az * bx - ax * bz;\n    dst[2] = az * bw + aw * bz + ax * by - ay * bx;\n    dst[3] = aw * bw - ax * bx - ay * by - az * bz;\n    return dst;\n}\n/**\n * Multiplies two quaternions\n *\n * @param a - the first quaternion\n * @param b - the second quaternion\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nconst mul$1 = multiply$1;\n/**\n * Rotates the given quaternion around the X axis by the given angle.\n * @param q - quaternion to rotate\n * @param angleInRadians - The angle by which to rotate\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction rotateX(q, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const bx = Math.sin(halfAngle);\n    const bw = Math.cos(halfAngle);\n    dst[0] = qx * bw + qw * bx;\n    dst[1] = qy * bw + qz * bx;\n    dst[2] = qz * bw - qy * bx;\n    dst[3] = qw * bw - qx * bx;\n    return dst;\n}\n/**\n * Rotates the given quaternion around the Y axis by the given angle.\n * @param q - quaternion to rotate\n * @param angleInRadians - The angle by which to rotate\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction rotateY(q, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const by = Math.sin(halfAngle);\n    const bw = Math.cos(halfAngle);\n    dst[0] = qx * bw - qz * by;\n    dst[1] = qy * bw + qw * by;\n    dst[2] = qz * bw + qx * by;\n    dst[3] = qw * bw - qy * by;\n    return dst;\n}\n/**\n * Rotates the given quaternion around the Z axis by the given angle.\n * @param q - quaternion to rotate\n * @param angleInRadians - The angle by which to rotate\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction rotateZ(q, angleInRadians, dst) {\n    dst = dst || new QuatType(4);\n    const halfAngle = angleInRadians * 0.5;\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const bz = Math.sin(halfAngle);\n    const bw = Math.cos(halfAngle);\n    dst[0] = qx * bw + qy * bz;\n    dst[1] = qy * bw - qx * bz;\n    dst[2] = qz * bw + qw * bz;\n    dst[3] = qw * bw - qz * bz;\n    return dst;\n}\n/**\n * Spherically linear interpolate between two quaternions\n *\n * @param a - starting value\n * @param b - ending value\n * @param t - value where 0 = a and 1 = b\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the result of a * b\n */\nfunction slerp(a, b, t, dst) {\n    dst = dst || new QuatType(4);\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const aw = a[3];\n    let bx = b[0];\n    let by = b[1];\n    let bz = b[2];\n    let bw = b[3];\n    let cosOmega = ax * bx + ay * by + az * bz + aw * bw;\n    if (cosOmega < 0) {\n        cosOmega = -cosOmega;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n    }\n    let scale0;\n    let scale1;\n    if (1.0 - cosOmega > EPSILON) {\n        const omega = Math.acos(cosOmega);\n        const sinOmega = Math.sin(omega);\n        scale0 = Math.sin((1 - t) * omega) / sinOmega;\n        scale1 = Math.sin(t * omega) / sinOmega;\n    }\n    else {\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    dst[0] = scale0 * ax + scale1 * bx;\n    dst[1] = scale0 * ay + scale1 * by;\n    dst[2] = scale0 * az + scale1 * bz;\n    dst[3] = scale0 * aw + scale1 * bw;\n    return dst;\n}\n/**\n * Compute the inverse of a quaternion\n *\n * @param q - quaternion to compute the inverse of\n * @returns A quaternion that is the result of a * b\n */\nfunction inverse$1(q, dst) {\n    dst = dst || new QuatType(4);\n    const a0 = q[0];\n    const a1 = q[1];\n    const a2 = q[2];\n    const a3 = q[3];\n    const dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n    const invDot = dot ? 1 / dot : 0;\n    dst[0] = -a0 * invDot;\n    dst[1] = -a1 * invDot;\n    dst[2] = -a2 * invDot;\n    dst[3] = a3 * invDot;\n    return dst;\n}\n/**\n * Compute the conjugate of a quaternion\n * For quaternions with a magnitude of 1 (a unit quaternion)\n * this returns the same as the inverse but is faster to calculate.\n *\n * @param q - quaternion to compute the conjugate of.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The conjugate of q\n */\nfunction conjugate(q, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = -q[0];\n    dst[1] = -q[1];\n    dst[2] = -q[2];\n    dst[3] = q[3];\n    return dst;\n}\n/**\n * Creates a quaternion from the given rotation matrix.\n *\n * The created quaternion is not normalized.\n *\n * @param m - rotation matrix\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns the result\n */\nfunction fromMat(m, dst) {\n    dst = dst || new QuatType(4);\n    /*\n    0 1 2\n    3 4 5\n    6 7 8\n  \n    0 1 2\n    4 5 6\n    8 9 10\n     */\n    // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n    // article \"Quaternion Calculus and Fast Animation\".\n    const trace = m[0] + m[5] + m[10];\n    if (trace > 0.0) {\n        // |w| > 1/2, may as well choose w > 1/2\n        const root = Math.sqrt(trace + 1); // 2w\n        dst[3] = 0.5 * root;\n        const invRoot = 0.5 / root; // 1/(4w)\n        dst[0] = (m[6] - m[9]) * invRoot;\n        dst[1] = (m[8] - m[2]) * invRoot;\n        dst[2] = (m[1] - m[4]) * invRoot;\n    }\n    else {\n        // |w| <= 1/2\n        let i = 0;\n        if (m[5] > m[0]) {\n            i = 1;\n        }\n        if (m[10] > m[i * 4 + i]) {\n            i = 2;\n        }\n        const j = (i + 1) % 3;\n        const k = (i + 2) % 3;\n        const root = Math.sqrt(m[i * 4 + i] - m[j * 4 + j] - m[k * 4 + k] + 1.0);\n        dst[i] = 0.5 * root;\n        const invRoot = 0.5 / root;\n        dst[3] = (m[j * 4 + k] - m[k * 4 + j]) * invRoot;\n        dst[j] = (m[j * 4 + i] + m[i * 4 + j]) * invRoot;\n        dst[k] = (m[k * 4 + i] + m[i * 4 + k]) * invRoot;\n    }\n    return dst;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z using the provided intrinsic order for the conversion.\n *\n * @param xAngleInRadians - angle to rotate around X axis in radians.\n * @param yAngleInRadians - angle to rotate around Y axis in radians.\n * @param zAngleInRadians - angle to rotate around Z axis in radians.\n * @param order - order to apply euler angles\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion representing the same rotation as the euler angles applied in the given order\n */\nfunction fromEuler(xAngleInRadians, yAngleInRadians, zAngleInRadians, order, dst) {\n    dst = dst || new QuatType(4);\n    const xHalfAngle = xAngleInRadians * 0.5;\n    const yHalfAngle = yAngleInRadians * 0.5;\n    const zHalfAngle = zAngleInRadians * 0.5;\n    const sx = Math.sin(xHalfAngle);\n    const cx = Math.cos(xHalfAngle);\n    const sy = Math.sin(yHalfAngle);\n    const cy = Math.cos(yHalfAngle);\n    const sz = Math.sin(zHalfAngle);\n    const cz = Math.cos(zHalfAngle);\n    switch (order) {\n        case 'xyz':\n            dst[0] = sx * cy * cz + cx * sy * sz;\n            dst[1] = cx * sy * cz - sx * cy * sz;\n            dst[2] = cx * cy * sz + sx * sy * cz;\n            dst[3] = cx * cy * cz - sx * sy * sz;\n            break;\n        case 'xzy':\n            dst[0] = sx * cy * cz - cx * sy * sz;\n            dst[1] = cx * sy * cz - sx * cy * sz;\n            dst[2] = cx * cy * sz + sx * sy * cz;\n            dst[3] = cx * cy * cz + sx * sy * sz;\n            break;\n        case 'yxz':\n            dst[0] = sx * cy * cz + cx * sy * sz;\n            dst[1] = cx * sy * cz - sx * cy * sz;\n            dst[2] = cx * cy * sz - sx * sy * cz;\n            dst[3] = cx * cy * cz + sx * sy * sz;\n            break;\n        case 'yzx':\n            dst[0] = sx * cy * cz + cx * sy * sz;\n            dst[1] = cx * sy * cz + sx * cy * sz;\n            dst[2] = cx * cy * sz - sx * sy * cz;\n            dst[3] = cx * cy * cz - sx * sy * sz;\n            break;\n        case 'zxy':\n            dst[0] = sx * cy * cz - cx * sy * sz;\n            dst[1] = cx * sy * cz + sx * cy * sz;\n            dst[2] = cx * cy * sz + sx * sy * cz;\n            dst[3] = cx * cy * cz - sx * sy * sz;\n            break;\n        case 'zyx':\n            dst[0] = sx * cy * cz - cx * sy * sz;\n            dst[1] = cx * sy * cz + sx * cy * sz;\n            dst[2] = cx * cy * sz - sx * sy * cz;\n            dst[3] = cx * cy * cz + sx * sy * sz;\n            break;\n        default:\n            throw new Error(`Unknown rotation order: ${order}`);\n    }\n    return dst;\n}\n/**\n * Copies a quaternion. (same as {@link quat.clone})\n * Also see {@link quat.create} and {@link quat.set}\n * @param q - The quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is a copy of q\n */\nfunction copy$1(q, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = q[0];\n    dst[1] = q[1];\n    dst[2] = q[2];\n    dst[3] = q[3];\n    return dst;\n}\n/**\n * Clones a quaternion. (same as {@link quat.copy})\n * Also see {@link quat.create} and {@link quat.set}\n * @param q - The quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A copy of q.\n */\nconst clone$1 = copy$1;\n/**\n * Adds two quaternions; assumes a and b have the same dimension.\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the sum of a and b.\n */\nfunction add$1(a, b, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    dst[2] = a[2] + b[2];\n    dst[3] = a[3] + b[3];\n    return dst;\n}\n/**\n * Subtracts two quaternions.\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the difference of a and b.\n */\nfunction subtract$1(a, b, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    dst[2] = a[2] - b[2];\n    dst[3] = a[3] - b[3];\n    return dst;\n}\n/**\n * Subtracts two quaternions.\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns A quaternion that is the difference of a and b.\n */\nconst sub$1 = subtract$1;\n/**\n * Multiplies a quaternion by a scalar.\n * @param v - The quaternion.\n * @param k - The scalar.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The scaled quaternion.\n */\nfunction mulScalar$1(v, k, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    dst[2] = v[2] * k;\n    dst[3] = v[3] * k;\n    return dst;\n}\n/**\n * Multiplies a quaternion by a scalar. (same as mulScalar)\n * @param v - The quaternion.\n * @param k - The scalar.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The scaled quaternion.\n */\nconst scale$1 = mulScalar$1;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The scaled quaternion.\n */\nfunction divScalar$1(v, k, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    dst[2] = v[2] / k;\n    dst[3] = v[3] / k;\n    return dst;\n}\n/**\n * Computes the dot product of two quaternions\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @returns dot product\n */\nfunction dot$1(a, b) {\n    return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]) + (a[3] * b[3]);\n}\n/**\n * Performs linear interpolation on two quaternions.\n * Given quaternions a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @param t - Interpolation coefficient.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp$1(a, b, t, dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    dst[2] = a[2] + t * (b[2] - a[2]);\n    dst[3] = a[3] + t * (b[3] - a[3]);\n    return dst;\n}\n/**\n * Computes the length of quaternion\n * @param v - quaternion.\n * @returns length of quaternion.\n */\nfunction length$1(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n}\n/**\n * Computes the length of quaternion (same as length)\n * @param v - quaternion.\n * @returns length of quaternion.\n */\nconst len$1 = length$1;\n/**\n * Computes the square of the length of quaternion\n * @param v - quaternion.\n * @returns square of the length of quaternion.\n */\nfunction lengthSq$1(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3;\n}\n/**\n * Computes the square of the length of quaternion (same as lengthSq)\n * @param v - quaternion.\n * @returns square of the length of quaternion.\n */\nconst lenSq$1 = lengthSq$1;\n/**\n * Divides a quaternion by its Euclidean length and returns the quotient.\n * @param v - The quaternion.\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns The normalized quaternion.\n */\nfunction normalize$1(v, dst) {\n    dst = dst || new QuatType(4);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    const len = Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n        dst[2] = v2 / len;\n        dst[3] = v3 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n        dst[3] = 0;\n    }\n    return dst;\n}\n/**\n * Check if 2 quaternions are approximately equal\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @returns true if quaternions are approximately equal\n */\nfunction equalsApproximately$1(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[3] - b[3]) < EPSILON;\n}\n/**\n * Check if 2 quaternions are exactly equal\n * @param a - Operand quaternion.\n * @param b - Operand quaternion.\n * @returns true if quaternions are exactly equal\n */\nfunction equals$1(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Creates an identity quaternion\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns an identity quaternion\n */\nfunction identity(dst) {\n    dst = dst || new QuatType(4);\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 1;\n    return dst;\n}\nlet tempVec3;\nlet xUnitVec3;\nlet yUnitVec3;\n/**\n * Computes a quaternion to represent the shortest rotation from one vector to another.\n *\n * @param aUnit - the start vector\n * @param bUnit - the end vector\n * @param dst - quaternion to hold result. If not passed in a new one is created.\n * @returns the result\n */\nfunction rotationTo(aUnit, bUnit, dst) {\n    dst = dst || new QuatType(4);\n    tempVec3 = tempVec3 || create$3();\n    xUnitVec3 = xUnitVec3 || create$3(1, 0, 0);\n    yUnitVec3 = yUnitVec3 || create$3(0, 1, 0);\n    const dot = dot$2(aUnit, bUnit);\n    if (dot < -0.999999) {\n        cross(xUnitVec3, aUnit, tempVec3);\n        if (len$2(tempVec3) < 0.000001) {\n            cross(yUnitVec3, aUnit, tempVec3);\n        }\n        normalize$2(tempVec3, tempVec3);\n        fromAxisAngle(tempVec3, Math.PI, dst);\n        return dst;\n    }\n    else if (dot > 0.999999) {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n        dst[3] = 1;\n        return dst;\n    }\n    else {\n        cross(aUnit, bUnit, tempVec3);\n        dst[0] = tempVec3[0];\n        dst[1] = tempVec3[1];\n        dst[2] = tempVec3[2];\n        dst[3] = 1 + dot;\n        return normalize$1(dst, dst);\n    }\n}\nlet tempQuat1;\nlet tempQuat2;\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param a - the first quaternion\n * @param b - the second quaternion\n * @param c - the third quaternion\n * @param d - the fourth quaternion\n * @param t - Interpolation coefficient 0 to 1\n * @returns result\n */\nfunction sqlerp(a, b, c, d, t, dst) {\n    dst = dst || new QuatType(4);\n    tempQuat1 = tempQuat1 || new QuatType(4);\n    tempQuat2 = tempQuat2 || new QuatType(4);\n    slerp(a, d, t, tempQuat1);\n    slerp(b, c, t, tempQuat2);\n    slerp(tempQuat1, tempQuat2, 2 * t * (1 - t), dst);\n    return dst;\n}\n\nvar quatImpl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create$1,\n    setDefaultType: setDefaultType$2,\n    fromValues: fromValues$1,\n    set: set$1,\n    fromAxisAngle: fromAxisAngle,\n    toAxisAngle: toAxisAngle,\n    angle: angle,\n    multiply: multiply$1,\n    mul: mul$1,\n    rotateX: rotateX,\n    rotateY: rotateY,\n    rotateZ: rotateZ,\n    slerp: slerp,\n    inverse: inverse$1,\n    conjugate: conjugate,\n    fromMat: fromMat,\n    fromEuler: fromEuler,\n    copy: copy$1,\n    clone: clone$1,\n    add: add$1,\n    subtract: subtract$1,\n    sub: sub$1,\n    mulScalar: mulScalar$1,\n    scale: scale$1,\n    divScalar: divScalar$1,\n    dot: dot$1,\n    lerp: lerp$1,\n    length: length$1,\n    len: len$1,\n    lengthSq: lengthSq$1,\n    lenSq: lenSq$1,\n    normalize: normalize$1,\n    equalsApproximately: equalsApproximately$1,\n    equals: equals$1,\n    identity: identity,\n    rotationTo: rotationTo,\n    sqlerp: sqlerp\n});\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n *\n * Vec4 math functions.\n *\n * Almost all functions take an optional `dst` argument. If it is not passed in the\n * functions will create a new `Vec4`. In other words you can do this\n *\n *     const v = vec4.cross(v1, v2);  // Creates a new Vec4 with the cross product of v1 x v2.\n *\n * or\n *\n *     const v = vec4.create();\n *     vec4.cross(v1, v2, v);  // Puts the cross product of v1 x v2 in v\n *\n * The first style is often easier but depending on where it's used it generates garbage where\n * as there is almost never allocation with the second style.\n *\n * It is always safe to pass any vector as the destination. So for example\n *\n *     vec4.cross(v1, v2, v1);  // Puts the cross product of v1 x v2 in v1\n *\n */\nlet VecType = Float32Array;\n/**\n * Sets the type this library creates for a Vec4\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n * @returns previous constructor for Vec4\n */\nfunction setDefaultType$1(ctor) {\n    const oldType = VecType;\n    VecType = ctor;\n    return oldType;\n}\n/**\n * Creates a vec4; may be called with x, y, z to set initial values.\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param w - Initial w value.\n * @returns the created vector\n */\nfunction create(x, y, z, w) {\n    const dst = new VecType(4);\n    if (x !== undefined) {\n        dst[0] = x;\n        if (y !== undefined) {\n            dst[1] = y;\n            if (z !== undefined) {\n                dst[2] = z;\n                if (w !== undefined) {\n                    dst[3] = w;\n                }\n            }\n        }\n    }\n    return dst;\n}\n\n/*\n * Copyright 2022 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n * Creates a vec4; may be called with x, y, z to set initial values. (same as create)\n * @param x - Initial x value.\n * @param y - Initial y value.\n * @param z - Initial z value.\n * @param z - Initial w value.\n * @returns the created vector\n */\nconst fromValues = create;\n/**\n * Sets the values of a Vec4\n * Also see {@link vec4.create} and {@link vec4.copy}\n *\n * @param x first value\n * @param y second value\n * @param z third value\n * @param w fourth value\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector with its elements set.\n */\nfunction set(x, y, z, w, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = x;\n    dst[1] = y;\n    dst[2] = z;\n    dst[3] = w;\n    return dst;\n}\n/**\n * Applies Math.ceil to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the ceil of each element of v.\n */\nfunction ceil(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.ceil(v[0]);\n    dst[1] = Math.ceil(v[1]);\n    dst[2] = Math.ceil(v[2]);\n    dst[3] = Math.ceil(v[3]);\n    return dst;\n}\n/**\n * Applies Math.floor to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the floor of each element of v.\n */\nfunction floor(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.floor(v[0]);\n    dst[1] = Math.floor(v[1]);\n    dst[2] = Math.floor(v[2]);\n    dst[3] = Math.floor(v[3]);\n    return dst;\n}\n/**\n * Applies Math.round to each element of vector\n * @param v - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the round of each element of v.\n */\nfunction round(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.round(v[0]);\n    dst[1] = Math.round(v[1]);\n    dst[2] = Math.round(v[2]);\n    dst[3] = Math.round(v[3]);\n    return dst;\n}\n/**\n * Clamp each element of vector between min and max\n * @param v - Operand vector.\n * @param max - Min value, default 0\n * @param min - Max value, default 1\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that the clamped value of each element of v.\n */\nfunction clamp(v, min = 0, max = 1, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.min(max, Math.max(min, v[0]));\n    dst[1] = Math.min(max, Math.max(min, v[1]));\n    dst[2] = Math.min(max, Math.max(min, v[2]));\n    dst[3] = Math.min(max, Math.max(min, v[3]));\n    return dst;\n}\n/**\n * Adds two vectors; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a and b.\n */\nfunction add(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + b[0];\n    dst[1] = a[1] + b[1];\n    dst[2] = a[2] + b[2];\n    dst[3] = a[3] + b[3];\n    return dst;\n}\n/**\n * Adds two vectors, scaling the 2nd; assumes a and b have the same dimension.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param scale - Amount to scale b\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the sum of a + b * scale.\n */\nfunction addScaled(a, b, scale, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + b[0] * scale;\n    dst[1] = a[1] + b[1] * scale;\n    dst[2] = a[2] + b[2] * scale;\n    dst[3] = a[3] + b[3] * scale;\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nfunction subtract(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] - b[0];\n    dst[1] = a[1] - b[1];\n    dst[2] = a[2] - b[2];\n    dst[3] = a[3] - b[3];\n    return dst;\n}\n/**\n * Subtracts two vectors.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A vector that is the difference of a and b.\n */\nconst sub = subtract;\n/**\n * Check if 2 vectors are approximately equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are approximately equal\n */\nfunction equalsApproximately(a, b) {\n    return Math.abs(a[0] - b[0]) < EPSILON &&\n        Math.abs(a[1] - b[1]) < EPSILON &&\n        Math.abs(a[2] - b[2]) < EPSILON &&\n        Math.abs(a[3] - b[3]) < EPSILON;\n}\n/**\n * Check if 2 vectors are exactly equal\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns true if vectors are exactly equal\n */\nfunction equals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficient.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The linear interpolated result.\n */\nfunction lerp(a, b, t, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + t * (b[0] - a[0]);\n    dst[1] = a[1] + t * (b[1] - a[1]);\n    dst[2] = a[2] + t * (b[2] - a[2]);\n    dst[3] = a[3] + t * (b[3] - a[3]);\n    return dst;\n}\n/**\n * Performs linear interpolation on two vectors.\n * Given vectors a and b and interpolation coefficient vector t, returns\n * a + t * (b - a).\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param t - Interpolation coefficients vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns the linear interpolated result.\n */\nfunction lerpV(a, b, t, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] + t[0] * (b[0] - a[0]);\n    dst[1] = a[1] + t[1] * (b[1] - a[1]);\n    dst[2] = a[2] + t[2] * (b[2] - a[2]);\n    dst[3] = a[3] + t[3] * (b[3] - a[3]);\n    return dst;\n}\n/**\n * Return max values of two vectors.\n * Given vectors a and b returns\n * [max(a[0], b[0]), max(a[1], b[1]), max(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The max components vector.\n */\nfunction max(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.max(a[0], b[0]);\n    dst[1] = Math.max(a[1], b[1]);\n    dst[2] = Math.max(a[2], b[2]);\n    dst[3] = Math.max(a[3], b[3]);\n    return dst;\n}\n/**\n * Return min values of two vectors.\n * Given vectors a and b returns\n * [min(a[0], b[0]), min(a[1], b[1]), min(a[2], b[2])].\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The min components vector.\n */\nfunction min(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = Math.min(a[0], b[0]);\n    dst[1] = Math.min(a[1], b[1]);\n    dst[2] = Math.min(a[2], b[2]);\n    dst[3] = Math.min(a[3], b[3]);\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction mulScalar(v, k, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = v[0] * k;\n    dst[1] = v[1] * k;\n    dst[2] = v[2] * k;\n    dst[3] = v[3] * k;\n    return dst;\n}\n/**\n * Multiplies a vector by a scalar. (same as mulScalar)\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nconst scale = mulScalar;\n/**\n * Divides a vector by a scalar.\n * @param v - The vector.\n * @param k - The scalar.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The scaled vector.\n */\nfunction divScalar(v, k, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = v[0] / k;\n    dst[1] = v[1] / k;\n    dst[2] = v[2] / k;\n    dst[3] = v[3] / k;\n    return dst;\n}\n/**\n * Inverse a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nfunction inverse(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = 1 / v[0];\n    dst[1] = 1 / v[1];\n    dst[2] = 1 / v[2];\n    dst[3] = 1 / v[3];\n    return dst;\n}\n/**\n * Invert a vector. (same as inverse)\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The inverted vector.\n */\nconst invert = inverse;\n/**\n * Computes the dot product of two vectors\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @returns dot product\n */\nfunction dot(a, b) {\n    return (a[0] * b[0]) + (a[1] * b[1]) + (a[2] * b[2]) + (a[3] * b[3]);\n}\n/**\n * Computes the length of vector\n * @param v - vector.\n * @returns length of vector.\n */\nfunction length(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n}\n/**\n * Computes the length of vector (same as length)\n * @param v - vector.\n * @returns length of vector.\n */\nconst len = length;\n/**\n * Computes the square of the length of vector\n * @param v - vector.\n * @returns square of the length of vector.\n */\nfunction lengthSq(v) {\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    return v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3;\n}\n/**\n * Computes the square of the length of vector (same as lengthSq)\n * @param v - vector.\n * @returns square of the length of vector.\n */\nconst lenSq = lengthSq;\n/**\n * Computes the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nfunction distance(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    const dw = a[3] - b[3];\n    return Math.sqrt(dx * dx + dy * dy + dz * dz + dw * dw);\n}\n/**\n * Computes the distance between 2 points (same as distance)\n * @param a - vector.\n * @param b - vector.\n * @returns distance between a and b\n */\nconst dist = distance;\n/**\n * Computes the square of the distance between 2 points\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nfunction distanceSq(a, b) {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    const dz = a[2] - b[2];\n    const dw = a[3] - b[3];\n    return dx * dx + dy * dy + dz * dz + dw * dw;\n}\n/**\n * Computes the square of the distance between 2 points (same as distanceSq)\n * @param a - vector.\n * @param b - vector.\n * @returns square of the distance between a and b\n */\nconst distSq = distanceSq;\n/**\n * Divides a vector by its Euclidean length and returns the quotient.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The normalized vector.\n */\nfunction normalize(v, dst) {\n    dst = dst || new VecType(4);\n    const v0 = v[0];\n    const v1 = v[1];\n    const v2 = v[2];\n    const v3 = v[3];\n    const len = Math.sqrt(v0 * v0 + v1 * v1 + v2 * v2 + v3 * v3);\n    if (len > 0.00001) {\n        dst[0] = v0 / len;\n        dst[1] = v1 / len;\n        dst[2] = v2 / len;\n        dst[3] = v3 / len;\n    }\n    else {\n        dst[0] = 0;\n        dst[1] = 0;\n        dst[2] = 0;\n        dst[3] = 0;\n    }\n    return dst;\n}\n/**\n * Negates a vector.\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns -v.\n */\nfunction negate(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = -v[0];\n    dst[1] = -v[1];\n    dst[2] = -v[2];\n    dst[3] = -v[3];\n    return dst;\n}\n/**\n * Copies a vector. (same as {@link vec4.clone})\n * Also see {@link vec4.create} and {@link vec4.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nfunction copy(v, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = v[0];\n    dst[1] = v[1];\n    dst[2] = v[2];\n    dst[3] = v[3];\n    return dst;\n}\n/**\n * Clones a vector. (same as {@link vec4.copy})\n * Also see {@link vec4.create} and {@link vec4.set}\n * @param v - The vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns A copy of v.\n */\nconst clone = copy;\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nfunction multiply(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] * b[0];\n    dst[1] = a[1] * b[1];\n    dst[2] = a[2] * b[2];\n    dst[3] = a[3] * b[3];\n    return dst;\n}\n/**\n * Multiplies a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as mul)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of products of entries of a and b.\n */\nconst mul = multiply;\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length.\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nfunction divide(a, b, dst) {\n    dst = dst || new VecType(4);\n    dst[0] = a[0] / b[0];\n    dst[1] = a[1] / b[1];\n    dst[2] = a[2] / b[2];\n    dst[3] = a[3] / b[3];\n    return dst;\n}\n/**\n * Divides a vector by another vector (component-wise); assumes a and\n * b have the same length. (same as divide)\n * @param a - Operand vector.\n * @param b - Operand vector.\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The vector of quotients of entries of a and b.\n */\nconst div = divide;\n/**\n * Zero's a vector\n * @param dst - vector to hold result. If not passed in a new one is created.\n * @returns The zeroed vector.\n */\nfunction zero(dst) {\n    dst = dst || new VecType(4);\n    dst[0] = 0;\n    dst[1] = 0;\n    dst[2] = 0;\n    dst[3] = 0;\n    return dst;\n}\n/**\n * transform vec4 by 4x4 matrix\n * @param v - the vector\n * @param m - The matrix.\n * @param dst - optional vec4 to store result. If not passed a new one is created.\n * @returns the transformed vector\n */\nfunction transformMat4(v, m, dst) {\n    dst = dst || new VecType(4);\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const w = v[3];\n    dst[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    dst[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    dst[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    dst[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return dst;\n}\n\nvar vec4Impl = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    create: create,\n    setDefaultType: setDefaultType$1,\n    fromValues: fromValues,\n    set: set,\n    ceil: ceil,\n    floor: floor,\n    round: round,\n    clamp: clamp,\n    add: add,\n    addScaled: addScaled,\n    subtract: subtract,\n    sub: sub,\n    equalsApproximately: equalsApproximately,\n    equals: equals,\n    lerp: lerp,\n    lerpV: lerpV,\n    max: max,\n    min: min,\n    mulScalar: mulScalar,\n    scale: scale,\n    divScalar: divScalar,\n    inverse: inverse,\n    invert: invert,\n    dot: dot,\n    length: length,\n    len: len,\n    lengthSq: lengthSq,\n    lenSq: lenSq,\n    distance: distance,\n    dist: dist,\n    distanceSq: distanceSq,\n    distSq: distSq,\n    normalize: normalize,\n    negate: negate,\n    copy: copy,\n    clone: clone,\n    multiply: multiply,\n    mul: mul,\n    divide: divide,\n    div: div,\n    zero: zero,\n    transformMat4: transformMat4\n});\n\n/**\n * Sets the type this library creates for all types\n *\n * example:\n *\n * ```\n * setDefaultType(Float64Array);\n * ```\n *\n * @param ctor - the constructor for the type. Either `Float32Array`, `Float64Array`, or `Array`\n */\nfunction setDefaultType(ctor) {\n    setDefaultType$5(ctor);\n    setDefaultType$3(ctor);\n    setDefaultType$2(ctor);\n    setDefaultType$6(ctor);\n    setDefaultType$4(ctor);\n    setDefaultType$1(ctor);\n}\n\n\n//# sourceMappingURL=wgpu-matrix.module.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2dwdS1tYXRyaXgvZGlzdC8yLngvd2dwdS1tYXRyaXgubW9kdWxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLGlCQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0MsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdCQUFnQjtBQUM5QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaUJBQWlCO0FBQy9DLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaUJBQWlCO0FBQy9DLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdCQUFnQjtBQUM5QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlCQUFpQjtBQUMvQyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdCQUFnQjtBQUM3QyxhQUFhLG1CQUFtQixLQUFLO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVELE1BQU07QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaUJBQWlCO0FBQ25ELGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0JBQWdCO0FBQ2xELGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbUJBQW1CLEtBQUs7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixpQkFBaUI7QUFDL0MsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnQkFBZ0I7QUFDOUMsYUFBYSxtQkFBbUIsS0FBSztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFNkk7QUFDN0kiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ucG0tdGVzdC8uL25vZGVfbW9kdWxlcy93Z3B1LW1hdHJpeC9kaXN0LzIueC93Z3B1LW1hdHJpeC5tb2R1bGUuanM/N2Q2YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB3Z3B1LW1hdHJpeEAyLjUuMCwgbGljZW5zZSBNSVQgKi9cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbmxldCBFUFNJTE9OID0gMC4wMDAwMDE7XG4vKipcbiAqIFNldCB0aGUgdmFsdWUgZm9yIEVQU0lMT04gZm9yIHZhcmlvdXMgY2hlY2tzXG4gKiBAcGFyYW0gdiAtIFZhbHVlIHRvIHVzZSBmb3IgRVBTSUxPTi5cbiAqIEByZXR1cm5zIHByZXZpb3VzIHZhbHVlIG9mIEVQU0lMT047XG4gKi9cbmZ1bmN0aW9uIHNldEVwc2lsb24odikge1xuICAgIGNvbnN0IG9sZCA9IEVQU0lMT047XG4gICAgRVBTSUxPTiA9IHY7XG4gICAgcmV0dXJuIG9sZDtcbn1cbi8qKlxuICogQ29udmVydCBkZWdyZWVzIHRvIHJhZGlhbnNcbiAqIEBwYXJhbSBkZWdyZWVzIC0gQW5nbGUgaW4gZGVncmVlc1xuICogQHJldHVybnMgYW5nbGUgY29udmVydGVkIHRvIHJhZGlhbnNcbiAqL1xuZnVuY3Rpb24gZGVnVG9SYWQoZGVncmVlcykge1xuICAgIHJldHVybiBkZWdyZWVzICogTWF0aC5QSSAvIDE4MDtcbn1cbi8qKlxuICogQ29udmVydCByYWRpYW5zIHRvIGRlZ3JlZXNcbiAqIEBwYXJhbSByYWRpYW5zIC0gQW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMgYW5nbGUgY29udmVydGVkIHRvIGRlZ3JlZXNcbiAqL1xuZnVuY3Rpb24gcmFkVG9EZWcocmFkaWFucykge1xuICAgIHJldHVybiByYWRpYW5zICogMTgwIC8gTWF0aC5QSTtcbn1cbi8qKlxuICogTGVycHMgYmV0d2VlbiBhIGFuZCBiIHZpYSB0XG4gKiBAcGFyYW0gYSAtIHN0YXJ0aW5nIHZhbHVlXG4gKiBAcGFyYW0gYiAtIGVuZGluZyB2YWx1ZVxuICogQHBhcmFtIHQgLSB2YWx1ZSB3aGVyZSAwID0gYSBhbmQgMSA9IGJcbiAqIEByZXR1cm5zIGEgKyAoYiAtIGEpICogdFxuICovXG5mdW5jdGlvbiBsZXJwJDQoYSwgYiwgdCkge1xuICAgIHJldHVybiBhICsgKGIgLSBhKSAqIHQ7XG59XG4vKipcbiAqIENvbXB1dGUgdGhlIG9wcG9zaXRlIG9mIGxlcnAuIEdpdmVuIGEgYW5kIGIgYW5kIGEgdmFsdWUgYmV0d2VlblxuICogYSBhbmQgYiByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxLiAwIGlmIGEsIDEgaWYgYi5cbiAqIE5vdGU6IG5vIGNsYW1waW5nIGlzIGRvbmUuXG4gKiBAcGFyYW0gYSAtIHN0YXJ0IHZhbHVlXG4gKiBAcGFyYW0gYiAtIGVuZCB2YWx1ZVxuICogQHBhcmFtIHYgLSB2YWx1ZSBiZXR3ZWVuIGEgYW5kIGJcbiAqIEByZXR1cm5zICh2IC0gYSkgLyAoYiAtIGEpXG4gKi9cbmZ1bmN0aW9uIGludmVyc2VMZXJwKGEsIGIsIHYpIHtcbiAgICBjb25zdCBkID0gYiAtIGE7XG4gICAgcmV0dXJuIChNYXRoLmFicyhiIC0gYSkgPCBFUFNJTE9OKVxuICAgICAgICA/IGFcbiAgICAgICAgOiAodiAtIGEpIC8gZDtcbn1cbi8qKlxuICogQ29tcHV0ZSB0aGUgZXVjbGlkZWFuIG1vZHVsb1xuICpcbiAqIGBgYFxuICogLy8gdGFibGUgZm9yIG4gLyAzXG4gKiAtNSwgLTQsIC0zLCAtMiwgLTEsICAwLCAgMSwgIDIsICAzLCAgNCwgIDUgICA8LSBuXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIC0yICAtMSAgLTAgIC0yICAtMSAgIDAsICAxLCAgMiwgIDAsICAxLCAgMiAgIDwtIG4gJSAzXG4gKiAgMSAgIDIgICAwICAgMSAgIDIgICAwLCAgMSwgIDIsICAwLCAgMSwgIDIgICA8LSBldWNsaWRlYW5Nb2R1bGUobiwgMylcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBuIC0gZGl2aWRlbmRcbiAqIEBwYXJhbSBtIC0gZGl2aXNvclxuICogQHJldHVybnMgdGhlIGV1Y2xpZGVhbiBtb2R1bG8gb2YgbiAvIG1cbiAqL1xuZnVuY3Rpb24gZXVjbGlkZWFuTW9kdWxvKG4sIG0pIHtcbiAgICByZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XG59XG5cbnZhciB1dGlscyA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgZ2V0IEVQU0lMT04gKCkgeyByZXR1cm4gRVBTSUxPTjsgfSxcbiAgICBzZXRFcHNpbG9uOiBzZXRFcHNpbG9uLFxuICAgIGRlZ1RvUmFkOiBkZWdUb1JhZCxcbiAgICByYWRUb0RlZzogcmFkVG9EZWcsXG4gICAgbGVycDogbGVycCQ0LFxuICAgIGludmVyc2VMZXJwOiBpbnZlcnNlTGVycCxcbiAgICBldWNsaWRlYW5Nb2R1bG86IGV1Y2xpZGVhbk1vZHVsb1xufSk7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbi8qKlxuICpcbiAqIFZlYzIgbWF0aCBmdW5jdGlvbnMuXG4gKlxuICogQWxtb3N0IGFsbCBmdW5jdGlvbnMgdGFrZSBhbiBvcHRpb25hbCBgZHN0YCBhcmd1bWVudC4gSWYgaXQgaXMgbm90IHBhc3NlZCBpbiB0aGVcbiAqIGZ1bmN0aW9ucyB3aWxsIGNyZWF0ZSBhIG5ldyBWZWMyLiBJbiBvdGhlciB3b3JkcyB5b3UgY2FuIGRvIHRoaXNcbiAqXG4gKiAgICAgY29uc3QgdiA9IHZlYzIuY3Jvc3ModjEsIHYyKTsgIC8vIENyZWF0ZXMgYSBuZXcgVmVjMiB3aXRoIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHYxIHggdjIuXG4gKlxuICogb3JcbiAqXG4gKiAgICAgY29uc3QgdiA9IHZlYzIuY3JlYXRlKCk7XG4gKiAgICAgdmVjMi5jcm9zcyh2MSwgdjIsIHYpOyAgLy8gUHV0cyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyIGluIHZcbiAqXG4gKiBUaGUgZmlyc3Qgc3R5bGUgaXMgb2Z0ZW4gZWFzaWVyIGJ1dCBkZXBlbmRpbmcgb24gd2hlcmUgaXQncyB1c2VkIGl0IGdlbmVyYXRlcyBnYXJiYWdlIHdoZXJlXG4gKiBhcyB0aGVyZSBpcyBhbG1vc3QgbmV2ZXIgYWxsb2NhdGlvbiB3aXRoIHRoZSBzZWNvbmQgc3R5bGUuXG4gKlxuICogSXQgaXMgYWx3YXlzIHNhZmUgdG8gcGFzcyBhbnkgdmVjdG9yIGFzIHRoZSBkZXN0aW5hdGlvbi4gU28gZm9yIGV4YW1wbGVcbiAqXG4gKiAgICAgdmVjMi5jcm9zcyh2MSwgdjIsIHYxKTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2MVxuICpcbiAqL1xubGV0IFZlY1R5cGUkMiA9IEZsb2F0MzJBcnJheTtcbi8qKlxuICogU2V0cyB0aGUgdHlwZSB0aGlzIGxpYnJhcnkgY3JlYXRlcyBmb3IgYSBWZWMyXG4gKiBAcGFyYW0gY3RvciAtIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUuIEVpdGhlciBgRmxvYXQzMkFycmF5YCwgYEZsb2F0NjRBcnJheWAsIG9yIGBBcnJheWBcbiAqIEByZXR1cm5zIHByZXZpb3VzIGNvbnN0cnVjdG9yIGZvciBWZWMyXG4gKi9cbmZ1bmN0aW9uIHNldERlZmF1bHRUeXBlJDYoY3Rvcikge1xuICAgIGNvbnN0IG9sZFR5cGUgPSBWZWNUeXBlJDI7XG4gICAgVmVjVHlwZSQyID0gY3RvcjtcbiAgICByZXR1cm4gb2xkVHlwZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIFZlYzI7IG1heSBiZSBjYWxsZWQgd2l0aCB4LCB5LCB6IHRvIHNldCBpbml0aWFsIHZhbHVlcy5cbiAqXG4gKiBOb3RlOiBTaW5jZSBwYXNzaW5nIGluIGEgcmF3IEphdmFTY3JpcHQgYXJyYXlcbiAqIGlzIHZhbGlkIGluIGFsbCBjaXJjdW1zdGFuY2VzLCBpZiB5b3Ugd2FudCB0b1xuICogZm9yY2UgYSBKYXZhU2NyaXB0IGFycmF5IGludG8gYSBWZWMyJ3Mgc3BlY2lmaWVkIHR5cGVcbiAqIGl0IHdvdWxkIGJlIGZhc3RlciB0byB1c2VcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IHYgPSB2ZWMyLmNsb25lKHNvbWVKU0FycmF5KTtcbiAqIGBgYFxuICpcbiAqIE5vdGU6IGEgY29uc2VxdWVuY2Ugb2YgdGhlIGltcGxlbWVudGF0aW9uIGlzIGlmIHlvdXIgVmVjMlR5cGUgPSBgQXJyYXlgXG4gKiBpbnN0ZWFkIG9mIGBGbG9hdDMyQXJyYXlgIG9yIGBGbG9hdDY0QXJyYXlgIHRoZW4gYW55IHZhbHVlcyB5b3VcbiAqIGRvbid0IHBhc3MgaW4gd2lsbCBiZSB1bmRlZmluZWQuIFVzdWFsbHkgdGhpcyBpcyBub3QgYW4gaXNzdWUgc2luY2VcbiAqIChhKSB1c2luZyBgQXJyYXlgIGlzIHJhcmUgYW5kIChiKSB1c2luZyBgdmVjMi5jcmVhdGVgIGlzIHVzdWFsbHkgdXNlZFxuICogdG8gY3JlYXRlIGEgVmVjMiB0byBiZSBmaWxsZWQgb3V0IGFzIGluXG4gKlxuICogYGBgXG4gKiBjb25zdCBzdW0gPSB2ZWMyLmNyZWF0ZSgpO1xuICogdmVjMi5hZGQodjEsIHYyLCBzdW0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHggLSBJbml0aWFsIHggdmFsdWUuXG4gKiBAcGFyYW0geSAtIEluaXRpYWwgeSB2YWx1ZS5cbiAqIEByZXR1cm5zIHRoZSBjcmVhdGVkIHZlY3RvclxuICovXG5mdW5jdGlvbiBjcmVhdGUkNSh4ID0gMCwgeSA9IDApIHtcbiAgICBjb25zdCBkc3QgPSBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGlmICh4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHN0WzBdID0geDtcbiAgICAgICAgaWYgKHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHN0WzFdID0geTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuXG4vKlxuICogQ29weXJpZ2h0IDIwMjIgR3JlZ2cgVGF2YXJlc1xuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4gKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksXG4gKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uXG4gKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4gKlxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiAgSU4gTk8gRVZFTlQgU0hBTExcbiAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUlxuICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSBWZWMyOyBtYXkgYmUgY2FsbGVkIHdpdGggeCwgeSwgeiB0byBzZXQgaW5pdGlhbCB2YWx1ZXMuIChzYW1lIGFzIGNyZWF0ZSlcbiAqIEBwYXJhbSB4IC0gSW5pdGlhbCB4IHZhbHVlLlxuICogQHBhcmFtIHkgLSBJbml0aWFsIHkgdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuY29uc3QgZnJvbVZhbHVlcyQzID0gY3JlYXRlJDU7XG4vKipcbiAqIFNldHMgdGhlIHZhbHVlcyBvZiBhIFZlYzJcbiAqIEFsc28gc2VlIHtAbGluayB2ZWMyLmNyZWF0ZX0gYW5kIHtAbGluayB2ZWMyLmNvcHl9XG4gKlxuICogQHBhcmFtIHggZmlyc3QgdmFsdWVcbiAqIEBwYXJhbSB5IHNlY29uZCB2YWx1ZVxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHdpdGggaXRzIGVsZW1lbnRzIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0JDUoeCwgeSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0geDtcbiAgICBkc3RbMV0gPSB5O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5jZWlsIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgY2VpbCBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2VpbCQyKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IE1hdGguY2VpbCh2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmNlaWwodlsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQXBwbGllcyBNYXRoLmZsb29yIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZmxvb3Igb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIGZsb29yJDIodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5mbG9vcih2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmZsb29yKHZbMV0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5yb3VuZCB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIHJvdW5kIG9mIGVhY2ggZWxlbWVudCBvZiB2LlxuICovXG5mdW5jdGlvbiByb3VuZCQyKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IE1hdGgucm91bmQodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5yb3VuZCh2WzFdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDbGFtcCBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yIGJldHdlZW4gbWluIGFuZCBtYXhcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gbWF4IC0gTWluIHZhbHVlLCBkZWZhdWx0IDBcbiAqIEBwYXJhbSBtaW4gLSBNYXggdmFsdWUsIGRlZmF1bHQgMVxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgdGhlIGNsYW1wZWQgdmFsdWUgb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIGNsYW1wJDIodiwgbWluID0gMCwgbWF4ID0gMSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZbMF0pKTtcbiAgICBkc3RbMV0gPSBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdlsxXSkpO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFkZHMgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYSBhbmQgYiBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIHN1bSBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBhZGQkMyhhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBkc3RbMF0gPSBhWzBdICsgYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdICsgYlsxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWN0b3JzLCBzY2FsaW5nIHRoZSAybmQ7IGFzc3VtZXMgYSBhbmQgYiBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHNjYWxlIC0gQW1vdW50IHRvIHNjYWxlIGJcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBzdW0gb2YgYSArIGIgKiBzY2FsZS5cbiAqL1xuZnVuY3Rpb24gYWRkU2NhbGVkJDIoYSwgYiwgc2NhbGUsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIFRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdGhlIDIgdmVjdG9ycy5cbiAqL1xuZnVuY3Rpb24gYW5nbGUkMihhLCBiKSB7XG4gICAgY29uc3QgYXggPSBhWzBdO1xuICAgIGNvbnN0IGF5ID0gYVsxXTtcbiAgICBjb25zdCBieCA9IGFbMF07XG4gICAgY29uc3QgYnkgPSBhWzFdO1xuICAgIGNvbnN0IG1hZzEgPSBNYXRoLnNxcnQoYXggKiBheCArIGF5ICogYXkpO1xuICAgIGNvbnN0IG1hZzIgPSBNYXRoLnNxcnQoYnggKiBieCArIGJ5ICogYnkpO1xuICAgIGNvbnN0IG1hZyA9IG1hZzEgKiBtYWcyO1xuICAgIGNvbnN0IGNvc2luZSA9IG1hZyAmJiBkb3QkMyhhLCBiKSAvIG1hZztcbiAgICByZXR1cm4gTWF0aC5hY29zKGNvc2luZSk7XG59XG4vKipcbiAqIFN1YnRyYWN0cyB0d28gdmVjdG9ycy5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIGRpZmZlcmVuY2Ugb2YgYSBhbmQgYi5cbiAqL1xuZnVuY3Rpb24gc3VidHJhY3QkMyhhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBkc3RbMF0gPSBhWzBdIC0gYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdIC0gYlsxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBkaWZmZXJlbmNlIG9mIGEgYW5kIGIuXG4gKi9cbmNvbnN0IHN1YiQzID0gc3VidHJhY3QkMztcbi8qKlxuICogQ2hlY2sgaWYgMiB2ZWN0b3JzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHRydWUgaWYgdmVjdG9ycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDUoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT047XG59XG4vKipcbiAqIENoZWNrIGlmIDIgdmVjdG9ycyBhcmUgZXhhY3RseSBlcXVhbFxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZlY3RvcnMgYXJlIGV4YWN0bHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzJDUoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV07XG59XG4vKipcbiAqIFBlcmZvcm1zIGxpbmVhciBpbnRlcnBvbGF0aW9uIG9uIHR3byB2ZWN0b3JzLlxuICogR2l2ZW4gdmVjdG9ycyBhIGFuZCBiIGFuZCBpbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50IHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50LlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBsaW5lYXIgaW50ZXJwb2xhdGVkIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gbGVycCQzKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0ICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdCAqIChiWzFdIC0gYVsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUGVyZm9ybXMgbGluZWFyIGludGVycG9sYXRpb24gb24gdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgYW5kIGludGVycG9sYXRpb24gY29lZmZpY2llbnQgdmVjdG9yIHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50cyB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIGxpbmVhciBpbnRlcnBvbGF0ZWQgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBsZXJwViQyKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0WzBdICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdFsxXSAqIChiWzFdIC0gYVsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJuIG1heCB2YWx1ZXMgb2YgdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgcmV0dXJuc1xuICogW21heChhWzBdLCBiWzBdKSwgbWF4KGFbMV0sIGJbMV0pLCBtYXgoYVsyXSwgYlsyXSldLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1heCBjb21wb25lbnRzIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbWF4JDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJuIG1pbiB2YWx1ZXMgb2YgdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgcmV0dXJuc1xuICogW21pbihhWzBdLCBiWzBdKSwgbWluKGFbMV0sIGJbMV0pLCBtaW4oYVsyXSwgYlsyXSldLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1pbiBjb21wb25lbnRzIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbWluJDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gTWF0aC5taW4oYVswXSwgYlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhIHNjYWxhci5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbXVsU2NhbGFyJDModiwgaywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gdlswXSAqIGs7XG4gICAgZHN0WzFdID0gdlsxXSAqIGs7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhIHNjYWxhci4gKHNhbWUgYXMgbXVsU2NhbGFyKVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGsgLSBUaGUgc2NhbGFyLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgdmVjdG9yLlxuICovXG5jb25zdCBzY2FsZSQ1ID0gbXVsU2NhbGFyJDM7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGRpdlNjYWxhciQzKHYsIGssIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IHZbMF0gLyBrO1xuICAgIGRzdFsxXSA9IHZbMV0gLyBrO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEludmVyc2UgYSB2ZWN0b3IuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGludmVydGVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gaW52ZXJzZSQ1KHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IDEgLyB2WzBdO1xuICAgIGRzdFsxXSA9IDEgLyB2WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEludmVydCBhIHZlY3Rvci4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJ0ZWQgdmVjdG9yLlxuICovXG5jb25zdCBpbnZlcnQkNCA9IGludmVyc2UkNTtcbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYm90aCB2ZWN0b3JzIGhhdmVcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdmVjdG9yIG9mIGEgY3Jvc3MgYi5cbiAqL1xuZnVuY3Rpb24gY3Jvc3MkMShhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigzKTtcbiAgICBjb25zdCB6ID0gYVswXSAqIGJbMV0gLSBhWzFdICogYlswXTtcbiAgICBkc3RbMF0gPSAwO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gejtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYm90aCB2ZWN0b3JzIGhhdmVcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRvdCBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIGRvdCQzKGEsIGIpIHtcbiAgICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbGVuZ3RoJDModikge1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSk7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aClcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHZlY3Rvci5cbiAqL1xuY29uc3QgbGVuJDMgPSBsZW5ndGgkMztcbi8qKlxuICogQ29tcHV0ZXMgdGhlIHNxdWFyZSBvZiB0aGUgbGVuZ3RoIG9mIHZlY3RvclxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGxlbmd0aFNxJDModikge1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgcmV0dXJuIHYwICogdjAgKyB2MSAqIHYxO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aFNxKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlblNxJDMgPSBsZW5ndGhTcSQzO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIHBvaW50c1xuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5mdW5jdGlvbiBkaXN0YW5jZSQyKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlKVxuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5jb25zdCBkaXN0JDIgPSBkaXN0YW5jZSQyO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VTcSQyKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlU3EpXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuY29uc3QgZGlzdFNxJDIgPSBkaXN0YW5jZVNxJDI7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgaXRzIEV1Y2xpZGVhbiBsZW5ndGggYW5kIHJldHVybnMgdGhlIHF1b3RpZW50LlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplJDModiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLnNxcnQodjAgKiB2MCArIHYxICogdjEpO1xuICAgIGlmIChsZW4gPiAwLjAwMDAxKSB7XG4gICAgICAgIGRzdFswXSA9IHYwIC8gbGVuO1xuICAgICAgICBkc3RbMV0gPSB2MSAvIGxlbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRzdFswXSA9IDA7XG4gICAgICAgIGRzdFsxXSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE5lZ2F0ZXMgYSB2ZWN0b3IuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgLXYuXG4gKi9cbmZ1bmN0aW9uIG5lZ2F0ZSQ0KHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IC12WzBdO1xuICAgIGRzdFsxXSA9IC12WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzIuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIHZlYzIuY3JlYXRlfSBhbmQge0BsaW5rIHZlYzIuc2V0fVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiB2LlxuICovXG5mdW5jdGlvbiBjb3B5JDUodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDIoMik7XG4gICAgZHN0WzBdID0gdlswXTtcbiAgICBkc3RbMV0gPSB2WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsb25lcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzIuY29weX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgdmVjMi5jcmVhdGV9IGFuZCB7QGxpbmsgdmVjMi5zZXR9XG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIHYuXG4gKi9cbmNvbnN0IGNsb25lJDUgPSBjb3B5JDU7XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB2ZWN0b3Igb2YgcHJvZHVjdHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBtdWx0aXBseSQ1KGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IGFbMF0gKiBiWzBdO1xuICAgIGRzdFsxXSA9IGFbMV0gKiBiWzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC4gKHNhbWUgYXMgbXVsKVxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBwcm9kdWN0cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmNvbnN0IG11bCQ1ID0gbXVsdGlwbHkkNTtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBkaXZpZGUkMihhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBkc3RbMF0gPSBhWzBdIC8gYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdIC8gYlsxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBEaXZpZGVzIGEgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIChjb21wb25lbnQtd2lzZSk7IGFzc3VtZXMgYSBhbmRcbiAqIGIgaGF2ZSB0aGUgc2FtZSBsZW5ndGguIChzYW1lIGFzIGRpdmlkZSlcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB2ZWN0b3Igb2YgcXVvdGllbnRzIG9mIGVudHJpZXMgb2YgYSBhbmQgYi5cbiAqL1xuY29uc3QgZGl2JDIgPSBkaXZpZGUkMjtcbi8qKlxuICogQ3JlYXRlcyBhIHJhbmRvbSB1bml0IHZlY3RvciAqIHNjYWxlXG4gKiBAcGFyYW0gc2NhbGUgLSBEZWZhdWx0IDFcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcmFuZG9tIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gcmFuZG9tJDEoc2NhbGUgPSAxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMigyKTtcbiAgICBjb25zdCBhbmdsZSA9IE1hdGgucmFuZG9tKCkgKiAyICogTWF0aC5QSTtcbiAgICBkc3RbMF0gPSBNYXRoLmNvcyhhbmdsZSkgKiBzY2FsZTtcbiAgICBkc3RbMV0gPSBNYXRoLnNpbihhbmdsZSkgKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBaZXJvJ3MgYSB2ZWN0b3JcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgemVyb2VkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gemVybyQyKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGRzdFswXSA9IDA7XG4gICAgZHN0WzFdID0gMDtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiB0cmFuc2Zvcm0gVmVjMiBieSA0eDQgbWF0cml4XG4gKiBAcGFyYW0gdiAtIHRoZSB2ZWN0b3JcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBvcHRpb25hbCBWZWMyIHRvIHN0b3JlIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSB0cmFuc2Zvcm1lZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtTWF0NCQyKHYsIG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGRzdFswXSA9IHggKiBtWzBdICsgeSAqIG1bNF0gKyBtWzEyXTtcbiAgICBkc3RbMV0gPSB4ICogbVsxXSArIHkgKiBtWzVdICsgbVsxM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB2ZWM0IGJ5IDN4MyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0gdiAtIHRoZSB2ZWN0b3JcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBvcHRpb25hbCBWZWMyIHRvIHN0b3JlIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSB0cmFuc2Zvcm1lZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtTWF0MyQxKHYsIG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQyKDIpO1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGRzdFswXSA9IG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdO1xuICAgIGRzdFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldO1xuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciB2ZWMySW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgY3JlYXRlOiBjcmVhdGUkNSxcbiAgICBzZXREZWZhdWx0VHlwZTogc2V0RGVmYXVsdFR5cGUkNixcbiAgICBmcm9tVmFsdWVzOiBmcm9tVmFsdWVzJDMsXG4gICAgc2V0OiBzZXQkNSxcbiAgICBjZWlsOiBjZWlsJDIsXG4gICAgZmxvb3I6IGZsb29yJDIsXG4gICAgcm91bmQ6IHJvdW5kJDIsXG4gICAgY2xhbXA6IGNsYW1wJDIsXG4gICAgYWRkOiBhZGQkMyxcbiAgICBhZGRTY2FsZWQ6IGFkZFNjYWxlZCQyLFxuICAgIGFuZ2xlOiBhbmdsZSQyLFxuICAgIHN1YnRyYWN0OiBzdWJ0cmFjdCQzLFxuICAgIHN1Yjogc3ViJDMsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSQ1LFxuICAgIGVxdWFsczogZXF1YWxzJDUsXG4gICAgbGVycDogbGVycCQzLFxuICAgIGxlcnBWOiBsZXJwViQyLFxuICAgIG1heDogbWF4JDIsXG4gICAgbWluOiBtaW4kMixcbiAgICBtdWxTY2FsYXI6IG11bFNjYWxhciQzLFxuICAgIHNjYWxlOiBzY2FsZSQ1LFxuICAgIGRpdlNjYWxhcjogZGl2U2NhbGFyJDMsXG4gICAgaW52ZXJzZTogaW52ZXJzZSQ1LFxuICAgIGludmVydDogaW52ZXJ0JDQsXG4gICAgY3Jvc3M6IGNyb3NzJDEsXG4gICAgZG90OiBkb3QkMyxcbiAgICBsZW5ndGg6IGxlbmd0aCQzLFxuICAgIGxlbjogbGVuJDMsXG4gICAgbGVuZ3RoU3E6IGxlbmd0aFNxJDMsXG4gICAgbGVuU3E6IGxlblNxJDMsXG4gICAgZGlzdGFuY2U6IGRpc3RhbmNlJDIsXG4gICAgZGlzdDogZGlzdCQyLFxuICAgIGRpc3RhbmNlU3E6IGRpc3RhbmNlU3EkMixcbiAgICBkaXN0U3E6IGRpc3RTcSQyLFxuICAgIG5vcm1hbGl6ZTogbm9ybWFsaXplJDMsXG4gICAgbmVnYXRlOiBuZWdhdGUkNCxcbiAgICBjb3B5OiBjb3B5JDUsXG4gICAgY2xvbmU6IGNsb25lJDUsXG4gICAgbXVsdGlwbHk6IG11bHRpcGx5JDUsXG4gICAgbXVsOiBtdWwkNSxcbiAgICBkaXZpZGU6IGRpdmlkZSQyLFxuICAgIGRpdjogZGl2JDIsXG4gICAgcmFuZG9tOiByYW5kb20kMSxcbiAgICB6ZXJvOiB6ZXJvJDIsXG4gICAgdHJhbnNmb3JtTWF0NDogdHJhbnNmb3JtTWF0NCQyLFxuICAgIHRyYW5zZm9ybU1hdDM6IHRyYW5zZm9ybU1hdDMkMVxufSk7XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbi8qKlxuICogM3gzIE1hdHJpeCBtYXRoIG1hdGggZnVuY3Rpb25zLlxuICpcbiAqIEFsbW9zdCBhbGwgZnVuY3Rpb25zIHRha2UgYW4gb3B0aW9uYWwgYGRzdGAgYXJndW1lbnQuIElmIGl0IGlzIG5vdCBwYXNzZWQgaW4gdGhlXG4gKiBmdW5jdGlvbnMgd2lsbCBjcmVhdGUgYSBuZXcgbWF0cml4LiBJbiBvdGhlciB3b3JkcyB5b3UgY2FuIGRvIHRoaXNcbiAqXG4gKiAgICAgY29uc3QgbWF0ID0gbWF0My50cmFuc2xhdGlvbihbMSwgMiwgM10pOyAgLy8gQ3JlYXRlcyBhIG5ldyB0cmFuc2xhdGlvbiBtYXRyaXhcbiAqXG4gKiBvclxuICpcbiAqICAgICBjb25zdCBtYXQgPSBtYXQzLmNyZWF0ZSgpO1xuICogICAgIG1hdDMudHJhbnNsYXRpb24oWzEsIDIsIDNdLCBtYXQpOyAgLy8gUHV0cyB0cmFuc2xhdGlvbiBtYXRyaXggaW4gbWF0LlxuICpcbiAqIFRoZSBmaXJzdCBzdHlsZSBpcyBvZnRlbiBlYXNpZXIgYnV0IGRlcGVuZGluZyBvbiB3aGVyZSBpdCdzIHVzZWQgaXQgZ2VuZXJhdGVzIGdhcmJhZ2Ugd2hlcmVcbiAqIGFzIHRoZXJlIGlzIGFsbW9zdCBuZXZlciBhbGxvY2F0aW9uIHdpdGggdGhlIHNlY29uZCBzdHlsZS5cbiAqXG4gKiBJdCBpcyBhbHdheXMgc2F2ZSB0byBwYXNzIGFueSBtYXRyaXggYXMgdGhlIGRlc3RpbmF0aW9uLiBTbyBmb3IgZXhhbXBsZVxuICpcbiAqICAgICBjb25zdCBtYXQgPSBtYXQzLmlkZW50aXR5KCk7XG4gKiAgICAgY29uc3QgdHJhbnMgPSBtYXQzLnRyYW5zbGF0aW9uKFsxLCAyLCAzXSk7XG4gKiAgICAgbWF0My5tdWx0aXBseShtYXQsIHRyYW5zLCBtYXQpOyAgLy8gTXVsdGlwbGllcyBtYXQgKiB0cmFucyBhbmQgcHV0cyByZXN1bHQgaW4gbWF0LlxuICpcbiAqL1xubGV0IE1hdFR5cGUkMSA9IEZsb2F0MzJBcnJheTtcbi8vIFRoaXMgbWVzcyBpcyBiZWNhdXNlIHdpdGggTWF0MyB3ZSBoYXZlIDMgdW51c2VkIGVsZW1lbnRzLlxuLy8gRm9yIEZsb2F0MzJBcnJheSBhbmQgRmxvYXQ2NEFycmF5IHRoYXQncyBub3QgYW4gaXNzdWVcbi8vIGJ1dCBmb3IgQXJyYXkgaXQncyB0cm91Ymxlc29tZVxuY29uc3QgY3Rvck1hcCA9IG5ldyBNYXAoW1xuICAgIFtGbG9hdDMyQXJyYXksICgpID0+IG5ldyBGbG9hdDMyQXJyYXkoMTIpXSxcbiAgICBbRmxvYXQ2NEFycmF5LCAoKSA9PiBuZXcgRmxvYXQ2NEFycmF5KDEyKV0sXG4gICAgW0FycmF5LCAoKSA9PiBuZXcgQXJyYXkoMTIpLmZpbGwoMCldLFxuXSk7XG5sZXQgbmV3TWF0MyA9IGN0b3JNYXAuZ2V0KEZsb2F0MzJBcnJheSk7XG4vKipcbiAqIFNldHMgdGhlIHR5cGUgdGhpcyBsaWJyYXJ5IGNyZWF0ZXMgZm9yIGEgTWF0M1xuICogQHBhcmFtIGN0b3IgLSB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlLiBFaXRoZXIgYEZsb2F0MzJBcnJheWAsIGBGbG9hdDY0QXJyYXlgLCBvciBgQXJyYXlgXG4gKiBAcmV0dXJucyBwcmV2aW91cyBjb25zdHJ1Y3RvciBmb3IgTWF0M1xuICovXG5mdW5jdGlvbiBzZXREZWZhdWx0VHlwZSQ1KGN0b3IpIHtcbiAgICBjb25zdCBvbGRUeXBlID0gTWF0VHlwZSQxO1xuICAgIE1hdFR5cGUkMSA9IGN0b3I7XG4gICAgbmV3TWF0MyA9IGN0b3JNYXAuZ2V0KGN0b3IpO1xuICAgIHJldHVybiBvbGRUeXBlO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBNYXQzIGZyb20gdmFsdWVzXG4gKlxuICogTm90ZTogU2luY2UgcGFzc2luZyBpbiBhIHJhdyBKYXZhU2NyaXB0IGFycmF5XG4gKiBpcyB2YWxpZCBpbiBhbGwgY2lyY3Vtc3RhbmNlcywgaWYgeW91IHdhbnQgdG9cbiAqIGZvcmNlIGEgSmF2YVNjcmlwdCBhcnJheSBpbnRvIGEgTWF0MydzIHNwZWNpZmllZCB0eXBlXG4gKiBpdCB3b3VsZCBiZSBmYXN0ZXIgdG8gdXNlXG4gKlxuICogYGBgXG4gKiBjb25zdCBtID0gbWF0My5jbG9uZShzb21lSlNBcnJheSk7XG4gKiBgYGBcbiAqXG4gKiBOb3RlOiBhIGNvbnNlcXVlbmNlIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBpZiB5b3VyIE1hdDNUeXBlID0gYEFycmF5YFxuICogaW5zdGVhZCBvZiBgRmxvYXQzMkFycmF5YCBvciBgRmxvYXQ2NEFycmF5YCB0aGVuIGFueSB2YWx1ZXMgeW91XG4gKiBkb24ndCBwYXNzIGluIHdpbGwgYmUgdW5kZWZpbmVkLiBVc3VhbGx5IHRoaXMgaXMgbm90IGFuIGlzc3VlIHNpbmNlXG4gKiAoYSkgdXNpbmcgYEFycmF5YCBpcyByYXJlIGFuZCAoYikgdXNpbmcgYG1hdDMuY3JlYXRlYCBpcyB1c3VhbGx5IHVzZWRcbiAqIHRvIGNyZWF0ZSBhIE1hdDMgdG8gYmUgZmlsbGVkIG91dCBhcyBpblxuICpcbiAqIGBgYFxuICogY29uc3QgbSA9IG1hdDMuY3JlYXRlKCk7XG4gKiBtYXQzLnBlcnNwZWN0aXZlKGZvdiwgYXNwZWN0LCBuZWFyLCBmYXIsIG0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHYwIC0gdmFsdWUgZm9yIGVsZW1lbnQgMFxuICogQHBhcmFtIHYxIC0gdmFsdWUgZm9yIGVsZW1lbnQgMVxuICogQHBhcmFtIHYyIC0gdmFsdWUgZm9yIGVsZW1lbnQgMlxuICogQHBhcmFtIHYzIC0gdmFsdWUgZm9yIGVsZW1lbnQgM1xuICogQHBhcmFtIHY0IC0gdmFsdWUgZm9yIGVsZW1lbnQgNFxuICogQHBhcmFtIHY1IC0gdmFsdWUgZm9yIGVsZW1lbnQgNVxuICogQHBhcmFtIHY2IC0gdmFsdWUgZm9yIGVsZW1lbnQgNlxuICogQHBhcmFtIHY3IC0gdmFsdWUgZm9yIGVsZW1lbnQgN1xuICogQHBhcmFtIHY4IC0gdmFsdWUgZm9yIGVsZW1lbnQgOFxuICogQHJldHVybnMgbWF0cml4IGNyZWF0ZWQgZnJvbSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZSQ0KHYwLCB2MSwgdjIsIHYzLCB2NCwgdjUsIHY2LCB2NywgdjgpIHtcbiAgICBjb25zdCBkc3QgPSBuZXdNYXQzKCk7XG4gICAgLy8gdG8gbWFrZSB0aGUgYXJyYXkgaG9tb2dlbm91c1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBpZiAodjAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkc3RbMF0gPSB2MDtcbiAgICAgICAgaWYgKHYxICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzdFsxXSA9IHYxO1xuICAgICAgICAgICAgaWYgKHYyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkc3RbMl0gPSB2MjtcbiAgICAgICAgICAgICAgICBpZiAodjMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBkc3RbNF0gPSB2MztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHY0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs1XSA9IHY0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY1ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbNl0gPSB2NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbOF0gPSB2NjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs5XSA9IHY3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbMTBdID0gdjg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU2V0cyB0aGUgdmFsdWVzIG9mIGEgTWF0M1xuICogQWxzbyBzZWUge0BsaW5rIG1hdDMuY3JlYXRlfSBhbmQge0BsaW5rIG1hdDMuY29weX1cbiAqXG4gKiBAcGFyYW0gdjAgLSB2YWx1ZSBmb3IgZWxlbWVudCAwXG4gKiBAcGFyYW0gdjEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxXG4gKiBAcGFyYW0gdjIgLSB2YWx1ZSBmb3IgZWxlbWVudCAyXG4gKiBAcGFyYW0gdjMgLSB2YWx1ZSBmb3IgZWxlbWVudCAzXG4gKiBAcGFyYW0gdjQgLSB2YWx1ZSBmb3IgZWxlbWVudCA0XG4gKiBAcGFyYW0gdjUgLSB2YWx1ZSBmb3IgZWxlbWVudCA1XG4gKiBAcGFyYW0gdjYgLSB2YWx1ZSBmb3IgZWxlbWVudCA2XG4gKiBAcGFyYW0gdjcgLSB2YWx1ZSBmb3IgZWxlbWVudCA3XG4gKiBAcGFyYW0gdjggLSB2YWx1ZSBmb3IgZWxlbWVudCA4XG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgTWF0MyBzZXQgZnJvbSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIHNldCQ0KHYwLCB2MSwgdjIsIHYzLCB2NCwgdjUsIHY2LCB2NywgdjgsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gdjA7XG4gICAgZHN0WzFdID0gdjE7XG4gICAgZHN0WzJdID0gdjI7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB2MztcbiAgICBkc3RbNV0gPSB2NDtcbiAgICBkc3RbNl0gPSB2NTtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHY2O1xuICAgIGRzdFs5XSA9IHY3O1xuICAgIGRzdFsxMF0gPSB2ODtcbiAgICBkc3RbMTFdID0gMDtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgTWF0MyBmcm9tIHRoZSB1cHBlciBsZWZ0IDN4MyBwYXJ0IG9mIGEgTWF0NFxuICogQHBhcmFtIG00IC0gc291cmNlIG1hdHJpeFxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDMgbWFkZSBmcm9tIG00XG4gKi9cbmZ1bmN0aW9uIGZyb21NYXQ0KG00LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGRzdFswXSA9IG00WzBdO1xuICAgIGRzdFsxXSA9IG00WzFdO1xuICAgIGRzdFsyXSA9IG00WzJdO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gbTRbNF07XG4gICAgZHN0WzVdID0gbTRbNV07XG4gICAgZHN0WzZdID0gbTRbNl07XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSBtNFs4XTtcbiAgICBkc3RbOV0gPSBtNFs5XTtcbiAgICBkc3RbMTBdID0gbTRbMTBdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBNYXQzIHJvdGF0aW9uIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvblxuICogQHBhcmFtIHEgLSBxdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDMgbWFkZSBmcm9tIHFcbiAqL1xuZnVuY3Rpb24gZnJvbVF1YXQkMShxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IHggPSBxWzBdO1xuICAgIGNvbnN0IHkgPSBxWzFdO1xuICAgIGNvbnN0IHogPSBxWzJdO1xuICAgIGNvbnN0IHcgPSBxWzNdO1xuICAgIGNvbnN0IHgyID0geCArIHg7XG4gICAgY29uc3QgeTIgPSB5ICsgeTtcbiAgICBjb25zdCB6MiA9IHogKyB6O1xuICAgIGNvbnN0IHh4ID0geCAqIHgyO1xuICAgIGNvbnN0IHl4ID0geSAqIHgyO1xuICAgIGNvbnN0IHl5ID0geSAqIHkyO1xuICAgIGNvbnN0IHp4ID0geiAqIHgyO1xuICAgIGNvbnN0IHp5ID0geiAqIHkyO1xuICAgIGNvbnN0IHp6ID0geiAqIHoyO1xuICAgIGNvbnN0IHd4ID0gdyAqIHgyO1xuICAgIGNvbnN0IHd5ID0gdyAqIHkyO1xuICAgIGNvbnN0IHd6ID0gdyAqIHoyO1xuICAgIGRzdFswXSA9IDEgLSB5eSAtIHp6O1xuICAgIGRzdFsxXSA9IHl4ICsgd3o7XG4gICAgZHN0WzJdID0genggLSB3eTtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IHl4IC0gd3o7XG4gICAgZHN0WzVdID0gMSAtIHh4IC0geno7XG4gICAgZHN0WzZdID0genkgKyB3eDtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHp4ICsgd3k7XG4gICAgZHN0WzldID0genkgLSB3eDtcbiAgICBkc3RbMTBdID0gMSAtIHh4IC0geXk7XG4gICAgZHN0WzExXSA9IDA7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTmVnYXRlcyBhIG1hdHJpeC5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyAtbS5cbiAqL1xuZnVuY3Rpb24gbmVnYXRlJDMobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBkc3RbMF0gPSAtbVswXTtcbiAgICBkc3RbMV0gPSAtbVsxXTtcbiAgICBkc3RbMl0gPSAtbVsyXTtcbiAgICBkc3RbNF0gPSAtbVs0XTtcbiAgICBkc3RbNV0gPSAtbVs1XTtcbiAgICBkc3RbNl0gPSAtbVs2XTtcbiAgICBkc3RbOF0gPSAtbVs4XTtcbiAgICBkc3RbOV0gPSAtbVs5XTtcbiAgICBkc3RbMTBdID0gLW1bMTBdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIG1hdHJpeC4gKHNhbWUgYXMge0BsaW5rIG1hdDMuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIG1hdDMuY3JlYXRlfSBhbmQge0BsaW5rIG1hdDMuc2V0fVxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIFRoZSBtYXRyaXguIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIGNvcHkgb2YgbS5cbiAqL1xuZnVuY3Rpb24gY29weSQ0KG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gbVswXTtcbiAgICBkc3RbMV0gPSBtWzFdO1xuICAgIGRzdFsyXSA9IG1bMl07XG4gICAgZHN0WzRdID0gbVs0XTtcbiAgICBkc3RbNV0gPSBtWzVdO1xuICAgIGRzdFs2XSA9IG1bNl07XG4gICAgZHN0WzhdID0gbVs4XTtcbiAgICBkc3RbOV0gPSBtWzldO1xuICAgIGRzdFsxMF0gPSBtWzEwXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb3BpZXMgYSBtYXRyaXggKHNhbWUgYXMge0BsaW5rIG1hdDMuY29weX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgbWF0My5jcmVhdGV9IGFuZCB7QGxpbmsgbWF0My5zZXR9XG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gVGhlIG1hdHJpeC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiBtLlxuICovXG5jb25zdCBjbG9uZSQ0ID0gY29weSQ0O1xuLyoqXG4gKiBDaGVjayBpZiAyIG1hdHJpY2VzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSBPcGVyYW5kIG1hdHJpeC5cbiAqIEBwYXJhbSBiIE9wZXJhbmQgbWF0cml4LlxuICogQHJldHVybnMgdHJ1ZSBpZiBtYXRyaWNlcyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDQoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsyXSAtIGJbMl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzRdIC0gYls0XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbNV0gLSBiWzVdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVs2XSAtIGJbNl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzhdIC0gYls4XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbOV0gLSBiWzldKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsxMF0gLSBiWzEwXSkgPCBFUFNJTE9OO1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIG1hdHJpY2VzIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSBPcGVyYW5kIG1hdHJpeC5cbiAqIEBwYXJhbSBiIE9wZXJhbmQgbWF0cml4LlxuICogQHJldHVybnMgdHJ1ZSBpZiBtYXRyaWNlcyBhcmUgZXhhY3RseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHMkNChhLCBiKSB7XG4gICAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiZcbiAgICAgICAgYVsxXSA9PT0gYlsxXSAmJlxuICAgICAgICBhWzJdID09PSBiWzJdICYmXG4gICAgICAgIGFbNF0gPT09IGJbNF0gJiZcbiAgICAgICAgYVs1XSA9PT0gYls1XSAmJlxuICAgICAgICBhWzZdID09PSBiWzZdICYmXG4gICAgICAgIGFbOF0gPT09IGJbOF0gJiZcbiAgICAgICAgYVs5XSA9PT0gYls5XSAmJlxuICAgICAgICBhWzEwXSA9PT0gYlsxMF07XG59XG4vKipcbiAqIENyZWF0ZXMgYSAzLWJ5LTMgaWRlbnRpdHkgbWF0cml4LlxuICpcbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIDMtYnktMyBpZGVudGl0eSBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5JDIoZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBkc3RbMF0gPSAxO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDE7XG4gICAgZHN0WzZdID0gMDtcbiAgICBkc3RbOF0gPSAwO1xuICAgIGRzdFs5XSA9IDA7XG4gICAgZHN0WzEwXSA9IDE7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVGFrZXMgdGhlIHRyYW5zcG9zZSBvZiBhIG1hdHJpeC5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNwb3NlIG9mIG0uXG4gKi9cbmZ1bmN0aW9uIHRyYW5zcG9zZSQxKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgaWYgKGRzdCA9PT0gbSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgLy8gMCAxIDJcbiAgICAgICAgLy8gNCA1IDZcbiAgICAgICAgLy8gOCA5IDEwXG4gICAgICAgIHQgPSBtWzFdO1xuICAgICAgICBtWzFdID0gbVs0XTtcbiAgICAgICAgbVs0XSA9IHQ7XG4gICAgICAgIHQgPSBtWzJdO1xuICAgICAgICBtWzJdID0gbVs4XTtcbiAgICAgICAgbVs4XSA9IHQ7XG4gICAgICAgIHQgPSBtWzZdO1xuICAgICAgICBtWzZdID0gbVs5XTtcbiAgICAgICAgbVs5XSA9IHQ7XG4gICAgICAgIHJldHVybiBkc3Q7XG4gICAgfVxuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGRzdFswXSA9IG0wMDtcbiAgICBkc3RbMV0gPSBtMTA7XG4gICAgZHN0WzJdID0gbTIwO1xuICAgIGRzdFs0XSA9IG0wMTtcbiAgICBkc3RbNV0gPSBtMTE7XG4gICAgZHN0WzZdID0gbTIxO1xuICAgIGRzdFs4XSA9IG0wMjtcbiAgICBkc3RbOV0gPSBtMTI7XG4gICAgZHN0WzEwXSA9IG0yMjtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgaW52ZXJzZSBvZiBhIDMtYnktMyBtYXRyaXguXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGludmVyc2Ugb2YgbS5cbiAqL1xuZnVuY3Rpb24gaW52ZXJzZSQ0KG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgY29uc3QgbTAwID0gbVswICogNCArIDBdO1xuICAgIGNvbnN0IG0wMSA9IG1bMCAqIDQgKyAxXTtcbiAgICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTIwID0gbVsyICogNCArIDBdO1xuICAgIGNvbnN0IG0yMSA9IG1bMiAqIDQgKyAxXTtcbiAgICBjb25zdCBtMjIgPSBtWzIgKiA0ICsgMl07XG4gICAgY29uc3QgYjAxID0gbTIyICogbTExIC0gbTEyICogbTIxO1xuICAgIGNvbnN0IGIxMSA9IC1tMjIgKiBtMTAgKyBtMTIgKiBtMjA7XG4gICAgY29uc3QgYjIxID0gbTIxICogbTEwIC0gbTExICogbTIwO1xuICAgIGNvbnN0IGludkRldCA9IDEgLyAobTAwICogYjAxICsgbTAxICogYjExICsgbTAyICogYjIxKTtcbiAgICBkc3RbMF0gPSBiMDEgKiBpbnZEZXQ7XG4gICAgZHN0WzFdID0gKC1tMjIgKiBtMDEgKyBtMDIgKiBtMjEpICogaW52RGV0O1xuICAgIGRzdFsyXSA9IChtMTIgKiBtMDEgLSBtMDIgKiBtMTEpICogaW52RGV0O1xuICAgIGRzdFs0XSA9IGIxMSAqIGludkRldDtcbiAgICBkc3RbNV0gPSAobTIyICogbTAwIC0gbTAyICogbTIwKSAqIGludkRldDtcbiAgICBkc3RbNl0gPSAoLW0xMiAqIG0wMCArIG0wMiAqIG0xMCkgKiBpbnZEZXQ7XG4gICAgZHN0WzhdID0gYjIxICogaW52RGV0O1xuICAgIGRzdFs5XSA9ICgtbTIxICogbTAwICsgbTAxICogbTIwKSAqIGludkRldDtcbiAgICBkc3RbMTBdID0gKG0xMSAqIG0wMCAtIG0wMSAqIG0xMCkgKiBpbnZEZXQ7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ29tcHV0ZSB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gdGhlIG1hdHJpeFxuICogQHJldHVybnMgdGhlIGRldGVybWluYW50XG4gKi9cbmZ1bmN0aW9uIGRldGVybWluYW50JDEobSkge1xuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIHJldHVybiBtMDAgKiAobTExICogbTIyIC0gbTIxICogbTEyKSAtXG4gICAgICAgIG0xMCAqIChtMDEgKiBtMjIgLSBtMjEgKiBtMDIpICtcbiAgICAgICAgbTIwICogKG0wMSAqIG0xMiAtIG0xMSAqIG0wMik7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBpbnZlcnNlIG9mIGEgMy1ieS0zIG1hdHJpeC4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJzZSBvZiBtLlxuICovXG5jb25zdCBpbnZlcnQkMyA9IGludmVyc2UkNDtcbi8qKlxuICogTXVsdGlwbGllcyB0d28gMy1ieS0zIG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHRcbiAqIEBwYXJhbSBhIC0gVGhlIG1hdHJpeCBvbiB0aGUgbGVmdC5cbiAqIEBwYXJhbSBiIC0gVGhlIG1hdHJpeCBvbiB0aGUgcmlnaHQuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCBwcm9kdWN0IG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5JDQoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBjb25zdCBhMDAgPSBhWzBdO1xuICAgIGNvbnN0IGEwMSA9IGFbMV07XG4gICAgY29uc3QgYTAyID0gYVsyXTtcbiAgICBjb25zdCBhMTAgPSBhWzQgKyAwXTtcbiAgICBjb25zdCBhMTEgPSBhWzQgKyAxXTtcbiAgICBjb25zdCBhMTIgPSBhWzQgKyAyXTtcbiAgICBjb25zdCBhMjAgPSBhWzggKyAwXTtcbiAgICBjb25zdCBhMjEgPSBhWzggKyAxXTtcbiAgICBjb25zdCBhMjIgPSBhWzggKyAyXTtcbiAgICBjb25zdCBiMDAgPSBiWzBdO1xuICAgIGNvbnN0IGIwMSA9IGJbMV07XG4gICAgY29uc3QgYjAyID0gYlsyXTtcbiAgICBjb25zdCBiMTAgPSBiWzQgKyAwXTtcbiAgICBjb25zdCBiMTEgPSBiWzQgKyAxXTtcbiAgICBjb25zdCBiMTIgPSBiWzQgKyAyXTtcbiAgICBjb25zdCBiMjAgPSBiWzggKyAwXTtcbiAgICBjb25zdCBiMjEgPSBiWzggKyAxXTtcbiAgICBjb25zdCBiMjIgPSBiWzggKyAyXTtcbiAgICBkc3RbMF0gPSBhMDAgKiBiMDAgKyBhMTAgKiBiMDEgKyBhMjAgKiBiMDI7XG4gICAgZHN0WzFdID0gYTAxICogYjAwICsgYTExICogYjAxICsgYTIxICogYjAyO1xuICAgIGRzdFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMjtcbiAgICBkc3RbNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTI7XG4gICAgZHN0WzVdID0gYTAxICogYjEwICsgYTExICogYjExICsgYTIxICogYjEyO1xuICAgIGRzdFs2XSA9IGEwMiAqIGIxMCArIGExMiAqIGIxMSArIGEyMiAqIGIxMjtcbiAgICBkc3RbOF0gPSBhMDAgKiBiMjAgKyBhMTAgKiBiMjEgKyBhMjAgKiBiMjI7XG4gICAgZHN0WzldID0gYTAxICogYjIwICsgYTExICogYjIxICsgYTIxICogYjIyO1xuICAgIGRzdFsxMF0gPSBhMDIgKiBiMjAgKyBhMTIgKiBiMjEgKyBhMjIgKiBiMjI7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gMy1ieS0zIG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHQgKHNhbWUgYXMgbXVsdGlwbHkpXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXggb24gdGhlIGxlZnQuXG4gKiBAcGFyYW0gYiAtIFRoZSBtYXRyaXggb24gdGhlIHJpZ2h0LlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtYXRyaXggcHJvZHVjdCBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBtdWwkNCA9IG11bHRpcGx5JDQ7XG4vKipcbiAqIFNldHMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDMtYnktMyBtYXRyaXggdG8gdGhlIGdpdmVuXG4gKiB2ZWN0b3IuXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIHRyYW5zbGF0aW9uIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0VHJhbnNsYXRpb24kMShhLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgaWRlbnRpdHkkMigpO1xuICAgIGlmIChhICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzBdID0gYVswXTtcbiAgICAgICAgZHN0WzFdID0gYVsxXTtcbiAgICAgICAgZHN0WzJdID0gYVsyXTtcbiAgICAgICAgZHN0WzRdID0gYVs0XTtcbiAgICAgICAgZHN0WzVdID0gYVs1XTtcbiAgICAgICAgZHN0WzZdID0gYVs2XTtcbiAgICB9XG4gICAgZHN0WzhdID0gdlswXTtcbiAgICBkc3RbOV0gPSB2WzFdO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDMtYnktMyBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzXG4gKiBlbnRyaWVzLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24kMihtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgY3JlYXRlJDUoKTtcbiAgICBkc3RbMF0gPSBtWzhdO1xuICAgIGRzdFsxXSA9IG1bOV07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJucyBhbiBheGlzIG9mIGEgM3gzIG1hdHJpeCBhcyBhIHZlY3RvciB3aXRoIDIgZW50cmllc1xuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGF4aXMgLSBUaGUgYXhpcyAwID0geCwgMSA9IHksXG4gKiBAcmV0dXJucyBUaGUgYXhpcyBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXhpcyQyKG0sIGF4aXMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkNSgpO1xuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFswXSA9IG1bb2ZmICsgMF07XG4gICAgZHN0WzFdID0gbVtvZmYgKyAxXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTZXRzIGFuIGF4aXMgb2YgYSAzeDMgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggMiBlbnRyaWVzXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIHRoZSBheGlzIHZlY3RvclxuICogQHBhcmFtIGF4aXMgLSBUaGUgYXhpcyAgMCA9IHgsIDEgPSB5O1xuICogQHBhcmFtIGRzdCAtIFRoZSBtYXRyaXggdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIGF4aXMgc2V0LlxuICovXG5mdW5jdGlvbiBzZXRBeGlzJDEobSwgdiwgYXhpcywgZHN0KSB7XG4gICAgaWYgKGRzdCAhPT0gbSkge1xuICAgICAgICBkc3QgPSBjb3B5JDQobSwgZHN0KTtcbiAgICB9XG4gICAgY29uc3Qgb2ZmID0gYXhpcyAqIDQ7XG4gICAgZHN0W29mZiArIDBdID0gdlswXTtcbiAgICBkc3Rbb2ZmICsgMV0gPSB2WzFdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgY29tcG9uZW50IG9mIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gVGhlIE1hdHJpeFxuICogQHBhcmFtIGRzdCAtIFRoZSB2ZWN0b3IgdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICovXG5mdW5jdGlvbiBnZXRTY2FsaW5nJDIobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IGNyZWF0ZSQ1KCk7XG4gICAgY29uc3QgeHggPSBtWzBdO1xuICAgIGNvbnN0IHh5ID0gbVsxXTtcbiAgICBjb25zdCB5eCA9IG1bNF07XG4gICAgY29uc3QgeXkgPSBtWzVdO1xuICAgIGRzdFswXSA9IE1hdGguc3FydCh4eCAqIHh4ICsgeHkgKiB4eSk7XG4gICAgZHN0WzFdID0gTWF0aC5zcXJ0KHl4ICogeXggKyB5eSAqIHl5KTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgMy1ieS0zIG1hdHJpeCB3aGljaCB0cmFuc2xhdGVzIGJ5IHRoZSBnaXZlbiB2ZWN0b3Igdi5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3RvciBieSB3aGljaCB0byB0cmFuc2xhdGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHRyYW5zbGF0aW9uIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gdHJhbnNsYXRpb24kMSh2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGRzdFswXSA9IDE7XG4gICAgZHN0WzFdID0gMDtcbiAgICBkc3RbMl0gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gMTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs4XSA9IHZbMF07XG4gICAgZHN0WzldID0gdlsxXTtcbiAgICBkc3RbMTBdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBnaXZlbiAzLWJ5LTMgbWF0cml4IGJ5IHRoZSBnaXZlbiB2ZWN0b3Igdi5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3RvciBieSB3aGljaCB0byB0cmFuc2xhdGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHRyYW5zbGF0ZWQgbWF0cml4LlxuICovXG5mdW5jdGlvbiB0cmFuc2xhdGUkMShtLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgbTAwID0gbVswXTtcbiAgICBjb25zdCBtMDEgPSBtWzFdO1xuICAgIGNvbnN0IG0wMiA9IG1bMl07XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTIwID0gbVsyICogNCArIDBdO1xuICAgIGNvbnN0IG0yMSA9IG1bMiAqIDQgKyAxXTtcbiAgICBjb25zdCBtMjIgPSBtWzIgKiA0ICsgMl07XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbMF0gPSBtMDA7XG4gICAgICAgIGRzdFsxXSA9IG0wMTtcbiAgICAgICAgZHN0WzJdID0gbTAyO1xuICAgICAgICBkc3RbNF0gPSBtMTA7XG4gICAgICAgIGRzdFs1XSA9IG0xMTtcbiAgICAgICAgZHN0WzZdID0gbTEyO1xuICAgIH1cbiAgICBkc3RbOF0gPSBtMDAgKiB2MCArIG0xMCAqIHYxICsgbTIwO1xuICAgIGRzdFs5XSA9IG0wMSAqIHYwICsgbTExICogdjEgKyBtMjE7XG4gICAgZHN0WzEwXSA9IG0wMiAqIHYwICsgbTEyICogdjEgKyBtMjI7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDMtYnktMyBtYXRyaXggd2hpY2ggcm90YXRlcyAgYnkgdGhlIGdpdmVuIGFuZ2xlLlxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHJvdGF0aW9uIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcm90YXRpb24kMShhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ld01hdDMoKTtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG4gICAgZHN0WzBdID0gYztcbiAgICBkc3RbMV0gPSBzO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzRdID0gLXM7XG4gICAgZHN0WzVdID0gYztcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs4XSA9IDA7XG4gICAgZHN0WzldID0gMDtcbiAgICBkc3RbMTBdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSb3RhdGVzIHRoZSBnaXZlbiAzLWJ5LTMgbWF0cml4ICBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHJvdGF0ZSQxKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBkc3RbMF0gPSBjICogbTAwICsgcyAqIG0xMDtcbiAgICBkc3RbMV0gPSBjICogbTAxICsgcyAqIG0xMTtcbiAgICBkc3RbMl0gPSBjICogbTAyICsgcyAqIG0xMjtcbiAgICBkc3RbNF0gPSBjICogbTEwIC0gcyAqIG0wMDtcbiAgICBkc3RbNV0gPSBjICogbTExIC0gcyAqIG0wMTtcbiAgICBkc3RbNl0gPSBjICogbTEyIC0gcyAqIG0wMjtcbiAgICBpZiAobSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFs4XSA9IG1bOF07XG4gICAgICAgIGRzdFs5XSA9IG1bOV07XG4gICAgICAgIGRzdFsxMF0gPSBtWzEwXTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDMtYnktMyBtYXRyaXggd2hpY2ggc2NhbGVzIGluIGVhY2ggZGltZW5zaW9uIGJ5IGFuIGFtb3VudCBnaXZlbiBieVxuICogdGhlIGNvcnJlc3BvbmRpbmcgZW50cnkgaW4gdGhlIGdpdmVuIHZlY3RvcjsgYXNzdW1lcyB0aGUgdmVjdG9yIGhhcyB0aHJlZVxuICogZW50cmllcy5cbiAqIEBwYXJhbSB2IC0gQSB2ZWN0b3Igb2ZcbiAqICAgICAyIGVudHJpZXMgc3BlY2lmeWluZyB0aGUgZmFjdG9yIGJ5IHdoaWNoIHRvIHNjYWxlIGluIGVhY2ggZGltZW5zaW9uLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsaW5nIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gc2NhbGluZyQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gdlswXTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSB2WzFdO1xuICAgIGRzdFs2XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gMy1ieS0zIG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhbiBhbW91bnRcbiAqIGdpdmVuIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGVudHJ5IGluIHRoZSBnaXZlbiB2ZWN0b3I7IGFzc3VtZXMgdGhlIHZlY3RvciBoYXNcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXggdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0gdiAtIEEgdmVjdG9yIG9mIDIgZW50cmllcyBzcGVjaWZ5aW5nIHRoZVxuICogICAgIGZhY3RvciBieSB3aGljaCB0byBzY2FsZSBpbiBlYWNoIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gc2NhbGUkNChtLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3TWF0MygpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgZHN0WzBdID0gdjAgKiBtWzAgKiA0ICsgMF07XG4gICAgZHN0WzFdID0gdjAgKiBtWzAgKiA0ICsgMV07XG4gICAgZHN0WzJdID0gdjAgKiBtWzAgKiA0ICsgMl07XG4gICAgZHN0WzRdID0gdjEgKiBtWzEgKiA0ICsgMF07XG4gICAgZHN0WzVdID0gdjEgKiBtWzEgKiA0ICsgMV07XG4gICAgZHN0WzZdID0gdjEgKiBtWzEgKiA0ICsgMl07XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbOF0gPSBtWzhdO1xuICAgICAgICBkc3RbOV0gPSBtWzldO1xuICAgICAgICBkc3RbMTBdID0gbVsxMF07XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSAzLWJ5LTMgbWF0cml4IHdoaWNoIHNjYWxlcyB1bmlmb3JtbHkgaW4gZWFjaCBkaW1lbnNpb25cbiAqIEBwYXJhbSBzIC0gQW1vdW50IHRvIHNjYWxlXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxpbmcgbWF0cml4LlxuICovXG5mdW5jdGlvbiB1bmlmb3JtU2NhbGluZyQxKHMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gcztcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSBzO1xuICAgIGRzdFs2XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gMy1ieS0zIG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhbiBhbW91bnRcbiAqIGdpdmVuLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4IHRvIGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHMgLSBBbW91bnQgdG8gc2NhbGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHVuaWZvcm1TY2FsZSQxKG0sIHMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXdNYXQzKCk7XG4gICAgZHN0WzBdID0gcyAqIG1bMCAqIDQgKyAwXTtcbiAgICBkc3RbMV0gPSBzICogbVswICogNCArIDFdO1xuICAgIGRzdFsyXSA9IHMgKiBtWzAgKiA0ICsgMl07XG4gICAgZHN0WzRdID0gcyAqIG1bMSAqIDQgKyAwXTtcbiAgICBkc3RbNV0gPSBzICogbVsxICogNCArIDFdO1xuICAgIGRzdFs2XSA9IHMgKiBtWzEgKiA0ICsgMl07XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbOF0gPSBtWzhdO1xuICAgICAgICBkc3RbOV0gPSBtWzldO1xuICAgICAgICBkc3RbMTBdID0gbVsxMF07XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciBtYXQzSW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgc2V0RGVmYXVsdFR5cGU6IHNldERlZmF1bHRUeXBlJDUsXG4gICAgY3JlYXRlOiBjcmVhdGUkNCxcbiAgICBzZXQ6IHNldCQ0LFxuICAgIGZyb21NYXQ0OiBmcm9tTWF0NCxcbiAgICBmcm9tUXVhdDogZnJvbVF1YXQkMSxcbiAgICBuZWdhdGU6IG5lZ2F0ZSQzLFxuICAgIGNvcHk6IGNvcHkkNCxcbiAgICBjbG9uZTogY2xvbmUkNCxcbiAgICBlcXVhbHNBcHByb3hpbWF0ZWx5OiBlcXVhbHNBcHByb3hpbWF0ZWx5JDQsXG4gICAgZXF1YWxzOiBlcXVhbHMkNCxcbiAgICBpZGVudGl0eTogaWRlbnRpdHkkMixcbiAgICB0cmFuc3Bvc2U6IHRyYW5zcG9zZSQxLFxuICAgIGludmVyc2U6IGludmVyc2UkNCxcbiAgICBkZXRlcm1pbmFudDogZGV0ZXJtaW5hbnQkMSxcbiAgICBpbnZlcnQ6IGludmVydCQzLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQ0LFxuICAgIG11bDogbXVsJDQsXG4gICAgc2V0VHJhbnNsYXRpb246IHNldFRyYW5zbGF0aW9uJDEsXG4gICAgZ2V0VHJhbnNsYXRpb246IGdldFRyYW5zbGF0aW9uJDIsXG4gICAgZ2V0QXhpczogZ2V0QXhpcyQyLFxuICAgIHNldEF4aXM6IHNldEF4aXMkMSxcbiAgICBnZXRTY2FsaW5nOiBnZXRTY2FsaW5nJDIsXG4gICAgdHJhbnNsYXRpb246IHRyYW5zbGF0aW9uJDEsXG4gICAgdHJhbnNsYXRlOiB0cmFuc2xhdGUkMSxcbiAgICByb3RhdGlvbjogcm90YXRpb24kMSxcbiAgICByb3RhdGU6IHJvdGF0ZSQxLFxuICAgIHNjYWxpbmc6IHNjYWxpbmckMSxcbiAgICBzY2FsZTogc2NhbGUkNCxcbiAgICB1bmlmb3JtU2NhbGluZzogdW5pZm9ybVNjYWxpbmckMSxcbiAgICB1bmlmb3JtU2NhbGU6IHVuaWZvcm1TY2FsZSQxXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKlxuICogVmVjMyBtYXRoIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbG1vc3QgYWxsIGZ1bmN0aW9ucyB0YWtlIGFuIG9wdGlvbmFsIGBkc3RgIGFyZ3VtZW50LiBJZiBpdCBpcyBub3QgcGFzc2VkIGluIHRoZVxuICogZnVuY3Rpb25zIHdpbGwgY3JlYXRlIGEgbmV3IGBWZWMzYC4gSW4gb3RoZXIgd29yZHMgeW91IGNhbiBkbyB0aGlzXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWMzLmNyb3NzKHYxLCB2Mik7ICAvLyBDcmVhdGVzIGEgbmV3IFZlYzMgd2l0aCB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyLlxuICpcbiAqIG9yXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWMzLmNyZWF0ZSgpO1xuICogICAgIHZlYzMuY3Jvc3ModjEsIHYyLCB2KTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2XG4gKlxuICogVGhlIGZpcnN0IHN0eWxlIGlzIG9mdGVuIGVhc2llciBidXQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0J3MgdXNlZCBpdCBnZW5lcmF0ZXMgZ2FyYmFnZSB3aGVyZVxuICogYXMgdGhlcmUgaXMgYWxtb3N0IG5ldmVyIGFsbG9jYXRpb24gd2l0aCB0aGUgc2Vjb25kIHN0eWxlLlxuICpcbiAqIEl0IGlzIGFsd2F5cyBzYWZlIHRvIHBhc3MgYW55IHZlY3RvciBhcyB0aGUgZGVzdGluYXRpb24uIFNvIGZvciBleGFtcGxlXG4gKlxuICogICAgIHZlYzMuY3Jvc3ModjEsIHYyLCB2MSk7ICAvLyBQdXRzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHYxIHggdjIgaW4gdjFcbiAqXG4gKi9cbmxldCBWZWNUeXBlJDEgPSBGbG9hdDMyQXJyYXk7XG4vKipcbiAqIFNldHMgdGhlIHR5cGUgdGhpcyBsaWJyYXJ5IGNyZWF0ZXMgZm9yIGEgVmVjM1xuICogQHBhcmFtIGN0b3IgLSB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSB0eXBlLiBFaXRoZXIgYEZsb2F0MzJBcnJheWAsIGBGbG9hdDY0QXJyYXlgLCBvciBgQXJyYXlgXG4gKiBAcmV0dXJucyBwcmV2aW91cyBjb25zdHJ1Y3RvciBmb3IgVmVjM1xuICovXG5mdW5jdGlvbiBzZXREZWZhdWx0VHlwZSQ0KGN0b3IpIHtcbiAgICBjb25zdCBvbGRUeXBlID0gVmVjVHlwZSQxO1xuICAgIFZlY1R5cGUkMSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB2ZWMzOyBtYXkgYmUgY2FsbGVkIHdpdGggeCwgeSwgeiB0byBzZXQgaW5pdGlhbCB2YWx1ZXMuXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gY3JlYXRlJDMoeCwgeSwgeikge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgaWYgKHggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkc3RbMF0gPSB4O1xuICAgICAgICBpZiAoeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkc3RbMV0gPSB5O1xuICAgICAgICAgICAgaWYgKHogIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRzdFsyXSA9IHo7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdmVjMzsgbWF5IGJlIGNhbGxlZCB3aXRoIHgsIHksIHogdG8gc2V0IGluaXRpYWwgdmFsdWVzLiAoc2FtZSBhcyBjcmVhdGUpXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuY29uc3QgZnJvbVZhbHVlcyQyID0gY3JlYXRlJDM7XG4vKipcbiAqIFNldHMgdGhlIHZhbHVlcyBvZiBhIFZlYzNcbiAqIEFsc28gc2VlIHtAbGluayB2ZWMzLmNyZWF0ZX0gYW5kIHtAbGluayB2ZWMzLmNvcHl9XG4gKlxuICogQHBhcmFtIHggZmlyc3QgdmFsdWVcbiAqIEBwYXJhbSB5IHNlY29uZCB2YWx1ZVxuICogQHBhcmFtIHogdGhpcmQgdmFsdWVcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB3aXRoIGl0cyBlbGVtZW50cyBzZXQuXG4gKi9cbmZ1bmN0aW9uIHNldCQzKHgsIHksIHosIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IHg7XG4gICAgZHN0WzFdID0geTtcbiAgICBkc3RbMl0gPSB6O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5jZWlsIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgY2VpbCBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2VpbCQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGguY2VpbCh2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmNlaWwodlsxXSk7XG4gICAgZHN0WzJdID0gTWF0aC5jZWlsKHZbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5mbG9vciB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIGZsb29yIG9mIGVhY2ggZWxlbWVudCBvZiB2LlxuICovXG5mdW5jdGlvbiBmbG9vciQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGguZmxvb3IodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5mbG9vcih2WzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLmZsb29yKHZbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGxpZXMgTWF0aC5yb3VuZCB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIHJvdW5kIG9mIGVhY2ggZWxlbWVudCBvZiB2LlxuICovXG5mdW5jdGlvbiByb3VuZCQxKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGgucm91bmQodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5yb3VuZCh2WzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLnJvdW5kKHZbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsYW1wIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3IgYmV0d2VlbiBtaW4gYW5kIG1heFxuICogQHBhcmFtIHYgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBtYXggLSBNaW4gdmFsdWUsIGRlZmF1bHQgMFxuICogQHBhcmFtIG1pbiAtIE1heCB2YWx1ZSwgZGVmYXVsdCAxXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCB0aGUgY2xhbXBlZCB2YWx1ZSBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2xhbXAkMSh2LCBtaW4gPSAwLCBtYXggPSAxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdlswXSkpO1xuICAgIGRzdFsxXSA9IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2WzFdKSk7XG4gICAgZHN0WzJdID0gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZbMl0pKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBZGRzIHR3byB2ZWN0b3JzOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBzdW0gb2YgYSBhbmQgYi5cbiAqL1xuZnVuY3Rpb24gYWRkJDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSArIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjdG9ycywgc2NhbGluZyB0aGUgMm5kOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBzY2FsZSAtIEFtb3VudCB0byBzY2FsZSBiXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgc3VtIG9mIGEgKyBiICogc2NhbGUuXG4gKi9cbmZ1bmN0aW9uIGFkZFNjYWxlZCQxKGEsIGIsIHNjYWxlLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICAgIGRzdFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl0gKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIFRoZSBhbmdsZSBpbiByYWRpYW5zIGJldHdlZW4gdGhlIDIgdmVjdG9ycy5cbiAqL1xuZnVuY3Rpb24gYW5nbGUkMShhLCBiKSB7XG4gICAgY29uc3QgYXggPSBhWzBdO1xuICAgIGNvbnN0IGF5ID0gYVsxXTtcbiAgICBjb25zdCBheiA9IGFbMl07XG4gICAgY29uc3QgYnggPSBhWzBdO1xuICAgIGNvbnN0IGJ5ID0gYVsxXTtcbiAgICBjb25zdCBieiA9IGFbMl07XG4gICAgY29uc3QgbWFnMSA9IE1hdGguc3FydChheCAqIGF4ICsgYXkgKiBheSArIGF6ICogYXopO1xuICAgIGNvbnN0IG1hZzIgPSBNYXRoLnNxcnQoYnggKiBieCArIGJ5ICogYnkgKyBieiAqIGJ6KTtcbiAgICBjb25zdCBtYWcgPSBtYWcxICogbWFnMjtcbiAgICBjb25zdCBjb3NpbmUgPSBtYWcgJiYgZG90JDIoYSwgYikgLyBtYWc7XG4gICAgcmV0dXJuIE1hdGguYWNvcyhjb3NpbmUpO1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdHdvIHZlY3RvcnMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBkaWZmZXJlbmNlIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIHN1YnRyYWN0JDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSAtIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSAtIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSAtIGJbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byB2ZWN0b3JzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBzdWIkMiA9IHN1YnRyYWN0JDI7XG4vKipcbiAqIENoZWNrIGlmIDIgdmVjdG9ycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZlY3RvcnMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzQXBwcm94aW1hdGVseSQzKGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoYVswXSAtIGJbMF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzFdIC0gYlsxXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMl0gLSBiWzJdKSA8IEVQU0lMT047XG59XG4vKipcbiAqIENoZWNrIGlmIDIgdmVjdG9ycyBhcmUgZXhhY3RseSBlcXVhbFxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZlY3RvcnMgYXJlIGV4YWN0bHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzJDMoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXTtcbn1cbi8qKlxuICogUGVyZm9ybXMgbGluZWFyIGludGVycG9sYXRpb24gb24gdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgYW5kIGludGVycG9sYXRpb24gY29lZmZpY2llbnQgdCwgcmV0dXJuc1xuICogYSArIHQgKiAoYiAtIGEpLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gdCAtIEludGVycG9sYXRpb24gY29lZmZpY2llbnQuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGxpbmVhciBpbnRlcnBvbGF0ZWQgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBsZXJwJDIoYSwgYiwgdCwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSArIHQgKiAoYlswXSAtIGFbMF0pO1xuICAgIGRzdFsxXSA9IGFbMV0gKyB0ICogKGJbMV0gLSBhWzFdKTtcbiAgICBkc3RbMl0gPSBhWzJdICsgdCAqIChiWzJdIC0gYVsyXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUGVyZm9ybXMgbGluZWFyIGludGVycG9sYXRpb24gb24gdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgYW5kIGludGVycG9sYXRpb24gY29lZmZpY2llbnQgdmVjdG9yIHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50cyB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIGxpbmVhciBpbnRlcnBvbGF0ZWQgcmVzdWx0LlxuICovXG5mdW5jdGlvbiBsZXJwViQxKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0WzBdICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdFsxXSAqIChiWzFdIC0gYVsxXSk7XG4gICAgZHN0WzJdID0gYVsyXSArIHRbMl0gKiAoYlsyXSAtIGFbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybiBtYXggdmFsdWVzIG9mIHR3byB2ZWN0b3JzLlxuICogR2l2ZW4gdmVjdG9ycyBhIGFuZCBiIHJldHVybnNcbiAqIFttYXgoYVswXSwgYlswXSksIG1heChhWzFdLCBiWzFdKSwgbWF4KGFbMl0sIGJbMl0pXS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtYXggY29tcG9uZW50cyB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG1heCQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICAgIGRzdFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybiBtaW4gdmFsdWVzIG9mIHR3byB2ZWN0b3JzLlxuICogR2l2ZW4gdmVjdG9ycyBhIGFuZCBiIHJldHVybnNcbiAqIFttaW4oYVswXSwgYlswXSksIG1pbihhWzFdLCBiWzFdKSwgbWluKGFbMl0sIGJbMl0pXS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtaW4gY29tcG9uZW50cyB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG1pbiQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICAgIGRzdFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG11bFNjYWxhciQyKHYsIGssIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IHZbMF0gKiBrO1xuICAgIGRzdFsxXSA9IHZbMV0gKiBrO1xuICAgIGRzdFsyXSA9IHZbMl0gKiBrO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuIChzYW1lIGFzIG11bFNjYWxhcilcbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIHZlY3Rvci5cbiAqL1xuY29uc3Qgc2NhbGUkMyA9IG11bFNjYWxhciQyO1xuLyoqXG4gKiBEaXZpZGVzIGEgdmVjdG9yIGJ5IGEgc2NhbGFyLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGsgLSBUaGUgc2NhbGFyLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBkaXZTY2FsYXIkMih2LCBrLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSB2WzBdIC8gaztcbiAgICBkc3RbMV0gPSB2WzFdIC8gaztcbiAgICBkc3RbMl0gPSB2WzJdIC8gaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBJbnZlcnNlIGEgdmVjdG9yLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBpbnZlcnRlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGludmVyc2UkMyh2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSAxIC8gdlswXTtcbiAgICBkc3RbMV0gPSAxIC8gdlsxXTtcbiAgICBkc3RbMl0gPSAxIC8gdlsyXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBJbnZlcnQgYSB2ZWN0b3IuIChzYW1lIGFzIGludmVyc2UpXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGludmVydGVkIHZlY3Rvci5cbiAqL1xuY29uc3QgaW52ZXJ0JDIgPSBpbnZlcnNlJDM7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWN0b3JzOyBhc3N1bWVzIGJvdGggdmVjdG9ycyBoYXZlXG4gKiB0aHJlZSBlbnRyaWVzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBhIGNyb3NzIGIuXG4gKi9cbmZ1bmN0aW9uIGNyb3NzKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGNvbnN0IHQxID0gYVsyXSAqIGJbMF0gLSBhWzBdICogYlsyXTtcbiAgICBjb25zdCB0MiA9IGFbMF0gKiBiWzFdIC0gYVsxXSAqIGJbMF07XG4gICAgZHN0WzBdID0gYVsxXSAqIGJbMl0gLSBhWzJdICogYlsxXTtcbiAgICBkc3RbMV0gPSB0MTtcbiAgICBkc3RbMl0gPSB0MjtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnM7IGFzc3VtZXMgYm90aCB2ZWN0b3JzIGhhdmVcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRvdCBwcm9kdWN0XG4gKi9cbmZ1bmN0aW9uIGRvdCQyKGEsIGIpIHtcbiAgICByZXR1cm4gKGFbMF0gKiBiWzBdKSArIChhWzFdICogYlsxXSkgKyAoYVsyXSAqIGJbMl0pO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbGVuZ3RoIG9mIHZlY3RvclxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBsZW5ndGgkMih2KSB7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIpO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbGVuZ3RoIG9mIHZlY3RvciAoc2FtZSBhcyBsZW5ndGgpXG4gKiBAcGFyYW0gdiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlbiQyID0gbGVuZ3RoJDI7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBsZW5ndGhTcSQyKHYpIHtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICByZXR1cm4gdjAgKiB2MCArIHYxICogdjEgKyB2MiAqIHYyO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aFNxKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlblNxJDIgPSBsZW5ndGhTcSQyO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIHBvaW50c1xuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5mdW5jdGlvbiBkaXN0YW5jZSQxKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkeik7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlKVxuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5jb25zdCBkaXN0JDEgPSBkaXN0YW5jZSQxO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuZnVuY3Rpb24gZGlzdGFuY2VTcSQxKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlU3EpXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuY29uc3QgZGlzdFNxJDEgPSBkaXN0YW5jZVNxJDE7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgaXRzIEV1Y2xpZGVhbiBsZW5ndGggYW5kIHJldHVybnMgdGhlIHF1b3RpZW50LlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBub3JtYWxpemVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplJDIodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgY29uc3QgbGVuID0gTWF0aC5zcXJ0KHYwICogdjAgKyB2MSAqIHYxICsgdjIgKiB2Mik7XG4gICAgaWYgKGxlbiA+IDAuMDAwMDEpIHtcbiAgICAgICAgZHN0WzBdID0gdjAgLyBsZW47XG4gICAgICAgIGRzdFsxXSA9IHYxIC8gbGVuO1xuICAgICAgICBkc3RbMl0gPSB2MiAvIGxlbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRzdFswXSA9IDA7XG4gICAgICAgIGRzdFsxXSA9IDA7XG4gICAgICAgIGRzdFsyXSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE5lZ2F0ZXMgYSB2ZWN0b3IuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgLXYuXG4gKi9cbmZ1bmN0aW9uIG5lZ2F0ZSQyKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IC12WzBdO1xuICAgIGRzdFsxXSA9IC12WzFdO1xuICAgIGRzdFsyXSA9IC12WzJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzMuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIHZlYzMuY3JlYXRlfSBhbmQge0BsaW5rIHZlYzMuc2V0fVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiB2LlxuICovXG5mdW5jdGlvbiBjb3B5JDModiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gdlswXTtcbiAgICBkc3RbMV0gPSB2WzFdO1xuICAgIGRzdFsyXSA9IHZbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ2xvbmVzIGEgdmVjdG9yLiAoc2FtZSBhcyB7QGxpbmsgdmVjMy5jb3B5fSlcbiAqIEFsc28gc2VlIHtAbGluayB2ZWMzLmNyZWF0ZX0gYW5kIHtAbGluayB2ZWMzLnNldH1cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIGNvcHkgb2Ygdi5cbiAqL1xuY29uc3QgY2xvbmUkMyA9IGNvcHkkMztcbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBwcm9kdWN0cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5JDMoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgZHN0WzBdID0gYVswXSAqIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSAqIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSAqIGJbMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLiAoc2FtZSBhcyBtdWwpXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdmVjdG9yIG9mIHByb2R1Y3RzIG9mIGVudHJpZXMgb2YgYSBhbmQgYi5cbiAqL1xuY29uc3QgbXVsJDMgPSBtdWx0aXBseSQzO1xuLyoqXG4gKiBEaXZpZGVzIGEgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIChjb21wb25lbnQtd2lzZSk7IGFzc3VtZXMgYSBhbmRcbiAqIGIgaGF2ZSB0aGUgc2FtZSBsZW5ndGguXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdmVjdG9yIG9mIHF1b3RpZW50cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIGRpdmlkZSQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IGFbMF0gLyBiWzBdO1xuICAgIGRzdFsxXSA9IGFbMV0gLyBiWzFdO1xuICAgIGRzdFsyXSA9IGFbMl0gLyBiWzJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC4gKHNhbWUgYXMgZGl2aWRlKVxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBkaXYkMSA9IGRpdmlkZSQxO1xuLyoqXG4gKiBDcmVhdGVzIGEgcmFuZG9tIHZlY3RvclxuICogQHBhcmFtIHNjYWxlIC0gRGVmYXVsdCAxXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHJhbmRvbSB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIHJhbmRvbShzY2FsZSA9IDEsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5yYW5kb20oKSAqIDIgKiBNYXRoLlBJO1xuICAgIGNvbnN0IHogPSBNYXRoLnJhbmRvbSgpICogMiAtIDE7XG4gICAgY29uc3QgelNjYWxlID0gTWF0aC5zcXJ0KDEgLSB6ICogeikgKiBzY2FsZTtcbiAgICBkc3RbMF0gPSBNYXRoLmNvcyhhbmdsZSkgKiB6U2NhbGU7XG4gICAgZHN0WzFdID0gTWF0aC5zaW4oYW5nbGUpICogelNjYWxlO1xuICAgIGRzdFsyXSA9IHogKiBzY2FsZTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBaZXJvJ3MgYSB2ZWN0b3JcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgemVyb2VkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gemVybyQxKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGRzdFswXSA9IDA7XG4gICAgZHN0WzFdID0gMDtcbiAgICBkc3RbMl0gPSAwO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIHRyYW5zZm9ybSB2ZWMzIGJ5IDR4NCBtYXRyaXhcbiAqIEBwYXJhbSB2IC0gdGhlIHZlY3RvclxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIG9wdGlvbmFsIHZlYzMgdG8gc3RvcmUgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIHRyYW5zZm9ybWVkIHZlY3RvclxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0JDEodiwgbSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgeCA9IHZbMF07XG4gICAgY29uc3QgeSA9IHZbMV07XG4gICAgY29uc3QgeiA9IHZbMl07XG4gICAgY29uc3QgdyA9IChtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV0pIHx8IDE7XG4gICAgZHN0WzBdID0gKG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdKSAvIHc7XG4gICAgZHN0WzFdID0gKG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdKSAvIHc7XG4gICAgZHN0WzJdID0gKG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSkgLyB3O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFRyYW5zZm9ybSB2ZWM0IGJ5IHVwcGVyIDN4MyBtYXRyaXggaW5zaWRlIDR4NCBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIFRoZSBkaXJlY3Rpb24uXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gb3B0aW9uYWwgVmVjMyB0byBzdG9yZSByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0VXBwZXIzeDModiwgbSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgZHN0WzBdID0gdjAgKiBtWzAgKiA0ICsgMF0gKyB2MSAqIG1bMSAqIDQgKyAwXSArIHYyICogbVsyICogNCArIDBdO1xuICAgIGRzdFsxXSA9IHYwICogbVswICogNCArIDFdICsgdjEgKiBtWzEgKiA0ICsgMV0gKyB2MiAqIG1bMiAqIDQgKyAxXTtcbiAgICBkc3RbMl0gPSB2MCAqIG1bMCAqIDQgKyAyXSArIHYxICogbVsxICogNCArIDJdICsgdjIgKiBtWzIgKiA0ICsgMl07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB2ZWMzIGJ5IDN4MyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0gdiAtIHRoZSB2ZWN0b3JcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBvcHRpb25hbCB2ZWMzIHRvIHN0b3JlIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSB0cmFuc2Zvcm1lZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtTWF0Myh2LCBtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBjb25zdCB4ID0gdlswXTtcbiAgICBjb25zdCB5ID0gdlsxXTtcbiAgICBjb25zdCB6ID0gdlsyXTtcbiAgICBkc3RbMF0gPSB4ICogbVswXSArIHkgKiBtWzRdICsgeiAqIG1bOF07XG4gICAgZHN0WzFdID0geCAqIG1bMV0gKyB5ICogbVs1XSArIHogKiBtWzldO1xuICAgIGRzdFsyXSA9IHggKiBtWzJdICsgeSAqIG1bNl0gKyB6ICogbVsxMF07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB2ZWMzIGJ5IFF1YXRlcm5pb25cbiAqIEBwYXJhbSB2IC0gdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSBxIC0gdGhlIHF1YXRlcm5pb24gdG8gdHJhbnNmb3JtIGJ5XG4gKiBAcGFyYW0gZHN0IC0gb3B0aW9uYWwgdmVjMyB0byBzdG9yZSByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyB0aGUgdHJhbnNmb3JtZWRcbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtUXVhdCh2LCBxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBjb25zdCBxeCA9IHFbMF07XG4gICAgY29uc3QgcXkgPSBxWzFdO1xuICAgIGNvbnN0IHF6ID0gcVsyXTtcbiAgICBjb25zdCB3MiA9IHFbM10gKiAyO1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGNvbnN0IHogPSB2WzJdO1xuICAgIGNvbnN0IHV2WCA9IHF5ICogeiAtIHF6ICogeTtcbiAgICBjb25zdCB1dlkgPSBxeiAqIHggLSBxeCAqIHo7XG4gICAgY29uc3QgdXZaID0gcXggKiB5IC0gcXkgKiB4O1xuICAgIGRzdFswXSA9IHggKyB1dlggKiB3MiArIChxeSAqIHV2WiAtIHF6ICogdXZZKSAqIDI7XG4gICAgZHN0WzFdID0geSArIHV2WSAqIHcyICsgKHF6ICogdXZYIC0gcXggKiB1dlopICogMjtcbiAgICBkc3RbMl0gPSB6ICsgdXZaICogdzIgKyAocXggKiB1dlkgLSBxeSAqIHV2WCkgKiAyO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDQtYnktNCBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzXG4gKiBlbnRyaWVzLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0VHJhbnNsYXRpb24kMShtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUkMSgzKTtcbiAgICBkc3RbMF0gPSBtWzEyXTtcbiAgICBkc3RbMV0gPSBtWzEzXTtcbiAgICBkc3RbMl0gPSBtWzE0XTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIGFuIGF4aXMgb2YgYSA0eDQgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggMyBlbnRyaWVzXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gYXhpcyAtIFRoZSBheGlzIDAgPSB4LCAxID0geSwgMiA9IHo7XG4gKiBAcmV0dXJucyBUaGUgYXhpcyBjb21wb25lbnQgb2YgbS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXhpcyQxKG0sIGF4aXMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSQxKDMpO1xuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFswXSA9IG1bb2ZmICsgMF07XG4gICAgZHN0WzFdID0gbVtvZmYgKyAxXTtcbiAgICBkc3RbMl0gPSBtW29mZiArIDJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgY29tcG9uZW50IG9mIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gVGhlIE1hdHJpeFxuICogQHBhcmFtIGRzdCAtIFRoZSB2ZWN0b3IgdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICovXG5mdW5jdGlvbiBnZXRTY2FsaW5nJDEobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlJDEoMyk7XG4gICAgY29uc3QgeHggPSBtWzBdO1xuICAgIGNvbnN0IHh5ID0gbVsxXTtcbiAgICBjb25zdCB4eiA9IG1bMl07XG4gICAgY29uc3QgeXggPSBtWzRdO1xuICAgIGNvbnN0IHl5ID0gbVs1XTtcbiAgICBjb25zdCB5eiA9IG1bNl07XG4gICAgY29uc3QgenggPSBtWzhdO1xuICAgIGNvbnN0IHp5ID0gbVs5XTtcbiAgICBjb25zdCB6eiA9IG1bMTBdO1xuICAgIGRzdFswXSA9IE1hdGguc3FydCh4eCAqIHh4ICsgeHkgKiB4eSArIHh6ICogeHopO1xuICAgIGRzdFsxXSA9IE1hdGguc3FydCh5eCAqIHl4ICsgeXkgKiB5eSArIHl6ICogeXopO1xuICAgIGRzdFsyXSA9IE1hdGguc3FydCh6eCAqIHp4ICsgenkgKiB6eSArIHp6ICogenopO1xuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciB2ZWMzSW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgY3JlYXRlOiBjcmVhdGUkMyxcbiAgICBzZXREZWZhdWx0VHlwZTogc2V0RGVmYXVsdFR5cGUkNCxcbiAgICBmcm9tVmFsdWVzOiBmcm9tVmFsdWVzJDIsXG4gICAgc2V0OiBzZXQkMyxcbiAgICBjZWlsOiBjZWlsJDEsXG4gICAgZmxvb3I6IGZsb29yJDEsXG4gICAgcm91bmQ6IHJvdW5kJDEsXG4gICAgY2xhbXA6IGNsYW1wJDEsXG4gICAgYWRkOiBhZGQkMixcbiAgICBhZGRTY2FsZWQ6IGFkZFNjYWxlZCQxLFxuICAgIGFuZ2xlOiBhbmdsZSQxLFxuICAgIHN1YnRyYWN0OiBzdWJ0cmFjdCQyLFxuICAgIHN1Yjogc3ViJDIsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSQzLFxuICAgIGVxdWFsczogZXF1YWxzJDMsXG4gICAgbGVycDogbGVycCQyLFxuICAgIGxlcnBWOiBsZXJwViQxLFxuICAgIG1heDogbWF4JDEsXG4gICAgbWluOiBtaW4kMSxcbiAgICBtdWxTY2FsYXI6IG11bFNjYWxhciQyLFxuICAgIHNjYWxlOiBzY2FsZSQzLFxuICAgIGRpdlNjYWxhcjogZGl2U2NhbGFyJDIsXG4gICAgaW52ZXJzZTogaW52ZXJzZSQzLFxuICAgIGludmVydDogaW52ZXJ0JDIsXG4gICAgY3Jvc3M6IGNyb3NzLFxuICAgIGRvdDogZG90JDIsXG4gICAgbGVuZ3RoOiBsZW5ndGgkMixcbiAgICBsZW46IGxlbiQyLFxuICAgIGxlbmd0aFNxOiBsZW5ndGhTcSQyLFxuICAgIGxlblNxOiBsZW5TcSQyLFxuICAgIGRpc3RhbmNlOiBkaXN0YW5jZSQxLFxuICAgIGRpc3Q6IGRpc3QkMSxcbiAgICBkaXN0YW5jZVNxOiBkaXN0YW5jZVNxJDEsXG4gICAgZGlzdFNxOiBkaXN0U3EkMSxcbiAgICBub3JtYWxpemU6IG5vcm1hbGl6ZSQyLFxuICAgIG5lZ2F0ZTogbmVnYXRlJDIsXG4gICAgY29weTogY29weSQzLFxuICAgIGNsb25lOiBjbG9uZSQzLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQzLFxuICAgIG11bDogbXVsJDMsXG4gICAgZGl2aWRlOiBkaXZpZGUkMSxcbiAgICBkaXY6IGRpdiQxLFxuICAgIHJhbmRvbTogcmFuZG9tLFxuICAgIHplcm86IHplcm8kMSxcbiAgICB0cmFuc2Zvcm1NYXQ0OiB0cmFuc2Zvcm1NYXQ0JDEsXG4gICAgdHJhbnNmb3JtTWF0NFVwcGVyM3gzOiB0cmFuc2Zvcm1NYXQ0VXBwZXIzeDMsXG4gICAgdHJhbnNmb3JtTWF0MzogdHJhbnNmb3JtTWF0MyxcbiAgICB0cmFuc2Zvcm1RdWF0OiB0cmFuc2Zvcm1RdWF0LFxuICAgIGdldFRyYW5zbGF0aW9uOiBnZXRUcmFuc2xhdGlvbiQxLFxuICAgIGdldEF4aXM6IGdldEF4aXMkMSxcbiAgICBnZXRTY2FsaW5nOiBnZXRTY2FsaW5nJDFcbn0pO1xuXG4vKipcbiAqIDR4NCBNYXRyaXggbWF0aCBtYXRoIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbG1vc3QgYWxsIGZ1bmN0aW9ucyB0YWtlIGFuIG9wdGlvbmFsIGBkc3RgIGFyZ3VtZW50LiBJZiBpdCBpcyBub3QgcGFzc2VkIGluIHRoZVxuICogZnVuY3Rpb25zIHdpbGwgY3JlYXRlIGEgbmV3IG1hdHJpeC4gSW4gb3RoZXIgd29yZHMgeW91IGNhbiBkbyB0aGlzXG4gKlxuICogICAgIGNvbnN0IG1hdCA9IG1hdDQudHJhbnNsYXRpb24oWzEsIDIsIDNdKTsgIC8vIENyZWF0ZXMgYSBuZXcgdHJhbnNsYXRpb24gbWF0cml4XG4gKlxuICogb3JcbiAqXG4gKiAgICAgY29uc3QgbWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0aW9uKFsxLCAyLCAzXSwgbWF0KTsgIC8vIFB1dHMgdHJhbnNsYXRpb24gbWF0cml4IGluIG1hdC5cbiAqXG4gKiBUaGUgZmlyc3Qgc3R5bGUgaXMgb2Z0ZW4gZWFzaWVyIGJ1dCBkZXBlbmRpbmcgb24gd2hlcmUgaXQncyB1c2VkIGl0IGdlbmVyYXRlcyBnYXJiYWdlIHdoZXJlXG4gKiBhcyB0aGVyZSBpcyBhbG1vc3QgbmV2ZXIgYWxsb2NhdGlvbiB3aXRoIHRoZSBzZWNvbmQgc3R5bGUuXG4gKlxuICogSXQgaXMgYWx3YXlzIHNhdmUgdG8gcGFzcyBhbnkgbWF0cml4IGFzIHRoZSBkZXN0aW5hdGlvbi4gU28gZm9yIGV4YW1wbGVcbiAqXG4gKiAgICAgY29uc3QgbWF0ID0gbWF0NC5pZGVudGl0eSgpO1xuICogICAgIGNvbnN0IHRyYW5zID0gbWF0NC50cmFuc2xhdGlvbihbMSwgMiwgM10pO1xuICogICAgIG1hdDQubXVsdGlwbHkobWF0LCB0cmFucywgbWF0KTsgIC8vIE11bHRpcGxpZXMgbWF0ICogdHJhbnMgYW5kIHB1dHMgcmVzdWx0IGluIG1hdC5cbiAqXG4gKi9cbmxldCBNYXRUeXBlID0gRmxvYXQzMkFycmF5O1xuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIHRoaXMgbGlicmFyeSBjcmVhdGVzIGZvciBhIE1hdDRcbiAqIEBwYXJhbSBjdG9yIC0gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRWl0aGVyIGBGbG9hdDMyQXJyYXlgLCBgRmxvYXQ2NEFycmF5YCwgb3IgYEFycmF5YFxuICogQHJldHVybnMgcHJldmlvdXMgY29uc3RydWN0b3IgZm9yIE1hdDRcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdFR5cGUkMyhjdG9yKSB7XG4gICAgY29uc3Qgb2xkVHlwZSA9IE1hdFR5cGU7XG4gICAgTWF0VHlwZSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZSBhIE1hdDQgZnJvbSB2YWx1ZXNcbiAqXG4gKiBOb3RlOiBTaW5jZSBwYXNzaW5nIGluIGEgcmF3IEphdmFTY3JpcHQgYXJyYXlcbiAqIGlzIHZhbGlkIGluIGFsbCBjaXJjdW1zdGFuY2VzLCBpZiB5b3Ugd2FudCB0b1xuICogZm9yY2UgYSBKYXZhU2NyaXB0IGFycmF5IGludG8gYSBNYXQ0J3Mgc3BlY2lmaWVkIHR5cGVcbiAqIGl0IHdvdWxkIGJlIGZhc3RlciB0byB1c2VcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IG0gPSBtYXQ0LmNsb25lKHNvbWVKU0FycmF5KTtcbiAqIGBgYFxuICpcbiAqIE5vdGU6IGEgY29uc2VxdWVuY2Ugb2YgdGhlIGltcGxlbWVudGF0aW9uIGlzIGlmIHlvdXIgTWF0NFR5cGUgPSBgQXJyYXlgXG4gKiBpbnN0ZWFkIG9mIGBGbG9hdDMyQXJyYXlgIG9yIGBGbG9hdDY0QXJyYXlgIHRoZW4gYW55IHZhbHVlcyB5b3VcbiAqIGRvbid0IHBhc3MgaW4gd2lsbCBiZSB1bmRlZmluZWQuIFVzdWFsbHkgdGhpcyBpcyBub3QgYW4gaXNzdWUgc2luY2VcbiAqIChhKSB1c2luZyBgQXJyYXlgIGlzIHJhcmUgYW5kIChiKSB1c2luZyBgbWF0NC5jcmVhdGVgIGlzIHVzdWFsbHkgdXNlZFxuICogdG8gY3JlYXRlIGEgTWF0NCB0byBiZSBmaWxsZWQgb3V0IGFzIGluXG4gKlxuICogYGBgXG4gKiBjb25zdCBtID0gbWF0NC5jcmVhdGUoKTtcbiAqIG1hdDQucGVyc3BlY3RpdmUoZm92LCBhc3BlY3QsIG5lYXIsIGZhciwgbSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdjAgLSB2YWx1ZSBmb3IgZWxlbWVudCAwXG4gKiBAcGFyYW0gdjEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxXG4gKiBAcGFyYW0gdjIgLSB2YWx1ZSBmb3IgZWxlbWVudCAyXG4gKiBAcGFyYW0gdjMgLSB2YWx1ZSBmb3IgZWxlbWVudCAzXG4gKiBAcGFyYW0gdjQgLSB2YWx1ZSBmb3IgZWxlbWVudCA0XG4gKiBAcGFyYW0gdjUgLSB2YWx1ZSBmb3IgZWxlbWVudCA1XG4gKiBAcGFyYW0gdjYgLSB2YWx1ZSBmb3IgZWxlbWVudCA2XG4gKiBAcGFyYW0gdjcgLSB2YWx1ZSBmb3IgZWxlbWVudCA3XG4gKiBAcGFyYW0gdjggLSB2YWx1ZSBmb3IgZWxlbWVudCA4XG4gKiBAcGFyYW0gdjkgLSB2YWx1ZSBmb3IgZWxlbWVudCA5XG4gKiBAcGFyYW0gdjEwIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTBcbiAqIEBwYXJhbSB2MTEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxMVxuICogQHBhcmFtIHYxMiAtIHZhbHVlIGZvciBlbGVtZW50IDEyXG4gKiBAcGFyYW0gdjEzIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTNcbiAqIEBwYXJhbSB2MTQgLSB2YWx1ZSBmb3IgZWxlbWVudCAxNFxuICogQHBhcmFtIHYxNSAtIHZhbHVlIGZvciBlbGVtZW50IDE1XG4gKiBAcmV0dXJucyBjcmVhdGVkIGZyb20gdmFsdWVzLlxuICovXG5mdW5jdGlvbiBjcmVhdGUkMih2MCwgdjEsIHYyLCB2MywgdjQsIHY1LCB2NiwgdjcsIHY4LCB2OSwgdjEwLCB2MTEsIHYxMiwgdjEzLCB2MTQsIHYxNSkge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBpZiAodjAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkc3RbMF0gPSB2MDtcbiAgICAgICAgaWYgKHYxICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzdFsxXSA9IHYxO1xuICAgICAgICAgICAgaWYgKHYyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkc3RbMl0gPSB2MjtcbiAgICAgICAgICAgICAgICBpZiAodjMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBkc3RbM10gPSB2MztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHY0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs0XSA9IHY0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY1ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbNV0gPSB2NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbNl0gPSB2NjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRzdFs3XSA9IHY3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbOF0gPSB2ODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbOV0gPSB2OTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbMTBdID0gdjEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzExXSA9IHYxMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzEyXSA9IHYxMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkc3RbMTNdID0gdjEzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzE0XSA9IHYxNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHN0WzE1XSA9IHYxNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU2V0cyB0aGUgdmFsdWVzIG9mIGEgTWF0NFxuICogQWxzbyBzZWUge0BsaW5rIG1hdDQuY3JlYXRlfSBhbmQge0BsaW5rIG1hdDQuY29weX1cbiAqXG4gKiBAcGFyYW0gdjAgLSB2YWx1ZSBmb3IgZWxlbWVudCAwXG4gKiBAcGFyYW0gdjEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxXG4gKiBAcGFyYW0gdjIgLSB2YWx1ZSBmb3IgZWxlbWVudCAyXG4gKiBAcGFyYW0gdjMgLSB2YWx1ZSBmb3IgZWxlbWVudCAzXG4gKiBAcGFyYW0gdjQgLSB2YWx1ZSBmb3IgZWxlbWVudCA0XG4gKiBAcGFyYW0gdjUgLSB2YWx1ZSBmb3IgZWxlbWVudCA1XG4gKiBAcGFyYW0gdjYgLSB2YWx1ZSBmb3IgZWxlbWVudCA2XG4gKiBAcGFyYW0gdjcgLSB2YWx1ZSBmb3IgZWxlbWVudCA3XG4gKiBAcGFyYW0gdjggLSB2YWx1ZSBmb3IgZWxlbWVudCA4XG4gKiBAcGFyYW0gdjkgLSB2YWx1ZSBmb3IgZWxlbWVudCA5XG4gKiBAcGFyYW0gdjEwIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTBcbiAqIEBwYXJhbSB2MTEgLSB2YWx1ZSBmb3IgZWxlbWVudCAxMVxuICogQHBhcmFtIHYxMiAtIHZhbHVlIGZvciBlbGVtZW50IDEyXG4gKiBAcGFyYW0gdjEzIC0gdmFsdWUgZm9yIGVsZW1lbnQgMTNcbiAqIEBwYXJhbSB2MTQgLSB2YWx1ZSBmb3IgZWxlbWVudCAxNFxuICogQHBhcmFtIHYxNSAtIHZhbHVlIGZvciBlbGVtZW50IDE1XG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgTWF0NCBjcmVhdGVkIGZyb20gdmFsdWVzLlxuICovXG5mdW5jdGlvbiBzZXQkMih2MCwgdjEsIHYyLCB2MywgdjQsIHY1LCB2NiwgdjcsIHY4LCB2OSwgdjEwLCB2MTEsIHYxMiwgdjEzLCB2MTQsIHYxNSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSB2MDtcbiAgICBkc3RbMV0gPSB2MTtcbiAgICBkc3RbMl0gPSB2MjtcbiAgICBkc3RbM10gPSB2MztcbiAgICBkc3RbNF0gPSB2NDtcbiAgICBkc3RbNV0gPSB2NTtcbiAgICBkc3RbNl0gPSB2NjtcbiAgICBkc3RbN10gPSB2NztcbiAgICBkc3RbOF0gPSB2ODtcbiAgICBkc3RbOV0gPSB2OTtcbiAgICBkc3RbMTBdID0gdjEwO1xuICAgIGRzdFsxMV0gPSB2MTE7XG4gICAgZHN0WzEyXSA9IHYxMjtcbiAgICBkc3RbMTNdID0gdjEzO1xuICAgIGRzdFsxNF0gPSB2MTQ7XG4gICAgZHN0WzE1XSA9IHYxNTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgTWF0NCBmcm9tIGEgTWF0M1xuICogQHBhcmFtIG0zIC0gc291cmNlIG1hdHJpeFxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDQgbWFkZSBmcm9tIG0zXG4gKi9cbmZ1bmN0aW9uIGZyb21NYXQzKG0zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGRzdFswXSA9IG0zWzBdO1xuICAgIGRzdFsxXSA9IG0zWzFdO1xuICAgIGRzdFsyXSA9IG0zWzJdO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gbTNbNF07XG4gICAgZHN0WzVdID0gbTNbNV07XG4gICAgZHN0WzZdID0gbTNbNl07XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSBtM1s4XTtcbiAgICBkc3RbOV0gPSBtM1s5XTtcbiAgICBkc3RbMTBdID0gbTNbMTBdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBNYXQ0IHJvdGF0aW9uIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvblxuICogQHBhcmFtIHEgLSBxdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIE1hdDQgbWFkZSBmcm9tIHFcbiAqL1xuZnVuY3Rpb24gZnJvbVF1YXQocSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCB4ID0gcVswXTtcbiAgICBjb25zdCB5ID0gcVsxXTtcbiAgICBjb25zdCB6ID0gcVsyXTtcbiAgICBjb25zdCB3ID0gcVszXTtcbiAgICBjb25zdCB4MiA9IHggKyB4O1xuICAgIGNvbnN0IHkyID0geSArIHk7XG4gICAgY29uc3QgejIgPSB6ICsgejtcbiAgICBjb25zdCB4eCA9IHggKiB4MjtcbiAgICBjb25zdCB5eCA9IHkgKiB4MjtcbiAgICBjb25zdCB5eSA9IHkgKiB5MjtcbiAgICBjb25zdCB6eCA9IHogKiB4MjtcbiAgICBjb25zdCB6eSA9IHogKiB5MjtcbiAgICBjb25zdCB6eiA9IHogKiB6MjtcbiAgICBjb25zdCB3eCA9IHcgKiB4MjtcbiAgICBjb25zdCB3eSA9IHcgKiB5MjtcbiAgICBjb25zdCB3eiA9IHcgKiB6MjtcbiAgICBkc3RbMF0gPSAxIC0geXkgLSB6ejtcbiAgICBkc3RbMV0gPSB5eCArIHd6O1xuICAgIGRzdFsyXSA9IHp4IC0gd3k7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB5eCAtIHd6O1xuICAgIGRzdFs1XSA9IDEgLSB4eCAtIHp6O1xuICAgIGRzdFs2XSA9IHp5ICsgd3g7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSB6eCArIHd5O1xuICAgIGRzdFs5XSA9IHp5IC0gd3g7XG4gICAgZHN0WzEwXSA9IDEgLSB4eCAtIHl5O1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE5lZ2F0ZXMgYSBtYXRyaXguXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgLW0uXG4gKi9cbmZ1bmN0aW9uIG5lZ2F0ZSQxKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgZHN0WzBdID0gLW1bMF07XG4gICAgZHN0WzFdID0gLW1bMV07XG4gICAgZHN0WzJdID0gLW1bMl07XG4gICAgZHN0WzNdID0gLW1bM107XG4gICAgZHN0WzRdID0gLW1bNF07XG4gICAgZHN0WzVdID0gLW1bNV07XG4gICAgZHN0WzZdID0gLW1bNl07XG4gICAgZHN0WzddID0gLW1bN107XG4gICAgZHN0WzhdID0gLW1bOF07XG4gICAgZHN0WzldID0gLW1bOV07XG4gICAgZHN0WzEwXSA9IC1tWzEwXTtcbiAgICBkc3RbMTFdID0gLW1bMTFdO1xuICAgIGRzdFsxMl0gPSAtbVsxMl07XG4gICAgZHN0WzEzXSA9IC1tWzEzXTtcbiAgICBkc3RbMTRdID0gLW1bMTRdO1xuICAgIGRzdFsxNV0gPSAtbVsxNV07XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ29waWVzIGEgbWF0cml4LiAoc2FtZSBhcyB7QGxpbmsgbWF0NC5jbG9uZX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgbWF0NC5jcmVhdGV9IGFuZCB7QGxpbmsgbWF0NC5zZXR9XG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gZHN0IC0gVGhlIG1hdHJpeC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiBtLlxuICovXG5mdW5jdGlvbiBjb3B5JDIobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSBtWzBdO1xuICAgIGRzdFsxXSA9IG1bMV07XG4gICAgZHN0WzJdID0gbVsyXTtcbiAgICBkc3RbM10gPSBtWzNdO1xuICAgIGRzdFs0XSA9IG1bNF07XG4gICAgZHN0WzVdID0gbVs1XTtcbiAgICBkc3RbNl0gPSBtWzZdO1xuICAgIGRzdFs3XSA9IG1bN107XG4gICAgZHN0WzhdID0gbVs4XTtcbiAgICBkc3RbOV0gPSBtWzldO1xuICAgIGRzdFsxMF0gPSBtWzEwXTtcbiAgICBkc3RbMTFdID0gbVsxMV07XG4gICAgZHN0WzEyXSA9IG1bMTJdO1xuICAgIGRzdFsxM10gPSBtWzEzXTtcbiAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgZHN0WzE1XSA9IG1bMTVdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIG1hdHJpeCAoc2FtZSBhcyB7QGxpbmsgbWF0NC5jb3B5fSlcbiAqIEFsc28gc2VlIHtAbGluayBtYXQ0LmNyZWF0ZX0gYW5kIHtAbGluayBtYXQ0LnNldH1cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBUaGUgbWF0cml4LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIG0uXG4gKi9cbmNvbnN0IGNsb25lJDIgPSBjb3B5JDI7XG4vKipcbiAqIENoZWNrIGlmIDIgbWF0cmljZXMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWxcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCBtYXRyaXguXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgbWF0cml4LlxuICogQHJldHVybnMgdHJ1ZSBpZiBtYXRyaWNlcyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDIoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsyXSAtIGJbMl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzNdIC0gYlszXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbNF0gLSBiWzRdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVs1XSAtIGJbNV0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzZdIC0gYls2XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbN10gLSBiWzddKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVs4XSAtIGJbOF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzldIC0gYls5XSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMTBdIC0gYlsxMF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzExXSAtIGJbMTFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsxMl0gLSBiWzEyXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMTNdIC0gYlsxM10pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzE0XSAtIGJbMTRdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsxNV0gLSBiWzE1XSkgPCBFUFNJTE9OO1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIG1hdHJpY2VzIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgbWF0cml4LlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIG1hdHJpeC5cbiAqIEByZXR1cm5zIHRydWUgaWYgbWF0cmljZXMgYXJlIGV4YWN0bHkgZXF1YWxcbiAqL1xuZnVuY3Rpb24gZXF1YWxzJDIoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmXG4gICAgICAgIGFbMV0gPT09IGJbMV0gJiZcbiAgICAgICAgYVsyXSA9PT0gYlsyXSAmJlxuICAgICAgICBhWzNdID09PSBiWzNdICYmXG4gICAgICAgIGFbNF0gPT09IGJbNF0gJiZcbiAgICAgICAgYVs1XSA9PT0gYls1XSAmJlxuICAgICAgICBhWzZdID09PSBiWzZdICYmXG4gICAgICAgIGFbN10gPT09IGJbN10gJiZcbiAgICAgICAgYVs4XSA9PT0gYls4XSAmJlxuICAgICAgICBhWzldID09PSBiWzldICYmXG4gICAgICAgIGFbMTBdID09PSBiWzEwXSAmJlxuICAgICAgICBhWzExXSA9PT0gYlsxMV0gJiZcbiAgICAgICAgYVsxMl0gPT09IGJbMTJdICYmXG4gICAgICAgIGFbMTNdID09PSBiWzEzXSAmJlxuICAgICAgICBhWzE0XSA9PT0gYlsxNF0gJiZcbiAgICAgICAgYVsxNV0gPT09IGJbMTVdO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IGlkZW50aXR5IG1hdHJpeC5cbiAqXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSA0LWJ5LTQgaWRlbnRpdHkgbWF0cml4LlxuICovXG5mdW5jdGlvbiBpZGVudGl0eSQxKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgZHN0WzBdID0gMTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDE7XG4gICAgZHN0WzZdID0gMDtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IDA7XG4gICAgZHN0WzldID0gMDtcbiAgICBkc3RbMTBdID0gMTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gMDtcbiAgICBkc3RbMTNdID0gMDtcbiAgICBkc3RbMTRdID0gMDtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBUYWtlcyB0aGUgdHJhbnNwb3NlIG9mIGEgbWF0cml4LlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc3Bvc2Ugb2YgbS5cbiAqL1xuZnVuY3Rpb24gdHJhbnNwb3NlKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgaWYgKGRzdCA9PT0gbSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgdCA9IG1bMV07XG4gICAgICAgIG1bMV0gPSBtWzRdO1xuICAgICAgICBtWzRdID0gdDtcbiAgICAgICAgdCA9IG1bMl07XG4gICAgICAgIG1bMl0gPSBtWzhdO1xuICAgICAgICBtWzhdID0gdDtcbiAgICAgICAgdCA9IG1bM107XG4gICAgICAgIG1bM10gPSBtWzEyXTtcbiAgICAgICAgbVsxMl0gPSB0O1xuICAgICAgICB0ID0gbVs2XTtcbiAgICAgICAgbVs2XSA9IG1bOV07XG4gICAgICAgIG1bOV0gPSB0O1xuICAgICAgICB0ID0gbVs3XTtcbiAgICAgICAgbVs3XSA9IG1bMTNdO1xuICAgICAgICBtWzEzXSA9IHQ7XG4gICAgICAgIHQgPSBtWzExXTtcbiAgICAgICAgbVsxMV0gPSBtWzE0XTtcbiAgICAgICAgbVsxNF0gPSB0O1xuICAgICAgICByZXR1cm4gZHN0O1xuICAgIH1cbiAgICBjb25zdCBtMDAgPSBtWzAgKiA0ICsgMF07XG4gICAgY29uc3QgbTAxID0gbVswICogNCArIDFdO1xuICAgIGNvbnN0IG0wMiA9IG1bMCAqIDQgKyAyXTtcbiAgICBjb25zdCBtMDMgPSBtWzAgKiA0ICsgM107XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTEzID0gbVsxICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBtMzAgPSBtWzMgKiA0ICsgMF07XG4gICAgY29uc3QgbTMxID0gbVszICogNCArIDFdO1xuICAgIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgICBjb25zdCBtMzMgPSBtWzMgKiA0ICsgM107XG4gICAgZHN0WzBdID0gbTAwO1xuICAgIGRzdFsxXSA9IG0xMDtcbiAgICBkc3RbMl0gPSBtMjA7XG4gICAgZHN0WzNdID0gbTMwO1xuICAgIGRzdFs0XSA9IG0wMTtcbiAgICBkc3RbNV0gPSBtMTE7XG4gICAgZHN0WzZdID0gbTIxO1xuICAgIGRzdFs3XSA9IG0zMTtcbiAgICBkc3RbOF0gPSBtMDI7XG4gICAgZHN0WzldID0gbTEyO1xuICAgIGRzdFsxMF0gPSBtMjI7XG4gICAgZHN0WzExXSA9IG0zMjtcbiAgICBkc3RbMTJdID0gbTAzO1xuICAgIGRzdFsxM10gPSBtMTM7XG4gICAgZHN0WzE0XSA9IG0yMztcbiAgICBkc3RbMTVdID0gbTMzO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBpbnZlcnNlIG9mIGEgNC1ieS00IG1hdHJpeC5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJzZSBvZiBtLlxuICovXG5mdW5jdGlvbiBpbnZlcnNlJDIobSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCBtMDAgPSBtWzAgKiA0ICsgMF07XG4gICAgY29uc3QgbTAxID0gbVswICogNCArIDFdO1xuICAgIGNvbnN0IG0wMiA9IG1bMCAqIDQgKyAyXTtcbiAgICBjb25zdCBtMDMgPSBtWzAgKiA0ICsgM107XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTEzID0gbVsxICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBtMzAgPSBtWzMgKiA0ICsgMF07XG4gICAgY29uc3QgbTMxID0gbVszICogNCArIDFdO1xuICAgIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgICBjb25zdCBtMzMgPSBtWzMgKiA0ICsgM107XG4gICAgY29uc3QgdG1wMCA9IG0yMiAqIG0zMztcbiAgICBjb25zdCB0bXAxID0gbTMyICogbTIzO1xuICAgIGNvbnN0IHRtcDIgPSBtMTIgKiBtMzM7XG4gICAgY29uc3QgdG1wMyA9IG0zMiAqIG0xMztcbiAgICBjb25zdCB0bXA0ID0gbTEyICogbTIzO1xuICAgIGNvbnN0IHRtcDUgPSBtMjIgKiBtMTM7XG4gICAgY29uc3QgdG1wNiA9IG0wMiAqIG0zMztcbiAgICBjb25zdCB0bXA3ID0gbTMyICogbTAzO1xuICAgIGNvbnN0IHRtcDggPSBtMDIgKiBtMjM7XG4gICAgY29uc3QgdG1wOSA9IG0yMiAqIG0wMztcbiAgICBjb25zdCB0bXAxMCA9IG0wMiAqIG0xMztcbiAgICBjb25zdCB0bXAxMSA9IG0xMiAqIG0wMztcbiAgICBjb25zdCB0bXAxMiA9IG0yMCAqIG0zMTtcbiAgICBjb25zdCB0bXAxMyA9IG0zMCAqIG0yMTtcbiAgICBjb25zdCB0bXAxNCA9IG0xMCAqIG0zMTtcbiAgICBjb25zdCB0bXAxNSA9IG0zMCAqIG0xMTtcbiAgICBjb25zdCB0bXAxNiA9IG0xMCAqIG0yMTtcbiAgICBjb25zdCB0bXAxNyA9IG0yMCAqIG0xMTtcbiAgICBjb25zdCB0bXAxOCA9IG0wMCAqIG0zMTtcbiAgICBjb25zdCB0bXAxOSA9IG0zMCAqIG0wMTtcbiAgICBjb25zdCB0bXAyMCA9IG0wMCAqIG0yMTtcbiAgICBjb25zdCB0bXAyMSA9IG0yMCAqIG0wMTtcbiAgICBjb25zdCB0bXAyMiA9IG0wMCAqIG0xMTtcbiAgICBjb25zdCB0bXAyMyA9IG0xMCAqIG0wMTtcbiAgICBjb25zdCB0MCA9ICh0bXAwICogbTExICsgdG1wMyAqIG0yMSArIHRtcDQgKiBtMzEpIC1cbiAgICAgICAgKHRtcDEgKiBtMTEgKyB0bXAyICogbTIxICsgdG1wNSAqIG0zMSk7XG4gICAgY29uc3QgdDEgPSAodG1wMSAqIG0wMSArIHRtcDYgKiBtMjEgKyB0bXA5ICogbTMxKSAtXG4gICAgICAgICh0bXAwICogbTAxICsgdG1wNyAqIG0yMSArIHRtcDggKiBtMzEpO1xuICAgIGNvbnN0IHQyID0gKHRtcDIgKiBtMDEgKyB0bXA3ICogbTExICsgdG1wMTAgKiBtMzEpIC1cbiAgICAgICAgKHRtcDMgKiBtMDEgKyB0bXA2ICogbTExICsgdG1wMTEgKiBtMzEpO1xuICAgIGNvbnN0IHQzID0gKHRtcDUgKiBtMDEgKyB0bXA4ICogbTExICsgdG1wMTEgKiBtMjEpIC1cbiAgICAgICAgKHRtcDQgKiBtMDEgKyB0bXA5ICogbTExICsgdG1wMTAgKiBtMjEpO1xuICAgIGNvbnN0IGQgPSAxIC8gKG0wMCAqIHQwICsgbTEwICogdDEgKyBtMjAgKiB0MiArIG0zMCAqIHQzKTtcbiAgICBkc3RbMF0gPSBkICogdDA7XG4gICAgZHN0WzFdID0gZCAqIHQxO1xuICAgIGRzdFsyXSA9IGQgKiB0MjtcbiAgICBkc3RbM10gPSBkICogdDM7XG4gICAgZHN0WzRdID0gZCAqICgodG1wMSAqIG0xMCArIHRtcDIgKiBtMjAgKyB0bXA1ICogbTMwKSAtXG4gICAgICAgICh0bXAwICogbTEwICsgdG1wMyAqIG0yMCArIHRtcDQgKiBtMzApKTtcbiAgICBkc3RbNV0gPSBkICogKCh0bXAwICogbTAwICsgdG1wNyAqIG0yMCArIHRtcDggKiBtMzApIC1cbiAgICAgICAgKHRtcDEgKiBtMDAgKyB0bXA2ICogbTIwICsgdG1wOSAqIG0zMCkpO1xuICAgIGRzdFs2XSA9IGQgKiAoKHRtcDMgKiBtMDAgKyB0bXA2ICogbTEwICsgdG1wMTEgKiBtMzApIC1cbiAgICAgICAgKHRtcDIgKiBtMDAgKyB0bXA3ICogbTEwICsgdG1wMTAgKiBtMzApKTtcbiAgICBkc3RbN10gPSBkICogKCh0bXA0ICogbTAwICsgdG1wOSAqIG0xMCArIHRtcDEwICogbTIwKSAtXG4gICAgICAgICh0bXA1ICogbTAwICsgdG1wOCAqIG0xMCArIHRtcDExICogbTIwKSk7XG4gICAgZHN0WzhdID0gZCAqICgodG1wMTIgKiBtMTMgKyB0bXAxNSAqIG0yMyArIHRtcDE2ICogbTMzKSAtXG4gICAgICAgICh0bXAxMyAqIG0xMyArIHRtcDE0ICogbTIzICsgdG1wMTcgKiBtMzMpKTtcbiAgICBkc3RbOV0gPSBkICogKCh0bXAxMyAqIG0wMyArIHRtcDE4ICogbTIzICsgdG1wMjEgKiBtMzMpIC1cbiAgICAgICAgKHRtcDEyICogbTAzICsgdG1wMTkgKiBtMjMgKyB0bXAyMCAqIG0zMykpO1xuICAgIGRzdFsxMF0gPSBkICogKCh0bXAxNCAqIG0wMyArIHRtcDE5ICogbTEzICsgdG1wMjIgKiBtMzMpIC1cbiAgICAgICAgKHRtcDE1ICogbTAzICsgdG1wMTggKiBtMTMgKyB0bXAyMyAqIG0zMykpO1xuICAgIGRzdFsxMV0gPSBkICogKCh0bXAxNyAqIG0wMyArIHRtcDIwICogbTEzICsgdG1wMjMgKiBtMjMpIC1cbiAgICAgICAgKHRtcDE2ICogbTAzICsgdG1wMjEgKiBtMTMgKyB0bXAyMiAqIG0yMykpO1xuICAgIGRzdFsxMl0gPSBkICogKCh0bXAxNCAqIG0yMiArIHRtcDE3ICogbTMyICsgdG1wMTMgKiBtMTIpIC1cbiAgICAgICAgKHRtcDE2ICogbTMyICsgdG1wMTIgKiBtMTIgKyB0bXAxNSAqIG0yMikpO1xuICAgIGRzdFsxM10gPSBkICogKCh0bXAyMCAqIG0zMiArIHRtcDEyICogbTAyICsgdG1wMTkgKiBtMjIpIC1cbiAgICAgICAgKHRtcDE4ICogbTIyICsgdG1wMjEgKiBtMzIgKyB0bXAxMyAqIG0wMikpO1xuICAgIGRzdFsxNF0gPSBkICogKCh0bXAxOCAqIG0xMiArIHRtcDIzICogbTMyICsgdG1wMTUgKiBtMDIpIC1cbiAgICAgICAgKHRtcDIyICogbTMyICsgdG1wMTQgKiBtMDIgKyB0bXAxOSAqIG0xMikpO1xuICAgIGRzdFsxNV0gPSBkICogKCh0bXAyMiAqIG0yMiArIHRtcDE2ICogbTAyICsgdG1wMjEgKiBtMTIpIC1cbiAgICAgICAgKHRtcDIwICogbTEyICsgdG1wMjMgKiBtMjIgKyB0bXAxNyAqIG0wMikpO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGUgdGhlIGRldGVybWluYW50IG9mIGEgbWF0cml4XG4gKiBAcGFyYW0gbSAtIHRoZSBtYXRyaXhcbiAqIEByZXR1cm5zIHRoZSBkZXRlcm1pbmFudFxuICovXG5mdW5jdGlvbiBkZXRlcm1pbmFudChtKSB7XG4gICAgY29uc3QgbTAwID0gbVswICogNCArIDBdO1xuICAgIGNvbnN0IG0wMSA9IG1bMCAqIDQgKyAxXTtcbiAgICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gICAgY29uc3QgbTAzID0gbVswICogNCArIDNdO1xuICAgIGNvbnN0IG0xMCA9IG1bMSAqIDQgKyAwXTtcbiAgICBjb25zdCBtMTEgPSBtWzEgKiA0ICsgMV07XG4gICAgY29uc3QgbTEyID0gbVsxICogNCArIDJdO1xuICAgIGNvbnN0IG0xMyA9IG1bMSAqIDQgKyAzXTtcbiAgICBjb25zdCBtMjAgPSBtWzIgKiA0ICsgMF07XG4gICAgY29uc3QgbTIxID0gbVsyICogNCArIDFdO1xuICAgIGNvbnN0IG0yMiA9IG1bMiAqIDQgKyAyXTtcbiAgICBjb25zdCBtMjMgPSBtWzIgKiA0ICsgM107XG4gICAgY29uc3QgbTMwID0gbVszICogNCArIDBdO1xuICAgIGNvbnN0IG0zMSA9IG1bMyAqIDQgKyAxXTtcbiAgICBjb25zdCBtMzIgPSBtWzMgKiA0ICsgMl07XG4gICAgY29uc3QgbTMzID0gbVszICogNCArIDNdO1xuICAgIGNvbnN0IHRtcDAgPSBtMjIgKiBtMzM7XG4gICAgY29uc3QgdG1wMSA9IG0zMiAqIG0yMztcbiAgICBjb25zdCB0bXAyID0gbTEyICogbTMzO1xuICAgIGNvbnN0IHRtcDMgPSBtMzIgKiBtMTM7XG4gICAgY29uc3QgdG1wNCA9IG0xMiAqIG0yMztcbiAgICBjb25zdCB0bXA1ID0gbTIyICogbTEzO1xuICAgIGNvbnN0IHRtcDYgPSBtMDIgKiBtMzM7XG4gICAgY29uc3QgdG1wNyA9IG0zMiAqIG0wMztcbiAgICBjb25zdCB0bXA4ID0gbTAyICogbTIzO1xuICAgIGNvbnN0IHRtcDkgPSBtMjIgKiBtMDM7XG4gICAgY29uc3QgdG1wMTAgPSBtMDIgKiBtMTM7XG4gICAgY29uc3QgdG1wMTEgPSBtMTIgKiBtMDM7XG4gICAgY29uc3QgdDAgPSAodG1wMCAqIG0xMSArIHRtcDMgKiBtMjEgKyB0bXA0ICogbTMxKSAtXG4gICAgICAgICh0bXAxICogbTExICsgdG1wMiAqIG0yMSArIHRtcDUgKiBtMzEpO1xuICAgIGNvbnN0IHQxID0gKHRtcDEgKiBtMDEgKyB0bXA2ICogbTIxICsgdG1wOSAqIG0zMSkgLVxuICAgICAgICAodG1wMCAqIG0wMSArIHRtcDcgKiBtMjEgKyB0bXA4ICogbTMxKTtcbiAgICBjb25zdCB0MiA9ICh0bXAyICogbTAxICsgdG1wNyAqIG0xMSArIHRtcDEwICogbTMxKSAtXG4gICAgICAgICh0bXAzICogbTAxICsgdG1wNiAqIG0xMSArIHRtcDExICogbTMxKTtcbiAgICBjb25zdCB0MyA9ICh0bXA1ICogbTAxICsgdG1wOCAqIG0xMSArIHRtcDExICogbTIxKSAtXG4gICAgICAgICh0bXA0ICogbTAxICsgdG1wOSAqIG0xMSArIHRtcDEwICogbTIxKTtcbiAgICByZXR1cm4gbTAwICogdDAgKyBtMTAgKiB0MSArIG0yMCAqIHQyICsgbTMwICogdDM7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBpbnZlcnNlIG9mIGEgNC1ieS00IG1hdHJpeC4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJzZSBvZiBtLlxuICovXG5jb25zdCBpbnZlcnQkMSA9IGludmVyc2UkMjtcbi8qKlxuICogTXVsdGlwbGllcyB0d28gNC1ieS00IG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHRcbiAqIEBwYXJhbSBhIC0gVGhlIG1hdHJpeCBvbiB0aGUgbGVmdC5cbiAqIEBwYXJhbSBiIC0gVGhlIG1hdHJpeCBvbiB0aGUgcmlnaHQuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCBwcm9kdWN0IG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5JDIoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCBhMDAgPSBhWzBdO1xuICAgIGNvbnN0IGEwMSA9IGFbMV07XG4gICAgY29uc3QgYTAyID0gYVsyXTtcbiAgICBjb25zdCBhMDMgPSBhWzNdO1xuICAgIGNvbnN0IGExMCA9IGFbNCArIDBdO1xuICAgIGNvbnN0IGExMSA9IGFbNCArIDFdO1xuICAgIGNvbnN0IGExMiA9IGFbNCArIDJdO1xuICAgIGNvbnN0IGExMyA9IGFbNCArIDNdO1xuICAgIGNvbnN0IGEyMCA9IGFbOCArIDBdO1xuICAgIGNvbnN0IGEyMSA9IGFbOCArIDFdO1xuICAgIGNvbnN0IGEyMiA9IGFbOCArIDJdO1xuICAgIGNvbnN0IGEyMyA9IGFbOCArIDNdO1xuICAgIGNvbnN0IGEzMCA9IGFbMTIgKyAwXTtcbiAgICBjb25zdCBhMzEgPSBhWzEyICsgMV07XG4gICAgY29uc3QgYTMyID0gYVsxMiArIDJdO1xuICAgIGNvbnN0IGEzMyA9IGFbMTIgKyAzXTtcbiAgICBjb25zdCBiMDAgPSBiWzBdO1xuICAgIGNvbnN0IGIwMSA9IGJbMV07XG4gICAgY29uc3QgYjAyID0gYlsyXTtcbiAgICBjb25zdCBiMDMgPSBiWzNdO1xuICAgIGNvbnN0IGIxMCA9IGJbNCArIDBdO1xuICAgIGNvbnN0IGIxMSA9IGJbNCArIDFdO1xuICAgIGNvbnN0IGIxMiA9IGJbNCArIDJdO1xuICAgIGNvbnN0IGIxMyA9IGJbNCArIDNdO1xuICAgIGNvbnN0IGIyMCA9IGJbOCArIDBdO1xuICAgIGNvbnN0IGIyMSA9IGJbOCArIDFdO1xuICAgIGNvbnN0IGIyMiA9IGJbOCArIDJdO1xuICAgIGNvbnN0IGIyMyA9IGJbOCArIDNdO1xuICAgIGNvbnN0IGIzMCA9IGJbMTIgKyAwXTtcbiAgICBjb25zdCBiMzEgPSBiWzEyICsgMV07XG4gICAgY29uc3QgYjMyID0gYlsxMiArIDJdO1xuICAgIGNvbnN0IGIzMyA9IGJbMTIgKyAzXTtcbiAgICBkc3RbMF0gPSBhMDAgKiBiMDAgKyBhMTAgKiBiMDEgKyBhMjAgKiBiMDIgKyBhMzAgKiBiMDM7XG4gICAgZHN0WzFdID0gYTAxICogYjAwICsgYTExICogYjAxICsgYTIxICogYjAyICsgYTMxICogYjAzO1xuICAgIGRzdFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMiArIGEzMiAqIGIwMztcbiAgICBkc3RbM10gPSBhMDMgKiBiMDAgKyBhMTMgKiBiMDEgKyBhMjMgKiBiMDIgKyBhMzMgKiBiMDM7XG4gICAgZHN0WzRdID0gYTAwICogYjEwICsgYTEwICogYjExICsgYTIwICogYjEyICsgYTMwICogYjEzO1xuICAgIGRzdFs1XSA9IGEwMSAqIGIxMCArIGExMSAqIGIxMSArIGEyMSAqIGIxMiArIGEzMSAqIGIxMztcbiAgICBkc3RbNl0gPSBhMDIgKiBiMTAgKyBhMTIgKiBiMTEgKyBhMjIgKiBiMTIgKyBhMzIgKiBiMTM7XG4gICAgZHN0WzddID0gYTAzICogYjEwICsgYTEzICogYjExICsgYTIzICogYjEyICsgYTMzICogYjEzO1xuICAgIGRzdFs4XSA9IGEwMCAqIGIyMCArIGExMCAqIGIyMSArIGEyMCAqIGIyMiArIGEzMCAqIGIyMztcbiAgICBkc3RbOV0gPSBhMDEgKiBiMjAgKyBhMTEgKiBiMjEgKyBhMjEgKiBiMjIgKyBhMzEgKiBiMjM7XG4gICAgZHN0WzEwXSA9IGEwMiAqIGIyMCArIGExMiAqIGIyMSArIGEyMiAqIGIyMiArIGEzMiAqIGIyMztcbiAgICBkc3RbMTFdID0gYTAzICogYjIwICsgYTEzICogYjIxICsgYTIzICogYjIyICsgYTMzICogYjIzO1xuICAgIGRzdFsxMl0gPSBhMDAgKiBiMzAgKyBhMTAgKiBiMzEgKyBhMjAgKiBiMzIgKyBhMzAgKiBiMzM7XG4gICAgZHN0WzEzXSA9IGEwMSAqIGIzMCArIGExMSAqIGIzMSArIGEyMSAqIGIzMiArIGEzMSAqIGIzMztcbiAgICBkc3RbMTRdID0gYTAyICogYjMwICsgYTEyICogYjMxICsgYTIyICogYjMyICsgYTMyICogYjMzO1xuICAgIGRzdFsxNV0gPSBhMDMgKiBiMzAgKyBhMTMgKiBiMzEgKyBhMjMgKiBiMzIgKyBhMzMgKiBiMzM7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyB0d28gNC1ieS00IG1hdHJpY2VzIHdpdGggYSBvbiB0aGUgbGVmdCBhbmQgYiBvbiB0aGUgcmlnaHQgKHNhbWUgYXMgbXVsdGlwbHkpXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXggb24gdGhlIGxlZnQuXG4gKiBAcGFyYW0gYiAtIFRoZSBtYXRyaXggb24gdGhlIHJpZ2h0LlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBtYXRyaXggcHJvZHVjdCBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBtdWwkMiA9IG11bHRpcGx5JDI7XG4vKipcbiAqIFNldHMgdGhlIHRyYW5zbGF0aW9uIGNvbXBvbmVudCBvZiBhIDQtYnktNCBtYXRyaXggdG8gdGhlIGdpdmVuXG4gKiB2ZWN0b3IuXG4gKiBAcGFyYW0gYSAtIFRoZSBtYXRyaXguXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIHRyYW5zbGF0aW9uIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0VHJhbnNsYXRpb24oYSwgdiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IGlkZW50aXR5JDEoKTtcbiAgICBpZiAoYSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFswXSA9IGFbMF07XG4gICAgICAgIGRzdFsxXSA9IGFbMV07XG4gICAgICAgIGRzdFsyXSA9IGFbMl07XG4gICAgICAgIGRzdFszXSA9IGFbM107XG4gICAgICAgIGRzdFs0XSA9IGFbNF07XG4gICAgICAgIGRzdFs1XSA9IGFbNV07XG4gICAgICAgIGRzdFs2XSA9IGFbNl07XG4gICAgICAgIGRzdFs3XSA9IGFbN107XG4gICAgICAgIGRzdFs4XSA9IGFbOF07XG4gICAgICAgIGRzdFs5XSA9IGFbOV07XG4gICAgICAgIGRzdFsxMF0gPSBhWzEwXTtcbiAgICAgICAgZHN0WzExXSA9IGFbMTFdO1xuICAgIH1cbiAgICBkc3RbMTJdID0gdlswXTtcbiAgICBkc3RbMTNdID0gdlsxXTtcbiAgICBkc3RbMTRdID0gdlsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0cmFuc2xhdGlvbiBjb21wb25lbnQgb2YgYSA0LWJ5LTQgbWF0cml4IGFzIGEgdmVjdG9yIHdpdGggM1xuICogZW50cmllcy5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNsYXRpb24gY29tcG9uZW50IG9mIG0uXG4gKi9cbmZ1bmN0aW9uIGdldFRyYW5zbGF0aW9uKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkMygpO1xuICAgIGRzdFswXSA9IG1bMTJdO1xuICAgIGRzdFsxXSA9IG1bMTNdO1xuICAgIGRzdFsyXSA9IG1bMTRdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgYW4gYXhpcyBvZiBhIDR4NCBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXNcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBheGlzIC0gVGhlIGF4aXMgMCA9IHgsIDEgPSB5LCAyID0gejtcbiAqIEByZXR1cm5zIFRoZSBheGlzIGNvbXBvbmVudCBvZiBtLlxuICovXG5mdW5jdGlvbiBnZXRBeGlzKG0sIGF4aXMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkMygpO1xuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFswXSA9IG1bb2ZmICsgMF07XG4gICAgZHN0WzFdID0gbVtvZmYgKyAxXTtcbiAgICBkc3RbMl0gPSBtW29mZiArIDJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNldHMgYW4gYXhpcyBvZiBhIDR4NCBtYXRyaXggYXMgYSB2ZWN0b3Igd2l0aCAzIGVudHJpZXNcbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB2IC0gdGhlIGF4aXMgdmVjdG9yXG4gKiBAcGFyYW0gYXhpcyAtIFRoZSBheGlzICAwID0geCwgMSA9IHksIDIgPSB6O1xuICogQHBhcmFtIGRzdCAtIFRoZSBtYXRyaXggdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1hdHJpeCB3aXRoIGF4aXMgc2V0LlxuICovXG5mdW5jdGlvbiBzZXRBeGlzKGEsIHYsIGF4aXMsIGRzdCkge1xuICAgIGlmIChkc3QgIT09IGEpIHtcbiAgICAgICAgZHN0ID0gY29weSQyKGEsIGRzdCk7XG4gICAgfVxuICAgIGNvbnN0IG9mZiA9IGF4aXMgKiA0O1xuICAgIGRzdFtvZmYgKyAwXSA9IHZbMF07XG4gICAgZHN0W29mZiArIDFdID0gdlsxXTtcbiAgICBkc3Rbb2ZmICsgMl0gPSB2WzJdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgY29tcG9uZW50IG9mIHRoZSBtYXRyaXhcbiAqIEBwYXJhbSBtIC0gVGhlIE1hdHJpeFxuICogQHBhcmFtIGRzdCAtIFRoZSB2ZWN0b3IgdG8gc2V0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICovXG5mdW5jdGlvbiBnZXRTY2FsaW5nKG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBjcmVhdGUkMygpO1xuICAgIGNvbnN0IHh4ID0gbVswXTtcbiAgICBjb25zdCB4eSA9IG1bMV07XG4gICAgY29uc3QgeHogPSBtWzJdO1xuICAgIGNvbnN0IHl4ID0gbVs0XTtcbiAgICBjb25zdCB5eSA9IG1bNV07XG4gICAgY29uc3QgeXogPSBtWzZdO1xuICAgIGNvbnN0IHp4ID0gbVs4XTtcbiAgICBjb25zdCB6eSA9IG1bOV07XG4gICAgY29uc3QgenogPSBtWzEwXTtcbiAgICBkc3RbMF0gPSBNYXRoLnNxcnQoeHggKiB4eCArIHh5ICogeHkgKyB4eiAqIHh6KTtcbiAgICBkc3RbMV0gPSBNYXRoLnNxcnQoeXggKiB5eCArIHl5ICogeXkgKyB5eiAqIHl6KTtcbiAgICBkc3RbMl0gPSBNYXRoLnNxcnQoenggKiB6eCArIHp5ICogenkgKyB6eiAqIHp6KTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggZ2l2ZW4gdGhlIGFuZ3VsYXIgaGVpZ2h0XG4gKiBvZiB0aGUgZnJ1c3R1bSwgdGhlIGFzcGVjdCByYXRpbywgYW5kIHRoZSBuZWFyIGFuZCBmYXIgY2xpcHBpbmcgcGxhbmVzLiAgVGhlXG4gKiBhcmd1bWVudHMgZGVmaW5lIGEgZnJ1c3R1bSBleHRlbmRpbmcgaW4gdGhlIG5lZ2F0aXZlIHogZGlyZWN0aW9uLiAgVGhlIGdpdmVuXG4gKiBhbmdsZSBpcyB0aGUgdmVydGljYWwgYW5nbGUgb2YgdGhlIGZydXN0dW0sIGFuZCB0aGUgaG9yaXpvbnRhbCBhbmdsZSBpc1xuICogZGV0ZXJtaW5lZCB0byBwcm9kdWNlIHRoZSBnaXZlbiBhc3BlY3QgcmF0aW8uICBUaGUgYXJndW1lbnRzIG5lYXIgYW5kIGZhciBhcmVcbiAqIHRoZSBkaXN0YW5jZXMgdG8gdGhlIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuICBOb3RlIHRoYXQgbmVhciBhbmQgZmFyXG4gKiBhcmUgbm90IHogY29vcmRpbmF0ZXMsIGJ1dCByYXRoZXIgdGhleSBhcmUgZGlzdGFuY2VzIGFsb25nIHRoZSBuZWdhdGl2ZVxuICogei1heGlzLiAgVGhlIG1hdHJpeCBnZW5lcmF0ZWQgc2VuZHMgdGhlIHZpZXdpbmcgZnJ1c3R1bSB0byB0aGUgdW5pdCBib3guXG4gKiBXZSBhc3N1bWUgYSB1bml0IGJveCBleHRlbmRpbmcgZnJvbSAtMSB0byAxIGluIHRoZSB4IGFuZCB5IGRpbWVuc2lvbnMgYW5kXG4gKiBmcm9tIDAgdG8gMSBpbiB0aGUgeiBkaW1lbnNpb24uXG4gKlxuICogTm90ZTogSWYgeW91IHBhc3MgYEluZmluaXR5YCBmb3IgekZhciB0aGVuIGl0IHdpbGwgcHJvZHVjZSBhIHByb2plY3Rpb24gbWF0cml4XG4gKiByZXR1cm5zIC1JbmZpbml0eSBmb3IgWiB3aGVuIHRyYW5zZm9ybWluZyBjb29yZGluYXRlcyB3aXRoIFogPD0gMCBhbmQgK0luZmluaXR5IGZvciBaXG4gKiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIGZpZWxkT2ZWaWV3WUluUmFkaWFucyAtIFRoZSBjYW1lcmEgYW5nbGUgZnJvbSB0b3AgdG8gYm90dG9tIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBhc3BlY3QgLSBUaGUgYXNwZWN0IHJhdGlvIHdpZHRoIC8gaGVpZ2h0LlxuICogQHBhcmFtIHpOZWFyIC0gVGhlIGRlcHRoIChuZWdhdGl2ZSB6IGNvb3JkaW5hdGUpXG4gKiAgICAgb2YgdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUuXG4gKiBAcGFyYW0gekZhciAtIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBmYXIgY2xpcHBpbmcgcGxhbmUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHBlcnNwZWN0aXZlIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcGVyc3BlY3RpdmUoZmllbGRPZlZpZXdZSW5SYWRpYW5zLCBhc3BlY3QsIHpOZWFyLCB6RmFyLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IGYgPSBNYXRoLnRhbihNYXRoLlBJICogMC41IC0gMC41ICogZmllbGRPZlZpZXdZSW5SYWRpYW5zKTtcbiAgICBkc3RbMF0gPSBmIC8gYXNwZWN0O1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gZjtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMV0gPSAtMTtcbiAgICBkc3RbMTJdID0gMDtcbiAgICBkc3RbMTNdID0gMDtcbiAgICBkc3RbMTVdID0gMDtcbiAgICBpZiAoekZhciA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgZHN0WzEwXSA9IC0xO1xuICAgICAgICBkc3RbMTRdID0gLXpOZWFyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbnYgPSAxIC8gKHpOZWFyIC0gekZhcik7XG4gICAgICAgIGRzdFsxMF0gPSB6RmFyICogcmFuZ2VJbnY7XG4gICAgICAgIGRzdFsxNF0gPSB6RmFyICogek5lYXIgKiByYW5nZUludjtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ29tcHV0ZXMgYSA0LWJ5LTQgb3J0aG9nb25hbCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXggdGhhdCB0cmFuc2Zvcm1zIGZyb21cbiAqIHRoZSBnaXZlbiB0aGUgbGVmdCwgcmlnaHQsIGJvdHRvbSwgYW5kIHRvcCBkaW1lbnNpb25zIHRvIC0xICsxIGluIHgsIGFuZCB5XG4gKiBhbmQgMCB0byArMSBpbiB6LlxuICogQHBhcmFtIGxlZnQgLSBMZWZ0IHNpZGUgb2YgdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUgdmlld3BvcnQuXG4gKiBAcGFyYW0gcmlnaHQgLSBSaWdodCBzaWRlIG9mIHRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lIHZpZXdwb3J0LlxuICogQHBhcmFtIGJvdHRvbSAtIEJvdHRvbSBvZiB0aGUgbmVhciBjbGlwcGluZyBwbGFuZSB2aWV3cG9ydC5cbiAqIEBwYXJhbSB0b3AgLSBUb3Agb2YgdGhlIG5lYXIgY2xpcHBpbmcgcGxhbmUgdmlld3BvcnQuXG4gKiBAcGFyYW0gbmVhciAtIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lLlxuICogQHBhcmFtIGZhciAtIFRoZSBkZXB0aCAobmVnYXRpdmUgeiBjb29yZGluYXRlKVxuICogICAgIG9mIHRoZSBmYXIgY2xpcHBpbmcgcGxhbmUuXG4gKiBAcGFyYW0gZHN0IC0gT3V0cHV0IG1hdHJpeC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBvcnRob2dyYXBoaWMgcHJvamVjdGlvbiBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIG9ydGhvKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGRzdFswXSA9IDIgLyAocmlnaHQgLSBsZWZ0KTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDIgLyAodG9wIC0gYm90dG9tKTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAocmlnaHQgKyBsZWZ0KSAvIChsZWZ0IC0gcmlnaHQpO1xuICAgIGRzdFsxM10gPSAodG9wICsgYm90dG9tKSAvIChib3R0b20gLSB0b3ApO1xuICAgIGRzdFsxNF0gPSBuZWFyIC8gKG5lYXIgLSBmYXIpO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGVzIGEgNC1ieS00IHBlcnNwZWN0aXZlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBnaXZlbiB0aGUgbGVmdCwgcmlnaHQsXG4gKiB0b3AsIGJvdHRvbSwgbmVhciBhbmQgZmFyIGNsaXBwaW5nIHBsYW5lcy4gVGhlIGFyZ3VtZW50cyBkZWZpbmUgYSBmcnVzdHVtXG4gKiBleHRlbmRpbmcgaW4gdGhlIG5lZ2F0aXZlIHogZGlyZWN0aW9uLiBUaGUgYXJndW1lbnRzIG5lYXIgYW5kIGZhciBhcmUgdGhlXG4gKiBkaXN0YW5jZXMgdG8gdGhlIG5lYXIgYW5kIGZhciBjbGlwcGluZyBwbGFuZXMuIE5vdGUgdGhhdCBuZWFyIGFuZCBmYXIgYXJlIG5vdFxuICogeiBjb29yZGluYXRlcywgYnV0IHJhdGhlciB0aGV5IGFyZSBkaXN0YW5jZXMgYWxvbmcgdGhlIG5lZ2F0aXZlIHotYXhpcy4gVGhlXG4gKiBtYXRyaXggZ2VuZXJhdGVkIHNlbmRzIHRoZSB2aWV3aW5nIGZydXN0dW0gdG8gdGhlIHVuaXQgYm94LiBXZSBhc3N1bWUgYSB1bml0XG4gKiBib3ggZXh0ZW5kaW5nIGZyb20gLTEgdG8gMSBpbiB0aGUgeCBhbmQgeSBkaW1lbnNpb25zIGFuZCBmcm9tIDAgdG8gMSBpbiB0aGUgelxuICogZGltZW5zaW9uLlxuICogQHBhcmFtIGxlZnQgLSBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBsZWZ0IHBsYW5lIG9mIHRoZSBib3guXG4gKiBAcGFyYW0gcmlnaHQgLSBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSByaWdodCBwbGFuZSBvZiB0aGUgYm94LlxuICogQHBhcmFtIGJvdHRvbSAtIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIGJvdHRvbSBwbGFuZSBvZiB0aGUgYm94LlxuICogQHBhcmFtIHRvcCAtIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHJpZ2h0IHBsYW5lIG9mIHRoZSBib3guXG4gKiBAcGFyYW0gbmVhciAtIFRoZSBuZWdhdGl2ZSB6IGNvb3JkaW5hdGUgb2YgdGhlIG5lYXIgcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSBmYXIgLSBUaGUgbmVnYXRpdmUgeiBjb29yZGluYXRlIG9mIHRoZSBmYXIgcGxhbmUgb2YgdGhlIGJveC5cbiAqIEBwYXJhbSBkc3QgLSBPdXRwdXQgbWF0cml4LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4LlxuICovXG5mdW5jdGlvbiBmcnVzdHVtKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IGR4ID0gKHJpZ2h0IC0gbGVmdCk7XG4gICAgY29uc3QgZHkgPSAodG9wIC0gYm90dG9tKTtcbiAgICBjb25zdCBkeiA9IChuZWFyIC0gZmFyKTtcbiAgICBkc3RbMF0gPSAyICogbmVhciAvIGR4O1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gMiAqIG5lYXIgLyBkeTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gKGxlZnQgKyByaWdodCkgLyBkeDtcbiAgICBkc3RbOV0gPSAodG9wICsgYm90dG9tKSAvIGR5O1xuICAgIGRzdFsxMF0gPSBmYXIgLyBkejtcbiAgICBkc3RbMTFdID0gLTE7XG4gICAgZHN0WzEyXSA9IDA7XG4gICAgZHN0WzEzXSA9IDA7XG4gICAgZHN0WzE0XSA9IG5lYXIgKiBmYXIgLyBkejtcbiAgICBkc3RbMTVdID0gMDtcbiAgICByZXR1cm4gZHN0O1xufVxubGV0IHhBeGlzO1xubGV0IHlBeGlzO1xubGV0IHpBeGlzO1xuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBhaW0gdHJhbnNmb3JtYXRpb24uXG4gKlxuICogVGhpcyBpcyBhIG1hdHJpeCB3aGljaCBwb3NpdGlvbnMgYW4gb2JqZWN0IGFpbWluZyBkb3duIHBvc2l0aXZlIFouXG4gKiB0b3dhcmQgdGhlIHRhcmdldC5cbiAqXG4gKiBOb3RlOiB0aGlzIGlzICoqTk9UKiogdGhlIGludmVyc2Ugb2YgbG9va0F0IGFzIGxvb2tBdCBsb29rcyBhdCBuZWdhdGl2ZSBaLlxuICpcbiAqIEBwYXJhbSBwb3NpdGlvbiAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHRhcmdldCAtIFRoZSBwb3NpdGlvbiBtZWFudCB0byBiZSBhaW1lZCBhdC5cbiAqIEBwYXJhbSB1cCAtIEEgdmVjdG9yIHBvaW50aW5nIHVwLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBhaW0gbWF0cml4LlxuICovXG5mdW5jdGlvbiBhaW0ocG9zaXRpb24sIHRhcmdldCwgdXAsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgeEF4aXMgPSB4QXhpcyB8fCBjcmVhdGUkMygpO1xuICAgIHlBeGlzID0geUF4aXMgfHwgY3JlYXRlJDMoKTtcbiAgICB6QXhpcyA9IHpBeGlzIHx8IGNyZWF0ZSQzKCk7XG4gICAgbm9ybWFsaXplJDIoc3VidHJhY3QkMih0YXJnZXQsIHBvc2l0aW9uLCB6QXhpcyksIHpBeGlzKTtcbiAgICBub3JtYWxpemUkMihjcm9zcyh1cCwgekF4aXMsIHhBeGlzKSwgeEF4aXMpO1xuICAgIG5vcm1hbGl6ZSQyKGNyb3NzKHpBeGlzLCB4QXhpcywgeUF4aXMpLCB5QXhpcyk7XG4gICAgZHN0WzBdID0geEF4aXNbMF07XG4gICAgZHN0WzFdID0geEF4aXNbMV07XG4gICAgZHN0WzJdID0geEF4aXNbMl07XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB5QXhpc1swXTtcbiAgICBkc3RbNV0gPSB5QXhpc1sxXTtcbiAgICBkc3RbNl0gPSB5QXhpc1syXTtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHpBeGlzWzBdO1xuICAgIGRzdFs5XSA9IHpBeGlzWzFdO1xuICAgIGRzdFsxMF0gPSB6QXhpc1syXTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gcG9zaXRpb25bMF07XG4gICAgZHN0WzEzXSA9IHBvc2l0aW9uWzFdO1xuICAgIGRzdFsxNF0gPSBwb3NpdGlvblsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCBjYW1lcmEgYWltIHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqIFRoaXMgaXMgYSBtYXRyaXggd2hpY2ggcG9zaXRpb25zIGFuIG9iamVjdCBhaW1pbmcgZG93biBuZWdhdGl2ZSBaLlxuICogdG93YXJkIHRoZSB0YXJnZXQuXG4gKlxuICogTm90ZTogdGhpcyBpcyB0aGUgaW52ZXJzZSBvZiBgbG9va0F0YFxuICpcbiAqIEBwYXJhbSBleWUgLSBUaGUgcG9zaXRpb24gb2YgdGhlIG9iamVjdC5cbiAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgcG9zaXRpb24gbWVhbnQgdG8gYmUgYWltZWQgYXQuXG4gKiBAcGFyYW0gdXAgLSBBIHZlY3RvciBwb2ludGluZyB1cC5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgYWltIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gY2FtZXJhQWltKGV5ZSwgdGFyZ2V0LCB1cCwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICB4QXhpcyA9IHhBeGlzIHx8IGNyZWF0ZSQzKCk7XG4gICAgeUF4aXMgPSB5QXhpcyB8fCBjcmVhdGUkMygpO1xuICAgIHpBeGlzID0gekF4aXMgfHwgY3JlYXRlJDMoKTtcbiAgICBub3JtYWxpemUkMihzdWJ0cmFjdCQyKGV5ZSwgdGFyZ2V0LCB6QXhpcyksIHpBeGlzKTtcbiAgICBub3JtYWxpemUkMihjcm9zcyh1cCwgekF4aXMsIHhBeGlzKSwgeEF4aXMpO1xuICAgIG5vcm1hbGl6ZSQyKGNyb3NzKHpBeGlzLCB4QXhpcywgeUF4aXMpLCB5QXhpcyk7XG4gICAgZHN0WzBdID0geEF4aXNbMF07XG4gICAgZHN0WzFdID0geEF4aXNbMV07XG4gICAgZHN0WzJdID0geEF4aXNbMl07XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSB5QXhpc1swXTtcbiAgICBkc3RbNV0gPSB5QXhpc1sxXTtcbiAgICBkc3RbNl0gPSB5QXhpc1syXTtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IHpBeGlzWzBdO1xuICAgIGRzdFs5XSA9IHpBeGlzWzFdO1xuICAgIGRzdFsxMF0gPSB6QXhpc1syXTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gZXllWzBdO1xuICAgIGRzdFsxM10gPSBleWVbMV07XG4gICAgZHN0WzE0XSA9IGV5ZVsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyBhIDQtYnktNCB2aWV3IHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqIFRoaXMgaXMgYSB2aWV3IG1hdHJpeCB3aGljaCB0cmFuc2Zvcm1zIGFsbCBvdGhlciBvYmplY3RzXG4gKiB0byBiZSBpbiB0aGUgc3BhY2Ugb2YgdGhlIHZpZXcgZGVmaW5lZCBieSB0aGUgcGFyYW1ldGVycy5cbiAqXG4gKiBAcGFyYW0gZXllIC0gVGhlIHBvc2l0aW9uIG9mIHRoZSBvYmplY3QuXG4gKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHBvc2l0aW9uIG1lYW50IHRvIGJlIGFpbWVkIGF0LlxuICogQHBhcmFtIHVwIC0gQSB2ZWN0b3IgcG9pbnRpbmcgdXAuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIGxvb2stYXQgbWF0cml4LlxuICovXG5mdW5jdGlvbiBsb29rQXQoZXllLCB0YXJnZXQsIHVwLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIHhBeGlzID0geEF4aXMgfHwgY3JlYXRlJDMoKTtcbiAgICB5QXhpcyA9IHlBeGlzIHx8IGNyZWF0ZSQzKCk7XG4gICAgekF4aXMgPSB6QXhpcyB8fCBjcmVhdGUkMygpO1xuICAgIG5vcm1hbGl6ZSQyKHN1YnRyYWN0JDIoZXllLCB0YXJnZXQsIHpBeGlzKSwgekF4aXMpO1xuICAgIG5vcm1hbGl6ZSQyKGNyb3NzKHVwLCB6QXhpcywgeEF4aXMpLCB4QXhpcyk7XG4gICAgbm9ybWFsaXplJDIoY3Jvc3MoekF4aXMsIHhBeGlzLCB5QXhpcyksIHlBeGlzKTtcbiAgICBkc3RbMF0gPSB4QXhpc1swXTtcbiAgICBkc3RbMV0gPSB5QXhpc1swXTtcbiAgICBkc3RbMl0gPSB6QXhpc1swXTtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IHhBeGlzWzFdO1xuICAgIGRzdFs1XSA9IHlBeGlzWzFdO1xuICAgIGRzdFs2XSA9IHpBeGlzWzFdO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0geEF4aXNbMl07XG4gICAgZHN0WzldID0geUF4aXNbMl07XG4gICAgZHN0WzEwXSA9IHpBeGlzWzJdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAtKHhBeGlzWzBdICogZXllWzBdICsgeEF4aXNbMV0gKiBleWVbMV0gKyB4QXhpc1syXSAqIGV5ZVsyXSk7XG4gICAgZHN0WzEzXSA9IC0oeUF4aXNbMF0gKiBleWVbMF0gKyB5QXhpc1sxXSAqIGV5ZVsxXSArIHlBeGlzWzJdICogZXllWzJdKTtcbiAgICBkc3RbMTRdID0gLSh6QXhpc1swXSAqIGV5ZVswXSArIHpBeGlzWzFdICogZXllWzFdICsgekF4aXNbMl0gKiBleWVbMl0pO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSA0LWJ5LTQgbWF0cml4IHdoaWNoIHRyYW5zbGF0ZXMgYnkgdGhlIGdpdmVuIHZlY3RvciB2LlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yIGJ5XG4gKiAgICAgd2hpY2ggdG8gdHJhbnNsYXRlLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2xhdGlvbiBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHRyYW5zbGF0aW9uKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgZHN0WzBdID0gMTtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMDtcbiAgICBkc3RbNF0gPSAwO1xuICAgIGRzdFs1XSA9IDE7XG4gICAgZHN0WzZdID0gMDtcbiAgICBkc3RbN10gPSAwO1xuICAgIGRzdFs4XSA9IDA7XG4gICAgZHN0WzldID0gMDtcbiAgICBkc3RbMTBdID0gMTtcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gdlswXTtcbiAgICBkc3RbMTNdID0gdlsxXTtcbiAgICBkc3RbMTRdID0gdlsyXTtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBnaXZlbiA0LWJ5LTQgbWF0cml4IGJ5IHRoZSBnaXZlbiB2ZWN0b3Igdi5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3RvciBieVxuICogICAgIHdoaWNoIHRvIHRyYW5zbGF0ZS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNsYXRlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHRyYW5zbGF0ZShtLCB2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgdjIgPSB2WzJdO1xuICAgIGNvbnN0IG0wMCA9IG1bMF07XG4gICAgY29uc3QgbTAxID0gbVsxXTtcbiAgICBjb25zdCBtMDIgPSBtWzJdO1xuICAgIGNvbnN0IG0wMyA9IG1bM107XG4gICAgY29uc3QgbTEwID0gbVsxICogNCArIDBdO1xuICAgIGNvbnN0IG0xMSA9IG1bMSAqIDQgKyAxXTtcbiAgICBjb25zdCBtMTIgPSBtWzEgKiA0ICsgMl07XG4gICAgY29uc3QgbTEzID0gbVsxICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBtMzAgPSBtWzMgKiA0ICsgMF07XG4gICAgY29uc3QgbTMxID0gbVszICogNCArIDFdO1xuICAgIGNvbnN0IG0zMiA9IG1bMyAqIDQgKyAyXTtcbiAgICBjb25zdCBtMzMgPSBtWzMgKiA0ICsgM107XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbMF0gPSBtMDA7XG4gICAgICAgIGRzdFsxXSA9IG0wMTtcbiAgICAgICAgZHN0WzJdID0gbTAyO1xuICAgICAgICBkc3RbM10gPSBtMDM7XG4gICAgICAgIGRzdFs0XSA9IG0xMDtcbiAgICAgICAgZHN0WzVdID0gbTExO1xuICAgICAgICBkc3RbNl0gPSBtMTI7XG4gICAgICAgIGRzdFs3XSA9IG0xMztcbiAgICAgICAgZHN0WzhdID0gbTIwO1xuICAgICAgICBkc3RbOV0gPSBtMjE7XG4gICAgICAgIGRzdFsxMF0gPSBtMjI7XG4gICAgICAgIGRzdFsxMV0gPSBtMjM7XG4gICAgfVxuICAgIGRzdFsxMl0gPSBtMDAgKiB2MCArIG0xMCAqIHYxICsgbTIwICogdjIgKyBtMzA7XG4gICAgZHN0WzEzXSA9IG0wMSAqIHYwICsgbTExICogdjEgKyBtMjEgKiB2MiArIG0zMTtcbiAgICBkc3RbMTRdID0gbTAyICogdjAgKyBtMTIgKiB2MSArIG0yMiAqIHYyICsgbTMyO1xuICAgIGRzdFsxNV0gPSBtMDMgKiB2MCArIG0xMyAqIHYxICsgbTIzICogdjIgKyBtMzM7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggcm90YXRlcyBhcm91bmQgdGhlIHgtYXhpcyBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRpb24gbWF0cml4LlxuICovXG5mdW5jdGlvbiByb3RhdGlvblgoYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGRzdFswXSA9IDE7XG4gICAgZHN0WzFdID0gMDtcbiAgICBkc3RbMl0gPSAwO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSBjO1xuICAgIGRzdFs2XSA9IHM7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSAwO1xuICAgIGRzdFs5XSA9IC1zO1xuICAgIGRzdFsxMF0gPSBjO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJvdGF0ZXMgdGhlIGdpdmVuIDQtYnktNCBtYXRyaXggYXJvdW5kIHRoZSB4LWF4aXMgYnkgdGhlIGdpdmVuXG4gKiBhbmdsZS5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcm90YXRlWCQxKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IG0xMCA9IG1bNF07XG4gICAgY29uc3QgbTExID0gbVs1XTtcbiAgICBjb25zdCBtMTIgPSBtWzZdO1xuICAgIGNvbnN0IG0xMyA9IG1bN107XG4gICAgY29uc3QgbTIwID0gbVs4XTtcbiAgICBjb25zdCBtMjEgPSBtWzldO1xuICAgIGNvbnN0IG0yMiA9IG1bMTBdO1xuICAgIGNvbnN0IG0yMyA9IG1bMTFdO1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBkc3RbNF0gPSBjICogbTEwICsgcyAqIG0yMDtcbiAgICBkc3RbNV0gPSBjICogbTExICsgcyAqIG0yMTtcbiAgICBkc3RbNl0gPSBjICogbTEyICsgcyAqIG0yMjtcbiAgICBkc3RbN10gPSBjICogbTEzICsgcyAqIG0yMztcbiAgICBkc3RbOF0gPSBjICogbTIwIC0gcyAqIG0xMDtcbiAgICBkc3RbOV0gPSBjICogbTIxIC0gcyAqIG0xMTtcbiAgICBkc3RbMTBdID0gYyAqIG0yMiAtIHMgKiBtMTI7XG4gICAgZHN0WzExXSA9IGMgKiBtMjMgLSBzICogbTEzO1xuICAgIGlmIChtICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzBdID0gbVswXTtcbiAgICAgICAgZHN0WzFdID0gbVsxXTtcbiAgICAgICAgZHN0WzJdID0gbVsyXTtcbiAgICAgICAgZHN0WzNdID0gbVszXTtcbiAgICAgICAgZHN0WzEyXSA9IG1bMTJdO1xuICAgICAgICBkc3RbMTNdID0gbVsxM107XG4gICAgICAgIGRzdFsxNF0gPSBtWzE0XTtcbiAgICAgICAgZHN0WzE1XSA9IG1bMTVdO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCByb3RhdGVzIGFyb3VuZCB0aGUgeS1heGlzIGJ5IHRoZSBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGlvbiBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHJvdGF0aW9uWShhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG4gICAgZHN0WzBdID0gYztcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IC1zO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gMDtcbiAgICBkc3RbNV0gPSAxO1xuICAgIGRzdFs2XSA9IDA7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSBzO1xuICAgIGRzdFs5XSA9IDA7XG4gICAgZHN0WzEwXSA9IGM7XG4gICAgZHN0WzExXSA9IDA7XG4gICAgZHN0WzEyXSA9IDA7XG4gICAgZHN0WzEzXSA9IDA7XG4gICAgZHN0WzE0XSA9IDA7XG4gICAgZHN0WzE1XSA9IDE7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIHktYXhpcyBieSB0aGUgZ2l2ZW5cbiAqIGFuZ2xlLlxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHJvdGF0ZWQgbWF0cml4LlxuICovXG5mdW5jdGlvbiByb3RhdGVZJDEobSwgYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgY29uc3QgbTAwID0gbVswICogNCArIDBdO1xuICAgIGNvbnN0IG0wMSA9IG1bMCAqIDQgKyAxXTtcbiAgICBjb25zdCBtMDIgPSBtWzAgKiA0ICsgMl07XG4gICAgY29uc3QgbTAzID0gbVswICogNCArIDNdO1xuICAgIGNvbnN0IG0yMCA9IG1bMiAqIDQgKyAwXTtcbiAgICBjb25zdCBtMjEgPSBtWzIgKiA0ICsgMV07XG4gICAgY29uc3QgbTIyID0gbVsyICogNCArIDJdO1xuICAgIGNvbnN0IG0yMyA9IG1bMiAqIDQgKyAzXTtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XG4gICAgZHN0WzBdID0gYyAqIG0wMCAtIHMgKiBtMjA7XG4gICAgZHN0WzFdID0gYyAqIG0wMSAtIHMgKiBtMjE7XG4gICAgZHN0WzJdID0gYyAqIG0wMiAtIHMgKiBtMjI7XG4gICAgZHN0WzNdID0gYyAqIG0wMyAtIHMgKiBtMjM7XG4gICAgZHN0WzhdID0gYyAqIG0yMCArIHMgKiBtMDA7XG4gICAgZHN0WzldID0gYyAqIG0yMSArIHMgKiBtMDE7XG4gICAgZHN0WzEwXSA9IGMgKiBtMjIgKyBzICogbTAyO1xuICAgIGRzdFsxMV0gPSBjICogbTIzICsgcyAqIG0wMztcbiAgICBpZiAobSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFs0XSA9IG1bNF07XG4gICAgICAgIGRzdFs1XSA9IG1bNV07XG4gICAgICAgIGRzdFs2XSA9IG1bNl07XG4gICAgICAgIGRzdFs3XSA9IG1bN107XG4gICAgICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICAgICAgZHN0WzEzXSA9IG1bMTNdO1xuICAgICAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggcm90YXRlcyBhcm91bmQgdGhlIHotYXhpcyBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRpb24gbWF0cml4LlxuICovXG5mdW5jdGlvbiByb3RhdGlvblooYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGRzdFswXSA9IGM7XG4gICAgZHN0WzFdID0gcztcbiAgICBkc3RbMl0gPSAwO1xuICAgIGRzdFszXSA9IDA7XG4gICAgZHN0WzRdID0gLXM7XG4gICAgZHN0WzVdID0gYztcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSAxO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJvdGF0ZXMgdGhlIGdpdmVuIDQtYnktNCBtYXRyaXggYXJvdW5kIHRoZSB6LWF4aXMgYnkgdGhlIGdpdmVuXG4gKiBhbmdsZS5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gcm90YXRlWiQxKG0sIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGNvbnN0IG0wMCA9IG1bMCAqIDQgKyAwXTtcbiAgICBjb25zdCBtMDEgPSBtWzAgKiA0ICsgMV07XG4gICAgY29uc3QgbTAyID0gbVswICogNCArIDJdO1xuICAgIGNvbnN0IG0wMyA9IG1bMCAqIDQgKyAzXTtcbiAgICBjb25zdCBtMTAgPSBtWzEgKiA0ICsgMF07XG4gICAgY29uc3QgbTExID0gbVsxICogNCArIDFdO1xuICAgIGNvbnN0IG0xMiA9IG1bMSAqIDQgKyAyXTtcbiAgICBjb25zdCBtMTMgPSBtWzEgKiA0ICsgM107XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGRzdFswXSA9IGMgKiBtMDAgKyBzICogbTEwO1xuICAgIGRzdFsxXSA9IGMgKiBtMDEgKyBzICogbTExO1xuICAgIGRzdFsyXSA9IGMgKiBtMDIgKyBzICogbTEyO1xuICAgIGRzdFszXSA9IGMgKiBtMDMgKyBzICogbTEzO1xuICAgIGRzdFs0XSA9IGMgKiBtMTAgLSBzICogbTAwO1xuICAgIGRzdFs1XSA9IGMgKiBtMTEgLSBzICogbTAxO1xuICAgIGRzdFs2XSA9IGMgKiBtMTIgLSBzICogbTAyO1xuICAgIGRzdFs3XSA9IGMgKiBtMTMgLSBzICogbTAzO1xuICAgIGlmIChtICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzhdID0gbVs4XTtcbiAgICAgICAgZHN0WzldID0gbVs5XTtcbiAgICAgICAgZHN0WzEwXSA9IG1bMTBdO1xuICAgICAgICBkc3RbMTFdID0gbVsxMV07XG4gICAgICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICAgICAgZHN0WzEzXSA9IG1bMTNdO1xuICAgICAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggcm90YXRlcyBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlIGdpdmVuXG4gKiBhbmdsZS5cbiAqIEBwYXJhbSBheGlzIC0gVGhlIGF4aXNcbiAqICAgICBhYm91dCB3aGljaCB0byByb3RhdGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIG1hdHJpeCB3aGljaCByb3RhdGVzIGFuZ2xlIHJhZGlhbnNcbiAqICAgICBhcm91bmQgdGhlIGF4aXMuXG4gKi9cbmZ1bmN0aW9uIGF4aXNSb3RhdGlvbihheGlzLCBhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBsZXQgeCA9IGF4aXNbMF07XG4gICAgbGV0IHkgPSBheGlzWzFdO1xuICAgIGxldCB6ID0gYXhpc1syXTtcbiAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gICAgeCAvPSBuO1xuICAgIHkgLz0gbjtcbiAgICB6IC89IG47XG4gICAgY29uc3QgeHggPSB4ICogeDtcbiAgICBjb25zdCB5eSA9IHkgKiB5O1xuICAgIGNvbnN0IHp6ID0geiAqIHo7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IG9uZU1pbnVzQ29zaW5lID0gMSAtIGM7XG4gICAgZHN0WzBdID0geHggKyAoMSAtIHh4KSAqIGM7XG4gICAgZHN0WzFdID0geCAqIHkgKiBvbmVNaW51c0Nvc2luZSArIHogKiBzO1xuICAgIGRzdFsyXSA9IHggKiB6ICogb25lTWludXNDb3NpbmUgLSB5ICogcztcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IHggKiB5ICogb25lTWludXNDb3NpbmUgLSB6ICogcztcbiAgICBkc3RbNV0gPSB5eSArICgxIC0geXkpICogYztcbiAgICBkc3RbNl0gPSB5ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeCAqIHM7XG4gICAgZHN0WzddID0gMDtcbiAgICBkc3RbOF0gPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeSAqIHM7XG4gICAgZHN0WzldID0geSAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHggKiBzO1xuICAgIGRzdFsxMF0gPSB6eiArICgxIC0genopICogYztcbiAgICBkc3RbMTFdID0gMDtcbiAgICBkc3RbMTJdID0gMDtcbiAgICBkc3RbMTNdID0gMDtcbiAgICBkc3RbMTRdID0gMDtcbiAgICBkc3RbMTVdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCByb3RhdGVzIGFyb3VuZCB0aGUgZ2l2ZW4gYXhpcyBieSB0aGUgZ2l2ZW5cbiAqIGFuZ2xlLiAoc2FtZSBhcyBheGlzUm90YXRpb24pXG4gKiBAcGFyYW0gYXhpcyAtIFRoZSBheGlzXG4gKiAgICAgYWJvdXQgd2hpY2ggdG8gcm90YXRlLlxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZSAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBtYXRyaXggd2hpY2ggcm90YXRlcyBhbmdsZSByYWRpYW5zXG4gKiAgICAgYXJvdW5kIHRoZSBheGlzLlxuICovXG5jb25zdCByb3RhdGlvbiA9IGF4aXNSb3RhdGlvbjtcbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlXG4gKiBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSBtIC0gVGhlIG1hdHJpeC5cbiAqIEBwYXJhbSBheGlzIC0gVGhlIGF4aXNcbiAqICAgICBhYm91dCB3aGljaCB0byByb3RhdGUuXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcm90YXRlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIGF4aXNSb3RhdGUobSwgYXhpcywgYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgTWF0VHlwZSgxNik7XG4gICAgbGV0IHggPSBheGlzWzBdO1xuICAgIGxldCB5ID0gYXhpc1sxXTtcbiAgICBsZXQgeiA9IGF4aXNbMl07XG4gICAgY29uc3QgbiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICAgIHggLz0gbjtcbiAgICB5IC89IG47XG4gICAgeiAvPSBuO1xuICAgIGNvbnN0IHh4ID0geCAqIHg7XG4gICAgY29uc3QgeXkgPSB5ICogeTtcbiAgICBjb25zdCB6eiA9IHogKiB6O1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcbiAgICBjb25zdCBvbmVNaW51c0Nvc2luZSA9IDEgLSBjO1xuICAgIGNvbnN0IHIwMCA9IHh4ICsgKDEgLSB4eCkgKiBjO1xuICAgIGNvbnN0IHIwMSA9IHggKiB5ICogb25lTWludXNDb3NpbmUgKyB6ICogcztcbiAgICBjb25zdCByMDIgPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lIC0geSAqIHM7XG4gICAgY29uc3QgcjEwID0geCAqIHkgKiBvbmVNaW51c0Nvc2luZSAtIHogKiBzO1xuICAgIGNvbnN0IHIxMSA9IHl5ICsgKDEgLSB5eSkgKiBjO1xuICAgIGNvbnN0IHIxMiA9IHkgKiB6ICogb25lTWludXNDb3NpbmUgKyB4ICogcztcbiAgICBjb25zdCByMjAgPSB4ICogeiAqIG9uZU1pbnVzQ29zaW5lICsgeSAqIHM7XG4gICAgY29uc3QgcjIxID0geSAqIHogKiBvbmVNaW51c0Nvc2luZSAtIHggKiBzO1xuICAgIGNvbnN0IHIyMiA9IHp6ICsgKDEgLSB6eikgKiBjO1xuICAgIGNvbnN0IG0wMCA9IG1bMF07XG4gICAgY29uc3QgbTAxID0gbVsxXTtcbiAgICBjb25zdCBtMDIgPSBtWzJdO1xuICAgIGNvbnN0IG0wMyA9IG1bM107XG4gICAgY29uc3QgbTEwID0gbVs0XTtcbiAgICBjb25zdCBtMTEgPSBtWzVdO1xuICAgIGNvbnN0IG0xMiA9IG1bNl07XG4gICAgY29uc3QgbTEzID0gbVs3XTtcbiAgICBjb25zdCBtMjAgPSBtWzhdO1xuICAgIGNvbnN0IG0yMSA9IG1bOV07XG4gICAgY29uc3QgbTIyID0gbVsxMF07XG4gICAgY29uc3QgbTIzID0gbVsxMV07XG4gICAgZHN0WzBdID0gcjAwICogbTAwICsgcjAxICogbTEwICsgcjAyICogbTIwO1xuICAgIGRzdFsxXSA9IHIwMCAqIG0wMSArIHIwMSAqIG0xMSArIHIwMiAqIG0yMTtcbiAgICBkc3RbMl0gPSByMDAgKiBtMDIgKyByMDEgKiBtMTIgKyByMDIgKiBtMjI7XG4gICAgZHN0WzNdID0gcjAwICogbTAzICsgcjAxICogbTEzICsgcjAyICogbTIzO1xuICAgIGRzdFs0XSA9IHIxMCAqIG0wMCArIHIxMSAqIG0xMCArIHIxMiAqIG0yMDtcbiAgICBkc3RbNV0gPSByMTAgKiBtMDEgKyByMTEgKiBtMTEgKyByMTIgKiBtMjE7XG4gICAgZHN0WzZdID0gcjEwICogbTAyICsgcjExICogbTEyICsgcjEyICogbTIyO1xuICAgIGRzdFs3XSA9IHIxMCAqIG0wMyArIHIxMSAqIG0xMyArIHIxMiAqIG0yMztcbiAgICBkc3RbOF0gPSByMjAgKiBtMDAgKyByMjEgKiBtMTAgKyByMjIgKiBtMjA7XG4gICAgZHN0WzldID0gcjIwICogbTAxICsgcjIxICogbTExICsgcjIyICogbTIxO1xuICAgIGRzdFsxMF0gPSByMjAgKiBtMDIgKyByMjEgKiBtMTIgKyByMjIgKiBtMjI7XG4gICAgZHN0WzExXSA9IHIyMCAqIG0wMyArIHIyMSAqIG0xMyArIHIyMiAqIG0yMztcbiAgICBpZiAobSAhPT0gZHN0KSB7XG4gICAgICAgIGRzdFsxMl0gPSBtWzEyXTtcbiAgICAgICAgZHN0WzEzXSA9IG1bMTNdO1xuICAgICAgICBkc3RbMTRdID0gbVsxNF07XG4gICAgICAgIGRzdFsxNV0gPSBtWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBhcm91bmQgdGhlIGdpdmVuIGF4aXMgYnkgdGhlXG4gKiBnaXZlbiBhbmdsZS4gKHNhbWUgYXMgcm90YXRlKVxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGF4aXMgLSBUaGUgYXhpc1xuICogICAgIGFib3V0IHdoaWNoIHRvIHJvdGF0ZS5cbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGUgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSByb3RhdGVkIG1hdHJpeC5cbiAqL1xuY29uc3Qgcm90YXRlID0gYXhpc1JvdGF0ZTtcbi8qKlxuICogQ3JlYXRlcyBhIDQtYnktNCBtYXRyaXggd2hpY2ggc2NhbGVzIGluIGVhY2ggZGltZW5zaW9uIGJ5IGFuIGFtb3VudCBnaXZlbiBieVxuICogdGhlIGNvcnJlc3BvbmRpbmcgZW50cnkgaW4gdGhlIGdpdmVuIHZlY3RvcjsgYXNzdW1lcyB0aGUgdmVjdG9yIGhhcyB0aHJlZVxuICogZW50cmllcy5cbiAqIEBwYXJhbSB2IC0gQSB2ZWN0b3Igb2ZcbiAqICAgICB0aHJlZSBlbnRyaWVzIHNwZWNpZnlpbmcgdGhlIGZhY3RvciBieSB3aGljaCB0byBzY2FsZSBpbiBlYWNoIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBkc3QgLSBtYXRyaXggdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGluZyBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHNjYWxpbmcodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSB2WzBdO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gdlsxXTtcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSB2WzJdO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhbiBhbW91bnRcbiAqIGdpdmVuIGJ5IHRoZSBjb3JyZXNwb25kaW5nIGVudHJ5IGluIHRoZSBnaXZlbiB2ZWN0b3I7IGFzc3VtZXMgdGhlIHZlY3RvciBoYXNcbiAqIHRocmVlIGVudHJpZXMuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXggdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0gdiAtIEEgdmVjdG9yIG9mIHRocmVlIGVudHJpZXMgc3BlY2lmeWluZyB0aGVcbiAqICAgICBmYWN0b3IgYnkgd2hpY2ggdG8gc2NhbGUgaW4gZWFjaCBkaW1lbnNpb24uXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHNjYWxlJDIobSwgdiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICBkc3RbMF0gPSB2MCAqIG1bMCAqIDQgKyAwXTtcbiAgICBkc3RbMV0gPSB2MCAqIG1bMCAqIDQgKyAxXTtcbiAgICBkc3RbMl0gPSB2MCAqIG1bMCAqIDQgKyAyXTtcbiAgICBkc3RbM10gPSB2MCAqIG1bMCAqIDQgKyAzXTtcbiAgICBkc3RbNF0gPSB2MSAqIG1bMSAqIDQgKyAwXTtcbiAgICBkc3RbNV0gPSB2MSAqIG1bMSAqIDQgKyAxXTtcbiAgICBkc3RbNl0gPSB2MSAqIG1bMSAqIDQgKyAyXTtcbiAgICBkc3RbN10gPSB2MSAqIG1bMSAqIDQgKyAzXTtcbiAgICBkc3RbOF0gPSB2MiAqIG1bMiAqIDQgKyAwXTtcbiAgICBkc3RbOV0gPSB2MiAqIG1bMiAqIDQgKyAxXTtcbiAgICBkc3RbMTBdID0gdjIgKiBtWzIgKiA0ICsgMl07XG4gICAgZHN0WzExXSA9IHYyICogbVsyICogNCArIDNdO1xuICAgIGlmIChtICE9PSBkc3QpIHtcbiAgICAgICAgZHN0WzEyXSA9IG1bMTJdO1xuICAgICAgICBkc3RbMTNdID0gbVsxM107XG4gICAgICAgIGRzdFsxNF0gPSBtWzE0XTtcbiAgICAgICAgZHN0WzE1XSA9IG1bMTVdO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgNC1ieS00IG1hdHJpeCB3aGljaCBzY2FsZXMgYSB1bmlmb3JtIGFtb3VudCBpbiBlYWNoIGRpbWVuc2lvbi5cbiAqIEBwYXJhbSBzIC0gdGhlIGFtb3VudCB0byBzY2FsZVxuICogQHBhcmFtIGRzdCAtIG1hdHJpeCB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsaW5nIG1hdHJpeC5cbiAqL1xuZnVuY3Rpb24gdW5pZm9ybVNjYWxpbmcocywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBNYXRUeXBlKDE2KTtcbiAgICBkc3RbMF0gPSBzO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIGRzdFs0XSA9IDA7XG4gICAgZHN0WzVdID0gcztcbiAgICBkc3RbNl0gPSAwO1xuICAgIGRzdFs3XSA9IDA7XG4gICAgZHN0WzhdID0gMDtcbiAgICBkc3RbOV0gPSAwO1xuICAgIGRzdFsxMF0gPSBzO1xuICAgIGRzdFsxMV0gPSAwO1xuICAgIGRzdFsxMl0gPSAwO1xuICAgIGRzdFsxM10gPSAwO1xuICAgIGRzdFsxNF0gPSAwO1xuICAgIGRzdFsxNV0gPSAxO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNjYWxlcyB0aGUgZ2l2ZW4gNC1ieS00IG1hdHJpeCBpbiBlYWNoIGRpbWVuc2lvbiBieSBhIHVuaWZvcm0gc2NhbGUuXG4gKiBAcGFyYW0gbSAtIFRoZSBtYXRyaXggdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0gcyAtIFRoZSBhbW91bnQgdG8gc2NhbGUuXG4gKiBAcGFyYW0gZHN0IC0gbWF0cml4IHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBtYXRyaXguXG4gKi9cbmZ1bmN0aW9uIHVuaWZvcm1TY2FsZShtLCBzLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IE1hdFR5cGUoMTYpO1xuICAgIGRzdFswXSA9IHMgKiBtWzAgKiA0ICsgMF07XG4gICAgZHN0WzFdID0gcyAqIG1bMCAqIDQgKyAxXTtcbiAgICBkc3RbMl0gPSBzICogbVswICogNCArIDJdO1xuICAgIGRzdFszXSA9IHMgKiBtWzAgKiA0ICsgM107XG4gICAgZHN0WzRdID0gcyAqIG1bMSAqIDQgKyAwXTtcbiAgICBkc3RbNV0gPSBzICogbVsxICogNCArIDFdO1xuICAgIGRzdFs2XSA9IHMgKiBtWzEgKiA0ICsgMl07XG4gICAgZHN0WzddID0gcyAqIG1bMSAqIDQgKyAzXTtcbiAgICBkc3RbOF0gPSBzICogbVsyICogNCArIDBdO1xuICAgIGRzdFs5XSA9IHMgKiBtWzIgKiA0ICsgMV07XG4gICAgZHN0WzEwXSA9IHMgKiBtWzIgKiA0ICsgMl07XG4gICAgZHN0WzExXSA9IHMgKiBtWzIgKiA0ICsgM107XG4gICAgaWYgKG0gIT09IGRzdCkge1xuICAgICAgICBkc3RbMTJdID0gbVsxMl07XG4gICAgICAgIGRzdFsxM10gPSBtWzEzXTtcbiAgICAgICAgZHN0WzE0XSA9IG1bMTRdO1xuICAgICAgICBkc3RbMTVdID0gbVsxNV07XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG5cbnZhciBtYXQ0SW1wbCA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgICBfX3Byb3RvX186IG51bGwsXG4gICAgc2V0RGVmYXVsdFR5cGU6IHNldERlZmF1bHRUeXBlJDMsXG4gICAgY3JlYXRlOiBjcmVhdGUkMixcbiAgICBzZXQ6IHNldCQyLFxuICAgIGZyb21NYXQzOiBmcm9tTWF0MyxcbiAgICBmcm9tUXVhdDogZnJvbVF1YXQsXG4gICAgbmVnYXRlOiBuZWdhdGUkMSxcbiAgICBjb3B5OiBjb3B5JDIsXG4gICAgY2xvbmU6IGNsb25lJDIsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSQyLFxuICAgIGVxdWFsczogZXF1YWxzJDIsXG4gICAgaWRlbnRpdHk6IGlkZW50aXR5JDEsXG4gICAgdHJhbnNwb3NlOiB0cmFuc3Bvc2UsXG4gICAgaW52ZXJzZTogaW52ZXJzZSQyLFxuICAgIGRldGVybWluYW50OiBkZXRlcm1pbmFudCxcbiAgICBpbnZlcnQ6IGludmVydCQxLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQyLFxuICAgIG11bDogbXVsJDIsXG4gICAgc2V0VHJhbnNsYXRpb246IHNldFRyYW5zbGF0aW9uLFxuICAgIGdldFRyYW5zbGF0aW9uOiBnZXRUcmFuc2xhdGlvbixcbiAgICBnZXRBeGlzOiBnZXRBeGlzLFxuICAgIHNldEF4aXM6IHNldEF4aXMsXG4gICAgZ2V0U2NhbGluZzogZ2V0U2NhbGluZyxcbiAgICBwZXJzcGVjdGl2ZTogcGVyc3BlY3RpdmUsXG4gICAgb3J0aG86IG9ydGhvLFxuICAgIGZydXN0dW06IGZydXN0dW0sXG4gICAgYWltOiBhaW0sXG4gICAgY2FtZXJhQWltOiBjYW1lcmFBaW0sXG4gICAgbG9va0F0OiBsb29rQXQsXG4gICAgdHJhbnNsYXRpb246IHRyYW5zbGF0aW9uLFxuICAgIHRyYW5zbGF0ZTogdHJhbnNsYXRlLFxuICAgIHJvdGF0aW9uWDogcm90YXRpb25YLFxuICAgIHJvdGF0ZVg6IHJvdGF0ZVgkMSxcbiAgICByb3RhdGlvblk6IHJvdGF0aW9uWSxcbiAgICByb3RhdGVZOiByb3RhdGVZJDEsXG4gICAgcm90YXRpb25aOiByb3RhdGlvblosXG4gICAgcm90YXRlWjogcm90YXRlWiQxLFxuICAgIGF4aXNSb3RhdGlvbjogYXhpc1JvdGF0aW9uLFxuICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICBheGlzUm90YXRlOiBheGlzUm90YXRlLFxuICAgIHJvdGF0ZTogcm90YXRlLFxuICAgIHNjYWxpbmc6IHNjYWxpbmcsXG4gICAgc2NhbGU6IHNjYWxlJDIsXG4gICAgdW5pZm9ybVNjYWxpbmc6IHVuaWZvcm1TY2FsaW5nLFxuICAgIHVuaWZvcm1TY2FsZTogdW5pZm9ybVNjYWxlXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKlxuICogUXVhdDQgbWF0aCBmdW5jdGlvbnMuXG4gKlxuICogQWxtb3N0IGFsbCBmdW5jdGlvbnMgdGFrZSBhbiBvcHRpb25hbCBgZHN0YCBhcmd1bWVudC4gSWYgaXQgaXMgbm90IHBhc3NlZCBpbiB0aGVcbiAqIGZ1bmN0aW9ucyB3aWxsIGNyZWF0ZSBhIG5ldyBgUXVhdDRgLiBJbiBvdGhlciB3b3JkcyB5b3UgY2FuIGRvIHRoaXNcbiAqXG4gKiAgICAgY29uc3QgdiA9IHF1YXQ0LmNyb3NzKHYxLCB2Mik7ICAvLyBDcmVhdGVzIGEgbmV3IFF1YXQ0IHdpdGggdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2Mi5cbiAqXG4gKiBvclxuICpcbiAqICAgICBjb25zdCB2ID0gcXVhdDQuY3JlYXRlKCk7XG4gKiAgICAgcXVhdDQuY3Jvc3ModjEsIHYyLCB2KTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2XG4gKlxuICogVGhlIGZpcnN0IHN0eWxlIGlzIG9mdGVuIGVhc2llciBidXQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0J3MgdXNlZCBpdCBnZW5lcmF0ZXMgZ2FyYmFnZSB3aGVyZVxuICogYXMgdGhlcmUgaXMgYWxtb3N0IG5ldmVyIGFsbG9jYXRpb24gd2l0aCB0aGUgc2Vjb25kIHN0eWxlLlxuICpcbiAqIEl0IGlzIGFsd2F5cyBzYWZlIHRvIHBhc3MgYW55IHZlY3RvciBhcyB0aGUgZGVzdGluYXRpb24uIFNvIGZvciBleGFtcGxlXG4gKlxuICogICAgIHF1YXQ0LmNyb3NzKHYxLCB2MiwgdjEpOyAgLy8gUHV0cyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyIGluIHYxXG4gKlxuICovXG5sZXQgUXVhdFR5cGUgPSBGbG9hdDMyQXJyYXk7XG4vKipcbiAqIFNldHMgdGhlIHR5cGUgdGhpcyBsaWJyYXJ5IGNyZWF0ZXMgZm9yIGEgUXVhdDRcbiAqIEBwYXJhbSBjdG9yIC0gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRWl0aGVyIGBGbG9hdDMyQXJyYXlgLCBgRmxvYXQ2NEFycmF5YCwgb3IgYEFycmF5YFxuICogQHJldHVybnMgcHJldmlvdXMgY29uc3RydWN0b3IgZm9yIFF1YXQ0XG4gKi9cbmZ1bmN0aW9uIHNldERlZmF1bHRUeXBlJDIoY3Rvcikge1xuICAgIGNvbnN0IG9sZFR5cGUgPSBRdWF0VHlwZTtcbiAgICBRdWF0VHlwZSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0NDsgbWF5IGJlIGNhbGxlZCB3aXRoIHgsIHksIHogdG8gc2V0IGluaXRpYWwgdmFsdWVzLlxuICogQHBhcmFtIHggLSBJbml0aWFsIHggdmFsdWUuXG4gKiBAcGFyYW0geSAtIEluaXRpYWwgeSB2YWx1ZS5cbiAqIEBwYXJhbSB6IC0gSW5pdGlhbCB6IHZhbHVlLlxuICogQHBhcmFtIHcgLSBJbml0aWFsIHcgdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuZnVuY3Rpb24gY3JlYXRlJDEoeCwgeSwgeiwgdykge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBpZiAoeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRzdFswXSA9IHg7XG4gICAgICAgIGlmICh5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzdFsxXSA9IHk7XG4gICAgICAgICAgICBpZiAoeiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZHN0WzJdID0gejtcbiAgICAgICAgICAgICAgICBpZiAodyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRzdFszXSA9IHc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG5cbi8qXG4gKiBDb3B5cmlnaHQgMjAyMiBHcmVnZyBUYXZhcmVzXG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbiAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSxcbiAqIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLFxuICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuICBJTiBOTyBFVkVOVCBTSEFMTFxuICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSXG4gKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFF1YXQ7IG1heSBiZSBjYWxsZWQgd2l0aCB4LCB5LCB6IHRvIHNldCBpbml0aWFsIHZhbHVlcy4gKHNhbWUgYXMgY3JlYXRlKVxuICogQHBhcmFtIHggLSBJbml0aWFsIHggdmFsdWUuXG4gKiBAcGFyYW0geSAtIEluaXRpYWwgeSB2YWx1ZS5cbiAqIEBwYXJhbSB6IC0gSW5pdGlhbCB6IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHcgdmFsdWUuXG4gKiBAcmV0dXJucyB0aGUgY3JlYXRlZCB2ZWN0b3JcbiAqL1xuY29uc3QgZnJvbVZhbHVlcyQxID0gY3JlYXRlJDE7XG4vKipcbiAqIFNldHMgdGhlIHZhbHVlcyBvZiBhIFF1YXRcbiAqIEFsc28gc2VlIHtAbGluayBxdWF0LmNyZWF0ZX0gYW5kIHtAbGluayBxdWF0LmNvcHl9XG4gKlxuICogQHBhcmFtIHggZmlyc3QgdmFsdWVcbiAqIEBwYXJhbSB5IHNlY29uZCB2YWx1ZVxuICogQHBhcmFtIHogdGhpcmQgdmFsdWVcbiAqIEBwYXJhbSB3IGZvdXJ0aCB2YWx1ZVxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHdpdGggaXRzIGVsZW1lbnRzIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0JDEoeCwgeSwgeiwgdywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSB4O1xuICAgIGRzdFsxXSA9IHk7XG4gICAgZHN0WzJdID0gejtcbiAgICBkc3RbM10gPSB3O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFNldHMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFuZCAgYXhpcyxcbiAqIHRoZW4gcmV0dXJucyBpdC5cbiAqXG4gKiBAcGFyYW0gYXhpcyAtIHRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmRcbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIHRoZSBhbmdsZVxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgcXVhdGVybmlvbiB0aGF0IHJlcHJlc2VudHMgdGhlIGdpdmVuIGF4aXMgYW5kIGFuZ2xlXG4gKiovXG5mdW5jdGlvbiBmcm9tQXhpc0FuZ2xlKGF4aXMsIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGhhbGZBbmdsZSA9IGFuZ2xlSW5SYWRpYW5zICogMC41O1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihoYWxmQW5nbGUpO1xuICAgIGRzdFswXSA9IHMgKiBheGlzWzBdO1xuICAgIGRzdFsxXSA9IHMgKiBheGlzWzFdO1xuICAgIGRzdFsyXSA9IHMgKiBheGlzWzJdO1xuICAgIGRzdFszXSA9IE1hdGguY29zKGhhbGZBbmdsZSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogR2V0cyB0aGUgcm90YXRpb24gYXhpcyBhbmQgYW5nbGVcbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byBjb21wdXRlIGZyb21cbiAqIEBwYXJhbSBkc3QgLSBWZWMzIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybiBhbmdsZSBhbmQgYXhpc1xuICovXG5mdW5jdGlvbiB0b0F4aXNBbmdsZShxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgY3JlYXRlJDMoNCk7XG4gICAgY29uc3QgYW5nbGUgPSBNYXRoLmFjb3MocVszXSkgKiAyO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7XG4gICAgaWYgKHMgPiBFUFNJTE9OKSB7XG4gICAgICAgIGRzdFswXSA9IHFbMF0gLyBzO1xuICAgICAgICBkc3RbMV0gPSBxWzFdIC8gcztcbiAgICAgICAgZHN0WzJdID0gcVsyXSAvIHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkc3RbMF0gPSAxO1xuICAgICAgICBkc3RbMV0gPSAwO1xuICAgICAgICBkc3RbMl0gPSAwO1xuICAgIH1cbiAgICByZXR1cm4geyBhbmdsZSwgYXhpczogZHN0IH07XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGFuZ2xlIGluIGRlZ3JlZXMgYmV0d2VlbiB0d28gcm90YXRpb25zIGEgYW5kIGIuXG4gKiBAcGFyYW0gYSAtIHF1YXRlcm5pb24gYVxuICogQHBhcmFtIGIgLSBxdWF0ZXJuaW9uIGJcbiAqIEByZXR1cm4gYW5nbGUgaW4gcmFkaWFucyBiZXR3ZWVuIHRoZSB0d28gcXVhdGVybmlvbnNcbiAqL1xuZnVuY3Rpb24gYW5nbGUoYSwgYikge1xuICAgIGNvbnN0IGQgPSBkb3QkMShhLCBiKTtcbiAgICByZXR1cm4gTWF0aC5hY29zKDIgKiBkICogZCAtIDEpO1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSBhIC0gdGhlIGZpcnN0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSBiIC0gdGhlIHNlY29uZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYSAqIGJcbiAqL1xuZnVuY3Rpb24gbXVsdGlwbHkkMShhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGF4ID0gYVswXTtcbiAgICBjb25zdCBheSA9IGFbMV07XG4gICAgY29uc3QgYXogPSBhWzJdO1xuICAgIGNvbnN0IGF3ID0gYVszXTtcbiAgICBjb25zdCBieCA9IGJbMF07XG4gICAgY29uc3QgYnkgPSBiWzFdO1xuICAgIGNvbnN0IGJ6ID0gYlsyXTtcbiAgICBjb25zdCBidyA9IGJbM107XG4gICAgZHN0WzBdID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieTtcbiAgICBkc3RbMV0gPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6O1xuICAgIGRzdFsyXSA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gICAgZHN0WzNdID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBxdWF0ZXJuaW9uc1xuICpcbiAqIEBwYXJhbSBhIC0gdGhlIGZpcnN0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSBiIC0gdGhlIHNlY29uZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYSAqIGJcbiAqL1xuY29uc3QgbXVsJDEgPSBtdWx0aXBseSQxO1xuLyoqXG4gKiBSb3RhdGVzIHRoZSBnaXZlbiBxdWF0ZXJuaW9uIGFyb3VuZCB0aGUgWCBheGlzIGJ5IHRoZSBnaXZlbiBhbmdsZS5cbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byByb3RhdGVcbiAqIEBwYXJhbSBhbmdsZUluUmFkaWFucyAtIFRoZSBhbmdsZSBieSB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBxdWF0ZXJuaW9uIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhICogYlxuICovXG5mdW5jdGlvbiByb3RhdGVYKHEsIGFuZ2xlSW5SYWRpYW5zLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGhhbGZBbmdsZSA9IGFuZ2xlSW5SYWRpYW5zICogMC41O1xuICAgIGNvbnN0IHF4ID0gcVswXTtcbiAgICBjb25zdCBxeSA9IHFbMV07XG4gICAgY29uc3QgcXogPSBxWzJdO1xuICAgIGNvbnN0IHF3ID0gcVszXTtcbiAgICBjb25zdCBieCA9IE1hdGguc2luKGhhbGZBbmdsZSk7XG4gICAgY29uc3QgYncgPSBNYXRoLmNvcyhoYWxmQW5nbGUpO1xuICAgIGRzdFswXSA9IHF4ICogYncgKyBxdyAqIGJ4O1xuICAgIGRzdFsxXSA9IHF5ICogYncgKyBxeiAqIGJ4O1xuICAgIGRzdFsyXSA9IHF6ICogYncgLSBxeSAqIGJ4O1xuICAgIGRzdFszXSA9IHF3ICogYncgLSBxeCAqIGJ4O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIFJvdGF0ZXMgdGhlIGdpdmVuIHF1YXRlcm5pb24gYXJvdW5kIHRoZSBZIGF4aXMgYnkgdGhlIGdpdmVuIGFuZ2xlLlxuICogQHBhcmFtIHEgLSBxdWF0ZXJuaW9uIHRvIHJvdGF0ZVxuICogQHBhcmFtIGFuZ2xlSW5SYWRpYW5zIC0gVGhlIGFuZ2xlIGJ5IHdoaWNoIHRvIHJvdGF0ZVxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGEgKiBiXG4gKi9cbmZ1bmN0aW9uIHJvdGF0ZVkocSwgYW5nbGVJblJhZGlhbnMsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgY29uc3QgaGFsZkFuZ2xlID0gYW5nbGVJblJhZGlhbnMgKiAwLjU7XG4gICAgY29uc3QgcXggPSBxWzBdO1xuICAgIGNvbnN0IHF5ID0gcVsxXTtcbiAgICBjb25zdCBxeiA9IHFbMl07XG4gICAgY29uc3QgcXcgPSBxWzNdO1xuICAgIGNvbnN0IGJ5ID0gTWF0aC5zaW4oaGFsZkFuZ2xlKTtcbiAgICBjb25zdCBidyA9IE1hdGguY29zKGhhbGZBbmdsZSk7XG4gICAgZHN0WzBdID0gcXggKiBidyAtIHF6ICogYnk7XG4gICAgZHN0WzFdID0gcXkgKiBidyArIHF3ICogYnk7XG4gICAgZHN0WzJdID0gcXogKiBidyArIHF4ICogYnk7XG4gICAgZHN0WzNdID0gcXcgKiBidyAtIHF5ICogYnk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUm90YXRlcyB0aGUgZ2l2ZW4gcXVhdGVybmlvbiBhcm91bmQgdGhlIFogYXhpcyBieSB0aGUgZ2l2ZW4gYW5nbGUuXG4gKiBAcGFyYW0gcSAtIHF1YXRlcm5pb24gdG8gcm90YXRlXG4gKiBAcGFyYW0gYW5nbGVJblJhZGlhbnMgLSBUaGUgYW5nbGUgYnkgd2hpY2ggdG8gcm90YXRlXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSByZXN1bHQgb2YgYSAqIGJcbiAqL1xuZnVuY3Rpb24gcm90YXRlWihxLCBhbmdsZUluUmFkaWFucywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBjb25zdCBoYWxmQW5nbGUgPSBhbmdsZUluUmFkaWFucyAqIDAuNTtcbiAgICBjb25zdCBxeCA9IHFbMF07XG4gICAgY29uc3QgcXkgPSBxWzFdO1xuICAgIGNvbnN0IHF6ID0gcVsyXTtcbiAgICBjb25zdCBxdyA9IHFbM107XG4gICAgY29uc3QgYnogPSBNYXRoLnNpbihoYWxmQW5nbGUpO1xuICAgIGNvbnN0IGJ3ID0gTWF0aC5jb3MoaGFsZkFuZ2xlKTtcbiAgICBkc3RbMF0gPSBxeCAqIGJ3ICsgcXkgKiBiejtcbiAgICBkc3RbMV0gPSBxeSAqIGJ3IC0gcXggKiBiejtcbiAgICBkc3RbMl0gPSBxeiAqIGJ3ICsgcXcgKiBiejtcbiAgICBkc3RbM10gPSBxdyAqIGJ3IC0gcXogKiBiejtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTcGhlcmljYWxseSBsaW5lYXIgaW50ZXJwb2xhdGUgYmV0d2VlbiB0d28gcXVhdGVybmlvbnNcbiAqXG4gKiBAcGFyYW0gYSAtIHN0YXJ0aW5nIHZhbHVlXG4gKiBAcGFyYW0gYiAtIGVuZGluZyB2YWx1ZVxuICogQHBhcmFtIHQgLSB2YWx1ZSB3aGVyZSAwID0gYSBhbmQgMSA9IGJcbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBxdWF0ZXJuaW9uIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhICogYlxuICovXG5mdW5jdGlvbiBzbGVycChhLCBiLCB0LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGF4ID0gYVswXTtcbiAgICBjb25zdCBheSA9IGFbMV07XG4gICAgY29uc3QgYXogPSBhWzJdO1xuICAgIGNvbnN0IGF3ID0gYVszXTtcbiAgICBsZXQgYnggPSBiWzBdO1xuICAgIGxldCBieSA9IGJbMV07XG4gICAgbGV0IGJ6ID0gYlsyXTtcbiAgICBsZXQgYncgPSBiWzNdO1xuICAgIGxldCBjb3NPbWVnYSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7XG4gICAgaWYgKGNvc09tZWdhIDwgMCkge1xuICAgICAgICBjb3NPbWVnYSA9IC1jb3NPbWVnYTtcbiAgICAgICAgYnggPSAtYng7XG4gICAgICAgIGJ5ID0gLWJ5O1xuICAgICAgICBieiA9IC1iejtcbiAgICAgICAgYncgPSAtYnc7XG4gICAgfVxuICAgIGxldCBzY2FsZTA7XG4gICAgbGV0IHNjYWxlMTtcbiAgICBpZiAoMS4wIC0gY29zT21lZ2EgPiBFUFNJTE9OKSB7XG4gICAgICAgIGNvbnN0IG9tZWdhID0gTWF0aC5hY29zKGNvc09tZWdhKTtcbiAgICAgICAgY29uc3Qgc2luT21lZ2EgPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgICAgIHNjYWxlMCA9IE1hdGguc2luKCgxIC0gdCkgKiBvbWVnYSkgLyBzaW5PbWVnYTtcbiAgICAgICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbk9tZWdhO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICAgICAgc2NhbGUxID0gdDtcbiAgICB9XG4gICAgZHN0WzBdID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDtcbiAgICBkc3RbMV0gPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICAgIGRzdFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gICAgZHN0WzNdID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlIHRoZSBpbnZlcnNlIG9mIGEgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byBjb21wdXRlIHRoZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGEgKiBiXG4gKi9cbmZ1bmN0aW9uIGludmVyc2UkMShxLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IGEwID0gcVswXTtcbiAgICBjb25zdCBhMSA9IHFbMV07XG4gICAgY29uc3QgYTIgPSBxWzJdO1xuICAgIGNvbnN0IGEzID0gcVszXTtcbiAgICBjb25zdCBkb3QgPSBhMCAqIGEwICsgYTEgKiBhMSArIGEyICogYTIgKyBhMyAqIGEzO1xuICAgIGNvbnN0IGludkRvdCA9IGRvdCA/IDEgLyBkb3QgOiAwO1xuICAgIGRzdFswXSA9IC1hMCAqIGludkRvdDtcbiAgICBkc3RbMV0gPSAtYTEgKiBpbnZEb3Q7XG4gICAgZHN0WzJdID0gLWEyICogaW52RG90O1xuICAgIGRzdFszXSA9IGEzICogaW52RG90O1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGUgdGhlIGNvbmp1Z2F0ZSBvZiBhIHF1YXRlcm5pb25cbiAqIEZvciBxdWF0ZXJuaW9ucyB3aXRoIGEgbWFnbml0dWRlIG9mIDEgKGEgdW5pdCBxdWF0ZXJuaW9uKVxuICogdGhpcyByZXR1cm5zIHRoZSBzYW1lIGFzIHRoZSBpbnZlcnNlIGJ1dCBpcyBmYXN0ZXIgdG8gY2FsY3VsYXRlLlxuICpcbiAqIEBwYXJhbSBxIC0gcXVhdGVybmlvbiB0byBjb21wdXRlIHRoZSBjb25qdWdhdGUgb2YuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBjb25qdWdhdGUgb2YgcVxuICovXG5mdW5jdGlvbiBjb25qdWdhdGUocSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSAtcVswXTtcbiAgICBkc3RbMV0gPSAtcVsxXTtcbiAgICBkc3RbMl0gPSAtcVsyXTtcbiAgICBkc3RbM10gPSBxWzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBUaGUgY3JlYXRlZCBxdWF0ZXJuaW9uIGlzIG5vdCBub3JtYWxpemVkLlxuICpcbiAqIEBwYXJhbSBtIC0gcm90YXRpb24gbWF0cml4XG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSByZXN1bHRcbiAqL1xuZnVuY3Rpb24gZnJvbU1hdChtLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIC8qXG4gICAgMCAxIDJcbiAgICAzIDQgNVxuICAgIDYgNyA4XG4gIFxuICAgIDAgMSAyXG4gICAgNCA1IDZcbiAgICA4IDkgMTBcbiAgICAgKi9cbiAgICAvLyBBbGdvcml0aG0gaW4gS2VuIFNob2VtYWtlJ3MgYXJ0aWNsZSBpbiAxOTg3IFNJR0dSQVBIIGNvdXJzZSBub3Rlc1xuICAgIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICAgIGNvbnN0IHRyYWNlID0gbVswXSArIG1bNV0gKyBtWzEwXTtcbiAgICBpZiAodHJhY2UgPiAwLjApIHtcbiAgICAgICAgLy8gfHd8ID4gMS8yLCBtYXkgYXMgd2VsbCBjaG9vc2UgdyA+IDEvMlxuICAgICAgICBjb25zdCByb290ID0gTWF0aC5zcXJ0KHRyYWNlICsgMSk7IC8vIDJ3XG4gICAgICAgIGRzdFszXSA9IDAuNSAqIHJvb3Q7XG4gICAgICAgIGNvbnN0IGludlJvb3QgPSAwLjUgLyByb290OyAvLyAxLyg0dylcbiAgICAgICAgZHN0WzBdID0gKG1bNl0gLSBtWzldKSAqIGludlJvb3Q7XG4gICAgICAgIGRzdFsxXSA9IChtWzhdIC0gbVsyXSkgKiBpbnZSb290O1xuICAgICAgICBkc3RbMl0gPSAobVsxXSAtIG1bNF0pICogaW52Um9vdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHx3fCA8PSAxLzJcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBpZiAobVs1XSA+IG1bMF0pIHtcbiAgICAgICAgICAgIGkgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtWzEwXSA+IG1baSAqIDQgKyBpXSkge1xuICAgICAgICAgICAgaSA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaiA9IChpICsgMSkgJSAzO1xuICAgICAgICBjb25zdCBrID0gKGkgKyAyKSAlIDM7XG4gICAgICAgIGNvbnN0IHJvb3QgPSBNYXRoLnNxcnQobVtpICogNCArIGldIC0gbVtqICogNCArIGpdIC0gbVtrICogNCArIGtdICsgMS4wKTtcbiAgICAgICAgZHN0W2ldID0gMC41ICogcm9vdDtcbiAgICAgICAgY29uc3QgaW52Um9vdCA9IDAuNSAvIHJvb3Q7XG4gICAgICAgIGRzdFszXSA9IChtW2ogKiA0ICsga10gLSBtW2sgKiA0ICsgal0pICogaW52Um9vdDtcbiAgICAgICAgZHN0W2pdID0gKG1baiAqIDQgKyBpXSArIG1baSAqIDQgKyBqXSkgKiBpbnZSb290O1xuICAgICAgICBkc3Rba10gPSAobVtrICogNCArIGldICsgbVtpICogNCArIGtdKSAqIGludlJvb3Q7XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIGV1bGVyIGFuZ2xlIHgsIHksIHogdXNpbmcgdGhlIHByb3ZpZGVkIGludHJpbnNpYyBvcmRlciBmb3IgdGhlIGNvbnZlcnNpb24uXG4gKlxuICogQHBhcmFtIHhBbmdsZUluUmFkaWFucyAtIGFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQgWCBheGlzIGluIHJhZGlhbnMuXG4gKiBAcGFyYW0geUFuZ2xlSW5SYWRpYW5zIC0gYW5nbGUgdG8gcm90YXRlIGFyb3VuZCBZIGF4aXMgaW4gcmFkaWFucy5cbiAqIEBwYXJhbSB6QW5nbGVJblJhZGlhbnMgLSBhbmdsZSB0byByb3RhdGUgYXJvdW5kIFogYXhpcyBpbiByYWRpYW5zLlxuICogQHBhcmFtIG9yZGVyIC0gb3JkZXIgdG8gYXBwbHkgZXVsZXIgYW5nbGVzXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiByZXByZXNlbnRpbmcgdGhlIHNhbWUgcm90YXRpb24gYXMgdGhlIGV1bGVyIGFuZ2xlcyBhcHBsaWVkIGluIHRoZSBnaXZlbiBvcmRlclxuICovXG5mdW5jdGlvbiBmcm9tRXVsZXIoeEFuZ2xlSW5SYWRpYW5zLCB5QW5nbGVJblJhZGlhbnMsIHpBbmdsZUluUmFkaWFucywgb3JkZXIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgY29uc3QgeEhhbGZBbmdsZSA9IHhBbmdsZUluUmFkaWFucyAqIDAuNTtcbiAgICBjb25zdCB5SGFsZkFuZ2xlID0geUFuZ2xlSW5SYWRpYW5zICogMC41O1xuICAgIGNvbnN0IHpIYWxmQW5nbGUgPSB6QW5nbGVJblJhZGlhbnMgKiAwLjU7XG4gICAgY29uc3Qgc3ggPSBNYXRoLnNpbih4SGFsZkFuZ2xlKTtcbiAgICBjb25zdCBjeCA9IE1hdGguY29zKHhIYWxmQW5nbGUpO1xuICAgIGNvbnN0IHN5ID0gTWF0aC5zaW4oeUhhbGZBbmdsZSk7XG4gICAgY29uc3QgY3kgPSBNYXRoLmNvcyh5SGFsZkFuZ2xlKTtcbiAgICBjb25zdCBzeiA9IE1hdGguc2luKHpIYWxmQW5nbGUpO1xuICAgIGNvbnN0IGN6ID0gTWF0aC5jb3MoekhhbGZBbmdsZSk7XG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgICBjYXNlICd4eXonOlxuICAgICAgICAgICAgZHN0WzBdID0gc3ggKiBjeSAqIGN6ICsgY3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzFdID0gY3ggKiBzeSAqIGN6IC0gc3ggKiBjeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzJdID0gY3ggKiBjeSAqIHN6ICsgc3ggKiBzeSAqIGN6O1xuICAgICAgICAgICAgZHN0WzNdID0gY3ggKiBjeSAqIGN6IC0gc3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3h6eSc6XG4gICAgICAgICAgICBkc3RbMF0gPSBzeCAqIGN5ICogY3ogLSBjeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMV0gPSBjeCAqIHN5ICogY3ogLSBzeCAqIGN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMl0gPSBjeCAqIGN5ICogc3ogKyBzeCAqIHN5ICogY3o7XG4gICAgICAgICAgICBkc3RbM10gPSBjeCAqIGN5ICogY3ogKyBzeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAneXh6JzpcbiAgICAgICAgICAgIGRzdFswXSA9IHN4ICogY3kgKiBjeiArIGN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsxXSA9IGN4ICogc3kgKiBjeiAtIHN4ICogY3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgICAgICAgICAgIGRzdFszXSA9IGN4ICogY3kgKiBjeiArIHN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd5engnOlxuICAgICAgICAgICAgZHN0WzBdID0gc3ggKiBjeSAqIGN6ICsgY3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzFdID0gY3ggKiBzeSAqIGN6ICsgc3ggKiBjeSAqIHN6O1xuICAgICAgICAgICAgZHN0WzJdID0gY3ggKiBjeSAqIHN6IC0gc3ggKiBzeSAqIGN6O1xuICAgICAgICAgICAgZHN0WzNdID0gY3ggKiBjeSAqIGN6IC0gc3ggKiBzeSAqIHN6O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3p4eSc6XG4gICAgICAgICAgICBkc3RbMF0gPSBzeCAqIGN5ICogY3ogLSBjeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMV0gPSBjeCAqIHN5ICogY3ogKyBzeCAqIGN5ICogc3o7XG4gICAgICAgICAgICBkc3RbMl0gPSBjeCAqIGN5ICogc3ogKyBzeCAqIHN5ICogY3o7XG4gICAgICAgICAgICBkc3RbM10gPSBjeCAqIGN5ICogY3ogLSBzeCAqIHN5ICogc3o7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnenl4JzpcbiAgICAgICAgICAgIGRzdFswXSA9IHN4ICogY3kgKiBjeiAtIGN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsxXSA9IGN4ICogc3kgKiBjeiArIHN4ICogY3kgKiBzejtcbiAgICAgICAgICAgIGRzdFsyXSA9IGN4ICogY3kgKiBzeiAtIHN4ICogc3kgKiBjejtcbiAgICAgICAgICAgIGRzdFszXSA9IGN4ICogY3kgKiBjeiArIHN4ICogc3kgKiBzejtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHJvdGF0aW9uIG9yZGVyOiAke29yZGVyfWApO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb3BpZXMgYSBxdWF0ZXJuaW9uLiAoc2FtZSBhcyB7QGxpbmsgcXVhdC5jbG9uZX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgcXVhdC5jcmVhdGV9IGFuZCB7QGxpbmsgcXVhdC5zZXR9XG4gKiBAcGFyYW0gcSAtIFRoZSBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyBhIGNvcHkgb2YgcVxuICovXG5mdW5jdGlvbiBjb3B5JDEocSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSBxWzBdO1xuICAgIGRzdFsxXSA9IHFbMV07XG4gICAgZHN0WzJdID0gcVsyXTtcbiAgICBkc3RbM10gPSBxWzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsb25lcyBhIHF1YXRlcm5pb24uIChzYW1lIGFzIHtAbGluayBxdWF0LmNvcHl9KVxuICogQWxzbyBzZWUge0BsaW5rIHF1YXQuY3JlYXRlfSBhbmQge0BsaW5rIHF1YXQuc2V0fVxuICogQHBhcmFtIHEgLSBUaGUgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIHEuXG4gKi9cbmNvbnN0IGNsb25lJDEgPSBjb3B5JDE7XG4vKipcbiAqIEFkZHMgdHdvIHF1YXRlcm5pb25zOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHF1YXRlcm5pb24gdGhhdCBpcyB0aGUgc3VtIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIGFkZCQxKGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSArIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl07XG4gICAgZHN0WzNdID0gYVszXSArIGJbM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byBxdWF0ZXJuaW9ucy5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgcXVhdGVybmlvbiB0aGF0IGlzIHRoZSBkaWZmZXJlbmNlIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIHN1YnRyYWN0JDEoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSBhWzBdIC0gYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdIC0gYlsxXTtcbiAgICBkc3RbMl0gPSBhWzJdIC0gYlsyXTtcbiAgICBkc3RbM10gPSBhWzNdIC0gYlszXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBTdWJ0cmFjdHMgdHdvIHF1YXRlcm5pb25zLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBxdWF0ZXJuaW9uIHRoYXQgaXMgdGhlIGRpZmZlcmVuY2Ugb2YgYSBhbmQgYi5cbiAqL1xuY29uc3Qgc3ViJDEgPSBzdWJ0cmFjdCQxO1xuLyoqXG4gKiBNdWx0aXBsaWVzIGEgcXVhdGVybmlvbiBieSBhIHNjYWxhci5cbiAqIEBwYXJhbSB2IC0gVGhlIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgcXVhdGVybmlvbi5cbiAqL1xuZnVuY3Rpb24gbXVsU2NhbGFyJDEodiwgaywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdICogaztcbiAgICBkc3RbMV0gPSB2WzFdICogaztcbiAgICBkc3RbMl0gPSB2WzJdICogaztcbiAgICBkc3RbM10gPSB2WzNdICogaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIGEgcXVhdGVybmlvbiBieSBhIHNjYWxhci4gKHNhbWUgYXMgbXVsU2NhbGFyKVxuICogQHBhcmFtIHYgLSBUaGUgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSBxdWF0ZXJuaW9uIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCBxdWF0ZXJuaW9uLlxuICovXG5jb25zdCBzY2FsZSQxID0gbXVsU2NhbGFyJDE7XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgcXVhdGVybmlvbi5cbiAqL1xuZnVuY3Rpb24gZGl2U2NhbGFyJDEodiwgaywgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdIC8gaztcbiAgICBkc3RbMV0gPSB2WzFdIC8gaztcbiAgICBkc3RbMl0gPSB2WzJdIC8gaztcbiAgICBkc3RbM10gPSB2WzNdIC8gaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHF1YXRlcm5pb25zXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgZG90IHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gZG90JDEoYSwgYikge1xuICAgIHJldHVybiAoYVswXSAqIGJbMF0pICsgKGFbMV0gKiBiWzFdKSArIChhWzJdICogYlsyXSkgKyAoYVszXSAqIGJbM10pO1xufVxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gcXVhdGVybmlvbnMuXG4gKiBHaXZlbiBxdWF0ZXJuaW9ucyBhIGFuZCBiIGFuZCBpbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50IHQsIHJldHVybnNcbiAqIGEgKyB0ICogKGIgLSBhKS5cbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHF1YXRlcm5pb24uXG4gKiBAcGFyYW0gdCAtIEludGVycG9sYXRpb24gY29lZmZpY2llbnQuXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBsaW5lYXIgaW50ZXJwb2xhdGVkIHJlc3VsdC5cbiAqL1xuZnVuY3Rpb24gbGVycCQxKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSArIHQgKiAoYlswXSAtIGFbMF0pO1xuICAgIGRzdFsxXSA9IGFbMV0gKyB0ICogKGJbMV0gLSBhWzFdKTtcbiAgICBkc3RbMl0gPSBhWzJdICsgdCAqIChiWzJdIC0gYVsyXSk7XG4gICAgZHN0WzNdID0gYVszXSArIHQgKiAoYlszXSAtIGFbM10pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvblxuICogQHBhcmFtIHYgLSBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHF1YXRlcm5pb24uXG4gKi9cbmZ1bmN0aW9uIGxlbmd0aCQxKHYpIHtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICBjb25zdCB2MyA9IHZbM107XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzKTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiBxdWF0ZXJuaW9uIChzYW1lIGFzIGxlbmd0aClcbiAqIEBwYXJhbSB2IC0gcXVhdGVybmlvbi5cbiAqIEByZXR1cm5zIGxlbmd0aCBvZiBxdWF0ZXJuaW9uLlxuICovXG5jb25zdCBsZW4kMSA9IGxlbmd0aCQxO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvblxuICogQHBhcmFtIHYgLSBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvbi5cbiAqL1xuZnVuY3Rpb24gbGVuZ3RoU3EkMSh2KSB7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgY29uc3QgdjMgPSB2WzNdO1xuICAgIHJldHVybiB2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgcXVhdGVybmlvbiAoc2FtZSBhcyBsZW5ndGhTcSlcbiAqIEBwYXJhbSB2IC0gcXVhdGVybmlvbi5cbiAqIEByZXR1cm5zIHNxdWFyZSBvZiB0aGUgbGVuZ3RoIG9mIHF1YXRlcm5pb24uXG4gKi9cbmNvbnN0IGxlblNxJDEgPSBsZW5ndGhTcSQxO1xuLyoqXG4gKiBEaXZpZGVzIGEgcXVhdGVybmlvbiBieSBpdHMgRXVjbGlkZWFuIGxlbmd0aCBhbmQgcmV0dXJucyB0aGUgcXVvdGllbnQuXG4gKiBAcGFyYW0gdiAtIFRoZSBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgbm9ybWFsaXplZCBxdWF0ZXJuaW9uLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemUkMSh2LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgdjIgPSB2WzJdO1xuICAgIGNvbnN0IHYzID0gdlszXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLnNxcnQodjAgKiB2MCArIHYxICogdjEgKyB2MiAqIHYyICsgdjMgKiB2Myk7XG4gICAgaWYgKGxlbiA+IDAuMDAwMDEpIHtcbiAgICAgICAgZHN0WzBdID0gdjAgLyBsZW47XG4gICAgICAgIGRzdFsxXSA9IHYxIC8gbGVuO1xuICAgICAgICBkc3RbMl0gPSB2MiAvIGxlbjtcbiAgICAgICAgZHN0WzNdID0gdjMgLyBsZW47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkc3RbMF0gPSAwO1xuICAgICAgICBkc3RbMV0gPSAwO1xuICAgICAgICBkc3RbMl0gPSAwO1xuICAgICAgICBkc3RbM10gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIHF1YXRlcm5pb25zIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgdHJ1ZSBpZiBxdWF0ZXJuaW9ucyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5JDEoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhWzBdIC0gYlswXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMV0gLSBiWzFdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVsyXSAtIGJbMl0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzNdIC0gYlszXSkgPCBFUFNJTE9OO1xufVxuLyoqXG4gKiBDaGVjayBpZiAyIHF1YXRlcm5pb25zIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCBxdWF0ZXJuaW9uLlxuICogQHJldHVybnMgdHJ1ZSBpZiBxdWF0ZXJuaW9ucyBhcmUgZXhhY3RseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHMkMShhLCBiKSB7XG4gICAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM107XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gaWRlbnRpdHkgcXVhdGVybmlvblxuICogQHBhcmFtIGRzdCAtIHF1YXRlcm5pb24gdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBhbiBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgZHN0WzBdID0gMDtcbiAgICBkc3RbMV0gPSAwO1xuICAgIGRzdFsyXSA9IDA7XG4gICAgZHN0WzNdID0gMTtcbiAgICByZXR1cm4gZHN0O1xufVxubGV0IHRlbXBWZWMzO1xubGV0IHhVbml0VmVjMztcbmxldCB5VW5pdFZlYzM7XG4vKipcbiAqIENvbXB1dGVzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lIHZlY3RvciB0byBhbm90aGVyLlxuICpcbiAqIEBwYXJhbSBhVW5pdCAtIHRoZSBzdGFydCB2ZWN0b3JcbiAqIEBwYXJhbSBiVW5pdCAtIHRoZSBlbmQgdmVjdG9yXG4gKiBAcGFyYW0gZHN0IC0gcXVhdGVybmlvbiB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIHRoZSByZXN1bHRcbiAqL1xuZnVuY3Rpb24gcm90YXRpb25UbyhhVW5pdCwgYlVuaXQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgdGVtcFZlYzMgPSB0ZW1wVmVjMyB8fCBjcmVhdGUkMygpO1xuICAgIHhVbml0VmVjMyA9IHhVbml0VmVjMyB8fCBjcmVhdGUkMygxLCAwLCAwKTtcbiAgICB5VW5pdFZlYzMgPSB5VW5pdFZlYzMgfHwgY3JlYXRlJDMoMCwgMSwgMCk7XG4gICAgY29uc3QgZG90ID0gZG90JDIoYVVuaXQsIGJVbml0KTtcbiAgICBpZiAoZG90IDwgLTAuOTk5OTk5KSB7XG4gICAgICAgIGNyb3NzKHhVbml0VmVjMywgYVVuaXQsIHRlbXBWZWMzKTtcbiAgICAgICAgaWYgKGxlbiQyKHRlbXBWZWMzKSA8IDAuMDAwMDAxKSB7XG4gICAgICAgICAgICBjcm9zcyh5VW5pdFZlYzMsIGFVbml0LCB0ZW1wVmVjMyk7XG4gICAgICAgIH1cbiAgICAgICAgbm9ybWFsaXplJDIodGVtcFZlYzMsIHRlbXBWZWMzKTtcbiAgICAgICAgZnJvbUF4aXNBbmdsZSh0ZW1wVmVjMywgTWF0aC5QSSwgZHN0KTtcbiAgICAgICAgcmV0dXJuIGRzdDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZG90ID4gMC45OTk5OTkpIHtcbiAgICAgICAgZHN0WzBdID0gMDtcbiAgICAgICAgZHN0WzFdID0gMDtcbiAgICAgICAgZHN0WzJdID0gMDtcbiAgICAgICAgZHN0WzNdID0gMTtcbiAgICAgICAgcmV0dXJuIGRzdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNyb3NzKGFVbml0LCBiVW5pdCwgdGVtcFZlYzMpO1xuICAgICAgICBkc3RbMF0gPSB0ZW1wVmVjM1swXTtcbiAgICAgICAgZHN0WzFdID0gdGVtcFZlYzNbMV07XG4gICAgICAgIGRzdFsyXSA9IHRlbXBWZWMzWzJdO1xuICAgICAgICBkc3RbM10gPSAxICsgZG90O1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplJDEoZHN0LCBkc3QpO1xuICAgIH1cbn1cbmxldCB0ZW1wUXVhdDE7XG5sZXQgdGVtcFF1YXQyO1xuLyoqXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xuICpcbiAqIEBwYXJhbSBhIC0gdGhlIGZpcnN0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSBiIC0gdGhlIHNlY29uZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gYyAtIHRoZSB0aGlyZCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gZCAtIHRoZSBmb3VydGggcXVhdGVybmlvblxuICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGNvZWZmaWNpZW50IDAgdG8gMVxuICogQHJldHVybnMgcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIHNxbGVycChhLCBiLCBjLCBkLCB0LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFF1YXRUeXBlKDQpO1xuICAgIHRlbXBRdWF0MSA9IHRlbXBRdWF0MSB8fCBuZXcgUXVhdFR5cGUoNCk7XG4gICAgdGVtcFF1YXQyID0gdGVtcFF1YXQyIHx8IG5ldyBRdWF0VHlwZSg0KTtcbiAgICBzbGVycChhLCBkLCB0LCB0ZW1wUXVhdDEpO1xuICAgIHNsZXJwKGIsIGMsIHQsIHRlbXBRdWF0Mik7XG4gICAgc2xlcnAodGVtcFF1YXQxLCB0ZW1wUXVhdDIsIDIgKiB0ICogKDEgLSB0KSwgZHN0KTtcbiAgICByZXR1cm4gZHN0O1xufVxuXG52YXIgcXVhdEltcGwgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIGNyZWF0ZTogY3JlYXRlJDEsXG4gICAgc2V0RGVmYXVsdFR5cGU6IHNldERlZmF1bHRUeXBlJDIsXG4gICAgZnJvbVZhbHVlczogZnJvbVZhbHVlcyQxLFxuICAgIHNldDogc2V0JDEsXG4gICAgZnJvbUF4aXNBbmdsZTogZnJvbUF4aXNBbmdsZSxcbiAgICB0b0F4aXNBbmdsZTogdG9BeGlzQW5nbGUsXG4gICAgYW5nbGU6IGFuZ2xlLFxuICAgIG11bHRpcGx5OiBtdWx0aXBseSQxLFxuICAgIG11bDogbXVsJDEsXG4gICAgcm90YXRlWDogcm90YXRlWCxcbiAgICByb3RhdGVZOiByb3RhdGVZLFxuICAgIHJvdGF0ZVo6IHJvdGF0ZVosXG4gICAgc2xlcnA6IHNsZXJwLFxuICAgIGludmVyc2U6IGludmVyc2UkMSxcbiAgICBjb25qdWdhdGU6IGNvbmp1Z2F0ZSxcbiAgICBmcm9tTWF0OiBmcm9tTWF0LFxuICAgIGZyb21FdWxlcjogZnJvbUV1bGVyLFxuICAgIGNvcHk6IGNvcHkkMSxcbiAgICBjbG9uZTogY2xvbmUkMSxcbiAgICBhZGQ6IGFkZCQxLFxuICAgIHN1YnRyYWN0OiBzdWJ0cmFjdCQxLFxuICAgIHN1Yjogc3ViJDEsXG4gICAgbXVsU2NhbGFyOiBtdWxTY2FsYXIkMSxcbiAgICBzY2FsZTogc2NhbGUkMSxcbiAgICBkaXZTY2FsYXI6IGRpdlNjYWxhciQxLFxuICAgIGRvdDogZG90JDEsXG4gICAgbGVycDogbGVycCQxLFxuICAgIGxlbmd0aDogbGVuZ3RoJDEsXG4gICAgbGVuOiBsZW4kMSxcbiAgICBsZW5ndGhTcTogbGVuZ3RoU3EkMSxcbiAgICBsZW5TcTogbGVuU3EkMSxcbiAgICBub3JtYWxpemU6IG5vcm1hbGl6ZSQxLFxuICAgIGVxdWFsc0FwcHJveGltYXRlbHk6IGVxdWFsc0FwcHJveGltYXRlbHkkMSxcbiAgICBlcXVhbHM6IGVxdWFscyQxLFxuICAgIGlkZW50aXR5OiBpZGVudGl0eSxcbiAgICByb3RhdGlvblRvOiByb3RhdGlvblRvLFxuICAgIHNxbGVycDogc3FsZXJwXG59KTtcblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKlxuICogVmVjNCBtYXRoIGZ1bmN0aW9ucy5cbiAqXG4gKiBBbG1vc3QgYWxsIGZ1bmN0aW9ucyB0YWtlIGFuIG9wdGlvbmFsIGBkc3RgIGFyZ3VtZW50LiBJZiBpdCBpcyBub3QgcGFzc2VkIGluIHRoZVxuICogZnVuY3Rpb25zIHdpbGwgY3JlYXRlIGEgbmV3IGBWZWM0YC4gSW4gb3RoZXIgd29yZHMgeW91IGNhbiBkbyB0aGlzXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWM0LmNyb3NzKHYxLCB2Mik7ICAvLyBDcmVhdGVzIGEgbmV3IFZlYzQgd2l0aCB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB2MSB4IHYyLlxuICpcbiAqIG9yXG4gKlxuICogICAgIGNvbnN0IHYgPSB2ZWM0LmNyZWF0ZSgpO1xuICogICAgIHZlYzQuY3Jvc3ModjEsIHYyLCB2KTsgIC8vIFB1dHMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdjEgeCB2MiBpbiB2XG4gKlxuICogVGhlIGZpcnN0IHN0eWxlIGlzIG9mdGVuIGVhc2llciBidXQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0J3MgdXNlZCBpdCBnZW5lcmF0ZXMgZ2FyYmFnZSB3aGVyZVxuICogYXMgdGhlcmUgaXMgYWxtb3N0IG5ldmVyIGFsbG9jYXRpb24gd2l0aCB0aGUgc2Vjb25kIHN0eWxlLlxuICpcbiAqIEl0IGlzIGFsd2F5cyBzYWZlIHRvIHBhc3MgYW55IHZlY3RvciBhcyB0aGUgZGVzdGluYXRpb24uIFNvIGZvciBleGFtcGxlXG4gKlxuICogICAgIHZlYzQuY3Jvc3ModjEsIHYyLCB2MSk7ICAvLyBQdXRzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHYxIHggdjIgaW4gdjFcbiAqXG4gKi9cbmxldCBWZWNUeXBlID0gRmxvYXQzMkFycmF5O1xuLyoqXG4gKiBTZXRzIHRoZSB0eXBlIHRoaXMgbGlicmFyeSBjcmVhdGVzIGZvciBhIFZlYzRcbiAqIEBwYXJhbSBjdG9yIC0gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZS4gRWl0aGVyIGBGbG9hdDMyQXJyYXlgLCBgRmxvYXQ2NEFycmF5YCwgb3IgYEFycmF5YFxuICogQHJldHVybnMgcHJldmlvdXMgY29uc3RydWN0b3IgZm9yIFZlYzRcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdFR5cGUkMShjdG9yKSB7XG4gICAgY29uc3Qgb2xkVHlwZSA9IFZlY1R5cGU7XG4gICAgVmVjVHlwZSA9IGN0b3I7XG4gICAgcmV0dXJuIG9sZFR5cGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSB2ZWM0OyBtYXkgYmUgY2FsbGVkIHdpdGggeCwgeSwgeiB0byBzZXQgaW5pdGlhbCB2YWx1ZXMuXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcGFyYW0gdyAtIEluaXRpYWwgdyB2YWx1ZS5cbiAqIEByZXR1cm5zIHRoZSBjcmVhdGVkIHZlY3RvclxuICovXG5mdW5jdGlvbiBjcmVhdGUoeCwgeSwgeiwgdykge1xuICAgIGNvbnN0IGRzdCA9IG5ldyBWZWNUeXBlKDQpO1xuICAgIGlmICh4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHN0WzBdID0geDtcbiAgICAgICAgaWYgKHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHN0WzFdID0geTtcbiAgICAgICAgICAgIGlmICh6ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkc3RbMl0gPSB6O1xuICAgICAgICAgICAgICAgIGlmICh3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZHN0WzNdID0gdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRzdDtcbn1cblxuLypcbiAqIENvcHlyaWdodCAyMDIyIEdyZWdnIFRhdmFyZXNcbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvblxuICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsXG4gKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gIElOIE5PIEVWRU5UIFNIQUxMXG4gKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVJcbiAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdmVjNDsgbWF5IGJlIGNhbGxlZCB3aXRoIHgsIHksIHogdG8gc2V0IGluaXRpYWwgdmFsdWVzLiAoc2FtZSBhcyBjcmVhdGUpXG4gKiBAcGFyYW0geCAtIEluaXRpYWwgeCB2YWx1ZS5cbiAqIEBwYXJhbSB5IC0gSW5pdGlhbCB5IHZhbHVlLlxuICogQHBhcmFtIHogLSBJbml0aWFsIHogdmFsdWUuXG4gKiBAcGFyYW0geiAtIEluaXRpYWwgdyB2YWx1ZS5cbiAqIEByZXR1cm5zIHRoZSBjcmVhdGVkIHZlY3RvclxuICovXG5jb25zdCBmcm9tVmFsdWVzID0gY3JlYXRlO1xuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZXMgb2YgYSBWZWM0XG4gKiBBbHNvIHNlZSB7QGxpbmsgdmVjNC5jcmVhdGV9IGFuZCB7QGxpbmsgdmVjNC5jb3B5fVxuICpcbiAqIEBwYXJhbSB4IGZpcnN0IHZhbHVlXG4gKiBAcGFyYW0geSBzZWNvbmQgdmFsdWVcbiAqIEBwYXJhbSB6IHRoaXJkIHZhbHVlXG4gKiBAcGFyYW0gdyBmb3VydGggdmFsdWVcbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB3aXRoIGl0cyBlbGVtZW50cyBzZXQuXG4gKi9cbmZ1bmN0aW9uIHNldCh4LCB5LCB6LCB3LCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0geDtcbiAgICBkc3RbMV0gPSB5O1xuICAgIGRzdFsyXSA9IHo7XG4gICAgZHN0WzNdID0gdztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBcHBsaWVzIE1hdGguY2VpbCB0byBlYWNoIGVsZW1lbnQgb2YgdmVjdG9yXG4gKiBAcGFyYW0gdiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgdmVjdG9yIHRoYXQgaXMgdGhlIGNlaWwgb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIGNlaWwodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGguY2VpbCh2WzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLmNlaWwodlsxXSk7XG4gICAgZHN0WzJdID0gTWF0aC5jZWlsKHZbMl0pO1xuICAgIGRzdFszXSA9IE1hdGguY2VpbCh2WzNdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBBcHBsaWVzIE1hdGguZmxvb3IgdG8gZWFjaCBlbGVtZW50IG9mIHZlY3RvclxuICogQHBhcmFtIHYgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBBIHZlY3RvciB0aGF0IGlzIHRoZSBmbG9vciBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gZmxvb3IodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGguZmxvb3IodlswXSk7XG4gICAgZHN0WzFdID0gTWF0aC5mbG9vcih2WzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLmZsb29yKHZbMl0pO1xuICAgIGRzdFszXSA9IE1hdGguZmxvb3IodlszXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQXBwbGllcyBNYXRoLnJvdW5kIHRvIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgcm91bmQgb2YgZWFjaCBlbGVtZW50IG9mIHYuXG4gKi9cbmZ1bmN0aW9uIHJvdW5kKHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBNYXRoLnJvdW5kKHZbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgucm91bmQodlsxXSk7XG4gICAgZHN0WzJdID0gTWF0aC5yb3VuZCh2WzJdKTtcbiAgICBkc3RbM10gPSBNYXRoLnJvdW5kKHZbM10pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsYW1wIGVhY2ggZWxlbWVudCBvZiB2ZWN0b3IgYmV0d2VlbiBtaW4gYW5kIG1heFxuICogQHBhcmFtIHYgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBtYXggLSBNaW4gdmFsdWUsIGRlZmF1bHQgMFxuICogQHBhcmFtIG1pbiAtIE1heCB2YWx1ZSwgZGVmYXVsdCAxXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCB0aGUgY2xhbXBlZCB2YWx1ZSBvZiBlYWNoIGVsZW1lbnQgb2Ygdi5cbiAqL1xuZnVuY3Rpb24gY2xhbXAodiwgbWluID0gMCwgbWF4ID0gMSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2WzBdKSk7XG4gICAgZHN0WzFdID0gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZbMV0pKTtcbiAgICBkc3RbMl0gPSBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdlsyXSkpO1xuICAgIGRzdFszXSA9IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2WzNdKSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjdG9yczsgYXNzdW1lcyBhIGFuZCBiIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9uLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgc3VtIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIGFkZChhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSArIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSArIGJbMl07XG4gICAgZHN0WzNdID0gYVszXSArIGJbM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogQWRkcyB0d28gdmVjdG9ycywgc2NhbGluZyB0aGUgMm5kOyBhc3N1bWVzIGEgYW5kIGIgaGF2ZSB0aGUgc2FtZSBkaW1lbnNpb24uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBzY2FsZSAtIEFtb3VudCB0byBzY2FsZSBiXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgc3VtIG9mIGEgKyBiICogc2NhbGUuXG4gKi9cbmZ1bmN0aW9uIGFkZFNjYWxlZChhLCBiLCBzY2FsZSwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gICAgZHN0WzFdID0gYVsxXSArIGJbMV0gKiBzY2FsZTtcbiAgICBkc3RbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICAgIGRzdFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byB2ZWN0b3JzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBzdWJ0cmFjdChhLCBiLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0gYVswXSAtIGJbMF07XG4gICAgZHN0WzFdID0gYVsxXSAtIGJbMV07XG4gICAgZHN0WzJdID0gYVsyXSAtIGJbMl07XG4gICAgZHN0WzNdID0gYVszXSAtIGJbM107XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogU3VidHJhY3RzIHR3byB2ZWN0b3JzLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSB2ZWN0b3IgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBzdWIgPSBzdWJ0cmFjdDtcbi8qKlxuICogQ2hlY2sgaWYgMiB2ZWN0b3JzIGFyZSBhcHByb3hpbWF0ZWx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHRydWUgaWYgdmVjdG9ycyBhcmUgYXBwcm94aW1hdGVseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHNBcHByb3hpbWF0ZWx5KGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoYVswXSAtIGJbMF0pIDwgRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhhWzFdIC0gYlsxXSkgPCBFUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGFbMl0gLSBiWzJdKSA8IEVQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoYVszXSAtIGJbM10pIDwgRVBTSUxPTjtcbn1cbi8qKlxuICogQ2hlY2sgaWYgMiB2ZWN0b3JzIGFyZSBleGFjdGx5IGVxdWFsXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEByZXR1cm5zIHRydWUgaWYgdmVjdG9ycyBhcmUgZXhhY3RseSBlcXVhbFxuICovXG5mdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdO1xufVxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiBhbmQgaW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudCB0LCByZXR1cm5zXG4gKiBhICsgdCAqIChiIC0gYSkuXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSB0IC0gSW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudC5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgbGluZWFyIGludGVycG9sYXRlZCByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIGxlcnAoYSwgYiwgdCwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IGFbMF0gKyB0ICogKGJbMF0gLSBhWzBdKTtcbiAgICBkc3RbMV0gPSBhWzFdICsgdCAqIChiWzFdIC0gYVsxXSk7XG4gICAgZHN0WzJdID0gYVsyXSArIHQgKiAoYlsyXSAtIGFbMl0pO1xuICAgIGRzdFszXSA9IGFbM10gKyB0ICogKGJbM10gLSBhWzNdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBQZXJmb3JtcyBsaW5lYXIgaW50ZXJwb2xhdGlvbiBvbiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiBhbmQgaW50ZXJwb2xhdGlvbiBjb2VmZmljaWVudCB2ZWN0b3IgdCwgcmV0dXJuc1xuICogYSArIHQgKiAoYiAtIGEpLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gdCAtIEludGVycG9sYXRpb24gY29lZmZpY2llbnRzIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyB0aGUgbGluZWFyIGludGVycG9sYXRlZCByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIGxlcnBWKGEsIGIsIHQsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBhWzBdICsgdFswXSAqIChiWzBdIC0gYVswXSk7XG4gICAgZHN0WzFdID0gYVsxXSArIHRbMV0gKiAoYlsxXSAtIGFbMV0pO1xuICAgIGRzdFsyXSA9IGFbMl0gKyB0WzJdICogKGJbMl0gLSBhWzJdKTtcbiAgICBkc3RbM10gPSBhWzNdICsgdFszXSAqIChiWzNdIC0gYVszXSk7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogUmV0dXJuIG1heCB2YWx1ZXMgb2YgdHdvIHZlY3RvcnMuXG4gKiBHaXZlbiB2ZWN0b3JzIGEgYW5kIGIgcmV0dXJuc1xuICogW21heChhWzBdLCBiWzBdKSwgbWF4KGFbMV0sIGJbMV0pLCBtYXgoYVsyXSwgYlsyXSldLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG1heCBjb21wb25lbnRzIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbWF4KGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgICBkc3RbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgICBkc3RbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgICBkc3RbM10gPSBNYXRoLm1heChhWzNdLCBiWzNdKTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBSZXR1cm4gbWluIHZhbHVlcyBvZiB0d28gdmVjdG9ycy5cbiAqIEdpdmVuIHZlY3RvcnMgYSBhbmQgYiByZXR1cm5zXG4gKiBbbWluKGFbMF0sIGJbMF0pLCBtaW4oYVsxXSwgYlsxXSksIG1pbihhWzJdLCBiWzJdKV0uXG4gKiBAcGFyYW0gYSAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGIgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgbWluIGNvbXBvbmVudHMgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBtaW4oYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICAgIGRzdFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICAgIGRzdFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICAgIGRzdFszXSA9IE1hdGgubWluKGFbM10sIGJbM10pO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIE11bHRpcGxpZXMgYSB2ZWN0b3IgYnkgYSBzY2FsYXIuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gayAtIFRoZSBzY2FsYXIuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHNjYWxlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIG11bFNjYWxhcih2LCBrLCBkc3QpIHtcbiAgICBkc3QgPSBkc3QgfHwgbmV3IFZlY1R5cGUoNCk7XG4gICAgZHN0WzBdID0gdlswXSAqIGs7XG4gICAgZHN0WzFdID0gdlsxXSAqIGs7XG4gICAgZHN0WzJdID0gdlsyXSAqIGs7XG4gICAgZHN0WzNdID0gdlszXSAqIGs7XG4gICAgcmV0dXJuIGRzdDtcbn1cbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhIHNjYWxhci4gKHNhbWUgYXMgbXVsU2NhbGFyKVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGsgLSBUaGUgc2NhbGFyLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBzY2FsZWQgdmVjdG9yLlxuICovXG5jb25zdCBzY2FsZSA9IG11bFNjYWxhcjtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhIHNjYWxhci5cbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBrIC0gVGhlIHNjYWxhci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgc2NhbGVkIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gZGl2U2NhbGFyKHYsIGssIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdIC8gaztcbiAgICBkc3RbMV0gPSB2WzFdIC8gaztcbiAgICBkc3RbMl0gPSB2WzJdIC8gaztcbiAgICBkc3RbM10gPSB2WzNdIC8gaztcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBJbnZlcnNlIGEgdmVjdG9yLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSBpbnZlcnRlZCB2ZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGludmVyc2UodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IDEgLyB2WzBdO1xuICAgIGRzdFsxXSA9IDEgLyB2WzFdO1xuICAgIGRzdFsyXSA9IDEgLyB2WzJdO1xuICAgIGRzdFszXSA9IDEgLyB2WzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEludmVydCBhIHZlY3Rvci4gKHNhbWUgYXMgaW52ZXJzZSlcbiAqIEBwYXJhbSB2IC0gVGhlIHZlY3Rvci5cbiAqIEBwYXJhbSBkc3QgLSB2ZWN0b3IgdG8gaG9sZCByZXN1bHQuIElmIG5vdCBwYXNzZWQgaW4gYSBuZXcgb25lIGlzIGNyZWF0ZWQuXG4gKiBAcmV0dXJucyBUaGUgaW52ZXJ0ZWQgdmVjdG9yLlxuICovXG5jb25zdCBpbnZlcnQgPSBpbnZlcnNlO1xuLyoqXG4gKiBDb21wdXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnNcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHJldHVybnMgZG90IHByb2R1Y3RcbiAqL1xuZnVuY3Rpb24gZG90KGEsIGIpIHtcbiAgICByZXR1cm4gKGFbMF0gKiBiWzBdKSArIChhWzFdICogYlsxXSkgKyAoYVsyXSAqIGJbMl0pICsgKGFbM10gKiBiWzNdKTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgbGVuZ3RoIG9mIHZlY3Rvci5cbiAqL1xuZnVuY3Rpb24gbGVuZ3RoKHYpIHtcbiAgICBjb25zdCB2MCA9IHZbMF07XG4gICAgY29uc3QgdjEgPSB2WzFdO1xuICAgIGNvbnN0IHYyID0gdlsyXTtcbiAgICBjb25zdCB2MyA9IHZbM107XG4gICAgcmV0dXJuIE1hdGguc3FydCh2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzKTtcbn1cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxlbmd0aCBvZiB2ZWN0b3IgKHNhbWUgYXMgbGVuZ3RoKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5jb25zdCBsZW4gPSBsZW5ndGg7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3JcbiAqIEBwYXJhbSB2IC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBsZW5ndGhTcSh2KSB7XG4gICAgY29uc3QgdjAgPSB2WzBdO1xuICAgIGNvbnN0IHYxID0gdlsxXTtcbiAgICBjb25zdCB2MiA9IHZbMl07XG4gICAgY29uc3QgdjMgPSB2WzNdO1xuICAgIHJldHVybiB2MCAqIHYwICsgdjEgKiB2MSArIHYyICogdjIgKyB2MyAqIHYzO1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBsZW5ndGggb2YgdmVjdG9yIChzYW1lIGFzIGxlbmd0aFNxKVxuICogQHBhcmFtIHYgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGxlbmd0aCBvZiB2ZWN0b3IuXG4gKi9cbmNvbnN0IGxlblNxID0gbGVuZ3RoU3E7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cbmZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICBjb25zdCBkdyA9IGFbM10gLSBiWzNdO1xuICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6ICsgZHcgKiBkdyk7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlKVxuICogQHBhcmFtIGEgLSB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIHZlY3Rvci5cbiAqIEByZXR1cm5zIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5jb25zdCBkaXN0ID0gZGlzdGFuY2U7XG4vKipcbiAqIENvbXB1dGVzIHRoZSBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gMiBwb2ludHNcbiAqIEBwYXJhbSBhIC0gdmVjdG9yLlxuICogQHBhcmFtIGIgLSB2ZWN0b3IuXG4gKiBAcmV0dXJucyBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG5mdW5jdGlvbiBkaXN0YW5jZVNxKGEsIGIpIHtcbiAgICBjb25zdCBkeCA9IGFbMF0gLSBiWzBdO1xuICAgIGNvbnN0IGR5ID0gYVsxXSAtIGJbMV07XG4gICAgY29uc3QgZHogPSBhWzJdIC0gYlsyXTtcbiAgICBjb25zdCBkdyA9IGFbM10gLSBiWzNdO1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHogKyBkdyAqIGR3O1xufVxuLyoqXG4gKiBDb21wdXRlcyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgcG9pbnRzIChzYW1lIGFzIGRpc3RhbmNlU3EpXG4gKiBAcGFyYW0gYSAtIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gdmVjdG9yLlxuICogQHJldHVybnMgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xuY29uc3QgZGlzdFNxID0gZGlzdGFuY2VTcTtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBpdHMgRXVjbGlkZWFuIGxlbmd0aCBhbmQgcmV0dXJucyB0aGUgcXVvdGllbnQuXG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIG5vcm1hbGl6ZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemUodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGNvbnN0IHYwID0gdlswXTtcbiAgICBjb25zdCB2MSA9IHZbMV07XG4gICAgY29uc3QgdjIgPSB2WzJdO1xuICAgIGNvbnN0IHYzID0gdlszXTtcbiAgICBjb25zdCBsZW4gPSBNYXRoLnNxcnQodjAgKiB2MCArIHYxICogdjEgKyB2MiAqIHYyICsgdjMgKiB2Myk7XG4gICAgaWYgKGxlbiA+IDAuMDAwMDEpIHtcbiAgICAgICAgZHN0WzBdID0gdjAgLyBsZW47XG4gICAgICAgIGRzdFsxXSA9IHYxIC8gbGVuO1xuICAgICAgICBkc3RbMl0gPSB2MiAvIGxlbjtcbiAgICAgICAgZHN0WzNdID0gdjMgLyBsZW47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkc3RbMF0gPSAwO1xuICAgICAgICBkc3RbMV0gPSAwO1xuICAgICAgICBkc3RbMl0gPSAwO1xuICAgICAgICBkc3RbM10gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBOZWdhdGVzIGEgdmVjdG9yLlxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIC12LlxuICovXG5mdW5jdGlvbiBuZWdhdGUodiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IC12WzBdO1xuICAgIGRzdFsxXSA9IC12WzFdO1xuICAgIGRzdFsyXSA9IC12WzJdO1xuICAgIGRzdFszXSA9IC12WzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENvcGllcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzQuY2xvbmV9KVxuICogQWxzbyBzZWUge0BsaW5rIHZlYzQuY3JlYXRlfSBhbmQge0BsaW5rIHZlYzQuc2V0fVxuICogQHBhcmFtIHYgLSBUaGUgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIEEgY29weSBvZiB2LlxuICovXG5mdW5jdGlvbiBjb3B5KHYsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSB2WzBdO1xuICAgIGRzdFsxXSA9IHZbMV07XG4gICAgZHN0WzJdID0gdlsyXTtcbiAgICBkc3RbM10gPSB2WzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIENsb25lcyBhIHZlY3Rvci4gKHNhbWUgYXMge0BsaW5rIHZlYzQuY29weX0pXG4gKiBBbHNvIHNlZSB7QGxpbmsgdmVjNC5jcmVhdGV9IGFuZCB7QGxpbmsgdmVjNC5zZXR9XG4gKiBAcGFyYW0gdiAtIFRoZSB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgQSBjb3B5IG9mIHYuXG4gKi9cbmNvbnN0IGNsb25lID0gY29weTtcbi8qKlxuICogTXVsdGlwbGllcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBwcm9kdWN0cyBvZiBlbnRyaWVzIG9mIGEgYW5kIGIuXG4gKi9cbmZ1bmN0aW9uIG11bHRpcGx5KGEsIGIsIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSBhWzBdICogYlswXTtcbiAgICBkc3RbMV0gPSBhWzFdICogYlsxXTtcbiAgICBkc3RbMl0gPSBhWzJdICogYlsyXTtcbiAgICBkc3RbM10gPSBhWzNdICogYlszXTtcbiAgICByZXR1cm4gZHN0O1xufVxuLyoqXG4gKiBNdWx0aXBsaWVzIGEgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIChjb21wb25lbnQtd2lzZSk7IGFzc3VtZXMgYSBhbmRcbiAqIGIgaGF2ZSB0aGUgc2FtZSBsZW5ndGguIChzYW1lIGFzIG11bClcbiAqIEBwYXJhbSBhIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gYiAtIE9wZXJhbmQgdmVjdG9yLlxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB2ZWN0b3Igb2YgcHJvZHVjdHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBtdWwgPSBtdWx0aXBseTtcbi8qKlxuICogRGl2aWRlcyBhIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoY29tcG9uZW50LXdpc2UpOyBhc3N1bWVzIGEgYW5kXG4gKiBiIGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5mdW5jdGlvbiBkaXZpZGUoYSwgYiwgZHN0KSB7XG4gICAgZHN0ID0gZHN0IHx8IG5ldyBWZWNUeXBlKDQpO1xuICAgIGRzdFswXSA9IGFbMF0gLyBiWzBdO1xuICAgIGRzdFsxXSA9IGFbMV0gLyBiWzFdO1xuICAgIGRzdFsyXSA9IGFbMl0gLyBiWzJdO1xuICAgIGRzdFszXSA9IGFbM10gLyBiWzNdO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIERpdmlkZXMgYSB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKGNvbXBvbmVudC13aXNlKTsgYXNzdW1lcyBhIGFuZFxuICogYiBoYXZlIHRoZSBzYW1lIGxlbmd0aC4gKHNhbWUgYXMgZGl2aWRlKVxuICogQHBhcmFtIGEgLSBPcGVyYW5kIHZlY3Rvci5cbiAqIEBwYXJhbSBiIC0gT3BlcmFuZCB2ZWN0b3IuXG4gKiBAcGFyYW0gZHN0IC0gdmVjdG9yIHRvIGhvbGQgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGluIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgVGhlIHZlY3RvciBvZiBxdW90aWVudHMgb2YgZW50cmllcyBvZiBhIGFuZCBiLlxuICovXG5jb25zdCBkaXYgPSBkaXZpZGU7XG4vKipcbiAqIFplcm8ncyBhIHZlY3RvclxuICogQHBhcmFtIGRzdCAtIHZlY3RvciB0byBob2xkIHJlc3VsdC4gSWYgbm90IHBhc3NlZCBpbiBhIG5ldyBvbmUgaXMgY3JlYXRlZC5cbiAqIEByZXR1cm5zIFRoZSB6ZXJvZWQgdmVjdG9yLlxuICovXG5mdW5jdGlvbiB6ZXJvKGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBkc3RbMF0gPSAwO1xuICAgIGRzdFsxXSA9IDA7XG4gICAgZHN0WzJdID0gMDtcbiAgICBkc3RbM10gPSAwO1xuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIHRyYW5zZm9ybSB2ZWM0IGJ5IDR4NCBtYXRyaXhcbiAqIEBwYXJhbSB2IC0gdGhlIHZlY3RvclxuICogQHBhcmFtIG0gLSBUaGUgbWF0cml4LlxuICogQHBhcmFtIGRzdCAtIG9wdGlvbmFsIHZlYzQgdG8gc3RvcmUgcmVzdWx0LiBJZiBub3QgcGFzc2VkIGEgbmV3IG9uZSBpcyBjcmVhdGVkLlxuICogQHJldHVybnMgdGhlIHRyYW5zZm9ybWVkIHZlY3RvclxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0KHYsIG0sIGRzdCkge1xuICAgIGRzdCA9IGRzdCB8fCBuZXcgVmVjVHlwZSg0KTtcbiAgICBjb25zdCB4ID0gdlswXTtcbiAgICBjb25zdCB5ID0gdlsxXTtcbiAgICBjb25zdCB6ID0gdlsyXTtcbiAgICBjb25zdCB3ID0gdlszXTtcbiAgICBkc3RbMF0gPSBtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSAqIHc7XG4gICAgZHN0WzFdID0gbVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10gKiB3O1xuICAgIGRzdFsyXSA9IG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSAqIHc7XG4gICAgZHN0WzNdID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdICogdztcbiAgICByZXR1cm4gZHN0O1xufVxuXG52YXIgdmVjNEltcGwgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7XG4gICAgX19wcm90b19fOiBudWxsLFxuICAgIGNyZWF0ZTogY3JlYXRlLFxuICAgIHNldERlZmF1bHRUeXBlOiBzZXREZWZhdWx0VHlwZSQxLFxuICAgIGZyb21WYWx1ZXM6IGZyb21WYWx1ZXMsXG4gICAgc2V0OiBzZXQsXG4gICAgY2VpbDogY2VpbCxcbiAgICBmbG9vcjogZmxvb3IsXG4gICAgcm91bmQ6IHJvdW5kLFxuICAgIGNsYW1wOiBjbGFtcCxcbiAgICBhZGQ6IGFkZCxcbiAgICBhZGRTY2FsZWQ6IGFkZFNjYWxlZCxcbiAgICBzdWJ0cmFjdDogc3VidHJhY3QsXG4gICAgc3ViOiBzdWIsXG4gICAgZXF1YWxzQXBwcm94aW1hdGVseTogZXF1YWxzQXBwcm94aW1hdGVseSxcbiAgICBlcXVhbHM6IGVxdWFscyxcbiAgICBsZXJwOiBsZXJwLFxuICAgIGxlcnBWOiBsZXJwVixcbiAgICBtYXg6IG1heCxcbiAgICBtaW46IG1pbixcbiAgICBtdWxTY2FsYXI6IG11bFNjYWxhcixcbiAgICBzY2FsZTogc2NhbGUsXG4gICAgZGl2U2NhbGFyOiBkaXZTY2FsYXIsXG4gICAgaW52ZXJzZTogaW52ZXJzZSxcbiAgICBpbnZlcnQ6IGludmVydCxcbiAgICBkb3Q6IGRvdCxcbiAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICBsZW46IGxlbixcbiAgICBsZW5ndGhTcTogbGVuZ3RoU3EsXG4gICAgbGVuU3E6IGxlblNxLFxuICAgIGRpc3RhbmNlOiBkaXN0YW5jZSxcbiAgICBkaXN0OiBkaXN0LFxuICAgIGRpc3RhbmNlU3E6IGRpc3RhbmNlU3EsXG4gICAgZGlzdFNxOiBkaXN0U3EsXG4gICAgbm9ybWFsaXplOiBub3JtYWxpemUsXG4gICAgbmVnYXRlOiBuZWdhdGUsXG4gICAgY29weTogY29weSxcbiAgICBjbG9uZTogY2xvbmUsXG4gICAgbXVsdGlwbHk6IG11bHRpcGx5LFxuICAgIG11bDogbXVsLFxuICAgIGRpdmlkZTogZGl2aWRlLFxuICAgIGRpdjogZGl2LFxuICAgIHplcm86IHplcm8sXG4gICAgdHJhbnNmb3JtTWF0NDogdHJhbnNmb3JtTWF0NFxufSk7XG5cbi8qKlxuICogU2V0cyB0aGUgdHlwZSB0aGlzIGxpYnJhcnkgY3JlYXRlcyBmb3IgYWxsIHR5cGVzXG4gKlxuICogZXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHNldERlZmF1bHRUeXBlKEZsb2F0NjRBcnJheSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gY3RvciAtIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUuIEVpdGhlciBgRmxvYXQzMkFycmF5YCwgYEZsb2F0NjRBcnJheWAsIG9yIGBBcnJheWBcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdFR5cGUoY3Rvcikge1xuICAgIHNldERlZmF1bHRUeXBlJDUoY3Rvcik7XG4gICAgc2V0RGVmYXVsdFR5cGUkMyhjdG9yKTtcbiAgICBzZXREZWZhdWx0VHlwZSQyKGN0b3IpO1xuICAgIHNldERlZmF1bHRUeXBlJDYoY3Rvcik7XG4gICAgc2V0RGVmYXVsdFR5cGUkNChjdG9yKTtcbiAgICBzZXREZWZhdWx0VHlwZSQxKGN0b3IpO1xufVxuXG5leHBvcnQgeyBtYXQzSW1wbCBhcyBtYXQzLCBtYXQ0SW1wbCBhcyBtYXQ0LCBxdWF0SW1wbCBhcyBxdWF0LCBzZXREZWZhdWx0VHlwZSwgdXRpbHMsIHZlYzJJbXBsIGFzIHZlYzIsIHZlYzNJbXBsIGFzIHZlYzMsIHZlYzRJbXBsIGFzIHZlYzQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdncHUtbWF0cml4Lm1vZHVsZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/wgpu-matrix/dist/2.x/wgpu-matrix.module.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;